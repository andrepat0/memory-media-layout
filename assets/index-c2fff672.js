var xZ=Object.defineProperty;var IZ=(n,e,t)=>e in n?xZ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Wr=(n,e,t)=>(IZ(n,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var Ze=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zu(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function $c(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var Pj={exports:{}},Nx={},Oj={exports:{}},ar={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IS=Symbol.for("react.element"),bZ=Symbol.for("react.portal"),MZ=Symbol.for("react.fragment"),RZ=Symbol.for("react.strict_mode"),NZ=Symbol.for("react.profiler"),PZ=Symbol.for("react.provider"),OZ=Symbol.for("react.context"),DZ=Symbol.for("react.forward_ref"),LZ=Symbol.for("react.suspense"),kZ=Symbol.for("react.memo"),BZ=Symbol.for("react.lazy"),O5=Symbol.iterator;function FZ(n){return n===null||typeof n!="object"?null:(n=O5&&n[O5]||n["@@iterator"],typeof n=="function"?n:null)}var Dj={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Lj=Object.assign,kj={};function nv(n,e,t){this.props=n,this.context=e,this.refs=kj,this.updater=t||Dj}nv.prototype.isReactComponent={};nv.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};nv.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function Bj(){}Bj.prototype=nv.prototype;function pP(n,e,t){this.props=n,this.context=e,this.refs=kj,this.updater=t||Dj}var mP=pP.prototype=new Bj;mP.constructor=pP;Lj(mP,nv.prototype);mP.isPureReactComponent=!0;var D5=Array.isArray,Fj=Object.prototype.hasOwnProperty,gP={current:null},zj={key:!0,ref:!0,__self:!0,__source:!0};function Uj(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Fj.call(e,r)&&!zj.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:IS,type:n,key:s,ref:o,props:i,_owner:gP.current}}function zZ(n,e){return{$$typeof:IS,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function vP(n){return typeof n=="object"&&n!==null&&n.$$typeof===IS}function UZ(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var L5=/\/+/g;function kb(n,e){return typeof n=="object"&&n!==null&&n.key!=null?UZ(""+n.key):e.toString(36)}function Fw(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case IS:case bZ:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+kb(o,0):r,D5(i)?(t="",n!=null&&(t=n.replace(L5,"$&/")+"/"),Fw(i,e,t,"",function(c){return c})):i!=null&&(vP(i)&&(i=zZ(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(L5,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",D5(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+kb(s,a);o+=Fw(s,e,t,l,i)}else if(l=FZ(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+kb(s,a++),o+=Fw(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function gE(n,e,t){if(n==null)return n;var r=[],i=0;return Fw(n,r,"","",function(s){return e.call(t,s,i++)}),r}function jZ(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var ua={current:null},zw={transition:null},GZ={ReactCurrentDispatcher:ua,ReactCurrentBatchConfig:zw,ReactCurrentOwner:gP};function jj(){throw Error("act(...) is not supported in production builds of React.")}ar.Children={map:gE,forEach:function(n,e,t){gE(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return gE(n,function(){e++}),e},toArray:function(n){return gE(n,function(e){return e})||[]},only:function(n){if(!vP(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};ar.Component=nv;ar.Fragment=MZ;ar.Profiler=NZ;ar.PureComponent=pP;ar.StrictMode=RZ;ar.Suspense=LZ;ar.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GZ;ar.act=jj;ar.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=Lj({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=gP.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)Fj.call(e,l)&&!zj.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:IS,type:n.type,key:i,ref:s,props:r,_owner:o}};ar.createContext=function(n){return n={$$typeof:OZ,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:PZ,_context:n},n.Consumer=n};ar.createElement=Uj;ar.createFactory=function(n){var e=Uj.bind(null,n);return e.type=n,e};ar.createRef=function(){return{current:null}};ar.forwardRef=function(n){return{$$typeof:DZ,render:n}};ar.isValidElement=vP;ar.lazy=function(n){return{$$typeof:BZ,_payload:{_status:-1,_result:n},_init:jZ}};ar.memo=function(n,e){return{$$typeof:kZ,type:n,compare:e===void 0?null:e}};ar.startTransition=function(n){var e=zw.transition;zw.transition={};try{n()}finally{zw.transition=e}};ar.unstable_act=jj;ar.useCallback=function(n,e){return ua.current.useCallback(n,e)};ar.useContext=function(n){return ua.current.useContext(n)};ar.useDebugValue=function(){};ar.useDeferredValue=function(n){return ua.current.useDeferredValue(n)};ar.useEffect=function(n,e){return ua.current.useEffect(n,e)};ar.useId=function(){return ua.current.useId()};ar.useImperativeHandle=function(n,e,t){return ua.current.useImperativeHandle(n,e,t)};ar.useInsertionEffect=function(n,e){return ua.current.useInsertionEffect(n,e)};ar.useLayoutEffect=function(n,e){return ua.current.useLayoutEffect(n,e)};ar.useMemo=function(n,e){return ua.current.useMemo(n,e)};ar.useReducer=function(n,e,t){return ua.current.useReducer(n,e,t)};ar.useRef=function(n){return ua.current.useRef(n)};ar.useState=function(n){return ua.current.useState(n)};ar.useSyncExternalStore=function(n,e,t){return ua.current.useSyncExternalStore(n,e,t)};ar.useTransition=function(){return ua.current.useTransition()};ar.version="18.3.1";Oj.exports=ar;var D=Oj.exports;const ht=zu(D);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HZ=D,VZ=Symbol.for("react.element"),$Z=Symbol.for("react.fragment"),WZ=Object.prototype.hasOwnProperty,qZ=HZ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,QZ={key:!0,ref:!0,__self:!0,__source:!0};function Gj(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)WZ.call(e,r)&&!QZ.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:VZ,type:n,key:s,ref:o,props:i,_owner:qZ.current}}Nx.Fragment=$Z;Nx.jsx=Gj;Nx.jsxs=Gj;Pj.exports=Nx;var w=Pj.exports,xR={},Hj={exports:{}},pl={},Vj={exports:{}},$j={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(W,ee){var Q=W.length;W.push(ee);e:for(;0<Q;){var Y=Q-1>>>1,ae=W[Y];if(0<i(ae,ee))W[Y]=ee,W[Q]=ae,Q=Y;else break e}}function t(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var ee=W[0],Q=W.pop();if(Q!==ee){W[0]=Q;e:for(var Y=0,ae=W.length,fe=ae>>>1;Y<fe;){var we=2*(Y+1)-1,ge=W[we],Se=we+1,Ke=W[Se];if(0>i(ge,Q))Se<ae&&0>i(Ke,ge)?(W[Y]=Ke,W[Se]=Q,Y=Se):(W[Y]=ge,W[we]=Q,Y=we);else if(Se<ae&&0>i(Ke,Q))W[Y]=Ke,W[Se]=Q,Y=Se;else break e}}return ee}function i(W,ee){var Q=W.sortIndex-ee.sortIndex;return Q!==0?Q:W.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,h=3,f=!1,m=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(W){for(var ee=t(c);ee!==null;){if(ee.callback===null)r(c);else if(ee.startTime<=W)r(c),ee.sortIndex=ee.expirationTime,e(l,ee);else break;ee=t(c)}}function T(W){if(g=!1,C(W),!m)if(t(l)!==null)m=!0,K(x);else{var ee=t(c);ee!==null&&se(T,ee.startTime-W)}}function x(W,ee){m=!1,g&&(g=!1,y(M),M=-1),f=!0;var Q=h;try{for(C(ee),d=t(l);d!==null&&(!(d.expirationTime>ee)||W&&!z());){var Y=d.callback;if(typeof Y=="function"){d.callback=null,h=d.priorityLevel;var ae=Y(d.expirationTime<=ee);ee=n.unstable_now(),typeof ae=="function"?d.callback=ae:d===t(l)&&r(l),C(ee)}else r(l);d=t(l)}if(d!==null)var fe=!0;else{var we=t(c);we!==null&&se(T,we.startTime-ee),fe=!1}return fe}finally{d=null,h=Q,f=!1}}var R=!1,N=null,M=-1,O=5,P=-1;function z(){return!(n.unstable_now()-P<O)}function V(){if(N!==null){var W=n.unstable_now();P=W;var ee=!0;try{ee=N(!0,W)}finally{ee?$():(R=!1,N=null)}}else R=!1}var $;if(typeof A=="function")$=function(){A(V)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,q=B.port2;B.port1.onmessage=V,$=function(){q.postMessage(null)}}else $=function(){v(V,0)};function K(W){N=W,R||(R=!0,$())}function se(W,ee){M=v(function(){W(n.unstable_now())},ee)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(W){W.callback=null},n.unstable_continueExecution=function(){m||f||(m=!0,K(x))},n.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<W?Math.floor(1e3/W):5},n.unstable_getCurrentPriorityLevel=function(){return h},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(W){switch(h){case 1:case 2:case 3:var ee=3;break;default:ee=h}var Q=h;h=ee;try{return W()}finally{h=Q}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(W,ee){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var Q=h;h=W;try{return ee()}finally{h=Q}},n.unstable_scheduleCallback=function(W,ee,Q){var Y=n.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?Y+Q:Y):Q=Y,W){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=Q+ae,W={id:u++,callback:ee,priorityLevel:W,startTime:Q,expirationTime:ae,sortIndex:-1},Q>Y?(W.sortIndex=Q,e(c,W),t(l)===null&&W===t(c)&&(g?(y(M),M=-1):g=!0,se(T,Q-Y))):(W.sortIndex=ae,e(l,W),m||f||(m=!0,K(x))),W},n.unstable_shouldYield=z,n.unstable_wrapCallback=function(W){var ee=h;return function(){var Q=h;h=ee;try{return W.apply(this,arguments)}finally{h=Q}}}})($j);Vj.exports=$j;var JZ=Vj.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KZ=D,ul=JZ;function yt(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Wj=new Set,k_={};function Fm(n,e){Rg(n,e),Rg(n+"Capture",e)}function Rg(n,e){for(k_[n]=e,n=0;n<e.length;n++)Wj.add(e[n])}var $d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),IR=Object.prototype.hasOwnProperty,YZ=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,k5={},B5={};function XZ(n){return IR.call(B5,n)?!0:IR.call(k5,n)?!1:YZ.test(n)?B5[n]=!0:(k5[n]=!0,!1)}function ZZ(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function eee(n,e,t,r){if(e===null||typeof e>"u"||ZZ(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function da(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var io={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){io[n]=new da(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];io[e]=new da(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){io[n]=new da(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){io[n]=new da(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){io[n]=new da(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){io[n]=new da(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){io[n]=new da(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){io[n]=new da(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){io[n]=new da(n,5,!1,n.toLowerCase(),null,!1,!1)});var yP=/[\-:]([a-z])/g;function _P(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(yP,_P);io[e]=new da(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(yP,_P);io[e]=new da(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(yP,_P);io[e]=new da(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){io[n]=new da(n,1,!1,n.toLowerCase(),null,!1,!1)});io.xlinkHref=new da("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){io[n]=new da(n,1,!1,n.toLowerCase(),null,!0,!0)});function SP(n,e,t,r){var i=io.hasOwnProperty(e)?io[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(eee(e,t,i,r)&&(t=null),r||i===null?XZ(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var ih=KZ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vE=Symbol.for("react.element"),q0=Symbol.for("react.portal"),Q0=Symbol.for("react.fragment"),AP=Symbol.for("react.strict_mode"),bR=Symbol.for("react.profiler"),qj=Symbol.for("react.provider"),Qj=Symbol.for("react.context"),EP=Symbol.for("react.forward_ref"),MR=Symbol.for("react.suspense"),RR=Symbol.for("react.suspense_list"),CP=Symbol.for("react.memo"),Zh=Symbol.for("react.lazy"),Jj=Symbol.for("react.offscreen"),F5=Symbol.iterator;function Gv(n){return n===null||typeof n!="object"?null:(n=F5&&n[F5]||n["@@iterator"],typeof n=="function"?n:null)}var bi=Object.assign,Bb;function s_(n){if(Bb===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Bb=e&&e[1]||""}return`
`+Bb+n}var Fb=!1;function zb(n,e){if(!n||Fb)return"";Fb=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{Fb=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?s_(n):""}function tee(n){switch(n.tag){case 5:return s_(n.type);case 16:return s_("Lazy");case 13:return s_("Suspense");case 19:return s_("SuspenseList");case 0:case 2:case 15:return n=zb(n.type,!1),n;case 11:return n=zb(n.type.render,!1),n;case 1:return n=zb(n.type,!0),n;default:return""}}function NR(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Q0:return"Fragment";case q0:return"Portal";case bR:return"Profiler";case AP:return"StrictMode";case MR:return"Suspense";case RR:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Qj:return(n.displayName||"Context")+".Consumer";case qj:return(n._context.displayName||"Context")+".Provider";case EP:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case CP:return e=n.displayName||null,e!==null?e:NR(n.type)||"Memo";case Zh:e=n._payload,n=n._init;try{return NR(n(e))}catch{}}return null}function nee(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return NR(e);case 8:return e===AP?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Nf(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Kj(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ree(n){var e=Kj(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function yE(n){n._valueTracker||(n._valueTracker=ree(n))}function Yj(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=Kj(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function ET(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function PR(n,e){var t=e.checked;return bi({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function z5(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=Nf(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Xj(n,e){e=e.checked,e!=null&&SP(n,"checked",e,!1)}function OR(n,e){Xj(n,e);var t=Nf(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?DR(n,e.type,t):e.hasOwnProperty("defaultValue")&&DR(n,e.type,Nf(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function U5(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function DR(n,e,t){(e!=="number"||ET(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var o_=Array.isArray;function mg(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+Nf(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function LR(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(yt(91));return bi({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function j5(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(yt(92));if(o_(t)){if(1<t.length)throw Error(yt(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Nf(t)}}function Zj(n,e){var t=Nf(e.value),r=Nf(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function G5(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function eG(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function kR(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?eG(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var _E,tG=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(_E=_E||document.createElement("div"),_E.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=_E.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function B_(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var __={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},iee=["Webkit","ms","Moz","O"];Object.keys(__).forEach(function(n){iee.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),__[e]=__[n]})});function nG(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||__.hasOwnProperty(n)&&__[n]?(""+e).trim():e+"px"}function rG(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=nG(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var see=bi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function BR(n,e){if(e){if(see[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(yt(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(yt(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(yt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(yt(62))}}function FR(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zR=null;function wP(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var UR=null,gg=null,vg=null;function H5(n){if(n=RS(n)){if(typeof UR!="function")throw Error(yt(280));var e=n.stateNode;e&&(e=kx(e),UR(n.stateNode,n.type,e))}}function iG(n){gg?vg?vg.push(n):vg=[n]:gg=n}function sG(){if(gg){var n=gg,e=vg;if(vg=gg=null,H5(n),e)for(n=0;n<e.length;n++)H5(e[n])}}function oG(n,e){return n(e)}function aG(){}var Ub=!1;function lG(n,e,t){if(Ub)return n(e,t);Ub=!0;try{return oG(n,e,t)}finally{Ub=!1,(gg!==null||vg!==null)&&(aG(),sG())}}function F_(n,e){var t=n.stateNode;if(t===null)return null;var r=kx(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(yt(231,e,typeof t));return t}var jR=!1;if($d)try{var Hv={};Object.defineProperty(Hv,"passive",{get:function(){jR=!0}}),window.addEventListener("test",Hv,Hv),window.removeEventListener("test",Hv,Hv)}catch{jR=!1}function oee(n,e,t,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var S_=!1,CT=null,wT=!1,GR=null,aee={onError:function(n){S_=!0,CT=n}};function lee(n,e,t,r,i,s,o,a,l){S_=!1,CT=null,oee.apply(aee,arguments)}function cee(n,e,t,r,i,s,o,a,l){if(lee.apply(this,arguments),S_){if(S_){var c=CT;S_=!1,CT=null}else throw Error(yt(198));wT||(wT=!0,GR=c)}}function zm(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function cG(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function V5(n){if(zm(n)!==n)throw Error(yt(188))}function uee(n){var e=n.alternate;if(!e){if(e=zm(n),e===null)throw Error(yt(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return V5(i),n;if(s===r)return V5(i),e;s=s.sibling}throw Error(yt(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(yt(189))}}if(t.alternate!==r)throw Error(yt(190))}if(t.tag!==3)throw Error(yt(188));return t.stateNode.current===t?n:e}function uG(n){return n=uee(n),n!==null?dG(n):null}function dG(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=dG(n);if(e!==null)return e;n=n.sibling}return null}var hG=ul.unstable_scheduleCallback,$5=ul.unstable_cancelCallback,dee=ul.unstable_shouldYield,hee=ul.unstable_requestPaint,es=ul.unstable_now,fee=ul.unstable_getCurrentPriorityLevel,TP=ul.unstable_ImmediatePriority,fG=ul.unstable_UserBlockingPriority,TT=ul.unstable_NormalPriority,pee=ul.unstable_LowPriority,pG=ul.unstable_IdlePriority,Px=null,Nu=null;function mee(n){if(Nu&&typeof Nu.onCommitFiberRoot=="function")try{Nu.onCommitFiberRoot(Px,n,void 0,(n.current.flags&128)===128)}catch{}}var Bc=Math.clz32?Math.clz32:yee,gee=Math.log,vee=Math.LN2;function yee(n){return n>>>=0,n===0?32:31-(gee(n)/vee|0)|0}var SE=64,AE=4194304;function a_(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function xT(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=a_(a):(s&=o,s!==0&&(r=a_(s)))}else o=t&~i,o!==0?r=a_(o):s!==0&&(r=a_(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Bc(e),i=1<<t,r|=n[t],e&=~i;return r}function _ee(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function See(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Bc(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=_ee(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function HR(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function mG(){var n=SE;return SE<<=1,!(SE&4194240)&&(SE=64),n}function jb(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function bS(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Bc(e),n[e]=t}function Aee(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Bc(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function xP(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Bc(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var Fr=0;function gG(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var vG,IP,yG,_G,SG,VR=!1,EE=[],yf=null,_f=null,Sf=null,z_=new Map,U_=new Map,of=[],Eee="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function W5(n,e){switch(n){case"focusin":case"focusout":yf=null;break;case"dragenter":case"dragleave":_f=null;break;case"mouseover":case"mouseout":Sf=null;break;case"pointerover":case"pointerout":z_.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":U_.delete(e.pointerId)}}function Vv(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=RS(e),e!==null&&IP(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function Cee(n,e,t,r,i){switch(e){case"focusin":return yf=Vv(yf,n,e,t,r,i),!0;case"dragenter":return _f=Vv(_f,n,e,t,r,i),!0;case"mouseover":return Sf=Vv(Sf,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return z_.set(s,Vv(z_.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,U_.set(s,Vv(U_.get(s)||null,n,e,t,r,i)),!0}return!1}function AG(n){var e=rm(n.target);if(e!==null){var t=zm(e);if(t!==null){if(e=t.tag,e===13){if(e=cG(t),e!==null){n.blockedOn=e,SG(n.priority,function(){yG(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Uw(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=$R(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);zR=r,t.target.dispatchEvent(r),zR=null}else return e=RS(t),e!==null&&IP(e),n.blockedOn=t,!1;e.shift()}return!0}function q5(n,e,t){Uw(n)&&t.delete(e)}function wee(){VR=!1,yf!==null&&Uw(yf)&&(yf=null),_f!==null&&Uw(_f)&&(_f=null),Sf!==null&&Uw(Sf)&&(Sf=null),z_.forEach(q5),U_.forEach(q5)}function $v(n,e){n.blockedOn===e&&(n.blockedOn=null,VR||(VR=!0,ul.unstable_scheduleCallback(ul.unstable_NormalPriority,wee)))}function j_(n){function e(i){return $v(i,n)}if(0<EE.length){$v(EE[0],n);for(var t=1;t<EE.length;t++){var r=EE[t];r.blockedOn===n&&(r.blockedOn=null)}}for(yf!==null&&$v(yf,n),_f!==null&&$v(_f,n),Sf!==null&&$v(Sf,n),z_.forEach(e),U_.forEach(e),t=0;t<of.length;t++)r=of[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<of.length&&(t=of[0],t.blockedOn===null);)AG(t),t.blockedOn===null&&of.shift()}var yg=ih.ReactCurrentBatchConfig,IT=!0;function Tee(n,e,t,r){var i=Fr,s=yg.transition;yg.transition=null;try{Fr=1,bP(n,e,t,r)}finally{Fr=i,yg.transition=s}}function xee(n,e,t,r){var i=Fr,s=yg.transition;yg.transition=null;try{Fr=4,bP(n,e,t,r)}finally{Fr=i,yg.transition=s}}function bP(n,e,t,r){if(IT){var i=$R(n,e,t,r);if(i===null)Yb(n,e,r,bT,t),W5(n,r);else if(Cee(i,n,e,t,r))r.stopPropagation();else if(W5(n,r),e&4&&-1<Eee.indexOf(n)){for(;i!==null;){var s=RS(i);if(s!==null&&vG(s),s=$R(n,e,t,r),s===null&&Yb(n,e,r,bT,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else Yb(n,e,r,null,t)}}var bT=null;function $R(n,e,t,r){if(bT=null,n=wP(r),n=rm(n),n!==null)if(e=zm(n),e===null)n=null;else if(t=e.tag,t===13){if(n=cG(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return bT=n,null}function EG(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fee()){case TP:return 1;case fG:return 4;case TT:case pee:return 16;case pG:return 536870912;default:return 16}default:return 16}}var uf=null,MP=null,jw=null;function CG(){if(jw)return jw;var n,e=MP,t=e.length,r,i="value"in uf?uf.value:uf.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return jw=i.slice(n,1<r?1-r:void 0)}function Gw(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function CE(){return!0}function Q5(){return!1}function ml(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?CE:Q5,this.isPropagationStopped=Q5,this}return bi(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=CE)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=CE)},persist:function(){},isPersistent:CE}),e}var rv={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},RP=ml(rv),MS=bi({},rv,{view:0,detail:0}),Iee=ml(MS),Gb,Hb,Wv,Ox=bi({},MS,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:NP,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Wv&&(Wv&&n.type==="mousemove"?(Gb=n.screenX-Wv.screenX,Hb=n.screenY-Wv.screenY):Hb=Gb=0,Wv=n),Gb)},movementY:function(n){return"movementY"in n?n.movementY:Hb}}),J5=ml(Ox),bee=bi({},Ox,{dataTransfer:0}),Mee=ml(bee),Ree=bi({},MS,{relatedTarget:0}),Vb=ml(Ree),Nee=bi({},rv,{animationName:0,elapsedTime:0,pseudoElement:0}),Pee=ml(Nee),Oee=bi({},rv,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Dee=ml(Oee),Lee=bi({},rv,{data:0}),K5=ml(Lee),kee={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bee={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fee={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zee(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=Fee[n])?!!e[n]:!1}function NP(){return zee}var Uee=bi({},MS,{key:function(n){if(n.key){var e=kee[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Gw(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Bee[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:NP,charCode:function(n){return n.type==="keypress"?Gw(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Gw(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),jee=ml(Uee),Gee=bi({},Ox,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Y5=ml(Gee),Hee=bi({},MS,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:NP}),Vee=ml(Hee),$ee=bi({},rv,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wee=ml($ee),qee=bi({},Ox,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Qee=ml(qee),Jee=[9,13,27,32],PP=$d&&"CompositionEvent"in window,A_=null;$d&&"documentMode"in document&&(A_=document.documentMode);var Kee=$d&&"TextEvent"in window&&!A_,wG=$d&&(!PP||A_&&8<A_&&11>=A_),X5=String.fromCharCode(32),Z5=!1;function TG(n,e){switch(n){case"keyup":return Jee.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xG(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var J0=!1;function Yee(n,e){switch(n){case"compositionend":return xG(e);case"keypress":return e.which!==32?null:(Z5=!0,X5);case"textInput":return n=e.data,n===X5&&Z5?null:n;default:return null}}function Xee(n,e){if(J0)return n==="compositionend"||!PP&&TG(n,e)?(n=CG(),jw=MP=uf=null,J0=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return wG&&e.locale!=="ko"?null:e.data;default:return null}}var Zee={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function eL(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!Zee[n.type]:e==="textarea"}function IG(n,e,t,r){iG(r),e=MT(e,"onChange"),0<e.length&&(t=new RP("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var E_=null,G_=null;function ete(n){FG(n,0)}function Dx(n){var e=X0(n);if(Yj(e))return n}function tte(n,e){if(n==="change")return e}var bG=!1;if($d){var $b;if($d){var Wb="oninput"in document;if(!Wb){var tL=document.createElement("div");tL.setAttribute("oninput","return;"),Wb=typeof tL.oninput=="function"}$b=Wb}else $b=!1;bG=$b&&(!document.documentMode||9<document.documentMode)}function nL(){E_&&(E_.detachEvent("onpropertychange",MG),G_=E_=null)}function MG(n){if(n.propertyName==="value"&&Dx(G_)){var e=[];IG(e,G_,n,wP(n)),lG(ete,e)}}function nte(n,e,t){n==="focusin"?(nL(),E_=e,G_=t,E_.attachEvent("onpropertychange",MG)):n==="focusout"&&nL()}function rte(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Dx(G_)}function ite(n,e){if(n==="click")return Dx(e)}function ste(n,e){if(n==="input"||n==="change")return Dx(e)}function ote(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var jc=typeof Object.is=="function"?Object.is:ote;function H_(n,e){if(jc(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!IR.call(e,i)||!jc(n[i],e[i]))return!1}return!0}function rL(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function iL(n,e){var t=rL(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=rL(t)}}function RG(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?RG(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function NG(){for(var n=window,e=ET();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=ET(n.document)}return e}function OP(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function ate(n){var e=NG(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&RG(t.ownerDocument.documentElement,t)){if(r!==null&&OP(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=iL(t,s);var o=iL(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var lte=$d&&"documentMode"in document&&11>=document.documentMode,K0=null,WR=null,C_=null,qR=!1;function sL(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;qR||K0==null||K0!==ET(r)||(r=K0,"selectionStart"in r&&OP(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),C_&&H_(C_,r)||(C_=r,r=MT(WR,"onSelect"),0<r.length&&(e=new RP("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=K0)))}function wE(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Y0={animationend:wE("Animation","AnimationEnd"),animationiteration:wE("Animation","AnimationIteration"),animationstart:wE("Animation","AnimationStart"),transitionend:wE("Transition","TransitionEnd")},qb={},PG={};$d&&(PG=document.createElement("div").style,"AnimationEvent"in window||(delete Y0.animationend.animation,delete Y0.animationiteration.animation,delete Y0.animationstart.animation),"TransitionEvent"in window||delete Y0.transitionend.transition);function Lx(n){if(qb[n])return qb[n];if(!Y0[n])return n;var e=Y0[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in PG)return qb[n]=e[t];return n}var OG=Lx("animationend"),DG=Lx("animationiteration"),LG=Lx("animationstart"),kG=Lx("transitionend"),BG=new Map,oL="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $f(n,e){BG.set(n,e),Fm(e,[n])}for(var Qb=0;Qb<oL.length;Qb++){var Jb=oL[Qb],cte=Jb.toLowerCase(),ute=Jb[0].toUpperCase()+Jb.slice(1);$f(cte,"on"+ute)}$f(OG,"onAnimationEnd");$f(DG,"onAnimationIteration");$f(LG,"onAnimationStart");$f("dblclick","onDoubleClick");$f("focusin","onFocus");$f("focusout","onBlur");$f(kG,"onTransitionEnd");Rg("onMouseEnter",["mouseout","mouseover"]);Rg("onMouseLeave",["mouseout","mouseover"]);Rg("onPointerEnter",["pointerout","pointerover"]);Rg("onPointerLeave",["pointerout","pointerover"]);Fm("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fm("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fm("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fm("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fm("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fm("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var l_="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dte=new Set("cancel close invalid load scroll toggle".split(" ").concat(l_));function aL(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,cee(r,e,void 0,n),n.currentTarget=null}function FG(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;aL(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;aL(i,a,c),s=l}}}if(wT)throw n=GR,wT=!1,GR=null,n}function oi(n,e){var t=e[XR];t===void 0&&(t=e[XR]=new Set);var r=n+"__bubble";t.has(r)||(zG(e,n,2,!1),t.add(r))}function Kb(n,e,t){var r=0;e&&(r|=4),zG(t,n,r,e)}var TE="_reactListening"+Math.random().toString(36).slice(2);function V_(n){if(!n[TE]){n[TE]=!0,Wj.forEach(function(t){t!=="selectionchange"&&(dte.has(t)||Kb(t,!1,n),Kb(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[TE]||(e[TE]=!0,Kb("selectionchange",!1,e))}}function zG(n,e,t,r){switch(EG(e)){case 1:var i=Tee;break;case 4:i=xee;break;default:i=bP}t=i.bind(null,e,t,n),i=void 0,!jR||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function Yb(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=rm(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}lG(function(){var c=s,u=wP(t),d=[];e:{var h=BG.get(n);if(h!==void 0){var f=RP,m=n;switch(n){case"keypress":if(Gw(t)===0)break e;case"keydown":case"keyup":f=jee;break;case"focusin":m="focus",f=Vb;break;case"focusout":m="blur",f=Vb;break;case"beforeblur":case"afterblur":f=Vb;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=J5;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=Mee;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=Vee;break;case OG:case DG:case LG:f=Pee;break;case kG:f=Wee;break;case"scroll":f=Iee;break;case"wheel":f=Qee;break;case"copy":case"cut":case"paste":f=Dee;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Y5}var g=(e&4)!==0,v=!g&&n==="scroll",y=g?h!==null?h+"Capture":null:h;g=[];for(var A=c,C;A!==null;){C=A;var T=C.stateNode;if(C.tag===5&&T!==null&&(C=T,y!==null&&(T=F_(A,y),T!=null&&g.push($_(A,T,C)))),v)break;A=A.return}0<g.length&&(h=new f(h,m,null,t,u),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=n==="mouseover"||n==="pointerover",f=n==="mouseout"||n==="pointerout",h&&t!==zR&&(m=t.relatedTarget||t.fromElement)&&(rm(m)||m[Wd]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(m=t.relatedTarget||t.toElement,f=c,m=m?rm(m):null,m!==null&&(v=zm(m),m!==v||m.tag!==5&&m.tag!==6)&&(m=null)):(f=null,m=c),f!==m)){if(g=J5,T="onMouseLeave",y="onMouseEnter",A="mouse",(n==="pointerout"||n==="pointerover")&&(g=Y5,T="onPointerLeave",y="onPointerEnter",A="pointer"),v=f==null?h:X0(f),C=m==null?h:X0(m),h=new g(T,A+"leave",f,t,u),h.target=v,h.relatedTarget=C,T=null,rm(u)===c&&(g=new g(y,A+"enter",m,t,u),g.target=C,g.relatedTarget=v,T=g),v=T,f&&m)t:{for(g=f,y=m,A=0,C=g;C;C=m0(C))A++;for(C=0,T=y;T;T=m0(T))C++;for(;0<A-C;)g=m0(g),A--;for(;0<C-A;)y=m0(y),C--;for(;A--;){if(g===y||y!==null&&g===y.alternate)break t;g=m0(g),y=m0(y)}g=null}else g=null;f!==null&&lL(d,h,f,g,!1),m!==null&&v!==null&&lL(d,v,m,g,!0)}}e:{if(h=c?X0(c):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var x=tte;else if(eL(h))if(bG)x=ste;else{x=rte;var R=nte}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(x=ite);if(x&&(x=x(n,c))){IG(d,x,t,u);break e}R&&R(n,h,c),n==="focusout"&&(R=h._wrapperState)&&R.controlled&&h.type==="number"&&DR(h,"number",h.value)}switch(R=c?X0(c):window,n){case"focusin":(eL(R)||R.contentEditable==="true")&&(K0=R,WR=c,C_=null);break;case"focusout":C_=WR=K0=null;break;case"mousedown":qR=!0;break;case"contextmenu":case"mouseup":case"dragend":qR=!1,sL(d,t,u);break;case"selectionchange":if(lte)break;case"keydown":case"keyup":sL(d,t,u)}var N;if(PP)e:{switch(n){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else J0?TG(n,t)&&(M="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(M="onCompositionStart");M&&(wG&&t.locale!=="ko"&&(J0||M!=="onCompositionStart"?M==="onCompositionEnd"&&J0&&(N=CG()):(uf=u,MP="value"in uf?uf.value:uf.textContent,J0=!0)),R=MT(c,M),0<R.length&&(M=new K5(M,n,null,t,u),d.push({event:M,listeners:R}),N?M.data=N:(N=xG(t),N!==null&&(M.data=N)))),(N=Kee?Yee(n,t):Xee(n,t))&&(c=MT(c,"onBeforeInput"),0<c.length&&(u=new K5("onBeforeInput","beforeinput",null,t,u),d.push({event:u,listeners:c}),u.data=N))}FG(d,e)})}function $_(n,e,t){return{instance:n,listener:e,currentTarget:t}}function MT(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=F_(n,t),s!=null&&r.unshift($_(n,s,i)),s=F_(n,e),s!=null&&r.push($_(n,s,i))),n=n.return}return r}function m0(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function lL(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=F_(t,s),l!=null&&o.unshift($_(t,l,a))):i||(l=F_(t,s),l!=null&&o.push($_(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var hte=/\r\n?/g,fte=/\u0000|\uFFFD/g;function cL(n){return(typeof n=="string"?n:""+n).replace(hte,`
`).replace(fte,"")}function xE(n,e,t){if(e=cL(e),cL(n)!==e&&t)throw Error(yt(425))}function RT(){}var QR=null,JR=null;function KR(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var YR=typeof setTimeout=="function"?setTimeout:void 0,pte=typeof clearTimeout=="function"?clearTimeout:void 0,uL=typeof Promise=="function"?Promise:void 0,mte=typeof queueMicrotask=="function"?queueMicrotask:typeof uL<"u"?function(n){return uL.resolve(null).then(n).catch(gte)}:YR;function gte(n){setTimeout(function(){throw n})}function Xb(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),j_(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);j_(e)}function Af(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function dL(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var iv=Math.random().toString(36).slice(2),wu="__reactFiber$"+iv,W_="__reactProps$"+iv,Wd="__reactContainer$"+iv,XR="__reactEvents$"+iv,vte="__reactListeners$"+iv,yte="__reactHandles$"+iv;function rm(n){var e=n[wu];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Wd]||t[wu]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=dL(n);n!==null;){if(t=n[wu])return t;n=dL(n)}return e}n=t,t=n.parentNode}return null}function RS(n){return n=n[wu]||n[Wd],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function X0(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(yt(33))}function kx(n){return n[W_]||null}var ZR=[],Z0=-1;function Wf(n){return{current:n}}function ci(n){0>Z0||(n.current=ZR[Z0],ZR[Z0]=null,Z0--)}function ei(n,e){Z0++,ZR[Z0]=n.current,n.current=e}var Pf={},Po=Wf(Pf),ka=Wf(!1),Am=Pf;function Ng(n,e){var t=n.type.contextTypes;if(!t)return Pf;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function Ba(n){return n=n.childContextTypes,n!=null}function NT(){ci(ka),ci(Po)}function hL(n,e,t){if(Po.current!==Pf)throw Error(yt(168));ei(Po,e),ei(ka,t)}function UG(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(yt(108,nee(n)||"Unknown",i));return bi({},t,r)}function PT(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Pf,Am=Po.current,ei(Po,n),ei(ka,ka.current),!0}function fL(n,e,t){var r=n.stateNode;if(!r)throw Error(yt(169));t?(n=UG(n,e,Am),r.__reactInternalMemoizedMergedChildContext=n,ci(ka),ci(Po),ei(Po,n)):ci(ka),ei(ka,t)}var xd=null,Bx=!1,Zb=!1;function jG(n){xd===null?xd=[n]:xd.push(n)}function _te(n){Bx=!0,jG(n)}function qf(){if(!Zb&&xd!==null){Zb=!0;var n=0,e=Fr;try{var t=xd;for(Fr=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}xd=null,Bx=!1}catch(i){throw xd!==null&&(xd=xd.slice(n+1)),hG(TP,qf),i}finally{Fr=e,Zb=!1}}return null}var eg=[],tg=0,OT=null,DT=0,zl=[],Ul=0,Em=null,Rd=1,Nd="";function Qp(n,e){eg[tg++]=DT,eg[tg++]=OT,OT=n,DT=e}function GG(n,e,t){zl[Ul++]=Rd,zl[Ul++]=Nd,zl[Ul++]=Em,Em=n;var r=Rd;n=Nd;var i=32-Bc(r)-1;r&=~(1<<i),t+=1;var s=32-Bc(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Rd=1<<32-Bc(e)+i|t<<i|r,Nd=s+n}else Rd=1<<s|t<<i|r,Nd=n}function DP(n){n.return!==null&&(Qp(n,1),GG(n,1,0))}function LP(n){for(;n===OT;)OT=eg[--tg],eg[tg]=null,DT=eg[--tg],eg[tg]=null;for(;n===Em;)Em=zl[--Ul],zl[Ul]=null,Nd=zl[--Ul],zl[Ul]=null,Rd=zl[--Ul],zl[Ul]=null}var ol=null,el=null,mi=!1,Nc=null;function HG(n,e){var t=Hl(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function pL(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,ol=n,el=Af(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,ol=n,el=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Em!==null?{id:Rd,overflow:Nd}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Hl(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,ol=n,el=null,!0):!1;default:return!1}}function e4(n){return(n.mode&1)!==0&&(n.flags&128)===0}function t4(n){if(mi){var e=el;if(e){var t=e;if(!pL(n,e)){if(e4(n))throw Error(yt(418));e=Af(t.nextSibling);var r=ol;e&&pL(n,e)?HG(r,t):(n.flags=n.flags&-4097|2,mi=!1,ol=n)}}else{if(e4(n))throw Error(yt(418));n.flags=n.flags&-4097|2,mi=!1,ol=n}}}function mL(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;ol=n}function IE(n){if(n!==ol)return!1;if(!mi)return mL(n),mi=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!KR(n.type,n.memoizedProps)),e&&(e=el)){if(e4(n))throw VG(),Error(yt(418));for(;e;)HG(n,e),e=Af(e.nextSibling)}if(mL(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(yt(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){el=Af(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}el=null}}else el=ol?Af(n.stateNode.nextSibling):null;return!0}function VG(){for(var n=el;n;)n=Af(n.nextSibling)}function Pg(){el=ol=null,mi=!1}function kP(n){Nc===null?Nc=[n]:Nc.push(n)}var Ste=ih.ReactCurrentBatchConfig;function qv(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(yt(309));var r=t.stateNode}if(!r)throw Error(yt(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(yt(284));if(!t._owner)throw Error(yt(290,n))}return n}function bE(n,e){throw n=Object.prototype.toString.call(e),Error(yt(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function gL(n){var e=n._init;return e(n._payload)}function $G(n){function e(y,A){if(n){var C=y.deletions;C===null?(y.deletions=[A],y.flags|=16):C.push(A)}}function t(y,A){if(!n)return null;for(;A!==null;)e(y,A),A=A.sibling;return null}function r(y,A){for(y=new Map;A!==null;)A.key!==null?y.set(A.key,A):y.set(A.index,A),A=A.sibling;return y}function i(y,A){return y=Tf(y,A),y.index=0,y.sibling=null,y}function s(y,A,C){return y.index=C,n?(C=y.alternate,C!==null?(C=C.index,C<A?(y.flags|=2,A):C):(y.flags|=2,A)):(y.flags|=1048576,A)}function o(y){return n&&y.alternate===null&&(y.flags|=2),y}function a(y,A,C,T){return A===null||A.tag!==6?(A=oM(C,y.mode,T),A.return=y,A):(A=i(A,C),A.return=y,A)}function l(y,A,C,T){var x=C.type;return x===Q0?u(y,A,C.props.children,T,C.key):A!==null&&(A.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Zh&&gL(x)===A.type)?(T=i(A,C.props),T.ref=qv(y,A,C),T.return=y,T):(T=Jw(C.type,C.key,C.props,null,y.mode,T),T.ref=qv(y,A,C),T.return=y,T)}function c(y,A,C,T){return A===null||A.tag!==4||A.stateNode.containerInfo!==C.containerInfo||A.stateNode.implementation!==C.implementation?(A=aM(C,y.mode,T),A.return=y,A):(A=i(A,C.children||[]),A.return=y,A)}function u(y,A,C,T,x){return A===null||A.tag!==7?(A=fm(C,y.mode,T,x),A.return=y,A):(A=i(A,C),A.return=y,A)}function d(y,A,C){if(typeof A=="string"&&A!==""||typeof A=="number")return A=oM(""+A,y.mode,C),A.return=y,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case vE:return C=Jw(A.type,A.key,A.props,null,y.mode,C),C.ref=qv(y,null,A),C.return=y,C;case q0:return A=aM(A,y.mode,C),A.return=y,A;case Zh:var T=A._init;return d(y,T(A._payload),C)}if(o_(A)||Gv(A))return A=fm(A,y.mode,C,null),A.return=y,A;bE(y,A)}return null}function h(y,A,C,T){var x=A!==null?A.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return x!==null?null:a(y,A,""+C,T);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case vE:return C.key===x?l(y,A,C,T):null;case q0:return C.key===x?c(y,A,C,T):null;case Zh:return x=C._init,h(y,A,x(C._payload),T)}if(o_(C)||Gv(C))return x!==null?null:u(y,A,C,T,null);bE(y,C)}return null}function f(y,A,C,T,x){if(typeof T=="string"&&T!==""||typeof T=="number")return y=y.get(C)||null,a(A,y,""+T,x);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case vE:return y=y.get(T.key===null?C:T.key)||null,l(A,y,T,x);case q0:return y=y.get(T.key===null?C:T.key)||null,c(A,y,T,x);case Zh:var R=T._init;return f(y,A,C,R(T._payload),x)}if(o_(T)||Gv(T))return y=y.get(C)||null,u(A,y,T,x,null);bE(A,T)}return null}function m(y,A,C,T){for(var x=null,R=null,N=A,M=A=0,O=null;N!==null&&M<C.length;M++){N.index>M?(O=N,N=null):O=N.sibling;var P=h(y,N,C[M],T);if(P===null){N===null&&(N=O);break}n&&N&&P.alternate===null&&e(y,N),A=s(P,A,M),R===null?x=P:R.sibling=P,R=P,N=O}if(M===C.length)return t(y,N),mi&&Qp(y,M),x;if(N===null){for(;M<C.length;M++)N=d(y,C[M],T),N!==null&&(A=s(N,A,M),R===null?x=N:R.sibling=N,R=N);return mi&&Qp(y,M),x}for(N=r(y,N);M<C.length;M++)O=f(N,y,M,C[M],T),O!==null&&(n&&O.alternate!==null&&N.delete(O.key===null?M:O.key),A=s(O,A,M),R===null?x=O:R.sibling=O,R=O);return n&&N.forEach(function(z){return e(y,z)}),mi&&Qp(y,M),x}function g(y,A,C,T){var x=Gv(C);if(typeof x!="function")throw Error(yt(150));if(C=x.call(C),C==null)throw Error(yt(151));for(var R=x=null,N=A,M=A=0,O=null,P=C.next();N!==null&&!P.done;M++,P=C.next()){N.index>M?(O=N,N=null):O=N.sibling;var z=h(y,N,P.value,T);if(z===null){N===null&&(N=O);break}n&&N&&z.alternate===null&&e(y,N),A=s(z,A,M),R===null?x=z:R.sibling=z,R=z,N=O}if(P.done)return t(y,N),mi&&Qp(y,M),x;if(N===null){for(;!P.done;M++,P=C.next())P=d(y,P.value,T),P!==null&&(A=s(P,A,M),R===null?x=P:R.sibling=P,R=P);return mi&&Qp(y,M),x}for(N=r(y,N);!P.done;M++,P=C.next())P=f(N,y,M,P.value,T),P!==null&&(n&&P.alternate!==null&&N.delete(P.key===null?M:P.key),A=s(P,A,M),R===null?x=P:R.sibling=P,R=P);return n&&N.forEach(function(V){return e(y,V)}),mi&&Qp(y,M),x}function v(y,A,C,T){if(typeof C=="object"&&C!==null&&C.type===Q0&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case vE:e:{for(var x=C.key,R=A;R!==null;){if(R.key===x){if(x=C.type,x===Q0){if(R.tag===7){t(y,R.sibling),A=i(R,C.props.children),A.return=y,y=A;break e}}else if(R.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Zh&&gL(x)===R.type){t(y,R.sibling),A=i(R,C.props),A.ref=qv(y,R,C),A.return=y,y=A;break e}t(y,R);break}else e(y,R);R=R.sibling}C.type===Q0?(A=fm(C.props.children,y.mode,T,C.key),A.return=y,y=A):(T=Jw(C.type,C.key,C.props,null,y.mode,T),T.ref=qv(y,A,C),T.return=y,y=T)}return o(y);case q0:e:{for(R=C.key;A!==null;){if(A.key===R)if(A.tag===4&&A.stateNode.containerInfo===C.containerInfo&&A.stateNode.implementation===C.implementation){t(y,A.sibling),A=i(A,C.children||[]),A.return=y,y=A;break e}else{t(y,A);break}else e(y,A);A=A.sibling}A=aM(C,y.mode,T),A.return=y,y=A}return o(y);case Zh:return R=C._init,v(y,A,R(C._payload),T)}if(o_(C))return m(y,A,C,T);if(Gv(C))return g(y,A,C,T);bE(y,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,A!==null&&A.tag===6?(t(y,A.sibling),A=i(A,C),A.return=y,y=A):(t(y,A),A=oM(C,y.mode,T),A.return=y,y=A),o(y)):t(y,A)}return v}var Og=$G(!0),WG=$G(!1),LT=Wf(null),kT=null,ng=null,BP=null;function FP(){BP=ng=kT=null}function zP(n){var e=LT.current;ci(LT),n._currentValue=e}function n4(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function _g(n,e){kT=n,BP=ng=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Oa=!0),n.firstContext=null)}function Yl(n){var e=n._currentValue;if(BP!==n)if(n={context:n,memoizedValue:e,next:null},ng===null){if(kT===null)throw Error(yt(308));ng=n,kT.dependencies={lanes:0,firstContext:n}}else ng=ng.next=n;return e}var im=null;function UP(n){im===null?im=[n]:im.push(n)}function qG(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,UP(e)):(t.next=i.next,i.next=t),e.interleaved=t,qd(n,r)}function qd(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var ef=!1;function jP(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function QG(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Fd(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Ef(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,Ar&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,qd(n,t)}return i=r.interleaved,i===null?(e.next=e,UP(r)):(e.next=i.next,i.next=e),r.interleaved=e,qd(n,t)}function Hw(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,xP(n,t)}}function vL(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function BT(n,e,t,r){var i=n.updateQueue;ef=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=n.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,u=c=l=null,a=s;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=n,g=a;switch(h=e,f=t,g.tag){case 1:if(m=g.payload,typeof m=="function"){d=m.call(f,d,h);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,h=typeof m=="function"?m.call(f,d,h):m,h==null)break e;d=bi({},d,h);break e;case 2:ef=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(1);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);wm|=o,n.lanes=o,n.memoizedState=d}}function yL(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(yt(191,i));i.call(r)}}}var NS={},Pu=Wf(NS),q_=Wf(NS),Q_=Wf(NS);function sm(n){if(n===NS)throw Error(yt(174));return n}function GP(n,e){switch(ei(Q_,e),ei(q_,n),ei(Pu,NS),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:kR(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=kR(e,n)}ci(Pu),ei(Pu,e)}function Dg(){ci(Pu),ci(q_),ci(Q_)}function JG(n){sm(Q_.current);var e=sm(Pu.current),t=kR(e,n.type);e!==t&&(ei(q_,n),ei(Pu,t))}function HP(n){q_.current===n&&(ci(Pu),ci(q_))}var Ci=Wf(0);function FT(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var eM=[];function VP(){for(var n=0;n<eM.length;n++)eM[n]._workInProgressVersionPrimary=null;eM.length=0}var Vw=ih.ReactCurrentDispatcher,tM=ih.ReactCurrentBatchConfig,Cm=0,xi=null,Is=null,Fs=null,zT=!1,w_=!1,J_=0,Ate=0;function vo(){throw Error(yt(321))}function $P(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!jc(n[t],e[t]))return!1;return!0}function WP(n,e,t,r,i,s){if(Cm=s,xi=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Vw.current=n===null||n.memoizedState===null?Tte:xte,n=t(r,i),w_){s=0;do{if(w_=!1,J_=0,25<=s)throw Error(yt(301));s+=1,Fs=Is=null,e.updateQueue=null,Vw.current=Ite,n=t(r,i)}while(w_)}if(Vw.current=UT,e=Is!==null&&Is.next!==null,Cm=0,Fs=Is=xi=null,zT=!1,e)throw Error(yt(300));return n}function qP(){var n=J_!==0;return J_=0,n}function Au(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fs===null?xi.memoizedState=Fs=n:Fs=Fs.next=n,Fs}function Xl(){if(Is===null){var n=xi.alternate;n=n!==null?n.memoizedState:null}else n=Is.next;var e=Fs===null?xi.memoizedState:Fs.next;if(e!==null)Fs=e,Is=n;else{if(n===null)throw Error(yt(310));Is=n,n={memoizedState:Is.memoizedState,baseState:Is.baseState,baseQueue:Is.baseQueue,queue:Is.queue,next:null},Fs===null?xi.memoizedState=Fs=n:Fs=Fs.next=n}return Fs}function K_(n,e){return typeof e=="function"?e(n):e}function nM(n){var e=Xl(),t=e.queue;if(t===null)throw Error(yt(311));t.lastRenderedReducer=n;var r=Is,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Cm&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,xi.lanes|=u,wm|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,jc(r,e.memoizedState)||(Oa=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,xi.lanes|=s,wm|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function rM(n){var e=Xl(),t=e.queue;if(t===null)throw Error(yt(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);jc(s,e.memoizedState)||(Oa=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function KG(){}function YG(n,e){var t=xi,r=Xl(),i=e(),s=!jc(r.memoizedState,i);if(s&&(r.memoizedState=i,Oa=!0),r=r.queue,QP(eH.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||Fs!==null&&Fs.memoizedState.tag&1){if(t.flags|=2048,Y_(9,ZG.bind(null,t,r,i,e),void 0,null),Gs===null)throw Error(yt(349));Cm&30||XG(t,e,i)}return i}function XG(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=xi.updateQueue,e===null?(e={lastEffect:null,stores:null},xi.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function ZG(n,e,t,r){e.value=t,e.getSnapshot=r,tH(e)&&nH(n)}function eH(n,e,t){return t(function(){tH(e)&&nH(n)})}function tH(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!jc(n,t)}catch{return!0}}function nH(n){var e=qd(n,1);e!==null&&Fc(e,n,1,-1)}function _L(n){var e=Au();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:K_,lastRenderedState:n},e.queue=n,n=n.dispatch=wte.bind(null,xi,n),[e.memoizedState,n]}function Y_(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=xi.updateQueue,e===null?(e={lastEffect:null,stores:null},xi.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function rH(){return Xl().memoizedState}function $w(n,e,t,r){var i=Au();xi.flags|=n,i.memoizedState=Y_(1|e,t,void 0,r===void 0?null:r)}function Fx(n,e,t,r){var i=Xl();r=r===void 0?null:r;var s=void 0;if(Is!==null){var o=Is.memoizedState;if(s=o.destroy,r!==null&&$P(r,o.deps)){i.memoizedState=Y_(e,t,s,r);return}}xi.flags|=n,i.memoizedState=Y_(1|e,t,s,r)}function SL(n,e){return $w(8390656,8,n,e)}function QP(n,e){return Fx(2048,8,n,e)}function iH(n,e){return Fx(4,2,n,e)}function sH(n,e){return Fx(4,4,n,e)}function oH(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function aH(n,e,t){return t=t!=null?t.concat([n]):null,Fx(4,4,oH.bind(null,e,n),t)}function JP(){}function lH(n,e){var t=Xl();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&$P(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function cH(n,e){var t=Xl();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&$P(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function uH(n,e,t){return Cm&21?(jc(t,e)||(t=mG(),xi.lanes|=t,wm|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Oa=!0),n.memoizedState=t)}function Ete(n,e){var t=Fr;Fr=t!==0&&4>t?t:4,n(!0);var r=tM.transition;tM.transition={};try{n(!1),e()}finally{Fr=t,tM.transition=r}}function dH(){return Xl().memoizedState}function Cte(n,e,t){var r=wf(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},hH(n))fH(e,t);else if(t=qG(n,e,t,r),t!==null){var i=sa();Fc(t,n,r,i),pH(t,e,r)}}function wte(n,e,t){var r=wf(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(hH(n))fH(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,jc(a,o)){var l=e.interleaved;l===null?(i.next=i,UP(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=qG(n,e,i,r),t!==null&&(i=sa(),Fc(t,n,r,i),pH(t,e,r))}}function hH(n){var e=n.alternate;return n===xi||e!==null&&e===xi}function fH(n,e){w_=zT=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function pH(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,xP(n,t)}}var UT={readContext:Yl,useCallback:vo,useContext:vo,useEffect:vo,useImperativeHandle:vo,useInsertionEffect:vo,useLayoutEffect:vo,useMemo:vo,useReducer:vo,useRef:vo,useState:vo,useDebugValue:vo,useDeferredValue:vo,useTransition:vo,useMutableSource:vo,useSyncExternalStore:vo,useId:vo,unstable_isNewReconciler:!1},Tte={readContext:Yl,useCallback:function(n,e){return Au().memoizedState=[n,e===void 0?null:e],n},useContext:Yl,useEffect:SL,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,$w(4194308,4,oH.bind(null,e,n),t)},useLayoutEffect:function(n,e){return $w(4194308,4,n,e)},useInsertionEffect:function(n,e){return $w(4,2,n,e)},useMemo:function(n,e){var t=Au();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=Au();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=Cte.bind(null,xi,n),[r.memoizedState,n]},useRef:function(n){var e=Au();return n={current:n},e.memoizedState=n},useState:_L,useDebugValue:JP,useDeferredValue:function(n){return Au().memoizedState=n},useTransition:function(){var n=_L(!1),e=n[0];return n=Ete.bind(null,n[1]),Au().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=xi,i=Au();if(mi){if(t===void 0)throw Error(yt(407));t=t()}else{if(t=e(),Gs===null)throw Error(yt(349));Cm&30||XG(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,SL(eH.bind(null,r,s,n),[n]),r.flags|=2048,Y_(9,ZG.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=Au(),e=Gs.identifierPrefix;if(mi){var t=Nd,r=Rd;t=(r&~(1<<32-Bc(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=J_++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=Ate++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},xte={readContext:Yl,useCallback:lH,useContext:Yl,useEffect:QP,useImperativeHandle:aH,useInsertionEffect:iH,useLayoutEffect:sH,useMemo:cH,useReducer:nM,useRef:rH,useState:function(){return nM(K_)},useDebugValue:JP,useDeferredValue:function(n){var e=Xl();return uH(e,Is.memoizedState,n)},useTransition:function(){var n=nM(K_)[0],e=Xl().memoizedState;return[n,e]},useMutableSource:KG,useSyncExternalStore:YG,useId:dH,unstable_isNewReconciler:!1},Ite={readContext:Yl,useCallback:lH,useContext:Yl,useEffect:QP,useImperativeHandle:aH,useInsertionEffect:iH,useLayoutEffect:sH,useMemo:cH,useReducer:rM,useRef:rH,useState:function(){return rM(K_)},useDebugValue:JP,useDeferredValue:function(n){var e=Xl();return Is===null?e.memoizedState=n:uH(e,Is.memoizedState,n)},useTransition:function(){var n=rM(K_)[0],e=Xl().memoizedState;return[n,e]},useMutableSource:KG,useSyncExternalStore:YG,useId:dH,unstable_isNewReconciler:!1};function bc(n,e){if(n&&n.defaultProps){e=bi({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function r4(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:bi({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var zx={isMounted:function(n){return(n=n._reactInternals)?zm(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=sa(),i=wf(n),s=Fd(r,i);s.payload=e,t!=null&&(s.callback=t),e=Ef(n,s,i),e!==null&&(Fc(e,n,i,r),Hw(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=sa(),i=wf(n),s=Fd(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Ef(n,s,i),e!==null&&(Fc(e,n,i,r),Hw(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=sa(),r=wf(n),i=Fd(t,r);i.tag=2,e!=null&&(i.callback=e),e=Ef(n,i,r),e!==null&&(Fc(e,n,r,t),Hw(e,n,r))}};function AL(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!H_(t,r)||!H_(i,s):!0}function mH(n,e,t){var r=!1,i=Pf,s=e.contextType;return typeof s=="object"&&s!==null?s=Yl(s):(i=Ba(e)?Am:Po.current,r=e.contextTypes,s=(r=r!=null)?Ng(n,i):Pf),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=zx,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function EL(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&zx.enqueueReplaceState(e,e.state,null)}function i4(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs={},jP(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Yl(s):(s=Ba(e)?Am:Po.current,i.context=Ng(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(r4(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&zx.enqueueReplaceState(i,i.state,null),BT(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function Lg(n,e){try{var t="",r=e;do t+=tee(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function iM(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function s4(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var bte=typeof WeakMap=="function"?WeakMap:Map;function gH(n,e,t){t=Fd(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){GT||(GT=!0,m4=r),s4(n,e)},t}function vH(n,e,t){t=Fd(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){s4(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){s4(n,e),typeof r!="function"&&(Cf===null?Cf=new Set([this]):Cf.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function CL(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new bte;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=Gte.bind(null,n,e,t),e.then(n,n))}function wL(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function TL(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Fd(-1,1),e.tag=2,Ef(t,e,1))),t.lanes|=1),n)}var Mte=ih.ReactCurrentOwner,Oa=!1;function ea(n,e,t,r){e.child=n===null?WG(e,null,t,r):Og(e,n.child,t,r)}function xL(n,e,t,r,i){t=t.render;var s=e.ref;return _g(e,i),r=WP(n,e,t,r,s,i),t=qP(),n!==null&&!Oa?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Qd(n,e,i)):(mi&&t&&DP(e),e.flags|=1,ea(n,e,r,i),e.child)}function IL(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!rO(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,yH(n,e,s,r,i)):(n=Jw(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:H_,t(o,r)&&n.ref===e.ref)return Qd(n,e,i)}return e.flags|=1,n=Tf(s,r),n.ref=e.ref,n.return=e,e.child=n}function yH(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(H_(s,r)&&n.ref===e.ref)if(Oa=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(Oa=!0);else return e.lanes=n.lanes,Qd(n,e,i)}return o4(n,e,t,r,i)}function _H(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ei(ig,Ka),Ka|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,ei(ig,Ka),Ka|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,ei(ig,Ka),Ka|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,ei(ig,Ka),Ka|=r;return ea(n,e,i,t),e.child}function SH(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function o4(n,e,t,r,i){var s=Ba(t)?Am:Po.current;return s=Ng(e,s),_g(e,i),t=WP(n,e,t,r,s,i),r=qP(),n!==null&&!Oa?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Qd(n,e,i)):(mi&&r&&DP(e),e.flags|=1,ea(n,e,t,i),e.child)}function bL(n,e,t,r,i){if(Ba(t)){var s=!0;PT(e)}else s=!1;if(_g(e,i),e.stateNode===null)Ww(n,e),mH(e,t,r),i4(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=Yl(c):(c=Ba(t)?Am:Po.current,c=Ng(e,c));var u=t.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&EL(e,o,r,c),ef=!1;var h=e.memoizedState;o.state=h,BT(e,r,o,i),l=e.memoizedState,a!==r||h!==l||ka.current||ef?(typeof u=="function"&&(r4(e,t,u,r),l=e.memoizedState),(a=ef||AL(e,t,a,r,h,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,QG(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:bc(e.type,a),o.props=c,d=e.pendingProps,h=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Yl(l):(l=Ba(t)?Am:Po.current,l=Ng(e,l));var f=t.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&EL(e,o,r,l),ef=!1,h=e.memoizedState,o.state=h,BT(e,r,o,i);var m=e.memoizedState;a!==d||h!==m||ka.current||ef?(typeof f=="function"&&(r4(e,t,f,r),m=e.memoizedState),(c=ef||AL(e,t,c,r,h,m,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),o.props=r,o.state=m,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=1024),r=!1)}return a4(n,e,t,r,s,i)}function a4(n,e,t,r,i,s){SH(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&fL(e,t,!1),Qd(n,e,s);r=e.stateNode,Mte.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=Og(e,n.child,null,s),e.child=Og(e,null,a,s)):ea(n,e,a,s),e.memoizedState=r.state,i&&fL(e,t,!0),e.child}function AH(n){var e=n.stateNode;e.pendingContext?hL(n,e.pendingContext,e.pendingContext!==e.context):e.context&&hL(n,e.context,!1),GP(n,e.containerInfo)}function ML(n,e,t,r,i){return Pg(),kP(i),e.flags|=256,ea(n,e,t,r),e.child}var l4={dehydrated:null,treeContext:null,retryLane:0};function c4(n){return{baseLanes:n,cachePool:null,transitions:null}}function EH(n,e,t){var r=e.pendingProps,i=Ci.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),ei(Ci,i&1),n===null)return t4(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Gx(o,r,0,null),n=fm(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=c4(t),e.memoizedState=l4,n):KP(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Rte(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Tf(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Tf(a,s):(s=fm(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?c4(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=l4,r}return s=n.child,n=s.sibling,r=Tf(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function KP(n,e){return e=Gx({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function ME(n,e,t,r){return r!==null&&kP(r),Og(e,n.child,null,t),n=KP(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function Rte(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=iM(Error(yt(422))),ME(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Gx({mode:"visible",children:r.children},i,0,null),s=fm(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Og(e,n.child,null,o),e.child.memoizedState=c4(o),e.memoizedState=l4,s);if(!(e.mode&1))return ME(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(yt(419)),r=iM(s,r,void 0),ME(n,e,o,r)}if(a=(o&n.childLanes)!==0,Oa||a){if(r=Gs,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,qd(n,i),Fc(r,n,i,-1))}return nO(),r=iM(Error(yt(421))),ME(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=Hte.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,el=Af(i.nextSibling),ol=e,mi=!0,Nc=null,n!==null&&(zl[Ul++]=Rd,zl[Ul++]=Nd,zl[Ul++]=Em,Rd=n.id,Nd=n.overflow,Em=e),e=KP(e,r.children),e.flags|=4096,e)}function RL(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),n4(n.return,e,t)}function sM(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function CH(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(ea(n,e,r.children,t),r=Ci.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&RL(n,t,e);else if(n.tag===19)RL(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(ei(Ci,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&FT(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),sM(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&FT(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}sM(e,!0,t,null,s);break;case"together":sM(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ww(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Qd(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),wm|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(yt(153));if(e.child!==null){for(n=e.child,t=Tf(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Tf(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function Nte(n,e,t){switch(e.tag){case 3:AH(e),Pg();break;case 5:JG(e);break;case 1:Ba(e.type)&&PT(e);break;case 4:GP(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ei(LT,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ei(Ci,Ci.current&1),e.flags|=128,null):t&e.child.childLanes?EH(n,e,t):(ei(Ci,Ci.current&1),n=Qd(n,e,t),n!==null?n.sibling:null);ei(Ci,Ci.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return CH(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ei(Ci,Ci.current),r)break;return null;case 22:case 23:return e.lanes=0,_H(n,e,t)}return Qd(n,e,t)}var wH,u4,TH,xH;wH=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};u4=function(){};TH=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,sm(Pu.current);var s=null;switch(t){case"input":i=PR(n,i),r=PR(n,r),s=[];break;case"select":i=bi({},i,{value:void 0}),r=bi({},r,{value:void 0}),s=[];break;case"textarea":i=LR(n,i),r=LR(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=RT)}BR(t,r);var o;t=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(k_.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(k_.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&oi("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};xH=function(n,e,t,r){t!==r&&(e.flags|=4)};function Qv(n,e){if(!mi)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function yo(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function Pte(n,e,t){var r=e.pendingProps;switch(LP(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yo(e),null;case 1:return Ba(e.type)&&NT(),yo(e),null;case 3:return r=e.stateNode,Dg(),ci(ka),ci(Po),VP(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(IE(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Nc!==null&&(y4(Nc),Nc=null))),u4(n,e),yo(e),null;case 5:HP(e);var i=sm(Q_.current);if(t=e.type,n!==null&&e.stateNode!=null)TH(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(yt(166));return yo(e),null}if(n=sm(Pu.current),IE(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[wu]=e,r[W_]=s,n=(e.mode&1)!==0,t){case"dialog":oi("cancel",r),oi("close",r);break;case"iframe":case"object":case"embed":oi("load",r);break;case"video":case"audio":for(i=0;i<l_.length;i++)oi(l_[i],r);break;case"source":oi("error",r);break;case"img":case"image":case"link":oi("error",r),oi("load",r);break;case"details":oi("toggle",r);break;case"input":z5(r,s),oi("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},oi("invalid",r);break;case"textarea":j5(r,s),oi("invalid",r)}BR(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&xE(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&xE(r.textContent,a,n),i=["children",""+a]):k_.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&oi("scroll",r)}switch(t){case"input":yE(r),U5(r,s,!0);break;case"textarea":yE(r),G5(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=RT)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=eG(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[wu]=e,n[W_]=r,wH(n,e,!1,!1),e.stateNode=n;e:{switch(o=FR(t,r),t){case"dialog":oi("cancel",n),oi("close",n),i=r;break;case"iframe":case"object":case"embed":oi("load",n),i=r;break;case"video":case"audio":for(i=0;i<l_.length;i++)oi(l_[i],n);i=r;break;case"source":oi("error",n),i=r;break;case"img":case"image":case"link":oi("error",n),oi("load",n),i=r;break;case"details":oi("toggle",n),i=r;break;case"input":z5(n,r),i=PR(n,r),oi("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=bi({},r,{value:void 0}),oi("invalid",n);break;case"textarea":j5(n,r),i=LR(n,r),oi("invalid",n);break;default:i=r}BR(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?rG(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&tG(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&B_(n,l):typeof l=="number"&&B_(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(k_.hasOwnProperty(s)?l!=null&&s==="onScroll"&&oi("scroll",n):l!=null&&SP(n,s,l,o))}switch(t){case"input":yE(n),U5(n,r,!1);break;case"textarea":yE(n),G5(n);break;case"option":r.value!=null&&n.setAttribute("value",""+Nf(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?mg(n,!!r.multiple,s,!1):r.defaultValue!=null&&mg(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=RT)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return yo(e),null;case 6:if(n&&e.stateNode!=null)xH(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(yt(166));if(t=sm(Q_.current),sm(Pu.current),IE(e)){if(r=e.stateNode,t=e.memoizedProps,r[wu]=e,(s=r.nodeValue!==t)&&(n=ol,n!==null))switch(n.tag){case 3:xE(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&xE(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[wu]=e,e.stateNode=r}return yo(e),null;case 13:if(ci(Ci),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(mi&&el!==null&&e.mode&1&&!(e.flags&128))VG(),Pg(),e.flags|=98560,s=!1;else if(s=IE(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(yt(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(yt(317));s[wu]=e}else Pg(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;yo(e),s=!1}else Nc!==null&&(y4(Nc),Nc=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||Ci.current&1?Ms===0&&(Ms=3):nO())),e.updateQueue!==null&&(e.flags|=4),yo(e),null);case 4:return Dg(),u4(n,e),n===null&&V_(e.stateNode.containerInfo),yo(e),null;case 10:return zP(e.type._context),yo(e),null;case 17:return Ba(e.type)&&NT(),yo(e),null;case 19:if(ci(Ci),s=e.memoizedState,s===null)return yo(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Qv(s,!1);else{if(Ms!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=FT(n),o!==null){for(e.flags|=128,Qv(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return ei(Ci,Ci.current&1|2),e.child}n=n.sibling}s.tail!==null&&es()>kg&&(e.flags|=128,r=!0,Qv(s,!1),e.lanes=4194304)}else{if(!r)if(n=FT(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Qv(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!mi)return yo(e),null}else 2*es()-s.renderingStartTime>kg&&t!==1073741824&&(e.flags|=128,r=!0,Qv(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=es(),e.sibling=null,t=Ci.current,ei(Ci,r?t&1|2:t&1),e):(yo(e),null);case 22:case 23:return tO(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ka&1073741824&&(yo(e),e.subtreeFlags&6&&(e.flags|=8192)):yo(e),null;case 24:return null;case 25:return null}throw Error(yt(156,e.tag))}function Ote(n,e){switch(LP(e),e.tag){case 1:return Ba(e.type)&&NT(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Dg(),ci(ka),ci(Po),VP(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return HP(e),null;case 13:if(ci(Ci),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(yt(340));Pg()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return ci(Ci),null;case 4:return Dg(),null;case 10:return zP(e.type._context),null;case 22:case 23:return tO(),null;case 24:return null;default:return null}}var RE=!1,Mo=!1,Dte=typeof WeakSet=="function"?WeakSet:Set,Vt=null;function rg(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Gi(n,e,r)}else t.current=null}function d4(n,e,t){try{t()}catch(r){Gi(n,e,r)}}var NL=!1;function Lte(n,e){if(QR=IT,n=NG(),OP(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=n,h=null;t:for(;;){for(var f;d!==t||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===n)break t;if(h===t&&++c===i&&(a=o),h===s&&++u===r&&(l=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(JR={focusedElem:n,selectionRange:t},IT=!1,Vt=e;Vt!==null;)if(e=Vt,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Vt=n;else for(;Vt!==null;){e=Vt;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,v=m.memoizedState,y=e.stateNode,A=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:bc(e.type,g),v);y.__reactInternalSnapshotBeforeUpdate=A}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(yt(163))}}catch(T){Gi(e,e.return,T)}if(n=e.sibling,n!==null){n.return=e.return,Vt=n;break}Vt=e.return}return m=NL,NL=!1,m}function T_(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&d4(e,t,s)}i=i.next}while(i!==r)}}function Ux(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function h4(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function IH(n){var e=n.alternate;e!==null&&(n.alternate=null,IH(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[wu],delete e[W_],delete e[XR],delete e[vte],delete e[yte])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function bH(n){return n.tag===5||n.tag===3||n.tag===4}function PL(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||bH(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function f4(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=RT));else if(r!==4&&(n=n.child,n!==null))for(f4(n,e,t),n=n.sibling;n!==null;)f4(n,e,t),n=n.sibling}function p4(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(p4(n,e,t),n=n.sibling;n!==null;)p4(n,e,t),n=n.sibling}var Zs=null,Mc=!1;function Dh(n,e,t){for(t=t.child;t!==null;)MH(n,e,t),t=t.sibling}function MH(n,e,t){if(Nu&&typeof Nu.onCommitFiberUnmount=="function")try{Nu.onCommitFiberUnmount(Px,t)}catch{}switch(t.tag){case 5:Mo||rg(t,e);case 6:var r=Zs,i=Mc;Zs=null,Dh(n,e,t),Zs=r,Mc=i,Zs!==null&&(Mc?(n=Zs,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Zs.removeChild(t.stateNode));break;case 18:Zs!==null&&(Mc?(n=Zs,t=t.stateNode,n.nodeType===8?Xb(n.parentNode,t):n.nodeType===1&&Xb(n,t),j_(n)):Xb(Zs,t.stateNode));break;case 4:r=Zs,i=Mc,Zs=t.stateNode.containerInfo,Mc=!0,Dh(n,e,t),Zs=r,Mc=i;break;case 0:case 11:case 14:case 15:if(!Mo&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&d4(t,e,o),i=i.next}while(i!==r)}Dh(n,e,t);break;case 1:if(!Mo&&(rg(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){Gi(t,e,a)}Dh(n,e,t);break;case 21:Dh(n,e,t);break;case 22:t.mode&1?(Mo=(r=Mo)||t.memoizedState!==null,Dh(n,e,t),Mo=r):Dh(n,e,t);break;default:Dh(n,e,t)}}function OL(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new Dte),e.forEach(function(r){var i=Vte.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function Sc(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Zs=a.stateNode,Mc=!1;break e;case 3:Zs=a.stateNode.containerInfo,Mc=!0;break e;case 4:Zs=a.stateNode.containerInfo,Mc=!0;break e}a=a.return}if(Zs===null)throw Error(yt(160));MH(s,o,i),Zs=null,Mc=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Gi(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)RH(e,n),e=e.sibling}function RH(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Sc(e,n),vu(n),r&4){try{T_(3,n,n.return),Ux(3,n)}catch(g){Gi(n,n.return,g)}try{T_(5,n,n.return)}catch(g){Gi(n,n.return,g)}}break;case 1:Sc(e,n),vu(n),r&512&&t!==null&&rg(t,t.return);break;case 5:if(Sc(e,n),vu(n),r&512&&t!==null&&rg(t,t.return),n.flags&32){var i=n.stateNode;try{B_(i,"")}catch(g){Gi(n,n.return,g)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Xj(i,s),FR(a,o);var c=FR(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?rG(i,d):u==="dangerouslySetInnerHTML"?tG(i,d):u==="children"?B_(i,d):SP(i,u,d,c)}switch(a){case"input":OR(i,s);break;case"textarea":Zj(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?mg(i,!!s.multiple,f,!1):h!==!!s.multiple&&(s.defaultValue!=null?mg(i,!!s.multiple,s.defaultValue,!0):mg(i,!!s.multiple,s.multiple?[]:"",!1))}i[W_]=s}catch(g){Gi(n,n.return,g)}}break;case 6:if(Sc(e,n),vu(n),r&4){if(n.stateNode===null)throw Error(yt(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(g){Gi(n,n.return,g)}}break;case 3:if(Sc(e,n),vu(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{j_(e.containerInfo)}catch(g){Gi(n,n.return,g)}break;case 4:Sc(e,n),vu(n);break;case 13:Sc(e,n),vu(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(ZP=es())),r&4&&OL(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(Mo=(c=Mo)||u,Sc(e,n),Mo=c):Sc(e,n),vu(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(Vt=n,u=n.child;u!==null;){for(d=Vt=u;Vt!==null;){switch(h=Vt,f=h.child,h.tag){case 0:case 11:case 14:case 15:T_(4,h,h.return);break;case 1:rg(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){r=h,t=h.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){Gi(r,t,g)}}break;case 5:rg(h,h.return);break;case 22:if(h.memoizedState!==null){LL(d);continue}}f!==null?(f.return=h,Vt=f):LL(d)}u=u.sibling}e:for(u=null,d=n;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=nG("display",o))}catch(g){Gi(n,n.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){Gi(n,n.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Sc(e,n),vu(n),r&4&&OL(n);break;case 21:break;default:Sc(e,n),vu(n)}}function vu(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(bH(t)){var r=t;break e}t=t.return}throw Error(yt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(B_(i,""),r.flags&=-33);var s=PL(n);p4(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=PL(n);f4(n,a,o);break;default:throw Error(yt(161))}}catch(l){Gi(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function kte(n,e,t){Vt=n,NH(n)}function NH(n,e,t){for(var r=(n.mode&1)!==0;Vt!==null;){var i=Vt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||RE;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Mo;a=RE;var c=Mo;if(RE=o,(Mo=l)&&!c)for(Vt=i;Vt!==null;)o=Vt,l=o.child,o.tag===22&&o.memoizedState!==null?kL(i):l!==null?(l.return=o,Vt=l):kL(i);for(;s!==null;)Vt=s,NH(s),s=s.sibling;Vt=i,RE=a,Mo=c}DL(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Vt=s):DL(n)}}function DL(n){for(;Vt!==null;){var e=Vt;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Mo||Ux(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Mo)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:bc(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&yL(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}yL(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&j_(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(yt(163))}Mo||e.flags&512&&h4(e)}catch(h){Gi(e,e.return,h)}}if(e===n){Vt=null;break}if(t=e.sibling,t!==null){t.return=e.return,Vt=t;break}Vt=e.return}}function LL(n){for(;Vt!==null;){var e=Vt;if(e===n){Vt=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Vt=t;break}Vt=e.return}}function kL(n){for(;Vt!==null;){var e=Vt;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Ux(4,e)}catch(l){Gi(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Gi(e,i,l)}}var s=e.return;try{h4(e)}catch(l){Gi(e,s,l)}break;case 5:var o=e.return;try{h4(e)}catch(l){Gi(e,o,l)}}}catch(l){Gi(e,e.return,l)}if(e===n){Vt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Vt=a;break}Vt=e.return}}var Bte=Math.ceil,jT=ih.ReactCurrentDispatcher,YP=ih.ReactCurrentOwner,Jl=ih.ReactCurrentBatchConfig,Ar=0,Gs=null,ms=null,no=0,Ka=0,ig=Wf(0),Ms=0,X_=null,wm=0,jx=0,XP=0,x_=null,Ra=null,ZP=0,kg=1/0,Cd=null,GT=!1,m4=null,Cf=null,NE=!1,df=null,HT=0,I_=0,g4=null,qw=-1,Qw=0;function sa(){return Ar&6?es():qw!==-1?qw:qw=es()}function wf(n){return n.mode&1?Ar&2&&no!==0?no&-no:Ste.transition!==null?(Qw===0&&(Qw=mG()),Qw):(n=Fr,n!==0||(n=window.event,n=n===void 0?16:EG(n.type)),n):1}function Fc(n,e,t,r){if(50<I_)throw I_=0,g4=null,Error(yt(185));bS(n,t,r),(!(Ar&2)||n!==Gs)&&(n===Gs&&(!(Ar&2)&&(jx|=t),Ms===4&&af(n,no)),Fa(n,r),t===1&&Ar===0&&!(e.mode&1)&&(kg=es()+500,Bx&&qf()))}function Fa(n,e){var t=n.callbackNode;See(n,e);var r=xT(n,n===Gs?no:0);if(r===0)t!==null&&$5(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&$5(t),e===1)n.tag===0?_te(BL.bind(null,n)):jG(BL.bind(null,n)),mte(function(){!(Ar&6)&&qf()}),t=null;else{switch(gG(r)){case 1:t=TP;break;case 4:t=fG;break;case 16:t=TT;break;case 536870912:t=pG;break;default:t=TT}t=zH(t,PH.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function PH(n,e){if(qw=-1,Qw=0,Ar&6)throw Error(yt(327));var t=n.callbackNode;if(Sg()&&n.callbackNode!==t)return null;var r=xT(n,n===Gs?no:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=VT(n,r);else{e=r;var i=Ar;Ar|=2;var s=DH();(Gs!==n||no!==e)&&(Cd=null,kg=es()+500,hm(n,e));do try{Ute();break}catch(a){OH(n,a)}while(1);FP(),jT.current=s,Ar=i,ms!==null?e=0:(Gs=null,no=0,e=Ms)}if(e!==0){if(e===2&&(i=HR(n),i!==0&&(r=i,e=v4(n,i))),e===1)throw t=X_,hm(n,0),af(n,r),Fa(n,es()),t;if(e===6)af(n,r);else{if(i=n.current.alternate,!(r&30)&&!Fte(i)&&(e=VT(n,r),e===2&&(s=HR(n),s!==0&&(r=s,e=v4(n,s))),e===1))throw t=X_,hm(n,0),af(n,r),Fa(n,es()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(yt(345));case 2:Jp(n,Ra,Cd);break;case 3:if(af(n,r),(r&130023424)===r&&(e=ZP+500-es(),10<e)){if(xT(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){sa(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=YR(Jp.bind(null,n,Ra,Cd),e);break}Jp(n,Ra,Cd);break;case 4:if(af(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-Bc(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=es()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Bte(r/1960))-r,10<r){n.timeoutHandle=YR(Jp.bind(null,n,Ra,Cd),r);break}Jp(n,Ra,Cd);break;case 5:Jp(n,Ra,Cd);break;default:throw Error(yt(329))}}}return Fa(n,es()),n.callbackNode===t?PH.bind(null,n):null}function v4(n,e){var t=x_;return n.current.memoizedState.isDehydrated&&(hm(n,e).flags|=256),n=VT(n,e),n!==2&&(e=Ra,Ra=t,e!==null&&y4(e)),n}function y4(n){Ra===null?Ra=n:Ra.push.apply(Ra,n)}function Fte(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!jc(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function af(n,e){for(e&=~XP,e&=~jx,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Bc(e),r=1<<t;n[t]=-1,e&=~r}}function BL(n){if(Ar&6)throw Error(yt(327));Sg();var e=xT(n,0);if(!(e&1))return Fa(n,es()),null;var t=VT(n,e);if(n.tag!==0&&t===2){var r=HR(n);r!==0&&(e=r,t=v4(n,r))}if(t===1)throw t=X_,hm(n,0),af(n,e),Fa(n,es()),t;if(t===6)throw Error(yt(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Jp(n,Ra,Cd),Fa(n,es()),null}function eO(n,e){var t=Ar;Ar|=1;try{return n(e)}finally{Ar=t,Ar===0&&(kg=es()+500,Bx&&qf())}}function Tm(n){df!==null&&df.tag===0&&!(Ar&6)&&Sg();var e=Ar;Ar|=1;var t=Jl.transition,r=Fr;try{if(Jl.transition=null,Fr=1,n)return n()}finally{Fr=r,Jl.transition=t,Ar=e,!(Ar&6)&&qf()}}function tO(){Ka=ig.current,ci(ig)}function hm(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,pte(t)),ms!==null)for(t=ms.return;t!==null;){var r=t;switch(LP(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&NT();break;case 3:Dg(),ci(ka),ci(Po),VP();break;case 5:HP(r);break;case 4:Dg();break;case 13:ci(Ci);break;case 19:ci(Ci);break;case 10:zP(r.type._context);break;case 22:case 23:tO()}t=t.return}if(Gs=n,ms=n=Tf(n.current,null),no=Ka=e,Ms=0,X_=null,XP=jx=wm=0,Ra=x_=null,im!==null){for(e=0;e<im.length;e++)if(t=im[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}im=null}return n}function OH(n,e){do{var t=ms;try{if(FP(),Vw.current=UT,zT){for(var r=xi.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}zT=!1}if(Cm=0,Fs=Is=xi=null,w_=!1,J_=0,YP.current=null,t===null||t.return===null){Ms=1,X_=e,ms=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=no,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=wL(o);if(f!==null){f.flags&=-257,TL(f,o,a,s,e),f.mode&1&&CL(s,c,e),e=f,l=c;var m=e.updateQueue;if(m===null){var g=new Set;g.add(l),e.updateQueue=g}else m.add(l);break e}else{if(!(e&1)){CL(s,c,e),nO();break e}l=Error(yt(426))}}else if(mi&&a.mode&1){var v=wL(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),TL(v,o,a,s,e),kP(Lg(l,a));break e}}s=l=Lg(l,a),Ms!==4&&(Ms=2),x_===null?x_=[s]:x_.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=gH(s,l,e);vL(s,y);break e;case 1:a=l;var A=s.type,C=s.stateNode;if(!(s.flags&128)&&(typeof A.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Cf===null||!Cf.has(C)))){s.flags|=65536,e&=-e,s.lanes|=e;var T=vH(s,a,e);vL(s,T);break e}}s=s.return}while(s!==null)}kH(t)}catch(x){e=x,ms===t&&t!==null&&(ms=t=t.return);continue}break}while(1)}function DH(){var n=jT.current;return jT.current=UT,n===null?UT:n}function nO(){(Ms===0||Ms===3||Ms===2)&&(Ms=4),Gs===null||!(wm&268435455)&&!(jx&268435455)||af(Gs,no)}function VT(n,e){var t=Ar;Ar|=2;var r=DH();(Gs!==n||no!==e)&&(Cd=null,hm(n,e));do try{zte();break}catch(i){OH(n,i)}while(1);if(FP(),Ar=t,jT.current=r,ms!==null)throw Error(yt(261));return Gs=null,no=0,Ms}function zte(){for(;ms!==null;)LH(ms)}function Ute(){for(;ms!==null&&!dee();)LH(ms)}function LH(n){var e=FH(n.alternate,n,Ka);n.memoizedProps=n.pendingProps,e===null?kH(n):ms=e,YP.current=null}function kH(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=Ote(t,e),t!==null){t.flags&=32767,ms=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Ms=6,ms=null;return}}else if(t=Pte(t,e,Ka),t!==null){ms=t;return}if(e=e.sibling,e!==null){ms=e;return}ms=e=n}while(e!==null);Ms===0&&(Ms=5)}function Jp(n,e,t){var r=Fr,i=Jl.transition;try{Jl.transition=null,Fr=1,jte(n,e,t,r)}finally{Jl.transition=i,Fr=r}return null}function jte(n,e,t,r){do Sg();while(df!==null);if(Ar&6)throw Error(yt(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(yt(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(Aee(n,s),n===Gs&&(ms=Gs=null,no=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||NE||(NE=!0,zH(TT,function(){return Sg(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Jl.transition,Jl.transition=null;var o=Fr;Fr=1;var a=Ar;Ar|=4,YP.current=null,Lte(n,t),RH(t,n),ate(JR),IT=!!QR,JR=QR=null,n.current=t,kte(t),hee(),Ar=a,Fr=o,Jl.transition=s}else n.current=t;if(NE&&(NE=!1,df=n,HT=i),s=n.pendingLanes,s===0&&(Cf=null),mee(t.stateNode),Fa(n,es()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(GT)throw GT=!1,n=m4,m4=null,n;return HT&1&&n.tag!==0&&Sg(),s=n.pendingLanes,s&1?n===g4?I_++:(I_=0,g4=n):I_=0,qf(),null}function Sg(){if(df!==null){var n=gG(HT),e=Jl.transition,t=Fr;try{if(Jl.transition=null,Fr=16>n?16:n,df===null)var r=!1;else{if(n=df,df=null,HT=0,Ar&6)throw Error(yt(331));var i=Ar;for(Ar|=4,Vt=n.current;Vt!==null;){var s=Vt,o=s.child;if(Vt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Vt=c;Vt!==null;){var u=Vt;switch(u.tag){case 0:case 11:case 15:T_(8,u,s)}var d=u.child;if(d!==null)d.return=u,Vt=d;else for(;Vt!==null;){u=Vt;var h=u.sibling,f=u.return;if(IH(u),u===c){Vt=null;break}if(h!==null){h.return=f,Vt=h;break}Vt=f}}}var m=s.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}Vt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Vt=o;else e:for(;Vt!==null;){if(s=Vt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:T_(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,Vt=y;break e}Vt=s.return}}var A=n.current;for(Vt=A;Vt!==null;){o=Vt;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,Vt=C;else e:for(o=A;Vt!==null;){if(a=Vt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ux(9,a)}}catch(x){Gi(a,a.return,x)}if(a===o){Vt=null;break e}var T=a.sibling;if(T!==null){T.return=a.return,Vt=T;break e}Vt=a.return}}if(Ar=i,qf(),Nu&&typeof Nu.onPostCommitFiberRoot=="function")try{Nu.onPostCommitFiberRoot(Px,n)}catch{}r=!0}return r}finally{Fr=t,Jl.transition=e}}return!1}function FL(n,e,t){e=Lg(t,e),e=gH(n,e,1),n=Ef(n,e,1),e=sa(),n!==null&&(bS(n,1,e),Fa(n,e))}function Gi(n,e,t){if(n.tag===3)FL(n,n,t);else for(;e!==null;){if(e.tag===3){FL(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Cf===null||!Cf.has(r))){n=Lg(t,n),n=vH(e,n,1),e=Ef(e,n,1),n=sa(),e!==null&&(bS(e,1,n),Fa(e,n));break}}e=e.return}}function Gte(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=sa(),n.pingedLanes|=n.suspendedLanes&t,Gs===n&&(no&t)===t&&(Ms===4||Ms===3&&(no&130023424)===no&&500>es()-ZP?hm(n,0):XP|=t),Fa(n,e)}function BH(n,e){e===0&&(n.mode&1?(e=AE,AE<<=1,!(AE&130023424)&&(AE=4194304)):e=1);var t=sa();n=qd(n,e),n!==null&&(bS(n,e,t),Fa(n,t))}function Hte(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),BH(n,t)}function Vte(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(yt(314))}r!==null&&r.delete(e),BH(n,t)}var FH;FH=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||ka.current)Oa=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Oa=!1,Nte(n,e,t);Oa=!!(n.flags&131072)}else Oa=!1,mi&&e.flags&1048576&&GG(e,DT,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ww(n,e),n=e.pendingProps;var i=Ng(e,Po.current);_g(e,t),i=WP(null,e,r,n,i,t);var s=qP();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ba(r)?(s=!0,PT(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,jP(e),i.updater=zx,e.stateNode=i,i._reactInternals=e,i4(e,r,n,t),e=a4(null,e,r,!0,s,t)):(e.tag=0,mi&&s&&DP(e),ea(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(Ww(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Wte(r),n=bc(r,n),i){case 0:e=o4(null,e,r,n,t);break e;case 1:e=bL(null,e,r,n,t);break e;case 11:e=xL(null,e,r,n,t);break e;case 14:e=IL(null,e,r,bc(r.type,n),t);break e}throw Error(yt(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:bc(r,i),o4(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:bc(r,i),bL(n,e,r,i,t);case 3:e:{if(AH(e),n===null)throw Error(yt(387));r=e.pendingProps,s=e.memoizedState,i=s.element,QG(n,e),BT(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Lg(Error(yt(423)),e),e=ML(n,e,r,t,i);break e}else if(r!==i){i=Lg(Error(yt(424)),e),e=ML(n,e,r,t,i);break e}else for(el=Af(e.stateNode.containerInfo.firstChild),ol=e,mi=!0,Nc=null,t=WG(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Pg(),r===i){e=Qd(n,e,t);break e}ea(n,e,r,t)}e=e.child}return e;case 5:return JG(e),n===null&&t4(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,KR(r,i)?o=null:s!==null&&KR(r,s)&&(e.flags|=32),SH(n,e),ea(n,e,o,t),e.child;case 6:return n===null&&t4(e),null;case 13:return EH(n,e,t);case 4:return GP(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=Og(e,null,r,t):ea(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:bc(r,i),xL(n,e,r,i,t);case 7:return ea(n,e,e.pendingProps,t),e.child;case 8:return ea(n,e,e.pendingProps.children,t),e.child;case 12:return ea(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ei(LT,r._currentValue),r._currentValue=o,s!==null)if(jc(s.value,o)){if(s.children===i.children&&!ka.current){e=Qd(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Fd(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),n4(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(yt(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),n4(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ea(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,_g(e,t),i=Yl(i),r=r(i),e.flags|=1,ea(n,e,r,t),e.child;case 14:return r=e.type,i=bc(r,e.pendingProps),i=bc(r.type,i),IL(n,e,r,i,t);case 15:return yH(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:bc(r,i),Ww(n,e),e.tag=1,Ba(r)?(n=!0,PT(e)):n=!1,_g(e,t),mH(e,r,i),i4(e,r,i,t),a4(null,e,r,!0,n,t);case 19:return CH(n,e,t);case 22:return _H(n,e,t)}throw Error(yt(156,e.tag))};function zH(n,e){return hG(n,e)}function $te(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hl(n,e,t,r){return new $te(n,e,t,r)}function rO(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Wte(n){if(typeof n=="function")return rO(n)?1:0;if(n!=null){if(n=n.$$typeof,n===EP)return 11;if(n===CP)return 14}return 2}function Tf(n,e){var t=n.alternate;return t===null?(t=Hl(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Jw(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")rO(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Q0:return fm(t.children,i,s,e);case AP:o=8,i|=8;break;case bR:return n=Hl(12,t,e,i|2),n.elementType=bR,n.lanes=s,n;case MR:return n=Hl(13,t,e,i),n.elementType=MR,n.lanes=s,n;case RR:return n=Hl(19,t,e,i),n.elementType=RR,n.lanes=s,n;case Jj:return Gx(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case qj:o=10;break e;case Qj:o=9;break e;case EP:o=11;break e;case CP:o=14;break e;case Zh:o=16,r=null;break e}throw Error(yt(130,n==null?n:typeof n,""))}return e=Hl(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function fm(n,e,t,r){return n=Hl(7,n,r,e),n.lanes=t,n}function Gx(n,e,t,r){return n=Hl(22,n,r,e),n.elementType=Jj,n.lanes=t,n.stateNode={isHidden:!1},n}function oM(n,e,t){return n=Hl(6,n,null,e),n.lanes=t,n}function aM(n,e,t){return e=Hl(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function qte(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jb(0),this.expirationTimes=jb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jb(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function iO(n,e,t,r,i,s,o,a,l){return n=new qte(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Hl(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},jP(s),n}function Qte(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:q0,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function UH(n){if(!n)return Pf;n=n._reactInternals;e:{if(zm(n)!==n||n.tag!==1)throw Error(yt(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ba(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(yt(171))}if(n.tag===1){var t=n.type;if(Ba(t))return UG(n,t,e)}return e}function jH(n,e,t,r,i,s,o,a,l){return n=iO(t,r,!0,n,i,s,o,a,l),n.context=UH(null),t=n.current,r=sa(),i=wf(t),s=Fd(r,i),s.callback=e??null,Ef(t,s,i),n.current.lanes=i,bS(n,i,r),Fa(n,r),n}function Hx(n,e,t,r){var i=e.current,s=sa(),o=wf(i);return t=UH(t),e.context===null?e.context=t:e.pendingContext=t,e=Fd(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=Ef(i,e,o),n!==null&&(Fc(n,i,o,s),Hw(n,i,o)),o}function $T(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function zL(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function sO(n,e){zL(n,e),(n=n.alternate)&&zL(n,e)}function Jte(){return null}var GH=typeof reportError=="function"?reportError:function(n){console.error(n)};function oO(n){this._internalRoot=n}Vx.prototype.render=oO.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(yt(409));Hx(n,e,null,null)};Vx.prototype.unmount=oO.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Tm(function(){Hx(null,n,null,null)}),e[Wd]=null}};function Vx(n){this._internalRoot=n}Vx.prototype.unstable_scheduleHydration=function(n){if(n){var e=_G();n={blockedOn:null,target:n,priority:e};for(var t=0;t<of.length&&e!==0&&e<of[t].priority;t++);of.splice(t,0,n),t===0&&AG(n)}};function aO(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function $x(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function UL(){}function Kte(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=$T(o);s.call(c)}}var o=jH(e,r,n,0,null,!1,!1,"",UL);return n._reactRootContainer=o,n[Wd]=o.current,V_(n.nodeType===8?n.parentNode:n),Tm(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=$T(l);a.call(c)}}var l=iO(n,0,!1,null,null,!1,!1,"",UL);return n._reactRootContainer=l,n[Wd]=l.current,V_(n.nodeType===8?n.parentNode:n),Tm(function(){Hx(e,l,t,r)}),l}function Wx(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=$T(o);a.call(l)}}Hx(e,o,n,i)}else o=Kte(t,e,n,i,r);return $T(o)}vG=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=a_(e.pendingLanes);t!==0&&(xP(e,t|1),Fa(e,es()),!(Ar&6)&&(kg=es()+500,qf()))}break;case 13:Tm(function(){var r=qd(n,1);if(r!==null){var i=sa();Fc(r,n,1,i)}}),sO(n,1)}};IP=function(n){if(n.tag===13){var e=qd(n,134217728);if(e!==null){var t=sa();Fc(e,n,134217728,t)}sO(n,134217728)}};yG=function(n){if(n.tag===13){var e=wf(n),t=qd(n,e);if(t!==null){var r=sa();Fc(t,n,e,r)}sO(n,e)}};_G=function(){return Fr};SG=function(n,e){var t=Fr;try{return Fr=n,e()}finally{Fr=t}};UR=function(n,e,t){switch(e){case"input":if(OR(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=kx(r);if(!i)throw Error(yt(90));Yj(r),OR(r,i)}}}break;case"textarea":Zj(n,t);break;case"select":e=t.value,e!=null&&mg(n,!!t.multiple,e,!1)}};oG=eO;aG=Tm;var Yte={usingClientEntryPoint:!1,Events:[RS,X0,kx,iG,sG,eO]},Jv={findFiberByHostInstance:rm,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Xte={bundleType:Jv.bundleType,version:Jv.version,rendererPackageName:Jv.rendererPackageName,rendererConfig:Jv.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ih.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=uG(n),n===null?null:n.stateNode},findFiberByHostInstance:Jv.findFiberByHostInstance||Jte,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var PE=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!PE.isDisabled&&PE.supportsFiber)try{Px=PE.inject(Xte),Nu=PE}catch{}}pl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yte;pl.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!aO(e))throw Error(yt(200));return Qte(n,e,null,t)};pl.createRoot=function(n,e){if(!aO(n))throw Error(yt(299));var t=!1,r="",i=GH;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=iO(n,1,!1,null,null,t,!1,r,i),n[Wd]=e.current,V_(n.nodeType===8?n.parentNode:n),new oO(e)};pl.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(yt(188)):(n=Object.keys(n).join(","),Error(yt(268,n)));return n=uG(e),n=n===null?null:n.stateNode,n};pl.flushSync=function(n){return Tm(n)};pl.hydrate=function(n,e,t){if(!$x(e))throw Error(yt(200));return Wx(null,n,e,!0,t)};pl.hydrateRoot=function(n,e,t){if(!aO(n))throw Error(yt(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=GH;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=jH(e,null,n,1,t??null,i,!1,s,o),n[Wd]=e.current,V_(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new Vx(e)};pl.render=function(n,e,t){if(!$x(e))throw Error(yt(200));return Wx(null,n,e,!1,t)};pl.unmountComponentAtNode=function(n){if(!$x(n))throw Error(yt(40));return n._reactRootContainer?(Tm(function(){Wx(null,null,n,!1,function(){n._reactRootContainer=null,n[Wd]=null})}),!0):!1};pl.unstable_batchedUpdates=eO;pl.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!$x(t))throw Error(yt(200));if(n==null||n._reactInternals===void 0)throw Error(yt(38));return Wx(n,e,t,!1,r)};pl.version="18.3.1-next-f1338f8080-20240426";function HH(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(HH)}catch(n){console.error(n)}}HH(),Hj.exports=pl;var Ag=Hj.exports,jL=Ag;xR.createRoot=jL.createRoot,xR.hydrateRoot=jL.hydrateRoot;var VH={exports:{}},Zte="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ene=Zte,tne=ene;function $H(){}function WH(){}WH.resetWarningCache=$H;var nne=function(){function n(r,i,s,o,a,l){if(l!==tne){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:WH,resetWarningCache:$H};return t.PropTypes=t,t};VH.exports=nne();var rne=VH.exports;const _n=zu(rne),GL=n=>n?new URL(n.startsWith("http")?n:`https://${n}`).origin:"https://backend.memori.ai";var _4={exports:{}};(function(n,e){var t=typeof self<"u"?self:Ze,r=function(){function s(){this.fetch=!1,this.DOMException=t.DOMException}return s.prototype=t,new s}();(function(s){(function(o){var a={searchParams:"URLSearchParams"in s,iterable:"Symbol"in s&&"iterator"in Symbol,blob:"FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in s,arrayBuffer:"ArrayBuffer"in s};function l(B){return B&&DataView.prototype.isPrototypeOf(B)}if(a.arrayBuffer)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(B){return B&&c.indexOf(Object.prototype.toString.call(B))>-1};function d(B){if(typeof B!="string"&&(B=String(B)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(B))throw new TypeError("Invalid character in header field name");return B.toLowerCase()}function h(B){return typeof B!="string"&&(B=String(B)),B}function f(B){var q={next:function(){var K=B.shift();return{done:K===void 0,value:K}}};return a.iterable&&(q[Symbol.iterator]=function(){return q}),q}function m(B){this.map={},B instanceof m?B.forEach(function(q,K){this.append(K,q)},this):Array.isArray(B)?B.forEach(function(q){this.append(q[0],q[1])},this):B&&Object.getOwnPropertyNames(B).forEach(function(q){this.append(q,B[q])},this)}m.prototype.append=function(B,q){B=d(B),q=h(q);var K=this.map[B];this.map[B]=K?K+", "+q:q},m.prototype.delete=function(B){delete this.map[d(B)]},m.prototype.get=function(B){return B=d(B),this.has(B)?this.map[B]:null},m.prototype.has=function(B){return this.map.hasOwnProperty(d(B))},m.prototype.set=function(B,q){this.map[d(B)]=h(q)},m.prototype.forEach=function(B,q){for(var K in this.map)this.map.hasOwnProperty(K)&&B.call(q,this.map[K],K,this)},m.prototype.keys=function(){var B=[];return this.forEach(function(q,K){B.push(K)}),f(B)},m.prototype.values=function(){var B=[];return this.forEach(function(q){B.push(q)}),f(B)},m.prototype.entries=function(){var B=[];return this.forEach(function(q,K){B.push([K,q])}),f(B)},a.iterable&&(m.prototype[Symbol.iterator]=m.prototype.entries);function g(B){if(B.bodyUsed)return Promise.reject(new TypeError("Already read"));B.bodyUsed=!0}function v(B){return new Promise(function(q,K){B.onload=function(){q(B.result)},B.onerror=function(){K(B.error)}})}function y(B){var q=new FileReader,K=v(q);return q.readAsArrayBuffer(B),K}function A(B){var q=new FileReader,K=v(q);return q.readAsText(B),K}function C(B){for(var q=new Uint8Array(B),K=new Array(q.length),se=0;se<q.length;se++)K[se]=String.fromCharCode(q[se]);return K.join("")}function T(B){if(B.slice)return B.slice(0);var q=new Uint8Array(B.byteLength);return q.set(new Uint8Array(B)),q.buffer}function x(){return this.bodyUsed=!1,this._initBody=function(B){this._bodyInit=B,B?typeof B=="string"?this._bodyText=B:a.blob&&Blob.prototype.isPrototypeOf(B)?this._bodyBlob=B:a.formData&&FormData.prototype.isPrototypeOf(B)?this._bodyFormData=B:a.searchParams&&URLSearchParams.prototype.isPrototypeOf(B)?this._bodyText=B.toString():a.arrayBuffer&&a.blob&&l(B)?(this._bodyArrayBuffer=T(B.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(B)||u(B))?this._bodyArrayBuffer=T(B):this._bodyText=B=Object.prototype.toString.call(B):this._bodyText="",this.headers.get("content-type")||(typeof B=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a.searchParams&&URLSearchParams.prototype.isPrototypeOf(B)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a.blob&&(this.blob=function(){var B=g(this);if(B)return B;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?g(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(y)}),this.text=function(){var B=g(this);if(B)return B;if(this._bodyBlob)return A(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(C(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a.formData&&(this.formData=function(){return this.text().then(O)}),this.json=function(){return this.text().then(JSON.parse)},this}var R=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function N(B){var q=B.toUpperCase();return R.indexOf(q)>-1?q:B}function M(B,q){q=q||{};var K=q.body;if(B instanceof M){if(B.bodyUsed)throw new TypeError("Already read");this.url=B.url,this.credentials=B.credentials,q.headers||(this.headers=new m(B.headers)),this.method=B.method,this.mode=B.mode,this.signal=B.signal,!K&&B._bodyInit!=null&&(K=B._bodyInit,B.bodyUsed=!0)}else this.url=String(B);if(this.credentials=q.credentials||this.credentials||"same-origin",(q.headers||!this.headers)&&(this.headers=new m(q.headers)),this.method=N(q.method||this.method||"GET"),this.mode=q.mode||this.mode||null,this.signal=q.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&K)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(K)}M.prototype.clone=function(){return new M(this,{body:this._bodyInit})};function O(B){var q=new FormData;return B.trim().split("&").forEach(function(K){if(K){var se=K.split("="),W=se.shift().replace(/\+/g," "),ee=se.join("=").replace(/\+/g," ");q.append(decodeURIComponent(W),decodeURIComponent(ee))}}),q}function P(B){var q=new m,K=B.replace(/\r?\n[\t ]+/g," ");return K.split(/\r?\n/).forEach(function(se){var W=se.split(":"),ee=W.shift().trim();if(ee){var Q=W.join(":").trim();q.append(ee,Q)}}),q}x.call(M.prototype);function z(B,q){q||(q={}),this.type="default",this.status=q.status===void 0?200:q.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in q?q.statusText:"OK",this.headers=new m(q.headers),this.url=q.url||"",this._initBody(B)}x.call(z.prototype),z.prototype.clone=function(){return new z(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new m(this.headers),url:this.url})},z.error=function(){var B=new z(null,{status:0,statusText:""});return B.type="error",B};var V=[301,302,303,307,308];z.redirect=function(B,q){if(V.indexOf(q)===-1)throw new RangeError("Invalid status code");return new z(null,{status:q,headers:{location:B}})},o.DOMException=s.DOMException;try{new o.DOMException}catch{o.DOMException=function(q,K){this.message=q,this.name=K;var se=Error(q);this.stack=se.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function $(B,q){return new Promise(function(K,se){var W=new M(B,q);if(W.signal&&W.signal.aborted)return se(new o.DOMException("Aborted","AbortError"));var ee=new XMLHttpRequest;function Q(){ee.abort()}ee.onload=function(){var Y={status:ee.status,statusText:ee.statusText,headers:P(ee.getAllResponseHeaders()||"")};Y.url="responseURL"in ee?ee.responseURL:Y.headers.get("X-Request-URL");var ae="response"in ee?ee.response:ee.responseText;K(new z(ae,Y))},ee.onerror=function(){se(new TypeError("Network request failed"))},ee.ontimeout=function(){se(new TypeError("Network request failed"))},ee.onabort=function(){se(new o.DOMException("Aborted","AbortError"))},ee.open(W.method,W.url,!0),W.credentials==="include"?ee.withCredentials=!0:W.credentials==="omit"&&(ee.withCredentials=!1),"responseType"in ee&&a.blob&&(ee.responseType="blob"),W.headers.forEach(function(Y,ae){ee.setRequestHeader(ae,Y)}),W.signal&&(W.signal.addEventListener("abort",Q),ee.onreadystatechange=function(){ee.readyState===4&&W.signal.removeEventListener("abort",Q)}),ee.send(typeof W._bodyInit>"u"?null:W._bodyInit)})}return $.polyfill=!0,s.fetch||(s.fetch=$,s.Headers=m,s.Request=M,s.Response=z),o.Headers=m,o.Request=M,o.Response=z,o.fetch=$,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=r;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,n.exports=e})(_4,_4.exports);var ine=_4.exports;const sne=zu(ine),Ne=(n,e)=>sne(`${e.apiUrl}${n}`,{...e,body:e!=null&&e.body?JSON.stringify(e.body):void 0,mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",...e==null?void 0:e.headers}}).then(t=>e!=null&&e.text?t.text():t.json()),HL=n=>({getTenantPublicMemoriList:e=>Ne(`/TenantPublicMemori/${encodeURIComponent(e)}`,{apiUrl:n}),getTenantMetaverseMemoriList:e=>Ne(`/TenantMetaverseMemori/${encodeURIComponent(e)}`,{apiUrl:n}),getPublicMemoriList:e=>Ne(`/PublicMemori/${e}`,{apiUrl:n}),getAllMemori:e=>Ne(`/AllMemori/${e}`,{apiUrl:n}),getUserByIDMemoriList:(e,t,r)=>Ne(`/UserMemoriByID/${e}/${t}${r?`/${r}`:""}`,{apiUrl:n}),getUserMemoriList:(e,t,r)=>Ne(`/UserMemori/${e}/${t}${r?`/${r}`:""}`,{apiUrl:n}),getMemoriList:e=>Ne(`/Memori/${e}`,{apiUrl:n}),getSharedMemoriList:e=>Ne(`/SharedMemori/${e}`,{apiUrl:n}),getTenantCategories:e=>Ne(`/TenantMemoriCategories/${encodeURIComponent(e)}`,{apiUrl:n}),getMemoriConfigs:e=>Ne(`/MemoriConfigs/${e}`,{apiUrl:n}),createMemori:(e,t)=>Ne(`/Memori/${e}`,{apiUrl:n,body:t,method:"POST"}),updateMemori:(e,t)=>Ne(`/Memori/${e}/${t.memoriID}`,{apiUrl:n,body:t,method:"PATCH"}),deleteMemori:(e,t)=>Ne(`/Memori/${e}`,{apiUrl:n,body:t,method:"DELETE"}),getMemoriById:(e,t)=>Ne(`/Memori/${e}/${t}`,{apiUrl:n}),getMemoriByUserAndId:(e,t,r,i)=>Ne(`/MemoriById/${e}/${t}/${r}${i?`/${i}`:""}`,{apiUrl:n}),getMemori:(e,t,r,i)=>Ne(`/Memori/${encodeURIComponent(e)}/${encodeURIComponent(t)}/${encodeURIComponent(r)}/${i??""}`,{apiUrl:n}),getMemoriSessions:(e,t,r,i)=>Ne(`/MemoriSessions/${e}/${t}${r?`/${r}`:""}${r&&i?`/${i}`:""}`,{apiUrl:n}),transferMemori:(e,t)=>Ne(`/TransferMemori/${e}`,{apiUrl:n,body:t,method:"POST"})}),VL=n=>({userSignUp:e=>Ne("/User",{apiUrl:n,body:e,method:"POST"}),userConfirmSignUp:e=>Ne("/UserConfirm",{apiUrl:n,body:e,method:"POST"}),userLogin:e=>Ne("/Login",{apiUrl:n,body:e,method:"POST"}),userLogout:e=>Ne(`/Logout/${e}`,{apiUrl:n,method:"POST"}),getCurrentUser:e=>Ne(`/User/${e}`,{apiUrl:n}),getUser:(e,t)=>Ne(`/User/${e}/${t}`,{apiUrl:n}),getUsersList:e=>Ne(`/Users/${e}`,{apiUrl:n}),deleteUser:(e,t)=>Ne(`/User/${e}/${t}`,{apiUrl:n,method:"DELETE"}),updateUser:(e,t,r)=>Ne(`/User/${e}/${t}`,{apiUrl:n,method:"PATCH",body:r}),resetPassword:e=>Ne("/ResetPassword",{apiUrl:n,body:e,method:"POST"}),resetConfirm:e=>Ne("/ResetConfirm",{apiUrl:n,body:e,method:"POST"}),recoverUsername:e=>Ne("/RecoverUsername",{apiUrl:n,body:e,method:"POST"}),getTenantConfig:e=>Ne(`/Tenant/${e}`,{apiUrl:n}),resendVerificationCode:e=>Ne("/ResendVerificationCode",{apiUrl:n,body:e,method:"POST"}),createUser:(e,t)=>Ne(`/User/${e}`,{apiUrl:n,body:t,method:"POST"})}),$L=n=>({getMemoriIntegrationsList:(e,t)=>Ne(`/Integrations/${e}/${t}`,{apiUrl:n}),getAllIntegrationsList:e=>Ne(`/AllIntegrations/${e}`,{apiUrl:n}),getIntegration:(e,t)=>Ne(`/Integration/${e}/${t}`,{apiUrl:n}),deleteIntegration:(e,t)=>Ne(`/Integration/${e}/${t}`,{apiUrl:n,method:"DELETE"}),createIntegration:(e,t)=>Ne(`/Integration/${e}`,{apiUrl:n,method:"POST",body:t}),updateIntegration:(e,t,r)=>Ne(`/Integration/${e}/${t}`,{apiUrl:n,method:"PATCH",body:r})}),WL=n=>({getUploadAssetURL:(e,t,r)=>`${n}/Asset/${e}${t?`/${t}`:""}${r?`/${r}`:""}`,uploadAsset:async(e,t,r,i,s)=>{const o=new FormData,l=await(await fetch(t)).blob();return o.append(e,l,e),await(await fetch(`${n}/Asset/${r}${i?`/${i}`:""}${s?`/${s}`:""}`,{method:"POST",body:o})).json()},getAsset:(e,t)=>Ne(`/Asset/${e}/${t}`,{apiUrl:n,method:"GET"}),updateAsset:(e,t,r)=>Ne(`/Asset/${e}/${t.split("/").reverse()[0]}`,{apiUrl:n,method:"PATCH",body:r}),deleteAsset:(e,t)=>Ne(`/Asset/${e}/${t.split("/").reverse()[0]}`,{apiUrl:n,method:"DELETE"})}),qL=n=>({getSentInvitations:e=>Ne(`/SentInvitations/${e}`,{apiUrl:n}),getMemoriInvitations:(e,t)=>Ne(`/MemoriInvitations/${e}/${t}`,{apiUrl:n}),getReceivedInvitations:e=>Ne(`/ReceivedInvitations/${e}`,{apiUrl:n}),getAllInvitations:e=>Ne(`/AllInvitations/${e}`,{apiUrl:n}),getInvitation:(e,t)=>Ne(`/Invitation/${e}/${t}`,{apiUrl:n}),updateInvitation:(e,t)=>Ne(`/Invitation/${e}/${t.invitationID}`,{apiUrl:n,method:"PATCH",body:t}),deleteInvitation:(e,t)=>Ne(`/Invitation/${e}/${t}`,{apiUrl:n,method:"DELETE"}),acceptInvitation:(e,t)=>Ne(`/AcceptInvitation/${e}/${t}`,{apiUrl:n,method:"POST"}),rejectInvitation:(e,t)=>Ne(`/RejectInvitation/${e}/${t}`,{apiUrl:n,method:"POST"}),sendInvitation:(e,t)=>Ne(`/SendInvitation/${e}`,{apiUrl:n,method:"POST",body:t})}),QL=n=>({getTenantConsumptionLogs:(e,t,r,i,s)=>Ne(`/TenantConsumptionLogs/${e}/${t}/${r}${i?`/${i}`:""}${i&&s?`/${s}`:""}`,{apiUrl:n}),getUserConsumptionLogs:(e,t,r,i,s)=>Ne(`/UserConsumptionLogs/${e}/${t}/${r}${i?`/${i}`:""}${i&&s?`/${s}`:""}`,{apiUrl:n}),getMemoriConsumptionLogs:(e,t,r,i,s)=>Ne(`/MemoriConsumptionLogs/${e}/${t}/${r}${i?`/${i}`:""}${i&&s?`/${s}`:""}`,{apiUrl:n})}),JL=n=>({getTenantNotifications:e=>Ne(`/TenantNotifications/${e}`,{apiUrl:n}),getUserNotifications:e=>Ne(`/UserNotifications/${e}`,{apiUrl:n})}),KL=n=>({importCSV:async(e,t,r,i)=>Ne(`/ImportExport/ImportCSV/${e}/${t}`,{apiUrl:n,method:"POST",body:{rows:r,...i}}),importTXT:async(e,t,r,i)=>Ne(`/ImportExport/ImportTXT/${e}/${t}`,{apiUrl:n,method:"POST",body:{rows:r,...i}}),exportCSV:async(e,t,r,i)=>Ne(`/ImportExport/ExportCSV/${e}/${t}`,{apiUrl:n,method:"POST",body:{csvSpecs:r,password:i},text:!0}),exportJSONL:async(e,t,r,i)=>Ne(`/ImportExport/ExportJSONL/${e}/${t}`,{apiUrl:n,method:"POST",body:{jsonlSpecs:r,password:i},text:!0})}),YL=n=>({getProcesses:async(e,t)=>Ne(`/Processes/${e}${t?`/${t}`:""}`,{apiUrl:n,method:"GET"}),getMemoriProcesses:async(e,t,r)=>Ne(`/MemoriProcesses/${e}/${t}${r?`/${r}`:""}`,{apiUrl:n,method:"GET"}),getProcessStatus:async(e,t)=>Ne(`/ProcessStatus/${e}/${t}`,{apiUrl:n,method:"GET"}),stopProcess:async(e,t)=>Ne(`/StopProcess/${e}/${t}`,{apiUrl:n,method:"POST"})}),XL=n=>({analyzeUserQuery:async(e,t,r)=>Ne(`/Analysis/AnalyzeUserQuery/${e}/${t}`,{apiUrl:n,method:"POST",body:{...r}}),getUserQueryMatches:async(e,t,r,i,s)=>Ne(`/Analysis/AnalyzeUserQuery/${e}/${t}/${r}/${i}${s?`/${s}`:""}`,{apiUrl:n,method:"GET"})}),ZL=n=>({getCompletionConfigs:(e,t)=>Ne(`/CompletionConfigs/${e}${t?`/${t}`:""}`,{apiUrl:n,method:"GET"}),getCompletionConfig:(e,t)=>Ne(`/CompletionConfig/${e}/${t}`,{apiUrl:n,method:"GET"}),updateCompletionConfig:(e,t)=>Ne(`/CompletionConfig/${e}/${t.completionConfigID}`,{apiUrl:n,method:"PATCH",body:t}),deleteCompletionConfig:(e,t)=>Ne(`/CompletionConfig/${e}/${t}`,{apiUrl:n,method:"DELETE"}),createCompletionConfig:(e,t)=>Ne(`/CompletionConfig/${e}`,{apiUrl:n,method:"POST",body:t})}),one=n=>({asset:WL(n),memori:HL(n),user:VL(n),integration:$L(n),invitation:qL(n),consumptionLogs:QL(n),notifications:JL(n),importExport:KL(n),process:YL(n),analysis:XL(n),completionConfig:ZL(n),...WL(n),...HL(n),...VL(n),...$L(n),...qL(n),...QL(n),...JL(n),...KL(n),...YL(n),...XL(n),...ZL(n)}),e8=n=>({getCorrelationPairs:async(e,t,r)=>Ne(`/CorrelationPairs/${e}${t?`/${t}${r?`/${r}`:""}`:""}`,{method:"GET",apiUrl:n}),postCorrelationPair:async(e,t)=>Ne(`/CorrelationPair/${e}`,{method:"POST",apiUrl:n,body:t}),deleteCorrelationPair:async(e,t)=>Ne(`/CorrelationPair/${e}/${t}`,{method:"DELETE",apiUrl:n})}),t8=n=>({postTextEnteredEvent:async({sessionId:e,text:t})=>Ne(`/TextEnteredEvent/${e}`,{method:"POST",apiUrl:n,body:{text:t}}),postPlaceChangedEvent:async({sessionId:e,placeName:t,latitude:r,longitude:i,uncertaintyKm:s})=>Ne(`/PlaceChangedEvent/${e}`,{method:"POST",apiUrl:n,body:{placeName:t,latitude:r,longitude:i,uncertaintyKm:s}}),postDateChangedEvent:async(e,t)=>Ne(`/DateChangedEvent/${e}`,{method:"POST",apiUrl:n,body:{date:t}}),postTagChangedEvent:async(e,t)=>Ne(`/TagChangedEvent/${e}`,{method:"POST",apiUrl:n,body:{tag:t}}),postTimeoutEvent:async e=>Ne(`/TimeoutEvent/${e}`,{method:"POST",apiUrl:n}),postMediumSelectedEvent:async(e,t)=>Ne(`/MediumSelectedEvent/${e}`,{method:"POST",apiUrl:n,body:{medium:t}}),postDateSelectedEvent:async e=>Ne(`/DateSelectedEvent/${e}`,{method:"GET",apiUrl:n}),postPlaceSelectedEvent:async e=>Ne(`/PlaceSelectedEvent/${e}`,{method:"GET",apiUrl:n}),postTagSelectedEvent:async e=>Ne(`/TagSelectedEvent/${e}`,{method:"GET",apiUrl:n})}),n8=n=>({getIntents:async e=>Ne(`/Intents/${e}`,{method:"GET",apiUrl:n}),getIntent:async(e,t)=>Ne(`/Intent/${e}/${t}`,{method:"GET",apiUrl:n}),patchIntent:async(e,t)=>Ne(`/Intent/${e}/${t.intentID}`,{method:"PATCH",apiUrl:n,body:t}),deleteIntent:async(e,t)=>Ne(`/Intent/${e}/${t}`,{method:"DELETE",apiUrl:n}),createIntent:async(e,t)=>Ne(`/Intent/${e}`,{method:"POST",apiUrl:n,body:t}),getIntentSlots:async e=>Ne(`/IntentSlots/${e}`,{method:"GET",apiUrl:n}),getIntentSlot:async(e,t)=>Ne(`/IntentSlot/${e}/${t}`,{method:"GET",apiUrl:n}),patchIntentSlot:async(e,t)=>Ne(`/IntentSlot/${e}/${t.intentSlotID}`,{method:"PATCH",apiUrl:n,body:t}),deleteIntentSlot:async(e,t)=>Ne(`/IntentSlot/${e}/${t}`,{method:"DELETE",apiUrl:n}),createIntentSlot:async(e,t)=>Ne(`/IntentSlot/${e}`,{method:"POST",apiUrl:n,body:t})}),r8=n=>({getLocalizationKeys:async e=>Ne(`/LocalizationKeys/${e}`,{method:"GET",apiUrl:n}),getLocalizationKey:async(e,t)=>Ne(`/LocalizationKey/${e}/${t}`,{method:"GET",apiUrl:n}),deleteLocalizationKey:async(e,t)=>Ne(`/LocalizationKey/${e}/${t}`,{method:"DELETE",apiUrl:n}),postLocalizationKey:async(e,t)=>Ne(`/LocalizationKey/${e}`,{method:"POST",apiUrl:n,body:t}),patchLocalizationKey:async(e,t)=>Ne(`/LocalizationKey/${e}`,{method:"PATCH",apiUrl:n,body:t})}),i8=n=>({getMedia:async(e,t)=>Ne(`/Media/${e}/${t}`,{method:"GET",apiUrl:n}),deleteMedia:async(e,t)=>Ne(`/Media/${e}/${t}`,{method:"DELETE",apiUrl:n}),getMedium:async(e,t,r)=>Ne(`/Medium/${e}/${t}/${r}`,{method:"GET",apiUrl:n}),patchMedium:async(e,t,r)=>Ne(`/Medium/${e}/${t}/${r}`,{method:"GET",apiUrl:n}),deleteMedium:(e,t,r)=>Ne(`/Medium/${e}/${t}/${r}`,{method:"GET",apiUrl:n}),postMedium:async(e,t)=>Ne(`/Medium/${e}/${t}`,{method:"GET",apiUrl:n})}),s8=n=>({getMemories:async(e,t)=>Ne(`/Memories/${e}${t?`/${t}`:""}`,{method:"GET",apiUrl:n}),getMemoriesPaginated:async(e,t,r,i)=>Ne(`/Memories/${e}/${t}/${r}${i?`/${i}`:""}`,{method:"GET",apiUrl:n}),getMemory:async(e,t)=>Ne(`/Memory/${e}/${t}`,{method:"GET",apiUrl:n}),patchMemory:async(e,t)=>Ne(`/Memory/${e}/${t.memoryID}`,{method:"PATCH",apiUrl:n,body:t}),deleteMemory:async(e,t)=>Ne(`/Memory/${e}/${t}`,{method:"DELETE",apiUrl:n}),postMemory:async(e,t)=>Ne(`/Memory/${e}`,{method:"POST",apiUrl:n,body:t}),getMemoryAccess:async(e,t)=>Ne(`/MemoryAccess/${e}/${t}`,{method:"GET",apiUrl:n})}),o8=n=>({getWordVector:async(e,t)=>Ne(`/WordVector/${e}/${t}`,{method:"GET",apiUrl:n}),getSimilarWords:async(e,t)=>Ne(`/SimilarWords/${e}/${t}`,{method:"GET",apiUrl:n}),guessLanguage:async(e,t)=>Ne(`/GuessLanguage/${e}`,{method:"POST",apiUrl:n,body:{text:t}}),computeSimilarity:async(e,t,r,i,s)=>Ne(`/ComputeSimilarity/${e}`,{method:"POST",apiUrl:n,body:{referenceText:t,referenceTextType:r,comparisonText:i,comparisonTextType:s}}),checkWords:async(e,t)=>Ne(`/CheckWords/${e}`,{method:"POST",apiUrl:n,body:{text:t}})}),a8=n=>({getPeople:async e=>Ne(`/People/${e}`,{method:"GET",apiUrl:n}),getPerson:async(e,t)=>Ne(`/Person/${e}/${t}`,{method:"GET",apiUrl:n}),patchPerson:async(e,t)=>Ne(`/Person/${e}/${t.personID}`,{method:"PATCH",body:t,apiUrl:n}),deletePerson:async(e,t)=>Ne(`/Person/${e}/${t}`,{method:"DELETE",apiUrl:n}),postPerson:async(e,t)=>Ne(`/Person/${e}`,{method:"POST",body:t,apiUrl:n})}),l8=n=>({searchMemory:async(e,t)=>Ne(`/Search/${e}`,{method:"POST",body:t,apiUrl:n}),searchMemoryPaginated:async(e,t,r,i)=>Ne(`/Search/${e}/${t}/${r}`,{method:"POST",body:i,apiUrl:n}),filterMemories:async(e,t)=>Ne(`/FilterMemories/${e}`,{method:"POST",body:t,apiUrl:n}),filterMemoriesPaginated:async(e,t,r,i)=>Ne(`/FilterMemories/${e}/${t}/${r}`,{method:"POST",body:i,apiUrl:n}),getRandomMemory:async(e,t)=>Ne(`/Random/${e}`,{method:"POST",body:t,apiUrl:n}),getHints:async(e,t)=>Ne(`/Hints/${e}`,{method:"POST",body:t,apiUrl:n}),getMemoryTags:async e=>Ne(`/MemoryTags/${e}`,{method:"GET",apiUrl:n})}),c8=n=>({initSession:async e=>Ne("/Session",{method:"POST",body:e,apiUrl:n}),getSession:async e=>Ne(`/Session/${e}`,{method:"GET",apiUrl:n}),deleteSession:async e=>Ne(`/Session/${e}`,{method:"DELETE",apiUrl:n})}),u8=n=>({getTextQualityIndexes:async e=>Ne(`/TextQualityIndexes/${e}`,{method:"GET",apiUrl:n}),getEventLogs:async(e,t,r)=>Ne(`/EventLogs/${e}/${t}/${r}`,{method:"GET",apiUrl:n}),getMemoryEventLogs:async(e,t,r,i)=>Ne(`/EventLogs/${e}/${t}/${r}/${i}`,{method:"GET",apiUrl:n}),getIntentEventLogs:async(e,t,r,i)=>Ne(`/EventLogs/${e}/${t}/${r}/${i}`,{method:"GET",apiUrl:n})}),d8=n=>({getUnansweredQuestions:async e=>Ne(`/UnansweredQuestions/${e}`,{method:"GET",apiUrl:n}),getUnansweredQuestionsPaginated:async(e,t,r)=>Ne(`/UnansweredQuestions/${e}/${t}/${r}`,{method:"GET",apiUrl:n}),postUnansweredQuestion:async(e,t)=>Ne(`/UnansweredQuestion/${e}`,{method:"POST",apiUrl:n,body:t}),deleteUnansweredQuestion:async(e,t)=>Ne(`/UnansweredQuestion/${e}/${t}`,{method:"DELETE",apiUrl:n})}),h8=n=>({getContextVars:async e=>Ne(`/ContextVars/${e}`,{method:"GET",apiUrl:n}),getContextVarNames:async e=>Ne(`/ContextVarNames/${e}`,{method:"GET",apiUrl:n}),getContextVarValues:async(e,t)=>Ne(`/ContextVarValues/${e}/${t}`,{method:"GET",apiUrl:n})}),f8=n=>({getCustomWords:async e=>Ne(`/CustomWords/${e}`,{method:"GET",apiUrl:n}),getCustomWord:async(e,t)=>Ne(`/CustomWord/${e}/${t}`,{method:"GET",apiUrl:n}),deleteCustomWord:async(e,t)=>Ne(`/CustomWord/${e}/${t}`,{method:"DELETE",apiUrl:n}),postCustomWord:async(e,t)=>Ne(`/CustomWord/${e}`,{method:"POST",apiUrl:n,body:t}),patchCustomWord:async(e,t)=>Ne(`/CustomWord/${e}/${t.customWordID}`,{method:"PATCH",apiUrl:n,body:t})}),p8=n=>({getChatLogs:async(e,t,r)=>Ne(`/ChatLogs/${e}${t?`/${t}`:""}${t&&r?`/${r}`:""}`,{method:"GET",apiUrl:n}),getSessionChatLogs:async(e,t)=>Ne(`/SessionChatLogs/${e}/${t}`,{method:"GET",apiUrl:n}),deleteChatLogs:async(e,t,r)=>Ne(`/ChatLogs/${e}${t?`/${t}`:""}${t&&r?`/${r}`:""}`,{method:"DELETE",apiUrl:n}),deleteChatLog:async(e,t)=>Ne(`/ChatLog/${e}/${t}`,{method:"DELETE",apiUrl:n})}),m8=n=>({getExpertReferences:async e=>Ne(`/ExpertReferences/${e}`,{method:"GET",apiUrl:n}),getExpertReferencesPaginated:async(e,t,r)=>Ne(`/ExpertReferences/${e}/${t}/${r}`,{method:"GET",apiUrl:n}),getExpertReference:async(e,t)=>Ne(`/ExpertReference/${e}/${t}`,{method:"GET",apiUrl:n}),updateExpertReference:async(e,t)=>Ne(`/ExpertReference/${e}/${t.expertID}`,{method:"PATCH",apiUrl:n,body:t}),createExpertReference:async(e,t)=>Ne(`/ExpertReference/${e}`,{method:"POST",apiUrl:n,body:t}),deleteExpertReference:async(e,t)=>Ne(`/ExpertReference/${e}/${t}`,{method:"DELETE",apiUrl:n})}),g8=n=>({getKnownFacts:async e=>Ne(`/KnownFacts/${e}`,{method:"GET",apiUrl:n}),getKnownFactsPaginated:async(e,t,r)=>Ne(`/KnownFacts/${e}/${t}/${r}`,{method:"GET",apiUrl:n}),getKnownFact:async(e,t)=>Ne(`/KnownFact/${e}/${t}`,{method:"GET",apiUrl:n}),deleteKnownFact:async(e,t)=>Ne(`/KnownFact/${e}/${t}`,{method:"DELETE",apiUrl:n})}),v8=n=>({getMemoriUsers:async e=>Ne(`/Users/${e}`,{method:"GET",apiUrl:n}),getMemoriUsersPaginated:async(e,t,r)=>Ne(`/Users/${e}/${t}/${r}`,{method:"GET",apiUrl:n}),getMemoriUser:async(e,t)=>Ne(`/User/${e}/${t}`,{method:"GET",apiUrl:n}),getMemoriUserTopics:async(e,t)=>Ne(`/UserTopics/${e}/${t}`,{method:"GET",apiUrl:n}),getMemoriUserTopicsPaginated:async(e,t,r,i)=>Ne(`/UserTopics/${e}/${t}/${r}/${i}`,{method:"GET",apiUrl:n})}),y8=n=>({getTopics:async e=>Ne(`/Topics/${e}`,{method:"GET",apiUrl:n}),getTopicsPaginated:async(e,t,r)=>Ne(`/Topics/${e}/${t}/${r}`,{method:"GET",apiUrl:n}),getTopic:async(e,t)=>Ne(`/Topic/${e}/${t}`,{method:"GET",apiUrl:n}),getTopicUsers:async(e,t)=>Ne(`/TopicUsers/${e}/${t}`,{method:"GET",apiUrl:n}),getTopicUsersPaginated:async(e,t,r,i)=>Ne(`/TopicUsers/${e}/${t}/${r}/${i}`,{method:"GET",apiUrl:n})}),_8=n=>({getAllFunctions:async e=>Ne(`/Functions/${e}`,{method:"GET",apiUrl:n}),getFunctionsPaginated:async(e,t,r)=>Ne(`/Functions/${e}/${t}/${r}`,{method:"GET",apiUrl:n}),getFunction:async(e,t)=>Ne(`/Function/${e}/${t}`,{method:"GET",apiUrl:n}),patchFunction:async(e,t)=>Ne(`/Function/${e}/${t.functionID}`,{method:"PATCH",apiUrl:n,body:t}),deleteFunction:async(e,t)=>Ne(`/Function/${e}/${t}`,{method:"DELETE",apiUrl:n}),createFunction:async(e,t)=>Ne(`/Function/${e}`,{method:"POST",apiUrl:n,body:t})}),ane=n=>({correlationPairs:e8(n),...e8(n),dialog:t8(n),...t8(n),intents:n8(n),...n8(n),localizationKeys:r8(n),...r8(n),media:i8(n),...i8(n),memories:s8(n),...s8(n),nlp:o8(n),...o8(n),people:a8(n),...a8(n),search:l8(n),...l8(n),session:c8(n),...c8(n),stats:u8(n),...u8(n),unansweredQuestions:d8(n),...d8(n),contextVars:h8(n),...h8(n),customDictionary:f8(n),...f8(n),chatLogs:p8(n),...p8(n),expertReferences:m8(n),...m8(n),knownFacts:g8(n),...g8(n),user:v8(n),...v8(n),topics:y8(n),...y8(n),functions:_8(n),..._8(n)}),lne=["image/jpeg","image/png","image/jpg","image/gif","text/plain","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/pdf","video/mp4","video/avi","audio/mpeg3","audio/wav","audio/mpeg","video/mpeg","model/gltf-binary"],cne="👤",une=Object.freeze(Object.defineProperty({__proto__:null,allowedMediaTypes:lne,anonTag:cne},Symbol.toStringTag,{value:"Module"})),dne=n=>({getResourceUrl:({type:e,resourceURI:t,sessionID:r,baseURL:i="https://aisuru.com"})=>{let s=e==="cover"?`${i}/images/memoriCover.png`:`${i}/images/memoriAvatar.png`;return!t||t.length===0?s:t.includes("memoriai/memory")?`${t}?memori-ai-session-id=${r}`:t.startsWith("https://")||t.startsWith("http://")?`${t}${r?`/${r}`:""}`:t.startsWith("cloud://")?`${n.replace(/v2/,"v1")}/CloudAsset/${t.replace("cloud://","")}`:t.startsWith("guid://")?`${n.replace(/v2/,"v1")}/GuidAsset/${t.replace("guid://","")}`:s}}),qx=(n,e)=>{const t=GL(n),r=GL(e),i=`${t}/api/v2`,s=e?`${r}/memori/v2`:`${t.replace("backend","engine")}/memori/v2`;return{backend:one(i),...ane(s),constants:{...une,BACKEND_URL:i,ENGINE_URL:s},asset:dne(i)}},hne=Object.freeze(Object.defineProperty({__proto__:null,default:qx},Symbol.toStringTag,{value:"Module"}));function fne(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.includes(r))continue;t[r]=n[r]}return t}function PS(n,e){if(n==null)return{};var t,r,i=fne(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.includes(t)||{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function No(n){"@babel/helpers - typeof";return No=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},No(n)}function pne(n,e){if(No(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(No(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function qH(n){var e=pne(n,"string");return No(e)=="symbol"?e:e+""}function gl(n,e,t){return(e=qH(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var mne={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};const gne=zu(mne);var vne=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function S8(n){var e={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},t=n.match(/<\/?([^\s]+?)[/\s>]/);if(t&&(e.name=t[1],(gne[t[1]]||n.charAt(n.length-2)==="/")&&(e.voidElement=!0),e.name.startsWith("!--"))){var r=n.indexOf("-->");return{type:"comment",comment:r!==-1?n.slice(4,r):""}}for(var i=new RegExp(vne),s=null;(s=i.exec(n))!==null;)if(s[0].trim())if(s[1]){var o=s[1].trim(),a=[o,""];o.indexOf("=")>-1&&(a=o.split("=")),e.attrs[a[0]]=a[1],i.lastIndex--}else s[2]&&(e.attrs[s[2]]=s[3].trim().substring(1,s[3].length-1));return e}var yne=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,_ne=/^\s*$/,Sne=Object.create(null);function QH(n,e){switch(e.type){case"text":return n+e.content;case"tag":return n+="<"+e.name+(e.attrs?function(t){var r=[];for(var i in t)r.push(i+'="'+t[i]+'"');return r.length?" "+r.join(" "):""}(e.attrs):"")+(e.voidElement?"/>":">"),e.voidElement?n:n+e.children.reduce(QH,"")+"</"+e.name+">";case"comment":return n+"<!--"+e.comment+"-->"}}var Ane={parse:function(n,e){e||(e={}),e.components||(e.components=Sne);var t,r=[],i=[],s=-1,o=!1;if(n.indexOf("<")!==0){var a=n.indexOf("<");r.push({type:"text",content:a===-1?n:n.substring(0,a)})}return n.replace(yne,function(l,c){if(o){if(l!=="</"+t.name+">")return;o=!1}var u,d=l.charAt(1)!=="/",h=l.startsWith("<!--"),f=c+l.length,m=n.charAt(f);if(h){var g=S8(l);return s<0?(r.push(g),r):((u=i[s]).children.push(g),r)}if(d&&(s++,(t=S8(l)).type==="tag"&&e.components[t.name]&&(t.type="component",o=!0),t.voidElement||o||!m||m==="<"||t.children.push({type:"text",content:n.slice(f,n.indexOf("<",f))}),s===0&&r.push(t),(u=i[s-1])&&u.children.push(t),i[s]=t),(!d||t.voidElement)&&(s>-1&&(t.voidElement||t.name===l.slice(2,-1))&&(s--,t=s===-1?r:i[s]),!o&&m!=="<"&&m)){u=s===-1?r:i[s].children;var v=n.indexOf("<",f),y=n.slice(f,v===-1?void 0:v);_ne.test(y)&&(y=" "),(v>-1&&s+u.length>=0||y!==" ")&&u.push({type:"text",content:y})}}),r},stringify:function(n){return n.reduce(function(e,t){return e+QH("",t)},"")}};function Wc(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function A8(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,qH(r.key),r)}}function qc(n,e,t){return e&&A8(n.prototype,e),t&&A8(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}var Ene=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Cne={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},wne=function(e){return Cne[e]},Tne=function(e){return e.replace(Ene,wne)};function E8(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function WT(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?E8(Object(t),!0).forEach(function(r){gl(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):E8(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var S4={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:Tne},JH,OS=D.createContext();function KH(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};S4=WT(WT({},S4),n)}function lO(){return S4}var xne=function(){function n(){Wc(this,n),this.usedNamespaces={}}return qc(n,[{key:"addUsedNamespaces",value:function(t){var r=this;t.forEach(function(i){r.usedNamespaces[i]||(r.usedNamespaces[i]=!0)})}},{key:"getUsedNamespaces",value:function(){return Object.keys(this.usedNamespaces)}}]),n}();function YH(n){JH=n}function DS(){return JH}var Ine={type:"3rdParty",init:function(e){KH(e.options.react),YH(e)}};function XH(n){return function(e){return new Promise(function(t){var r=ZH();n.getInitialProps?n.getInitialProps(e).then(function(i){t(WT(WT({},i),r))}):t(r)})}}function ZH(){var n=DS(),e=n.reportNamespaces?n.reportNamespaces.getUsedNamespaces():[],t={},r={};return n.languages.forEach(function(i){r[i]={},e.forEach(function(s){r[i][s]=n.getResourceBundle(i,s)||{}})}),t.initialI18nStore=r,t.initialLanguage=n.language,t}function Kw(){if(console&&console.warn){for(var n,e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];typeof t[0]=="string"&&(t[0]="react-i18next:: ".concat(t[0])),(n=console).warn.apply(n,t)}}var C8={};function qT(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];typeof e[0]=="string"&&C8[e[0]]||(typeof e[0]=="string"&&(C8[e[0]]=new Date),Kw.apply(void 0,e))}function w8(n,e,t){n.loadNamespaces(e,function(){if(n.isInitialized)t();else{var r=function i(){setTimeout(function(){n.off("initialized",i)},0),t()};n.on("initialized",r)}})}function bne(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=e.languages[0],i=e.options?e.options.fallbackLng:!1,s=e.languages[e.languages.length-1];if(r.toLowerCase()==="cimode")return!0;var o=function(l,c){var u=e.services.backendConnector.state["".concat(l,"|").concat(c)];return u===-1||u===2};return t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!o(e.isLanguageChangingTo,n)?!1:!!(e.hasResourceBundle(r,n)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||o(r,n)&&(!i||o(s,n)))}function Mne(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e.languages||!e.languages.length)return qT("i18n.languages were undefined or empty",e.languages),!0;var r=e.options.ignoreJSONStructure!==void 0;return r?e.hasLoadedNamespace(n,{precheck:function(s,o){if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&s.services.backendConnector.backend&&s.isLanguageChangingTo&&!o(s.isLanguageChangingTo,n))return!1}}):bne(n,e,t)}function eV(n){return n.displayName||n.name||(typeof n=="string"&&n.length>0?n:"Unknown")}var Rne=["format"],Nne=["children","count","parent","i18nKey","context","tOptions","values","defaults","components","ns","i18n","t","shouldUnescape"];function T8(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function xs(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?T8(Object(t),!0).forEach(function(r){gl(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):T8(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function lM(n,e){if(!n)return!1;var t=n.props?n.props.children:n.children;return e?t.length>0:!!t}function cM(n){return n?n.props?n.props.children:n.children:[]}function Pne(n){return Object.prototype.toString.call(n)!=="[object Array]"?!1:n.every(function(e){return D.isValidElement(e)})}function c_(n){return Array.isArray(n)?n:[n]}function One(n,e){var t=xs({},e);return t.props=Object.assign(n.props,e.props),t}function tV(n,e){if(!n)return"";var t="",r=c_(n),i=e.transSupportBasicHtmlNodes&&e.transKeepBasicHtmlNodesFor?e.transKeepBasicHtmlNodesFor:[];return r.forEach(function(s,o){if(typeof s=="string")t+="".concat(s);else if(D.isValidElement(s)){var a=Object.keys(s.props).length,l=i.indexOf(s.type)>-1,c=s.props.children;if(!c&&l&&a===0)t+="<".concat(s.type,"/>");else if(!c&&(!l||a!==0))t+="<".concat(o,"></").concat(o,">");else if(s.props.i18nIsDynamicList)t+="<".concat(o,"></").concat(o,">");else if(l&&a===1&&typeof c=="string")t+="<".concat(s.type,">").concat(c,"</").concat(s.type,">");else{var u=tV(c,e);t+="<".concat(o,">").concat(u,"</").concat(o,">")}}else if(s===null)Kw("Trans: the passed in value is invalid - seems you passed in a null child.");else if(No(s)==="object"){var d=s.format,h=PS(s,Rne),f=Object.keys(h);if(f.length===1){var m=d?"".concat(f[0],", ").concat(d):f[0];t+="{{".concat(m,"}}")}else Kw("react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.",s)}else Kw("Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.",s)}),t}function Dne(n,e,t,r,i,s){if(e==="")return[];var o=r.transKeepBasicHtmlNodesFor||[],a=e&&new RegExp(o.join("|")).test(e);if(!n&&!a)return[e];var l={};function c(v){var y=c_(v);y.forEach(function(A){typeof A!="string"&&(lM(A)?c(cM(A)):No(A)==="object"&&!D.isValidElement(A)&&Object.assign(l,A))})}c(n);var u=Ane.parse("<0>".concat(e,"</0>")),d=xs(xs({},l),i);function h(v,y,A){var C=cM(v),T=m(C,y.children,A);return Pne(C)&&T.length===0?C:T}function f(v,y,A,C,T){v.dummy&&(v.children=y),A.push(D.cloneElement(v,xs(xs({},v.props),{},{key:C}),T?void 0:y))}function m(v,y,A){var C=c_(v),T=c_(y);return T.reduce(function(x,R,N){var M=R.children&&R.children[0]&&R.children[0].content&&t.services.interpolator.interpolate(R.children[0].content,d,t.language);if(R.type==="tag"){var O=C[parseInt(R.name,10)];!O&&A.length===1&&A[0][R.name]&&(O=A[0][R.name]),O||(O={});var P=Object.keys(R.attrs).length!==0?One({props:R.attrs},O):O,z=D.isValidElement(P),V=z&&lM(R,!0)&&!R.voidElement,$=a&&No(P)==="object"&&P.dummy&&!z,B=No(n)==="object"&&n!==null&&Object.hasOwnProperty.call(n,R.name);if(typeof P=="string"){var q=t.services.interpolator.interpolate(P,d,t.language);x.push(q)}else if(lM(P)||V){var K=h(P,R,A);f(P,K,x,N)}else if($){var se=m(C,R.children,A);x.push(D.cloneElement(P,xs(xs({},P.props),{},{key:N}),se))}else if(Number.isNaN(parseFloat(R.name)))if(B){var W=h(P,R,A);f(P,W,x,N,R.voidElement)}else if(r.transSupportBasicHtmlNodes&&o.indexOf(R.name)>-1)if(R.voidElement)x.push(D.createElement(R.name,{key:"".concat(R.name,"-").concat(N)}));else{var ee=m(C,R.children,A);x.push(D.createElement(R.name,{key:"".concat(R.name,"-").concat(N)},ee))}else if(R.voidElement)x.push("<".concat(R.name," />"));else{var Q=m(C,R.children,A);x.push("<".concat(R.name,">").concat(Q,"</").concat(R.name,">"))}else if(No(P)==="object"&&!z){var Y=R.children[0]?M:null;Y&&x.push(Y)}else R.children.length===1&&M?x.push(D.cloneElement(P,xs(xs({},P.props),{},{key:N}),M)):x.push(D.cloneElement(P,xs(xs({},P.props),{},{key:N})))}else if(R.type==="text"){var ae=r.transWrapTextNodes,fe=s?r.unescape(t.services.interpolator.interpolate(R.content,d,t.language)):t.services.interpolator.interpolate(R.content,d,t.language);ae?x.push(D.createElement(ae,{key:"".concat(R.name,"-").concat(N)},fe)):x.push(fe)}return x},[])}var g=m([{dummy:!0,children:n||[]}],u,c_(n||[]));return cM(g[0])}function Lne(n){var e=n.children,t=n.count,r=n.parent,i=n.i18nKey,s=n.context,o=n.tOptions,a=o===void 0?{}:o,l=n.values,c=n.defaults,u=n.components,d=n.ns,h=n.i18n,f=n.t,m=n.shouldUnescape,g=PS(n,Nne),v=D.useContext(OS)||{},y=v.i18n,A=v.defaultNS,C=h||y||DS();if(!C)return qT("You will need to pass in an i18next instance by using i18nextReactModule"),e;var T=f||C.t.bind(C)||function(q){return q};s&&(a.context=s);var x=xs(xs({},lO()),C.options&&C.options.react),R=d||T.ns||A||C.options&&C.options.defaultNS;R=typeof R=="string"?[R]:R||["translation"];var N=c||tV(e,x)||x.transEmptyNodeValue||i,M=x.hashTransKey,O=i||(M?M(N):N),P=l?a.interpolation:{interpolation:xs(xs({},a.interpolation),{},{prefix:"#$?",suffix:"?$#"})},z=xs(xs(xs(xs({},a),{},{count:t},l),P),{},{defaultValue:N,ns:R}),V=O?T(O,z):N,$=Dne(u||e,V,C,x,z,m),B=r!==void 0?r:x.defaultTransParent;return B?D.createElement(B,g,$):$}function nV(n){if(Array.isArray(n))return n}function kne(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=s.call(t)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}function x8(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function rV(n,e){if(n){if(typeof n=="string")return x8(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?x8(n,e):void 0}}function iV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cO(n,e){return nV(n)||kne(n,e)||rV(n,e)||iV()}function I8(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function uM(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?I8(Object(t),!0).forEach(function(r){gl(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):I8(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var Bne=function(e,t){var r=D.useRef();return D.useEffect(function(){r.current=t?r.current:e},[e,t]),r.current};function ur(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.i18n,r=D.useContext(OS)||{},i=r.i18n,s=r.defaultNS,o=t||i||DS();if(o&&!o.reportNamespaces&&(o.reportNamespaces=new xne),!o){qT("You will need to pass in an i18next instance by using initReactI18next");var a=function(O){return Array.isArray(O)?O[O.length-1]:O},l=[a,{},!1];return l.t=a,l.i18n={},l.ready=!1,l}o.options.react&&o.options.react.wait!==void 0&&qT("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");var c=uM(uM(uM({},lO()),o.options.react),e),u=c.useSuspense,d=c.keyPrefix,h=n||s||o.options&&o.options.defaultNS;h=typeof h=="string"?[h]:h||["translation"],o.reportNamespaces.addUsedNamespaces&&o.reportNamespaces.addUsedNamespaces(h);var f=(o.isInitialized||o.initializedStoreOnce)&&h.every(function(M){return Mne(M,o,c)});function m(){return o.getFixedT(null,c.nsMode==="fallback"?h:h[0],d)}var g=D.useState(m),v=cO(g,2),y=v[0],A=v[1],C=h.join(),T=Bne(C),x=D.useRef(!0);D.useEffect(function(){var M=c.bindI18n,O=c.bindI18nStore;x.current=!0,!f&&!u&&w8(o,h,function(){x.current&&A(m)}),f&&T&&T!==C&&x.current&&A(m);function P(){x.current&&A(m)}return M&&o&&o.on(M,P),O&&o&&o.store.on(O,P),function(){x.current=!1,M&&o&&M.split(" ").forEach(function(z){return o.off(z,P)}),O&&o&&O.split(" ").forEach(function(z){return o.store.off(z,P)})}},[o,C]);var R=D.useRef(!0);D.useEffect(function(){x.current&&!R.current&&A(m),R.current=!1},[o,d]);var N=[y,o,f];if(N.t=y,N.i18n=o,N.ready=f,f||!f&&!u)return N;throw new Promise(function(M){w8(o,h,function(){M()})})}var Fne=["forwardedRef"];function b8(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function OE(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?b8(Object(t),!0).forEach(function(r){gl(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):b8(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function sV(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function(r){function i(o){var a=o.forwardedRef,l=PS(o,Fne),c=ur(n,OE(OE({},l),{},{keyPrefix:e.keyPrefix})),u=cO(c,3),d=u[0],h=u[1],f=u[2],m=OE(OE({},l),{},{t:d,i18n:h,tReady:f});return e.withRef&&a?m.ref=a:!e.withRef&&a&&(m.forwardedRef=a),D.createElement(r,m)}i.displayName="withI18nextTranslation(".concat(eV(r),")"),i.WrappedComponent=r;var s=function(a,l){return D.createElement(i,Object.assign({},a,{forwardedRef:l}))};return e.withRef?D.forwardRef(s):i}}var zne=["ns","children"];function Une(n){var e=n.ns,t=n.children,r=PS(n,zne),i=ur(e,r),s=cO(i,3),o=s[0],a=s[1],l=s[2];return t(o,{i18n:a,lng:a.language},l)}function oV(n){var e=n.i18n,t=n.defaultNS,r=n.children,i=D.useMemo(function(){return{i18n:e,defaultNS:t}},[e,t]);return D.createElement(OS.Provider,{value:i},r)}function aV(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=t.i18n,i=D.useContext(OS)||{},s=i.i18n,o=r||s||DS();o.options&&o.options.isClone||(n&&!o.initializedStoreOnce&&(o.services.resourceStore.data=n,o.options.ns=Object.values(n).reduce(function(a,l){return Object.keys(l).forEach(function(c){a.indexOf(c)<0&&a.push(c)}),a},o.options.ns),o.initializedStoreOnce=!0,o.isInitialized=!0),e&&!o.initializedLanguageOnce&&(o.changeLanguage(e),o.initializedLanguageOnce=!0))}var jne=["initialI18nStore","initialLanguage"];function M8(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Gne(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?M8(Object(t),!0).forEach(function(r){gl(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):M8(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Hne(){return function(e){function t(r){var i=r.initialI18nStore,s=r.initialLanguage,o=PS(r,jne);return aV(i,s),D.createElement(e,Gne({},o))}return t.getInitialProps=XH(e),t.displayName="withI18nextSSR(".concat(eV(e),")"),t.WrappedComponent=e,t}}var Vne=function(){return""},$ne=function(){return""},Wne=function(){return""},qne=function(){return""},Qne=function(){return""},Jne=function(){return""};const Kne=Object.freeze(Object.defineProperty({__proto__:null,I18nContext:OS,I18nextProvider:oV,Trans:Lne,Translation:Une,composeInitialProps:XH,date:Vne,getDefaults:lO,getI18n:DS,getInitialProps:ZH,initReactI18next:Ine,number:Wne,plural:Qne,select:qne,selectOrdinal:Jne,setDefaults:KH,setI18n:YH,time:$ne,useSSR:aV,useTranslation:ur,withSSR:Hne,withTranslation:sV},Symbol.toStringTag,{value:"Module"})),R8=(n,e,t)=>({endTime:e,insertTime:t,type:"exponentialRampToValue",value:n}),N8=(n,e,t)=>({endTime:e,insertTime:t,type:"linearRampToValue",value:n}),A4=(n,e)=>({startTime:e,type:"setValue",value:n}),lV=(n,e,t)=>({duration:t,startTime:e,type:"setValueCurve",values:n}),cV=(n,e,{startTime:t,target:r,timeConstant:i})=>r+(e-r)*Math.exp((t-n)/i),sg=n=>n.type==="exponentialRampToValue",QT=n=>n.type==="linearRampToValue",tf=n=>sg(n)||QT(n),uO=n=>n.type==="setValue",wd=n=>n.type==="setValueCurve",JT=(n,e,t,r)=>{const i=n[e];return i===void 0?r:tf(i)||uO(i)?i.value:wd(i)?i.values[i.values.length-1]:cV(t,JT(n,e-1,i.startTime,r),i)},P8=(n,e,t,r,i)=>t===void 0?[r.insertTime,i]:tf(t)?[t.endTime,t.value]:uO(t)?[t.startTime,t.value]:wd(t)?[t.startTime+t.duration,t.values[t.values.length-1]]:[t.startTime,JT(n,e-1,t.startTime,i)],E4=n=>n.type==="cancelAndHold",C4=n=>n.type==="cancelScheduledValues",Lh=n=>E4(n)||C4(n)?n.cancelTime:sg(n)||QT(n)?n.endTime:n.startTime,O8=(n,e,t,{endTime:r,value:i})=>t===i?i:0<t&&0<i||t<0&&i<0?t*(i/t)**((n-e)/(r-e)):0,D8=(n,e,t,{endTime:r,value:i})=>t+(n-e)/(r-e)*(i-t),Yne=(n,e)=>{const t=Math.floor(e),r=Math.ceil(e);return t===r?n[t]:(1-(e-t))*n[t]+(1-(r-e))*n[r]},Xne=(n,{duration:e,startTime:t,values:r})=>{const i=(n-t)/e*(r.length-1);return Yne(r,i)},DE=n=>n.type==="setTarget";class Zne{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const t=Lh(e);if(E4(e)||C4(e)){const r=this._automationEvents.findIndex(s=>C4(e)&&wd(s)?s.startTime+s.duration>=t:Lh(s)>=t),i=this._automationEvents[r];if(r!==-1&&(this._automationEvents=this._automationEvents.slice(0,r)),E4(e)){const s=this._automationEvents[this._automationEvents.length-1];if(i!==void 0&&tf(i)){if(DE(s))throw new Error("The internal list is malformed.");const o=wd(s)?s.startTime+s.duration:Lh(s),a=wd(s)?s.values[s.values.length-1]:s.value,l=sg(i)?O8(t,o,a,i):D8(t,o,a,i),c=sg(i)?R8(l,t,this._currenTime):N8(l,t,this._currenTime);this._automationEvents.push(c)}s!==void 0&&DE(s)&&this._automationEvents.push(A4(this.getValue(t),t)),s!==void 0&&wd(s)&&s.startTime+s.duration>t&&(this._automationEvents[this._automationEvents.length-1]=lV(new Float32Array([6,7]),s.startTime,t-s.startTime))}}else{const r=this._automationEvents.findIndex(o=>Lh(o)>t),i=r===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[r-1];if(i!==void 0&&wd(i)&&Lh(i)+i.duration>t)return!1;const s=sg(e)?R8(e.value,e.endTime,this._currenTime):QT(e)?N8(e.value,t,this._currenTime):e;if(r===-1)this._automationEvents.push(s);else{if(wd(e)&&t+e.duration>Lh(this._automationEvents[r]))return!1;this._automationEvents.splice(r,0,s)}}return!0}flush(e){const t=this._automationEvents.findIndex(r=>Lh(r)>e);if(t>1){const r=this._automationEvents.slice(t-1),i=r[0];DE(i)&&r.unshift(A4(JT(this._automationEvents,t-2,i.startTime,this._defaultValue),i.startTime)),this._automationEvents=r}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const t=this._automationEvents.findIndex(o=>Lh(o)>e),r=this._automationEvents[t],i=(t===-1?this._automationEvents.length:t)-1,s=this._automationEvents[i];if(s!==void 0&&DE(s)&&(r===void 0||!tf(r)||r.insertTime>e))return cV(e,JT(this._automationEvents,i-1,s.startTime,this._defaultValue),s);if(s!==void 0&&uO(s)&&(r===void 0||!tf(r)))return s.value;if(s!==void 0&&wd(s)&&(r===void 0||!tf(r)||s.startTime+s.duration>e))return e<s.startTime+s.duration?Xne(e,s):s.values[s.values.length-1];if(s!==void 0&&tf(s)&&(r===void 0||!tf(r)))return s.value;if(r!==void 0&&sg(r)){const[o,a]=P8(this._automationEvents,i,s,r,this._defaultValue);return O8(e,o,a,r)}if(r!==void 0&&QT(r)){const[o,a]=P8(this._automationEvents,i,s,r,this._defaultValue);return D8(e,o,a,r)}return this._defaultValue}}const ere=n=>({cancelTime:n,type:"cancelAndHold"}),tre=n=>({cancelTime:n,type:"cancelScheduledValues"}),nre=(n,e)=>({endTime:e,type:"exponentialRampToValue",value:n}),rre=(n,e)=>({endTime:e,type:"linearRampToValue",value:n}),ire=(n,e,t)=>({startTime:e,target:n,timeConstant:t,type:"setTarget"}),sre=()=>new DOMException("","AbortError"),ore=n=>(e,t,[r,i,s],o)=>{n(e[i],[t,r,s],a=>a[0]===t&&a[1]===r,o)},are=n=>(e,t,r)=>{const i=[];for(let s=0;s<r.numberOfInputs;s+=1)i.push(new Set);n.set(e,{activeInputs:i,outputs:new Set,passiveInputs:new WeakMap,renderer:t})},lre=n=>(e,t)=>{n.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})},Bg=new WeakSet,uV=new WeakMap,dV=new WeakMap,hV=new WeakMap,fV=new WeakMap,pV=new WeakMap,mV=new WeakMap,w4=new WeakMap,L8=new WeakMap,gV={construct(){return gV}},cre=n=>{try{const e=new Proxy(n,gV);new e}catch{return!1}return!0},k8=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,B8=(n,e)=>{const t=[];let r=n.replace(/^[\s]+/,""),i=r.match(k8);for(;i!==null;){const s=i[1].slice(1,-1),o=i[0].replace(/([\s]+)?;?$/,"").replace(s,new URL(s,e).toString());t.push(o),r=r.slice(i[0].length).replace(/^[\s]+/,""),i=r.match(k8)}return[t.join(";"),r]},F8=n=>{if(n!==void 0&&!Array.isArray(n))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},z8=n=>{if(!cre(n))throw new TypeError("The given value for processorCtor should be a constructor.");if(n.prototype===null||typeof n.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},ure=(n,e,t,r,i,s,o,a,l,c,u,d,h)=>{let f=0;return(m,g,v={credentials:"omit"})=>{const y=u.get(m);if(y!==void 0&&y.has(g))return Promise.resolve();const A=c.get(m);if(A!==void 0){const x=A.get(g);if(x!==void 0)return x}const C=s(m),T=C.audioWorklet===void 0?i(g).then(([x,R])=>{const[N,M]=B8(x,R),O=`${N};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${M}
})})(window,'_AWGS')`;return t(O)}).then(()=>{const x=h._AWGS.pop();if(x===void 0)throw new SyntaxError;r(C.currentTime,C.sampleRate,()=>x(class{},void 0,(R,N)=>{if(R.trim()==="")throw e();const M=L8.get(C);if(M!==void 0){if(M.has(R))throw e();z8(N),F8(N.parameterDescriptors),M.set(R,N)}else z8(N),F8(N.parameterDescriptors),L8.set(C,new Map([[R,N]]))},C.sampleRate,void 0,void 0))}):Promise.all([i(g),Promise.resolve(n(d,d))]).then(([[x,R],N])=>{const M=f+1;f=M;const[O,P]=B8(x,R),B=`${O};((AudioWorkletProcessor,registerProcessor)=>{${P}
})(${N?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${N?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${N?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${M}',class extends AudioWorkletProcessor{process(){return !1}})`,q=new Blob([B],{type:"application/javascript; charset=utf-8"}),K=URL.createObjectURL(q);return C.audioWorklet.addModule(K,v).then(()=>{if(a(C))return C;const se=o(C);return se.audioWorklet.addModule(K,v).then(()=>se)}).then(se=>{if(l===null)throw new SyntaxError;try{new l(se,`__sac${M}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(K))});return A===void 0?c.set(m,new Map([[g,T]])):A.set(g,T),T.then(()=>{const x=u.get(m);x===void 0?u.set(m,new Set([g])):x.add(g)}).finally(()=>{const x=c.get(m);x!==void 0&&x.delete(g)}),T}},Qf=(n,e)=>{const t=n.get(e);if(t===void 0)throw new Error("A value with the given key could not be found.");return t},Qx=(n,e)=>{const t=Array.from(n).filter(e);if(t.length>1)throw Error("More than one element was found.");if(t.length===0)throw Error("No element was found.");const[r]=t;return n.delete(r),r},vV=(n,e,t,r)=>{const i=Qf(n,e),s=Qx(i,o=>o[0]===t&&o[1]===r);return i.size===0&&n.delete(e),s},LS=n=>Qf(mV,n),Fg=n=>{if(Bg.has(n))throw new Error("The AudioNode is already stored.");Bg.add(n),LS(n).forEach(e=>e(!0))},yV=n=>"port"in n,kS=n=>{if(!Bg.has(n))throw new Error("The AudioNode is not stored.");Bg.delete(n),LS(n).forEach(e=>e(!1))},T4=(n,e)=>{!yV(n)&&e.every(t=>t.size===0)&&kS(n)},dre=(n,e,t,r,i,s,o,a,l,c,u,d,h)=>{const f=new WeakMap;return(m,g,v,y,A)=>{const{activeInputs:C,passiveInputs:T}=s(g),{outputs:x}=s(m),R=a(m),N=M=>{const O=l(g),P=l(m);if(M){const z=vV(T,m,v,y);n(C,m,z,!1),!A&&!d(m)&&t(P,O,v,y),h(g)&&Fg(g)}else{const z=r(C,m,v,y);e(T,y,z,!1),!A&&!d(m)&&i(P,O,v,y);const V=o(g);if(V===0)u(g)&&T4(g,C);else{const $=f.get(g);$!==void 0&&clearTimeout($),f.set(g,setTimeout(()=>{u(g)&&T4(g,C)},V*1e3))}}};return c(x,[g,v,y],M=>M[0]===g&&M[1]===v&&M[2]===y,!0)?(R.add(N),u(m)?n(C,m,[v,y,N],!0):e(T,y,[m,v,N],!0),!0):!1}},hre=n=>(e,t,[r,i,s],o)=>{const a=e.get(r);a===void 0?e.set(r,new Set([[i,t,s]])):n(a,[i,t,s],l=>l[0]===i&&l[1]===t,o)},fre=n=>(e,t)=>{const r=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(r).connect(e.destination);const i=()=>{t.removeEventListener("ended",i),t.disconnect(r),r.disconnect()};t.addEventListener("ended",i)},pre={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},mre=(n,e,t,r,i,s)=>class extends n{constructor(a,l){const c=i(a),u={...pre,...l},d=r(c,u),h=s(c)?e():null;super(a,!1,d,h),this._nativeAnalyserNode=d}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(a){this._nativeAnalyserNode.fftSize=a}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(a){const l=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=a,!(a>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=l,t()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(a){const l=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=a,!(this._nativeAnalyserNode.maxDecibels>a))throw this._nativeAnalyserNode.minDecibels=l,t()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(a){this._nativeAnalyserNode.smoothingTimeConstant=a}getByteFrequencyData(a){this._nativeAnalyserNode.getByteFrequencyData(a)}getByteTimeDomainData(a){this._nativeAnalyserNode.getByteTimeDomainData(a)}getFloatFrequencyData(a){this._nativeAnalyserNode.getFloatFrequencyData(a)}getFloatTimeDomainData(a){this._nativeAnalyserNode.getFloatTimeDomainData(a)}},ha=(n,e)=>n.context===e,gre=(n,e,t)=>()=>{const r=new WeakMap,i=async(s,o)=>{let a=e(s);if(!ha(a,o)){const c={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=n(o,c)}return r.set(o,a),await t(s,o,a),a};return{render(s,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):i(s,o)}}},x4=n=>{try{n.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Um=()=>new DOMException("","IndexSizeError"),_V=n=>{n.getChannelData=(e=>t=>{try{return e.call(n,t)}catch(r){throw r.code===12?Um():r}})(n.getChannelData)},vre={numberOfChannels:1},yre=(n,e,t,r,i,s,o,a)=>{let l=null;return class SV{constructor(u){if(i===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:d,numberOfChannels:h,sampleRate:f}={...vre,...u};l===null&&(l=new i(1,1,44100));const m=r!==null&&e(s,s)?new r({length:d,numberOfChannels:h,sampleRate:f}):l.createBuffer(h,d,f);if(m.numberOfChannels===0)throw t();return typeof m.copyFromChannel!="function"?(o(m),_V(m)):e(x4,()=>x4(m))||a(m),n.add(m),m}static[Symbol.hasInstance](u){return u!==null&&typeof u=="object"&&Object.getPrototypeOf(u)===SV.prototype||n.has(u)}}},Xa=-34028234663852886e22,Na=-Xa,zd=n=>Bg.has(n),_re={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},Sre=(n,e,t,r,i,s,o,a)=>class extends n{constructor(c,u){const d=s(c),h={..._re,...u},f=i(d,h),m=o(d),g=m?e():null;super(c,!1,f,g),this._audioBufferSourceNodeRenderer=g,this._isBufferNullified=!1,this._isBufferSet=h.buffer!==null,this._nativeAudioBufferSourceNode=f,this._onended=null,this._playbackRate=t(this,m,f.playbackRate,Na,Xa)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(c){if(this._nativeAudioBufferSourceNode.buffer=c,c!==null){if(this._isBufferSet)throw r();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(c){this._nativeAudioBufferSourceNode.loop=c}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(c){this._nativeAudioBufferSourceNode.loopEnd=c}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(c){this._nativeAudioBufferSourceNode.loopStart=c}get onended(){return this._onended}set onended(c){const u=typeof c=="function"?a(this,c):null;this._nativeAudioBufferSourceNode.onended=u;const d=this._nativeAudioBufferSourceNode.onended;this._onended=d!==null&&d===u?c:d}get playbackRate(){return this._playbackRate}start(c=0,u=0,d){if(this._nativeAudioBufferSourceNode.start(c,u,d),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=d===void 0?[c,u]:[c,u,d]),this.context.state!=="closed"){Fg(this);const h=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",h),zd(this)&&kS(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",h)}}stop(c=0){this._nativeAudioBufferSourceNode.stop(c),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=c)}},Are=(n,e,t,r,i)=>()=>{const s=new WeakMap;let o=null,a=null;const l=async(c,u)=>{let d=t(c);const h=ha(d,u);if(!h){const f={buffer:d.buffer,channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,loop:d.loop,loopEnd:d.loopEnd,loopStart:d.loopStart,playbackRate:d.playbackRate.value};d=e(u,f),o!==null&&d.start(...o),a!==null&&d.stop(a)}return s.set(u,d),h?await n(u,c.playbackRate,d.playbackRate):await r(u,c.playbackRate,d.playbackRate),await i(c,u,d),d};return{set start(c){o=c},set stop(c){a=c},render(c,u){const d=s.get(u);return d!==void 0?Promise.resolve(d):l(c,u)}}},Ere=n=>"playbackRate"in n,Cre=n=>"frequency"in n&&"gain"in n,wre=n=>"offset"in n,Tre=n=>!("frequency"in n)&&"gain"in n,xre=n=>"detune"in n&&"frequency"in n,Ire=n=>"pan"in n,tl=n=>Qf(uV,n),BS=n=>Qf(hV,n),I4=(n,e)=>{const{activeInputs:t}=tl(n);t.forEach(i=>i.forEach(([s])=>{e.includes(n)||I4(s,[...e,n])}));const r=Ere(n)?[n.playbackRate]:yV(n)?Array.from(n.parameters.values()):Cre(n)?[n.Q,n.detune,n.frequency,n.gain]:wre(n)?[n.offset]:Tre(n)?[n.gain]:xre(n)?[n.detune,n.frequency]:Ire(n)?[n.pan]:[];for(const i of r){const s=BS(i);s!==void 0&&s.activeInputs.forEach(([o])=>I4(o,e))}zd(n)&&kS(n)},bre=n=>{I4(n.destination,[])},Mre=n=>n===void 0||typeof n=="number"||typeof n=="string"&&(n==="balanced"||n==="interactive"||n==="playback"),Rre=(n,e,t,r,i,s,o,a,l)=>class extends n{constructor(u={}){if(l===null)throw new Error("Missing the native AudioContext constructor.");let d;try{d=new l(u)}catch(m){throw m.code===12&&m.message==="sampleRate is not in range"?t():m}if(d===null)throw r();if(!Mre(u.latencyHint))throw new TypeError(`The provided value '${u.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(u.sampleRate!==void 0&&d.sampleRate!==u.sampleRate)throw t();super(d,2);const{latencyHint:h}=u,{sampleRate:f}=d;if(this._baseLatency=typeof d.baseLatency=="number"?d.baseLatency:h==="balanced"?512/f:h==="interactive"||h===void 0?256/f:h==="playback"?1024/f:Math.max(2,Math.min(128,Math.round(h*f/128)))*128/f,this._nativeAudioContext=d,l.name==="webkitAudioContext"?(this._nativeGainNode=d.createGain(),this._nativeOscillatorNode=d.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(d.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,d.state==="running"){this._state="suspended";const m=()=>{this._state==="suspended"&&(this._state=null),d.removeEventListener("statechange",m)};d.addEventListener("statechange",m)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),bre(this)}))}createMediaElementSource(u){return new i(this,{mediaElement:u})}createMediaStreamDestination(){return new s(this)}createMediaStreamSource(u){return new o(this,{mediaStream:u})}createMediaStreamTrackSource(u){return new a(this,{mediaStreamTrack:u})}resume(){return this._state==="suspended"?new Promise((u,d)=>{const h=()=>{this._nativeAudioContext.removeEventListener("statechange",h),this._nativeAudioContext.state==="running"?u():this.resume().then(u,d)};this._nativeAudioContext.addEventListener("statechange",h)}):this._nativeAudioContext.resume().catch(u=>{throw u===void 0||u.code===15?e():u})}suspend(){return this._nativeAudioContext.suspend().catch(u=>{throw u===void 0?e():u})}},Nre=(n,e,t,r,i,s,o,a)=>class extends n{constructor(c,u){const d=s(c),h=o(d),f=i(d,u,h),m=h?e(a):null;super(c,!1,f,m),this._isNodeOfNativeOfflineAudioContext=h,this._nativeAudioDestinationNode=f}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(c){if(this._isNodeOfNativeOfflineAudioContext)throw r();if(c>this._nativeAudioDestinationNode.maxChannelCount)throw t();this._nativeAudioDestinationNode.channelCount=c}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(c){if(this._isNodeOfNativeOfflineAudioContext)throw r();this._nativeAudioDestinationNode.channelCountMode=c}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},Pre=n=>{const e=new WeakMap,t=async(r,i)=>{const s=i.destination;return e.set(i,s),await n(r,i,s),s};return{render(r,i){const s=e.get(i);return s!==void 0?Promise.resolve(s):t(r,i)}}},Ore=(n,e,t,r,i,s,o,a)=>(l,c)=>{const u=c.listener,d=()=>{const x=new Float32Array(1),R=e(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),N=o(c);let M=!1,O=[0,0,-1,0,1,0],P=[0,0,0];const z=()=>{if(M)return;M=!0;const q=r(c,256,9,0);q.onaudioprocess=({inputBuffer:K})=>{const se=[s(K,x,0),s(K,x,1),s(K,x,2),s(K,x,3),s(K,x,4),s(K,x,5)];se.some((ee,Q)=>ee!==O[Q])&&(u.setOrientation(...se),O=se);const W=[s(K,x,6),s(K,x,7),s(K,x,8)];W.some((ee,Q)=>ee!==P[Q])&&(u.setPosition(...W),P=W)},R.connect(q)},V=q=>K=>{K!==O[q]&&(O[q]=K,u.setOrientation(...O))},$=q=>K=>{K!==P[q]&&(P[q]=K,u.setPosition(...P))},B=(q,K,se)=>{const W=t(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:K});W.connect(R,0,q),W.start(),Object.defineProperty(W.offset,"defaultValue",{get(){return K}});const ee=n({context:l},N,W.offset,Na,Xa);return a(ee,"value",Q=>()=>Q.call(ee),Q=>Y=>{try{Q.call(ee,Y)}catch(ae){if(ae.code!==9)throw ae}z(),N&&se(Y)}),ee.cancelAndHoldAtTime=(Q=>N?()=>{throw i()}:(...Y)=>{const ae=Q.apply(ee,Y);return z(),ae})(ee.cancelAndHoldAtTime),ee.cancelScheduledValues=(Q=>N?()=>{throw i()}:(...Y)=>{const ae=Q.apply(ee,Y);return z(),ae})(ee.cancelScheduledValues),ee.exponentialRampToValueAtTime=(Q=>N?()=>{throw i()}:(...Y)=>{const ae=Q.apply(ee,Y);return z(),ae})(ee.exponentialRampToValueAtTime),ee.linearRampToValueAtTime=(Q=>N?()=>{throw i()}:(...Y)=>{const ae=Q.apply(ee,Y);return z(),ae})(ee.linearRampToValueAtTime),ee.setTargetAtTime=(Q=>N?()=>{throw i()}:(...Y)=>{const ae=Q.apply(ee,Y);return z(),ae})(ee.setTargetAtTime),ee.setValueAtTime=(Q=>N?()=>{throw i()}:(...Y)=>{const ae=Q.apply(ee,Y);return z(),ae})(ee.setValueAtTime),ee.setValueCurveAtTime=(Q=>N?()=>{throw i()}:(...Y)=>{const ae=Q.apply(ee,Y);return z(),ae})(ee.setValueCurveAtTime),ee};return{forwardX:B(0,0,V(0)),forwardY:B(1,0,V(1)),forwardZ:B(2,-1,V(2)),positionX:B(6,0,$(0)),positionY:B(7,0,$(1)),positionZ:B(8,0,$(2)),upX:B(3,0,V(3)),upY:B(4,1,V(4)),upZ:B(5,0,V(5))}},{forwardX:h,forwardY:f,forwardZ:m,positionX:g,positionY:v,positionZ:y,upX:A,upY:C,upZ:T}=u.forwardX===void 0?d():u;return{get forwardX(){return h},get forwardY(){return f},get forwardZ(){return m},get positionX(){return g},get positionY(){return v},get positionZ(){return y},get upX(){return A},get upY(){return C},get upZ(){return T}}},KT=n=>"context"in n,FS=n=>KT(n[0]),jm=(n,e,t,r)=>{for(const i of n)if(t(i)){if(r)return!1;throw Error("The set contains at least one similar element.")}return n.add(e),!0},U8=(n,e,[t,r],i)=>{jm(n,[e,t,r],s=>s[0]===e&&s[1]===t,i)},j8=(n,[e,t,r],i)=>{const s=n.get(e);s===void 0?n.set(e,new Set([[t,r]])):jm(s,[t,r],o=>o[0]===t,i)},sv=n=>"inputs"in n,YT=(n,e,t,r)=>{if(sv(e)){const i=e.inputs[r];return n.connect(i,t,0),[i,t,0]}return n.connect(e,t,r),[e,t,r]},AV=(n,e,t)=>{for(const r of n)if(r[0]===e&&r[1]===t)return n.delete(r),r;return null},Dre=(n,e,t)=>Qx(n,r=>r[0]===e&&r[1]===t),EV=(n,e)=>{if(!LS(n).delete(e))throw new Error("Missing the expected event listener.")},CV=(n,e,t)=>{const r=Qf(n,e),i=Qx(r,s=>s[0]===t);return r.size===0&&n.delete(e),i},XT=(n,e,t,r)=>{sv(e)?n.disconnect(e.inputs[r],t,0):n.disconnect(e,t,r)},Ii=n=>Qf(dV,n),Z_=n=>Qf(fV,n),xm=n=>w4.has(n),Yw=n=>!Bg.has(n),G8=(n,e)=>new Promise(t=>{if(e!==null)t(!0);else{const r=n.createScriptProcessor(256,1,1),i=n.createGain(),s=n.createBuffer(1,2,44100),o=s.getChannelData(0);o[0]=1,o[1]=1;const a=n.createBufferSource();a.buffer=s,a.loop=!0,a.connect(r).connect(n.destination),a.connect(i),a.disconnect(i),r.onaudioprocess=l=>{const c=l.inputBuffer.getChannelData(0);Array.prototype.some.call(c,u=>u===1)?t(!0):t(!1),a.stop(),r.onaudioprocess=null,a.disconnect(r),r.disconnect(n.destination)},a.start()}}),dM=(n,e)=>{const t=new Map;for(const r of n)for(const i of r){const s=t.get(i);t.set(i,s===void 0?1:s+1)}t.forEach((r,i)=>e(i,r))},H8=n=>"context"in n,Lre=n=>{const e=new Map;n.connect=(t=>(r,i=0,s=0)=>{const o=H8(r)?t(r,i,s):t(r,i),a=e.get(r);return a===void 0?e.set(r,[{input:s,output:i}]):a.every(l=>l.input!==s||l.output!==i)&&a.push({input:s,output:i}),o})(n.connect.bind(n)),n.disconnect=(t=>(r,i,s)=>{if(t.apply(n),r===void 0)e.clear();else if(typeof r=="number")for(const[o,a]of e){const l=a.filter(c=>c.output!==r);l.length===0?e.delete(o):e.set(o,l)}else if(e.has(r))if(i===void 0)e.delete(r);else{const o=e.get(r);if(o!==void 0){const a=o.filter(l=>l.output!==i&&(l.input!==s||s===void 0));a.length===0?e.delete(r):e.set(r,a)}}for(const[o,a]of e)a.forEach(l=>{H8(o)?n.connect(o,l.output,l.input):n.connect(o,l.output)})})(n.disconnect)},kre=(n,e,t,r)=>{const{activeInputs:i,passiveInputs:s}=BS(e),{outputs:o}=tl(n),a=LS(n),l=c=>{const u=Ii(n),d=Z_(e);if(c){const h=CV(s,n,t);U8(i,n,h,!1),!r&&!xm(n)&&u.connect(d,t)}else{const h=Dre(i,n,t);j8(s,h,!1),!r&&!xm(n)&&u.disconnect(d,t)}};return jm(o,[e,t],c=>c[0]===e&&c[1]===t,!0)?(a.add(l),zd(n)?U8(i,n,[t,l],!0):j8(s,[n,t,l],!0),!0):!1},Bre=(n,e,t,r)=>{const{activeInputs:i,passiveInputs:s}=tl(e),o=AV(i[r],n,t);return o===null?[vV(s,n,t,r)[2],!1]:[o[2],!0]},Fre=(n,e,t)=>{const{activeInputs:r,passiveInputs:i}=BS(e),s=AV(r,n,t);return s===null?[CV(i,n,t)[1],!1]:[s[2],!0]},dO=(n,e,t,r,i)=>{const[s,o]=Bre(n,t,r,i);if(s!==null&&(EV(n,s),o&&!e&&!xm(n)&&XT(Ii(n),Ii(t),r,i)),zd(t)){const{activeInputs:a}=tl(t);T4(t,a)}},hO=(n,e,t,r)=>{const[i,s]=Fre(n,t,r);i!==null&&(EV(n,i),s&&!e&&!xm(n)&&Ii(n).disconnect(Z_(t),r))},zre=(n,e)=>{const t=tl(n),r=[];for(const i of t.outputs)FS(i)?dO(n,e,...i):hO(n,e,...i),r.push(i[0]);return t.outputs.clear(),r},Ure=(n,e,t)=>{const r=tl(n),i=[];for(const s of r.outputs)s[1]===t&&(FS(s)?dO(n,e,...s):hO(n,e,...s),i.push(s[0]),r.outputs.delete(s));return i},jre=(n,e,t,r,i)=>{const s=tl(n);return Array.from(s.outputs).filter(o=>o[0]===t&&(r===void 0||o[1]===r)&&(i===void 0||o[2]===i)).map(o=>(FS(o)?dO(n,e,...o):hO(n,e,...o),s.outputs.delete(o),o[0]))},Gre=(n,e,t,r,i,s,o,a,l,c,u,d,h,f,m,g)=>class extends c{constructor(y,A,C,T){super(C),this._context=y,this._nativeAudioNode=C;const x=u(y);d(x)&&t(G8,()=>G8(x,g))!==!0&&Lre(C),dV.set(this,C),mV.set(this,new Set),y.state!=="closed"&&A&&Fg(this),n(this,T,C)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(y){this._nativeAudioNode.channelCount=y}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(y){this._nativeAudioNode.channelCountMode=y}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(y){this._nativeAudioNode.channelInterpretation=y}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(y,A=0,C=0){if(A<0||A>=this._nativeAudioNode.numberOfOutputs)throw i();const T=u(this._context),x=m(T);if(h(y)||f(y))throw s();if(KT(y)){const M=Ii(y);try{const P=YT(this._nativeAudioNode,M,A,C),z=Yw(this);(x||z)&&this._nativeAudioNode.disconnect(...P),this.context.state!=="closed"&&!z&&Yw(y)&&Fg(y)}catch(P){throw P.code===12?s():P}if(e(this,y,A,C,x)){const P=l([this],y);dM(P,r(x))}return y}const R=Z_(y);if(R.name==="playbackRate"&&R.maxValue===1024)throw o();try{this._nativeAudioNode.connect(R,A),(x||Yw(this))&&this._nativeAudioNode.disconnect(R,A)}catch(M){throw M.code===12?s():M}if(kre(this,y,A,x)){const M=l([this],y);dM(M,r(x))}}disconnect(y,A,C){let T;const x=u(this._context),R=m(x);if(y===void 0)T=zre(this,R);else if(typeof y=="number"){if(y<0||y>=this.numberOfOutputs)throw i();T=Ure(this,R,y)}else{if(A!==void 0&&(A<0||A>=this.numberOfOutputs)||KT(y)&&C!==void 0&&(C<0||C>=y.numberOfInputs))throw i();if(T=jre(this,R,y,A,C),T.length===0)throw s()}for(const N of T){const M=l([this],N);dM(M,a)}}},Hre=(n,e,t,r,i,s,o,a,l,c,u,d,h)=>(f,m,g,v=null,y=null)=>{const A=new Zne(g.defaultValue),C=m?r(A):null,T={get defaultValue(){return g.defaultValue},get maxValue(){return v===null?g.maxValue:v},get minValue(){return y===null?g.minValue:y},get value(){return g.value},set value(x){g.value=x,T.setValueAtTime(x,f.context.currentTime)},cancelAndHoldAtTime(x){if(typeof g.cancelAndHoldAtTime=="function")C===null&&A.flush(f.context.currentTime),A.add(i(x)),g.cancelAndHoldAtTime(x);else{const R=Array.from(A).pop();C===null&&A.flush(f.context.currentTime),A.add(i(x));const N=Array.from(A).pop();g.cancelScheduledValues(x),R!==N&&N!==void 0&&(N.type==="exponentialRampToValue"?g.exponentialRampToValueAtTime(N.value,N.endTime):N.type==="linearRampToValue"?g.linearRampToValueAtTime(N.value,N.endTime):N.type==="setValue"?g.setValueAtTime(N.value,N.startTime):N.type==="setValueCurve"&&g.setValueCurveAtTime(N.values,N.startTime,N.duration))}return T},cancelScheduledValues(x){return C===null&&A.flush(f.context.currentTime),A.add(s(x)),g.cancelScheduledValues(x),T},exponentialRampToValueAtTime(x,R){if(x===0)throw new RangeError;if(!Number.isFinite(R)||R<0)throw new RangeError;return C===null&&A.flush(f.context.currentTime),A.add(o(x,R)),g.exponentialRampToValueAtTime(x,R),T},linearRampToValueAtTime(x,R){return C===null&&A.flush(f.context.currentTime),A.add(a(x,R)),g.linearRampToValueAtTime(x,R),T},setTargetAtTime(x,R,N){return C===null&&A.flush(f.context.currentTime),A.add(l(x,R,N)),g.setTargetAtTime(x,R,N),T},setValueAtTime(x,R){return C===null&&A.flush(f.context.currentTime),A.add(c(x,R)),g.setValueAtTime(x,R),T},setValueCurveAtTime(x,R,N){const M=x instanceof Float32Array?x:new Float32Array(x);if(d!==null&&d.name==="webkitAudioContext"){const O=R+N,P=f.context.sampleRate,z=Math.ceil(R*P),V=Math.floor(O*P),$=V-z,B=new Float32Array($);for(let K=0;K<$;K+=1){const se=(M.length-1)/N*((z+K)/P-R),W=Math.floor(se),ee=Math.ceil(se);B[K]=W===ee?M[W]:(1-(se-W))*M[W]+(1-(ee-se))*M[ee]}C===null&&A.flush(f.context.currentTime),A.add(u(B,R,N)),g.setValueCurveAtTime(B,R,N);const q=V/P;q<O&&h(T,B[B.length-1],q),h(T,M[M.length-1],O)}else C===null&&A.flush(f.context.currentTime),A.add(u(M,R,N)),g.setValueCurveAtTime(M,R,N);return T}};return t.set(T,g),e.set(T,f),n(T,C),T},Vre=n=>({replay(e){for(const t of n)if(t.type==="exponentialRampToValue"){const{endTime:r,value:i}=t;e.exponentialRampToValueAtTime(i,r)}else if(t.type==="linearRampToValue"){const{endTime:r,value:i}=t;e.linearRampToValueAtTime(i,r)}else if(t.type==="setTarget"){const{startTime:r,target:i,timeConstant:s}=t;e.setTargetAtTime(i,r,s)}else if(t.type==="setValue"){const{startTime:r,value:i}=t;e.setValueAtTime(i,r)}else if(t.type==="setValueCurve"){const{duration:r,startTime:i,values:s}=t;e.setValueCurveAtTime(s,i,r)}else throw new Error("Can't apply an unknown automation.")}}),$re=(n,e,t,r,i,s,o,a,l,c,u,d,h,f,m,g,v,y,A,C)=>class extends m{constructor(x,R){super(x,R),this._nativeContext=x,this._audioWorklet=n===void 0?void 0:{addModule:(N,M)=>n(this,N,M)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new i(this)}createBuffer(x,R,N){return new t({length:R,numberOfChannels:x,sampleRate:N})}createBufferSource(){return new r(this)}createChannelMerger(x=6){return new s(this,{numberOfInputs:x})}createChannelSplitter(x=6){return new o(this,{numberOfOutputs:x})}createConstantSource(){return new a(this)}createConvolver(){return new l(this)}createDelay(x=1){return new u(this,{maxDelayTime:x})}createDynamicsCompressor(){return new d(this)}createGain(){return new h(this)}createIIRFilter(x,R){return new f(this,{feedback:R,feedforward:x})}createOscillator(){return new g(this)}createPanner(){return new v(this)}createPeriodicWave(x,R,N={disableNormalization:!1}){return new y(this,{...N,imag:R,real:x})}createStereoPanner(){return new A(this)}createWaveShaper(){return new C(this)}decodeAudioData(x,R,N){return c(this._nativeContext,x).then(M=>(typeof R=="function"&&R(M),M),M=>{throw typeof N=="function"&&N(M),M})}},Wre={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},qre=(n,e,t,r,i,s,o,a)=>class extends n{constructor(c,u){const d=s(c),h={...Wre,...u},f=i(d,h),m=o(d),g=m?t():null;super(c,!1,f,g),this._Q=e(this,m,f.Q,Na,Xa),this._detune=e(this,m,f.detune,1200*Math.log2(Na),-1200*Math.log2(Na)),this._frequency=e(this,m,f.frequency,c.sampleRate/2,0),this._gain=e(this,m,f.gain,40*Math.log10(Na),Xa),this._nativeBiquadFilterNode=f,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(c){this._nativeBiquadFilterNode.type=c}getFrequencyResponse(c,u,d){try{this._nativeBiquadFilterNode.getFrequencyResponse(c,u,d)}catch(h){throw h.code===11?r():h}if(c.length!==u.length||u.length!==d.length)throw r()}},Qre=(n,e,t,r,i)=>()=>{const s=new WeakMap,o=async(a,l)=>{let c=t(a);const u=ha(c,l);if(!u){const d={Q:c.Q.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,detune:c.detune.value,frequency:c.frequency.value,gain:c.gain.value,type:c.type};c=e(l,d)}return s.set(l,c),u?(await n(l,a.Q,c.Q),await n(l,a.detune,c.detune),await n(l,a.frequency,c.frequency),await n(l,a.gain,c.gain)):(await r(l,a.Q,c.Q),await r(l,a.detune,c.detune),await r(l,a.frequency,c.frequency),await r(l,a.gain,c.gain)),await i(a,l,c),c};return{render(a,l){const c=s.get(l);return c!==void 0?Promise.resolve(c):o(a,l)}}},Jre=(n,e)=>(t,r)=>{const i=e.get(t);if(i!==void 0)return i;const s=n.get(t);if(s!==void 0)return s;try{const o=r();return o instanceof Promise?(n.set(t,o),o.catch(()=>!1).then(a=>(n.delete(t),e.set(t,a),a))):(e.set(t,o),o)}catch{return e.set(t,!1),!1}},Kre={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},Yre=(n,e,t,r,i)=>class extends n{constructor(o,a){const l=r(o),c={...Kre,...a},u=t(l,c),d=i(l)?e():null;super(o,!1,u,d)}},Xre=(n,e,t)=>()=>{const r=new WeakMap,i=async(s,o)=>{let a=e(s);if(!ha(a,o)){const c={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=n(o,c)}return r.set(o,a),await t(s,o,a),a};return{render(s,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):i(s,o)}}},Zre={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},eie=(n,e,t,r,i,s)=>class extends n{constructor(a,l){const c=r(a),u=s({...Zre,...l}),d=t(c,u),h=i(c)?e():null;super(a,!1,d,h)}},tie=(n,e,t)=>()=>{const r=new WeakMap,i=async(s,o)=>{let a=e(s);if(!ha(a,o)){const c={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=n(o,c)}return r.set(o,a),await t(s,o,a),a};return{render(s,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):i(s,o)}}},nie=n=>(e,t,r)=>n(t,e,r),rie=n=>(e,t)=>{const r=n(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),i=e.createBuffer(1,2,44100);return r.buffer=i,r.loop=!0,r.connect(t),r.start(),()=>{r.stop(),r.disconnect(t)}},iie={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},sie=(n,e,t,r,i,s,o)=>class extends n{constructor(l,c){const u=i(l),d={...iie,...c},h=r(u,d),f=s(u),m=f?t():null;super(l,!1,h,m),this._constantSourceNodeRenderer=m,this._nativeConstantSourceNode=h,this._offset=e(this,f,h.offset,Na,Xa),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(l){const c=typeof l=="function"?o(this,l):null;this._nativeConstantSourceNode.onended=c;const u=this._nativeConstantSourceNode.onended;this._onended=u!==null&&u===c?l:u}start(l=0){if(this._nativeConstantSourceNode.start(l),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=l),this.context.state!=="closed"){Fg(this);const c=()=>{this._nativeConstantSourceNode.removeEventListener("ended",c),zd(this)&&kS(this)};this._nativeConstantSourceNode.addEventListener("ended",c)}}stop(l=0){this._nativeConstantSourceNode.stop(l),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=l)}},oie=(n,e,t,r,i)=>()=>{const s=new WeakMap;let o=null,a=null;const l=async(c,u)=>{let d=t(c);const h=ha(d,u);if(!h){const f={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,offset:d.offset.value};d=e(u,f),o!==null&&d.start(o),a!==null&&d.stop(a)}return s.set(u,d),h?await n(u,c.offset,d.offset):await r(u,c.offset,d.offset),await i(c,u,d),d};return{set start(c){o=c},set stop(c){a=c},render(c,u){const d=s.get(u);return d!==void 0?Promise.resolve(d):l(c,u)}}},aie=n=>e=>(n[0]=e,n[0]),lie={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},cie=(n,e,t,r,i,s)=>class extends n{constructor(a,l){const c=r(a),u={...lie,...l},d=t(c,u),f=i(c)?e():null;super(a,!1,d,f),this._isBufferNullified=!1,this._nativeConvolverNode=d,u.buffer!==null&&s(this,u.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(a){if(this._nativeConvolverNode.buffer=a,a===null&&this._nativeConvolverNode.buffer!==null){const l=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=l.createBuffer(1,1,l.sampleRate),this._isBufferNullified=!0,s(this,0)}else this._isBufferNullified=!1,s(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(a){this._nativeConvolverNode.normalize=a}},uie=(n,e,t)=>()=>{const r=new WeakMap,i=async(s,o)=>{let a=e(s);if(!ha(a,o)){const c={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=n(o,c)}return r.set(o,a),sv(a)?await t(s,o,a.inputs[0]):await t(s,o,a),a};return{render(s,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):i(s,o)}}},die=()=>new DOMException("","DataCloneError"),V8=n=>{const{port1:e,port2:t}=new MessageChannel;return new Promise(r=>{const i=()=>{t.onmessage=null,e.close(),t.close(),r()};t.onmessage=()=>i();try{e.postMessage(n,[n])}finally{i()}})},hie=(n,e,t,r,i,s,o,a,l,c,u)=>(d,h)=>{const f=o(d)?d:s(d);if(i.has(h)){const m=t();return Promise.reject(m)}try{i.add(h)}catch{}return e(l,()=>l(f))?f.decodeAudioData(h).then(m=>(V8(h).catch(()=>{}),e(a,()=>a(m))||u(m),n.add(m),m)):new Promise((m,g)=>{const v=async()=>{try{await V8(h)}catch{}},y=A=>{g(A),v()};try{f.decodeAudioData(h,A=>{typeof A.copyFromChannel!="function"&&(c(A),_V(A)),n.add(A),v().then(()=>m(A))},A=>{y(A===null?r():A)})}catch(A){y(A)}})},fie=(n,e,t,r,i,s,o,a)=>(l,c)=>{const u=e.get(l);if(u===void 0)throw new Error("Missing the expected cycle count.");const d=s(l.context),h=a(d);if(u===c){if(e.delete(l),!h&&o(l)){const f=r(l),{outputs:m}=t(l);for(const g of m)if(FS(g)){const v=r(g[0]);n(f,v,g[1],g[2])}else{const v=i(g[0]);f.connect(v,g[1])}}}else e.set(l,u-c)},pie={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},mie=(n,e,t,r,i,s,o)=>class extends n{constructor(l,c){const u=i(l),d={...pie,...c},h=r(u,d),f=s(u),m=f?t(d.maxDelayTime):null;super(l,!1,h,m),this._delayTime=e(this,f,h.delayTime),o(this,d.maxDelayTime)}get delayTime(){return this._delayTime}},gie=(n,e,t,r,i)=>s=>{const o=new WeakMap,a=async(l,c)=>{let u=t(l);const d=ha(u,c);if(!d){const h={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,delayTime:u.delayTime.value,maxDelayTime:s};u=e(c,h)}return o.set(c,u),d?await n(c,l.delayTime,u.delayTime):await r(c,l.delayTime,u.delayTime),await i(l,c,u),u};return{render(l,c){const u=o.get(c);return u!==void 0?Promise.resolve(u):a(l,c)}}},vie=n=>(e,t,r,i)=>n(e[i],s=>s[0]===t&&s[1]===r),yie=n=>"delayTime"in n,_ie=(n,e,t)=>function r(i,s){const o=KT(s)?s:t(n,s);if(yie(o))return[];if(i[0]===o)return[i];if(i.includes(o))return[];const{outputs:a}=e(o);return Array.from(a).map(l=>r([...i,o],l[0])).reduce((l,c)=>l.concat(c),[])},Sie={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},Aie=(n,e,t,r,i,s,o,a)=>class extends n{constructor(c,u){const d=s(c),h={...Sie,...u},f=r(d,h),m=o(d),g=m?t():null;super(c,!1,f,g),this._attack=e(this,m,f.attack),this._knee=e(this,m,f.knee),this._nativeDynamicsCompressorNode=f,this._ratio=e(this,m,f.ratio),this._release=e(this,m,f.release),this._threshold=e(this,m,f.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(c){const u=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=c,c>2)throw this._nativeDynamicsCompressorNode.channelCount=u,i()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(c){const u=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=c,c==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=u,i()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},Eie=(n,e,t,r,i)=>()=>{const s=new WeakMap,o=async(a,l)=>{let c=t(a);const u=ha(c,l);if(!u){const d={attack:c.attack.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,knee:c.knee.value,ratio:c.ratio.value,release:c.release.value,threshold:c.threshold.value};c=e(l,d)}return s.set(l,c),u?(await n(l,a.attack,c.attack),await n(l,a.knee,c.knee),await n(l,a.ratio,c.ratio),await n(l,a.release,c.release),await n(l,a.threshold,c.threshold)):(await r(l,a.attack,c.attack),await r(l,a.knee,c.knee),await r(l,a.ratio,c.ratio),await r(l,a.release,c.release),await r(l,a.threshold,c.threshold)),await i(a,l,c),c};return{render(a,l){const c=s.get(l);return c!==void 0?Promise.resolve(c):o(a,l)}}},Cie=()=>new DOMException("","EncodingError"),wie=n=>e=>new Promise((t,r)=>{if(n===null){r(new SyntaxError);return}const i=n.document.head;if(i===null)r(new SyntaxError);else{const s=n.document.createElement("script"),o=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(o),l=n.onerror,c=()=>{n.onerror=l,URL.revokeObjectURL(a)};n.onerror=(u,d,h,f,m)=>{if(d===a||d===n.location.href&&h===1&&f===1)return c(),r(m),!1;if(l!==null)return l(u,d,h,f,m)},s.onerror=()=>{c(),r(new SyntaxError)},s.onload=()=>{c(),t()},s.src=a,s.type="module",i.appendChild(s)}}),Tie=n=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,r,i){if(r!==null){let s=this._listeners.get(r);s===void 0&&(s=n(this,r),typeof r=="function"&&this._listeners.set(r,s)),this._nativeEventTarget.addEventListener(t,s,i)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,r,i){const s=r===null?void 0:this._listeners.get(r);this._nativeEventTarget.removeEventListener(t,s===void 0?null:s,i)}},xie=n=>(e,t,r)=>{Object.defineProperties(n,{currentFrame:{configurable:!0,get(){return Math.round(e*t)}},currentTime:{configurable:!0,get(){return e}}});try{return r()}finally{n!==null&&(delete n.currentFrame,delete n.currentTime)}},Iie=n=>async e=>{try{const t=await fetch(e);if(t.ok)return[await t.text(),t.url]}catch{}throw n()},bie={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},Mie=(n,e,t,r,i,s)=>class extends n{constructor(a,l){const c=i(a),u={...bie,...l},d=r(c,u),h=s(c),f=h?t():null;super(a,!1,d,f),this._gain=e(this,h,d.gain,Na,Xa)}get gain(){return this._gain}},Rie=(n,e,t,r,i)=>()=>{const s=new WeakMap,o=async(a,l)=>{let c=t(a);const u=ha(c,l);if(!u){const d={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,gain:c.gain.value};c=e(l,d)}return s.set(l,c),u?await n(l,a.gain,c.gain):await r(l,a.gain,c.gain),await i(a,l,c),c};return{render(a,l){const c=s.get(l);return c!==void 0?Promise.resolve(c):o(a,l)}}},Nie=n=>e=>{const t=n(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return t.renderer},Pie=n=>e=>{var t;return(t=n.get(e))!==null&&t!==void 0?t:0},Oie=n=>e=>{const t=n(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return t.renderer},oa=()=>new DOMException("","InvalidStateError"),Die=n=>e=>{const t=n.get(e);if(t===void 0)throw oa();return t},Lie=(n,e)=>t=>{let r=n.get(t);if(r!==void 0)return r;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return r=new e(1,1,44100),n.set(t,r),r},Jx=()=>new DOMException("","InvalidAccessError"),kie=n=>{n.getFrequencyResponse=(e=>(t,r,i)=>{if(t.length!==r.length||r.length!==i.length)throw Jx();return e.call(n,t,r,i)})(n.getFrequencyResponse)},Bie={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},Fie=(n,e,t,r,i,s)=>class extends n{constructor(a,l){const c=r(a),u=i(c),d={...Bie,...l},h=e(c,u?null:a.baseLatency,d),f=u?t(d.feedback,d.feedforward):null;super(a,!1,h,f),kie(h),this._nativeIIRFilterNode=h,s(this,1)}getFrequencyResponse(a,l,c){return this._nativeIIRFilterNode.getFrequencyResponse(a,l,c)}},wV=(n,e,t,r,i,s,o,a,l,c,u)=>{const d=c.length;let h=a;for(let f=0;f<d;f+=1){let m=t[0]*c[f];for(let g=1;g<i;g+=1){const v=h-g&l-1;m+=t[g]*s[v],m-=n[g]*o[v]}for(let g=i;g<r;g+=1)m+=t[g]*s[h-g&l-1];for(let g=i;g<e;g+=1)m-=n[g]*o[h-g&l-1];s[h]=c[f],o[h]=m,h=h+1&l-1,u[f]=m}return h},zie=(n,e,t,r)=>{const i=t instanceof Float64Array?t:new Float64Array(t),s=r instanceof Float64Array?r:new Float64Array(r),o=i.length,a=s.length,l=Math.min(o,a);if(i[0]!==1){for(let m=0;m<o;m+=1)s[m]/=i[0];for(let m=1;m<a;m+=1)i[m]/=i[0]}const c=32,u=new Float32Array(c),d=new Float32Array(c),h=e.createBuffer(n.numberOfChannels,n.length,n.sampleRate),f=n.numberOfChannels;for(let m=0;m<f;m+=1){const g=n.getChannelData(m),v=h.getChannelData(m);u.fill(0),d.fill(0),wV(i,o,s,a,l,u,d,0,c,g,v)}return h},Uie=(n,e,t,r,i)=>(s,o)=>{const a=new WeakMap;let l=null;const c=async(u,d)=>{let h=null,f=e(u);const m=ha(f,d);if(d.createIIRFilter===void 0?h=n(d,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):m||(f=d.createIIRFilter(o,s)),a.set(d,h===null?f:h),h!==null){if(l===null){if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");const v=new t(u.context.destination.channelCount,u.context.length,d.sampleRate);l=(async()=>{await r(u,v,v.destination);const y=await i(v);return zie(y,d,s,o)})()}const g=await l;return h.buffer=g,h.start(0),h}return await r(u,d,f),f};return{render(u,d){const h=a.get(d);return h!==void 0?Promise.resolve(h):c(u,d)}}},jie=(n,e,t,r,i,s)=>o=>(a,l)=>{const c=n.get(a);if(c===void 0){if(!o&&s(a)){const u=r(a),{outputs:d}=t(a);for(const h of d)if(FS(h)){const f=r(h[0]);e(u,f,h[1],h[2])}else{const f=i(h[0]);u.disconnect(f,h[1])}}n.set(a,l)}else n.set(a,c+l)},Gie=n=>e=>n!==null&&e instanceof n,Hie=n=>e=>n!==null&&typeof n.AudioNode=="function"&&e instanceof n.AudioNode,Vie=n=>e=>n!==null&&typeof n.AudioParam=="function"&&e instanceof n.AudioParam,$ie=(n,e)=>t=>n(t)||e(t),Wie=n=>e=>n!==null&&e instanceof n,qie=n=>n!==null&&n.isSecureContext,Qie=(n,e,t,r)=>class extends n{constructor(s,o){const a=t(s),l=e(a,o);if(r(a))throw TypeError();super(s,!0,l,null),this._nativeMediaElementAudioSourceNode=l}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},Jie={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},Kie=(n,e,t,r)=>class extends n{constructor(s,o){const a=t(s);if(r(a))throw new TypeError;const l={...Jie,...o},c=e(a,l);super(s,!1,c,null),this._nativeMediaStreamAudioDestinationNode=c}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},Yie=(n,e,t,r)=>class extends n{constructor(s,o){const a=t(s),l=e(a,o);if(r(a))throw new TypeError;super(s,!0,l,null),this._nativeMediaStreamAudioSourceNode=l}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},Xie=(n,e,t)=>class extends n{constructor(i,s){const o=t(i),a=e(o,s);super(i,!0,a,null)}},Zie=(n,e,t,r,i,s)=>class extends t{constructor(a,l){super(a),this._nativeContext=a,pV.set(this,a),r(a)&&i.set(a,new Set),this._destination=new n(this,l),this._listener=e(this,a),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(a){const l=typeof a=="function"?s(this,a):null;this._nativeContext.onstatechange=l;const c=this._nativeContext.onstatechange;this._onstatechange=c!==null&&c===l?a:c}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},b4=n=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const t=n.decodeAudioData(e.buffer,()=>{});return t===void 0?!1:(t.catch(()=>{}),!0)}catch{}return!1},ese=(n,e)=>(t,r,i)=>{const s=new Set;return t.connect=(o=>(a,l=0,c=0)=>{const u=s.size===0;if(e(a))return o.call(t,a,l,c),n(s,[a,l,c],d=>d[0]===a&&d[1]===l&&d[2]===c,!0),u&&r(),a;o.call(t,a,l),n(s,[a,l],d=>d[0]===a&&d[1]===l,!0),u&&r()})(t.connect),t.disconnect=(o=>(a,l,c)=>{const u=s.size>0;if(a===void 0)o.apply(t),s.clear();else if(typeof a=="number"){o.call(t,a);for(const h of s)h[1]===a&&s.delete(h)}else{e(a)?o.call(t,a,l,c):o.call(t,a,l);for(const h of s)h[0]===a&&(l===void 0||h[1]===l)&&(c===void 0||h[2]===c)&&s.delete(h)}const d=s.size===0;u&&d&&i()})(t.disconnect),t},fi=(n,e,t)=>{const r=e[t];r!==void 0&&r!==n[t]&&(n[t]=r)},Ns=(n,e)=>{fi(n,e,"channelCount"),fi(n,e,"channelCountMode"),fi(n,e,"channelInterpretation")},$8=n=>typeof n.getFloatTimeDomainData=="function",tse=n=>{n.getFloatTimeDomainData=e=>{const t=new Uint8Array(e.length);n.getByteTimeDomainData(t);const r=Math.max(t.length,n.fftSize);for(let i=0;i<r;i+=1)e[i]=(t[i]-128)*.0078125;return e}},nse=(n,e)=>(t,r)=>{const i=t.createAnalyser();if(Ns(i,r),!(r.maxDecibels>r.minDecibels))throw e();return fi(i,r,"fftSize"),fi(i,r,"maxDecibels"),fi(i,r,"minDecibels"),fi(i,r,"smoothingTimeConstant"),n($8,()=>$8(i))||tse(i),i},rse=n=>n===null?null:n.hasOwnProperty("AudioBuffer")?n.AudioBuffer:null,Hi=(n,e,t)=>{const r=e[t];r!==void 0&&r!==n[t].value&&(n[t].value=r)},ise=n=>{n.start=(e=>{let t=!1;return(r=0,i=0,s)=>{if(t)throw oa();e.call(n,r,i,s),t=!0}})(n.start)},fO=n=>{n.start=(e=>(t=0,r=0,i)=>{if(typeof i=="number"&&i<0||r<0||t<0)throw new RangeError("The parameters can't be negative.");e.call(n,t,r,i)})(n.start)},pO=n=>{n.stop=(e=>(t=0)=>{if(t<0)throw new RangeError("The parameter can't be negative.");e.call(n,t)})(n.stop)},sse=(n,e,t,r,i,s,o,a,l,c,u)=>(d,h)=>{const f=d.createBufferSource();return Ns(f,h),Hi(f,h,"playbackRate"),fi(f,h,"buffer"),fi(f,h,"loop"),fi(f,h,"loopEnd"),fi(f,h,"loopStart"),e(t,()=>t(d))||ise(f),e(r,()=>r(d))||l(f),e(i,()=>i(d))||c(f,d),e(s,()=>s(d))||fO(f),e(o,()=>o(d))||u(f,d),e(a,()=>a(d))||pO(f),n(d,f),f},ose=n=>n===null?null:n.hasOwnProperty("AudioContext")?n.AudioContext:n.hasOwnProperty("webkitAudioContext")?n.webkitAudioContext:null,ase=(n,e)=>(t,r,i)=>{const s=t.destination;if(s.channelCount!==r)try{s.channelCount=r}catch{}i&&s.channelCountMode!=="explicit"&&(s.channelCountMode="explicit"),s.maxChannelCount===0&&Object.defineProperty(s,"maxChannelCount",{value:r});const o=n(t,{channelCount:r,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,gain:1});return e(o,"channelCount",a=>()=>a.call(o),a=>l=>{a.call(o,l);try{s.channelCount=l}catch(c){if(l>s.maxChannelCount)throw c}}),e(o,"channelCountMode",a=>()=>a.call(o),a=>l=>{a.call(o,l),s.channelCountMode=l}),e(o,"channelInterpretation",a=>()=>a.call(o),a=>l=>{a.call(o,l),s.channelInterpretation=l}),Object.defineProperty(o,"maxChannelCount",{get:()=>s.maxChannelCount}),o.connect(s),o},lse=n=>n===null?null:n.hasOwnProperty("AudioWorkletNode")?n.AudioWorkletNode:null,cse=(n,e)=>n===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(n*e))))),TV=(n,e)=>{const t=n.createBiquadFilter();return Ns(t,e),Hi(t,e,"Q"),Hi(t,e,"detune"),Hi(t,e,"frequency"),Hi(t,e,"gain"),fi(t,e,"type"),t},use=(n,e)=>(t,r)=>{const i=t.createChannelMerger(r.numberOfInputs);return n!==null&&n.name==="webkitAudioContext"&&e(t,i),Ns(i,r),i},dse=n=>{const e=n.numberOfOutputs;Object.defineProperty(n,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw oa()}}),Object.defineProperty(n,"channelCountMode",{get:()=>"explicit",set:t=>{if(t!=="explicit")throw oa()}}),Object.defineProperty(n,"channelInterpretation",{get:()=>"discrete",set:t=>{if(t!=="discrete")throw oa()}})},mO=(n,e)=>{const t=n.createChannelSplitter(e.numberOfOutputs);return Ns(t,e),dse(t),t},hse=(n,e,t,r,i)=>(s,o)=>{if(s.createConstantSource===void 0)return t(s,o);const a=s.createConstantSource();return Ns(a,o),Hi(a,o,"offset"),e(r,()=>r(s))||fO(a),e(i,()=>i(s))||pO(a),n(s,a),a},ov=(n,e)=>(n.connect=e.connect.bind(e),n.disconnect=e.disconnect.bind(e),n),fse=(n,e,t,r)=>(i,{offset:s,...o})=>{const a=i.createBuffer(1,2,44100),l=e(i,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),c=t(i,{...o,gain:s}),u=a.getChannelData(0);u[0]=1,u[1]=1,l.buffer=a,l.loop=!0;const d={get bufferSize(){},get channelCount(){return c.channelCount},set channelCount(m){c.channelCount=m},get channelCountMode(){return c.channelCountMode},set channelCountMode(m){c.channelCountMode=m},get channelInterpretation(){return c.channelInterpretation},set channelInterpretation(m){c.channelInterpretation=m},get context(){return c.context},get inputs(){return[]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return c.numberOfOutputs},get offset(){return c.gain},get onended(){return l.onended},set onended(m){l.onended=m},addEventListener(...m){return l.addEventListener(m[0],m[1],m[2])},dispatchEvent(...m){return l.dispatchEvent(m[0])},removeEventListener(...m){return l.removeEventListener(m[0],m[1],m[2])},start(m=0){l.start.call(l,m)},stop(m=0){l.stop.call(l,m)}},h=()=>l.connect(c),f=()=>l.disconnect(c);return n(i,l),r(ov(d,c),h,f)},pse=(n,e)=>(t,r)=>{const i=t.createConvolver();if(Ns(i,r),r.disableNormalization===i.normalize&&(i.normalize=!r.disableNormalization),fi(i,r,"buffer"),r.channelCount>2||(e(i,"channelCount",s=>()=>s.call(i),s=>o=>{if(o>2)throw n();return s.call(i,o)}),r.channelCountMode==="max"))throw n();return e(i,"channelCountMode",s=>()=>s.call(i),s=>o=>{if(o==="max")throw n();return s.call(i,o)}),i},xV=(n,e)=>{const t=n.createDelay(e.maxDelayTime);return Ns(t,e),Hi(t,e,"delayTime"),t},mse=n=>(e,t)=>{const r=e.createDynamicsCompressor();if(Ns(r,t),t.channelCount>2||t.channelCountMode==="max")throw n();return Hi(r,t,"attack"),Hi(r,t,"knee"),Hi(r,t,"ratio"),Hi(r,t,"release"),Hi(r,t,"threshold"),r},Gc=(n,e)=>{const t=n.createGain();return Ns(t,e),Hi(t,e,"gain"),t},gse=n=>(e,t,r)=>{if(e.createIIRFilter===void 0)return n(e,t,r);const i=e.createIIRFilter(r.feedforward,r.feedback);return Ns(i,r),i};function vse(n,e){const t=e[0]*e[0]+e[1]*e[1];return[(n[0]*e[0]+n[1]*e[1])/t,(n[1]*e[0]-n[0]*e[1])/t]}function yse(n,e){return[n[0]*e[0]-n[1]*e[1],n[0]*e[1]+n[1]*e[0]]}function W8(n,e){let t=[0,0];for(let r=n.length-1;r>=0;r-=1)t=yse(t,e),t[0]+=n[r];return t}const _se=(n,e,t,r)=>(i,s,{channelCount:o,channelCountMode:a,channelInterpretation:l,feedback:c,feedforward:u})=>{const d=cse(s,i.sampleRate),h=c instanceof Float64Array?c:new Float64Array(c),f=u instanceof Float64Array?u:new Float64Array(u),m=h.length,g=f.length,v=Math.min(m,g);if(m===0||m>20)throw r();if(h[0]===0)throw e();if(g===0||g>20)throw r();if(f[0]===0)throw e();if(h[0]!==1){for(let M=0;M<g;M+=1)f[M]/=h[0];for(let M=1;M<m;M+=1)h[M]/=h[0]}const y=t(i,d,o,o);y.channelCount=o,y.channelCountMode=a,y.channelInterpretation=l;const A=32,C=[],T=[],x=[];for(let M=0;M<o;M+=1){C.push(0);const O=new Float32Array(A),P=new Float32Array(A);O.fill(0),P.fill(0),T.push(O),x.push(P)}y.onaudioprocess=M=>{const O=M.inputBuffer,P=M.outputBuffer,z=O.numberOfChannels;for(let V=0;V<z;V+=1){const $=O.getChannelData(V),B=P.getChannelData(V);C[V]=wV(h,m,f,g,v,T[V],x[V],C[V],A,$,B)}};const R=i.sampleRate/2;return ov({get bufferSize(){return d},get channelCount(){return y.channelCount},set channelCount(M){y.channelCount=M},get channelCountMode(){return y.channelCountMode},set channelCountMode(M){y.channelCountMode=M},get channelInterpretation(){return y.channelInterpretation},set channelInterpretation(M){y.channelInterpretation=M},get context(){return y.context},get inputs(){return[y]},get numberOfInputs(){return y.numberOfInputs},get numberOfOutputs(){return y.numberOfOutputs},addEventListener(...M){return y.addEventListener(M[0],M[1],M[2])},dispatchEvent(...M){return y.dispatchEvent(M[0])},getFrequencyResponse(M,O,P){if(M.length!==O.length||O.length!==P.length)throw n();const z=M.length;for(let V=0;V<z;V+=1){const $=-Math.PI*(M[V]/R),B=[Math.cos($),Math.sin($)],q=W8(f,B),K=W8(h,B),se=vse(q,K);O[V]=Math.sqrt(se[0]*se[0]+se[1]*se[1]),P[V]=Math.atan2(se[1],se[0])}},removeEventListener(...M){return y.removeEventListener(M[0],M[1],M[2])}},y)},Sse=(n,e)=>n.createMediaElementSource(e.mediaElement),Ase=(n,e)=>{const t=n.createMediaStreamDestination();return Ns(t,e),t.numberOfOutputs===1&&Object.defineProperty(t,"numberOfOutputs",{get:()=>0}),t},Ese=(n,{mediaStream:e})=>{const t=e.getAudioTracks();t.sort((s,o)=>s.id<o.id?-1:s.id>o.id?1:0);const r=t.slice(0,1),i=n.createMediaStreamSource(new MediaStream(r));return Object.defineProperty(i,"mediaStream",{value:e}),i},Cse=(n,e)=>(t,{mediaStreamTrack:r})=>{if(typeof t.createMediaStreamTrackSource=="function")return t.createMediaStreamTrackSource(r);const i=new MediaStream([r]),s=t.createMediaStreamSource(i);if(r.kind!=="audio")throw n();if(e(t))throw new TypeError;return s},wse=n=>n===null?null:n.hasOwnProperty("OfflineAudioContext")?n.OfflineAudioContext:n.hasOwnProperty("webkitOfflineAudioContext")?n.webkitOfflineAudioContext:null,Tse=(n,e,t,r,i,s)=>(o,a)=>{const l=o.createOscillator();return Ns(l,a),Hi(l,a,"detune"),Hi(l,a,"frequency"),a.periodicWave!==void 0?l.setPeriodicWave(a.periodicWave):fi(l,a,"type"),e(t,()=>t(o))||fO(l),e(r,()=>r(o))||s(l,o),e(i,()=>i(o))||pO(l),n(o,l),l},xse=n=>(e,t)=>{const r=e.createPanner();return r.orientationX===void 0?n(e,t):(Ns(r,t),Hi(r,t,"orientationX"),Hi(r,t,"orientationY"),Hi(r,t,"orientationZ"),Hi(r,t,"positionX"),Hi(r,t,"positionY"),Hi(r,t,"positionZ"),fi(r,t,"coneInnerAngle"),fi(r,t,"coneOuterAngle"),fi(r,t,"coneOuterGain"),fi(r,t,"distanceModel"),fi(r,t,"maxDistance"),fi(r,t,"panningModel"),fi(r,t,"refDistance"),fi(r,t,"rolloffFactor"),r)},Ise=(n,e,t,r,i,s,o,a,l,c)=>(u,{coneInnerAngle:d,coneOuterAngle:h,coneOuterGain:f,distanceModel:m,maxDistance:g,orientationX:v,orientationY:y,orientationZ:A,panningModel:C,positionX:T,positionY:x,positionZ:R,refDistance:N,rolloffFactor:M,...O})=>{const P=u.createPanner();if(O.channelCount>2||O.channelCountMode==="max")throw o();Ns(P,O);const z={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},V=t(u,{...z,channelInterpretation:"speakers",numberOfInputs:6}),$=r(u,{...O,gain:1}),B=r(u,{...z,gain:1}),q=r(u,{...z,gain:0}),K=r(u,{...z,gain:0}),se=r(u,{...z,gain:0}),W=r(u,{...z,gain:0}),ee=r(u,{...z,gain:0}),Q=i(u,256,6,1),Y=s(u,{...z,curve:new Float32Array([1,1]),oversample:"none"});let ae=[v,y,A],fe=[T,x,R];const we=new Float32Array(1);Q.onaudioprocess=({inputBuffer:xe})=>{const Qe=[l(xe,we,0),l(xe,we,1),l(xe,we,2)];Qe.some((Ve,te)=>Ve!==ae[te])&&(P.setOrientation(...Qe),ae=Qe);const We=[l(xe,we,3),l(xe,we,4),l(xe,we,5)];We.some((Ve,te)=>Ve!==fe[te])&&(P.setPosition(...We),fe=We)},Object.defineProperty(q.gain,"defaultValue",{get:()=>0}),Object.defineProperty(K.gain,"defaultValue",{get:()=>0}),Object.defineProperty(se.gain,"defaultValue",{get:()=>0}),Object.defineProperty(W.gain,"defaultValue",{get:()=>0}),Object.defineProperty(ee.gain,"defaultValue",{get:()=>0});const ge={get bufferSize(){},get channelCount(){return P.channelCount},set channelCount(xe){if(xe>2)throw o();$.channelCount=xe,P.channelCount=xe},get channelCountMode(){return P.channelCountMode},set channelCountMode(xe){if(xe==="max")throw o();$.channelCountMode=xe,P.channelCountMode=xe},get channelInterpretation(){return P.channelInterpretation},set channelInterpretation(xe){$.channelInterpretation=xe,P.channelInterpretation=xe},get coneInnerAngle(){return P.coneInnerAngle},set coneInnerAngle(xe){P.coneInnerAngle=xe},get coneOuterAngle(){return P.coneOuterAngle},set coneOuterAngle(xe){P.coneOuterAngle=xe},get coneOuterGain(){return P.coneOuterGain},set coneOuterGain(xe){if(xe<0||xe>1)throw e();P.coneOuterGain=xe},get context(){return P.context},get distanceModel(){return P.distanceModel},set distanceModel(xe){P.distanceModel=xe},get inputs(){return[$]},get maxDistance(){return P.maxDistance},set maxDistance(xe){if(xe<0)throw new RangeError;P.maxDistance=xe},get numberOfInputs(){return P.numberOfInputs},get numberOfOutputs(){return P.numberOfOutputs},get orientationX(){return B.gain},get orientationY(){return q.gain},get orientationZ(){return K.gain},get panningModel(){return P.panningModel},set panningModel(xe){P.panningModel=xe},get positionX(){return se.gain},get positionY(){return W.gain},get positionZ(){return ee.gain},get refDistance(){return P.refDistance},set refDistance(xe){if(xe<0)throw new RangeError;P.refDistance=xe},get rolloffFactor(){return P.rolloffFactor},set rolloffFactor(xe){if(xe<0)throw new RangeError;P.rolloffFactor=xe},addEventListener(...xe){return $.addEventListener(xe[0],xe[1],xe[2])},dispatchEvent(...xe){return $.dispatchEvent(xe[0])},removeEventListener(...xe){return $.removeEventListener(xe[0],xe[1],xe[2])}};d!==ge.coneInnerAngle&&(ge.coneInnerAngle=d),h!==ge.coneOuterAngle&&(ge.coneOuterAngle=h),f!==ge.coneOuterGain&&(ge.coneOuterGain=f),m!==ge.distanceModel&&(ge.distanceModel=m),g!==ge.maxDistance&&(ge.maxDistance=g),v!==ge.orientationX.value&&(ge.orientationX.value=v),y!==ge.orientationY.value&&(ge.orientationY.value=y),A!==ge.orientationZ.value&&(ge.orientationZ.value=A),C!==ge.panningModel&&(ge.panningModel=C),T!==ge.positionX.value&&(ge.positionX.value=T),x!==ge.positionY.value&&(ge.positionY.value=x),R!==ge.positionZ.value&&(ge.positionZ.value=R),N!==ge.refDistance&&(ge.refDistance=N),M!==ge.rolloffFactor&&(ge.rolloffFactor=M),(ae[0]!==1||ae[1]!==0||ae[2]!==0)&&P.setOrientation(...ae),(fe[0]!==0||fe[1]!==0||fe[2]!==0)&&P.setPosition(...fe);const Se=()=>{$.connect(P),n($,Y,0,0),Y.connect(B).connect(V,0,0),Y.connect(q).connect(V,0,1),Y.connect(K).connect(V,0,2),Y.connect(se).connect(V,0,3),Y.connect(W).connect(V,0,4),Y.connect(ee).connect(V,0,5),V.connect(Q).connect(u.destination)},Ke=()=>{$.disconnect(P),a($,Y,0,0),Y.disconnect(B),B.disconnect(V),Y.disconnect(q),q.disconnect(V),Y.disconnect(K),K.disconnect(V),Y.disconnect(se),se.disconnect(V),Y.disconnect(W),W.disconnect(V),Y.disconnect(ee),ee.disconnect(V),V.disconnect(Q),Q.disconnect(u.destination)};return c(ov(ge,P),Se,Ke)},bse=n=>(e,{disableNormalization:t,imag:r,real:i})=>{const s=r instanceof Float32Array?r:new Float32Array(r),o=i instanceof Float32Array?i:new Float32Array(i),a=e.createPeriodicWave(o,s,{disableNormalization:t});if(Array.from(r).length<2)throw n();return a},Kx=(n,e,t,r)=>n.createScriptProcessor(e,t,r),Mse=(n,e)=>(t,r)=>{const i=r.channelCountMode;if(i==="clamped-max")throw e();if(t.createStereoPanner===void 0)return n(t,r);const s=t.createStereoPanner();return Ns(s,r),Hi(s,r,"pan"),Object.defineProperty(s,"channelCountMode",{get:()=>i,set:o=>{if(o!==i)throw e()}}),s},Rse=(n,e,t,r,i,s)=>{const a=new Float32Array([1,1]),l=Math.PI/2,c={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},u={...c,oversample:"none"},d=(m,g,v,y)=>{const A=new Float32Array(16385),C=new Float32Array(16385);for(let O=0;O<16385;O+=1){const P=O/16384*l;A[O]=Math.cos(P),C[O]=Math.sin(P)}const T=t(m,{...c,gain:0}),x=r(m,{...u,curve:A}),R=r(m,{...u,curve:a}),N=t(m,{...c,gain:0}),M=r(m,{...u,curve:C});return{connectGraph(){g.connect(T),g.connect(R.inputs===void 0?R:R.inputs[0]),g.connect(N),R.connect(v),v.connect(x.inputs===void 0?x:x.inputs[0]),v.connect(M.inputs===void 0?M:M.inputs[0]),x.connect(T.gain),M.connect(N.gain),T.connect(y,0,0),N.connect(y,0,1)},disconnectGraph(){g.disconnect(T),g.disconnect(R.inputs===void 0?R:R.inputs[0]),g.disconnect(N),R.disconnect(v),v.disconnect(x.inputs===void 0?x:x.inputs[0]),v.disconnect(M.inputs===void 0?M:M.inputs[0]),x.disconnect(T.gain),M.disconnect(N.gain),T.disconnect(y,0,0),N.disconnect(y,0,1)}}},h=(m,g,v,y)=>{const A=new Float32Array(16385),C=new Float32Array(16385),T=new Float32Array(16385),x=new Float32Array(16385),R=Math.floor(16385/2);for(let se=0;se<16385;se+=1)if(se>R){const W=(se-R)/(16384-R)*l;A[se]=Math.cos(W),C[se]=Math.sin(W),T[se]=0,x[se]=1}else{const W=se/(16384-R)*l;A[se]=1,C[se]=0,T[se]=Math.cos(W),x[se]=Math.sin(W)}const N=e(m,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),M=t(m,{...c,gain:0}),O=r(m,{...u,curve:A}),P=t(m,{...c,gain:0}),z=r(m,{...u,curve:C}),V=r(m,{...u,curve:a}),$=t(m,{...c,gain:0}),B=r(m,{...u,curve:T}),q=t(m,{...c,gain:0}),K=r(m,{...u,curve:x});return{connectGraph(){g.connect(N),g.connect(V.inputs===void 0?V:V.inputs[0]),N.connect(M,0),N.connect(P,0),N.connect($,1),N.connect(q,1),V.connect(v),v.connect(O.inputs===void 0?O:O.inputs[0]),v.connect(z.inputs===void 0?z:z.inputs[0]),v.connect(B.inputs===void 0?B:B.inputs[0]),v.connect(K.inputs===void 0?K:K.inputs[0]),O.connect(M.gain),z.connect(P.gain),B.connect($.gain),K.connect(q.gain),M.connect(y,0,0),$.connect(y,0,0),P.connect(y,0,1),q.connect(y,0,1)},disconnectGraph(){g.disconnect(N),g.disconnect(V.inputs===void 0?V:V.inputs[0]),N.disconnect(M,0),N.disconnect(P,0),N.disconnect($,1),N.disconnect(q,1),V.disconnect(v),v.disconnect(O.inputs===void 0?O:O.inputs[0]),v.disconnect(z.inputs===void 0?z:z.inputs[0]),v.disconnect(B.inputs===void 0?B:B.inputs[0]),v.disconnect(K.inputs===void 0?K:K.inputs[0]),O.disconnect(M.gain),z.disconnect(P.gain),B.disconnect($.gain),K.disconnect(q.gain),M.disconnect(y,0,0),$.disconnect(y,0,0),P.disconnect(y,0,1),q.disconnect(y,0,1)}}},f=(m,g,v,y,A)=>{if(g===1)return d(m,v,y,A);if(g===2)return h(m,v,y,A);throw i()};return(m,{channelCount:g,channelCountMode:v,pan:y,...A})=>{if(v==="max")throw i();const C=n(m,{...A,channelCount:1,channelCountMode:v,numberOfInputs:2}),T=t(m,{...A,channelCount:g,channelCountMode:v,gain:1}),x=t(m,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:y});let{connectGraph:R,disconnectGraph:N}=f(m,g,T,x,C);Object.defineProperty(x.gain,"defaultValue",{get:()=>0}),Object.defineProperty(x.gain,"maxValue",{get:()=>1}),Object.defineProperty(x.gain,"minValue",{get:()=>-1});const M={get bufferSize(){},get channelCount(){return T.channelCount},set channelCount(V){T.channelCount!==V&&(O&&N(),{connectGraph:R,disconnectGraph:N}=f(m,V,T,x,C),O&&R()),T.channelCount=V},get channelCountMode(){return T.channelCountMode},set channelCountMode(V){if(V==="clamped-max"||V==="max")throw i();T.channelCountMode=V},get channelInterpretation(){return T.channelInterpretation},set channelInterpretation(V){T.channelInterpretation=V},get context(){return T.context},get inputs(){return[T]},get numberOfInputs(){return T.numberOfInputs},get numberOfOutputs(){return T.numberOfOutputs},get pan(){return x.gain},addEventListener(...V){return T.addEventListener(V[0],V[1],V[2])},dispatchEvent(...V){return T.dispatchEvent(V[0])},removeEventListener(...V){return T.removeEventListener(V[0],V[1],V[2])}};let O=!1;const P=()=>{R(),O=!0},z=()=>{N(),O=!1};return s(ov(M,C),P,z)}},Nse=(n,e,t,r,i,s,o)=>(a,l)=>{const c=a.createWaveShaper();if(s!==null&&s.name==="webkitAudioContext"&&a.createGain().gain.automationRate===void 0)return t(a,l);Ns(c,l);const u=l.curve===null||l.curve instanceof Float32Array?l.curve:new Float32Array(l.curve);if(u!==null&&u.length<2)throw e();fi(c,{curve:u},"curve"),fi(c,l,"oversample");let d=null,h=!1;return o(c,"curve",g=>()=>g.call(c),g=>v=>(g.call(c,v),h&&(r(v)&&d===null?d=n(a,c):!r(v)&&d!==null&&(d(),d=null)),v)),i(c,()=>{h=!0,r(c.curve)&&(d=n(a,c))},()=>{h=!1,d!==null&&(d(),d=null)})},Pse=(n,e,t,r,i)=>(s,{curve:o,oversample:a,...l})=>{const c=s.createWaveShaper(),u=s.createWaveShaper();Ns(c,l),Ns(u,l);const d=t(s,{...l,gain:1}),h=t(s,{...l,gain:-1}),f=t(s,{...l,gain:1}),m=t(s,{...l,gain:-1});let g=null,v=!1,y=null;const A={get bufferSize(){},get channelCount(){return c.channelCount},set channelCount(x){d.channelCount=x,h.channelCount=x,c.channelCount=x,f.channelCount=x,u.channelCount=x,m.channelCount=x},get channelCountMode(){return c.channelCountMode},set channelCountMode(x){d.channelCountMode=x,h.channelCountMode=x,c.channelCountMode=x,f.channelCountMode=x,u.channelCountMode=x,m.channelCountMode=x},get channelInterpretation(){return c.channelInterpretation},set channelInterpretation(x){d.channelInterpretation=x,h.channelInterpretation=x,c.channelInterpretation=x,f.channelInterpretation=x,u.channelInterpretation=x,m.channelInterpretation=x},get context(){return c.context},get curve(){return y},set curve(x){if(x!==null&&x.length<2)throw e();if(x===null)c.curve=x,u.curve=x;else{const R=x.length,N=new Float32Array(R+2-R%2),M=new Float32Array(R+2-R%2);N[0]=x[0],M[0]=-x[R-1];const O=Math.ceil((R+1)/2),P=(R+1)/2-1;for(let z=1;z<O;z+=1){const V=z/O*P,$=Math.floor(V),B=Math.ceil(V);N[z]=$===B?x[$]:(1-(V-$))*x[$]+(1-(B-V))*x[B],M[z]=$===B?-x[R-1-$]:-((1-(V-$))*x[R-1-$])-(1-(B-V))*x[R-1-B]}N[O]=R%2===1?x[O-1]:(x[O-2]+x[O-1])/2,c.curve=N,u.curve=M}y=x,v&&(r(y)&&g===null?g=n(s,d):g!==null&&(g(),g=null))},get inputs(){return[d]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return c.numberOfOutputs},get oversample(){return c.oversample},set oversample(x){c.oversample=x,u.oversample=x},addEventListener(...x){return d.addEventListener(x[0],x[1],x[2])},dispatchEvent(...x){return d.dispatchEvent(x[0])},removeEventListener(...x){return d.removeEventListener(x[0],x[1],x[2])}};o!==null&&(A.curve=o instanceof Float32Array?o:new Float32Array(o)),a!==A.oversample&&(A.oversample=a);const C=()=>{d.connect(c).connect(f),d.connect(h).connect(u).connect(m).connect(f),v=!0,r(y)&&(g=n(s,d))},T=()=>{d.disconnect(c),c.disconnect(f),d.disconnect(h),h.disconnect(u),u.disconnect(m),m.disconnect(f),v=!1,g!==null&&(g(),g=null)};return i(ov(A,f),C,T)},oc=()=>new DOMException("","NotSupportedError"),Ose={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},Dse=(n,e,t,r,i,s,o)=>class extends n{constructor(l,c){const u=i(l),d={...Ose,...c},h=t(u,d),f=s(u),m=f?r():null,g=l.sampleRate/2;super(l,!1,h,m),this._detune=e(this,f,h.detune,153600,-153600),this._frequency=e(this,f,h.frequency,g,-g),this._nativeOscillatorNode=h,this._onended=null,this._oscillatorNodeRenderer=m,this._oscillatorNodeRenderer!==null&&d.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=d.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(l){const c=typeof l=="function"?o(this,l):null;this._nativeOscillatorNode.onended=c;const u=this._nativeOscillatorNode.onended;this._onended=u!==null&&u===c?l:u}get type(){return this._nativeOscillatorNode.type}set type(l){this._nativeOscillatorNode.type=l,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(l){this._nativeOscillatorNode.setPeriodicWave(l),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=l)}start(l=0){if(this._nativeOscillatorNode.start(l),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=l),this.context.state!=="closed"){Fg(this);const c=()=>{this._nativeOscillatorNode.removeEventListener("ended",c),zd(this)&&kS(this)};this._nativeOscillatorNode.addEventListener("ended",c)}}stop(l=0){this._nativeOscillatorNode.stop(l),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=l)}},Lse=(n,e,t,r,i)=>()=>{const s=new WeakMap;let o=null,a=null,l=null;const c=async(u,d)=>{let h=t(u);const f=ha(h,d);if(!f){const m={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,detune:h.detune.value,frequency:h.frequency.value,periodicWave:o===null?void 0:o,type:h.type};h=e(d,m),a!==null&&h.start(a),l!==null&&h.stop(l)}return s.set(d,h),f?(await n(d,u.detune,h.detune),await n(d,u.frequency,h.frequency)):(await r(d,u.detune,h.detune),await r(d,u.frequency,h.frequency)),await i(u,d,h),h};return{set periodicWave(u){o=u},set start(u){a=u},set stop(u){l=u},render(u,d){const h=s.get(d);return h!==void 0?Promise.resolve(h):c(u,d)}}},kse={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},Bse=(n,e,t,r,i,s,o)=>class extends n{constructor(l,c){const u=i(l),d={...kse,...c},h=t(u,d),f=s(u),m=f?r():null;super(l,!1,h,m),this._nativePannerNode=h,this._orientationX=e(this,f,h.orientationX,Na,Xa),this._orientationY=e(this,f,h.orientationY,Na,Xa),this._orientationZ=e(this,f,h.orientationZ,Na,Xa),this._positionX=e(this,f,h.positionX,Na,Xa),this._positionY=e(this,f,h.positionY,Na,Xa),this._positionZ=e(this,f,h.positionZ,Na,Xa),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(l){this._nativePannerNode.coneInnerAngle=l}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(l){this._nativePannerNode.coneOuterAngle=l}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(l){this._nativePannerNode.coneOuterGain=l}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(l){this._nativePannerNode.distanceModel=l}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(l){this._nativePannerNode.maxDistance=l}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(l){this._nativePannerNode.panningModel=l}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(l){this._nativePannerNode.refDistance=l}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(l){this._nativePannerNode.rolloffFactor=l}},Fse=(n,e,t,r,i,s,o,a,l,c)=>()=>{const u=new WeakMap;let d=null;const h=async(f,m)=>{let g=null,v=s(f);const y={channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation},A={...y,coneInnerAngle:v.coneInnerAngle,coneOuterAngle:v.coneOuterAngle,coneOuterGain:v.coneOuterGain,distanceModel:v.distanceModel,maxDistance:v.maxDistance,panningModel:v.panningModel,refDistance:v.refDistance,rolloffFactor:v.rolloffFactor},C=ha(v,m);if("bufferSize"in v)g=r(m,{...y,gain:1});else if(!C){const T={...A,orientationX:v.orientationX.value,orientationY:v.orientationY.value,orientationZ:v.orientationZ.value,positionX:v.positionX.value,positionY:v.positionY.value,positionZ:v.positionZ.value};v=i(m,T)}if(u.set(m,g===null?v:g),g!==null){if(d===null){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");const z=new o(6,f.context.length,m.sampleRate),V=e(z,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});V.connect(z.destination),d=(async()=>{const $=await Promise.all([f.orientationX,f.orientationY,f.orientationZ,f.positionX,f.positionY,f.positionZ].map(async(B,q)=>{const K=t(z,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:q===0?1:0});return await a(z,B,K.offset),K}));for(let B=0;B<6;B+=1)$[B].connect(V,0,B),$[B].start(0);return c(z)})()}const T=await d,x=r(m,{...y,gain:1});await l(f,m,x);const R=[];for(let z=0;z<T.numberOfChannels;z+=1)R.push(T.getChannelData(z));let N=[R[0][0],R[1][0],R[2][0]],M=[R[3][0],R[4][0],R[5][0]],O=r(m,{...y,gain:1}),P=i(m,{...A,orientationX:N[0],orientationY:N[1],orientationZ:N[2],positionX:M[0],positionY:M[1],positionZ:M[2]});x.connect(O).connect(P.inputs[0]),P.connect(g);for(let z=128;z<T.length;z+=128){const V=[R[0][z],R[1][z],R[2][z]],$=[R[3][z],R[4][z],R[5][z]];if(V.some((B,q)=>B!==N[q])||$.some((B,q)=>B!==M[q])){N=V,M=$;const B=z/m.sampleRate;O.gain.setValueAtTime(0,B),O=r(m,{...y,gain:0}),P=i(m,{...A,orientationX:N[0],orientationY:N[1],orientationZ:N[2],positionX:M[0],positionY:M[1],positionZ:M[2]}),O.gain.setValueAtTime(1,B),x.connect(O).connect(P.inputs[0]),P.connect(g)}}return g}return C?(await n(m,f.orientationX,v.orientationX),await n(m,f.orientationY,v.orientationY),await n(m,f.orientationZ,v.orientationZ),await n(m,f.positionX,v.positionX),await n(m,f.positionY,v.positionY),await n(m,f.positionZ,v.positionZ)):(await a(m,f.orientationX,v.orientationX),await a(m,f.orientationY,v.orientationY),await a(m,f.orientationZ,v.orientationZ),await a(m,f.positionX,v.positionX),await a(m,f.positionY,v.positionY),await a(m,f.positionZ,v.positionZ)),sv(v)?await l(f,m,v.inputs[0]):await l(f,m,v),v};return{render(f,m){const g=u.get(m);return g!==void 0?Promise.resolve(g):h(f,m)}}},zse={disableNormalization:!1},Use=(n,e,t,r)=>class IV{constructor(s,o){const a=e(s),l=r({...zse,...o}),c=n(a,l);return t.add(c),c}static[Symbol.hasInstance](s){return s!==null&&typeof s=="object"&&Object.getPrototypeOf(s)===IV.prototype||t.has(s)}},jse=(n,e)=>(t,r,i)=>(n(r).replay(i),e(r,t,i)),Gse=(n,e,t)=>async(r,i,s)=>{const o=n(r);await Promise.all(o.activeInputs.map((a,l)=>Array.from(a).map(async([c,u])=>{const h=await e(c).render(c,i),f=r.context.destination;!t(c)&&(r!==f||!t(r))&&h.connect(s,u,l)})).reduce((a,l)=>[...a,...l],[]))},Hse=(n,e,t)=>async(r,i,s)=>{const o=e(r);await Promise.all(Array.from(o.activeInputs).map(async([a,l])=>{const u=await n(a).render(a,i);t(a)||u.connect(s,l)}))},Vse=(n,e,t,r)=>i=>n(b4,()=>b4(i))?Promise.resolve(n(r,r)).then(s=>{if(!s){const o=t(i,512,0,1);i.oncomplete=()=>{o.onaudioprocess=null,o.disconnect()},o.onaudioprocess=()=>i.currentTime,o.connect(i.destination)}return i.startRendering()}):new Promise(s=>{const o=e(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});i.oncomplete=a=>{o.disconnect(),s(a.renderedBuffer)},o.connect(i.destination),i.startRendering()}),$se=n=>(e,t)=>n.set(e,t),Wse={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},qse=(n,e,t,r,i,s)=>class extends n{constructor(a,l){const c=i(a),u={...Wse,...l},d=t(c,u),h=s(c),f=h?r():null;super(a,!1,d,f),this._pan=e(this,h,d.pan)}get pan(){return this._pan}},Qse=(n,e,t,r,i)=>()=>{const s=new WeakMap,o=async(a,l)=>{let c=t(a);const u=ha(c,l);if(!u){const d={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,pan:c.pan.value};c=e(l,d)}return s.set(l,c),u?await n(l,a.pan,c.pan):await r(l,a.pan,c.pan),sv(c)?await i(a,l,c.inputs[0]):await i(a,l,c),c};return{render(a,l){const c=s.get(l);return c!==void 0?Promise.resolve(c):o(a,l)}}},Jse=n=>()=>{if(n===null)return!1;try{new n({length:1,sampleRate:44100})}catch{return!1}return!0},Kse=(n,e)=>async()=>{if(n===null)return!0;if(e===null)return!1;const t=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),r=new e(1,128,44100),i=URL.createObjectURL(t);let s=!1,o=!1;try{await r.audioWorklet.addModule(i);const a=new n(r,"a",{numberOfOutputs:0}),l=r.createOscillator();a.port.onmessage=()=>s=!0,a.onprocessorerror=()=>o=!0,l.connect(a),l.start(0),await r.startRendering()}catch{}finally{URL.revokeObjectURL(i)}return s&&!o},Yse=(n,e)=>()=>{if(e===null)return Promise.resolve(!1);const t=new e(1,1,44100),r=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(i=>{t.oncomplete=()=>{r.disconnect(),i(t.currentTime!==0)},t.startRendering()})},Xse=()=>new DOMException("","UnknownError"),Zse={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},eoe=(n,e,t,r,i,s,o)=>class extends n{constructor(l,c){const u=i(l),d={...Zse,...c},h=t(u,d),m=s(u)?r():null;super(l,!0,h,m),this._isCurveNullified=!1,this._nativeWaveShaperNode=h,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(l){if(l===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(l.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=l}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(l){this._nativeWaveShaperNode.oversample=l}},toe=(n,e,t)=>()=>{const r=new WeakMap,i=async(s,o)=>{let a=e(s);if(!ha(a,o)){const c={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=n(o,c)}return r.set(o,a),sv(a)?await t(s,o,a.inputs[0]):await t(s,o,a),a};return{render(s,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):i(s,o)}}},noe=()=>typeof window>"u"?null:window,roe=(n,e)=>t=>{t.copyFromChannel=(r,i,s=0)=>{const o=n(s),a=n(i);if(a>=t.numberOfChannels)throw e();const l=t.length,c=t.getChannelData(a),u=r.length;for(let d=o<0?-o:0;d+o<l&&d<u;d+=1)r[d]=c[d+o]},t.copyToChannel=(r,i,s=0)=>{const o=n(s),a=n(i);if(a>=t.numberOfChannels)throw e();const l=t.length,c=t.getChannelData(a),u=r.length;for(let d=o<0?-o:0;d+o<l&&d<u;d+=1)c[d+o]=r[d]}},ioe=n=>e=>{e.copyFromChannel=(t=>(r,i,s=0)=>{const o=n(s),a=n(i);if(o<e.length)return t.call(e,r,a,o)})(e.copyFromChannel),e.copyToChannel=(t=>(r,i,s=0)=>{const o=n(s),a=n(i);if(o<e.length)return t.call(e,r,a,o)})(e.copyToChannel)},soe=n=>(e,t)=>{const r=t.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=r),n(e,"buffer",i=>()=>{const s=i.call(e);return s===r?null:s},i=>s=>i.call(e,s===null?r:s))},ooe=(n,e)=>(t,r)=>{r.channelCount=1,r.channelCountMode="explicit",Object.defineProperty(r,"channelCount",{get:()=>1,set:()=>{throw n()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:()=>{throw n()}});const i=t.createBufferSource();e(r,()=>{const a=r.numberOfInputs;for(let l=0;l<a;l+=1)i.connect(r,0,l)},()=>i.disconnect(r))},bV=(n,e,t)=>n.copyFromChannel===void 0?n.getChannelData(t)[0]:(n.copyFromChannel(e,t),e[0]),MV=n=>{if(n===null)return!1;const e=n.length;return e%2!==0?n[Math.floor(e/2)]!==0:n[e/2-1]+n[e/2]!==0},zS=(n,e,t,r)=>{let i=n;for(;!i.hasOwnProperty(e);)i=Object.getPrototypeOf(i);const{get:s,set:o}=Object.getOwnPropertyDescriptor(i,e);Object.defineProperty(n,e,{get:t(s),set:r(o)})},aoe=n=>({...n,channelCount:n.numberOfOutputs}),loe=n=>{const{imag:e,real:t}=n;return e===void 0?t===void 0?{...n,imag:[0,0],real:[0,0]}:{...n,imag:Array.from(t,()=>0),real:t}:t===void 0?{...n,imag:e,real:Array.from(e,()=>0)}:{...n,imag:e,real:t}},RV=(n,e,t)=>{try{n.setValueAtTime(e,t)}catch(r){if(r.code!==9)throw r;RV(n,e,t+1e-7)}},coe=n=>{const e=n.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},uoe=n=>{const e=n.createBufferSource(),t=n.createBuffer(1,1,44100);e.buffer=t;try{e.start(0,1)}catch{return!1}return!0},doe=n=>{const e=n.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},gO=n=>{const e=n.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1},NV=n=>{const e=n.createBuffer(1,1,44100),t=n.createBufferSource();t.buffer=e,t.start(),t.stop();try{return t.stop(),!0}catch{return!1}},vO=n=>{const e=n.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1},hoe=n=>{n.start=(e=>(t=0,r=0,i)=>{const s=n.buffer,o=s===null?r:Math.min(s.duration,r);s!==null&&o>s.duration-.5/n.context.sampleRate?e.call(n,t,0,0):e.call(n,t,o,i)})(n.start)},PV=(n,e)=>{const t=e.createGain();n.connect(t);const r=(i=>()=>{i.call(n,t),n.removeEventListener("ended",r)})(n.disconnect);n.addEventListener("ended",r),ov(n,t),n.stop=(i=>{let s=!1;return(o=0)=>{if(s)try{i.call(n,o)}catch{t.gain.setValueAtTime(0,o)}else i.call(n,o),s=!0}})(n.stop)},US=(n,e)=>t=>{const r={value:n};return Object.defineProperties(t,{currentTarget:r,target:r}),typeof e=="function"?e.call(n,t):e.handleEvent.call(n,t)},foe=ore(jm),poe=hre(jm),moe=vie(Qx),OV=new WeakMap,goe=Pie(OV),sh=Jre(new Map,new WeakMap),Lu=noe(),DV=nse(sh,Um),LV=Nie(tl),Oo=Gse(tl,LV,xm),voe=gre(DV,Ii,Oo),ui=Die(pV),Gm=wse(Lu),ni=Wie(Gm),kV=new WeakMap,BV=Tie(US),jS=ose(Lu),FV=Gie(jS),zV=Hie(Lu),yoe=Vie(Lu),M4=lse(Lu),gs=Gre(are(uV),dre(foe,poe,YT,moe,XT,tl,goe,LS,Ii,jm,zd,xm,Yw),sh,jie(w4,XT,tl,Ii,Z_,zd),Um,Jx,oc,fie(YT,w4,tl,Ii,Z_,ui,zd,ni),_ie(kV,tl,Qf),BV,ui,FV,zV,yoe,ni,M4),_oe=mre(gs,voe,Um,DV,ui,ni),UV=new WeakSet,q8=rse(Lu),jV=aie(new Uint32Array(1)),GV=roe(jV,Um),HV=ioe(jV),Soe=yre(UV,sh,oc,q8,Gm,Jse(q8),GV,HV),Yx=fre(Gc),VV=Hse(LV,BS,xm),oh=nie(VV),GS=sse(Yx,sh,coe,uoe,doe,gO,NV,vO,hoe,soe(zS),PV),ah=jse(Oie(BS),VV),Aoe=Are(oh,GS,Ii,ah,Oo),Uu=Hre(lre(hV),kV,fV,Vre,ere,tre,nre,rre,ire,A4,lV,jS,RV),Eoe=Sre(gs,Aoe,Uu,oa,GS,ui,ni,US),Coe=Nre(gs,Pre,Um,oa,ase(Gc,zS),ui,ni,Oo),woe=Qre(oh,TV,Ii,ah,Oo),Hm=$se(OV),Toe=qre(gs,Uu,woe,Jx,TV,ui,ni,Hm),av=ese(jm,zV),xoe=ooe(oa,av),lv=use(jS,xoe),Ioe=Xre(lv,Ii,Oo),boe=Yre(gs,Ioe,lv,ui,ni),Moe=tie(mO,Ii,Oo),Roe=eie(gs,Moe,mO,ui,ni,aoe),Noe=fse(Yx,GS,Gc,av),Xx=hse(Yx,sh,Noe,gO,vO),Poe=oie(oh,Xx,Ii,ah,Oo),Ooe=sie(gs,Uu,Poe,Xx,ui,ni,US),$V=pse(oc,zS),Doe=uie($V,Ii,Oo),Loe=cie(gs,Doe,$V,ui,ni,Hm),koe=gie(oh,xV,Ii,ah,Oo),Boe=mie(gs,Uu,koe,xV,ui,ni,Hm),WV=mse(oc),Foe=Eie(oh,WV,Ii,ah,Oo),zoe=Aie(gs,Uu,Foe,WV,oc,ui,ni,Hm),Uoe=Rie(oh,Gc,Ii,ah,Oo),joe=Mie(gs,Uu,Uoe,Gc,ui,ni),Goe=_se(Jx,oa,Kx,oc),qV=Vse(sh,Gc,Kx,Yse(Gc,Gm)),Hoe=Uie(GS,Ii,Gm,Oo,qV),Voe=gse(Goe),$oe=Fie(gs,Voe,Hoe,ui,ni,Hm),Woe=Ore(Uu,lv,Xx,Kx,oc,bV,ni,zS),qoe=new WeakMap,Qoe=Zie(Coe,Woe,BV,ni,qoe,US),QV=Tse(Yx,sh,gO,NV,vO,PV),Joe=Lse(oh,QV,Ii,ah,Oo),Koe=Dse(gs,Uu,QV,Joe,ui,ni,US),JV=rie(GS),Yoe=Pse(JV,oa,Gc,MV,av),Zx=Nse(JV,oa,Yoe,MV,av,jS,zS),Xoe=Ise(YT,oa,lv,Gc,Kx,Zx,oc,XT,bV,av),KV=xse(Xoe),Zoe=Fse(oh,lv,Xx,Gc,KV,Ii,Gm,ah,Oo,qV),eae=Bse(gs,Uu,KV,Zoe,ui,ni,Hm),tae=bse(Um),nae=Use(tae,ui,new WeakSet,loe),rae=Rse(lv,mO,Gc,Zx,oc,av),YV=Mse(rae,oc),iae=Qse(oh,YV,Ii,ah,Oo),sae=qse(gs,Uu,YV,iae,ui,ni),oae=toe(Zx,Ii,Oo),aae=eoe(gs,oa,Zx,oae,ui,ni,Hm),lae=qie(Lu),cae=xie(Lu),uae=new WeakMap,dae=Lie(uae,Gm),hae=lae?ure(sh,oc,wie(Lu),cae,Iie(sre),ui,dae,ni,M4,new WeakMap,new WeakMap,Kse(M4,Gm),Lu):void 0,fae=$ie(FV,ni),pae=hie(UV,sh,die,Cie,new WeakSet,ui,fae,x4,b4,GV,HV),mae=$re(hae,_oe,Soe,Eoe,Toe,boe,Roe,Ooe,Loe,pae,Boe,zoe,joe,$oe,Qoe,Koe,eae,nae,sae,aae),gae=Qie(gs,Sse,ui,ni),vae=Kie(gs,Ase,ui,ni),yae=Yie(gs,Ese,ui,ni),_ae=Cse(oa,ni),Sae=Xie(gs,_ae,ui),LE=Rre(mae,oa,oc,Xse,gae,vae,yae,Sae,jS);var Yo={},hM={},eI={},fM={},Ui={},cv={},Zl={},XV={},tI={},nI={};Object.defineProperty(nI,"__esModule",{value:!0});nI.default=Eae;let kE;const Aae=new Uint8Array(16);function Eae(){if(!kE&&(kE=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!kE))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return kE(Aae)}var Jf={},Vm={},rI={};Object.defineProperty(rI,"__esModule",{value:!0});rI.default=void 0;var Cae=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;rI.default=Cae;Object.defineProperty(Vm,"__esModule",{value:!0});Vm.default=void 0;var wae=Tae(rI);function Tae(n){return n&&n.__esModule?n:{default:n}}function xae(n){return typeof n=="string"&&wae.default.test(n)}var Iae=xae;Vm.default=Iae;Object.defineProperty(Jf,"__esModule",{value:!0});Jf.default=void 0;Jf.unsafeStringify=ZV;var bae=Mae(Vm);function Mae(n){return n&&n.__esModule?n:{default:n}}const Ys=[];for(let n=0;n<256;++n)Ys.push((n+256).toString(16).slice(1));function ZV(n,e=0){return Ys[n[e+0]]+Ys[n[e+1]]+Ys[n[e+2]]+Ys[n[e+3]]+"-"+Ys[n[e+4]]+Ys[n[e+5]]+"-"+Ys[n[e+6]]+Ys[n[e+7]]+"-"+Ys[n[e+8]]+Ys[n[e+9]]+"-"+Ys[n[e+10]]+Ys[n[e+11]]+Ys[n[e+12]]+Ys[n[e+13]]+Ys[n[e+14]]+Ys[n[e+15]]}function Rae(n,e=0){const t=ZV(n,e);if(!(0,bae.default)(t))throw TypeError("Stringified UUID is invalid");return t}var Nae=Rae;Jf.default=Nae;Object.defineProperty(tI,"__esModule",{value:!0});tI.default=void 0;var Pae=Dae(nI),Oae=Jf;function Dae(n){return n&&n.__esModule?n:{default:n}}let Q8,pM,mM=0,gM=0;function Lae(n,e,t){let r=e&&t||0;const i=e||new Array(16);n=n||{};let s=n.node||Q8,o=n.clockseq!==void 0?n.clockseq:pM;if(s==null||o==null){const h=n.random||(n.rng||Pae.default)();s==null&&(s=Q8=[h[0]|1,h[1],h[2],h[3],h[4],h[5]]),o==null&&(o=pM=(h[6]<<8|h[7])&16383)}let a=n.msecs!==void 0?n.msecs:Date.now(),l=n.nsecs!==void 0?n.nsecs:gM+1;const c=a-mM+(l-gM)/1e4;if(c<0&&n.clockseq===void 0&&(o=o+1&16383),(c<0||a>mM)&&n.nsecs===void 0&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");mM=a,gM=l,pM=o,a+=122192928e5;const u=((a&268435455)*1e4+l)%4294967296;i[r++]=u>>>24&255,i[r++]=u>>>16&255,i[r++]=u>>>8&255,i[r++]=u&255;const d=a/4294967296*1e4&268435455;i[r++]=d>>>8&255,i[r++]=d&255,i[r++]=d>>>24&15|16,i[r++]=d>>>16&255,i[r++]=o>>>8|128,i[r++]=o&255;for(let h=0;h<6;++h)i[r+h]=s[h];return e||(0,Oae.unsafeStringify)(i)}var kae=Lae;tI.default=kae;var iI={},Of={},HS={};Object.defineProperty(HS,"__esModule",{value:!0});HS.default=void 0;var Bae=Fae(Vm);function Fae(n){return n&&n.__esModule?n:{default:n}}function zae(n){if(!(0,Bae.default)(n))throw TypeError("Invalid UUID");let e;const t=new Uint8Array(16);return t[0]=(e=parseInt(n.slice(0,8),16))>>>24,t[1]=e>>>16&255,t[2]=e>>>8&255,t[3]=e&255,t[4]=(e=parseInt(n.slice(9,13),16))>>>8,t[5]=e&255,t[6]=(e=parseInt(n.slice(14,18),16))>>>8,t[7]=e&255,t[8]=(e=parseInt(n.slice(19,23),16))>>>8,t[9]=e&255,t[10]=(e=parseInt(n.slice(24,36),16))/1099511627776&255,t[11]=e/4294967296&255,t[12]=e>>>24&255,t[13]=e>>>16&255,t[14]=e>>>8&255,t[15]=e&255,t}var Uae=zae;HS.default=Uae;Object.defineProperty(Of,"__esModule",{value:!0});Of.URL=Of.DNS=void 0;Of.default=$ae;var jae=Jf,Gae=Hae(HS);function Hae(n){return n&&n.__esModule?n:{default:n}}function Vae(n){n=unescape(encodeURIComponent(n));const e=[];for(let t=0;t<n.length;++t)e.push(n.charCodeAt(t));return e}const e$="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Of.DNS=e$;const t$="6ba7b811-9dad-11d1-80b4-00c04fd430c8";Of.URL=t$;function $ae(n,e,t){function r(i,s,o,a){var l;if(typeof i=="string"&&(i=Vae(i)),typeof s=="string"&&(s=(0,Gae.default)(s)),((l=s)===null||l===void 0?void 0:l.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+i.length);if(c.set(s),c.set(i,s.length),c=t(c),c[6]=c[6]&15|e,c[8]=c[8]&63|128,o){a=a||0;for(let u=0;u<16;++u)o[a+u]=c[u];return o}return(0,jae.unsafeStringify)(c)}try{r.name=n}catch{}return r.DNS=e$,r.URL=t$,r}var sI={};Object.defineProperty(sI,"__esModule",{value:!0});sI.default=void 0;function Wae(n){if(typeof n=="string"){const e=unescape(encodeURIComponent(n));n=new Uint8Array(e.length);for(let t=0;t<e.length;++t)n[t]=e.charCodeAt(t)}return qae(Qae(Jae(n),n.length*8))}function qae(n){const e=[],t=n.length*32,r="0123456789abcdef";for(let i=0;i<t;i+=8){const s=n[i>>5]>>>i%32&255,o=parseInt(r.charAt(s>>>4&15)+r.charAt(s&15),16);e.push(o)}return e}function n$(n){return(n+64>>>9<<4)+14+1}function Qae(n,e){n[e>>5]|=128<<e%32,n[n$(e)-1]=e;let t=1732584193,r=-271733879,i=-1732584194,s=271733878;for(let o=0;o<n.length;o+=16){const a=t,l=r,c=i,u=s;t=_o(t,r,i,s,n[o],7,-680876936),s=_o(s,t,r,i,n[o+1],12,-389564586),i=_o(i,s,t,r,n[o+2],17,606105819),r=_o(r,i,s,t,n[o+3],22,-1044525330),t=_o(t,r,i,s,n[o+4],7,-176418897),s=_o(s,t,r,i,n[o+5],12,1200080426),i=_o(i,s,t,r,n[o+6],17,-1473231341),r=_o(r,i,s,t,n[o+7],22,-45705983),t=_o(t,r,i,s,n[o+8],7,1770035416),s=_o(s,t,r,i,n[o+9],12,-1958414417),i=_o(i,s,t,r,n[o+10],17,-42063),r=_o(r,i,s,t,n[o+11],22,-1990404162),t=_o(t,r,i,s,n[o+12],7,1804603682),s=_o(s,t,r,i,n[o+13],12,-40341101),i=_o(i,s,t,r,n[o+14],17,-1502002290),r=_o(r,i,s,t,n[o+15],22,1236535329),t=So(t,r,i,s,n[o+1],5,-165796510),s=So(s,t,r,i,n[o+6],9,-1069501632),i=So(i,s,t,r,n[o+11],14,643717713),r=So(r,i,s,t,n[o],20,-373897302),t=So(t,r,i,s,n[o+5],5,-701558691),s=So(s,t,r,i,n[o+10],9,38016083),i=So(i,s,t,r,n[o+15],14,-660478335),r=So(r,i,s,t,n[o+4],20,-405537848),t=So(t,r,i,s,n[o+9],5,568446438),s=So(s,t,r,i,n[o+14],9,-1019803690),i=So(i,s,t,r,n[o+3],14,-187363961),r=So(r,i,s,t,n[o+8],20,1163531501),t=So(t,r,i,s,n[o+13],5,-1444681467),s=So(s,t,r,i,n[o+2],9,-51403784),i=So(i,s,t,r,n[o+7],14,1735328473),r=So(r,i,s,t,n[o+12],20,-1926607734),t=Ao(t,r,i,s,n[o+5],4,-378558),s=Ao(s,t,r,i,n[o+8],11,-2022574463),i=Ao(i,s,t,r,n[o+11],16,1839030562),r=Ao(r,i,s,t,n[o+14],23,-35309556),t=Ao(t,r,i,s,n[o+1],4,-1530992060),s=Ao(s,t,r,i,n[o+4],11,1272893353),i=Ao(i,s,t,r,n[o+7],16,-155497632),r=Ao(r,i,s,t,n[o+10],23,-1094730640),t=Ao(t,r,i,s,n[o+13],4,681279174),s=Ao(s,t,r,i,n[o],11,-358537222),i=Ao(i,s,t,r,n[o+3],16,-722521979),r=Ao(r,i,s,t,n[o+6],23,76029189),t=Ao(t,r,i,s,n[o+9],4,-640364487),s=Ao(s,t,r,i,n[o+12],11,-421815835),i=Ao(i,s,t,r,n[o+15],16,530742520),r=Ao(r,i,s,t,n[o+2],23,-995338651),t=Eo(t,r,i,s,n[o],6,-198630844),s=Eo(s,t,r,i,n[o+7],10,1126891415),i=Eo(i,s,t,r,n[o+14],15,-1416354905),r=Eo(r,i,s,t,n[o+5],21,-57434055),t=Eo(t,r,i,s,n[o+12],6,1700485571),s=Eo(s,t,r,i,n[o+3],10,-1894986606),i=Eo(i,s,t,r,n[o+10],15,-1051523),r=Eo(r,i,s,t,n[o+1],21,-2054922799),t=Eo(t,r,i,s,n[o+8],6,1873313359),s=Eo(s,t,r,i,n[o+15],10,-30611744),i=Eo(i,s,t,r,n[o+6],15,-1560198380),r=Eo(r,i,s,t,n[o+13],21,1309151649),t=Eo(t,r,i,s,n[o+4],6,-145523070),s=Eo(s,t,r,i,n[o+11],10,-1120210379),i=Eo(i,s,t,r,n[o+2],15,718787259),r=Eo(r,i,s,t,n[o+9],21,-343485551),t=hf(t,a),r=hf(r,l),i=hf(i,c),s=hf(s,u)}return[t,r,i,s]}function Jae(n){if(n.length===0)return[];const e=n.length*8,t=new Uint32Array(n$(e));for(let r=0;r<e;r+=8)t[r>>5]|=(n[r/8]&255)<<r%32;return t}function hf(n,e){const t=(n&65535)+(e&65535);return(n>>16)+(e>>16)+(t>>16)<<16|t&65535}function Kae(n,e){return n<<e|n>>>32-e}function oI(n,e,t,r,i,s){return hf(Kae(hf(hf(e,n),hf(r,s)),i),t)}function _o(n,e,t,r,i,s,o){return oI(e&t|~e&r,n,e,i,s,o)}function So(n,e,t,r,i,s,o){return oI(e&r|t&~r,n,e,i,s,o)}function Ao(n,e,t,r,i,s,o){return oI(e^t^r,n,e,i,s,o)}function Eo(n,e,t,r,i,s,o){return oI(t^(e|~r),n,e,i,s,o)}var Yae=Wae;sI.default=Yae;Object.defineProperty(iI,"__esModule",{value:!0});iI.default=void 0;var Xae=r$(Of),Zae=r$(sI);function r$(n){return n&&n.__esModule?n:{default:n}}const ele=(0,Xae.default)("v3",48,Zae.default);var tle=ele;iI.default=tle;var aI={},lI={};Object.defineProperty(lI,"__esModule",{value:!0});lI.default=void 0;const nle=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var rle={randomUUID:nle};lI.default=rle;Object.defineProperty(aI,"__esModule",{value:!0});aI.default=void 0;var J8=i$(lI),ile=i$(nI),sle=Jf;function i$(n){return n&&n.__esModule?n:{default:n}}function ole(n,e,t){if(J8.default.randomUUID&&!e&&!n)return J8.default.randomUUID();n=n||{};const r=n.random||(n.rng||ile.default)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){t=t||0;for(let i=0;i<16;++i)e[t+i]=r[i];return e}return(0,sle.unsafeStringify)(r)}var ale=ole;aI.default=ale;var cI={},uI={};Object.defineProperty(uI,"__esModule",{value:!0});uI.default=void 0;function lle(n,e,t,r){switch(n){case 0:return e&t^~e&r;case 1:return e^t^r;case 2:return e&t^e&r^t&r;case 3:return e^t^r}}function vM(n,e){return n<<e|n>>>32-e}function cle(n){const e=[1518500249,1859775393,2400959708,3395469782],t=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof n=="string"){const o=unescape(encodeURIComponent(n));n=[];for(let a=0;a<o.length;++a)n.push(o.charCodeAt(a))}else Array.isArray(n)||(n=Array.prototype.slice.call(n));n.push(128);const r=n.length/4+2,i=Math.ceil(r/16),s=new Array(i);for(let o=0;o<i;++o){const a=new Uint32Array(16);for(let l=0;l<16;++l)a[l]=n[o*64+l*4]<<24|n[o*64+l*4+1]<<16|n[o*64+l*4+2]<<8|n[o*64+l*4+3];s[o]=a}s[i-1][14]=(n.length-1)*8/Math.pow(2,32),s[i-1][14]=Math.floor(s[i-1][14]),s[i-1][15]=(n.length-1)*8&4294967295;for(let o=0;o<i;++o){const a=new Uint32Array(80);for(let f=0;f<16;++f)a[f]=s[o][f];for(let f=16;f<80;++f)a[f]=vM(a[f-3]^a[f-8]^a[f-14]^a[f-16],1);let l=t[0],c=t[1],u=t[2],d=t[3],h=t[4];for(let f=0;f<80;++f){const m=Math.floor(f/20),g=vM(l,5)+lle(m,c,u,d)+h+e[m]+a[f]>>>0;h=d,d=u,u=vM(c,30)>>>0,c=l,l=g}t[0]=t[0]+l>>>0,t[1]=t[1]+c>>>0,t[2]=t[2]+u>>>0,t[3]=t[3]+d>>>0,t[4]=t[4]+h>>>0}return[t[0]>>24&255,t[0]>>16&255,t[0]>>8&255,t[0]&255,t[1]>>24&255,t[1]>>16&255,t[1]>>8&255,t[1]&255,t[2]>>24&255,t[2]>>16&255,t[2]>>8&255,t[2]&255,t[3]>>24&255,t[3]>>16&255,t[3]>>8&255,t[3]&255,t[4]>>24&255,t[4]>>16&255,t[4]>>8&255,t[4]&255]}var ule=cle;uI.default=ule;Object.defineProperty(cI,"__esModule",{value:!0});cI.default=void 0;var dle=s$(Of),hle=s$(uI);function s$(n){return n&&n.__esModule?n:{default:n}}const fle=(0,dle.default)("v5",80,hle.default);var ple=fle;cI.default=ple;var dI={};Object.defineProperty(dI,"__esModule",{value:!0});dI.default=void 0;var mle="00000000-0000-0000-0000-000000000000";dI.default=mle;var hI={};Object.defineProperty(hI,"__esModule",{value:!0});hI.default=void 0;var gle=vle(Vm);function vle(n){return n&&n.__esModule?n:{default:n}}function yle(n){if(!(0,gle.default)(n))throw TypeError("Invalid UUID");return parseInt(n.slice(14,15),16)}var _le=yle;hI.default=_le;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"NIL",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(n,"parse",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(n,"stringify",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(n,"v1",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(n,"v3",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(n,"v4",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"v5",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"validate",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(n,"version",{enumerable:!0,get:function(){return o.default}});var e=u(tI),t=u(iI),r=u(aI),i=u(cI),s=u(dI),o=u(hI),a=u(Vm),l=u(Jf),c=u(HS);function u(d){return d&&d.__esModule?d:{default:d}}})(XV);Object.defineProperty(Zl,"__esModule",{value:!0});Zl.createNoDashGuid=Zl.createGuid=void 0;const Sle=XV,o$=()=>Sle.v4();Zl.createGuid=o$;const Ale=()=>o$().replace(new RegExp("-","g"),"").toUpperCase();Zl.createNoDashGuid=Ale;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.PlatformEvent=n.EventType=void 0;const e=Zl;(function(r){r[r.Debug=0]="Debug",r[r.Info=1]="Info",r[r.Warning=2]="Warning",r[r.Error=3]="Error",r[r.None=4]="None"})(n.EventType||(n.EventType={}));class t{constructor(i,s){this.privName=i,this.privEventId=e.createNoDashGuid(),this.privEventTime=new Date().toISOString(),this.privEventType=s,this.privMetadata={}}get name(){return this.privName}get eventId(){return this.privEventId}get eventTime(){return this.privEventTime}get eventType(){return this.privEventType}get metadata(){return this.privMetadata}}n.PlatformEvent=t})(cv);Object.defineProperty(Ui,"__esModule",{value:!0});Ui.AudioStreamNodeErrorEvent=Ui.AudioStreamNodeDetachedEvent=Ui.AudioStreamNodeAttachedEvent=Ui.AudioStreamNodeAttachingEvent=Ui.AudioStreamNodeEvent=Ui.AudioSourceErrorEvent=Ui.AudioSourceOffEvent=Ui.AudioSourceReadyEvent=Ui.AudioSourceInitializingEvent=Ui.AudioSourceEvent=void 0;const R4=cv;class uv extends R4.PlatformEvent{constructor(e,t,r=R4.EventType.Info){super(e,r),this.privAudioSourceId=t}get audioSourceId(){return this.privAudioSourceId}}Ui.AudioSourceEvent=uv;class Ele extends uv{constructor(e){super("AudioSourceInitializingEvent",e)}}Ui.AudioSourceInitializingEvent=Ele;class Cle extends uv{constructor(e){super("AudioSourceReadyEvent",e)}}Ui.AudioSourceReadyEvent=Cle;class wle extends uv{constructor(e){super("AudioSourceOffEvent",e)}}Ui.AudioSourceOffEvent=wle;class Tle extends uv{constructor(e,t){super("AudioSourceErrorEvent",e,R4.EventType.Error),this.privError=t}get error(){return this.privError}}Ui.AudioSourceErrorEvent=Tle;class VS extends uv{constructor(e,t,r){super(e,t),this.privAudioNodeId=r}get audioNodeId(){return this.privAudioNodeId}}Ui.AudioStreamNodeEvent=VS;class xle extends VS{constructor(e,t){super("AudioStreamNodeAttachingEvent",e,t)}}Ui.AudioStreamNodeAttachingEvent=xle;class Ile extends VS{constructor(e,t){super("AudioStreamNodeAttachedEvent",e,t)}}Ui.AudioStreamNodeAttachedEvent=Ile;class ble extends VS{constructor(e,t){super("AudioStreamNodeDetachedEvent",e,t)}}Ui.AudioStreamNodeDetachedEvent=ble;class Mle extends VS{constructor(e,t,r){super("AudioStreamNodeErrorEvent",e,t),this.privError=r}get error(){return this.privError}}Ui.AudioStreamNodeErrorEvent=Mle;var fs={};Object.defineProperty(fs,"__esModule",{value:!0});fs.ConnectionMessageSentEvent=fs.ConnectionMessageReceivedEvent=fs.ConnectionEstablishErrorEvent=fs.ConnectionErrorEvent=fs.ConnectionClosedEvent=fs.ConnectionEstablishedEvent=fs.ConnectionStartEvent=fs.ConnectionEvent=fs.ServiceEvent=void 0;const Im=cv;class Rle extends Im.PlatformEvent{constructor(e,t,r=Im.EventType.Info){super(e,r),this.privJsonResult=t}get jsonString(){return this.privJsonResult}}fs.ServiceEvent=Rle;class Kf extends Im.PlatformEvent{constructor(e,t,r=Im.EventType.Info){super(e,r),this.privConnectionId=t}get connectionId(){return this.privConnectionId}}fs.ConnectionEvent=Kf;class Nle extends Kf{constructor(e,t,r){super("ConnectionStartEvent",e),this.privUri=t,this.privHeaders=r}get uri(){return this.privUri}get headers(){return this.privHeaders}}fs.ConnectionStartEvent=Nle;class Ple extends Kf{constructor(e){super("ConnectionEstablishedEvent",e)}}fs.ConnectionEstablishedEvent=Ple;class Ole extends Kf{constructor(e,t,r){super("ConnectionClosedEvent",e,Im.EventType.Debug),this.privReason=r,this.privStatusCode=t}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}fs.ConnectionClosedEvent=Ole;class Dle extends Kf{constructor(e,t,r){super("ConnectionErrorEvent",e,Im.EventType.Debug),this.privMessage=t,this.privType=r}get message(){return this.privMessage}get type(){return this.privType}}fs.ConnectionErrorEvent=Dle;class Lle extends Kf{constructor(e,t,r){super("ConnectionEstablishErrorEvent",e,Im.EventType.Error),this.privStatusCode=t,this.privReason=r}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}fs.ConnectionEstablishErrorEvent=Lle;class kle extends Kf{constructor(e,t,r){super("ConnectionMessageReceivedEvent",e),this.privNetworkReceivedTime=t,this.privMessage=r}get networkReceivedTime(){return this.privNetworkReceivedTime}get message(){return this.privMessage}}fs.ConnectionMessageReceivedEvent=kle;class Ble extends Kf{constructor(e,t,r){super("ConnectionMessageSentEvent",e),this.privNetworkSentTime=t,this.privMessage=r}get networkSentTime(){return this.privNetworkSentTime}get message(){return this.privMessage}}fs.ConnectionMessageSentEvent=Ble;var yO={},ro={};Object.defineProperty(ro,"__esModule",{value:!0});ro.ObjectDisposedError=ro.InvalidOperationError=ro.ArgumentNullError=void 0;class Fle extends Error{constructor(e){super(e),this.name="ArgumentNull",this.message=e}}ro.ArgumentNullError=Fle;class zle extends Error{constructor(e){super(e),this.name="InvalidOperation",this.message=e}}ro.InvalidOperationError=zle;class Ule extends Error{constructor(e,t){super(t),this.name=e+"ObjectDisposed",this.message=t}}ro.ObjectDisposedError=Ule;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ConnectionMessage=n.MessageType=void 0;const e=ro,t=Zl;var r;(function(s){s[s.Text=0]="Text",s[s.Binary=1]="Binary"})(r=n.MessageType||(n.MessageType={}));class i{constructor(o,a,l,c){if(this.privBody=null,o===r.Text&&a&&typeof a!="string")throw new e.InvalidOperationError("Payload must be a string");if(o===r.Binary&&a&&!(a instanceof ArrayBuffer))throw new e.InvalidOperationError("Payload must be ArrayBuffer");switch(this.privMessageType=o,this.privBody=a,this.privHeaders=l||{},this.privId=c||t.createNoDashGuid(),this.messageType){case r.Binary:this.privSize=this.binaryBody!==null?this.binaryBody.byteLength:0;break;case r.Text:this.privSize=this.textBody.length}}get messageType(){return this.privMessageType}get headers(){return this.privHeaders}get body(){return this.privBody}get textBody(){if(this.privMessageType===r.Binary)throw new e.InvalidOperationError("Not supported for binary message");return this.privBody}get binaryBody(){if(this.privMessageType===r.Text)throw new e.InvalidOperationError("Not supported for text message");return this.privBody}get id(){return this.privId}}n.ConnectionMessage=i})(yO);var fI={};Object.defineProperty(fI,"__esModule",{value:!0});fI.ConnectionOpenResponse=void 0;class jle{constructor(e,t){this.privStatusCode=e,this.privReason=t}get statusCode(){return this.privStatusCode}get reason(){return this.privReason}}fI.ConnectionOpenResponse=jle;var pI={};Object.defineProperty(pI,"__esModule",{value:!0});pI.DeferralMap=void 0;class Gle{constructor(){this.privMap={}}add(e,t){this.privMap[e]=t}getId(e){return this.privMap[e]}complete(e,t){try{this.privMap[e].resolve(t)}catch(r){this.privMap[e].reject(r)}finally{this.privMap[e]=void 0}}}pI.DeferralMap=Gle;var bm={};Object.defineProperty(bm,"__esModule",{value:!0});bm.SendingAgentContextMessageEvent=bm.DialogEvent=void 0;const K8=cv;class a$ extends K8.PlatformEvent{constructor(e,t=K8.EventType.Info){super(e,t)}}bm.DialogEvent=a$;class Hle extends a${constructor(e){super("SendingAgentContextMessageEvent"),this.privAgentConfig=e}get agentConfig(){return this.privAgentConfig}}bm.SendingAgentContextMessageEvent=Hle;var mI={},$S={};Object.defineProperty($S,"__esModule",{value:!0});$S.EventSource=void 0;const Vle=ro,$le=Zl;class Wle{constructor(e){this.privEventListeners={},this.privIsDisposed=!1,this.privConsoleListener=void 0,this.privMetadata=e}onEvent(e){if(this.isDisposed())throw new Vle.ObjectDisposedError("EventSource");if(this.metadata)for(const t in this.metadata)t&&e.metadata&&(e.metadata[t]||(e.metadata[t]=this.metadata[t]));for(const t in this.privEventListeners)t&&this.privEventListeners[t]&&this.privEventListeners[t](e)}attach(e){const t=$le.createNoDashGuid();return this.privEventListeners[t]=e,{detach:()=>(delete this.privEventListeners[t],Promise.resolve())}}attachListener(e){return this.attach(t=>e.onEvent(t))}attachConsoleListener(e){return this.privConsoleListener&&this.privConsoleListener.detach(),this.privConsoleListener=this.attach(t=>e.onEvent(t)),this.privConsoleListener}isDisposed(){return this.privIsDisposed}dispose(){this.privEventListeners=null,this.privIsDisposed=!0}get metadata(){return this.privMetadata}}$S.EventSource=Wle;Object.defineProperty(mI,"__esModule",{value:!0});mI.Events=void 0;const qle=ro,Qle=$S;class eS{static setEventSource(e){if(!e)throw new qle.ArgumentNullError("eventSource");eS.privInstance=e}static get instance(){return eS.privInstance}}mI.Events=eS;eS.privInstance=new Qle.EventSource;var l$={};Object.defineProperty(l$,"__esModule",{value:!0});var c$={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ConnectionState=void 0,function(e){e[e.None=0]="None",e[e.Connected=1]="Connected",e[e.Connecting=2]="Connecting",e[e.Disconnected=3]="Disconnected"}(n.ConnectionState||(n.ConnectionState={}))})(c$);var u$={};Object.defineProperty(u$,"__esModule",{value:!0});var d$={};Object.defineProperty(d$,"__esModule",{value:!0});var h$={};Object.defineProperty(h$,"__esModule",{value:!0});var f$={};Object.defineProperty(f$,"__esModule",{value:!0});var p$={};Object.defineProperty(p$,"__esModule",{value:!0});var m$={};Object.defineProperty(m$,"__esModule",{value:!0});var g$={};Object.defineProperty(g$,"__esModule",{value:!0});var v$={};Object.defineProperty(v$,"__esModule",{value:!0});var WS={};Object.defineProperty(WS,"__esModule",{value:!0});WS.List=void 0;const Jle=ro;class nf{constructor(e){if(this.privSubscriptionIdCounter=0,this.privAddSubscriptions={},this.privRemoveSubscriptions={},this.privDisposedSubscriptions={},this.privDisposeReason=null,this.privList=[],e)for(const t of e)this.privList.push(t)}get(e){return this.throwIfDisposed(),this.privList[e]}first(){return this.get(0)}last(){return this.get(this.length()-1)}add(e){this.throwIfDisposed(),this.insertAt(this.privList.length,e)}insertAt(e,t){this.throwIfDisposed(),e===0?this.privList.unshift(t):e===this.privList.length?this.privList.push(t):this.privList.splice(e,0,t),this.triggerSubscriptions(this.privAddSubscriptions)}removeFirst(){return this.throwIfDisposed(),this.removeAt(0)}removeLast(){return this.throwIfDisposed(),this.removeAt(this.length()-1)}removeAt(e){return this.throwIfDisposed(),this.remove(e,1)[0]}remove(e,t){this.throwIfDisposed();const r=this.privList.splice(e,t);return this.triggerSubscriptions(this.privRemoveSubscriptions),r}clear(){this.throwIfDisposed(),this.remove(0,this.length())}length(){return this.throwIfDisposed(),this.privList.length}onAdded(e){this.throwIfDisposed();const t=this.privSubscriptionIdCounter++;return this.privAddSubscriptions[t]=e,{detach:()=>(delete this.privAddSubscriptions[t],Promise.resolve())}}onRemoved(e){this.throwIfDisposed();const t=this.privSubscriptionIdCounter++;return this.privRemoveSubscriptions[t]=e,{detach:()=>(delete this.privRemoveSubscriptions[t],Promise.resolve())}}onDisposed(e){this.throwIfDisposed();const t=this.privSubscriptionIdCounter++;return this.privDisposedSubscriptions[t]=e,{detach:()=>(delete this.privDisposedSubscriptions[t],Promise.resolve())}}join(e){return this.throwIfDisposed(),this.privList.join(e)}toArray(){const e=Array();return this.privList.forEach(t=>{e.push(t)}),e}any(e){return this.throwIfDisposed(),e?this.where(e).length()>0:this.length()>0}all(e){return this.throwIfDisposed(),this.where(e).length()===this.length()}forEach(e){this.throwIfDisposed();for(let t=0;t<this.length();t++)e(this.privList[t],t)}select(e){this.throwIfDisposed();const t=[];for(let r=0;r<this.privList.length;r++)t.push(e(this.privList[r],r));return new nf(t)}where(e){this.throwIfDisposed();const t=new nf;for(let r=0;r<this.privList.length;r++)e(this.privList[r],r)&&t.add(this.privList[r]);return t}orderBy(e){this.throwIfDisposed();const r=this.toArray().sort(e);return new nf(r)}orderByDesc(e){return this.throwIfDisposed(),this.orderBy((t,r)=>e(r,t))}clone(){return this.throwIfDisposed(),new nf(this.toArray())}concat(e){return this.throwIfDisposed(),new nf(this.privList.concat(e.toArray()))}concatArray(e){return this.throwIfDisposed(),new nf(this.privList.concat(e))}isDisposed(){return this.privList==null}dispose(e){this.isDisposed()||(this.privDisposeReason=e,this.privList=null,this.privAddSubscriptions=null,this.privRemoveSubscriptions=null,this.triggerSubscriptions(this.privDisposedSubscriptions))}throwIfDisposed(){if(this.isDisposed())throw new Jle.ObjectDisposedError("List",this.privDisposeReason)}triggerSubscriptions(e){if(e)for(const t in e)t&&e[t]()}}WS.List=nf;var _O={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.marshalPromiseToCallbacks=n.Sink=n.Deferred=n.PromiseResultEventSource=n.PromiseResult=n.PromiseState=void 0;var e;(function(a){a[a.None=0]="None",a[a.Resolved=1]="Resolved",a[a.Rejected=2]="Rejected"})(e=n.PromiseState||(n.PromiseState={}));class t{constructor(l){this.throwIfError=()=>{if(this.isError)throw this.error},l.on(c=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!1,this.privResult=c)},c=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!0,this.privError=c)})}get isCompleted(){return this.privIsCompleted}get isError(){return this.privIsError}get error(){return this.privError}get result(){return this.privResult}}n.PromiseResult=t;class r{constructor(){this.setResult=l=>{this.privOnSetResult(l)},this.setError=l=>{this.privOnSetError(l)},this.on=(l,c)=>{this.privOnSetResult=l,this.privOnSetError=c}}}n.PromiseResultEventSource=r;class i{constructor(){this.resolve=l=>(this.privResolve(l),this),this.reject=l=>(this.privReject(l),this),this.privPromise=new Promise((l,c)=>{this.privResolve=l,this.privReject=c})}get promise(){return this.privPromise}}n.Deferred=i;class s{constructor(){this.privState=e.None,this.privPromiseResult=null,this.privPromiseResultEvents=null,this.privSuccessHandlers=[],this.privErrorHandlers=[],this.privPromiseResultEvents=new r,this.privPromiseResult=new t(this.privPromiseResultEvents)}get state(){return this.privState}get result(){return this.privPromiseResult}resolve(l){if(this.privState!==e.None)throw new Error("'Cannot resolve a completed promise'");this.privState=e.Resolved,this.privPromiseResultEvents.setResult(l);for(let c=0;c<this.privSuccessHandlers.length;c++)this.executeSuccessCallback(l,this.privSuccessHandlers[c],this.privErrorHandlers[c]);this.detachHandlers()}reject(l){if(this.privState!==e.None)throw new Error("'Cannot reject a completed promise'");this.privState=e.Rejected,this.privPromiseResultEvents.setError(l);for(const c of this.privErrorHandlers)this.executeErrorCallback(l,c);this.detachHandlers()}on(l,c){l==null&&(l=()=>{}),this.privState===e.None?(this.privSuccessHandlers.push(l),this.privErrorHandlers.push(c)):(this.privState===e.Resolved?this.executeSuccessCallback(this.privPromiseResult.result,l,c):this.privState===e.Rejected&&this.executeErrorCallback(this.privPromiseResult.error,c),this.detachHandlers())}executeSuccessCallback(l,c,u){try{c(l)}catch(d){this.executeErrorCallback(`'Unhandled callback error: ${d}'`,u)}}executeErrorCallback(l,c){if(c)try{c(l)}catch(u){throw new Error(`'Unhandled callback error: ${u}. InnerError: ${l}'`)}else throw new Error(`'Unhandled error: ${l}'`)}detachHandlers(){this.privErrorHandlers=[],this.privSuccessHandlers=[]}}n.Sink=s;function o(a,l,c){a.then(u=>{try{l&&l(u)}catch(d){if(c)try{if(d instanceof Error){const h=d;c(h.name+": "+h.message)}else c(d)}catch{}}},u=>{if(c)try{if(u instanceof Error){const d=u;c(d.name+": "+d.message)}else c(u)}catch{}})}n.marshalPromiseToCallbacks=o})(_O);var qS={},Y8=Ze&&Ze.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};Object.defineProperty(qS,"__esModule",{value:!0});qS.Queue=void 0;const yM=ro,_M=WS,X8=_O;var b_;(function(n){n[n.Dequeue=0]="Dequeue",n[n.Peek=1]="Peek"})(b_||(b_={}));class Kle{constructor(e){this.privPromiseStore=new _M.List,this.privIsDrainInProgress=!1,this.privIsDisposing=!1,this.privDisposeReason=null,this.privList=e||new _M.List,this.privDetachables=[],this.privSubscribers=new _M.List,this.privDetachables.push(this.privList.onAdded(()=>this.drain()))}enqueue(e){this.throwIfDispose(),this.enqueueFromPromise(new Promise(t=>t(e)))}enqueueFromPromise(e){this.throwIfDispose(),e.then(t=>{this.privList.add(t)},()=>{})}dequeue(){this.throwIfDispose();const e=new X8.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:e,type:b_.Dequeue}),this.drain()),e.promise}peek(){this.throwIfDispose();const e=new X8.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:e,type:b_.Peek}),this.drain()),e.promise}length(){return this.throwIfDispose(),this.privList.length()}isDisposed(){return this.privSubscribers==null}drainAndDispose(e,t){return Y8(this,void 0,void 0,function*(){if(!this.isDisposed()&&!this.privIsDisposing){this.privDisposeReason=t,this.privIsDisposing=!0;const r=this.privSubscribers;if(r){for(;r.length()>0;)r.removeFirst().deferral.resolve(void 0);this.privSubscribers===r&&(this.privSubscribers=r)}for(const i of this.privDetachables)yield i.detach();if(this.privPromiseStore.length()>0&&e){const i=[];return this.privPromiseStore.toArray().forEach(s=>{i.push(s)}),Promise.all(i).finally(()=>{this.privSubscribers=null,this.privList.forEach(s=>{e(s)}),this.privList=null}).then()}else this.privSubscribers=null,this.privList=null}})}dispose(e){return Y8(this,void 0,void 0,function*(){yield this.drainAndDispose(null,e)})}drain(){if(!this.privIsDrainInProgress&&!this.privIsDisposing){this.privIsDrainInProgress=!0;const e=this.privSubscribers,t=this.privList;if(e&&t){for(;t.length()>0&&e.length()>0&&!this.privIsDisposing;){const r=e.removeFirst();if(r.type===b_.Peek)r.deferral.resolve(t.first());else{const i=t.removeFirst();r.deferral.resolve(i)}}this.privSubscribers===e&&(this.privSubscribers=e),this.privList===t&&(this.privList=t)}this.privIsDrainInProgress=!1}}throwIfDispose(){if(this.isDisposed())throw this.privDisposeReason?new yM.InvalidOperationError(this.privDisposeReason):new yM.ObjectDisposedError("Queue");if(this.privIsDisposing)throw new yM.InvalidOperationError("Queue disposing")}}qS.Queue=Kle;var gI={};Object.defineProperty(gI,"__esModule",{value:!0});gI.RawWebsocketMessage=void 0;const BE=yO,Kv=ro,Yle=Zl;class Xle{constructor(e,t,r){if(this.privPayload=null,!t)throw new Kv.ArgumentNullError("payload");if(e===BE.MessageType.Binary&&t.__proto__.constructor.name!=="ArrayBuffer")throw new Kv.InvalidOperationError("Payload must be ArrayBuffer");if(e===BE.MessageType.Text&&typeof t!="string")throw new Kv.InvalidOperationError("Payload must be a string");this.privMessageType=e,this.privPayload=t,this.privId=r||Yle.createNoDashGuid()}get messageType(){return this.privMessageType}get payload(){return this.privPayload}get textContent(){if(this.privMessageType===BE.MessageType.Binary)throw new Kv.InvalidOperationError("Not supported for binary message");return this.privPayload}get binaryContent(){if(this.privMessageType===BE.MessageType.Text)throw new Kv.InvalidOperationError("Not supported for text message");return this.privPayload}get id(){return this.privId}}gI.RawWebsocketMessage=Xle;var vI={};Object.defineProperty(vI,"__esModule",{value:!0});vI.RiffPcmEncoder=void 0;class Zle{constructor(e,t){this.privActualSampleRate=e,this.privDesiredSampleRate=t}encode(e){const t=this.downSampleAudioFrame(e,this.privActualSampleRate,this.privDesiredSampleRate);if(!t)return null;const r=t.length*2,i=new ArrayBuffer(r),s=new DataView(i);return this.floatTo16BitPCM(s,0,t),i}setString(e,t,r){for(let i=0;i<r.length;i++)e.setUint8(t+i,r.charCodeAt(i))}floatTo16BitPCM(e,t,r){for(let i=0;i<r.length;i++,t+=2){const s=Math.max(-1,Math.min(1,r[i]));e.setInt16(t,s<0?s*32768:s*32767,!0)}}downSampleAudioFrame(e,t,r){if(!e)return null;if(r===t||r>t)return e;const i=t/r,s=Math.round(e.length/i),o=new Float32Array(s);let a=0,l=0;for(;l<s;){const c=Math.round((l+1)*i);let u=0,d=0;for(;a<c&&a<e.length;)u+=e[a++],d++;o[l++]=u/d}return o}}vI.RiffPcmEncoder=Zle;var yI={},ece=Ze&&Ze.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};Object.defineProperty(yI,"__esModule",{value:!0});yI.Stream=void 0;const Z8=ro,tce=Zl,ek=qS;class nce{constructor(e){this.privIsWriteEnded=!1,this.privIsReadEnded=!1,this.privId=e||tce.createNoDashGuid(),this.privReaderQueue=new ek.Queue}get isClosed(){return this.privIsWriteEnded}get isReadEnded(){return this.privIsReadEnded}get id(){return this.privId}close(){this.privIsWriteEnded||(this.writeStreamChunk({buffer:null,isEnd:!0,timeReceived:Date.now()}),this.privIsWriteEnded=!0)}writeStreamChunk(e){if(this.throwIfClosed(),!this.privReaderQueue.isDisposed())try{this.privReaderQueue.enqueue(e)}catch{}}read(){if(this.privIsReadEnded)throw new Z8.InvalidOperationError("Stream read has already finished");return this.privReaderQueue.dequeue().then(e=>ece(this,void 0,void 0,function*(){return(e===void 0||e.isEnd)&&(yield this.privReaderQueue.dispose("End of stream reached")),e}))}readEnded(){this.privIsReadEnded||(this.privIsReadEnded=!0,this.privReaderQueue=new ek.Queue)}throwIfClosed(){if(this.privIsWriteEnded)throw new Z8.InvalidOperationError("Stream closed")}}yI.Stream=nce;var _I={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.TranslationStatus=void 0,function(e){e[e.Success=0]="Success",e[e.Error=1]="Error"}(n.TranslationStatus||(n.TranslationStatus={}))})(_I);var Yv={},tk;function rce(){if(tk)return Yv;tk=1,Object.defineProperty(Yv,"__esModule",{value:!0}),Yv.ChunkedArrayBufferStream=void 0;const n=pn();let e=class extends n.Stream{constructor(r,i){super(i),this.privTargetChunkSize=r,this.privNextBufferReadyBytes=0}writeStreamChunk(r){if(r.isEnd||this.privNextBufferReadyBytes===0&&r.buffer.byteLength===this.privTargetChunkSize){super.writeStreamChunk(r);return}let i=0;for(;i<r.buffer.byteLength;){this.privNextBufferToWrite===void 0&&(this.privNextBufferToWrite=new ArrayBuffer(this.privTargetChunkSize),this.privNextBufferStartTime=r.timeReceived);const s=Math.min(r.buffer.byteLength-i,this.privTargetChunkSize-this.privNextBufferReadyBytes),o=new Uint8Array(this.privNextBufferToWrite),a=new Uint8Array(r.buffer.slice(i,s+i));o.set(a,this.privNextBufferReadyBytes),this.privNextBufferReadyBytes+=s,i+=s,this.privNextBufferReadyBytes===this.privTargetChunkSize&&(super.writeStreamChunk({buffer:this.privNextBufferToWrite,isEnd:!1,timeReceived:this.privNextBufferStartTime}),this.privNextBufferReadyBytes=0,this.privNextBufferToWrite=void 0)}}close(){this.privNextBufferReadyBytes!==0&&!this.isClosed&&super.writeStreamChunk({buffer:this.privNextBufferToWrite.slice(0,this.privNextBufferReadyBytes),isEnd:!1,timeReceived:this.privNextBufferStartTime}),super.close()}};return Yv.ChunkedArrayBufferStream=e,Yv}var y$={};Object.defineProperty(y$,"__esModule",{value:!0});var SI={};Object.defineProperty(SI,"__esModule",{value:!0});SI.Timeout=void 0;class Io{static load(){const e=new Map([[0,()=>{}]]),t=new Map,i="data:text/javascript;base64,"+btoa(`!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return d}));const r=new Map,o=new Map,i=e=>{const t=r.get(e);if(void 0===t)throw new Error('There is no interval scheduled with the given id "'.concat(e,'".'));clearTimeout(t),r.delete(e)},u=e=>{const t=o.get(e);if(void 0===t)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(t),o.delete(e)},f=(e,t)=>{let n,r;if("performance"in self){const o=performance.now();n=o,r=e-Math.max(0,o-t)}else n=Date.now(),r=e;return{expected:n+r,remainingDelay:r}},c=(e,t,n,r)=>{const o="performance"in self?performance.now():Date.now();o>n?postMessage({id:null,method:"call",params:{timerId:t}}):e.set(t,setTimeout(c,n-o,e,t,n))},a=(e,t,n)=>{const{expected:o,remainingDelay:i}=f(e,n);r.set(t,setTimeout(c,i,r,t,o))},d=(e,t,n)=>{const{expected:r,remainingDelay:i}=f(e,n);o.set(t,setTimeout(c,i,o,t,r))}},function(e,t,n){"use strict";n.r(t);var r=n(2);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(3);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(4);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o);var f=n(5);for(var o in f)"default"!==o&&function(e){n.d(t,e,(function(){return f[e]}))}(o);var c=n(6);for(var o in c)"default"!==o&&function(e){n.d(t,e,(function(){return c[e]}))}(o);var a=n(7);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);var d=n(8);for(var o in d)"default"!==o&&function(e){n.d(t,e,(function(){return d[e]}))}(o);var s=n(9);for(var o in s)"default"!==o&&function(e){n.d(t,e,(function(){return s[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(11);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(12);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(13);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var u=n(10);for(var i in u)"default"!==i&&function(e){n.d(t,e,(function(){return u[e]}))}(i);addEventListener("message",({data:e})=>{try{if("clear"===e.method){const{id:t,params:{timerId:n}}=e;Object(r.b)(n),postMessage({error:null,id:t})}else{if("set"!==e.method)throw new Error('The given method "'.concat(e.method,'" is not supported'));{const{params:{delay:t,now:n,timerId:o}}=e;Object(r.d)(t,o,n)}}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}})}]);`),s=new Worker(i);return s.addEventListener("message",({data:l})=>{if(Io.isCallNotification(l)){const{params:{timerId:c}}=l,u=e.get(c);if(typeof u=="number"){const d=t.get(u);if(d===void 0||d!==c)throw new Error("The timer is in an undefined state.")}else if(typeof u<"u")u(),e.delete(c);else throw new Error("The timer is in an undefined state.")}else if(Io.isClearResponse(l)){const{id:c}=l,u=t.get(c);if(u===void 0)throw new Error("The timer is in an undefined state.");t.delete(c),e.delete(u)}else{const{error:{message:c}}=l;throw new Error(c)}}),{clearTimeout:l=>{const c=Math.random();t.set(c,l),e.set(l,c),s.postMessage({id:c,method:"clear",params:{timerId:l}})},setTimeout:(l,c)=>{const u=Math.random();return e.set(u,l),s.postMessage({id:null,method:"set",params:{delay:c,now:performance.now(),timerId:u}}),u}}}static loadWorkerTimers(){return()=>(Io.workerTimers!==null||(Io.workerTimers=Io.load()),Io.workerTimers)}static isCallNotification(e){return e.method!==void 0&&e.method==="call"}static isClearResponse(e){return e.error===null&&typeof e.id=="number"}}SI.Timeout=Io;Io.workerTimers=null;Io.clearTimeout=n=>Io.timers().clearTimeout(n);Io.setTimeout=(n,e)=>Io.timers().setTimeout(n,e);Io.timers=Io.loadWorkerTimers();var cr={};Object.defineProperty(cr,"__esModule",{value:!0});cr.OCSPCacheUpdateErrorEvent=cr.OCSPResponseRetrievedEvent=cr.OCSPCacheFetchErrorEvent=cr.OCSPVerificationFailedEvent=cr.OCSPCacheHitEvent=cr.OCSPCacheEntryNeedsRefreshEvent=cr.OCSPCacheEntryExpiredEvent=cr.OCSPWSUpgradeStartedEvent=cr.OCSPStapleReceivedEvent=cr.OCSPCacheUpdateCompleteEvent=cr.OCSPDiskCacheStoreEvent=cr.OCSPMemoryCacheStoreEvent=cr.OCSPCacheUpdateNeededEvent=cr.OCSPDiskCacheHitEvent=cr.OCSPCacheMissEvent=cr.OCSPMemoryCacheHitEvent=cr.OCSPEvent=void 0;const oo=cv;class ao extends oo.PlatformEvent{constructor(e,t,r){super(e,t),this.privSignature=r}}cr.OCSPEvent=ao;class ice extends ao{constructor(e){super("OCSPMemoryCacheHitEvent",oo.EventType.Debug,e)}}cr.OCSPMemoryCacheHitEvent=ice;class sce extends ao{constructor(e){super("OCSPCacheMissEvent",oo.EventType.Debug,e)}}cr.OCSPCacheMissEvent=sce;class oce extends ao{constructor(e){super("OCSPDiskCacheHitEvent",oo.EventType.Debug,e)}}cr.OCSPDiskCacheHitEvent=oce;class ace extends ao{constructor(e){super("OCSPCacheUpdateNeededEvent",oo.EventType.Debug,e)}}cr.OCSPCacheUpdateNeededEvent=ace;class lce extends ao{constructor(e){super("OCSPMemoryCacheStoreEvent",oo.EventType.Debug,e)}}cr.OCSPMemoryCacheStoreEvent=lce;class cce extends ao{constructor(e){super("OCSPDiskCacheStoreEvent",oo.EventType.Debug,e)}}cr.OCSPDiskCacheStoreEvent=cce;class uce extends ao{constructor(e){super("OCSPCacheUpdateCompleteEvent",oo.EventType.Debug,e)}}cr.OCSPCacheUpdateCompleteEvent=uce;class dce extends ao{constructor(){super("OCSPStapleReceivedEvent",oo.EventType.Debug,"")}}cr.OCSPStapleReceivedEvent=dce;class hce extends ao{constructor(e){super("OCSPWSUpgradeStartedEvent",oo.EventType.Debug,e)}}cr.OCSPWSUpgradeStartedEvent=hce;class fce extends ao{constructor(e,t){super("OCSPCacheEntryExpiredEvent",oo.EventType.Debug,e),this.privExpireTime=t}}cr.OCSPCacheEntryExpiredEvent=fce;class pce extends ao{constructor(e,t,r){super("OCSPCacheEntryNeedsRefreshEvent",oo.EventType.Debug,e),this.privExpireTime=r,this.privStartTime=t}}cr.OCSPCacheEntryNeedsRefreshEvent=pce;class mce extends ao{constructor(e,t,r){super("OCSPCacheHitEvent",oo.EventType.Debug,e),this.privExpireTime=r,this.privExpireTimeString=new Date(r).toLocaleDateString(),this.privStartTime=t,this.privStartTimeString=new Date(t).toLocaleTimeString()}}cr.OCSPCacheHitEvent=mce;class gce extends ao{constructor(e,t){super("OCSPVerificationFailedEvent",oo.EventType.Debug,e),this.privError=t}}cr.OCSPVerificationFailedEvent=gce;class vce extends ao{constructor(e,t){super("OCSPCacheFetchErrorEvent",oo.EventType.Debug,e),this.privError=t}}cr.OCSPCacheFetchErrorEvent=vce;class yce extends ao{constructor(e){super("OCSPResponseRetrievedEvent",oo.EventType.Debug,e)}}cr.OCSPResponseRetrievedEvent=yce;class _ce extends ao{constructor(e,t){super("OCSPCacheUpdateErrorEvent",oo.EventType.Debug,e),this.privError=t}}cr.OCSPCacheUpdateErrorEvent=_ce;var Xv={},nk;function Sce(){if(nk)return Xv;nk=1,Object.defineProperty(Xv,"__esModule",{value:!0}),Xv.BackgroundEvent=void 0;const n=pn();class e extends n.PlatformEvent{constructor(r){super("BackgroundEvent",n.EventType.Error),this.privError=r}get error(){return this.privError}}return Xv.BackgroundEvent=e,Xv}var rk;function pn(){return rk||(rk=1,function(n){var e=Ze&&Ze.__createBinding||(Object.create?function(i,s,o,a){a===void 0&&(a=o),Object.defineProperty(i,a,{enumerable:!0,get:function(){return s[o]}})}:function(i,s,o,a){a===void 0&&(a=o),i[a]=s[o]}),t=Ze&&Ze.__exportStar||function(i,s){for(var o in i)o!=="default"&&!s.hasOwnProperty(o)&&e(s,i,o)};Object.defineProperty(n,"__esModule",{value:!0}),t(Ui,n),t(fs,n),t(yO,n),t(fI,n),t(pI,n),t(bm,n),t(ro,n),t(mI,n),t($S,n),t(Zl,n),t(l$,n),t(c$,n),t(u$,n),t(d$,n),t(h$,n),t(f$,n),t(p$,n),t(m$,n),t(g$,n),t(v$,n),t(WS,n),t(cv,n),t(_O,n),t(qS,n),t(gI,n),t(vI,n),t(yI,n);var r=_I;Object.defineProperty(n,"TranslationStatus",{enumerable:!0,get:function(){return r.TranslationStatus}}),t(rce(),n),t(y$,n),t(SI,n),t(cr,n),t(Sce(),n)}(fM)),fM}var $s={};Object.defineProperty($s,"__esModule",{value:!0});$s.HeaderNames=void 0;class Qc{}$s.HeaderNames=Qc;Qc.AuthKey="Ocp-Apim-Subscription-Key";Qc.Authorization="Authorization";Qc.SpIDAuthKey="Apim-Subscription-Id";Qc.ConnectionId="X-ConnectionId";Qc.ContentType="Content-Type";Qc.CustomCommandsAppId="X-CommandsAppId";Qc.Path="Path";Qc.RequestId="X-RequestId";Qc.RequestStreamId="X-StreamId";Qc.RequestTimestamp="X-Timestamp";var dv={};Object.defineProperty(dv,"__esModule",{value:!0});dv.AuthInfo=void 0;class Ace{constructor(e,t){this.privHeaderName=e,this.privToken=t}get headerName(){return this.privHeaderName}get token(){return this.privToken}}dv.AuthInfo=Ace;Object.defineProperty(eI,"__esModule",{value:!0});eI.CognitiveSubscriptionKeyAuthentication=void 0;const Ece=pn(),Cce=$s,wce=dv;class Tce{constructor(e){if(!e)throw new Ece.ArgumentNullError("subscriptionKey");this.privAuthInfo=new wce.AuthInfo(Cce.HeaderNames.AuthKey,e)}fetch(e){return Promise.resolve(this.privAuthInfo)}fetchOnExpiry(e){return Promise.resolve(this.privAuthInfo)}}eI.CognitiveSubscriptionKeyAuthentication=Tce;var AI={};Object.defineProperty(AI,"__esModule",{value:!0});AI.CognitiveTokenAuthentication=void 0;const ik=pn(),sk=dv,ok=$s;class tS{constructor(e,t){if(!e)throw new ik.ArgumentNullError("fetchCallback");if(!t)throw new ik.ArgumentNullError("fetchOnExpiryCallback");this.privFetchCallback=e,this.privFetchOnExpiryCallback=t}fetch(e){return this.privFetchCallback(e).then(t=>new sk.AuthInfo(ok.HeaderNames.Authorization,t===void 0?void 0:tS.privTokenPrefix+t))}fetchOnExpiry(e){return this.privFetchOnExpiryCallback(e).then(t=>new sk.AuthInfo(ok.HeaderNames.Authorization,t===void 0?void 0:tS.privTokenPrefix+t))}}AI.CognitiveTokenAuthentication=tS;tS.privTokenPrefix="Bearer ";var _$={};Object.defineProperty(_$,"__esModule",{value:!0});var S$={};Object.defineProperty(S$,"__esModule",{value:!0});var Zv={},SM={},EI={};const xce={},Ice=Object.freeze(Object.defineProperty({__proto__:null,default:xce},Symbol.toStringTag,{value:"Module"})),$m=$c(Ice);var SO={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.LogLevel=void 0;const e=pn();Object.defineProperty(n,"LogLevel",{enumerable:!0,get:function(){return e.EventType}})})(SO);var In={};Object.defineProperty(In,"__esModule",{value:!0});In.Contracts=void 0;class rf{static throwIfNullOrUndefined(e,t){if(e==null)throw new Error("throwIfNullOrUndefined:"+t)}static throwIfNull(e,t){if(e===null)throw new Error("throwIfNull:"+t)}static throwIfNullOrWhitespace(e,t){if(rf.throwIfNullOrUndefined(e,t),(""+e).trim().length<1)throw new Error("throwIfNullOrWhitespace:"+t)}static throwIfNullOrTooLong(e,t,r){if(rf.throwIfNullOrUndefined(e,t),(""+e).length>r)throw new Error("throwIfNullOrTooLong:"+t+" (more than "+r.toString()+" characters)")}static throwIfNullOrTooShort(e,t,r){if(rf.throwIfNullOrUndefined(e,t),(""+e).length<r)throw new Error("throwIfNullOrTooShort:"+t+" (less than "+r.toString()+" characters)")}static throwIfDisposed(e){if(e)throw new Error("the object is already disposed")}static throwIfArrayEmptyOrWhitespace(e,t){if(rf.throwIfNullOrUndefined(e,t),e.length===0)throw new Error("throwIfArrayEmptyOrWhitespace:"+t);for(const r of e)rf.throwIfNullOrWhitespace(r,t)}static throwIfFileDoesNotExist(e,t){rf.throwIfNullOrWhitespace(e,t)}static throwIfNotUndefined(e,t){if(e!==void 0)throw new Error("throwIfNotUndefined:"+t)}}In.Contracts=rf;var bce=Ze&&Ze.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t),Object.defineProperty(n,r,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Mce=Ze&&Ze.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),Rce=Ze&&Ze.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.hasOwnProperty.call(n,t)&&bce(e,n,t);return Mce(e,n),e};Object.defineProperty(EI,"__esModule",{value:!0});EI.ConsoleLoggingListener=void 0;const ak=Rce($m),e1=SO,Nce=In;class Pce{constructor(e=e1.LogLevel.None){this.privLogPath=void 0,this.privEnableConsoleOutput=!0,this.privLogLevelFilter=e}set logPath(e){Nce.Contracts.throwIfNullOrUndefined(ak.openSync,`
File System access not available`),this.privLogPath=e}set enableConsoleOutput(e){this.privEnableConsoleOutput=e}onEvent(e){if(e.eventType>=this.privLogLevelFilter){const t=this.toString(e);if(this.privLogPath&&ak.writeFileSync(this.privLogPath,t+`
`,{flag:"a+"}),this.privEnableConsoleOutput)switch(e.eventType){case e1.LogLevel.Debug:console.debug(t);break;case e1.LogLevel.Info:console.info(t);break;case e1.LogLevel.Warning:console.warn(t);break;case e1.LogLevel.Error:console.error(t);break;default:console.log(t);break}}}toString(e){const t=[`${e.eventTime}`,`${e.name}`],r=e;for(const i in r)if(i&&e.hasOwnProperty(i)&&i!=="eventTime"&&i!=="eventType"&&i!=="eventId"&&i!=="name"&&i!=="constructor"){const s=r[i];let o="<NULL>";s!=null&&(typeof s=="number"||typeof s=="string"?o=s.toString():o=JSON.stringify(s)),t.push(`${i}: ${o}`)}return t.join(" | ")}}EI.ConsoleLoggingListener=Pce;var A$={};Object.defineProperty(A$,"__esModule",{value:!0});var AM={},Yf={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.AudioStreamFormatImpl=n.AudioStreamFormat=n.AudioFormatTag=void 0;var e;(function(i){i[i.PCM=1]="PCM",i[i.MuLaw=2]="MuLaw",i[i.Siren=3]="Siren",i[i.MP3=4]="MP3",i[i.SILKSkype=5]="SILKSkype",i[i.OGG_OPUS=6]="OGG_OPUS",i[i.WEBM_OPUS=7]="WEBM_OPUS",i[i.ALaw=8]="ALaw",i[i.FLAC=9]="FLAC",i[i.OPUS=10]="OPUS"})(e=n.AudioFormatTag||(n.AudioFormatTag={}));class t{static getDefaultInputFormat(){return r.getDefaultInputFormat()}static getWaveFormat(s,o,a,l){return new r(s,o,a,l)}static getWaveFormatPCM(s,o,a){return new r(s,o,a)}}n.AudioStreamFormat=t;class r extends t{constructor(s=16e3,o=16,a=1,l=e.PCM){super();let c=!0;switch(l){case e.PCM:this.formatTag=1;break;case e.ALaw:this.formatTag=6;break;case e.MuLaw:this.formatTag=7;break;default:c=!1}if(this.bitsPerSample=o,this.samplesPerSec=s,this.channels=a,this.avgBytesPerSec=this.samplesPerSec*this.channels*(this.bitsPerSample/8),this.blockAlign=this.channels*Math.max(this.bitsPerSample,8),c){this.privHeader=new ArrayBuffer(44);const u=new DataView(this.privHeader);this.setString(u,0,"RIFF"),u.setUint32(4,0,!0),this.setString(u,8,"WAVEfmt "),u.setUint32(16,16,!0),u.setUint16(20,this.formatTag,!0),u.setUint16(22,this.channels,!0),u.setUint32(24,this.samplesPerSec,!0),u.setUint32(28,this.avgBytesPerSec,!0),u.setUint16(32,this.channels*(this.bitsPerSample/8),!0),u.setUint16(34,this.bitsPerSample,!0),this.setString(u,36,"data"),u.setUint32(40,0,!0)}}static getDefaultInputFormat(){return new r}static getAudioContext(s){const o=window.AudioContext||window.webkitAudioContext||!1;if(o)return s!==void 0&&navigator.mediaDevices.getSupportedConstraints().sampleRate?new o({sampleRate:s}):new o;throw new Error("Browser does not support Web Audio API (AudioContext is not available).")}close(){}get header(){return this.privHeader}setString(s,o,a){for(let l=0;l<a.length;l++)s.setUint8(o+l,a.charCodeAt(l))}}n.AudioStreamFormatImpl=r})(Yf);var lk;function Oce(){return lk||(lk=1,function(n){var e=Ze&&Ze.__awaiter||function(o,a,l,c){function u(d){return d instanceof l?d:new l(function(h){h(d)})}return new(l||(l=Promise))(function(d,h){function f(v){try{g(c.next(v))}catch(y){h(y)}}function m(v){try{g(c.throw(v))}catch(y){h(y)}}function g(v){v.done?d(v.value):u(v.value).then(f,m)}g((c=c.apply(o,a||[])).next())})};Object.defineProperty(n,"__esModule",{value:!0}),n.MicAudioSource=n.AudioWorkletSourceURLPropertyName=void 0;const t=Wt(),r=pn(),i=Yf;n.AudioWorkletSourceURLPropertyName="MICROPHONE-WorkletSourceUrl";class s{constructor(a,l,c,u){this.privRecorder=a,this.deviceId=l,this.privStreams={},this.privOutputChunkSize=s.AUDIOFORMAT.avgBytesPerSec/10,this.privId=c||r.createNoDashGuid(),this.privEvents=new r.EventSource,this.privMediaStream=u||null,this.privIsClosing=!1}get format(){return Promise.resolve(s.AUDIOFORMAT)}turnOn(){if(this.privInitializeDeferral)return this.privInitializeDeferral.promise;this.privInitializeDeferral=new r.Deferred;try{this.createAudioContext()}catch(c){if(c instanceof Error){const u=c;this.privInitializeDeferral.reject(u.name+": "+u.message)}else this.privInitializeDeferral.reject(c);return this.privInitializeDeferral.promise}const a=window.navigator;let l=a.getUserMedia||a.webkitGetUserMedia||a.mozGetUserMedia||a.msGetUserMedia;if(a.mediaDevices&&(l=(c,u,d)=>{a.mediaDevices.getUserMedia(c).then(u).catch(d)}),l){const c=()=>{this.onEvent(new r.AudioSourceInitializingEvent(this.privId)),this.privMediaStream&&this.privMediaStream.active?(this.onEvent(new r.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()):l({audio:this.deviceId?{deviceId:this.deviceId}:!0,video:!1},u=>{this.privMediaStream=u,this.onEvent(new r.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()},u=>{const d=`Error occurred during microphone initialization: ${u}`;this.privInitializeDeferral.reject(d),this.onEvent(new r.AudioSourceErrorEvent(this.privId,d))})};this.privContext.state==="suspended"?this.privContext.resume().then(c).catch(u=>{this.privInitializeDeferral.reject(`Failed to initialize audio context: ${u}`)}):c()}else{const c="Browser does not support getUserMedia.";this.privInitializeDeferral.reject(c),this.onEvent(new r.AudioSourceErrorEvent(c,""))}return this.privInitializeDeferral.promise}id(){return this.privId}attach(a){return this.onEvent(new r.AudioStreamNodeAttachingEvent(this.privId,a)),this.listen(a).then(l=>(this.onEvent(new r.AudioStreamNodeAttachedEvent(this.privId,a)),{detach:()=>e(this,void 0,void 0,function*(){return l.readEnded(),delete this.privStreams[a],this.onEvent(new r.AudioStreamNodeDetachedEvent(this.privId,a)),this.turnOff()}),id:()=>a,read:()=>l.read()}))}detach(a){a&&this.privStreams[a]&&(this.privStreams[a].close(),delete this.privStreams[a],this.onEvent(new r.AudioStreamNodeDetachedEvent(this.privId,a)))}turnOff(){return e(this,void 0,void 0,function*(){for(const a in this.privStreams)if(a){const l=this.privStreams[a];l&&l.close()}this.onEvent(new r.AudioSourceOffEvent(this.privId)),this.privInitializeDeferral&&(yield this.privInitializeDeferral,this.privInitializeDeferral=null),yield this.destroyAudioContext()})}get events(){return this.privEvents}get deviceInfo(){return this.getMicrophoneLabel().then(a=>({bitspersample:s.AUDIOFORMAT.bitsPerSample,channelcount:s.AUDIOFORMAT.channels,connectivity:t.connectivity.Unknown,manufacturer:"Speech SDK",model:a,samplerate:s.AUDIOFORMAT.samplesPerSec,type:t.type.Microphones}))}setProperty(a,l){if(a===n.AudioWorkletSourceURLPropertyName)this.privRecorder.setWorkletUrl(l);else throw new Error("Property '"+a+"' is not supported on Microphone.")}getMicrophoneLabel(){const a="microphone";if(this.privMicrophoneLabel!==void 0)return Promise.resolve(this.privMicrophoneLabel);if(this.privMediaStream===void 0||!this.privMediaStream.active)return Promise.resolve(a);this.privMicrophoneLabel=a;const l=this.privMediaStream.getTracks()[0].getSettings().deviceId;if(l===void 0)return Promise.resolve(this.privMicrophoneLabel);const c=new r.Deferred;return navigator.mediaDevices.enumerateDevices().then(u=>{for(const d of u)if(d.deviceId===l){this.privMicrophoneLabel=d.label;break}c.resolve(this.privMicrophoneLabel)},()=>c.resolve(this.privMicrophoneLabel)),c.promise}listen(a){return e(this,void 0,void 0,function*(){yield this.turnOn();const l=new r.ChunkedArrayBufferStream(this.privOutputChunkSize,a);this.privStreams[a]=l;try{this.privRecorder.record(this.privContext,this.privMediaStream,l)}catch(u){throw this.onEvent(new r.AudioStreamNodeErrorEvent(this.privId,a,u)),u}return l})}onEvent(a){this.privEvents.onEvent(a),r.Events.instance.onEvent(a)}createAudioContext(){this.privContext||(this.privContext=i.AudioStreamFormatImpl.getAudioContext(s.AUDIOFORMAT.samplesPerSec))}destroyAudioContext(){return e(this,void 0,void 0,function*(){if(!this.privContext)return;this.privRecorder.releaseMediaResources(this.privContext);let a=!1;"close"in this.privContext&&(a=!0),a?this.privIsClosing||(this.privIsClosing=!0,yield this.privContext.close(),this.privContext=null,this.privIsClosing=!1):this.privContext!==null&&this.privContext.state==="running"&&(yield this.privContext.suspend())})}}n.MicAudioSource=s,s.AUDIOFORMAT=i.AudioStreamFormat.getDefaultInputFormat()}(AM)),AM}var t1={},ck;function Dce(){if(ck)return t1;ck=1;var n=Ze&&Ze.__awaiter||function(s,o,a,l){function c(u){return u instanceof a?u:new a(function(d){d(u)})}return new(a||(a=Promise))(function(u,d){function h(g){try{m(l.next(g))}catch(v){d(v)}}function f(g){try{m(l.throw(g))}catch(v){d(v)}}function m(g){g.done?u(g.value):c(g.value).then(h,f)}m((l=l.apply(s,o||[])).next())})};Object.defineProperty(t1,"__esModule",{value:!0}),t1.FileAudioSource=void 0;const e=Wt(),t=pn(),r=Yf;let i=class{constructor(o,a,l){this.privStreams={},this.privHeaderEnd=44,this.privId=l||t.createNoDashGuid(),this.privEvents=new t.EventSource,this.privSource=o,typeof window<"u"&&typeof Blob<"u"&&this.privSource instanceof Blob?this.privFilename=o.name:this.privFilename=a||"unknown.wav",this.privAudioFormatPromise=this.readHeader()}get format(){return this.privAudioFormatPromise}turnOn(){if(this.privFilename.lastIndexOf(".wav")!==this.privFilename.length-4){const o=this.privFilename+" is not supported. Only WAVE files are allowed at the moment.";return this.onEvent(new t.AudioSourceErrorEvent(o,"")),Promise.reject(o)}this.onEvent(new t.AudioSourceInitializingEvent(this.privId)),this.onEvent(new t.AudioSourceReadyEvent(this.privId))}id(){return this.privId}attach(o){return n(this,void 0,void 0,function*(){this.onEvent(new t.AudioStreamNodeAttachingEvent(this.privId,o));const a=yield this.upload(o);return this.onEvent(new t.AudioStreamNodeAttachedEvent(this.privId,o)),Promise.resolve({detach:()=>n(this,void 0,void 0,function*(){a.readEnded(),delete this.privStreams[o],this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,o)),yield this.turnOff()}),id:()=>o,read:()=>a.read()})})}detach(o){o&&this.privStreams[o]&&(this.privStreams[o].close(),delete this.privStreams[o],this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,o)))}turnOff(){for(const o in this.privStreams)if(o){const a=this.privStreams[o];a&&!a.isClosed&&a.close()}return this.onEvent(new t.AudioSourceOffEvent(this.privId)),Promise.resolve()}get events(){return this.privEvents}get deviceInfo(){return this.privAudioFormatPromise.then(o=>Promise.resolve({bitspersample:o.bitsPerSample,channelcount:o.channels,connectivity:e.connectivity.Unknown,manufacturer:"Speech SDK",model:"File",samplerate:o.samplesPerSec,type:e.type.File}))}readHeader(){const a=this.privSource.slice(0,4296),l=new t.Deferred,c=u=>{const d=new DataView(u),h=A=>String.fromCharCode(d.getUint8(A),d.getUint8(A+1),d.getUint8(A+2),d.getUint8(A+3));if(h(0)!=="RIFF"){l.reject("Invalid WAV header in file, RIFF was not found");return}if(h(8)!=="WAVE"||h(12)!=="fmt "){l.reject("Invalid WAV header in file, WAVEfmt was not found");return}const f=d.getInt32(16,!0),m=d.getUint16(22,!0),g=d.getUint32(24,!0),v=d.getUint16(34,!0);let y=36+Math.max(f-16,0);for(;h(y)!=="data";y+=2)if(y>4296-8){l.reject("Invalid WAV header in file, data block was not found");return}this.privHeaderEnd=y+8,l.resolve(r.AudioStreamFormat.getWaveFormatPCM(g,v,m))};if(typeof window<"u"&&typeof Blob<"u"&&a instanceof Blob){const u=new FileReader;u.onload=d=>{const h=d.target.result;c(h)},u.readAsArrayBuffer(a)}else{const u=a;c(u.buffer.slice(u.byteOffset,u.byteOffset+u.byteLength))}return l.promise}upload(o){return n(this,void 0,void 0,function*(){const a=l=>{const c=`Error occurred while processing '${this.privFilename}'. ${l}`;throw this.onEvent(new t.AudioStreamNodeErrorEvent(this.privId,o,c)),new Error(c)};try{yield this.turnOn();const l=yield this.privAudioFormatPromise,c=new t.ChunkedArrayBufferStream(l.avgBytesPerSec/10,o);this.privStreams[o]=c;const u=this.privSource.slice(this.privHeaderEnd),d=h=>{c.isClosed||(c.writeStreamChunk({buffer:h,isEnd:!1,timeReceived:Date.now()}),c.close())};if(typeof window<"u"&&typeof Blob<"u"&&u instanceof Blob){const h=new FileReader;h.onerror=f=>a(f.toString()),h.onload=f=>{const m=f.target.result;d(m)},h.readAsArrayBuffer(u)}else{const h=u;d(h.buffer.slice(h.byteOffset,h.byteOffset+h.byteLength))}return c}catch(l){a(l)}})}onEvent(o){this.privEvents.onEvent(o),t.Events.instance.onEvent(o)}};return t1.FileAudioSource=i,t1}var CI={};Object.defineProperty(CI,"__esModule",{value:!0});CI.PcmRecorder=void 0;const Lce=pn();class kce{constructor(e){this.privStopInputOnRelease=e}record(e,t,r){const s=new Lce.RiffPcmEncoder(e.sampleRate,16e3),o=e.createMediaStreamSource(t),a=()=>{const c=(()=>{let u=0;try{return e.createScriptProcessor(u,1,1)}catch{u=2048;let h=e.sampleRate;for(;u<16384&&h>=32e3;)u<<=1,h>>=1;return e.createScriptProcessor(u,1,1)}})();c.onaudioprocess=u=>{const d=u.inputBuffer.getChannelData(0);if(r&&!r.isClosed){const h=s.encode(d);h&&r.writeStreamChunk({buffer:h,isEnd:!1,timeReceived:Date.now()})}},o.connect(c),c.connect(e.destination),this.privMediaResources={scriptProcessorNode:c,source:o,stream:t}},l=!!this.privSpeechProcessorScript&&this.privSpeechProcessorScript.toLowerCase()==="ignore";if(e.audioWorklet&&!l){if(!this.privSpeechProcessorScript){const c=`class SP extends AudioWorkletProcessor {
                    constructor(options) {
                      super(options);
                    }
                    process(inputs, outputs) {
                      const input = inputs[0];
                      const output = [];
                      for (let channel = 0; channel < input.length; channel += 1) {
                        output[channel] = input[channel];
                      }
                      this.port.postMessage(output[0]);
                      return true;
                    }
                  }
                  registerProcessor('speech-processor', SP);`,u=new Blob([c],{type:"application/javascript; charset=utf-8"});this.privSpeechProcessorScript=URL.createObjectURL(u)}e.audioWorklet.addModule(this.privSpeechProcessorScript).then(()=>{const c=new AudioWorkletNode(e,"speech-processor");c.port.onmessage=u=>{const d=u.data;if(r&&!r.isClosed){const h=s.encode(d);h&&r.writeStreamChunk({buffer:h,isEnd:!1,timeReceived:Date.now()})}},o.connect(c),c.connect(e.destination),this.privMediaResources={scriptProcessorNode:c,source:o,stream:t}}).catch(()=>{a()})}else try{a()}catch(c){throw new Error(`Unable to start audio worklet node for PCMRecorder: ${c}`)}}releaseMediaResources(e){this.privMediaResources&&(this.privMediaResources.scriptProcessorNode&&(this.privMediaResources.scriptProcessorNode.disconnect(e.destination),this.privMediaResources.scriptProcessorNode=null),this.privMediaResources.source&&(this.privMediaResources.source.disconnect(),this.privStopInputOnRelease&&this.privMediaResources.stream.getTracks().forEach(t=>t.stop()),this.privMediaResources.source=null))}setWorkletUrl(e){this.privSpeechProcessorScript=e}}CI.PcmRecorder=kce;var wI={},QS={},Bce=Ze&&Ze.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t),Object.defineProperty(n,r,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Fce=Ze&&Ze.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),E$=Ze&&Ze.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.hasOwnProperty.call(n,t)&&Bce(e,n,t);return Fce(e,n),e},uk=Ze&&Ze.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})},AO=Ze&&Ze.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(QS,"__esModule",{value:!0});QS.WebsocketMessageAdapter=void 0;const zce=E$($m),Uce=E$($m),jce=AO($m),Gce=AO($m),Hce=AO($m),Vce=$s,Hn=pn();class nS{constructor(e,t,r,i,s,o){if(!e)throw new Hn.ArgumentNullError("uri");if(!r)throw new Hn.ArgumentNullError("messageFormatter");this.proxyInfo=i,this.privConnectionEvents=new Hn.EventSource,this.privConnectionId=t,this.privMessageFormatter=r,this.privConnectionState=Hn.ConnectionState.None,this.privUri=e,this.privHeaders=s,this.privEnableCompression=o,this.privHeaders[Vce.HeaderNames.ConnectionId]=this.privConnectionId,this.privLastErrorReceived=""}get state(){return this.privConnectionState}open(){if(this.privConnectionState===Hn.ConnectionState.Disconnected)return Promise.reject(`Cannot open a connection that is in ${this.privConnectionState} state`);if(this.privConnectionEstablishDeferral)return this.privConnectionEstablishDeferral.promise;this.privConnectionEstablishDeferral=new Hn.Deferred,this.privCertificateValidatedDeferral=new Hn.Deferred,this.privConnectionState=Hn.ConnectionState.Connecting;try{if(typeof WebSocket<"u"&&!nS.forceNpmWebSocket)this.privCertificateValidatedDeferral.resolve(),this.privWebsocketClient=new WebSocket(this.privUri);else{const e={headers:this.privHeaders,perMessageDeflate:this.privEnableCompression};this.privCertificateValidatedDeferral.resolve(),e.agent=this.getAgent();let r=new URL(this.privUri).protocol;(r==null?void 0:r.toLocaleLowerCase())==="wss:"?r="https:":(r==null?void 0:r.toLocaleLowerCase())==="ws:"&&(r="http:"),e.agent.protocol=r,this.privWebsocketClient=new Hce.default(this.privUri,e)}this.privWebsocketClient.binaryType="arraybuffer",this.privReceivingMessageQueue=new Hn.Queue,this.privDisconnectDeferral=new Hn.Deferred,this.privSendMessageQueue=new Hn.Queue,this.processSendQueue().catch(e=>{Hn.Events.instance.onEvent(new Hn.BackgroundEvent(e))})}catch(e){return this.privConnectionEstablishDeferral.resolve(new Hn.ConnectionOpenResponse(500,e)),this.privConnectionEstablishDeferral.promise}return this.onEvent(new Hn.ConnectionStartEvent(this.privConnectionId,this.privUri)),this.privWebsocketClient.onopen=()=>{this.privCertificateValidatedDeferral.promise.then(()=>{this.privConnectionState=Hn.ConnectionState.Connected,this.onEvent(new Hn.ConnectionEstablishedEvent(this.privConnectionId)),this.privConnectionEstablishDeferral.resolve(new Hn.ConnectionOpenResponse(200,""))},e=>{this.privConnectionEstablishDeferral.reject(e)})},this.privWebsocketClient.onerror=e=>{this.onEvent(new Hn.ConnectionErrorEvent(this.privConnectionId,e.message,e.type)),this.privLastErrorReceived=e.message},this.privWebsocketClient.onclose=e=>{this.privConnectionState===Hn.ConnectionState.Connecting?(this.privConnectionState=Hn.ConnectionState.Disconnected,this.privConnectionEstablishDeferral.resolve(new Hn.ConnectionOpenResponse(e.code,e.reason+" "+this.privLastErrorReceived))):(this.privConnectionState=Hn.ConnectionState.Disconnected,this.privWebsocketClient=null,this.onEvent(new Hn.ConnectionClosedEvent(this.privConnectionId,e.code,e.reason))),this.onClose(e.code,e.reason).catch(t=>{Hn.Events.instance.onEvent(new Hn.BackgroundEvent(t))})},this.privWebsocketClient.onmessage=e=>{const t=new Date().toISOString();if(this.privConnectionState===Hn.ConnectionState.Connected){const r=new Hn.Deferred;if(this.privReceivingMessageQueue.enqueueFromPromise(r.promise),e.data instanceof ArrayBuffer){const i=new Hn.RawWebsocketMessage(Hn.MessageType.Binary,e.data);this.privMessageFormatter.toConnectionMessage(i).then(s=>{this.onEvent(new Hn.ConnectionMessageReceivedEvent(this.privConnectionId,t,s)),r.resolve(s)},s=>{r.reject(`Invalid binary message format. Error: ${s}`)})}else{const i=new Hn.RawWebsocketMessage(Hn.MessageType.Text,e.data);this.privMessageFormatter.toConnectionMessage(i).then(s=>{this.onEvent(new Hn.ConnectionMessageReceivedEvent(this.privConnectionId,t,s)),r.resolve(s)},s=>{r.reject(`Invalid text message format. Error: ${s}`)})}}},this.privConnectionEstablishDeferral.promise}send(e){if(this.privConnectionState!==Hn.ConnectionState.Connected)return Promise.reject(`Cannot send on connection that is in ${Hn.ConnectionState[this.privConnectionState]} state`);const t=new Hn.Deferred,r=new Hn.Deferred;return this.privSendMessageQueue.enqueueFromPromise(r.promise),this.privMessageFormatter.fromConnectionMessage(e).then(i=>{r.resolve({Message:e,RawWebsocketMessage:i,sendStatusDeferral:t})},i=>{r.reject(`Error formatting the message. ${i}`)}),t.promise}read(){return this.privConnectionState!==Hn.ConnectionState.Connected?Promise.reject(`Cannot read on connection that is in ${this.privConnectionState} state`):this.privReceivingMessageQueue.dequeue()}close(e){if(this.privWebsocketClient)this.privConnectionState!==Hn.ConnectionState.Disconnected&&this.privWebsocketClient.close(1e3,e||"Normal closure by client");else return Promise.resolve();return this.privDisconnectDeferral.promise}get events(){return this.privConnectionEvents}sendRawMessage(e){try{if(!e)return Promise.resolve();if(this.onEvent(new Hn.ConnectionMessageSentEvent(this.privConnectionId,new Date().toISOString(),e.Message)),this.isWebsocketOpen)this.privWebsocketClient.send(e.RawWebsocketMessage.payload);else return Promise.reject("websocket send error: Websocket not ready "+this.privConnectionId+" "+e.Message.id+" "+new Error().stack);return Promise.resolve()}catch(t){return Promise.reject(`websocket send error: ${t}`)}}onClose(e,t){return uk(this,void 0,void 0,function*(){const r=`Connection closed. ${e}: ${t}`;this.privConnectionState=Hn.ConnectionState.Disconnected,this.privDisconnectDeferral.resolve(),yield this.privReceivingMessageQueue.drainAndDispose(()=>{},r),yield this.privSendMessageQueue.drainAndDispose(i=>{i.sendStatusDeferral.reject(r)},r)})}processSendQueue(){return uk(this,void 0,void 0,function*(){for(;;){const t=yield this.privSendMessageQueue.dequeue();if(!t)return;try{yield this.sendRawMessage(t),t.sendStatusDeferral.resolve()}catch(r){t.sendStatusDeferral.reject(r)}}})}onEvent(e){this.privConnectionEvents.onEvent(e),Hn.Events.instance.onEvent(e)}getAgent(){const e=new jce.default.Agent(this.createConnection);return this.proxyInfo!==void 0&&this.proxyInfo.HostName!==void 0&&this.proxyInfo.Port>0&&(e.proxyInfo=this.proxyInfo),e}static GetProxyAgent(e){const t={host:e.HostName,port:e.Port};return e.UserName?t.headers={"Proxy-Authentication":"Basic "+new Buffer(`${e.UserName}:${e.Password===void 0?"":e.Password}`).toString("base64")}:t.headers={},t.headers.requestOCSP="true",new Gce.default(t)}createConnection(e,t){let r;if(t=Object.assign(Object.assign({},t),{requestOCSP:!0,servername:t.host}),this.proxyInfo){const s=nS.GetProxyAgent(this.proxyInfo);r=new Promise((o,a)=>{s.callback(e,t,(l,c)=>{l?a(l):o(c)})})}else t.secureEndpoint?r=Promise.resolve(Uce.connect(t)):r=Promise.resolve(zce.connect(t));return r}get isWebsocketOpen(){return this.privWebsocketClient&&this.privWebsocketClient.readyState===this.privWebsocketClient.OPEN}}QS.WebsocketMessageAdapter=nS;nS.forceNpmWebSocket=!1;var $ce=Ze&&Ze.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};Object.defineProperty(wI,"__esModule",{value:!0});wI.WebsocketConnection=void 0;const EM=pn(),Wce=QS;class qce{constructor(e,t,r,i,s,o=!1,a){if(this.privIsDisposed=!1,!e)throw new EM.ArgumentNullError("uri");if(!i)throw new EM.ArgumentNullError("messageFormatter");this.privMessageFormatter=i;let l="",c=0;if(t){for(const u in t)if(u){l+=c===0&&e.indexOf("?")===-1?"?":"&";const d=encodeURIComponent(u);l+=d;let h=t[u];h&&(h=encodeURIComponent(h),l+=`=${h}`),c++}}if(r){for(const u in r)if(u){l+=c===0&&e.indexOf("?")===-1?"?":"&";const d=encodeURIComponent(r[u]);l+=`${u}=${d}`,c++}}this.privUri=e+l,this.privId=a||EM.createNoDashGuid(),this.privConnectionMessageAdapter=new Wce.WebsocketMessageAdapter(this.privUri,this.id,this.privMessageFormatter,s,r,o)}dispose(){return $ce(this,void 0,void 0,function*(){this.privIsDisposed=!0,this.privConnectionMessageAdapter&&(yield this.privConnectionMessageAdapter.close())})}isDisposed(){return this.privIsDisposed}get id(){return this.privId}get uri(){return this.privUri}state(){return this.privConnectionMessageAdapter.state}open(){return this.privConnectionMessageAdapter.open()}send(e){return this.privConnectionMessageAdapter.send(e)}read(){return this.privConnectionMessageAdapter.read()}get events(){return this.privConnectionMessageAdapter.events}}wI.WebsocketConnection=qce;var TI={};Object.defineProperty(TI,"__esModule",{value:!0});TI.ReplayableAudioNode=void 0;class Qce{constructor(e,t){this.privBuffers=[],this.privReplayOffset=0,this.privLastShrinkOffset=0,this.privBufferStartOffset=0,this.privBufferSerial=0,this.privBufferedBytes=0,this.privReplay=!1,this.privLastChunkAcquiredTime=0,this.privAudioNode=e,this.privBytesPerSecond=t}id(){return this.privAudioNode.id()}read(){if(this.privReplay&&this.privBuffers.length!==0){const e=this.privReplayOffset-this.privBufferStartOffset;let t=Math.round(e*this.privBytesPerSecond*1e-7);t%2!==0&&t++;let r=0;for(;r<this.privBuffers.length&&t>=this.privBuffers[r].chunk.buffer.byteLength;)t-=this.privBuffers[r++].chunk.buffer.byteLength;if(r<this.privBuffers.length){const i=this.privBuffers[r].chunk.buffer.slice(t);return this.privReplayOffset+=i.byteLength/this.privBytesPerSecond*1e7,r===this.privBuffers.length-1&&(this.privReplay=!1),Promise.resolve({buffer:i,isEnd:!1,timeReceived:this.privBuffers[r].chunk.timeReceived})}}return this.privAudioNode.read().then(e=>(e&&e.buffer&&(this.privBuffers.push(new Jce(e,this.privBufferSerial++,this.privBufferedBytes)),this.privBufferedBytes+=e.buffer.byteLength),e))}detach(){return this.privBuffers=void 0,this.privAudioNode.detach()}replay(){this.privBuffers&&this.privBuffers.length!==0&&(this.privReplay=!0,this.privReplayOffset=this.privLastShrinkOffset)}shrinkBuffers(e){if(this.privBuffers===void 0||this.privBuffers.length===0)return;this.privLastShrinkOffset=e;const t=e-this.privBufferStartOffset;let r=Math.round(t*this.privBytesPerSecond*1e-7),i=0;for(;i<this.privBuffers.length&&r>=this.privBuffers[i].chunk.buffer.byteLength;)r-=this.privBuffers[i++].chunk.buffer.byteLength;this.privBufferStartOffset=Math.round(e-r/this.privBytesPerSecond*1e7),this.privBuffers=this.privBuffers.slice(i)}findTimeAtOffset(e){if(e<this.privBufferStartOffset||this.privBuffers===void 0)return 0;for(const t of this.privBuffers){const r=t.byteOffset/this.privBytesPerSecond*1e7,i=r+t.chunk.buffer.byteLength/this.privBytesPerSecond*1e7;if(e>=r&&e<=i)return t.chunk.timeReceived}return 0}}TI.ReplayableAudioNode=Qce;class Jce{constructor(e,t,r){this.chunk=e,this.serial=t,this.byteOffset=r}}var n1={},CM={},ad={},JS={},Kce=Ze&&Ze.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t),Object.defineProperty(n,r,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Yce=Ze&&Ze.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),Xce=Ze&&Ze.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.hasOwnProperty.call(n,t)&&Kce(e,n,t);return Yce(e,n),e};Object.defineProperty(JS,"__esModule",{value:!0});JS.AudioFileWriter=void 0;const r1=Xce($m),wM=In;class Zce{constructor(e){wM.Contracts.throwIfNullOrUndefined(r1.openSync,`
File System access not available, please use Push or PullAudioOutputStream`),this.privFd=r1.openSync(e,"w")}set format(e){wM.Contracts.throwIfNotUndefined(this.privAudioFormat,"format is already set"),this.privAudioFormat=e;let t=0;this.privAudioFormat.hasHeader&&(t=this.privAudioFormat.header.byteLength),this.privFd!==void 0&&(this.privWriteStream=r1.createWriteStream("",{fd:this.privFd,start:t,autoClose:!1}))}write(e){wM.Contracts.throwIfNullOrUndefined(this.privAudioFormat,"must set format before writing."),this.privWriteStream!==void 0&&this.privWriteStream.write(new Uint8Array(e.slice(0)))}close(){this.privFd!==void 0&&(this.privWriteStream.on("finish",()=>{this.privAudioFormat.hasHeader&&(this.privAudioFormat.updateHeader(this.privWriteStream.bytesWritten),r1.writeSync(this.privFd,new Int8Array(this.privAudioFormat.header),0,this.privAudioFormat.header.byteLength,0)),r1.closeSync(this.privFd),this.privFd=void 0}),this.privWriteStream.end())}id(){return this.privId}}JS.AudioFileWriter=Zce;var Wa={},dk;function C$(){if(dk)return Wa;dk=1;var n=Ze&&Ze.__awaiter||function(d,h,f,m){function g(v){return v instanceof f?v:new f(function(y){y(v)})}return new(f||(f=Promise))(function(v,y){function A(x){try{T(m.next(x))}catch(R){y(R)}}function C(x){try{T(m.throw(x))}catch(R){y(R)}}function T(x){x.done?v(x.value):g(x.value).then(A,C)}T((m=m.apply(d,h||[])).next())})};Object.defineProperty(Wa,"__esModule",{value:!0}),Wa.PullAudioInputStreamImpl=Wa.PullAudioInputStream=Wa.PushAudioInputStreamImpl=Wa.PushAudioInputStream=Wa.AudioInputStream=void 0;const e=Wt(),t=pn(),r=Zl,i=vt(),s=Yf;let o=class{constructor(){}static createPushStream(h){return a.create(h)}static createPullStream(h,f){return c.create(h,f)}};Wa.AudioInputStream=o;class a extends o{static create(h){return new l(h)}}Wa.PushAudioInputStream=a;class l extends a{constructor(h){super(),h===void 0?this.privFormat=s.AudioStreamFormatImpl.getDefaultInputFormat():this.privFormat=h,this.privEvents=new t.EventSource,this.privId=r.createNoDashGuid(),this.privStream=new t.ChunkedArrayBufferStream(this.privFormat.avgBytesPerSec/10)}get format(){return Promise.resolve(this.privFormat)}write(h){this.privStream.writeStreamChunk({buffer:h,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}id(){return this.privId}turnOn(){this.onEvent(new t.AudioSourceInitializingEvent(this.privId)),this.onEvent(new t.AudioSourceReadyEvent(this.privId))}attach(h){return n(this,void 0,void 0,function*(){this.onEvent(new t.AudioStreamNodeAttachingEvent(this.privId,h)),yield this.turnOn();const f=this.privStream;return this.onEvent(new t.AudioStreamNodeAttachedEvent(this.privId,h)),{detach:()=>n(this,void 0,void 0,function*(){return this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,h)),this.turnOff()}),id:()=>h,read:()=>f.read()}})}detach(h){this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,h))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:e.connectivity.Unknown,manufacturer:"Speech SDK",model:"PushStream",samplerate:this.privFormat.samplesPerSec,type:e.type.Stream})}onEvent(h){this.privEvents.onEvent(h),t.Events.instance.onEvent(h)}toBuffer(h){const f=Buffer.alloc(h.byteLength),m=new Uint8Array(h);for(let g=0;g<f.length;++g)f[g]=m[g];return f}}Wa.PushAudioInputStreamImpl=l;class c extends o{constructor(){super()}static create(h,f){return new u(h,f)}}Wa.PullAudioInputStream=c;class u extends c{constructor(h,f){super(),f===void 0?this.privFormat=i.AudioStreamFormat.getDefaultInputFormat():this.privFormat=f,this.privEvents=new t.EventSource,this.privId=r.createNoDashGuid(),this.privCallback=h,this.privIsClosed=!1,this.privBufferSize=this.privFormat.avgBytesPerSec/10}get format(){return Promise.resolve(this.privFormat)}close(){this.privIsClosed=!0,this.privCallback.close()}id(){return this.privId}turnOn(){this.onEvent(new t.AudioSourceInitializingEvent(this.privId)),this.onEvent(new t.AudioSourceReadyEvent(this.privId))}attach(h){return n(this,void 0,void 0,function*(){return this.onEvent(new t.AudioStreamNodeAttachingEvent(this.privId,h)),yield this.turnOn(),this.onEvent(new t.AudioStreamNodeAttachedEvent(this.privId,h)),{detach:()=>(this.privCallback.close(),this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,h)),this.turnOff()),id:()=>h,read:()=>{let f=0,m;for(;f<this.privBufferSize;){const g=new ArrayBuffer(this.privBufferSize-f),v=this.privCallback.read(g);if(m===void 0?m=g:new Int8Array(m).set(new Int8Array(g),f),v===0)break;f+=v}return Promise.resolve({buffer:m.slice(0,f),isEnd:this.privIsClosed||f===0,timeReceived:Date.now()})}}})}detach(h){this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,h))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:e.connectivity.Unknown,manufacturer:"Speech SDK",model:"PullStream",samplerate:this.privFormat.samplesPerSec,type:e.type.Stream})}onEvent(h){this.privEvents.onEvent(h),t.Events.instance.onEvent(h)}}return Wa.PullAudioInputStreamImpl=u,Wa}var to={},Xf={},EO={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.SpeechSynthesisOutputFormat=void 0,function(e){e[e.Raw8Khz8BitMonoMULaw=0]="Raw8Khz8BitMonoMULaw",e[e.Riff16Khz16KbpsMonoSiren=1]="Riff16Khz16KbpsMonoSiren",e[e.Audio16Khz16KbpsMonoSiren=2]="Audio16Khz16KbpsMonoSiren",e[e.Audio16Khz32KBitRateMonoMp3=3]="Audio16Khz32KBitRateMonoMp3",e[e.Audio16Khz128KBitRateMonoMp3=4]="Audio16Khz128KBitRateMonoMp3",e[e.Audio16Khz64KBitRateMonoMp3=5]="Audio16Khz64KBitRateMonoMp3",e[e.Audio24Khz48KBitRateMonoMp3=6]="Audio24Khz48KBitRateMonoMp3",e[e.Audio24Khz96KBitRateMonoMp3=7]="Audio24Khz96KBitRateMonoMp3",e[e.Audio24Khz160KBitRateMonoMp3=8]="Audio24Khz160KBitRateMonoMp3",e[e.Raw16Khz16BitMonoTrueSilk=9]="Raw16Khz16BitMonoTrueSilk",e[e.Riff16Khz16BitMonoPcm=10]="Riff16Khz16BitMonoPcm",e[e.Riff8Khz16BitMonoPcm=11]="Riff8Khz16BitMonoPcm",e[e.Riff24Khz16BitMonoPcm=12]="Riff24Khz16BitMonoPcm",e[e.Riff8Khz8BitMonoMULaw=13]="Riff8Khz8BitMonoMULaw",e[e.Raw16Khz16BitMonoPcm=14]="Raw16Khz16BitMonoPcm",e[e.Raw24Khz16BitMonoPcm=15]="Raw24Khz16BitMonoPcm",e[e.Raw8Khz16BitMonoPcm=16]="Raw8Khz16BitMonoPcm",e[e.Ogg16Khz16BitMonoOpus=17]="Ogg16Khz16BitMonoOpus",e[e.Ogg24Khz16BitMonoOpus=18]="Ogg24Khz16BitMonoOpus",e[e.Raw48Khz16BitMonoPcm=19]="Raw48Khz16BitMonoPcm",e[e.Riff48Khz16BitMonoPcm=20]="Riff48Khz16BitMonoPcm",e[e.Audio48Khz96KBitRateMonoMp3=21]="Audio48Khz96KBitRateMonoMp3",e[e.Audio48Khz192KBitRateMonoMp3=22]="Audio48Khz192KBitRateMonoMp3",e[e.Ogg48Khz16BitMonoOpus=23]="Ogg48Khz16BitMonoOpus",e[e.Webm16Khz16BitMonoOpus=24]="Webm16Khz16BitMonoOpus",e[e.Webm24Khz16BitMonoOpus=25]="Webm24Khz16BitMonoOpus",e[e.Raw24Khz16BitMonoTrueSilk=26]="Raw24Khz16BitMonoTrueSilk",e[e.Raw8Khz8BitMonoALaw=27]="Raw8Khz8BitMonoALaw",e[e.Riff8Khz8BitMonoALaw=28]="Riff8Khz8BitMonoALaw",e[e.Webm24Khz16Bit24KbpsMonoOpus=29]="Webm24Khz16Bit24KbpsMonoOpus",e[e.Audio16Khz16Bit32KbpsMonoOpus=30]="Audio16Khz16Bit32KbpsMonoOpus",e[e.Audio24Khz16Bit48KbpsMonoOpus=31]="Audio24Khz16Bit48KbpsMonoOpus",e[e.Audio24Khz16Bit24KbpsMonoOpus=32]="Audio24Khz16Bit24KbpsMonoOpus",e[e.Raw22050Hz16BitMonoPcm=33]="Raw22050Hz16BitMonoPcm",e[e.Riff22050Hz16BitMonoPcm=34]="Riff22050Hz16BitMonoPcm",e[e.Raw44100Hz16BitMonoPcm=35]="Raw44100Hz16BitMonoPcm",e[e.Riff44100Hz16BitMonoPcm=36]="Riff44100Hz16BitMonoPcm"}(n.SpeechSynthesisOutputFormat||(n.SpeechSynthesisOutputFormat={}))})(EO);Object.defineProperty(Xf,"__esModule",{value:!0});Xf.AudioOutputFormatImpl=void 0;const ir=EO,Kn=Yf;class Nn extends Kn.AudioStreamFormatImpl{constructor(e,t,r,i,s,o,a,l,c){super(r,o,t,e),this.formatTag=e,this.avgBytesPerSec=i,this.blockAlign=s,this.priAudioFormatString=a,this.priRequestAudioFormatString=l,this.priHasHeader=c}static fromSpeechSynthesisOutputFormat(e){return e===void 0?Nn.getDefaultOutputFormat():Nn.fromSpeechSynthesisOutputFormatString(Nn.SpeechSynthesisOutputFormatToString[e])}static fromSpeechSynthesisOutputFormatString(e){switch(e){case"raw-8khz-8bit-mono-mulaw":return new Nn(Kn.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,e,e,!1);case"riff-16khz-16kbps-mono-siren":return new Nn(Kn.AudioFormatTag.Siren,1,16e3,2e3,40,0,e,"audio-16khz-16kbps-mono-siren",!0);case"audio-16khz-16kbps-mono-siren":return new Nn(Kn.AudioFormatTag.Siren,1,16e3,2e3,40,0,e,e,!1);case"audio-16khz-32kbitrate-mono-mp3":return new Nn(Kn.AudioFormatTag.MP3,1,16e3,4096,2,16,e,e,!1);case"audio-16khz-128kbitrate-mono-mp3":return new Nn(Kn.AudioFormatTag.MP3,1,16e3,16384,2,16,e,e,!1);case"audio-16khz-64kbitrate-mono-mp3":return new Nn(Kn.AudioFormatTag.MP3,1,16e3,8192,2,16,e,e,!1);case"audio-24khz-48kbitrate-mono-mp3":return new Nn(Kn.AudioFormatTag.MP3,1,24e3,6144,2,16,e,e,!1);case"audio-24khz-96kbitrate-mono-mp3":return new Nn(Kn.AudioFormatTag.MP3,1,24e3,12288,2,16,e,e,!1);case"audio-24khz-160kbitrate-mono-mp3":return new Nn(Kn.AudioFormatTag.MP3,1,24e3,20480,2,16,e,e,!1);case"raw-16khz-16bit-mono-truesilk":return new Nn(Kn.AudioFormatTag.SILKSkype,1,16e3,32e3,2,16,e,e,!1);case"riff-8khz-16bit-mono-pcm":return new Nn(Kn.AudioFormatTag.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!0);case"riff-24khz-16bit-mono-pcm":return new Nn(Kn.AudioFormatTag.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!0);case"riff-8khz-8bit-mono-mulaw":return new Nn(Kn.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-mulaw",!0);case"raw-16khz-16bit-mono-pcm":return new Nn(Kn.AudioFormatTag.PCM,1,16e3,32e3,2,16,e,"raw-16khz-16bit-mono-pcm",!1);case"raw-24khz-16bit-mono-pcm":return new Nn(Kn.AudioFormatTag.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!1);case"raw-8khz-16bit-mono-pcm":return new Nn(Kn.AudioFormatTag.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!1);case"ogg-16khz-16bit-mono-opus":return new Nn(Kn.AudioFormatTag.OGG_OPUS,1,16e3,8192,2,16,e,e,!1);case"ogg-24khz-16bit-mono-opus":return new Nn(Kn.AudioFormatTag.OGG_OPUS,1,24e3,8192,2,16,e,e,!1);case"raw-48khz-16bit-mono-pcm":return new Nn(Kn.AudioFormatTag.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!1);case"riff-48khz-16bit-mono-pcm":return new Nn(Kn.AudioFormatTag.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!0);case"audio-48khz-96kbitrate-mono-mp3":return new Nn(Kn.AudioFormatTag.MP3,1,48e3,12288,2,16,e,e,!1);case"audio-48khz-192kbitrate-mono-mp3":return new Nn(Kn.AudioFormatTag.MP3,1,48e3,24576,2,16,e,e,!1);case"ogg-48khz-16bit-mono-opus":return new Nn(Kn.AudioFormatTag.OGG_OPUS,1,48e3,12e3,2,16,e,e,!1);case"webm-16khz-16bit-mono-opus":return new Nn(Kn.AudioFormatTag.WEBM_OPUS,1,16e3,4e3,2,16,e,e,!1);case"webm-24khz-16bit-mono-opus":return new Nn(Kn.AudioFormatTag.WEBM_OPUS,1,24e3,6e3,2,16,e,e,!1);case"webm-24khz-16bit-24kbps-mono-opus":return new Nn(Kn.AudioFormatTag.WEBM_OPUS,1,24e3,3e3,2,16,e,e,!1);case"audio-16khz-16bit-32kbps-mono-opus":return new Nn(Kn.AudioFormatTag.OPUS,1,16e3,4e3,2,16,e,e,!1);case"audio-24khz-16bit-48kbps-mono-opus":return new Nn(Kn.AudioFormatTag.OPUS,1,24e3,6e3,2,16,e,e,!1);case"audio-24khz-16bit-24kbps-mono-opus":return new Nn(Kn.AudioFormatTag.OPUS,1,24e3,3e3,2,16,e,e,!1);case"audio-24khz-16bit-mono-flac":return new Nn(Kn.AudioFormatTag.FLAC,1,24e3,24e3,2,16,e,e,!1);case"audio-48khz-16bit-mono-flac":return new Nn(Kn.AudioFormatTag.FLAC,1,48e3,3e4,2,16,e,e,!1);case"raw-24khz-16bit-mono-truesilk":return new Nn(Kn.AudioFormatTag.SILKSkype,1,24e3,48e3,2,16,e,e,!1);case"raw-8khz-8bit-mono-alaw":return new Nn(Kn.AudioFormatTag.ALaw,1,8e3,8e3,1,8,e,e,!1);case"riff-8khz-8bit-mono-alaw":return new Nn(Kn.AudioFormatTag.ALaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-alaw",!0);case"raw-22050hz-16bit-mono-pcm":return new Nn(Kn.AudioFormatTag.PCM,1,22050,44100,2,16,e,e,!1);case"riff-22050hz-16bit-mono-pcm":return new Nn(Kn.AudioFormatTag.PCM,1,22050,44100,2,16,e,"raw-22050hz-16bit-mono-pcm",!0);case"raw-44100hz-16bit-mono-pcm":return new Nn(Kn.AudioFormatTag.PCM,1,44100,88200,2,16,e,e,!1);case"riff-44100hz-16bit-mono-pcm":return new Nn(Kn.AudioFormatTag.PCM,1,44100,88200,2,16,e,"raw-44100hz-16bit-mono-pcm",!0);case"riff-16khz-16bit-mono-pcm":default:return new Nn(Kn.AudioFormatTag.PCM,1,16e3,32e3,2,16,"riff-16khz-16bit-mono-pcm","raw-16khz-16bit-mono-pcm",!0)}}static getDefaultOutputFormat(){return Nn.fromSpeechSynthesisOutputFormatString(typeof window<"u"?"audio-24khz-48kbitrate-mono-mp3":"riff-16khz-16bit-mono-pcm")}get hasHeader(){return this.priHasHeader}get header(){if(this.hasHeader)return this.privHeader}updateHeader(e){if(this.priHasHeader){const t=new DataView(this.privHeader);t.setUint32(4,e+this.privHeader.byteLength-8,!0),t.setUint32(40,e,!0)}}get requestAudioFormatString(){return this.priRequestAudioFormatString}addHeader(e){if(!this.hasHeader)return e;this.updateHeader(e.byteLength);const t=new Uint8Array(e.byteLength+this.header.byteLength);return t.set(new Uint8Array(this.header),0),t.set(new Uint8Array(e),this.header.byteLength),t.buffer}}Xf.AudioOutputFormatImpl=Nn;Nn.SpeechSynthesisOutputFormatToString={[ir.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoMULaw]:"raw-8khz-8bit-mono-mulaw",[ir.SpeechSynthesisOutputFormat.Riff16Khz16KbpsMonoSiren]:"riff-16khz-16kbps-mono-siren",[ir.SpeechSynthesisOutputFormat.Audio16Khz16KbpsMonoSiren]:"audio-16khz-16kbps-mono-siren",[ir.SpeechSynthesisOutputFormat.Audio16Khz32KBitRateMonoMp3]:"audio-16khz-32kbitrate-mono-mp3",[ir.SpeechSynthesisOutputFormat.Audio16Khz128KBitRateMonoMp3]:"audio-16khz-128kbitrate-mono-mp3",[ir.SpeechSynthesisOutputFormat.Audio16Khz64KBitRateMonoMp3]:"audio-16khz-64kbitrate-mono-mp3",[ir.SpeechSynthesisOutputFormat.Audio24Khz48KBitRateMonoMp3]:"audio-24khz-48kbitrate-mono-mp3",[ir.SpeechSynthesisOutputFormat.Audio24Khz96KBitRateMonoMp3]:"audio-24khz-96kbitrate-mono-mp3",[ir.SpeechSynthesisOutputFormat.Audio24Khz160KBitRateMonoMp3]:"audio-24khz-160kbitrate-mono-mp3",[ir.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoTrueSilk]:"raw-16khz-16bit-mono-truesilk",[ir.SpeechSynthesisOutputFormat.Riff16Khz16BitMonoPcm]:"riff-16khz-16bit-mono-pcm",[ir.SpeechSynthesisOutputFormat.Riff8Khz16BitMonoPcm]:"riff-8khz-16bit-mono-pcm",[ir.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm]:"riff-24khz-16bit-mono-pcm",[ir.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoMULaw]:"riff-8khz-8bit-mono-mulaw",[ir.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoPcm]:"raw-16khz-16bit-mono-pcm",[ir.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoPcm]:"raw-24khz-16bit-mono-pcm",[ir.SpeechSynthesisOutputFormat.Raw8Khz16BitMonoPcm]:"raw-8khz-16bit-mono-pcm",[ir.SpeechSynthesisOutputFormat.Ogg16Khz16BitMonoOpus]:"ogg-16khz-16bit-mono-opus",[ir.SpeechSynthesisOutputFormat.Ogg24Khz16BitMonoOpus]:"ogg-24khz-16bit-mono-opus",[ir.SpeechSynthesisOutputFormat.Raw48Khz16BitMonoPcm]:"raw-48khz-16bit-mono-pcm",[ir.SpeechSynthesisOutputFormat.Riff48Khz16BitMonoPcm]:"riff-48khz-16bit-mono-pcm",[ir.SpeechSynthesisOutputFormat.Audio48Khz96KBitRateMonoMp3]:"audio-48khz-96kbitrate-mono-mp3",[ir.SpeechSynthesisOutputFormat.Audio48Khz192KBitRateMonoMp3]:"audio-48khz-192kbitrate-mono-mp3",[ir.SpeechSynthesisOutputFormat.Ogg48Khz16BitMonoOpus]:"ogg-48khz-16bit-mono-opus",[ir.SpeechSynthesisOutputFormat.Webm16Khz16BitMonoOpus]:"webm-16khz-16bit-mono-opus",[ir.SpeechSynthesisOutputFormat.Webm24Khz16BitMonoOpus]:"webm-24khz-16bit-mono-opus",[ir.SpeechSynthesisOutputFormat.Webm24Khz16Bit24KbpsMonoOpus]:"webm-24khz-16bit-24kbps-mono-opus",[ir.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoTrueSilk]:"raw-24khz-16bit-mono-truesilk",[ir.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoALaw]:"raw-8khz-8bit-mono-alaw",[ir.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoALaw]:"riff-8khz-8bit-mono-alaw",[ir.SpeechSynthesisOutputFormat.Audio16Khz16Bit32KbpsMonoOpus]:"audio-16khz-16bit-32kbps-mono-opus",[ir.SpeechSynthesisOutputFormat.Audio24Khz16Bit48KbpsMonoOpus]:"audio-24khz-16bit-48kbps-mono-opus",[ir.SpeechSynthesisOutputFormat.Audio24Khz16Bit24KbpsMonoOpus]:"audio-24khz-16bit-24kbps-mono-opus",[ir.SpeechSynthesisOutputFormat.Raw22050Hz16BitMonoPcm]:"raw-22050hz-16bit-mono-pcm",[ir.SpeechSynthesisOutputFormat.Riff22050Hz16BitMonoPcm]:"riff-22050hz-16bit-mono-pcm",[ir.SpeechSynthesisOutputFormat.Raw44100Hz16BitMonoPcm]:"raw-44100hz-16bit-mono-pcm",[ir.SpeechSynthesisOutputFormat.Riff44100Hz16BitMonoPcm]:"riff-44100hz-16bit-mono-pcm"};var eue=Ze&&Ze.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};Object.defineProperty(to,"__esModule",{value:!0});to.PushAudioOutputStreamImpl=to.PushAudioOutputStream=to.PullAudioOutputStreamImpl=to.PullAudioOutputStream=to.AudioOutputStream=void 0;const N4=pn(),tue=In,nue=Xf;class CO{constructor(){}static createPullStream(){return wO.create()}}to.AudioOutputStream=CO;class wO extends CO{static create(){return new w$}}to.PullAudioOutputStream=wO;class w$ extends wO{constructor(){super(),this.privId=N4.createNoDashGuid(),this.privStream=new N4.Stream}set format(e){e==null&&(this.privFormat=nue.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privFormat=e}get format(){return this.privFormat}get isClosed(){return this.privStream.isClosed}id(){return this.privId}read(e){return eue(this,void 0,void 0,function*(){const t=new Int8Array(e);let r=0;if(this.privLastChunkView!==void 0){if(this.privLastChunkView.length>e.byteLength)return t.set(this.privLastChunkView.slice(0,e.byteLength)),this.privLastChunkView=this.privLastChunkView.slice(e.byteLength),Promise.resolve(e.byteLength);t.set(this.privLastChunkView),r=this.privLastChunkView.length,this.privLastChunkView=void 0}for(;r<e.byteLength&&!this.privStream.isReadEnded;){const i=yield this.privStream.read();if(i!==void 0&&!i.isEnd){let s;i.buffer.byteLength>e.byteLength-r?(s=i.buffer.slice(0,e.byteLength-r),this.privLastChunkView=new Int8Array(i.buffer.slice(e.byteLength-r))):s=i.buffer,t.set(new Int8Array(s),r),r+=s.byteLength}else this.privStream.readEnded()}return r})}write(e){tue.Contracts.throwIfNullOrUndefined(this.privStream,"must set format before writing"),this.privStream.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}}to.PullAudioOutputStreamImpl=w$;class T$ extends CO{constructor(){super()}static create(e){return new x$(e)}}to.PushAudioOutputStream=T$;class x$ extends T${constructor(e){super(),this.privId=N4.createNoDashGuid(),this.privCallback=e}set format(e){}write(e){this.privCallback.write&&this.privCallback.write(e)}close(){this.privCallback.close&&this.privCallback.close()}id(){return this.privId}}to.PushAudioOutputStreamImpl=x$;var hk;function b$(){if(hk)return ad;hk=1,Object.defineProperty(ad,"__esModule",{value:!0}),ad.AudioOutputConfigImpl=ad.AudioConfigImpl=ad.AudioConfig=void 0;const n=Ws(),e=In,t=vt(),r=JS,i=C$(),s=to;let o=class I${static fromDefaultMicrophoneInput(){const u=new n.PcmRecorder(!0);return new a(new n.MicAudioSource(u))}static fromMicrophoneInput(u){const d=new n.PcmRecorder(!0);return new a(new n.MicAudioSource(d,u))}static fromWavFileInput(u,d="unnamedBuffer.wav"){return new a(new n.FileAudioSource(u,d))}static fromStreamInput(u){if(u instanceof t.PullAudioInputStreamCallback)return new a(new i.PullAudioInputStreamImpl(u));if(u instanceof t.AudioInputStream)return new a(u);if(typeof MediaStream<"u"&&u instanceof MediaStream){const d=new n.PcmRecorder(!1);return new a(new n.MicAudioSource(d,null,null,u))}throw new Error("Not Supported Type")}static fromDefaultSpeakerOutput(){return new l(new t.SpeakerAudioDestination)}static fromSpeakerOutput(u){if(u===void 0)return I$.fromDefaultSpeakerOutput();if(u instanceof t.SpeakerAudioDestination)return new l(u);throw new Error("Not Supported Type")}static fromAudioFileOutput(u){return new l(new r.AudioFileWriter(u))}static fromStreamOutput(u){if(u instanceof t.PushAudioOutputStreamCallback)return new l(new s.PushAudioOutputStreamImpl(u));if(u instanceof t.PushAudioOutputStream)return new l(u);if(u instanceof t.PullAudioOutputStream)return new l(u);throw new Error("Not Supported Type")}};ad.AudioConfig=o;class a extends o{constructor(u){super(),this.privSource=u}get format(){return this.privSource.format}close(u,d){this.privSource.turnOff().then(()=>{u&&u()},h=>{d&&d(h)})}id(){return this.privSource.id()}turnOn(){return this.privSource.turnOn()}attach(u){return this.privSource.attach(u)}detach(u){return this.privSource.detach(u)}turnOff(){return this.privSource.turnOff()}get events(){return this.privSource.events}setProperty(u,d){if(e.Contracts.throwIfNull(d,"value"),this.privSource.setProperty!==void 0)this.privSource.setProperty(u,d);else throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(u,d){if(this.privSource.getProperty!==void 0)return this.privSource.getProperty(u,d);throw new Error("This AudioConfig instance does not support getting properties.")}get deviceInfo(){return this.privSource.deviceInfo}}ad.AudioConfigImpl=a;class l extends o{constructor(u){super(),this.privDestination=u}set format(u){this.privDestination.format=u}write(u){this.privDestination.write(u)}close(){this.privDestination.close()}id(){return this.privDestination.id()}setProperty(){throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(){throw new Error("This AudioConfig instance does not support getting properties.")}}return ad.AudioOutputConfigImpl=l,ad}var M$={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.CancellationReason=void 0,function(e){e[e.Error=0]="Error",e[e.EndOfStream=1]="EndOfStream"}(n.CancellationReason||(n.CancellationReason={}))})(M$);var xI={};Object.defineProperty(xI,"__esModule",{value:!0});xI.PullAudioInputStreamCallback=void 0;class rue{}xI.PullAudioInputStreamCallback=rue;var II={};Object.defineProperty(II,"__esModule",{value:!0});II.PushAudioOutputStreamCallback=void 0;class iue{}II.PushAudioOutputStreamCallback=iue;var bI={};Object.defineProperty(bI,"__esModule",{value:!0});bI.KeywordRecognitionModel=void 0;const fk=In;class sue{constructor(){this.privDisposed=!1}static fromFile(e){throw fk.Contracts.throwIfFileDoesNotExist(e,"fileName"),new Error("Not yet implemented.")}static fromStream(e){throw fk.Contracts.throwIfNull(e,"file"),new Error("Not yet implemented.")}close(){this.privDisposed||(this.privDisposed=!0)}}bI.KeywordRecognitionModel=sue;var MI={};Object.defineProperty(MI,"__esModule",{value:!0});MI.SessionEventArgs=void 0;class oue{constructor(e){this.privSessionId=e}get sessionId(){return this.privSessionId}}MI.SessionEventArgs=oue;var i1={},pk;function aue(){if(pk)return i1;pk=1,Object.defineProperty(i1,"__esModule",{value:!0}),i1.RecognitionEventArgs=void 0;const n=vt();let e=class extends n.SessionEventArgs{constructor(r,i){super(i),this.privOffset=r}get offset(){return this.privOffset}};return i1.RecognitionEventArgs=e,i1}var R$={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.OutputFormat=void 0,function(e){e[e.Simple=0]="Simple",e[e.Detailed=1]="Detailed"}(n.OutputFormat||(n.OutputFormat={}))})(R$);var s1={},mk;function lue(){if(mk)return s1;mk=1,Object.defineProperty(s1,"__esModule",{value:!0}),s1.IntentRecognitionEventArgs=void 0;const n=vt();let e=class extends n.RecognitionEventArgs{constructor(r,i,s){super(i,s),this.privResult=r}get result(){return this.privResult}};return s1.IntentRecognitionEventArgs=e,s1}var RI={};Object.defineProperty(RI,"__esModule",{value:!0});RI.RecognitionResult=void 0;class cue{constructor(e,t,r,i,s,o,a,l,c,u){this.privResultId=e,this.privReason=t,this.privText=r,this.privDuration=i,this.privOffset=s,this.privLanguage=o,this.privLanguageDetectionConfidence=a,this.privErrorDetails=l,this.privJson=c,this.privProperties=u}get resultId(){return this.privResultId}get reason(){return this.privReason}get text(){return this.privText}get duration(){return this.privDuration}get offset(){return this.privOffset}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}get errorDetails(){return this.privErrorDetails}get json(){return this.privJson}get properties(){return this.privProperties}}RI.RecognitionResult=cue;var o1={},gk;function uue(){if(gk)return o1;gk=1,Object.defineProperty(o1,"__esModule",{value:!0}),o1.SpeechRecognitionResult=void 0;const n=vt();let e=class extends n.RecognitionResult{constructor(r,i,s,o,a,l,c,u,d,h,f){super(r,i,s,o,a,l,c,d,h,f),this.privSpeakerId=u}get speakerId(){return this.privSpeakerId}};return o1.SpeechRecognitionResult=e,o1}var a1={},vk;function due(){if(vk)return a1;vk=1,Object.defineProperty(a1,"__esModule",{value:!0}),a1.IntentRecognitionResult=void 0;const n=vt();let e=class extends n.SpeechRecognitionResult{constructor(r,i,s,o,a,l,c,u,d,h,f){super(i,s,o,a,l,c,u,void 0,d,h,f),this.privIntentId=r}get intentId(){return this.privIntentId}};return a1.IntentRecognitionResult=e,a1}var zg={};Object.defineProperty(zg,"__esModule",{value:!0});zg.LanguageUnderstandingModelImpl=zg.LanguageUnderstandingModel=void 0;const g0=In;class N${constructor(){}static fromEndpoint(e){g0.Contracts.throwIfNull(e,"uri"),g0.Contracts.throwIfNullOrWhitespace(e.hostname,"uri");const t=new Xw,r=e.host.indexOf(".");if(r===-1)throw new Error("Could not determine region from endpoint");t.region=e.host.substr(0,r);const i=e.pathname.lastIndexOf("/")+1;if(i===-1)throw new Error("Could not determine appId from endpoint");if(t.appId=e.pathname.substr(i),t.subscriptionKey=e.searchParams.get("subscription-key"),t.subscriptionKey===void 0)throw new Error("Could not determine subscription key from endpoint");return t}static fromAppId(e){g0.Contracts.throwIfNullOrWhitespace(e,"appId");const t=new Xw;return t.appId=e,t}static fromSubscription(e,t,r){g0.Contracts.throwIfNullOrWhitespace(e,"subscriptionKey"),g0.Contracts.throwIfNullOrWhitespace(t,"appId"),g0.Contracts.throwIfNullOrWhitespace(r,"region");const i=new Xw;return i.appId=t,i.region=r,i.subscriptionKey=e,i}}zg.LanguageUnderstandingModel=N$;class Xw extends N${}zg.LanguageUnderstandingModelImpl=Xw;var ld={},yk;function hue(){if(yk)return ld;yk=1,Object.defineProperty(ld,"__esModule",{value:!0}),ld.MeetingTranscriptionEventArgs=ld.ConversationTranscriptionEventArgs=ld.SpeechRecognitionEventArgs=void 0;const n=vt();let e=class extends n.RecognitionEventArgs{constructor(s,o,a){super(o,a),this.privResult=s}get result(){return this.privResult}};ld.SpeechRecognitionEventArgs=e;class t extends n.RecognitionEventArgs{constructor(s,o,a){super(o,a),this.privResult=s}get result(){return this.privResult}}ld.ConversationTranscriptionEventArgs=t;class r extends e{}return ld.MeetingTranscriptionEventArgs=r,ld}var l1={},c1={},_k;function KS(){if(_k)return c1;_k=1,Object.defineProperty(c1,"__esModule",{value:!0}),c1.CancellationEventArgsBase=void 0;const n=vt();let e=class extends n.RecognitionEventArgs{constructor(r,i,s,o,a){super(o,a),this.privReason=r,this.privErrorDetails=i,this.privErrorCode=s}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};return c1.CancellationEventArgsBase=e,c1}var Sk;function fue(){if(Sk)return l1;Sk=1,Object.defineProperty(l1,"__esModule",{value:!0}),l1.SpeechRecognitionCanceledEventArgs=void 0;const n=KS();let e=class extends n.CancellationEventArgsBase{};return l1.SpeechRecognitionCanceledEventArgs=e,l1}var u1={},Ak;function pue(){if(Ak)return u1;Ak=1,Object.defineProperty(u1,"__esModule",{value:!0}),u1.TranslationRecognitionEventArgs=void 0;const n=vt();let e=class extends n.RecognitionEventArgs{constructor(r,i,s){super(i,s),this.privResult=r}get result(){return this.privResult}};return u1.TranslationRecognitionEventArgs=e,u1}var d1={},Ek;function mue(){if(Ek)return d1;Ek=1,Object.defineProperty(d1,"__esModule",{value:!0}),d1.TranslationSynthesisEventArgs=void 0;const n=vt();let e=class extends n.SessionEventArgs{constructor(r,i){super(i),this.privResult=r}get result(){return this.privResult}};return d1.TranslationSynthesisEventArgs=e,d1}var h1={},Ck;function O$(){if(Ck)return h1;Ck=1,Object.defineProperty(h1,"__esModule",{value:!0}),h1.TranslationRecognitionResult=void 0;const n=vt();let e=class P$ extends n.SpeechRecognitionResult{constructor(r,i,s,o,a,l,c,u,d,h,f){super(i,s,o,a,l,c,u,void 0,d,h,f),this.privTranslations=r}static fromSpeechRecognitionResult(r){return new P$(void 0,r.resultId,r.reason,r.text,r.duration,r.offset,r.language,r.languageDetectionConfidence,r.errorDetails,r.json,r.properties)}get translations(){return this.privTranslations}};return h1.TranslationRecognitionResult=e,h1}var NI={};Object.defineProperty(NI,"__esModule",{value:!0});NI.TranslationSynthesisResult=void 0;class gue{constructor(e,t){this.privReason=e,this.privAudio=t}get audio(){return this.privAudio}get reason(){return this.privReason}}NI.TranslationSynthesisResult=gue;var D$={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ResultReason=void 0,function(e){e[e.NoMatch=0]="NoMatch",e[e.Canceled=1]="Canceled",e[e.RecognizingSpeech=2]="RecognizingSpeech",e[e.RecognizedSpeech=3]="RecognizedSpeech",e[e.RecognizedKeyword=4]="RecognizedKeyword",e[e.RecognizingIntent=5]="RecognizingIntent",e[e.RecognizedIntent=6]="RecognizedIntent",e[e.TranslatingSpeech=7]="TranslatingSpeech",e[e.TranslatedSpeech=8]="TranslatedSpeech",e[e.SynthesizingAudio=9]="SynthesizingAudio",e[e.SynthesizingAudioCompleted=10]="SynthesizingAudioCompleted",e[e.SynthesizingAudioStarted=11]="SynthesizingAudioStarted",e[e.EnrollingVoiceProfile=12]="EnrollingVoiceProfile",e[e.EnrolledVoiceProfile=13]="EnrolledVoiceProfile",e[e.RecognizedSpeakers=14]="RecognizedSpeakers",e[e.RecognizedSpeaker=15]="RecognizedSpeaker",e[e.ResetVoiceProfile=16]="ResetVoiceProfile",e[e.DeletedVoiceProfile=17]="DeletedVoiceProfile",e[e.VoicesListRetrieved=18]="VoicesListRetrieved",e[e.TranslatingParticipantSpeech=19]="TranslatingParticipantSpeech",e[e.TranslatedParticipantSpeech=20]="TranslatedParticipantSpeech",e[e.TranslatedInstantMessage=21]="TranslatedInstantMessage",e[e.TranslatedParticipantInstantMessage=22]="TranslatedParticipantInstantMessage"}(n.ResultReason||(n.ResultReason={}))})(D$);var yp={},wk;function vue(){if(wk)return yp;wk=1,Object.defineProperty(yp,"__esModule",{value:!0}),yp.SpeechConfigImpl=yp.SpeechConfig=void 0;const n=Wt(),e=In,t=vt();let r=class{constructor(){}static fromSubscription(o,a){e.Contracts.throwIfNullOrWhitespace(o,"subscriptionKey"),e.Contracts.throwIfNullOrWhitespace(a,"region");const l=new i;return l.setProperty(t.PropertyId.SpeechServiceConnection_Region,a),l.setProperty(t.PropertyId.SpeechServiceConnection_IntentRegion,a),l.setProperty(t.PropertyId.SpeechServiceConnection_Key,o),l}static fromEndpoint(o,a){e.Contracts.throwIfNull(o,"endpoint");const l=new i;return l.setProperty(t.PropertyId.SpeechServiceConnection_Endpoint,o.href),a!==void 0&&l.setProperty(t.PropertyId.SpeechServiceConnection_Key,a),l}static fromHost(o,a){e.Contracts.throwIfNull(o,"hostName");const l=new i;return l.setProperty(t.PropertyId.SpeechServiceConnection_Host,o.protocol+"//"+o.hostname+(o.port===""?"":":"+o.port)),a!==void 0&&l.setProperty(t.PropertyId.SpeechServiceConnection_Key,a),l}static fromAuthorizationToken(o,a){e.Contracts.throwIfNull(o,"authorizationToken"),e.Contracts.throwIfNullOrWhitespace(a,"region");const l=new i;return l.setProperty(t.PropertyId.SpeechServiceConnection_Region,a),l.setProperty(t.PropertyId.SpeechServiceConnection_IntentRegion,a),l.authorizationToken=o,l}close(){}};yp.SpeechConfig=r;class i extends r{constructor(){super(),this.privProperties=new t.PropertyCollection,this.speechRecognitionLanguage="en-US",this.outputFormat=t.OutputFormat.Simple}get properties(){return this.privProperties}get endPoint(){return new URL(this.privProperties.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint))}get subscriptionKey(){return this.privProperties.getProperty(t.PropertyId.SpeechServiceConnection_Key)}get region(){return this.privProperties.getProperty(t.PropertyId.SpeechServiceConnection_Region)}get authorizationToken(){return this.privProperties.getProperty(t.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(o){this.privProperties.setProperty(t.PropertyId.SpeechServiceAuthorization_Token,o)}get speechRecognitionLanguage(){return this.privProperties.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage)}set speechRecognitionLanguage(o){this.privProperties.setProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage,o)}get autoDetectSourceLanguages(){return this.privProperties.getProperty(t.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)}set autoDetectSourceLanguages(o){this.privProperties.setProperty(t.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,o)}get outputFormat(){return t.OutputFormat[this.privProperties.getProperty(n.OutputFormatPropertyName,void 0)]}set outputFormat(o){this.privProperties.setProperty(n.OutputFormatPropertyName,t.OutputFormat[o])}get endpointId(){return this.privProperties.getProperty(t.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(o){this.privProperties.setProperty(t.PropertyId.SpeechServiceConnection_EndpointId,o)}setProperty(o,a){e.Contracts.throwIfNull(a,"value"),this.privProperties.setProperty(o,a)}getProperty(o,a){return this.privProperties.getProperty(o,a)}setProxy(o,a,l,c){this.setProperty(t.PropertyId[t.PropertyId.SpeechServiceConnection_ProxyHostName],o),this.setProperty(t.PropertyId[t.PropertyId.SpeechServiceConnection_ProxyPort],a),this.setProperty(t.PropertyId[t.PropertyId.SpeechServiceConnection_ProxyUserName],l),this.setProperty(t.PropertyId[t.PropertyId.SpeechServiceConnection_ProxyPassword],c)}setServiceProperty(o,a){const l=JSON.parse(this.privProperties.getProperty(n.ServicePropertiesPropertyName,"{}"));l[o]=a,this.privProperties.setProperty(n.ServicePropertiesPropertyName,JSON.stringify(l))}setProfanity(o){this.privProperties.setProperty(t.PropertyId.SpeechServiceResponse_ProfanityOption,t.ProfanityOption[o])}enableAudioLogging(){this.privProperties.setProperty(t.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privProperties.setProperty(t.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privProperties.setProperty(n.ForceDictationPropertyName,"true")}clone(){const o=new i;return o.privProperties=this.privProperties.clone(),o}get speechSynthesisLanguage(){return this.privProperties.getProperty(t.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(o){this.privProperties.setProperty(t.PropertyId.SpeechServiceConnection_SynthLanguage,o)}get speechSynthesisVoiceName(){return this.privProperties.getProperty(t.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(o){this.privProperties.setProperty(t.PropertyId.SpeechServiceConnection_SynthVoice,o)}get speechSynthesisOutputFormat(){return t.SpeechSynthesisOutputFormat[this.privProperties.getProperty(t.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(o){this.privProperties.setProperty(t.PropertyId.SpeechServiceConnection_SynthOutputFormat,t.SpeechSynthesisOutputFormat[o])}}return yp.SpeechConfigImpl=i,yp}var _p={},Tk;function yue(){if(Tk)return _p;Tk=1,Object.defineProperty(_p,"__esModule",{value:!0}),_p.SpeechTranslationConfigImpl=_p.SpeechTranslationConfig=void 0;const n=Wt(),e=In,t=vt();let r=class extends t.SpeechConfig{constructor(){super()}static fromSubscription(o,a){e.Contracts.throwIfNullOrWhitespace(o,"subscriptionKey"),e.Contracts.throwIfNullOrWhitespace(a,"region");const l=new i;return l.properties.setProperty(t.PropertyId.SpeechServiceConnection_Key,o),l.properties.setProperty(t.PropertyId.SpeechServiceConnection_Region,a),l}static fromAuthorizationToken(o,a){e.Contracts.throwIfNullOrWhitespace(o,"authorizationToken"),e.Contracts.throwIfNullOrWhitespace(a,"region");const l=new i;return l.properties.setProperty(t.PropertyId.SpeechServiceAuthorization_Token,o),l.properties.setProperty(t.PropertyId.SpeechServiceConnection_Region,a),l}static fromHost(o,a){e.Contracts.throwIfNull(o,"hostName");const l=new i;return l.setProperty(t.PropertyId.SpeechServiceConnection_Host,o.protocol+"//"+o.hostname+(o.port===""?"":":"+o.port)),a!==void 0&&l.setProperty(t.PropertyId.SpeechServiceConnection_Key,a),l}static fromEndpoint(o,a){e.Contracts.throwIfNull(o,"endpoint"),e.Contracts.throwIfNull(a,"subscriptionKey");const l=new i;return l.properties.setProperty(t.PropertyId.SpeechServiceConnection_Endpoint,o.href),l.properties.setProperty(t.PropertyId.SpeechServiceConnection_Key,a),l}};_p.SpeechTranslationConfig=r;class i extends r{constructor(){super(),this.privSpeechProperties=new t.PropertyCollection,this.outputFormat=t.OutputFormat.Simple}set authorizationToken(o){e.Contracts.throwIfNullOrWhitespace(o,"value"),this.privSpeechProperties.setProperty(t.PropertyId.SpeechServiceAuthorization_Token,o)}set speechRecognitionLanguage(o){e.Contracts.throwIfNullOrWhitespace(o,"value"),this.privSpeechProperties.setProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage,o)}get speechRecognitionLanguage(){return this.privSpeechProperties.getProperty(t.PropertyId[t.PropertyId.SpeechServiceConnection_RecoLanguage])}get subscriptionKey(){return this.privSpeechProperties.getProperty(t.PropertyId[t.PropertyId.SpeechServiceConnection_Key])}get outputFormat(){return t.OutputFormat[this.privSpeechProperties.getProperty(n.OutputFormatPropertyName,void 0)]}set outputFormat(o){this.privSpeechProperties.setProperty(n.OutputFormatPropertyName,t.OutputFormat[o])}get endpointId(){return this.privSpeechProperties.getProperty(t.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(o){this.privSpeechProperties.setProperty(t.PropertyId.SpeechServiceConnection_EndpointId,o)}addTargetLanguage(o){e.Contracts.throwIfNullOrWhitespace(o,"value");const a=this.targetLanguages;a.includes(o)||(a.push(o),this.privSpeechProperties.setProperty(t.PropertyId.SpeechServiceConnection_TranslationToLanguages,a.join(",")))}get targetLanguages(){return this.privSpeechProperties.getProperty(t.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0?this.privSpeechProperties.getProperty(t.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","):[]}get voiceName(){return this.getProperty(t.PropertyId[t.PropertyId.SpeechServiceConnection_TranslationVoice])}set voiceName(o){e.Contracts.throwIfNullOrWhitespace(o,"value"),this.privSpeechProperties.setProperty(t.PropertyId.SpeechServiceConnection_TranslationVoice,o)}get region(){return this.privSpeechProperties.getProperty(t.PropertyId.SpeechServiceConnection_Region)}setProxy(o,a,l,c){this.setProperty(t.PropertyId[t.PropertyId.SpeechServiceConnection_ProxyHostName],o),this.setProperty(t.PropertyId[t.PropertyId.SpeechServiceConnection_ProxyPort],a),this.setProperty(t.PropertyId[t.PropertyId.SpeechServiceConnection_ProxyUserName],l),this.setProperty(t.PropertyId[t.PropertyId.SpeechServiceConnection_ProxyPassword],c)}getProperty(o,a){return this.privSpeechProperties.getProperty(o,a)}setProperty(o,a){this.privSpeechProperties.setProperty(o,a)}get properties(){return this.privSpeechProperties}close(){}setServiceProperty(o,a){const l=JSON.parse(this.privSpeechProperties.getProperty(n.ServicePropertiesPropertyName,"{}"));l[o]=a,this.privSpeechProperties.setProperty(n.ServicePropertiesPropertyName,JSON.stringify(l))}setProfanity(o){this.privSpeechProperties.setProperty(t.PropertyId.SpeechServiceResponse_ProfanityOption,t.ProfanityOption[o])}enableAudioLogging(){this.privSpeechProperties.setProperty(t.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privSpeechProperties.setProperty(t.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privSpeechProperties.setProperty(n.ForceDictationPropertyName,"true")}get speechSynthesisLanguage(){return this.privSpeechProperties.getProperty(t.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(o){this.privSpeechProperties.setProperty(t.PropertyId.SpeechServiceConnection_SynthLanguage,o)}get speechSynthesisVoiceName(){return this.privSpeechProperties.getProperty(t.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(o){this.privSpeechProperties.setProperty(t.PropertyId.SpeechServiceConnection_SynthVoice,o)}get speechSynthesisOutputFormat(){return t.SpeechSynthesisOutputFormat[this.privSpeechProperties.getProperty(t.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(o){this.privSpeechProperties.setProperty(t.PropertyId.SpeechServiceConnection_SynthOutputFormat,t.SpeechSynthesisOutputFormat[o])}}return _p.SpeechTranslationConfigImpl=i,_p}var f1={},xk;function k$(){if(xk)return f1;xk=1,Object.defineProperty(f1,"__esModule",{value:!0}),f1.PropertyCollection=void 0;const n=vt();let e=class L${constructor(){this.privKeys=[],this.privValues=[]}getProperty(r,i){let s;typeof r=="string"?s=r:s=n.PropertyId[r];for(let o=0;o<this.privKeys.length;o++)if(this.privKeys[o]===s)return this.privValues[o];if(i!==void 0)return String(i)}setProperty(r,i){let s;typeof r=="string"?s=r:s=n.PropertyId[r];for(let o=0;o<this.privKeys.length;o++)if(this.privKeys[o]===s){this.privValues[o]=i;return}this.privKeys.push(s),this.privValues.push(i)}clone(){const r=new L$;for(let i=0;i<this.privKeys.length;i++)r.privKeys.push(this.privKeys[i]),r.privValues.push(this.privValues[i]);return r}mergeTo(r){this.privKeys.forEach(i=>{if(r.getProperty(i,void 0)===void 0){const s=this.getProperty(i);r.setProperty(i,s)}})}get keys(){return this.privKeys}};return f1.PropertyCollection=e,f1}var PI={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.PropertyId=void 0,function(e){e[e.SpeechServiceConnection_Key=0]="SpeechServiceConnection_Key",e[e.SpeechServiceConnection_Endpoint=1]="SpeechServiceConnection_Endpoint",e[e.SpeechServiceConnection_Region=2]="SpeechServiceConnection_Region",e[e.SpeechServiceAuthorization_Token=3]="SpeechServiceAuthorization_Token",e[e.SpeechServiceAuthorization_Type=4]="SpeechServiceAuthorization_Type",e[e.SpeechServiceConnection_EndpointId=5]="SpeechServiceConnection_EndpointId",e[e.SpeechServiceConnection_TranslationToLanguages=6]="SpeechServiceConnection_TranslationToLanguages",e[e.SpeechServiceConnection_TranslationVoice=7]="SpeechServiceConnection_TranslationVoice",e[e.SpeechServiceConnection_TranslationFeatures=8]="SpeechServiceConnection_TranslationFeatures",e[e.SpeechServiceConnection_IntentRegion=9]="SpeechServiceConnection_IntentRegion",e[e.SpeechServiceConnection_ProxyHostName=10]="SpeechServiceConnection_ProxyHostName",e[e.SpeechServiceConnection_ProxyPort=11]="SpeechServiceConnection_ProxyPort",e[e.SpeechServiceConnection_ProxyUserName=12]="SpeechServiceConnection_ProxyUserName",e[e.SpeechServiceConnection_ProxyPassword=13]="SpeechServiceConnection_ProxyPassword",e[e.SpeechServiceConnection_RecoMode=14]="SpeechServiceConnection_RecoMode",e[e.SpeechServiceConnection_RecoLanguage=15]="SpeechServiceConnection_RecoLanguage",e[e.Speech_SessionId=16]="Speech_SessionId",e[e.SpeechServiceConnection_SynthLanguage=17]="SpeechServiceConnection_SynthLanguage",e[e.SpeechServiceConnection_SynthVoice=18]="SpeechServiceConnection_SynthVoice",e[e.SpeechServiceConnection_SynthOutputFormat=19]="SpeechServiceConnection_SynthOutputFormat",e[e.SpeechServiceConnection_AutoDetectSourceLanguages=20]="SpeechServiceConnection_AutoDetectSourceLanguages",e[e.SpeechServiceResponse_RequestDetailedResultTrueFalse=21]="SpeechServiceResponse_RequestDetailedResultTrueFalse",e[e.SpeechServiceResponse_RequestProfanityFilterTrueFalse=22]="SpeechServiceResponse_RequestProfanityFilterTrueFalse",e[e.SpeechServiceResponse_JsonResult=23]="SpeechServiceResponse_JsonResult",e[e.SpeechServiceResponse_JsonErrorDetails=24]="SpeechServiceResponse_JsonErrorDetails",e[e.CancellationDetails_Reason=25]="CancellationDetails_Reason",e[e.CancellationDetails_ReasonText=26]="CancellationDetails_ReasonText",e[e.CancellationDetails_ReasonDetailedText=27]="CancellationDetails_ReasonDetailedText",e[e.LanguageUnderstandingServiceResponse_JsonResult=28]="LanguageUnderstandingServiceResponse_JsonResult",e[e.SpeechServiceConnection_Url=29]="SpeechServiceConnection_Url",e[e.SpeechServiceConnection_InitialSilenceTimeoutMs=30]="SpeechServiceConnection_InitialSilenceTimeoutMs",e[e.SpeechServiceConnection_EndSilenceTimeoutMs=31]="SpeechServiceConnection_EndSilenceTimeoutMs",e[e.Speech_SegmentationSilenceTimeoutMs=32]="Speech_SegmentationSilenceTimeoutMs",e[e.SpeechServiceConnection_EnableAudioLogging=33]="SpeechServiceConnection_EnableAudioLogging",e[e.SpeechServiceConnection_LanguageIdMode=34]="SpeechServiceConnection_LanguageIdMode",e[e.SpeechServiceConnection_RecognitionEndpointVersion=35]="SpeechServiceConnection_RecognitionEndpointVersion",e[e.SpeechServiceConnection_SpeakerIdMode=36]="SpeechServiceConnection_SpeakerIdMode",e[e.SpeechServiceResponse_ProfanityOption=37]="SpeechServiceResponse_ProfanityOption",e[e.SpeechServiceResponse_PostProcessingOption=38]="SpeechServiceResponse_PostProcessingOption",e[e.SpeechServiceResponse_RequestWordLevelTimestamps=39]="SpeechServiceResponse_RequestWordLevelTimestamps",e[e.SpeechServiceResponse_StablePartialResultThreshold=40]="SpeechServiceResponse_StablePartialResultThreshold",e[e.SpeechServiceResponse_OutputFormatOption=41]="SpeechServiceResponse_OutputFormatOption",e[e.SpeechServiceResponse_TranslationRequestStablePartialResult=42]="SpeechServiceResponse_TranslationRequestStablePartialResult",e[e.SpeechServiceResponse_RequestWordBoundary=43]="SpeechServiceResponse_RequestWordBoundary",e[e.SpeechServiceResponse_RequestPunctuationBoundary=44]="SpeechServiceResponse_RequestPunctuationBoundary",e[e.SpeechServiceResponse_RequestSentenceBoundary=45]="SpeechServiceResponse_RequestSentenceBoundary",e[e.Conversation_ApplicationId=46]="Conversation_ApplicationId",e[e.Conversation_DialogType=47]="Conversation_DialogType",e[e.Conversation_Initial_Silence_Timeout=48]="Conversation_Initial_Silence_Timeout",e[e.Conversation_From_Id=49]="Conversation_From_Id",e[e.Conversation_Conversation_Id=50]="Conversation_Conversation_Id",e[e.Conversation_Custom_Voice_Deployment_Ids=51]="Conversation_Custom_Voice_Deployment_Ids",e[e.Conversation_Speech_Activity_Template=52]="Conversation_Speech_Activity_Template",e[e.Conversation_Request_Bot_Status_Messages=53]="Conversation_Request_Bot_Status_Messages",e[e.Conversation_Agent_Connection_Id=54]="Conversation_Agent_Connection_Id",e[e.SpeechServiceConnection_Host=55]="SpeechServiceConnection_Host",e[e.ConversationTranslator_Host=56]="ConversationTranslator_Host",e[e.ConversationTranslator_Name=57]="ConversationTranslator_Name",e[e.ConversationTranslator_CorrelationId=58]="ConversationTranslator_CorrelationId",e[e.ConversationTranslator_Token=59]="ConversationTranslator_Token",e[e.PronunciationAssessment_ReferenceText=60]="PronunciationAssessment_ReferenceText",e[e.PronunciationAssessment_GradingSystem=61]="PronunciationAssessment_GradingSystem",e[e.PronunciationAssessment_Granularity=62]="PronunciationAssessment_Granularity",e[e.PronunciationAssessment_EnableMiscue=63]="PronunciationAssessment_EnableMiscue",e[e.PronunciationAssessment_Json=64]="PronunciationAssessment_Json",e[e.PronunciationAssessment_Params=65]="PronunciationAssessment_Params",e[e.SpeakerRecognition_Api_Version=66]="SpeakerRecognition_Api_Version",e[e.WebWorkerLoadType=67]="WebWorkerLoadType",e[e.TalkingAvatarService_WebRTC_SDP=68]="TalkingAvatarService_WebRTC_SDP"}(n.PropertyId||(n.PropertyId={}))})(PI);var p1={},Ik;function _ue(){if(Ik)return p1;Ik=1;var n=Ze&&Ze.__awaiter||function(o,a,l,c){function u(d){return d instanceof l?d:new l(function(h){h(d)})}return new(l||(l=Promise))(function(d,h){function f(v){try{g(c.next(v))}catch(y){h(y)}}function m(v){try{g(c.throw(v))}catch(y){h(y)}}function g(v){v.done?d(v.value):u(v.value).then(f,m)}g((c=c.apply(o,a||[])).next())})};Object.defineProperty(p1,"__esModule",{value:!0}),p1.Recognizer=void 0;const e=Wt(),t=pn(),r=In,i=vt();let s=class B${constructor(a,l,c){this.audioConfig=a!==void 0?a:i.AudioConfig.fromDefaultMicrophoneInput(),this.privDisposed=!1,this.privProperties=l.clone(),this.privConnectionFactory=c,this.implCommonRecognizerSetup()}close(a,l){r.Contracts.throwIfDisposed(this.privDisposed),t.marshalPromiseToCallbacks(this.dispose(!0),a,l)}get internalData(){return this.privReco}dispose(a){return n(this,void 0,void 0,function*(){this.privDisposed||(this.privDisposed=!0,a&&this.privReco&&(yield this.privReco.audioSource.turnOff(),yield this.privReco.dispose()))})}static get telemetryEnabled(){return e.ServiceRecognizerBase.telemetryDataEnabled}static enableTelemetry(a){e.ServiceRecognizerBase.telemetryDataEnabled=a}implCommonRecognizerSetup(){let a=typeof window<"u"?"Browser":"Node",l="unknown",c="unknown";typeof navigator<"u"&&(a=a+"/"+navigator.platform,l=navigator.userAgent,c=navigator.appVersion);const u=this.createRecognizerConfig(new e.SpeechServiceConfig(new e.Context(new e.OS(a,l,c))));this.privReco=this.createServiceRecognizer(B$.getAuthFromProperties(this.privProperties),this.privConnectionFactory,this.audioConfig,u)}recognizeOnceAsyncImpl(a){return n(this,void 0,void 0,function*(){r.Contracts.throwIfDisposed(this.privDisposed);const l=new t.Deferred;yield this.implRecognizerStop(),yield this.privReco.recognize(a,l.resolve,l.reject);const c=yield l.promise;return yield this.implRecognizerStop(),c})}startContinuousRecognitionAsyncImpl(a){return n(this,void 0,void 0,function*(){r.Contracts.throwIfDisposed(this.privDisposed),yield this.implRecognizerStop(),yield this.privReco.recognize(a,void 0,void 0)})}stopContinuousRecognitionAsyncImpl(){return n(this,void 0,void 0,function*(){r.Contracts.throwIfDisposed(this.privDisposed),yield this.implRecognizerStop()})}implRecognizerStop(){return n(this,void 0,void 0,function*(){this.privReco&&(yield this.privReco.stopRecognizing())})}static getAuthFromProperties(a){const l=a.getProperty(i.PropertyId.SpeechServiceConnection_Key,void 0);return l&&l!==""?new e.CognitiveSubscriptionKeyAuthentication(l):new e.CognitiveTokenAuthentication(()=>{const u=a.getProperty(i.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(u)},()=>{const u=a.getProperty(i.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(u)})}};return p1.Recognizer=s,p1}var m1={},bk;function Sue(){if(bk)return m1;bk=1;var n=Ze&&Ze.__awaiter||function(o,a,l,c){function u(d){return d instanceof l?d:new l(function(h){h(d)})}return new(l||(l=Promise))(function(d,h){function f(v){try{g(c.next(v))}catch(y){h(y)}}function m(v){try{g(c.throw(v))}catch(y){h(y)}}function g(v){v.done?d(v.value):u(v.value).then(f,m)}g((c=c.apply(o,a||[])).next())})};Object.defineProperty(m1,"__esModule",{value:!0}),m1.SpeechRecognizer=void 0;const e=Wt(),t=pn(),r=In,i=vt();let s=class F$ extends i.Recognizer{constructor(a,l){const c=a;r.Contracts.throwIfNull(c,"speechConfig"),r.Contracts.throwIfNullOrWhitespace(c.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage),i.PropertyId[i.PropertyId.SpeechServiceConnection_RecoLanguage]),super(l,c.properties,new e.SpeechConnectionFactory),this.privDisposedRecognizer=!1}static FromConfig(a,l,c){const u=a;return l.properties.mergeTo(u.properties),new F$(a,c)}get endpointId(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(i.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){r.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(i.PropertyId.SpeechServiceAuthorization_Token,a)}get speechRecognitionLanguage(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(e.OutputFormatPropertyName,i.OutputFormat[i.OutputFormat.Simple])===i.OutputFormat[i.OutputFormat.Simple]?i.OutputFormat.Simple:i.OutputFormat.Detailed}get properties(){return this.privProperties}recognizeOnceAsync(a,l){t.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(e.RecognitionMode.Interactive),a,l)}startContinuousRecognitionAsync(a,l){t.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(e.RecognitionMode.Conversation),a,l)}stopContinuousRecognitionAsync(a,l){t.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),a,l)}startKeywordRecognitionAsync(a,l,c){r.Contracts.throwIfNull(a,"model"),c&&c("Not yet implemented.")}stopKeywordRecognitionAsync(a){a&&a()}close(a,l){r.Contracts.throwIfDisposed(this.privDisposedRecognizer),t.marshalPromiseToCallbacks(this.dispose(!0),a,l)}dispose(a){const l=Object.create(null,{dispose:{get:()=>super.dispose}});return n(this,void 0,void 0,function*(){this.privDisposedRecognizer||(a&&(this.privDisposedRecognizer=!0,yield this.implRecognizerStop()),yield l.dispose.call(this,a))})}createRecognizerConfig(a){return new e.RecognizerConfig(a,this.privProperties)}createServiceRecognizer(a,l,c,u){const d=c;return new e.SpeechServiceRecognizer(a,l,d,u,this)}};return m1.SpeechRecognizer=s,m1}var g1={},Mk;function Aue(){if(Mk)return g1;Mk=1;var n=Ze&&Ze.__awaiter||function(o,a,l,c){function u(d){return d instanceof l?d:new l(function(h){h(d)})}return new(l||(l=Promise))(function(d,h){function f(v){try{g(c.next(v))}catch(y){h(y)}}function m(v){try{g(c.throw(v))}catch(y){h(y)}}function g(v){v.done?d(v.value):u(v.value).then(f,m)}g((c=c.apply(o,a||[])).next())})};Object.defineProperty(g1,"__esModule",{value:!0}),g1.IntentRecognizer=void 0;const e=Wt(),t=pn(),r=In,i=vt();let s=class extends i.Recognizer{constructor(a,l){r.Contracts.throwIfNullOrUndefined(a,"speechConfig");const c=a;r.Contracts.throwIfNullOrUndefined(c,"speechConfig"),super(l,c.properties,new e.IntentConnectionFactory),this.privAddedIntents=[],this.privAddedLmIntents={},this.privDisposedIntentRecognizer=!1,this.privProperties=c.properties,r.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage),i.PropertyId[i.PropertyId.SpeechServiceConnection_RecoLanguage])}get speechRecognitionLanguage(){return r.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage)}get authorizationToken(){return this.properties.getProperty(i.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){this.properties.setProperty(i.PropertyId.SpeechServiceAuthorization_Token,a)}get properties(){return this.privProperties}recognizeOnceAsync(a,l){if(r.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),Object.keys(this.privAddedLmIntents).length!==0||this.privUmbrellaIntent!==void 0){const c=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",c.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(c.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}t.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(e.RecognitionMode.Interactive),a,l)}startContinuousRecognitionAsync(a,l){if(Object.keys(this.privAddedLmIntents).length!==0||this.privUmbrellaIntent!==void 0){const c=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",c.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(c.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}t.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(e.RecognitionMode.Conversation),a,l)}stopContinuousRecognitionAsync(a,l){t.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),a,l)}startKeywordRecognitionAsync(a,l,c){r.Contracts.throwIfNull(a,"model"),c&&c("Not yet implemented.")}stopKeywordRecognitionAsync(a,l){if(a)try{a()}catch(c){l&&l(c)}}addIntent(a,l){r.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),r.Contracts.throwIfNullOrWhitespace(l,"intentId"),r.Contracts.throwIfNullOrWhitespace(a,"simplePhrase"),this.privAddedIntents.push([l,a])}addIntentWithLanguageModel(a,l,c){r.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),r.Contracts.throwIfNullOrWhitespace(a,"intentId"),r.Contracts.throwIfNull(l,"model");const u=l;r.Contracts.throwIfNullOrWhitespace(u.appId,"model.appId"),this.privAddedLmIntents[a]=new e.AddedLmIntent(u,c)}addAllIntents(a,l){r.Contracts.throwIfNull(a,"model");const c=a;r.Contracts.throwIfNullOrWhitespace(c.appId,"model.appId"),this.privUmbrellaIntent=new e.AddedLmIntent(c,l)}close(a,l){r.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),t.marshalPromiseToCallbacks(this.dispose(!0),a,l)}createRecognizerConfig(a){return new e.RecognizerConfig(a,this.privProperties)}createServiceRecognizer(a,l,c,u){const d=c;return new e.IntentServiceRecognizer(a,l,d,u,this)}dispose(a){const l=Object.create(null,{dispose:{get:()=>super.dispose}});return n(this,void 0,void 0,function*(){this.privDisposedIntentRecognizer||a&&(this.privDisposedIntentRecognizer=!0,yield l.dispose.call(this,a))})}buildSpeechContext(){let a,l,c;const u=[];this.privUmbrellaIntent!==void 0&&(a=this.privUmbrellaIntent.modelImpl.appId,l=this.privUmbrellaIntent.modelImpl.region,c=this.privUmbrellaIntent.modelImpl.subscriptionKey);for(const d of Object.keys(this.privAddedLmIntents)){const h=this.privAddedLmIntents[d];if(a===void 0)a=h.modelImpl.appId;else if(a!==h.modelImpl.appId)throw new Error("Intents must all be from the same LUIS model");if(l===void 0)l=h.modelImpl.region;else if(l!==h.modelImpl.region)throw new Error("Intents must all be from the same LUIS model in a single region");if(c===void 0)c=h.modelImpl.subscriptionKey;else if(c!==h.modelImpl.subscriptionKey)throw new Error("Intents must all use the same subscription key");const f="luis/"+a+"-PRODUCTION#"+d;u.push(f)}return{Intent:{id:a,key:c===void 0?this.privProperties.getProperty(i.PropertyId[i.PropertyId.SpeechServiceConnection_Key]):c,provider:"LUIS"},ReferenceGrammars:this.privUmbrellaIntent===void 0?u:["luis/"+a+"-PRODUCTION"]}}};return g1.IntentRecognizer=s,g1}var z$={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.VoiceProfileType=void 0,function(e){e[e.TextIndependentIdentification=0]="TextIndependentIdentification",e[e.TextDependentVerification=1]="TextDependentVerification",e[e.TextIndependentVerification=2]="TextIndependentVerification"}(n.VoiceProfileType||(n.VoiceProfileType={}))})(z$);var v1={},y1={},Sp={},Rk;function U$(){if(Rk)return Sp;Rk=1,Object.defineProperty(Sp,"__esModule",{value:!0}),Sp.ConnectionMessageImpl=Sp.ConnectionMessage=void 0;const n=$s,e=pn(),t=k$(),r=PI;let i=class{};Sp.ConnectionMessage=i;class s{constructor(a){this.privConnectionMessage=a,this.privProperties=new t.PropertyCollection,this.privConnectionMessage.headers[n.HeaderNames.ConnectionId]&&this.privProperties.setProperty(r.PropertyId.Speech_SessionId,this.privConnectionMessage.headers[n.HeaderNames.ConnectionId]),Object.keys(this.privConnectionMessage.headers).forEach(l=>{this.privProperties.setProperty(l,this.privConnectionMessage.headers[l])})}get path(){return this.privConnectionMessage.headers[Object.keys(this.privConnectionMessage.headers).find(a=>a.toLowerCase()==="path".toLowerCase())]}get isTextMessage(){return this.privConnectionMessage.messageType===e.MessageType.Text}get isBinaryMessage(){return this.privConnectionMessage.messageType===e.MessageType.Binary}get TextMessage(){return this.privConnectionMessage.textBody}get binaryMessage(){return this.privConnectionMessage.binaryBody}get properties(){return this.privProperties}toString(){return""}}return Sp.ConnectionMessageImpl=s,Sp}var Nk;function j$(){if(Nk)return y1;Nk=1,Object.defineProperty(y1,"__esModule",{value:!0}),y1.Connection=void 0;const n=Wt(),e=pn(),t=U$(),r=In,i=vt();let s=class P4{static fromRecognizer(a){const l=a.internalData,c=new P4;return c.privInternalData=l,c.setupEvents(),c}static fromSynthesizer(a){const l=a.internalData,c=new P4;return c.privInternalData=l,c.setupEvents(),c}openConnection(a,l){e.marshalPromiseToCallbacks(this.privInternalData.connect(),a,l)}closeConnection(a,l){if(this.privInternalData instanceof n.SynthesisAdapterBase)throw new Error("Disconnecting a synthesizer's connection is currently not supported");e.marshalPromiseToCallbacks(this.privInternalData.disconnect(),a,l)}setMessageProperty(a,l,c){if(r.Contracts.throwIfNullOrWhitespace(l,"propertyName"),this.privInternalData instanceof n.ServiceRecognizerBase){if(a.toLowerCase()!=="speech.context")throw new Error("Only speech.context message property sets are currently supported for recognizer");this.privInternalData.speechContext.setSection(l,c)}else if(this.privInternalData instanceof n.SynthesisAdapterBase){if(a.toLowerCase()!=="synthesis.context")throw new Error("Only synthesis.context message property sets are currently supported for synthesizer");this.privInternalData.synthesisContext.setSection(l,c)}}sendMessageAsync(a,l,c,u){e.marshalPromiseToCallbacks(this.privInternalData.sendNetworkMessage(a,l),c,u)}close(){}setupEvents(){this.privEventListener=this.privInternalData.connectionEvents.attach(a=>{a.name==="ConnectionEstablishedEvent"?this.connected&&this.connected(new i.ConnectionEventArgs(a.connectionId)):a.name==="ConnectionClosedEvent"?this.disconnected&&this.disconnected(new i.ConnectionEventArgs(a.connectionId)):a.name==="ConnectionMessageSentEvent"?this.messageSent&&this.messageSent(new i.ConnectionMessageEventArgs(new t.ConnectionMessageImpl(a.message))):a.name==="ConnectionMessageReceivedEvent"&&this.messageReceived&&this.messageReceived(new i.ConnectionMessageEventArgs(new t.ConnectionMessageImpl(a.message)))}),this.privServiceEventListener=this.privInternalData.serviceEvents.attach(a=>{this.receivedServiceMessage&&this.receivedServiceMessage(new i.ServiceEventArgs(a.jsonString,a.name))})}};return y1.Connection=s,y1}var Pk;function Eue(){if(Pk)return v1;Pk=1;var n=Ze&&Ze.__awaiter||function(a,l,c,u){function d(h){return h instanceof c?h:new c(function(f){f(h)})}return new(c||(c=Promise))(function(h,f){function m(y){try{v(u.next(y))}catch(A){f(A)}}function g(y){try{v(u.throw(y))}catch(A){f(A)}}function v(y){y.done?h(y.value):d(y.value).then(m,g)}v((u=u.apply(a,l||[])).next())})};Object.defineProperty(v1,"__esModule",{value:!0}),v1.TranslationRecognizer=void 0;const e=Wt(),t=pn(),r=j$(),i=In,s=vt();let o=class G$ extends s.Recognizer{constructor(l,c,u){const d=l;i.Contracts.throwIfNull(d,"speechConfig"),super(c,d.properties,u||new e.TranslationConnectionFactory),this.privDisposedTranslationRecognizer=!1,this.properties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)!==void 0&&i.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationVoice),s.PropertyId[s.PropertyId.SpeechServiceConnection_TranslationVoice]),i.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages),s.PropertyId[s.PropertyId.SpeechServiceConnection_TranslationToLanguages]),i.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage),s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage])}static FromConfig(l,c,u){const d=l;return c.properties.mergeTo(d.properties),new G$(l,u)}get speechRecognitionLanguage(){return i.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage)}get targetLanguages(){return i.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",")}get voiceName(){return i.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(l){this.properties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,l)}recognizeOnceAsync(l,c){i.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),t.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(e.RecognitionMode.Interactive),l,c)}startContinuousRecognitionAsync(l,c){t.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(e.RecognitionMode.Conversation),l,c)}stopContinuousRecognitionAsync(l,c){t.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),l,c)}removeTargetLanguage(l){if(i.Contracts.throwIfNullOrUndefined(l,"language to be removed"),this.properties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0){const c=this.properties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),u=c.indexOf(l);u>-1&&(c.splice(u,1),this.properties.setProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages,c.join(",")),this.updateLanguages(c))}}addTargetLanguage(l){i.Contracts.throwIfNullOrUndefined(l,"language to be added");let c=[];this.properties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0?(c=this.properties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),c.includes(l)||(c.push(l),this.properties.setProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages,c.join(",")))):(this.properties.setProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages,l),c=[l]),this.updateLanguages(c)}close(l,c){i.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),t.marshalPromiseToCallbacks(this.dispose(!0),l,c)}onConnection(){}dispose(l){const c=Object.create(null,{dispose:{get:()=>super.dispose}});return n(this,void 0,void 0,function*(){this.privDisposedTranslationRecognizer||(this.privDisposedTranslationRecognizer=!0,l&&(yield this.implRecognizerStop(),yield c.dispose.call(this,l)))})}createRecognizerConfig(l){return new e.RecognizerConfig(l,this.privProperties)}createServiceRecognizer(l,c,u,d){const h=u;return new e.TranslationServiceRecognizer(l,c,h,d,this)}updateLanguages(l){const c=r.Connection.fromRecognizer(this);c&&(c.setMessageProperty("speech.context","translationcontext",{to:l}),c.sendMessageAsync("event",JSON.stringify({id:"translation",name:"updateLanguage",to:l})))}};return v1.TranslationRecognizer=o,v1}var _1={},Ok;function Cue(){if(Ok)return _1;Ok=1,Object.defineProperty(_1,"__esModule",{value:!0}),_1.Translations=void 0;const n=vt();let e=class{constructor(){this.privMap=new n.PropertyCollection}get languages(){return this.privMap.keys}get(r,i){return this.privMap.getProperty(r,i)}set(r,i){this.privMap.setProperty(r,i)}};return _1.Translations=e,_1}var H$={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.NoMatchReason=void 0,function(e){e[e.NotRecognized=0]="NotRecognized",e[e.InitialSilenceTimeout=1]="InitialSilenceTimeout",e[e.InitialBabbleTimeout=2]="InitialBabbleTimeout"}(n.NoMatchReason||(n.NoMatchReason={}))})(H$);var S1={},Dk;function wue(){if(Dk)return S1;Dk=1,Object.defineProperty(S1,"__esModule",{value:!0}),S1.NoMatchDetails=void 0;const n=Wt(),e=vt();let t=class V${constructor(i){this.privReason=i}static fromResult(i){const s=n.SimpleSpeechPhrase.fromJSON(i.json);let o=e.NoMatchReason.NotRecognized;switch(s.RecognitionStatus){case n.RecognitionStatus.BabbleTimeout:o=e.NoMatchReason.InitialBabbleTimeout;break;case n.RecognitionStatus.InitialSilenceTimeout:o=e.NoMatchReason.InitialSilenceTimeout;break;default:o=e.NoMatchReason.NotRecognized;break}return new V$(o)}get reason(){return this.privReason}};return S1.NoMatchDetails=t,S1}var OI={};Object.defineProperty(OI,"__esModule",{value:!0});OI.TranslationRecognitionCanceledEventArgs=void 0;class Tue{constructor(e,t,r,i,s){this.privCancelReason=t,this.privErrorDetails=r,this.privResult=s,this.privSessionId=e,this.privErrorCode=i}get result(){return this.privResult}get sessionId(){return this.privSessionId}get reason(){return this.privCancelReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}}OI.TranslationRecognitionCanceledEventArgs=Tue;var A1={},Lk;function xue(){if(Lk)return A1;Lk=1,Object.defineProperty(A1,"__esModule",{value:!0}),A1.IntentRecognitionCanceledEventArgs=void 0;const n=vt();let e=class extends n.IntentRecognitionEventArgs{constructor(r,i,s,o,a,l){super(o,a,l),this.privReason=r,this.privErrorDetails=i,this.privErrorCode=s}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};return A1.IntentRecognitionCanceledEventArgs=e,A1}var YS={};Object.defineProperty(YS,"__esModule",{value:!0});YS.CancellationDetailsBase=void 0;class Iue{constructor(e,t,r){this.privReason=e,this.privErrorDetails=t,this.privErrorCode=r}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get ErrorCode(){return this.privErrorCode}}YS.CancellationDetailsBase=Iue;var E1={},kk;function bue(){if(kk)return E1;kk=1,Object.defineProperty(E1,"__esModule",{value:!0}),E1.CancellationDetails=void 0;const n=Wt(),e=YS,t=vt();let r=class $$ extends e.CancellationDetailsBase{constructor(s,o,a){super(s,o,a)}static fromResult(s){let o=t.CancellationReason.Error,a=t.CancellationErrorCode.NoError;if(s instanceof t.RecognitionResult&&s.json){const l=n.SimpleSpeechPhrase.fromJSON(s.json);o=n.EnumTranslation.implTranslateCancelResult(l.RecognitionStatus)}return s.properties&&(a=t.CancellationErrorCode[s.properties.getProperty(n.CancellationErrorCodePropertyName,t.CancellationErrorCode[t.CancellationErrorCode.NoError])]),new $$(o,s.errorDetails||n.EnumTranslation.implTranslateErrorDetails(a),a)}};return E1.CancellationDetails=r,E1}var W$={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.CancellationErrorCode=void 0,function(e){e[e.NoError=0]="NoError",e[e.AuthenticationFailure=1]="AuthenticationFailure",e[e.BadRequestParameters=2]="BadRequestParameters",e[e.TooManyRequests=3]="TooManyRequests",e[e.ConnectionFailure=4]="ConnectionFailure",e[e.ServiceTimeout=5]="ServiceTimeout",e[e.ServiceError=6]="ServiceError",e[e.RuntimeError=7]="RuntimeError",e[e.Forbidden=8]="Forbidden"}(n.CancellationErrorCode||(n.CancellationErrorCode={}))})(W$);var C1={},Bk;function Mue(){if(Bk)return C1;Bk=1,Object.defineProperty(C1,"__esModule",{value:!0}),C1.ConnectionEventArgs=void 0;const n=vt();let e=class extends n.SessionEventArgs{};return C1.ConnectionEventArgs=e,C1}var w1={},Fk;function Rue(){if(Fk)return w1;Fk=1,Object.defineProperty(w1,"__esModule",{value:!0}),w1.ServiceEventArgs=void 0;const n=vt();let e=class extends n.SessionEventArgs{constructor(r,i,s){super(s),this.privJsonResult=r,this.privEventName=i}get jsonString(){return this.privJsonResult}get eventName(){return this.privEventName}};return w1.ServiceEventArgs=e,w1}var DI={};Object.defineProperty(DI,"__esModule",{value:!0});DI.PhraseListGrammar=void 0;class TO{constructor(e){this.privGrammerBuilder=e.dynamicGrammar}static fromRecognizer(e){const t=e.internalData;return new TO(t)}addPhrase(e){this.privGrammerBuilder.addPhrase(e)}addPhrases(e){this.privGrammerBuilder.addPhrase(e)}clear(){this.privGrammerBuilder.clearPhrases()}}DI.PhraseListGrammar=TO;var Ap={},zk;function xO(){if(zk)return Ap;zk=1,Object.defineProperty(Ap,"__esModule",{value:!0}),Ap.DialogServiceConfigImpl=Ap.DialogServiceConfig=void 0;const n=In,e=vt();let t=class{constructor(){}set applicationId(s){}static get DialogTypes(){return{BotFramework:"bot_framework",CustomCommands:"custom_commands"}}};Ap.DialogServiceConfig=t;class r extends t{constructor(){super(),this.privSpeechConfig=new e.SpeechConfigImpl}get properties(){return this.privSpeechConfig.properties}get speechRecognitionLanguage(){return this.privSpeechConfig.speechRecognitionLanguage}set speechRecognitionLanguage(s){n.Contracts.throwIfNullOrWhitespace(s,"value"),this.privSpeechConfig.speechRecognitionLanguage=s}get outputFormat(){return this.privSpeechConfig.outputFormat}set outputFormat(s){this.privSpeechConfig.outputFormat=s}setProperty(s,o){this.privSpeechConfig.setProperty(s,o)}getProperty(s,o){return this.privSpeechConfig.getProperty(s)}setProxy(s,o,a,l){this.setProperty(e.PropertyId.SpeechServiceConnection_ProxyHostName,s),this.setProperty(e.PropertyId.SpeechServiceConnection_ProxyPort,`${o}`),a&&this.setProperty(e.PropertyId.SpeechServiceConnection_ProxyUserName,a),l&&this.setProperty(e.PropertyId.SpeechServiceConnection_ProxyPassword,l)}setServiceProperty(s,o,a){this.privSpeechConfig.setServiceProperty(s,o)}close(){}}return Ap.DialogServiceConfigImpl=r,Ap}var T1={},Uk;function Nue(){if(Uk)return T1;Uk=1,Object.defineProperty(T1,"__esModule",{value:!0}),T1.BotFrameworkConfig=void 0;const n=In,e=xO(),t=vt();let r=class extends e.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(s,o,a){n.Contracts.throwIfNullOrWhitespace(s,"subscription"),n.Contracts.throwIfNullOrWhitespace(o,"region");const l=new e.DialogServiceConfigImpl;return l.setProperty(t.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.BotFramework),l.setProperty(t.PropertyId.SpeechServiceConnection_Key,s),l.setProperty(t.PropertyId.SpeechServiceConnection_Region,o),a&&l.setProperty(t.PropertyId.Conversation_ApplicationId,a),l}static fromAuthorizationToken(s,o,a){n.Contracts.throwIfNullOrWhitespace(s,"authorizationToken"),n.Contracts.throwIfNullOrWhitespace(o,"region");const l=new e.DialogServiceConfigImpl;return l.setProperty(t.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.BotFramework),l.setProperty(t.PropertyId.SpeechServiceAuthorization_Token,s),l.setProperty(t.PropertyId.SpeechServiceConnection_Region,o),a&&l.setProperty(t.PropertyId.Conversation_ApplicationId,a),l}static fromHost(s,o,a){n.Contracts.throwIfNullOrUndefined(s,"host");const l=s instanceof URL?s:new URL(`wss://${s}.convai.speech.azure.us`);n.Contracts.throwIfNullOrUndefined(l,"resolvedHost");const c=new e.DialogServiceConfigImpl;return c.setProperty(t.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.BotFramework),c.setProperty(t.PropertyId.SpeechServiceConnection_Host,l.toString()),o!==void 0&&c.setProperty(t.PropertyId.SpeechServiceConnection_Key,o),c}static fromEndpoint(s,o){n.Contracts.throwIfNull(s,"endpoint");const a=new e.DialogServiceConfigImpl;return a.setProperty(t.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.BotFramework),a.setProperty(t.PropertyId.SpeechServiceConnection_Endpoint,s.toString()),o!==void 0&&a.setProperty(t.PropertyId.SpeechServiceConnection_Key,o),a}};return T1.BotFrameworkConfig=r,T1}var x1={},jk;function Pue(){if(jk)return x1;jk=1,Object.defineProperty(x1,"__esModule",{value:!0}),x1.CustomCommandsConfig=void 0;const n=In,e=xO(),t=vt();let r=class extends e.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(s,o,a){n.Contracts.throwIfNullOrWhitespace(s,"applicationId"),n.Contracts.throwIfNullOrWhitespace(o,"subscription"),n.Contracts.throwIfNullOrWhitespace(a,"region");const l=new e.DialogServiceConfigImpl;return l.setProperty(t.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.CustomCommands),l.setProperty(t.PropertyId.Conversation_ApplicationId,s),l.setProperty(t.PropertyId.SpeechServiceConnection_Key,o),l.setProperty(t.PropertyId.SpeechServiceConnection_Region,a),l}static fromAuthorizationToken(s,o,a){n.Contracts.throwIfNullOrWhitespace(s,"applicationId"),n.Contracts.throwIfNullOrWhitespace(o,"authorizationToken"),n.Contracts.throwIfNullOrWhitespace(a,"region");const l=new e.DialogServiceConfigImpl;return l.setProperty(t.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.CustomCommands),l.setProperty(t.PropertyId.Conversation_ApplicationId,s),l.setProperty(t.PropertyId.SpeechServiceAuthorization_Token,o),l.setProperty(t.PropertyId.SpeechServiceConnection_Region,a),l}set applicationId(s){n.Contracts.throwIfNullOrWhitespace(s,"value"),this.setProperty(t.PropertyId.Conversation_ApplicationId,s)}get applicationId(){return this.getProperty(t.PropertyId.Conversation_ApplicationId)}};return x1.CustomCommandsConfig=r,x1}var I1={},b1={},M1={},Jc={};Object.defineProperty(Jc,"__esModule",{value:!0});Jc.QueryParameterNames=void 0;class $i{}Jc.QueryParameterNames=$i;$i.BotId="botid";$i.CustomSpeechDeploymentId="cid";$i.CustomVoiceDeploymentId="deploymentId";$i.EnableAudioLogging="storeAudio";$i.EnableLanguageId="lidEnabled";$i.EnableWordLevelTimestamps="wordLevelTimestamps";$i.EndSilenceTimeoutMs="endSilenceTimeoutMs";$i.SegmentationSilenceTimeoutMs="segmentationSilenceTimeoutMs";$i.Format="format";$i.InitialSilenceTimeoutMs="initialSilenceTimeoutMs";$i.Language="language";$i.Profanity="profanity";$i.RequestBotStatusMessages="enableBotMessageStatus";$i.StableIntermediateThreshold="stableIntermediateThreshold";$i.StableTranslation="stableTranslation";$i.TestHooks="testhooks";$i.Postprocessing="postprocessing";$i.CtsMeetingId="meetingId";$i.CtsDeviceId="deviceId";$i.CtsIsParticipant="isParticipant";$i.EnableAvatar="enableTalkingAvatar";var Gk;function Kc(){if(Gk)return M1;Gk=1,Object.defineProperty(M1,"__esModule",{value:!0}),M1.ConnectionFactoryBase=void 0;const n=Wt(),e=vt(),t=Jc;let r=class{static getHostSuffix(s){if(s){if(s.toLowerCase().startsWith("china"))return".azure.cn";if(s.toLowerCase().startsWith("usgov"))return".azure.us"}return".microsoft.com"}setCommonUrlParams(s,o,a){new Map([[e.PropertyId.Speech_SegmentationSilenceTimeoutMs,t.QueryParameterNames.SegmentationSilenceTimeoutMs],[e.PropertyId.SpeechServiceConnection_EnableAudioLogging,t.QueryParameterNames.EnableAudioLogging],[e.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,t.QueryParameterNames.EndSilenceTimeoutMs],[e.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,t.QueryParameterNames.InitialSilenceTimeoutMs],[e.PropertyId.SpeechServiceResponse_PostProcessingOption,t.QueryParameterNames.Postprocessing],[e.PropertyId.SpeechServiceResponse_ProfanityOption,t.QueryParameterNames.Profanity],[e.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,t.QueryParameterNames.EnableWordLevelTimestamps],[e.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,t.QueryParameterNames.StableIntermediateThreshold]]).forEach((u,d)=>{this.setUrlParameter(d,u,s,o,a)});const c=JSON.parse(s.parameters.getProperty(n.ServicePropertiesPropertyName,"{}"));Object.keys(c).forEach(u=>{o[u]=c[u]})}setUrlParameter(s,o,a,l,c){const u=a.parameters.getProperty(s,void 0);u&&(!c||c.search(o)===-1)&&(l[o]=u.toLocaleLowerCase())}};return M1.ConnectionFactoryBase=r,M1}var Hk;function Oue(){if(Hk)return b1;Hk=1,Object.defineProperty(b1,"__esModule",{value:!0}),b1.DialogConnectionFactory=void 0;const n=Ws(),e=Wt(),t=vt(),r=Kc(),i=Wt(),s=$s,o=Jc;class a extends r.ConnectionFactoryBase{create(c,u,d){const h=c.parameters.getProperty(t.PropertyId.Conversation_ApplicationId,""),f=c.parameters.getProperty(t.PropertyId.Conversation_DialogType),m=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region),g=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),v=c.parameters.getProperty(t.PropertyId.Conversation_Request_Bot_Status_Messages,"true"),y={};y[s.HeaderNames.ConnectionId]=d,y[o.QueryParameterNames.Format]=c.parameters.getProperty(e.OutputFormatPropertyName,t.OutputFormat[t.OutputFormat.Simple]).toLowerCase(),y[o.QueryParameterNames.Language]=g,y[o.QueryParameterNames.RequestBotStatusMessages]=v,h&&(y[o.QueryParameterNames.BotId]=h,f===t.DialogServiceConfig.DialogTypes.CustomCommands&&(y[s.HeaderNames.CustomCommandsAppId]=h));const A=f===t.DialogServiceConfig.DialogTypes.CustomCommands?"commands/":"",C=f===t.DialogServiceConfig.DialogTypes.CustomCommands?"v1":f===t.DialogServiceConfig.DialogTypes.BotFramework?"v3":"v0",T={};u.token!=null&&u.token!==""&&(T[u.headerName]=u.token);let x=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint,"");if(!x){const N=r.ConnectionFactoryBase.getHostSuffix(m),M=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,`wss://${m}.${a.BaseUrl}${N}`);x=`${M.endsWith("/")?M:M+"/"}${A}${a.ApiKey}/${C}`}this.setCommonUrlParams(c,y,x);const R=c.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new n.WebsocketConnection(x,y,T,new i.WebsocketMessageFormatter,n.ProxyInfo.fromRecognizerConfig(c),R,d)}}return b1.DialogConnectionFactory=a,a.ApiKey="api",a.BaseUrl="convai.speech",b1}var Vk;function Due(){if(Vk)return I1;Vk=1;var n=Ze&&Ze.__awaiter||function(l,c,u,d){function h(f){return f instanceof u?f:new u(function(m){m(f)})}return new(u||(u=Promise))(function(f,m){function g(A){try{y(d.next(A))}catch(C){m(C)}}function v(A){try{y(d.throw(A))}catch(C){m(C)}}function y(A){A.done?f(A.value):h(A.value).then(g,v)}y((d=d.apply(l,c||[])).next())})};Object.defineProperty(I1,"__esModule",{value:!0}),I1.DialogServiceConnector=void 0;const e=Oue(),t=Wt(),r=pn(),i=In,s=vt(),o=PI;let a=class extends s.Recognizer{constructor(c,u){const d=c;i.Contracts.throwIfNull(c,"dialogConfig"),super(u,d.properties,new e.DialogConnectionFactory),this.isTurnComplete=!0,this.privIsDisposed=!1,this.privProperties=d.properties.clone();const h=this.buildAgentConfig();this.privReco.agentConfig.set(h)}connect(c,u){r.marshalPromiseToCallbacks(this.privReco.connect(),c,u)}disconnect(c,u){r.marshalPromiseToCallbacks(this.privReco.disconnect(),c,u)}get authorizationToken(){return this.properties.getProperty(o.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(c){i.Contracts.throwIfNullOrWhitespace(c,"token"),this.properties.setProperty(o.PropertyId.SpeechServiceAuthorization_Token,c)}get properties(){return this.privProperties}get speechActivityTemplate(){return this.properties.getProperty(o.PropertyId.Conversation_Speech_Activity_Template)}set speechActivityTemplate(c){this.properties.setProperty(o.PropertyId.Conversation_Speech_Activity_Template,c)}listenOnceAsync(c,u){if(this.isTurnComplete){i.Contracts.throwIfDisposed(this.privIsDisposed);const h=(()=>n(this,void 0,void 0,function*(){yield this.privReco.connect(),yield this.implRecognizerStop(),this.isTurnComplete=!1;const f=new r.Deferred;yield this.privReco.recognize(t.RecognitionMode.Conversation,f.resolve,f.reject);const m=yield f.promise;return yield this.implRecognizerStop(),m}))();h.catch(()=>{this.dispose(!0).catch(()=>{})}),r.marshalPromiseToCallbacks(h.finally(()=>{this.isTurnComplete=!0}),c,u)}}sendActivityAsync(c,u,d){r.marshalPromiseToCallbacks(this.privReco.sendMessage(c),u,d)}close(c,u){i.Contracts.throwIfDisposed(this.privIsDisposed),r.marshalPromiseToCallbacks(this.dispose(!0),c,u)}dispose(c){const u=Object.create(null,{dispose:{get:()=>super.dispose}});return n(this,void 0,void 0,function*(){this.privIsDisposed||c&&(this.privIsDisposed=!0,yield this.implRecognizerStop(),yield u.dispose.call(this,c))})}createRecognizerConfig(c){return new t.RecognizerConfig(c,this.privProperties)}createServiceRecognizer(c,u,d,h){const f=d;return new t.DialogServiceAdapter(c,u,f,h,this)}buildAgentConfig(){return{botInfo:{commType:this.properties.getProperty("Conversation_Communication_Type","Default"),commandsCulture:void 0,connectionId:this.properties.getProperty(o.PropertyId.Conversation_Agent_Connection_Id),conversationId:this.properties.getProperty(o.PropertyId.Conversation_Conversation_Id,void 0),fromId:this.properties.getProperty(o.PropertyId.Conversation_From_Id,void 0),ttsAudioFormat:this.properties.getProperty(o.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)},version:.2}}};return I1.DialogServiceConnector=a,I1}var LI={};Object.defineProperty(LI,"__esModule",{value:!0});LI.ActivityReceivedEventArgs=void 0;class Lue{constructor(e,t){this.privActivity=e,this.privAudioStream=t}get activity(){return this.privActivity}get audioStream(){return this.privAudioStream}}LI.ActivityReceivedEventArgs=Lue;var kI={},BI={};Object.defineProperty(BI,"__esModule",{value:!0});BI.TurnStatusResponsePayload=void 0;class IO{constructor(e){this.privMessageStatusResponse=JSON.parse(e)}static fromJSON(e){return new IO(e)}get interactionId(){return this.privMessageStatusResponse.interactionId}get conversationId(){return this.privMessageStatusResponse.conversationId}get statusCode(){switch(this.privMessageStatusResponse.statusCode){case"Success":return 200;case"Failed":return 400;case"TimedOut":return 429;default:return this.privMessageStatusResponse.statusCode}}}BI.TurnStatusResponsePayload=IO;Object.defineProperty(kI,"__esModule",{value:!0});kI.TurnStatusReceivedEventArgs=void 0;const kue=BI;class Bue{constructor(e){this.privTurnStatus=kue.TurnStatusResponsePayload.fromJSON(e)}get interactionId(){return this.privTurnStatus.interactionId}get conversationId(){return this.privTurnStatus.conversationId}get statusCode(){return this.privTurnStatus.statusCode}}kI.TurnStatusReceivedEventArgs=Bue;var q$={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ServicePropertyChannel=void 0,function(e){e[e.UriQueryParameter=0]="UriQueryParameter"}(n.ServicePropertyChannel||(n.ServicePropertyChannel={}))})(q$);var Q$={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ProfanityOption=void 0,function(e){e[e.Masked=0]="Masked",e[e.Removed=1]="Removed",e[e.Raw=2]="Raw"}(n.ProfanityOption||(n.ProfanityOption={}))})(Q$);var R1={},$k;function Fue(){if($k)return R1;$k=1;var n=Ze&&Ze.__awaiter||function(s,o,a,l){function c(u){return u instanceof a?u:new a(function(d){d(u)})}return new(a||(a=Promise))(function(u,d){function h(g){try{m(l.next(g))}catch(v){d(v)}}function f(g){try{m(l.throw(g))}catch(v){d(v)}}function m(g){g.done?u(g.value):c(g.value).then(h,f)}m((l=l.apply(s,o||[])).next())})};Object.defineProperty(R1,"__esModule",{value:!0}),R1.BaseAudioPlayer=void 0;const e=ro,t=vt(),r=Yf;let i=class{constructor(o){this.audioContext=null,this.gainNode=null,this.autoUpdateBufferTimer=0,o===void 0&&(o=t.AudioStreamFormat.getDefaultInputFormat()),this.init(o)}playAudioSample(o,a,l){try{this.ensureInitializedContext();const c=this.formatAudioData(o),u=new Float32Array(this.samples.length+c.length);u.set(this.samples,0),u.set(c,this.samples.length),this.samples=u,a&&a()}catch(c){l&&l(c)}}stopAudio(o,a){this.audioContext!==null&&(this.samples=new Float32Array,clearInterval(this.autoUpdateBufferTimer),this.audioContext.close().then(()=>{o&&o()},l=>{a&&a(l)}),this.audioContext=null)}init(o){this.audioFormat=o,this.samples=new Float32Array}ensureInitializedContext(){if(this.audioContext===null){this.createAudioContext();const o=200;this.autoUpdateBufferTimer=setInterval(()=>{this.updateAudioBuffer()},o)}}createAudioContext(){this.audioContext=r.AudioStreamFormatImpl.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioContext.destination),this.startTime=this.audioContext.currentTime}formatAudioData(o){switch(this.audioFormat.bitsPerSample){case 8:return this.formatArrayBuffer(new Int8Array(o),128);case 16:return this.formatArrayBuffer(new Int16Array(o),32768);case 32:return this.formatArrayBuffer(new Int32Array(o),2147483648);default:throw new e.InvalidOperationError("Only WAVE_FORMAT_PCM (8/16/32 bps) format supported at this time")}}formatArrayBuffer(o,a){const l=new Float32Array(o.length);for(let c=0;c<o.length;c++)l[c]=o[c]/a;return l}updateAudioBuffer(){if(this.samples.length===0)return;const o=this.audioFormat.channels,a=this.audioContext.createBufferSource(),l=this.samples.length/o,c=this.audioContext.createBuffer(o,l,this.audioFormat.samplesPerSec);for(let u=0;u<o;u++){let d=u;const h=c.getChannelData(u);for(let f=0;f<this.samples.length;f++,d+=o)h[f]=this.samples[d]}this.startTime<this.audioContext.currentTime&&(this.startTime=this.audioContext.currentTime),a.buffer=c,a.connect(this.gainNode),a.start(this.startTime),this.startTime+=c.duration,this.samples=new Float32Array}playAudio(o){return n(this,void 0,void 0,function*(){this.audioContext===null&&this.createAudioContext();const a=this.audioContext.createBufferSource(),l=this.audioContext.destination;yield this.audioContext.decodeAudioData(o,c=>{a.buffer=c,a.connect(l),a.start(0)})})}};return R1.BaseAudioPlayer=i,R1}var FI={};Object.defineProperty(FI,"__esModule",{value:!0});FI.ConnectionMessageEventArgs=void 0;class zue{constructor(e){this.privConnectionMessage=e}get message(){return this.privConnectionMessage}toString(){return"Message: "+this.privConnectionMessage.toString()}}FI.ConnectionMessageEventArgs=zue;var zI={};Object.defineProperty(zI,"__esModule",{value:!0});zI.VoiceProfile=void 0;class Uue{constructor(e,t){this.privId=e,this.privProfileType=t}get profileId(){return this.privId}get profileType(){return this.privProfileType}}zI.VoiceProfile=Uue;var Ep={},Wk;function jue(){if(Wk)return Ep;Wk=1,Object.defineProperty(Ep,"__esModule",{value:!0}),Ep.VoiceProfileEnrollmentCancellationDetails=Ep.VoiceProfileEnrollmentResult=void 0;const n=Wt(),e=vt();let t=class O4{constructor(s,o,a){this.privReason=s,this.privProperties=new e.PropertyCollection,this.privReason!==e.ResultReason.Canceled?o&&(this.privDetails=JSON.parse(o),this.privDetails.enrollmentStatus.toLowerCase()==="enrolling"&&(this.privReason=e.ResultReason.EnrollingVoiceProfile)):(this.privErrorDetails=a,this.privProperties.setProperty(n.CancellationErrorCodePropertyName,e.CancellationErrorCode[e.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get enrollmentsCount(){return this.privDetails.enrollmentsCount}get enrollmentsLength(){return this.privDetails.enrollmentsLength}get properties(){return this.privProperties}get enrollmentResultDetails(){return this.privDetails}get errorDetails(){return this.privErrorDetails}static FromIdentificationProfileList(s){const o=[];for(const a of s.value){const l=a.enrollmentStatus.toLowerCase()==="enrolling"?e.ResultReason.EnrollingVoiceProfile:a.enrollmentStatus.toLowerCase()==="enrolled"?e.ResultReason.EnrolledVoiceProfile:e.ResultReason.Canceled,c=new O4(l,null,null);c.privDetails=this.getIdentificationDetails(a),o.push(c)}return o}static FromVerificationProfileList(s){const o=[];for(const a of s.value){const l=a.enrollmentStatus.toLowerCase()==="enrolling"?e.ResultReason.EnrollingVoiceProfile:a.enrollmentStatus.toLowerCase()==="enrolled"?e.ResultReason.EnrolledVoiceProfile:e.ResultReason.Canceled,c=new O4(l,null,null);c.privDetails=this.getVerificationDetails(a),o.push(c)}return o}static getIdentificationDetails(s){return{audioLength:s.audioLength?parseFloat(s.audioLength):0,audioSpeechLength:s.audioSpeechLength?parseFloat(s.audioSpeechLength):0,enrollmentStatus:s.enrollmentStatus,enrollmentsCount:s.enrollmentsCount||0,enrollmentsLength:s.enrollmentsLength?parseFloat(s.enrollmentsLength):0,enrollmentsSpeechLength:s.enrollmentsSpeechLength?parseFloat(s.enrollmentsSpeechLength):0,profileId:s.profileId||s.identificationProfileId,remainingEnrollmentsSpeechLength:s.remainingEnrollmentsSpeechLength?parseFloat(s.remainingEnrollmentsSpeechLength):0}}static getVerificationDetails(s){return{audioLength:s.audioLength?parseFloat(s.audioLength):0,audioSpeechLength:s.audioSpeechLength?parseFloat(s.audioSpeechLength):0,enrollmentStatus:s.enrollmentStatus,enrollmentsCount:s.enrollmentsCount,enrollmentsLength:s.enrollmentsLength?parseFloat(s.enrollmentsLength):0,enrollmentsSpeechLength:s.enrollmentsSpeechLength?parseFloat(s.enrollmentsSpeechLength):0,profileId:s.profileId||s.verificationProfileId,remainingEnrollmentsCount:s.remainingEnrollments||s.remainingEnrollmentsCount,remainingEnrollmentsSpeechLength:s.remainingEnrollmentsSpeechLength?parseFloat(s.remainingEnrollmentsSpeechLength):0}}};Ep.VoiceProfileEnrollmentResult=t;class r extends e.CancellationDetailsBase{constructor(s,o,a){super(s,o,a)}static fromResult(s){const o=e.CancellationReason.Error;let a=e.CancellationErrorCode.NoError;return s.properties&&(a=e.CancellationErrorCode[s.properties.getProperty(n.CancellationErrorCodePropertyName,e.CancellationErrorCode[e.CancellationErrorCode.NoError])]),new r(o,s.errorDetails,a)}}return Ep.VoiceProfileEnrollmentCancellationDetails=r,Ep}var Cp={},qk;function Gue(){if(qk)return Cp;qk=1,Object.defineProperty(Cp,"__esModule",{value:!0}),Cp.VoiceProfileCancellationDetails=Cp.VoiceProfileResult=void 0;const n=Wt(),e=In,t=vt();let r=class{constructor(o,a){this.privReason=o,this.privProperties=new t.PropertyCollection,o===t.ResultReason.Canceled&&(e.Contracts.throwIfNullOrUndefined(a,"statusText"),this.privErrorDetails=a,this.privProperties.setProperty(n.CancellationErrorCodePropertyName,t.CancellationErrorCode[t.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get properties(){return this.privProperties}get errorDetails(){return this.privErrorDetails}};Cp.VoiceProfileResult=r;class i extends t.CancellationDetailsBase{constructor(o,a,l){super(o,a,l)}static fromResult(o){const a=t.CancellationReason.Error;let l=t.CancellationErrorCode.NoError;return o.properties&&(l=t.CancellationErrorCode[o.properties.getProperty(n.CancellationErrorCodePropertyName,t.CancellationErrorCode[t.CancellationErrorCode.NoError])]),new i(a,o.errorDetails,l)}}return Cp.VoiceProfileCancellationDetails=i,Cp}var N1={},Qk;function Hue(){if(Qk)return N1;Qk=1,Object.defineProperty(N1,"__esModule",{value:!0}),N1.VoiceProfilePhraseResult=void 0;const n=In,e=vt();let t=class extends e.VoiceProfileResult{constructor(i,s,o,a){super(i,s),this.privPhrases=[],n.Contracts.throwIfNullOrUndefined(a,"phrase array"),this.privType=o,a&&a[0]&&(this.privPhrases=a)}get phrases(){return this.privPhrases}get type(){return this.privType}};return N1.VoiceProfilePhraseResult=t,N1}var P1={},Jk;function Vue(){if(Jk)return P1;Jk=1;var n=Ze&&Ze.__awaiter||function(o,a,l,c){function u(d){return d instanceof l?d:new l(function(h){h(d)})}return new(l||(l=Promise))(function(d,h){function f(v){try{g(c.next(v))}catch(y){h(y)}}function m(v){try{g(c.throw(v))}catch(y){h(y)}}function g(v){v.done?d(v.value):u(v.value).then(f,m)}g((c=c.apply(o,a||[])).next())})};Object.defineProperty(P1,"__esModule",{value:!0}),P1.VoiceProfileClient=void 0;const e=Wt(),t=b$(),r=In,i=vt();let s=class extends i.Recognizer{constructor(a){r.Contracts.throwIfNullOrUndefined(a,"speechConfig");const l=a;r.Contracts.throwIfNull(l,"speechConfig"),super(t.AudioConfig.fromStreamInput(i.AudioInputStream.createPushStream()),l.properties,new e.VoiceProfileConnectionFactory),this.privProperties=l.properties.clone(),this.privVoiceAdapter=this.privReco,this.privDisposedVoiceAdapter=!1}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(i.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){r.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(i.PropertyId.SpeechServiceAuthorization_Token,a)}createProfileAsync(a,l){return n(this,void 0,void 0,function*(){const c=yield this.privVoiceAdapter.createProfile(a,l);return new i.VoiceProfile(c[0],a)})}retrieveEnrollmentResultAsync(a){return n(this,void 0,void 0,function*(){return this.privVoiceAdapter.retrieveEnrollmentResult(a)})}getAllProfilesAsync(a){return n(this,void 0,void 0,function*(){return this.privVoiceAdapter.getAllProfiles(a)})}getActivationPhrasesAsync(a,l){return n(this,void 0,void 0,function*(){return this.privVoiceAdapter.getActivationPhrases(a,l)})}enrollProfileAsync(a,l){return n(this,void 0,void 0,function*(){const c=l;return r.Contracts.throwIfNullOrUndefined(c,"audioConfig"),this.audioConfig=l,this.privVoiceAdapter.SpeakerAudioSource=c,this.privVoiceAdapter.enrollProfile(a)})}deleteProfileAsync(a){return n(this,void 0,void 0,function*(){return this.privVoiceAdapter.deleteProfile(a)})}resetProfileAsync(a){return n(this,void 0,void 0,function*(){return this.privVoiceAdapter.resetProfile(a)})}close(){return n(this,void 0,void 0,function*(){yield this.dispose(!0)})}createServiceRecognizer(a,l,c,u){const d=c;return new e.VoiceServiceRecognizer(a,l,d,u,this)}dispose(a){const l=Object.create(null,{dispose:{get:()=>super.dispose}});return n(this,void 0,void 0,function*(){this.privDisposedVoiceAdapter||(this.privDisposedVoiceAdapter=!0,a&&(yield l.dispose.call(this,a)))})}createRecognizerConfig(a){return new e.RecognizerConfig(a,this.properties)}getResult(a,l){return new i.VoiceProfileResult(a.ok?l:i.ResultReason.Canceled,a.statusText)}};return P1.VoiceProfileClient=s,P1}var O1={},Kk;function $ue(){if(Kk)return O1;Kk=1;var n=Ze&&Ze.__awaiter||function(s,o,a,l){function c(u){return u instanceof a?u:new a(function(d){d(u)})}return new(a||(a=Promise))(function(u,d){function h(g){try{m(l.next(g))}catch(v){d(v)}}function f(g){try{m(l.throw(g))}catch(v){d(v)}}function m(g){g.done?u(g.value):c(g.value).then(h,f)}m((l=l.apply(s,o||[])).next())})};Object.defineProperty(O1,"__esModule",{value:!0}),O1.SpeakerRecognizer=void 0;const e=Wt(),t=In,r=vt();let i=class extends r.Recognizer{constructor(o,a){t.Contracts.throwIfNullOrUndefined(o,"speechConfig");const l=o;t.Contracts.throwIfNullOrUndefined(l,"speechConfig"),super(a,l.properties,new e.SpeakerRecognitionConnectionFactory),this.privAudioConfigImpl=a,t.Contracts.throwIfNull(this.privAudioConfigImpl,"audioConfig"),this.privDisposedSpeakerRecognizer=!1,this.privProperties=l.properties}get authorizationToken(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(o){t.Contracts.throwIfNullOrWhitespace(o,"token"),this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,o)}get properties(){return this.privProperties}recognizeOnceAsync(o){return n(this,void 0,void 0,function*(){return t.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),this.recognizeSpeakerOnceAsyncImpl(o)})}close(){return n(this,void 0,void 0,function*(){t.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),yield this.dispose(!0)})}recognizeSpeakerOnceAsyncImpl(o){return n(this,void 0,void 0,function*(){t.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),yield this.implRecognizerStop();const a=yield this.privReco.recognizeSpeaker(o);return yield this.implRecognizerStop(),a})}implRecognizerStop(){return n(this,void 0,void 0,function*(){this.privReco&&(yield this.privReco.stopRecognizing())})}createRecognizerConfig(o){return new e.RecognizerConfig(o,this.privProperties)}createServiceRecognizer(o,a,l,c){const u=l;return new e.SpeakerServiceRecognizer(o,a,u,c,this)}dispose(o){const a=Object.create(null,{dispose:{get:()=>super.dispose}});return n(this,void 0,void 0,function*(){this.privDisposedSpeakerRecognizer||o&&(this.privDisposedSpeakerRecognizer=!0,yield a.dispose.call(this,o))})}};return O1.SpeakerRecognizer=i,O1}var D1={},Yk;function Wue(){if(Yk)return D1;Yk=1,Object.defineProperty(D1,"__esModule",{value:!0}),D1.SpeakerIdentificationModel=void 0;const n=In,e=vt();let t=class J${constructor(i){if(this.privVoiceProfiles=[],this.privProfileIds=[],n.Contracts.throwIfNullOrUndefined(i,"VoiceProfiles"),i.length===0)throw new Error("Empty Voice Profiles array");for(const s of i){if(s.profileType!==e.VoiceProfileType.TextIndependentIdentification)throw new Error("Identification model can only be created from Identification profile: "+s.profileId);this.privVoiceProfiles.push(s),this.privProfileIds.push(s.profileId)}}static fromProfiles(i){return new J$(i)}get voiceProfileIds(){return this.privProfileIds.join(",")}get profileIds(){return this.privProfileIds}get scenario(){return"TextIndependentIdentification"}};return D1.SpeakerIdentificationModel=t,D1}var L1={},Xk;function que(){if(Xk)return L1;Xk=1,Object.defineProperty(L1,"__esModule",{value:!0}),L1.SpeakerVerificationModel=void 0;const n=In,e=vt();let t=class K${constructor(i){if(n.Contracts.throwIfNullOrUndefined(i,"VoiceProfile"),i.profileType===e.VoiceProfileType.TextIndependentIdentification)throw new Error("Verification model cannot be created from Identification profile");this.privVoiceProfile=i}static fromProfile(i){return new K$(i)}get voiceProfile(){return this.privVoiceProfile}get profileIds(){return[this.voiceProfile.profileId]}get scenario(){return this.voiceProfile.profileType===e.VoiceProfileType.TextDependentVerification?"TextDependentVerification":"TextIndependentVerification"}};return L1.SpeakerVerificationModel=t,L1}var k1={},bO={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.LanguageIdMode=void 0,function(e){e[e.AtStart=0]="AtStart",e[e.Continuous=1]="Continuous"}(n.LanguageIdMode||(n.LanguageIdMode={}))})(bO);var Zk;function Que(){if(Zk)return k1;Zk=1,Object.defineProperty(k1,"__esModule",{value:!0}),k1.AutoDetectSourceLanguageConfig=void 0;const n=Wt(),e=In,t=vt(),r=bO;let i=class Zw{constructor(){this.privProperties=new t.PropertyCollection,this.privProperties.setProperty(t.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart"),this.privLanguageIdMode=r.LanguageIdMode.AtStart}static fromOpenRange(){const o=new Zw;return o.properties.setProperty(t.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,n.AutoDetectSourceLanguagesOpenRangeOptionName),o}static fromLanguages(o){e.Contracts.throwIfArrayEmptyOrWhitespace(o,"languages");const a=new Zw;return a.properties.setProperty(t.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,o.join()),a}static fromSourceLanguageConfigs(o){if(o.length<1)throw new Error("Expected non-empty SourceLanguageConfig array.");const a=new Zw,l=[];return o.forEach(c=>{if(l.push(c.language),c.endpointId!==void 0&&c.endpointId!==""){const u=c.language+t.PropertyId.SpeechServiceConnection_EndpointId.toString();a.properties.setProperty(u,c.endpointId)}}),a.properties.setProperty(t.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,l.join()),a}get properties(){return this.privProperties}set mode(o){o===r.LanguageIdMode.Continuous?(this.privProperties.setProperty(t.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privProperties.setProperty(t.PropertyId.SpeechServiceConnection_LanguageIdMode,"Continuous")):(this.privProperties.setProperty(t.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"1"),this.privProperties.setProperty(t.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart")),this.privLanguageIdMode=o}};return k1.AutoDetectSourceLanguageConfig=i,k1}var UI={};Object.defineProperty(UI,"__esModule",{value:!0});UI.AutoDetectSourceLanguageResult=void 0;const e7=In;class ZT{constructor(e,t){e7.Contracts.throwIfNullOrUndefined(e,"language"),e7.Contracts.throwIfNullOrUndefined(t,"languageDetectionConfidence"),this.privLanguage=e,this.privLanguageDetectionConfidence=t}static fromResult(e){return new ZT(e.language,e.languageDetectionConfidence)}static fromConversationTranscriptionResult(e){return new ZT(e.language,e.languageDetectionConfidence)}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}}UI.AutoDetectSourceLanguageResult=ZT;var jI={};Object.defineProperty(jI,"__esModule",{value:!0});jI.SourceLanguageConfig=void 0;const Jue=In;class MO{constructor(e,t){Jue.Contracts.throwIfNullOrUndefined(e,"language"),this.privLanguage=e,this.privEndpointId=t}static fromLanguage(e,t){return new MO(e,t)}get language(){return this.privLanguage}get endpointId(){return this.privEndpointId}}jI.SourceLanguageConfig=MO;var TM={},t7;function Kue(){return t7||(t7=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.SpeakerRecognitionCancellationDetails=n.SpeakerRecognitionResult=n.SpeakerRecognitionResultType=void 0;const e=Wt(),t=vt();var r;(function(o){o[o.Verify=0]="Verify",o[o.Identify=1]="Identify"})(r=n.SpeakerRecognitionResultType||(n.SpeakerRecognitionResultType={}));class i{constructor(a,l=t.ResultReason.RecognizedSpeaker,c=t.CancellationErrorCode.NoError,u=""){this.privProperties=new t.PropertyCollection;const d=a.scenario==="TextIndependentIdentification"?r.Identify:r.Verify;this.privReason=l,this.privReason!==t.ResultReason.Canceled?d===r.Identify?(this.privProfileId=a.identificationResult.identifiedProfile.profileId,this.privScore=a.identificationResult.identifiedProfile.score,this.privReason=t.ResultReason.RecognizedSpeakers):(this.privScore=a.verificationResult.score,a.verificationResult.recognitionResult.toLowerCase()!=="accept"&&(this.privReason=t.ResultReason.NoMatch),a.verificationResult.profileId!==void 0&&a.verificationResult.profileId!==""&&(this.privProfileId=a.verificationResult.profileId)):(this.privErrorDetails=u,this.privProperties.setProperty(e.CancellationErrorCodePropertyName,t.CancellationErrorCode[c])),this.privProperties.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,JSON.stringify(a))}get properties(){return this.privProperties}get reason(){return this.privReason}get profileId(){return this.privProfileId}get errorDetails(){return this.privErrorDetails}get score(){return this.privScore}}n.SpeakerRecognitionResult=i;class s extends t.CancellationDetailsBase{constructor(a,l,c){super(a,l,c)}static fromResult(a){const l=t.CancellationReason.Error;let c=t.CancellationErrorCode.NoError;return a.properties&&(c=t.CancellationErrorCode[a.properties.getProperty(e.CancellationErrorCodePropertyName,t.CancellationErrorCode[t.CancellationErrorCode.NoError])]),new s(l,a.errorDetails,c)}}n.SpeakerRecognitionCancellationDetails=s}(TM)),TM}var xM={},wp={},n7;function Y$(){if(n7)return wp;n7=1;var n=Ze&&Ze.__awaiter||function(a,l,c,u){function d(h){return h instanceof c?h:new c(function(f){f(h)})}return new(c||(c=Promise))(function(h,f){function m(y){try{v(u.next(y))}catch(A){f(A)}}function g(y){try{v(u.throw(y))}catch(A){f(A)}}function v(y){y.done?h(y.value):d(y.value).then(m,g)}v((u=u.apply(a,l||[])).next())})};Object.defineProperty(wp,"__esModule",{value:!0}),wp.ConversationImpl=wp.Conversation=void 0;const e=Wt(),t=pn(),r=In,i=vt();let s=class{constructor(){}static createConversationAsync(l,c,u,d){r.Contracts.throwIfNullOrUndefined(l,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),r.Contracts.throwIfNullOrUndefined(l.region,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),!l.subscriptionKey&&!l.getProperty(i.PropertyId[i.PropertyId.SpeechServiceAuthorization_Token])&&r.Contracts.throwIfNullOrUndefined(l.subscriptionKey,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));let h,f,m;return typeof c=="string"?(h=new o(l,c),t.marshalPromiseToCallbacks((()=>n(this,void 0,void 0,function*(){}))(),u,d)):(h=new o(l),f=c,m=u,h.createConversationAsync(()=>{f&&f()},g=>{m&&m(g)})),h}};wp.Conversation=s;class o extends s{constructor(l,c){if(super(),this.privErrors=e.ConversationConnectionConfig.restErrors,this.onConnected=h=>{var f;this.privIsConnected=!0;try{!((f=this.privConversationTranslator)===null||f===void 0)&&f.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,h)}catch{}},this.onDisconnected=h=>{var f;try{!((f=this.privConversationTranslator)===null||f===void 0)&&f.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,h)}catch{}finally{this.close(!1)}},this.onCanceled=(h,f)=>{var m;try{!((m=this.privConversationTranslator)===null||m===void 0)&&m.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,f)}catch{}},this.onParticipantUpdateCommandReceived=(h,f)=>{try{const m=this.privParticipants.getParticipant(f.id);if(m!==void 0){switch(f.key){case e.ConversationTranslatorCommandTypes.changeNickname:m.displayName=f.value;break;case e.ConversationTranslatorCommandTypes.setUseTTS:m.isUsingTts=f.value;break;case e.ConversationTranslatorCommandTypes.setProfanityFiltering:m.profanity=f.value;break;case e.ConversationTranslatorCommandTypes.setMute:m.isMuted=f.value;break;case e.ConversationTranslatorCommandTypes.setTranslateToLanguages:m.translateToLanguages=f.value;break}this.privParticipants.addOrUpdateParticipant(m),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new i.ConversationParticipantsChangedEventArgs(i.ParticipantChangedReason.Updated,[this.toParticipant(m)],f.sessionId))}}catch{}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(h,f)=>{try{this.privParticipants.participants.forEach(m=>m.isMuted=m.isHost?!1:f.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new i.ConversationParticipantsChangedEventArgs(i.ParticipantChangedReason.Updated,this.toParticipants(!1),f.sessionId))}catch{}},this.onParticipantJoinCommandReceived=(h,f)=>{try{const m=this.privParticipants.addOrUpdateParticipant(f.participant);m!==void 0&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new i.ConversationParticipantsChangedEventArgs(i.ParticipantChangedReason.JoinedConversation,[this.toParticipant(m)],f.sessionId))}catch{}},this.onParticipantLeaveCommandReceived=(h,f)=>{try{const m=this.privParticipants.getParticipant(f.participant.id);m!==void 0&&(this.privParticipants.deleteParticipant(f.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new i.ConversationParticipantsChangedEventArgs(i.ParticipantChangedReason.LeftConversation,[this.toParticipant(m)],f.sessionId)))}catch{}},this.onTranslationReceived=(h,f)=>{try{switch(f.command){case e.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new i.ConversationTranslationEventArgs(f.payload,void 0,f.sessionId));break;case e.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new i.ConversationTranslationEventArgs(f.payload,void 0,f.sessionId));break;case e.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new i.ConversationTranslationEventArgs(f.payload,void 0,f.sessionId));break}}catch{}},this.onParticipantsListReceived=(h,f)=>{var m;try{if(f.sessionToken!==void 0&&f.sessionToken!==null&&(this.privRoom.token=f.sessionToken),this.privParticipants.participants=[...f.participants],this.privParticipants.me!==void 0&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new i.ConversationParticipantsChangedEventArgs(i.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),f.sessionId)),this.me.isHost){const g=(m=this.privConversationTranslator)===null||m===void 0?void 0:m.properties.getProperty(i.PropertyId.ConversationTranslator_Name);g!==void 0&&g.length>0&&g!==this.me.displayName&&this.changeNicknameAsync(g)}}catch{}},this.onConversationExpiration=(h,f)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,f)}catch{}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new i.PropertyCollection,this.privManager=new e.ConversationManager,l.getProperty(i.PropertyId[i.PropertyId.SpeechServiceConnection_RecoLanguage])||l.setProperty(i.PropertyId[i.PropertyId.SpeechServiceConnection_RecoLanguage],e.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=l.getProperty(i.PropertyId[i.PropertyId.SpeechServiceConnection_RecoLanguage]),c)this.privConversationId=c;else{l.targetLanguages.length===0&&l.addTargetLanguage(this.privLanguage),l.getProperty(i.PropertyId[i.PropertyId.SpeechServiceResponse_ProfanityOption])||l.setProfanity(i.ProfanityOption.Masked);let f=l.getProperty(i.PropertyId[i.PropertyId.ConversationTranslator_Name]);f==null&&(f="Host"),r.Contracts.throwIfNullOrTooLong(f,"nickname",50),r.Contracts.throwIfNullOrTooShort(f,"nickname",2),l.setProperty(i.PropertyId[i.PropertyId.ConversationTranslator_Name],f)}this.privConfig=l;const d=l;r.Contracts.throwIfNull(d,"speechConfig"),this.privProperties=d.properties.clone(),this.privIsConnected=!1,this.privParticipants=new e.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get conversationId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var l,c;return!((l=this.privParticipants.me)===null||l===void 0)&&l.isHost?!1:(c=this.privParticipants.me)===null||c===void 0?void 0:c.isMuted}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get conversationInfo(){const l=this.conversationId,c=this.participants.map(h=>({id:h.id,preferredLanguage:h.preferredLanguage,voice:h.voice})),u={};for(const h of e.ConversationConnectionConfig.transcriptionEventKeys){const f=this.properties.getProperty(h,"");f!==""&&(u[h]=f)}return{id:l,participants:c,conversationProperties:u}}get canSend(){var l;return this.privIsConnected&&!(!((l=this.privParticipants.me)===null||l===void 0)&&l.isMuted)}get canSendAsHost(){var l;return this.privIsConnected&&((l=this.privParticipants.me)===null||l===void 0?void 0:l.isHost)}get authorizationToken(){return this.privToken}set authorizationToken(l){r.Contracts.throwIfNullOrWhitespace(l,"authorizationToken"),this.privToken=l}set conversationTranslator(l){this.privConversationTranslator=l}onToken(l){this.privConversationTranslator.onToken(l)}createConversationAsync(l,c){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),c),this.privManager.createOrJoin(this.privProperties,void 0,u=>{u||this.handleError(new Error(this.privErrors.permissionDeniedConnect),c),this.privRoom=u,this.handleCallback(l,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}startConversationAsync(l,c){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),c),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer=e.ConversationRecognizerFactory.fromConfig(this,this.privConfig),this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(l,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}addParticipantAsync(l,c,u){r.Contracts.throwIfNullOrUndefined(l,"Participant"),t.marshalPromiseToCallbacks(this.addParticipantImplAsync(l),c,u)}joinConversationAsync(l,c,u,d,h){try{r.Contracts.throwIfNullOrWhitespace(l,this.privErrors.invalidArgs.replace("{arg}","conversationId")),r.Contracts.throwIfNullOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","nickname")),r.Contracts.throwIfNullOrWhitespace(u,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,l,f=>{r.Contracts.throwIfNullOrUndefined(f,this.privErrors.permissionDeniedConnect),this.privRoom=f,this.privConfig.authorizationToken=f.cognitiveSpeechAuthToken,d&&d(f.cognitiveSpeechAuthToken)},f=>{this.handleError(f,h)})}catch(f){this.handleError(f,h)}}deleteConversationAsync(l,c){t.marshalPromiseToCallbacks(this.deleteConversationImplAsync(),l,c)}deleteConversationImplAsync(){return n(this,void 0,void 0,function*(){r.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),r.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),yield this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()})}endConversationAsync(l,c){t.marshalPromiseToCallbacks(this.endConversationImplAsync(),l,c)}endConversationImplAsync(){return this.close(!0)}lockConversationAsync(l,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(l,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}muteAllParticipantsAsync(l,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(l,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}muteParticipantAsync(l,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(l,this.privErrors.invalidArgs.replace("{arg}","userId")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),!this.me.isHost&&this.me.id!==l&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),u),this.privParticipants.getParticipantIndex(l)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(l,!0),()=>{this.handleCallback(c,u)},h=>{this.handleError(h,u)})}catch(d){this.handleError(d,u)}}removeParticipantAsync(l,c,u){try{if(r.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&l.hasOwnProperty("id"))t.marshalPromiseToCallbacks(this.removeParticipantImplAsync(l),c,u);else{r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),u);let d="";typeof l=="string"?d=l:l.hasOwnProperty("id")?d=l.id:l.hasOwnProperty("userId")&&(d=l.userId),r.Contracts.throwIfNullOrWhitespace(d,this.privErrors.invalidArgs.replace("{arg}","userId")),this.participants.findIndex(f=>f.id===d)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(d),()=>{this.handleCallback(c,u)},f=>{this.handleError(f,u)})}}catch(d){this.handleError(d,u)}}unlockConversationAsync(l,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(l,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}unmuteAllParticipantsAsync(l,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(l,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}unmuteParticipantAsync(l,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(l,this.privErrors.invalidArgs.replace("{arg}","userId")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),!this.me.isHost&&this.me.id!==l&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),u),this.privParticipants.getParticipantIndex(l)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(l,!1),()=>{this.handleCallback(c,u)},h=>{this.handleError(h,u)})}catch(d){this.handleError(d,u)}}sendTextMessageAsync(l,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(l,this.privErrors.invalidArgs.replace("{arg}","message")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),l.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(l),()=>{this.handleCallback(c,u)},d=>{this.handleError(d,u)})}catch(d){this.handleError(d,u)}}setTranslatedLanguagesAsync(l,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfArrayEmptyOrWhitespace(l,this.privErrors.invalidArgs.replace("{arg}","languages")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(l),()=>{this.handleCallback(c,u)},d=>{this.handleError(d,u)})}catch(d){this.handleError(d,u)}}changeNicknameAsync(l,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(l,this.privErrors.invalidArgs.replace("{arg}","nickname")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(l),()=>{this.handleCallback(c,u)},d=>{this.handleError(d,u)})}catch(d){this.handleError(d,u)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}connectTranscriberRecognizer(l){return n(this,void 0,void 0,function*(){this.privTranscriberRecognizer&&(yield this.privTranscriberRecognizer.close()),yield l.enforceAudioGating(),this.privTranscriberRecognizer=l,this.privTranscriberRecognizer.conversation=this})}getKeepAlive(){const l=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:l,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(l){if(this.privParticipants.addOrUpdateParticipant(l)!==void 0&&this.privTranscriberRecognizer){const u=this.conversationInfo;return u.participants=[l],this.privTranscriberRecognizer.pushConversationEvent(u,"join")}}removeParticipantImplAsync(l){this.privParticipants.deleteParticipant(l.id);const c=this.conversationInfo;return c.participants=[l],this.privTranscriberRecognizer.pushConversationEvent(c,"leave")}close(l){var c;return n(this,void 0,void 0,function*(){try{this.privIsConnected=!1,yield(c=this.privConversationRecognizer)===null||c===void 0?void 0:c.close(),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(u){throw u}l&&this.dispose()})}handleCallback(l,c){if(l){try{l()}catch(u){c&&c(u)}l=void 0}}handleError(l,c){if(c)if(l instanceof Error){const u=l;c(u.name+": "+u.message)}else c(l)}toParticipants(l){const c=this.privParticipants.participants.map(u=>this.toParticipant(u));return l?c:c.filter(u=>u.isHost===!1)}toParticipant(l){return new i.Participant(l.id,l.avatar,l.displayName,l.isHost,l.isMuted,l.isUsingTts,l.preferredLanguage,l.voice)}getMuteAllCommand(l){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:l})}getMuteCommand(l,c){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(l,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setMute,participantId:l,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:c})}getLockCommand(l){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:l})}getEjectCommand(l){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(l,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.ejectParticipant,participantId:l,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(l){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:l})}getChangeNicknameCommand(l){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(l,"nickname"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.changeNickname,nickname:l,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:l})}getMessageCommand(l){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),r.Contracts.throwIfNullOrWhitespace(l,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:l,type:e.ConversationTranslatorMessageTypes.instantMessage})}}return wp.ConversationImpl=o,wp}var GI={};Object.defineProperty(GI,"__esModule",{value:!0});GI.ConversationCommon=void 0;class Yue{constructor(e){this.privAudioConfig=e}handleCallback(e,t){if(e){try{e()}catch(r){t&&t(r)}e=void 0}}handleError(e,t){if(t)if(e instanceof Error){const r=e;t(r.name+": "+r.message)}else t(e)}}GI.ConversationCommon=Yue;var B1={},r7;function Xue(){if(r7)return B1;r7=1,Object.defineProperty(B1,"__esModule",{value:!0}),B1.ConversationExpirationEventArgs=void 0;const n=vt();let e=class extends n.SessionEventArgs{constructor(r,i){super(i),this.privExpirationTime=r}get expirationTime(){return this.privExpirationTime}};return B1.ConversationExpirationEventArgs=e,B1}var F1={},i7;function Zue(){if(i7)return F1;i7=1,Object.defineProperty(F1,"__esModule",{value:!0}),F1.ConversationParticipantsChangedEventArgs=void 0;const n=vt();let e=class extends n.SessionEventArgs{constructor(r,i,s){super(s),this.privReason=r,this.privParticipant=i}get reason(){return this.privReason}get participants(){return this.privParticipant}};return F1.ConversationParticipantsChangedEventArgs=e,F1}var z1={},s7;function ede(){if(s7)return z1;s7=1,Object.defineProperty(z1,"__esModule",{value:!0}),z1.ConversationTranslationCanceledEventArgs=void 0;const n=KS();let e=class extends n.CancellationEventArgsBase{};return z1.ConversationTranslationCanceledEventArgs=e,z1}var U1={},o7;function tde(){if(o7)return U1;o7=1,Object.defineProperty(U1,"__esModule",{value:!0}),U1.ConversationTranslationEventArgs=void 0;const n=vt();let e=class extends n.RecognitionEventArgs{constructor(r,i,s){super(i,s),this.privResult=r}get result(){return this.privResult}};return U1.ConversationTranslationEventArgs=e,U1}var j1={},a7;function nde(){if(a7)return j1;a7=1,Object.defineProperty(j1,"__esModule",{value:!0}),j1.ConversationTranslationResult=void 0;const n=O$();let e=class extends n.TranslationRecognitionResult{constructor(r,i,s,o,a,l,c,u,d,h,f){super(i,o,a,l,c,u,void 0,void 0,d,h,f),this.privId=r,this.privOrigLang=s}get participantId(){return this.privId}get originalLang(){return this.privOrigLang}};return j1.ConversationTranslationResult=e,j1}var IM={},G1={},XS={};Object.defineProperty(XS,"__esModule",{value:!0});XS.StringUtils=void 0;class rde{static formatString(e,t){if(!e)return"";if(!t)return e;let r="",i="";const s=l=>{r+=l},o=l=>{i+=l};let a=s;for(let l=0;l<e.length;l++){const c=e[l],u=l+1<e.length?e[l+1]:"";switch(c){case"{":u==="{"?(a("{"),l++):a=o;break;case"}":u==="}"?(a("}"),l++):(t.hasOwnProperty(i)&&(r+=t[i]),a=s,i="");break;default:a(c);break}}return r}}XS.StringUtils=rde;var l7;function ide(){if(l7)return G1;l7=1,Object.defineProperty(G1,"__esModule",{value:!0}),G1.ConversationTranslatorConnectionFactory=void 0;const n=Ws(),e=XS,t=In,r=vt(),i=$s,s=Jc,o=Kc(),a=Wt();let l=class X$ extends o.ConnectionFactoryBase{constructor(u){super(),t.Contracts.throwIfNullOrUndefined(u,"convGetter"),this.privConvGetter=u}create(u,d,h){const f=u.parameters.getProperty("ConversationTranslator_MultiChannelAudio","").toUpperCase()==="TRUE",m=this.privConvGetter().room,g=m.cognitiveSpeechRegion||u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region,""),v={hostSuffix:o.ConnectionFactoryBase.getHostSuffix(g),path:X$.CTS_VIRT_MIC_PATH,region:encodeURIComponent(g)};v[s.QueryParameterNames.Language]=encodeURIComponent(u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,"")),v[s.QueryParameterNames.CtsMeetingId]=encodeURIComponent(m.roomId),v[s.QueryParameterNames.CtsDeviceId]=encodeURIComponent(m.participantId),v[s.QueryParameterNames.CtsIsParticipant]=m.isHost?"":"&"+s.QueryParameterNames.CtsIsParticipant;let y="";const A={},C={};if(f){y=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint),y||(y="wss://"+u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,"transcribe.{region}.cts.speech{hostSuffix}")+"{path}"),y=e.StringUtils.formatString(y,v);const x=new URL(y);x.searchParams.forEach((N,M)=>{A[M]=N}),new a.TranscriberConnectionFactory().setQueryParams(A,u,y),A[s.QueryParameterNames.CtsMeetingId]=v[s.QueryParameterNames.CtsMeetingId],A[s.QueryParameterNames.CtsDeviceId]=v[s.QueryParameterNames.CtsDeviceId],m.isHost||(A[s.QueryParameterNames.CtsIsParticipant]=""),s.QueryParameterNames.Format in A||(A[s.QueryParameterNames.Format]="simple"),x.searchParams.forEach((N,M)=>{x.searchParams.set(M,A[M]),delete A[M]}),y=x.toString()}else{const x=new a.TranslationConnectionFactory;y=x.getEndpointUrl(u,!0),y=e.StringUtils.formatString(y,v),x.setQueryParams(A,u,y)}C[i.HeaderNames.ConnectionId]=h,C[n.RestConfigBase.configParams.token]=m.token,d.token&&(C[d.headerName]=d.token);const T=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","").toUpperCase()==="TRUE";return new n.WebsocketConnection(y,A,C,new a.WebsocketMessageFormatter,n.ProxyInfo.fromRecognizerConfig(u),T,h)}};return G1.ConversationTranslatorConnectionFactory=l,l.CTS_VIRT_MIC_PATH="/speech/recognition/dynamicaudio",G1}var c7;function sde(){return c7||(c7=1,function(n){var e=Ze&&Ze.__awaiter||function(h,f,m,g){function v(y){return y instanceof m?y:new m(function(A){A(y)})}return new(m||(m=Promise))(function(y,A){function C(R){try{x(g.next(R))}catch(N){A(N)}}function T(R){try{x(g.throw(R))}catch(N){A(N)}}function x(R){R.done?y(R.value):v(R.value).then(C,T)}x((g=g.apply(h,f||[])).next())})};Object.defineProperty(n,"__esModule",{value:!0}),n.ConversationTranslator=n.SpeechState=void 0;const t=Wt(),r=ide(),i=pn(),s=In,o=vt(),a=Y$(),l=RO();var c;(function(h){h[h.Inactive=0]="Inactive",h[h.Connecting=1]="Connecting",h[h.Connected=2]="Connected"})(c=n.SpeechState||(n.SpeechState={}));class u extends o.TranslationRecognizer{constructor(f,m,g,v){super(f,m,new r.ConversationTranslatorConnectionFactory(v)),this.privSpeechState=c.Inactive,g&&(this.privTranslator=g,this.sessionStarted=()=>{this.privSpeechState=c.Connected},this.sessionStopped=()=>{this.privSpeechState=c.Inactive},this.recognizing=(y,A)=>{this.privTranslator.recognizing&&this.privTranslator.recognizing(this.privTranslator,A)},this.recognized=(y,A)=>e(this,void 0,void 0,function*(){var C;!((C=A.result)===null||C===void 0)&&C.errorDetails?(yield this.cancelSpeech(),this.fireCancelEvent(A.result.errorDetails)):this.privTranslator.recognized&&this.privTranslator.recognized(this.privTranslator,A)}),this.canceled=()=>e(this,void 0,void 0,function*(){if(this.privSpeechState!==c.Inactive)try{yield this.cancelSpeech()}catch{this.privSpeechState=c.Inactive}}))}get state(){return this.privSpeechState}set state(f){this.privSpeechState=f}set authentication(f){this.privReco.authentication=f}onConnection(){this.privSpeechState=c.Connected}onCancelSpeech(){return e(this,void 0,void 0,function*(){this.privSpeechState=c.Inactive,yield this.cancelSpeech()})}fireCancelEvent(f){try{if(this.privTranslator.canceled){const m=new l.ConversationTranslationCanceledEventArgs(o.CancellationReason.Error,f,o.CancellationErrorCode.RuntimeError);this.privTranslator.canceled(this.privTranslator,m)}}catch{}}cancelSpeech(){var f;return e(this,void 0,void 0,function*(){try{this.stopContinuousRecognitionAsync(),yield(f=this.privReco)===null||f===void 0?void 0:f.disconnect(),this.privSpeechState=c.Inactive}catch{}})}}class d extends l.ConversationCommon{constructor(f){super(f),this.privErrors=t.ConversationConnectionConfig.restErrors,this.privIsDisposed=!1,this.privIsSpeaking=!1,this.privPlaceholderKey="abcdefghijklmnopqrstuvwxyz012345",this.privPlaceholderRegion="westus",this.privProperties=new o.PropertyCollection}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get participants(){var f;return(f=this.privConversation)===null||f===void 0?void 0:f.participants}get canSpeak(){return!(!this.privConversation.isConnected||!this.privCTRecognizer||this.privIsSpeaking||this.privCTRecognizer.state===c.Connected||this.privCTRecognizer.state===c.Connecting||this.privConversation.isMutedByHost)}onToken(f){this.privCTRecognizer.authentication=f}setServiceProperty(f,m){const g=JSON.parse(this.privProperties.getProperty(t.ServicePropertiesPropertyName,"{}"));g[f]=m,this.privProperties.setProperty(t.ServicePropertiesPropertyName,JSON.stringify(g))}joinConversationAsync(f,m,g,v,y){try{if(typeof f=="string"){s.Contracts.throwIfNullOrUndefined(f,this.privErrors.invalidArgs.replace("{arg}","conversation id")),s.Contracts.throwIfNullOrWhitespace(m,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privConversation&&this.handleError(new Error(this.privErrors.permissionDeniedStart),y);let A=g;(A==null||A==="")&&(A=t.ConversationConnectionConfig.defaultLanguageCode),this.privSpeechTranslationConfig=o.SpeechTranslationConfig.fromSubscription(this.privPlaceholderKey,this.privPlaceholderRegion),this.privSpeechTranslationConfig.setProfanity(o.ProfanityOption.Masked),this.privSpeechTranslationConfig.addTargetLanguage(A),this.privSpeechTranslationConfig.setProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_RecoLanguage],A),this.privSpeechTranslationConfig.setProperty(o.PropertyId[o.PropertyId.ConversationTranslator_Name],m);const C=[o.PropertyId.SpeechServiceConnection_Host,o.PropertyId.ConversationTranslator_Host,o.PropertyId.SpeechServiceConnection_Endpoint,o.PropertyId.SpeechServiceConnection_ProxyHostName,o.PropertyId.SpeechServiceConnection_ProxyPassword,o.PropertyId.SpeechServiceConnection_ProxyPort,o.PropertyId.SpeechServiceConnection_ProxyUserName,"ConversationTranslator_MultiChannelAudio","ConversationTranslator_Region"];for(const x of C){const R=this.privProperties.getProperty(x);if(R){const N=typeof x=="string"?x:o.PropertyId[x];this.privSpeechTranslationConfig.setProperty(N,R)}}const T=JSON.parse(this.privProperties.getProperty(t.ServicePropertiesPropertyName,"{}"));for(const x of Object.keys(T))this.privSpeechTranslationConfig.setServiceProperty(x,T[x],o.ServicePropertyChannel.UriQueryParameter);this.privConversation=new a.ConversationImpl(this.privSpeechTranslationConfig),this.privConversation.conversationTranslator=this,this.privConversation.joinConversationAsync(f,m,A,x=>{x||this.handleError(new Error(this.privErrors.permissionDeniedConnect),y),this.privSpeechTranslationConfig.authorizationToken=x,this.privConversation.room.isHost=!1,this.privConversation.startConversationAsync(()=>{this.handleCallback(v,y)},R=>{this.handleError(R,y)})},x=>{this.handleError(x,y)})}else typeof f=="object"?(s.Contracts.throwIfNullOrUndefined(f,this.privErrors.invalidArgs.replace("{arg}","conversation id")),s.Contracts.throwIfNullOrWhitespace(m,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privProperties.setProperty(o.PropertyId.ConversationTranslator_Name,m),this.privConversation=f,this.privConversation.conversationTranslator=this,this.privConversation.room.isHost=!0,s.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedConnect),s.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privSpeechTranslationConfig=f.config,this.handleCallback(g,v)):this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","invalid conversation type")),v)}catch(A){this.handleError(A,typeof g=="string"?y:v)}}leaveConversationAsync(f,m){i.marshalPromiseToCallbacks((()=>e(this,void 0,void 0,function*(){yield this.cancelSpeech(),yield this.privConversation.endConversationImplAsync(),yield this.privConversation.deleteConversationImplAsync(),this.dispose()}))(),f,m)}sendTextMessageAsync(f,m,g){try{s.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),s.Contracts.throwIfNullOrWhitespace(f,this.privErrors.invalidArgs.replace("{arg}",f)),this.privConversation.sendTextMessageAsync(f,m,g)}catch(v){this.handleError(v,g)}}startTranscribingAsync(f,m){i.marshalPromiseToCallbacks((()=>e(this,void 0,void 0,function*(){try{s.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),s.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privCTRecognizer===void 0&&(yield this.connectTranslatorRecognizer()),s.Contracts.throwIfNullOrUndefined(this.privCTRecognizer,this.privErrors.permissionDeniedSend),this.canSpeak||this.handleError(new Error(this.privErrors.permissionDeniedSend),m),yield this.startContinuousRecognition(),this.privIsSpeaking=!0}catch(g){throw this.privIsSpeaking=!1,yield this.cancelSpeech(),g}}))(),f,m)}stopTranscribingAsync(f,m){i.marshalPromiseToCallbacks((()=>e(this,void 0,void 0,function*(){try{if(!this.privIsSpeaking){yield this.cancelSpeech();return}this.privIsSpeaking=!1,yield new Promise((g,v)=>{this.privCTRecognizer.stopContinuousRecognitionAsync(g,v)})}catch{yield this.cancelSpeech()}}))(),f,m)}isDisposed(){return this.privIsDisposed}dispose(f,m,g){i.marshalPromiseToCallbacks((()=>e(this,void 0,void 0,function*(){this.isDisposed&&!this.privIsSpeaking||(yield this.cancelSpeech(),this.privIsDisposed=!0,this.privSpeechTranslationConfig.close(),this.privSpeechRecognitionLanguage=void 0,this.privProperties=void 0,this.privAudioConfig=void 0,this.privSpeechTranslationConfig=void 0,this.privConversation.dispose(),this.privConversation=void 0)}))(),m,g)}cancelSpeech(){var f;return e(this,void 0,void 0,function*(){try{this.privIsSpeaking=!1,yield(f=this.privCTRecognizer)===null||f===void 0?void 0:f.onCancelSpeech(),this.privCTRecognizer=void 0}catch{}})}connectTranslatorRecognizer(){return e(this,void 0,void 0,function*(){try{this.privAudioConfig===void 0&&(this.privAudioConfig=o.AudioConfig.fromDefaultMicrophoneInput()),this.privSpeechTranslationConfig.getProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_Key])===this.privPlaceholderKey&&this.privSpeechTranslationConfig.setProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_Key],"");const f=()=>this.privConversation;this.privCTRecognizer=new u(this.privSpeechTranslationConfig,this.privAudioConfig,this,f)}catch(f){throw yield this.cancelSpeech(),f}})}startContinuousRecognition(){return new Promise((f,m)=>{this.privCTRecognizer.startContinuousRecognitionAsync(f,m)})}}n.ConversationTranslator=d}(IM)),IM}var H1={},u7;function ode(){if(u7)return H1;u7=1;var n=Ze&&Ze.__awaiter||function(o,a,l,c){function u(d){return d instanceof l?d:new l(function(h){h(d)})}return new(l||(l=Promise))(function(d,h){function f(v){try{g(c.next(v))}catch(y){h(y)}}function m(v){try{g(c.throw(v))}catch(y){h(y)}}function g(v){v.done?d(v.value):u(v.value).then(f,m)}g((c=c.apply(o,a||[])).next())})};Object.defineProperty(H1,"__esModule",{value:!0}),H1.ConversationTranscriber=void 0;const e=Wt(),t=pn(),r=In,i=vt();let s=class Z$ extends i.Recognizer{constructor(a,l){const c=a;r.Contracts.throwIfNull(c,"speechConfig"),r.Contracts.throwIfNullOrWhitespace(c.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage),i.PropertyId[i.PropertyId.SpeechServiceConnection_RecoLanguage]),super(l,c.properties,new e.ConversationTranscriberConnectionFactory),this.privProperties.setProperty(i.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privDisposedRecognizer=!1}static FromConfig(a,l,c){const u=a;return l.properties.mergeTo(u.properties),new Z$(a,c)}get endpointId(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(i.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){r.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(i.PropertyId.SpeechServiceAuthorization_Token,a)}get speechRecognitionLanguage(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(e.OutputFormatPropertyName,i.OutputFormat[i.OutputFormat.Simple])===i.OutputFormat[i.OutputFormat.Simple]?i.OutputFormat.Simple:i.OutputFormat.Detailed}get properties(){return this.privProperties}startTranscribingAsync(a,l){t.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(e.RecognitionMode.Conversation),a,l)}stopTranscribingAsync(a,l){t.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),a,l)}close(a,l){r.Contracts.throwIfDisposed(this.privDisposedRecognizer),t.marshalPromiseToCallbacks(this.dispose(!0),a,l)}dispose(a){const l=Object.create(null,{dispose:{get:()=>super.dispose}});return n(this,void 0,void 0,function*(){this.privDisposedRecognizer||(a&&(this.privDisposedRecognizer=!0,yield this.implRecognizerStop()),yield l.dispose.call(this,a))})}createRecognizerConfig(a){return new e.RecognizerConfig(a,this.privProperties)}createServiceRecognizer(a,l,c,u){const d=c;return u.isSpeakerDiarizationEnabled=!0,new e.ConversationTranscriptionServiceRecognizer(a,l,d,u,this)}};return H1.ConversationTranscriber=s,H1}var Tp={},d7;function ade(){if(d7)return Tp;d7=1,Object.defineProperty(Tp,"__esModule",{value:!0}),Tp.Participant=Tp.User=void 0;const n=vt();class e{constructor(i){this.privUserId=i}get userId(){return this.privUserId}}Tp.User=e;class t{constructor(i,s,o,a,l,c,u,d){this.privId=i,this.privAvatar=s,this.privDisplayName=o,this.privIsHost=a,this.privIsMuted=l,this.privIsUsingTts=c,this.privPreferredLanguage=u,this.privVoice=d,this.privProperties=new n.PropertyCollection}get avatar(){return this.privAvatar}get displayName(){return this.privDisplayName}get id(){return this.privId}get preferredLanguage(){return this.privPreferredLanguage}get isHost(){return this.privIsHost}get isMuted(){return this.privIsMuted}get isUsingTts(){return this.privIsUsingTts}get voice(){return this.privVoice}get properties(){return this.privProperties}static From(i,s,o){return new t(i,"",i,!1,!1,!1,s,o)}}return Tp.Participant=t,Tp}var eW={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ParticipantChangedReason=void 0,function(e){e[e.JoinedConversation=0]="JoinedConversation",e[e.LeftConversation=1]="LeftConversation",e[e.Updated=2]="Updated"}(n.ParticipantChangedReason||(n.ParticipantChangedReason={}))})(eW);var xp={},h7;function lde(){if(h7)return xp;h7=1;var n=Ze&&Ze.__awaiter||function(a,l,c,u){function d(h){return h instanceof c?h:new c(function(f){f(h)})}return new(c||(c=Promise))(function(h,f){function m(y){try{v(u.next(y))}catch(A){f(A)}}function g(y){try{v(u.throw(y))}catch(A){f(A)}}function v(y){y.done?h(y.value):d(y.value).then(m,g)}v((u=u.apply(a,l||[])).next())})};Object.defineProperty(xp,"__esModule",{value:!0}),xp.MeetingImpl=xp.Meeting=void 0;const e=Wt(),t=pn(),r=In,i=vt();let s=class{constructor(){}static createMeetingAsync(l,c,u,d){if(r.Contracts.throwIfNullOrUndefined(l,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),r.Contracts.throwIfNullOrUndefined(l.region,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),r.Contracts.throwIfNull(c,"meetingId"),c.length===0)throw new Error("meetingId cannot be empty");!l.subscriptionKey&&!l.getProperty(i.PropertyId[i.PropertyId.SpeechServiceAuthorization_Token])&&r.Contracts.throwIfNullOrUndefined(l.subscriptionKey,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));const h=new o(l,c);return t.marshalPromiseToCallbacks((()=>n(this,void 0,void 0,function*(){}))(),u,d),h}};xp.Meeting=s;class o extends s{constructor(l,c){super(),this.privErrors=e.ConversationConnectionConfig.restErrors,this.onConnected=h=>{var f;this.privIsConnected=!0;try{!((f=this.privConversationTranslator)===null||f===void 0)&&f.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,h)}catch{}},this.onDisconnected=h=>{var f;try{!((f=this.privConversationTranslator)===null||f===void 0)&&f.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,h)}catch{}finally{this.close(!1)}},this.onCanceled=(h,f)=>{var m;try{!((m=this.privConversationTranslator)===null||m===void 0)&&m.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,f)}catch{}},this.onParticipantUpdateCommandReceived=(h,f)=>{try{const m=this.privParticipants.getParticipant(f.id);if(m!==void 0){switch(f.key){case e.ConversationTranslatorCommandTypes.changeNickname:m.displayName=f.value;break;case e.ConversationTranslatorCommandTypes.setUseTTS:m.isUsingTts=f.value;break;case e.ConversationTranslatorCommandTypes.setProfanityFiltering:m.profanity=f.value;break;case e.ConversationTranslatorCommandTypes.setMute:m.isMuted=f.value;break;case e.ConversationTranslatorCommandTypes.setTranslateToLanguages:m.translateToLanguages=f.value;break}this.privParticipants.addOrUpdateParticipant(m),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new i.ConversationParticipantsChangedEventArgs(i.ParticipantChangedReason.Updated,[this.toParticipant(m)],f.sessionId))}}catch{}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(h,f)=>{try{this.privParticipants.participants.forEach(m=>m.isMuted=m.isHost?!1:f.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new i.ConversationParticipantsChangedEventArgs(i.ParticipantChangedReason.Updated,this.toParticipants(!1),f.sessionId))}catch{}},this.onParticipantJoinCommandReceived=(h,f)=>{try{const m=this.privParticipants.addOrUpdateParticipant(f.participant);m!==void 0&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new i.ConversationParticipantsChangedEventArgs(i.ParticipantChangedReason.JoinedConversation,[this.toParticipant(m)],f.sessionId))}catch{}},this.onParticipantLeaveCommandReceived=(h,f)=>{try{const m=this.privParticipants.getParticipant(f.participant.id);m!==void 0&&(this.privParticipants.deleteParticipant(f.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new i.ConversationParticipantsChangedEventArgs(i.ParticipantChangedReason.LeftConversation,[this.toParticipant(m)],f.sessionId)))}catch{}},this.onTranslationReceived=(h,f)=>{try{switch(f.command){case e.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new i.ConversationTranslationEventArgs(f.payload,void 0,f.sessionId));break;case e.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new i.ConversationTranslationEventArgs(f.payload,void 0,f.sessionId));break;case e.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new i.ConversationTranslationEventArgs(f.payload,void 0,f.sessionId));break}}catch{}},this.onParticipantsListReceived=(h,f)=>{var m;try{if(f.sessionToken!==void 0&&f.sessionToken!==null&&(this.privRoom.token=f.sessionToken),this.privParticipants.participants=[...f.participants],this.privParticipants.me!==void 0&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new i.ConversationParticipantsChangedEventArgs(i.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),f.sessionId)),this.me.isHost){const g=(m=this.privConversationTranslator)===null||m===void 0?void 0:m.properties.getProperty(i.PropertyId.ConversationTranslator_Name);g!==void 0&&g.length>0&&g!==this.me.displayName&&this.changeNicknameAsync(g)}}catch{}},this.onConversationExpiration=(h,f)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,f)}catch{}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new i.PropertyCollection,this.privManager=new e.ConversationManager,l.getProperty(i.PropertyId[i.PropertyId.SpeechServiceConnection_RecoLanguage])||l.setProperty(i.PropertyId[i.PropertyId.SpeechServiceConnection_RecoLanguage],e.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=l.getProperty(i.PropertyId[i.PropertyId.SpeechServiceConnection_RecoLanguage]),this.privConversationId=c,this.privConfig=l;const d=l;r.Contracts.throwIfNull(d,"speechConfig"),this.privProperties=d.properties.clone(),this.privIsConnected=!1,this.privParticipants=new e.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get meetingId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var l,c;return!((l=this.privParticipants.me)===null||l===void 0)&&l.isHost?!1:(c=this.privParticipants.me)===null||c===void 0?void 0:c.isMuted}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get meetingInfo(){const l=this.meetingId,c=this.participants.map(h=>({id:h.id,preferredLanguage:h.preferredLanguage,voice:h.voice})),u={};for(const h of e.ConversationConnectionConfig.transcriptionEventKeys){const f=this.properties.getProperty(h,"");f!==""&&(u[h]=f)}return{id:l,participants:c,meetingProperties:u}}get canSend(){var l;return this.privIsConnected&&!(!((l=this.privParticipants.me)===null||l===void 0)&&l.isMuted)}get canSendAsHost(){var l;return this.privIsConnected&&((l=this.privParticipants.me)===null||l===void 0?void 0:l.isHost)}get authorizationToken(){return this.privToken}set authorizationToken(l){r.Contracts.throwIfNullOrWhitespace(l,"authorizationToken"),this.privToken=l}createMeetingAsync(l,c){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),c),this.privManager.createOrJoin(this.privProperties,void 0,u=>{u||this.handleError(new Error(this.privErrors.permissionDeniedConnect),c),this.privRoom=u,this.handleCallback(l,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}startMeetingAsync(l,c){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),c),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(l,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}addParticipantAsync(l,c,u){r.Contracts.throwIfNullOrUndefined(l,"Participant"),t.marshalPromiseToCallbacks(this.addParticipantImplAsync(l),c,u)}joinMeetingAsync(l,c,u,d,h){try{r.Contracts.throwIfNullOrWhitespace(l,this.privErrors.invalidArgs.replace("{arg}","conversationId")),r.Contracts.throwIfNullOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","nickname")),r.Contracts.throwIfNullOrWhitespace(u,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,l,f=>{r.Contracts.throwIfNullOrUndefined(f,this.privErrors.permissionDeniedConnect),this.privRoom=f,this.privConfig.authorizationToken=f.cognitiveSpeechAuthToken,d&&d(f.cognitiveSpeechAuthToken)},f=>{this.handleError(f,h)})}catch(f){this.handleError(f,h)}}deleteMeetingAsync(l,c){t.marshalPromiseToCallbacks(this.deleteMeetingImplAsync(),l,c)}deleteMeetingImplAsync(){return n(this,void 0,void 0,function*(){r.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),r.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),yield this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()})}endMeetingAsync(l,c){t.marshalPromiseToCallbacks(this.endMeetingImplAsync(),l,c)}endMeetingImplAsync(){return this.close(!0)}lockMeetingAsync(l,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(l,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}muteAllParticipantsAsync(l,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(l,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}muteParticipantAsync(l,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(l,this.privErrors.invalidArgs.replace("{arg}","userId")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),!this.me.isHost&&this.me.id!==l&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),u),this.privParticipants.getParticipantIndex(l)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(l,!0),()=>{this.handleCallback(c,u)},h=>{this.handleError(h,u)})}catch(d){this.handleError(d,u)}}removeParticipantAsync(l,c,u){try{if(r.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&l.hasOwnProperty("id"))t.marshalPromiseToCallbacks(this.removeParticipantImplAsync(l),c,u);else{r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),u);let d="";typeof l=="string"?d=l:l.hasOwnProperty("id")?d=l.id:l.hasOwnProperty("userId")&&(d=l.userId),r.Contracts.throwIfNullOrWhitespace(d,this.privErrors.invalidArgs.replace("{arg}","userId")),this.participants.findIndex(f=>f.id===d)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(d),()=>{this.handleCallback(c,u)},f=>{this.handleError(f,u)})}}catch(d){this.handleError(d,u)}}unlockMeetingAsync(l,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(l,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}unmuteAllParticipantsAsync(l,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(l,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}unmuteParticipantAsync(l,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(l,this.privErrors.invalidArgs.replace("{arg}","userId")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),!this.me.isHost&&this.me.id!==l&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),u),this.privParticipants.getParticipantIndex(l)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(l,!1),()=>{this.handleCallback(c,u)},h=>{this.handleError(h,u)})}catch(d){this.handleError(d,u)}}sendTextMessageAsync(l,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(l,this.privErrors.invalidArgs.replace("{arg}","message")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),l.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(l),()=>{this.handleCallback(c,u)},d=>{this.handleError(d,u)})}catch(d){this.handleError(d,u)}}setTranslatedLanguagesAsync(l,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfArrayEmptyOrWhitespace(l,this.privErrors.invalidArgs.replace("{arg}","languages")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(l),()=>{this.handleCallback(c,u)},d=>{this.handleError(d,u)})}catch(d){this.handleError(d,u)}}changeNicknameAsync(l,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(l,this.privErrors.invalidArgs.replace("{arg}","nickname")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(l),()=>{this.handleCallback(c,u)},d=>{this.handleError(d,u)})}catch(d){this.handleError(d,u)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}connectTranscriberRecognizer(l){return n(this,void 0,void 0,function*(){this.privTranscriberRecognizer&&(yield this.privTranscriberRecognizer.close()),yield l.enforceAudioGating(),this.privTranscriberRecognizer=l,this.privTranscriberRecognizer.meeting=this})}getKeepAlive(){const l=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:l,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(l){if(this.privParticipants.addOrUpdateParticipant(l)!==void 0&&this.privTranscriberRecognizer){const u=this.meetingInfo;return u.participants=[l],this.privTranscriberRecognizer.pushMeetingEvent(u,"join")}}removeParticipantImplAsync(l){this.privParticipants.deleteParticipant(l.id);const c=this.meetingInfo;return c.participants=[l],this.privTranscriberRecognizer.pushMeetingEvent(c,"leave")}close(l){var c;return n(this,void 0,void 0,function*(){try{this.privIsConnected=!1,yield(c=this.privConversationRecognizer)===null||c===void 0?void 0:c.close(),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(u){throw u}l&&this.dispose()})}handleCallback(l,c){if(l){try{l()}catch(u){c&&c(u)}l=void 0}}handleError(l,c){if(c)if(l instanceof Error){const u=l;c(u.name+": "+u.message)}else c(l)}toParticipants(l){const c=this.privParticipants.participants.map(u=>this.toParticipant(u));return l?c:c.filter(u=>u.isHost===!1)}toParticipant(l){return new i.Participant(l.id,l.avatar,l.displayName,l.isHost,l.isMuted,l.isUsingTts,l.preferredLanguage,l.voice)}getMuteAllCommand(l){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingd"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:l})}getMuteCommand(l,c){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(l,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setMute,participantId:l,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:c})}getLockCommand(l){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:l})}getEjectCommand(l){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(l,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.ejectParticipant,participantId:l,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(l){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:l})}getChangeNicknameCommand(l){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(l,"nickname"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.changeNickname,nickname:l,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:l})}getMessageCommand(l){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),r.Contracts.throwIfNullOrWhitespace(l,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:l,type:e.ConversationTranslatorMessageTypes.instantMessage})}}return xp.MeetingImpl=o,xp}var V1={},f7;function cde(){if(f7)return V1;f7=1,Object.defineProperty(V1,"__esModule",{value:!0}),V1.MeetingTranscriptionCanceledEventArgs=void 0;const n=KS();class e extends n.CancellationEventArgsBase{}return V1.MeetingTranscriptionCanceledEventArgs=e,V1}var $1={},p7;function ude(){if(p7)return $1;p7=1;var n=Ze&&Ze.__awaiter||function(a,l,c,u){function d(h){return h instanceof c?h:new c(function(f){f(h)})}return new(c||(c=Promise))(function(h,f){function m(y){try{v(u.next(y))}catch(A){f(A)}}function g(y){try{v(u.throw(y))}catch(A){f(A)}}function v(y){y.done?h(y.value):d(y.value).then(m,g)}v((u=u.apply(a,l||[])).next())})};Object.defineProperty($1,"__esModule",{value:!0}),$1.MeetingTranscriber=void 0;const e=Wt(),t=pn(),r=In,i=vt(),s=RO();let o=class{constructor(l){this.privAudioConfig=l,this.privProperties=new i.PropertyCollection,this.privRecognizer=void 0,this.privDisposedRecognizer=!1}get speechRecognitionLanguage(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get internalData(){return this.privRecognizer.internalData}get connection(){return i.Connection.fromRecognizer(this.privRecognizer)}get authorizationToken(){return this.properties.getProperty(i.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(l){r.Contracts.throwIfNullOrWhitespace(l,"token"),this.properties.setProperty(i.PropertyId.SpeechServiceAuthorization_Token,l)}joinMeetingAsync(l,c,u){const d=l;r.Contracts.throwIfNullOrUndefined(s.MeetingImpl,"Meeting"),this.privRecognizer=new e.TranscriberRecognizer(l.config,this.privAudioConfig),r.Contracts.throwIfNullOrUndefined(this.privRecognizer,"Recognizer"),this.privRecognizer.connectMeetingCallbacks(this),t.marshalPromiseToCallbacks(d.connectTranscriberRecognizer(this.privRecognizer),c,u)}startTranscribingAsync(l,c){this.privRecognizer.startContinuousRecognitionAsync(l,c)}stopTranscribingAsync(l,c){this.privRecognizer.stopContinuousRecognitionAsync(l,c)}leaveMeetingAsync(l,c){this.privRecognizer.disconnectCallbacks(),t.marshalPromiseToCallbacks((()=>n(this,void 0,void 0,function*(){}))(),l,c)}close(l,c){r.Contracts.throwIfDisposed(this.privDisposedRecognizer),t.marshalPromiseToCallbacks(this.dispose(!0),l,c)}dispose(l){return n(this,void 0,void 0,function*(){this.privDisposedRecognizer||(this.privRecognizer&&(yield this.privRecognizer.close(),this.privRecognizer=void 0),l&&(this.privDisposedRecognizer=!0))})}};return $1.MeetingTranscriber=o,$1}var W1={},m7;function dde(){if(m7)return W1;m7=1,Object.defineProperty(W1,"__esModule",{value:!0}),W1.ConversationTranscriptionResult=void 0;const n=vt();let e=class extends n.RecognitionResult{constructor(r,i,s,o,a,l,c,u,d,h,f){super(r,i,s,o,a,l,c,d,h,f),this.privSpeakerId=u}get speakerId(){return this.privSpeakerId}};return W1.ConversationTranscriptionResult=e,W1}var g7;function RO(){return g7||(g7=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=Y$();Object.defineProperty(n,"Conversation",{enumerable:!0,get:function(){return e.Conversation}}),Object.defineProperty(n,"ConversationImpl",{enumerable:!0,get:function(){return e.ConversationImpl}});var t=GI;Object.defineProperty(n,"ConversationCommon",{enumerable:!0,get:function(){return t.ConversationCommon}});var r=Xue();Object.defineProperty(n,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return r.ConversationExpirationEventArgs}});var i=Zue();Object.defineProperty(n,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return i.ConversationParticipantsChangedEventArgs}});var s=ede();Object.defineProperty(n,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return s.ConversationTranslationCanceledEventArgs}});var o=tde();Object.defineProperty(n,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return o.ConversationTranslationEventArgs}});var a=nde();Object.defineProperty(n,"ConversationTranslationResult",{enumerable:!0,get:function(){return a.ConversationTranslationResult}});var l=sde();Object.defineProperty(n,"ConversationTranslator",{enumerable:!0,get:function(){return l.ConversationTranslator}});var c=ode();Object.defineProperty(n,"ConversationTranscriber",{enumerable:!0,get:function(){return c.ConversationTranscriber}});var u=ade();Object.defineProperty(n,"Participant",{enumerable:!0,get:function(){return u.Participant}}),Object.defineProperty(n,"User",{enumerable:!0,get:function(){return u.User}});var d=eW;Object.defineProperty(n,"ParticipantChangedReason",{enumerable:!0,get:function(){return d.ParticipantChangedReason}});var h=lde();Object.defineProperty(n,"Meeting",{enumerable:!0,get:function(){return h.Meeting}}),Object.defineProperty(n,"MeetingImpl",{enumerable:!0,get:function(){return h.MeetingImpl}});var f=cde();Object.defineProperty(n,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return f.MeetingTranscriptionCanceledEventArgs}});var m=ude();Object.defineProperty(n,"MeetingTranscriber",{enumerable:!0,get:function(){return m.MeetingTranscriber}});var g=dde();Object.defineProperty(n,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return g.ConversationTranscriptionResult}})}(xM)),xM}var Ip={},v7;function NO(){if(v7)return Ip;v7=1;var n=Ze&&Ze.__awaiter||function(a,l,c,u){function d(h){return h instanceof c?h:new c(function(f){f(h)})}return new(c||(c=Promise))(function(h,f){function m(y){try{v(u.next(y))}catch(A){f(A)}}function g(y){try{v(u.throw(y))}catch(A){f(A)}}function v(y){y.done?h(y.value):d(y.value).then(m,g)}v((u=u.apply(a,l||[])).next())})};Object.defineProperty(Ip,"__esModule",{value:!0}),Ip.SynthesisRequest=Ip.Synthesizer=void 0;const e=Wt(),t=pn(),r=In,i=vt();let s=class tW{constructor(l){const c=l;r.Contracts.throwIfNull(c,"speechConfig"),this.privProperties=c.properties.clone(),this.privDisposed=!1,this.privSynthesizing=!1,this.synthesisRequestQueue=new t.Queue}get authorizationToken(){return this.properties.getProperty(i.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(l){r.Contracts.throwIfNullOrWhitespace(l,"token"),this.properties.setProperty(i.PropertyId.SpeechServiceAuthorization_Token,l)}get properties(){return this.privProperties}get autoDetectSourceLanguage(){return this.properties.getProperty(i.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)===e.AutoDetectSourceLanguagesOpenRangeOptionName}buildSsml(l){const c={"af-ZA":"af-ZA-AdriNeural","am-ET":"am-ET-AmehaNeural","ar-AE":"ar-AE-FatimaNeural","ar-BH":"ar-BH-AliNeural","ar-DZ":"ar-DZ-AminaNeural","ar-EG":"ar-EG-SalmaNeural","ar-IQ":"ar-IQ-BasselNeural","ar-JO":"ar-JO-SanaNeural","ar-KW":"ar-KW-FahedNeural","ar-LY":"ar-LY-ImanNeural","ar-MA":"ar-MA-JamalNeural","ar-QA":"ar-QA-AmalNeural","ar-SA":"ar-SA-HamedNeural","ar-SY":"ar-SY-AmanyNeural","ar-TN":"ar-TN-HediNeural","ar-YE":"ar-YE-MaryamNeural","bg-BG":"bg-BG-BorislavNeural","bn-BD":"bn-BD-NabanitaNeural","bn-IN":"bn-IN-BashkarNeural","ca-ES":"ca-ES-JoanaNeural","cs-CZ":"cs-CZ-AntoninNeural","cy-GB":"cy-GB-AledNeural","da-DK":"da-DK-ChristelNeural","de-AT":"de-AT-IngridNeural","de-CH":"de-CH-JanNeural","de-DE":"de-DE-KatjaNeural","el-GR":"el-GR-AthinaNeural","en-AU":"en-AU-NatashaNeural","en-CA":"en-CA-ClaraNeural","en-GB":"en-GB-LibbyNeural","en-HK":"en-HK-SamNeural","en-IE":"en-IE-ConnorNeural","en-IN":"en-IN-NeerjaNeural","en-KE":"en-KE-AsiliaNeural","en-NG":"en-NG-AbeoNeural","en-NZ":"en-NZ-MitchellNeural","en-PH":"en-PH-JamesNeural","en-SG":"en-SG-LunaNeural","en-TZ":"en-TZ-ElimuNeural","en-US":"en-US-JennyNeural","en-ZA":"en-ZA-LeahNeural","es-AR":"es-AR-ElenaNeural","es-BO":"es-BO-MarceloNeural","es-CL":"es-CL-CatalinaNeural","es-CO":"es-CO-GonzaloNeural","es-CR":"es-CR-JuanNeural","es-CU":"es-CU-BelkysNeural","es-DO":"es-DO-EmilioNeural","es-EC":"es-EC-AndreaNeural","es-ES":"es-ES-AlvaroNeural","es-GQ":"es-GQ-JavierNeural","es-GT":"es-GT-AndresNeural","es-HN":"es-HN-CarlosNeural","es-MX":"es-MX-DaliaNeural","es-NI":"es-NI-FedericoNeural","es-PA":"es-PA-MargaritaNeural","es-PE":"es-PE-AlexNeural","es-PR":"es-PR-KarinaNeural","es-PY":"es-PY-MarioNeural","es-SV":"es-SV-LorenaNeural","es-US":"es-US-AlonsoNeural","es-UY":"es-UY-MateoNeural","es-VE":"es-VE-PaolaNeural","et-EE":"et-EE-AnuNeural","fa-IR":"fa-IR-DilaraNeural","fi-FI":"fi-FI-SelmaNeural","fil-PH":"fil-PH-AngeloNeural","fr-BE":"fr-BE-CharlineNeural","fr-CA":"fr-CA-SylvieNeural","fr-CH":"fr-CH-ArianeNeural","fr-FR":"fr-FR-DeniseNeural","ga-IE":"ga-IE-ColmNeural","gl-ES":"gl-ES-RoiNeural","gu-IN":"gu-IN-DhwaniNeural","he-IL":"he-IL-AvriNeural","hi-IN":"hi-IN-MadhurNeural","hr-HR":"hr-HR-GabrijelaNeural","hu-HU":"hu-HU-NoemiNeural","id-ID":"id-ID-ArdiNeural","is-IS":"is-IS-GudrunNeural","it-IT":"it-IT-IsabellaNeural","ja-JP":"ja-JP-NanamiNeural","jv-ID":"jv-ID-DimasNeural","kk-KZ":"kk-KZ-AigulNeural","km-KH":"km-KH-PisethNeural","kn-IN":"kn-IN-GaganNeural","ko-KR":"ko-KR-SunHiNeural","lo-LA":"lo-LA-ChanthavongNeural","lt-LT":"lt-LT-LeonasNeural","lv-LV":"lv-LV-EveritaNeural","mk-MK":"mk-MK-AleksandarNeural","ml-IN":"ml-IN-MidhunNeural","mr-IN":"mr-IN-AarohiNeural","ms-MY":"ms-MY-OsmanNeural","mt-MT":"mt-MT-GraceNeural","my-MM":"my-MM-NilarNeural","nb-NO":"nb-NO-PernilleNeural","nl-BE":"nl-BE-ArnaudNeural","nl-NL":"nl-NL-ColetteNeural","pl-PL":"pl-PL-AgnieszkaNeural","ps-AF":"ps-AF-GulNawazNeural","pt-BR":"pt-BR-FranciscaNeural","pt-PT":"pt-PT-DuarteNeural","ro-RO":"ro-RO-AlinaNeural","ru-RU":"ru-RU-SvetlanaNeural","si-LK":"si-LK-SameeraNeural","sk-SK":"sk-SK-LukasNeural","sl-SI":"sl-SI-PetraNeural","so-SO":"so-SO-MuuseNeural","sr-RS":"sr-RS-NicholasNeural","su-ID":"su-ID-JajangNeural","sv-SE":"sv-SE-SofieNeural","sw-KE":"sw-KE-RafikiNeural","sw-TZ":"sw-TZ-DaudiNeural","ta-IN":"ta-IN-PallaviNeural","ta-LK":"ta-LK-KumarNeural","ta-SG":"ta-SG-AnbuNeural","te-IN":"te-IN-MohanNeural","th-TH":"th-TH-PremwadeeNeural","tr-TR":"tr-TR-AhmetNeural","uk-UA":"uk-UA-OstapNeural","ur-IN":"ur-IN-GulNeural","ur-PK":"ur-PK-AsadNeural","uz-UZ":"uz-UZ-MadinaNeural","vi-VN":"vi-VN-HoaiMyNeural","zh-CN":"zh-CN-XiaoxiaoNeural","zh-HK":"zh-HK-HiuMaanNeural","zh-TW":"zh-TW-HsiaoChenNeural","zu-ZA":"zu-ZA-ThandoNeural"};let u=this.properties.getProperty(i.PropertyId.SpeechServiceConnection_SynthLanguage,"en-US"),d=this.properties.getProperty(i.PropertyId.SpeechServiceConnection_SynthVoice,""),h=tW.XMLEncode(l);return this.autoDetectSourceLanguage?u="en-US":d=d||c[u],d&&(h=`<voice name='${d}'>${h}</voice>`),h=`<speak version='1.0' xmlns='http://www.w3.org/2001/10/synthesis' xmlns:mstts='http://www.w3.org/2001/mstts' xmlns:emo='http://www.w3.org/2009/10/emotionml' xml:lang='${u}'>${h}</speak>`,h}dispose(l){return n(this,void 0,void 0,function*(){this.privDisposed||(l&&this.privAdapter&&(yield this.privAdapter.dispose()),this.privDisposed=!0)})}adapterSpeak(){return n(this,void 0,void 0,function*(){if(!this.privDisposed&&!this.privSynthesizing){this.privSynthesizing=!0;const l=yield this.synthesisRequestQueue.dequeue();return this.privAdapter.Speak(l.text,l.isSSML,l.requestId,l.cb,l.err,l.dataStream)}})}createSynthesizerConfig(l){return new e.SynthesizerConfig(l,this.privProperties)}implCommonSynthesizeSetup(){let l=typeof window<"u"?"Browser":"Node",c="unknown",u="unknown";typeof navigator<"u"&&(l=l+"/"+navigator.platform,c=navigator.userAgent,u=navigator.appVersion);const d=this.createSynthesizerConfig(new e.SpeechServiceConfig(new e.Context(new e.OS(l,c,u)))),h=this.privProperties.getProperty(i.PropertyId.SpeechServiceConnection_Key,void 0),f=h&&h!==""?new e.CognitiveSubscriptionKeyAuthentication(h):new e.CognitiveTokenAuthentication(()=>{const m=this.privProperties.getProperty(i.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(m)},()=>{const m=this.privProperties.getProperty(i.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(m)});this.privAdapter=this.createSynthesisAdapter(f,this.privConnectionFactory,d),this.privRestAdapter=this.createRestSynthesisAdapter(f,d)}static XMLEncode(l){return l.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}};Ip.Synthesizer=s;class o{constructor(l,c,u,d,h,f){this.requestId=l,this.text=c,this.isSSML=u,this.cb=d,this.err=h,this.dataStream=f}}return Ip.SynthesisRequest=o,Ip}var q1={},y7;function hde(){if(y7)return q1;y7=1;var n=Ze&&Ze.__awaiter||function(u,d,h,f){function m(g){return g instanceof h?g:new h(function(v){v(g)})}return new(h||(h=Promise))(function(g,v){function y(T){try{C(f.next(T))}catch(x){v(x)}}function A(T){try{C(f.throw(T))}catch(x){v(x)}}function C(T){T.done?g(T.value):m(T.value).then(y,A)}C((f=f.apply(u,d||[])).next())})};Object.defineProperty(q1,"__esModule",{value:!0}),q1.SpeechSynthesizer=void 0;const e=Wt(),t=pn(),r=JS,i=Xf,s=to,o=In,a=vt(),l=NO();let c=class nW extends a.Synthesizer{constructor(d,h){super(d),h!==null&&(h===void 0?this.audioConfig=typeof window>"u"?void 0:a.AudioConfig.fromDefaultSpeakerOutput():this.audioConfig=h),this.privConnectionFactory=new e.SpeechSynthesisConnectionFactory,this.implCommonSynthesizeSetup()}static FromConfig(d,h,f){const m=d;return h.properties.mergeTo(m.properties),new nW(d,f)}speakTextAsync(d,h,f,m){this.speakImpl(d,!1,h,f,m)}speakSsmlAsync(d,h,f,m){this.speakImpl(d,!0,h,f,m)}getVoicesAsync(d=""){return n(this,void 0,void 0,function*(){return this.getVoices(d)})}close(d,h){o.Contracts.throwIfDisposed(this.privDisposed),t.marshalPromiseToCallbacks(this.dispose(!0),d,h)}get internalData(){return this.privAdapter}createSynthesisAdapter(d,h,f){return new e.SpeechSynthesisAdapter(d,h,f,this,this.audioConfig)}createRestSynthesisAdapter(d,h){return new e.SynthesisRestAdapter(h,d)}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=i.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(a.SpeechSynthesisOutputFormat[this.properties.getProperty(a.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)])}speakImpl(d,h,f,m,g){try{o.Contracts.throwIfDisposed(this.privDisposed);const v=t.createNoDashGuid();let y;g instanceof a.PushAudioOutputStreamCallback?y=new s.PushAudioOutputStreamImpl(g):g instanceof a.PullAudioOutputStream?y=g:g!==void 0?y=new r.AudioFileWriter(g):y=void 0,this.synthesisRequestQueue.enqueue(new l.SynthesisRequest(v,d,h,A=>{if(this.privSynthesizing=!1,f)try{f(A)}catch(C){m&&m(C)}f=void 0,this.adapterSpeak().catch(()=>{})},A=>{m&&m(A)},y)),this.adapterSpeak().catch(()=>{})}catch(v){if(m)if(v instanceof Error){const y=v;m(y.name+": "+y.message)}else m(v);this.dispose(!0).catch(()=>{})}}getVoices(d){return n(this,void 0,void 0,function*(){const h=t.createNoDashGuid(),f=yield this.privRestAdapter.getVoicesList(h);if(f.ok&&Array.isArray(f.json)){let m=f.json;return d&&d.length>0&&(m=m.filter(g=>!!g.Locale&&g.Locale.toLowerCase()===d.toLowerCase())),new a.SynthesisVoicesResult(h,m,void 0)}else return new a.SynthesisVoicesResult(h,void 0,`Error: ${f.status}: ${f.statusText}`)})}};return q1.SpeechSynthesizer=c,q1}var HI={};Object.defineProperty(HI,"__esModule",{value:!0});HI.SynthesisResult=void 0;class fde{constructor(e,t,r,i){this.privResultId=e,this.privReason=t,this.privErrorDetails=r,this.privProperties=i}get resultId(){return this.privResultId}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get properties(){return this.privProperties}}HI.SynthesisResult=fde;var Q1={},_7;function pde(){if(_7)return Q1;_7=1,Object.defineProperty(Q1,"__esModule",{value:!0}),Q1.SpeechSynthesisResult=void 0;const n=vt();let e=class extends n.SynthesisResult{constructor(r,i,s,o,a,l){super(r,i,o,a),this.privAudioData=s,this.privAudioDuration=l}get audioData(){return this.privAudioData}get audioDuration(){return this.privAudioDuration}};return Q1.SpeechSynthesisResult=e,Q1}var VI={};Object.defineProperty(VI,"__esModule",{value:!0});VI.SpeechSynthesisEventArgs=void 0;class mde{constructor(e){this.privResult=e}get result(){return this.privResult}}VI.SpeechSynthesisEventArgs=mde;var $I={};Object.defineProperty($I,"__esModule",{value:!0});$I.SpeechSynthesisWordBoundaryEventArgs=void 0;class gde{constructor(e,t,r,i,s,o){this.privAudioOffset=e,this.privDuration=t,this.privText=r,this.privWordLength=i,this.privTextOffset=s,this.privBoundaryType=o}get audioOffset(){return this.privAudioOffset}get duration(){return this.privDuration}get text(){return this.privText}get wordLength(){return this.privWordLength}get textOffset(){return this.privTextOffset}get boundaryType(){return this.privBoundaryType}}$I.SpeechSynthesisWordBoundaryEventArgs=gde;var WI={};Object.defineProperty(WI,"__esModule",{value:!0});WI.SpeechSynthesisBookmarkEventArgs=void 0;class vde{constructor(e,t){this.privAudioOffset=e,this.privText=t}get audioOffset(){return this.privAudioOffset}get text(){return this.privText}}WI.SpeechSynthesisBookmarkEventArgs=vde;var qI={};Object.defineProperty(qI,"__esModule",{value:!0});qI.SpeechSynthesisVisemeEventArgs=void 0;class yde{constructor(e,t,r){this.privAudioOffset=e,this.privVisemeId=t,this.privAnimation=r}get audioOffset(){return this.privAudioOffset}get visemeId(){return this.privVisemeId}get animation(){return this.privAnimation}}qI.SpeechSynthesisVisemeEventArgs=yde;var rW={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.SpeechSynthesisBoundaryType=void 0,function(e){e.Word="WordBoundary",e.Punctuation="PunctuationBoundary",e.Sentence="SentenceBoundary"}(n.SpeechSynthesisBoundaryType||(n.SpeechSynthesisBoundaryType={}))})(rW);var J1={},S7;function _de(){if(S7)return J1;S7=1,Object.defineProperty(J1,"__esModule",{value:!0}),J1.SynthesisVoicesResult=void 0;const n=vt();let e=class extends n.SynthesisResult{constructor(r,i,s){if(Array.isArray(i)){super(r,n.ResultReason.VoicesListRetrieved,void 0,new n.PropertyCollection),this.privVoices=[];for(const o of i)this.privVoices.push(new n.VoiceInfo(o))}else super(r,n.ResultReason.Canceled,s||"Error information unavailable",new n.PropertyCollection)}get voices(){return this.privVoices}};return J1.SynthesisVoicesResult=e,J1}var iW={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.VoiceInfo=n.SynthesisVoiceType=n.SynthesisVoiceGender=void 0;var e;(function(i){i[i.Unknown=0]="Unknown",i[i.Female=1]="Female",i[i.Male=2]="Male"})(e=n.SynthesisVoiceGender||(n.SynthesisVoiceGender={}));var t;(function(i){i[i.OnlineNeural=1]="OnlineNeural",i[i.OnlineStandard=2]="OnlineStandard",i[i.OfflineNeural=3]="OfflineNeural",i[i.OfflineStandard=4]="OfflineStandard"})(t=n.SynthesisVoiceType||(n.SynthesisVoiceType={}));class r{constructor(s){if(this.privStyleList=[],this.privVoicePath="",s&&(this.privName=s.Name,this.privLocale=s.Locale,this.privShortName=s.ShortName,this.privLocaleName=s.LocaleName,this.privDisplayName=s.DisplayName,this.privLocalName=s.LocalName,this.privVoiceType=s.VoiceType.endsWith("Standard")?t.OnlineStandard:t.OnlineNeural,this.privGender=s.Gender==="Male"?e.Male:s.Gender==="Female"?e.Female:e.Unknown,s.StyleList&&Array.isArray(s.StyleList)))for(const o of s.StyleList)this.privStyleList.push(o)}get name(){return this.privName}get locale(){return this.privLocale}get shortName(){return this.privShortName}get displayName(){return this.privDisplayName}get localName(){return this.privLocalName}get localeName(){return this.privLocaleName}get gender(){return this.privGender}get voiceType(){return this.privVoiceType}get styleList(){return this.privStyleList}get voicePath(){return this.privVoicePath}}n.VoiceInfo=r})(iW);var QI={},bM=Ze&&Ze.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};Object.defineProperty(QI,"__esModule",{value:!0});QI.SpeakerAudioDestination=void 0;const bp=pn(),Sde=to,Fl=Yf,Ade=60*30,A7={[Fl.AudioFormatTag.PCM]:"audio/wav",[Fl.AudioFormatTag.MuLaw]:"audio/x-wav",[Fl.AudioFormatTag.MP3]:"audio/mpeg",[Fl.AudioFormatTag.OGG_OPUS]:"audio/ogg",[Fl.AudioFormatTag.WEBM_OPUS]:"audio/webm; codecs=opus",[Fl.AudioFormatTag.ALaw]:"audio/x-wav",[Fl.AudioFormatTag.FLAC]:"audio/flac"};class Ede{constructor(e){this.privPlaybackStarted=!1,this.privAppendingToBuffer=!1,this.privMediaSourceOpened=!1,this.privBytesReceived=0,this.privId=e||bp.createNoDashGuid(),this.privIsPaused=!1,this.privIsClosed=!1}id(){return this.privId}write(e,t,r){this.privAudioBuffer!==void 0?(this.privAudioBuffer.push(e),this.updateSourceBuffer().then(()=>{t&&t()},i=>{r&&r(i)})):this.privAudioOutputStream!==void 0&&(this.privAudioOutputStream.write(e),this.privBytesReceived+=e.byteLength)}close(e,t){if(this.privIsClosed=!0,this.privSourceBuffer!==void 0)this.handleSourceBufferUpdateEnd().then(()=>{e&&e()},r=>{t&&t(r)});else if(this.privAudioOutputStream!==void 0&&typeof window<"u")if((this.privFormat.formatTag===Fl.AudioFormatTag.PCM||this.privFormat.formatTag===Fl.AudioFormatTag.MuLaw||this.privFormat.formatTag===Fl.AudioFormatTag.ALaw)&&this.privFormat.hasHeader===!1)console.warn("Play back is not supported for raw PCM, mulaw or alaw format without header."),this.onAudioEnd&&this.onAudioEnd(this);else{let r=new ArrayBuffer(this.privBytesReceived);this.privAudioOutputStream.read(r).then(()=>{r=this.privFormat.addHeader(r);const i=new Blob([r],{type:A7[this.privFormat.formatTag]});this.privAudio.src=window.URL.createObjectURL(i),this.notifyPlayback().then(()=>{e&&e()},s=>{t&&t(s)})},i=>{t&&t(i)})}else this.onAudioEnd&&this.onAudioEnd(this)}set format(e){if(typeof AudioContext<"u"||typeof window<"u"&&typeof window.webkitAudioContext<"u"){this.privFormat=e;const t=A7[this.privFormat.formatTag];t===void 0?console.warn(`Unknown mimeType for format ${Fl.AudioFormatTag[this.privFormat.formatTag]}; playback is not supported.`):typeof MediaSource<"u"&&MediaSource.isTypeSupported(t)?(this.privAudio=new Audio,this.privAudioBuffer=[],this.privMediaSource=new MediaSource,this.privAudio.src=URL.createObjectURL(this.privMediaSource),this.privAudio.load(),this.privMediaSource.onsourceopen=()=>{this.privMediaSourceOpened=!0,this.privMediaSource.duration=Ade,this.privSourceBuffer=this.privMediaSource.addSourceBuffer(t),this.privSourceBuffer.onupdate=()=>{this.updateSourceBuffer().catch(r=>{bp.Events.instance.onEvent(new bp.BackgroundEvent(r))})},this.privSourceBuffer.onupdateend=()=>{this.handleSourceBufferUpdateEnd().catch(r=>{bp.Events.instance.onEvent(new bp.BackgroundEvent(r))})},this.privSourceBuffer.onupdatestart=()=>{this.privAppendingToBuffer=!1}},this.updateSourceBuffer().catch(r=>{bp.Events.instance.onEvent(new bp.BackgroundEvent(r))})):(console.warn(`Format ${Fl.AudioFormatTag[this.privFormat.formatTag]} could not be played by MSE, streaming playback is not enabled.`),this.privAudioOutputStream=new Sde.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privFormat,this.privAudio=new Audio)}}get volume(){var e,t;return(t=(e=this.privAudio)===null||e===void 0?void 0:e.volume)!==null&&t!==void 0?t:-1}set volume(e){this.privAudio&&(this.privAudio.volume=e)}mute(){this.privAudio&&(this.privAudio.muted=!0)}unmute(){this.privAudio&&(this.privAudio.muted=!1)}get isClosed(){return this.privIsClosed}get currentTime(){return this.privAudio!==void 0?this.privAudio.currentTime:-1}pause(){!this.privIsPaused&&this.privAudio!==void 0&&(this.privAudio.pause(),this.privIsPaused=!0)}resume(e,t){this.privIsPaused&&this.privAudio!==void 0&&(this.privAudio.play().then(()=>{e&&e()},r=>{t&&t(r)}),this.privIsPaused=!1)}get internalAudio(){return this.privAudio}updateSourceBuffer(){return bM(this,void 0,void 0,function*(){if(this.privAudioBuffer!==void 0&&this.privAudioBuffer.length>0&&this.sourceBufferAvailable()){this.privAppendingToBuffer=!0;const e=this.privAudioBuffer.shift();try{this.privSourceBuffer.appendBuffer(e)}catch{this.privAudioBuffer.unshift(e),console.log("buffer filled, pausing addition of binaries until space is made");return}yield this.notifyPlayback()}else this.canEndStream()&&(yield this.handleSourceBufferUpdateEnd())})}handleSourceBufferUpdateEnd(){return bM(this,void 0,void 0,function*(){this.canEndStream()&&this.sourceBufferAvailable()&&(this.privMediaSource.endOfStream(),yield this.notifyPlayback())})}notifyPlayback(){return bM(this,void 0,void 0,function*(){!this.privPlaybackStarted&&this.privAudio!==void 0&&(this.privPlaybackStarted=!0,this.onAudioStart&&this.onAudioStart(this),this.privAudio.onended=()=>{this.onAudioEnd&&this.onAudioEnd(this)},this.privIsPaused||(yield this.privAudio.play()))})}canEndStream(){return this.isClosed&&this.privSourceBuffer!==void 0&&this.privAudioBuffer.length===0&&this.privMediaSourceOpened&&!this.privAppendingToBuffer&&this.privMediaSource.readyState==="open"}sourceBufferAvailable(){return this.privSourceBuffer!==void 0&&!this.privSourceBuffer.updating}}QI.SpeakerAudioDestination=Ede;var K1={},E7;function Cde(){if(E7)return K1;E7=1,Object.defineProperty(K1,"__esModule",{value:!0}),K1.ConversationTranscriptionCanceledEventArgs=void 0;const n=KS();let e=class extends n.CancellationEventArgsBase{};return K1.ConversationTranscriptionCanceledEventArgs=e,K1}var Y1={},C7;function wde(){if(C7)return Y1;C7=1,Object.defineProperty(Y1,"__esModule",{value:!0}),Y1.MeetingTranscriptionCanceledEventArgs=void 0;const n=KS();let e=class extends n.CancellationEventArgsBase{};return Y1.MeetingTranscriptionCanceledEventArgs=e,Y1}var sW={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.PronunciationAssessmentGradingSystem=void 0,function(e){e[e.FivePoint=1]="FivePoint",e[e.HundredMark=2]="HundredMark"}(n.PronunciationAssessmentGradingSystem||(n.PronunciationAssessmentGradingSystem={}))})(sW);var oW={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.PronunciationAssessmentGranularity=void 0,function(e){e[e.Phoneme=1]="Phoneme",e[e.Word=2]="Word",e[e.FullText=3]="FullText"}(n.PronunciationAssessmentGranularity||(n.PronunciationAssessmentGranularity={}))})(oW);var X1={},w7;function Tde(){if(w7)return X1;w7=1,Object.defineProperty(X1,"__esModule",{value:!0}),X1.PronunciationAssessmentConfig=void 0;const n=In,e=vt();let t=class aW{constructor(i,s=e.PronunciationAssessmentGradingSystem.FivePoint,o=e.PronunciationAssessmentGranularity.Phoneme,a=!1){n.Contracts.throwIfNullOrUndefined(i,"referenceText"),this.privProperties=new e.PropertyCollection,this.privProperties.setProperty(e.PropertyId.PronunciationAssessment_ReferenceText,i),this.privProperties.setProperty(e.PropertyId.PronunciationAssessment_GradingSystem,e.PronunciationAssessmentGradingSystem[s]),this.privProperties.setProperty(e.PropertyId.PronunciationAssessment_Granularity,e.PronunciationAssessmentGranularity[o]),this.privProperties.setProperty(e.PropertyId.PronunciationAssessment_EnableMiscue,String(a))}static fromJSON(i){n.Contracts.throwIfNullOrUndefined(i,"json");const s=new aW("");return s.privProperties=new e.PropertyCollection,s.properties.setProperty(e.PropertyId.PronunciationAssessment_Json,i),s}toJSON(){return this.updateJson(),this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_Params)}applyTo(i){this.updateJson();const s=i.internalData;s.expectContentAssessmentResponse=!!this.privContentAssessmentTopic,s.speechContext.setPronunciationAssessmentParams(this.properties.getProperty(e.PropertyId.PronunciationAssessment_Params),this.privContentAssessmentTopic,s.isSpeakerDiarizationEnabled)}get referenceText(){return this.properties.getProperty(e.PropertyId.PronunciationAssessment_ReferenceText)}set referenceText(i){n.Contracts.throwIfNullOrWhitespace(i,"referenceText"),this.properties.setProperty(e.PropertyId.PronunciationAssessment_ReferenceText,i)}set phonemeAlphabet(i){n.Contracts.throwIfNullOrWhitespace(i,"phonemeAlphabet"),this.privPhonemeAlphabet=i}set enableMiscue(i){const s=i?"true":"false";this.properties.setProperty(e.PropertyId.PronunciationAssessment_EnableMiscue,s)}get enableMiscue(){return this.properties.getProperty(e.PropertyId.PronunciationAssessment_EnableMiscue,"false").toLowerCase()==="true"}set nbestPhonemeCount(i){this.privNBestPhonemeCount=i}set enableProsodyAssessment(i){this.privEnableProsodyAssessment=i}enableContentAssessmentWithTopic(i){this.privContentAssessmentTopic=i}get properties(){return this.privProperties}updateJson(){const i=this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_Json,"{}"),s=JSON.parse(i),o=this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_ReferenceText);o&&(s.referenceText=o);const a=this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_GradingSystem);a&&(s.gradingSystem=a);const l=this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_Granularity);l&&(s.granularity=l),this.privPhonemeAlphabet&&(s.phonemeAlphabet=this.privPhonemeAlphabet),this.privNBestPhonemeCount&&(s.nbestPhonemeCount=this.privNBestPhonemeCount),s.enableProsodyAssessment=this.privEnableProsodyAssessment,s.dimension="Comprehensive",this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_EnableMiscue)&&(s.enableMiscue=this.enableMiscue),this.privProperties.setProperty(e.PropertyId.PronunciationAssessment_Params,JSON.stringify(s))}};return X1.PronunciationAssessmentConfig=t,X1}var Mp={},T7;function xde(){if(T7)return Mp;T7=1,Object.defineProperty(Mp,"__esModule",{value:!0}),Mp.PronunciationAssessmentResult=Mp.ContentAssessmentResult=void 0;const n=In,e=vt();class t{constructor(s){this.privPronJson=s}get grammarScore(){return this.privPronJson.ContentAssessment.GrammarScore}get vocabularyScore(){return this.privPronJson.ContentAssessment.VocabularyScore}get topicScore(){return this.privPronJson.ContentAssessment.TopicScore}}Mp.ContentAssessmentResult=t;let r=class lW{constructor(s){const o=JSON.parse(s);n.Contracts.throwIfNullOrUndefined(o.NBest[0],"NBest"),this.privPronJson=o.NBest[0]}static fromResult(s){n.Contracts.throwIfNullOrUndefined(s,"result");const o=s.properties.getProperty(e.PropertyId.SpeechServiceResponse_JsonResult);return n.Contracts.throwIfNullOrUndefined(o,"json"),new lW(o)}get detailResult(){return this.privPronJson}get accuracyScore(){var s;return(s=this.detailResult.PronunciationAssessment)===null||s===void 0?void 0:s.AccuracyScore}get pronunciationScore(){var s;return(s=this.detailResult.PronunciationAssessment)===null||s===void 0?void 0:s.PronScore}get completenessScore(){var s;return(s=this.detailResult.PronunciationAssessment)===null||s===void 0?void 0:s.CompletenessScore}get fluencyScore(){var s;return(s=this.detailResult.PronunciationAssessment)===null||s===void 0?void 0:s.FluencyScore}get prosodyScore(){var s;return(s=this.detailResult.PronunciationAssessment)===null||s===void 0?void 0:s.ProsodyScore}get contentAssessmentResult(){if(this.detailResult.ContentAssessment!==void 0)return new t(this.detailResult)}};return Mp.PronunciationAssessmentResult=r,Mp}var Z1={},x7;function Ide(){if(x7)return Z1;x7=1,Object.defineProperty(Z1,"__esModule",{value:!0}),Z1.AvatarConfig=void 0;const n=In,e=vt();let t=class{constructor(i,s,o){this.privCustomized=!1,n.Contracts.throwIfNullOrWhitespace(i,"character"),this.character=i,this.style=s,o===void 0&&(o=new e.AvatarVideoFormat),this.videoFormat=o}get customized(){return this.privCustomized}set customized(i){this.privCustomized=i}get backgroundColor(){return this.privBackgroundColor}set backgroundColor(i){this.privBackgroundColor=i}};return Z1.AvatarConfig=t,Z1}var cW={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.AvatarEventArgs=n.AvatarEventTypes=void 0,function(t){t.SwitchedToSpeaking="SwitchedToSpeaking",t.SwitchedToIdle="SwitchedToIdle",t.SessionClosed="SessionClosed"}(n.AvatarEventTypes||(n.AvatarEventTypes={}));class e{constructor(r,i){this.privOffset=r,this.privDescription=i}get type(){return this.privType}get offset(){return this.privOffset}get description(){return this.privDescription}}n.AvatarEventArgs=e})(cW);var ey={},ty={},I7;function uW(){if(I7)return ty;I7=1,Object.defineProperty(ty,"__esModule",{value:!0}),ty.SpeechSynthesisConnectionFactory=void 0;const n=Ws(),e=vt(),t=Kc(),r=Wt(),i=$s,s=Jc;let o=class{constructor(){this.synthesisUri="/cognitiveservices/websocket/v1"}create(l,c,u){let d=l.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint,void 0);const h=l.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Region,void 0),f=t.ConnectionFactoryBase.getHostSuffix(h),m=l.parameters.getProperty(e.PropertyId.SpeechServiceConnection_EndpointId,void 0),g=m===void 0?"tts":"voice",v=l.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,"wss://"+h+"."+g+".speech"+f),y={},A={};c.token!==void 0&&c.token!==""&&(A[c.headerName]=c.token),A[i.HeaderNames.ConnectionId]=u,m!==void 0&&m!==""&&(!d||d.search(s.QueryParameterNames.CustomVoiceDeploymentId)===-1)&&(y[s.QueryParameterNames.CustomVoiceDeploymentId]=m),l.avatarEnabled&&(!d||d.search(s.QueryParameterNames.EnableAvatar)===-1)&&(y[s.QueryParameterNames.EnableAvatar]="true"),d||(d=v+this.synthesisUri),l.parameters.setProperty(e.PropertyId.SpeechServiceConnection_Url,d);const C=l.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new n.WebsocketConnection(d,y,A,new r.WebsocketMessageFormatter,n.ProxyInfo.fromParameters(l.parameters),C,u)}};return ty.SpeechSynthesisConnectionFactory=o,ty}var b7;function bde(){if(b7)return ey;b7=1;var n=Ze&&Ze.__awaiter||function(c,u,d,h){function f(m){return m instanceof d?m:new d(function(g){g(m)})}return new(d||(d=Promise))(function(m,g){function v(C){try{A(h.next(C))}catch(T){g(T)}}function y(C){try{A(h.throw(C))}catch(T){g(T)}}function A(C){C.done?m(C.value):f(C.value).then(v,y)}A((h=h.apply(c,u||[])).next())})};Object.defineProperty(ey,"__esModule",{value:!0}),ey.AvatarSynthesizer=void 0;const e=uW(),t=Wt(),r=pn(),i=Xf,s=vt(),o=In,a=NO();let l=class extends s.Synthesizer{constructor(u,d){super(u),o.Contracts.throwIfNullOrUndefined(d,"avatarConfig"),this.privConnectionFactory=new e.SpeechSynthesisConnectionFactory,this.privAvatarConfig=d,this.implCommonSynthesizeSetup()}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=i.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(s.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm)}startAvatarAsync(u){return n(this,void 0,void 0,function*(){o.Contracts.throwIfNullOrUndefined(u,"peerConnection"),this.privIceServers=u.getConfiguration().iceServers,o.Contracts.throwIfNullOrUndefined(this.privIceServers,"Ice servers must be set.");const d=new r.Deferred;u.onicegatheringstatechange=()=>{r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice gathering state: "+u.iceGatheringState,r.EventType.Debug)),u.iceGatheringState==="complete"&&(r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice gathering complete.",r.EventType.Info)),d.resolve())};const h=yield u.createOffer();yield u.setLocalDescription(h),yield d.promise,r.Events.instance.onEvent(new r.PlatformEvent("peer connection: got local SDP.",r.EventType.Info)),this.privProperties.setProperty(s.PropertyId.TalkingAvatarService_WebRTC_SDP,JSON.stringify(u.localDescription));const f=yield this.speak("",!1);if(f.reason!==s.ResultReason.SynthesizingAudioCompleted)return new s.SynthesisResult(f.resultId,f.reason,f.errorDetails,f.properties);const m=atob(f.properties.getProperty(s.PropertyId.TalkingAvatarService_WebRTC_SDP)),g=new RTCSessionDescription(JSON.parse(m));return yield u.setRemoteDescription(g),new s.SynthesisResult(f.resultId,f.reason,void 0,f.properties)})}speakTextAsync(u){return n(this,void 0,void 0,function*(){const d=yield this.speak(u,!1);return new s.SynthesisResult(d.resultId,d.reason,d.errorDetails,d.properties)})}speakSsmlAsync(u){return n(this,void 0,void 0,function*(){const d=yield this.speak(u,!0);return new s.SynthesisResult(d.resultId,d.reason,d.errorDetails,d.properties)})}stopSpeakingAsync(){return n(this,void 0,void 0,function*(){for(;this.synthesisRequestQueue.length()>0;)(yield this.synthesisRequestQueue.dequeue()).err("Synthesis is canceled by user.");return this.privAdapter.stopSpeaking()})}stopAvatarAsync(){return n(this,void 0,void 0,function*(){return o.Contracts.throwIfDisposed(this.privDisposed),this.dispose(!0)})}close(){return n(this,void 0,void 0,function*(){if(!this.privDisposed)return this.dispose(!0)})}get iceServers(){return this.privIceServers}createSynthesisAdapter(u,d,h){return new t.AvatarSynthesisAdapter(u,d,h,this,this.privAvatarConfig)}createRestSynthesisAdapter(u,d){}createSynthesizerConfig(u){const d=super.createSynthesizerConfig(u);return d.avatarEnabled=!0,d}speak(u,d){return n(this,void 0,void 0,function*(){const h=r.createNoDashGuid(),f=new r.Deferred;return this.synthesisRequestQueue.enqueue(new a.SynthesisRequest(h,u,d,m=>{f.resolve(m),this.privSynthesizing=!1,this.adapterSpeak()},m=>{f.reject(m),this.privSynthesizing=!1})),this.adapterSpeak(),f.promise})}};return ey.AvatarSynthesizer=l,ey}var Ug={};Object.defineProperty(Ug,"__esModule",{value:!0});Ug.AvatarVideoFormat=Ug.Coordinate=void 0;class Mde{constructor(e,t){this.x=e,this.y=t}}Ug.Coordinate=Mde;class Rde{constructor(e="H264",t=2e6,r=1920,i=1080){this.codec=e,this.bitrate=t,this.width=r,this.height=i}setCropRange(e,t){this.cropRange={bottomRight:t,topLeft:e}}}Ug.AvatarVideoFormat=Rde;var ny={},M7;function Nde(){if(M7)return ny;M7=1,Object.defineProperty(ny,"__esModule",{value:!0}),ny.AvatarWebRTCConnectionResult=void 0;const n=vt();let e=class extends n.SynthesisResult{constructor(r,i,s,o,a){super(i,s,o,a),this.privSDPAnswer=r}get SDPAnswer(){return this.privSDPAnswer}};return ny.AvatarWebRTCConnectionResult=e,ny}var ry={},R7;function Pde(){if(R7)return ry;R7=1,Object.defineProperty(ry,"__esModule",{value:!0}),ry.Diagnostics=void 0;const n=Ws(),e=pn();let t=class{static SetLoggingLevel(i){this.privListener=new n.ConsoleLoggingListener(i),e.Events.instance.attachConsoleListener(this.privListener)}static StartConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!0)}static StopConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!1)}static SetLogOutputPath(i){if(typeof window>"u")this.privListener&&(this.privListener.logPath=i);else throw new Error("File system logging not available in browser.")}};return ry.Diagnostics=t,t.privListener=void 0,ry}var N7;function vt(){return N7||(N7=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=b$();Object.defineProperty(n,"AudioConfig",{enumerable:!0,get:function(){return e.AudioConfig}});var t=Yf;Object.defineProperty(n,"AudioStreamFormat",{enumerable:!0,get:function(){return t.AudioStreamFormat}}),Object.defineProperty(n,"AudioFormatTag",{enumerable:!0,get:function(){return t.AudioFormatTag}});var r=C$();Object.defineProperty(n,"AudioInputStream",{enumerable:!0,get:function(){return r.AudioInputStream}}),Object.defineProperty(n,"PullAudioInputStream",{enumerable:!0,get:function(){return r.PullAudioInputStream}}),Object.defineProperty(n,"PushAudioInputStream",{enumerable:!0,get:function(){return r.PushAudioInputStream}});var i=to;Object.defineProperty(n,"AudioOutputStream",{enumerable:!0,get:function(){return i.AudioOutputStream}}),Object.defineProperty(n,"PullAudioOutputStream",{enumerable:!0,get:function(){return i.PullAudioOutputStream}}),Object.defineProperty(n,"PushAudioOutputStream",{enumerable:!0,get:function(){return i.PushAudioOutputStream}});var s=M$;Object.defineProperty(n,"CancellationReason",{enumerable:!0,get:function(){return s.CancellationReason}});var o=xI;Object.defineProperty(n,"PullAudioInputStreamCallback",{enumerable:!0,get:function(){return o.PullAudioInputStreamCallback}});var a=II;Object.defineProperty(n,"PushAudioOutputStreamCallback",{enumerable:!0,get:function(){return a.PushAudioOutputStreamCallback}});var l=bI;Object.defineProperty(n,"KeywordRecognitionModel",{enumerable:!0,get:function(){return l.KeywordRecognitionModel}});var c=MI;Object.defineProperty(n,"SessionEventArgs",{enumerable:!0,get:function(){return c.SessionEventArgs}});var u=aue();Object.defineProperty(n,"RecognitionEventArgs",{enumerable:!0,get:function(){return u.RecognitionEventArgs}});var d=R$;Object.defineProperty(n,"OutputFormat",{enumerable:!0,get:function(){return d.OutputFormat}});var h=lue();Object.defineProperty(n,"IntentRecognitionEventArgs",{enumerable:!0,get:function(){return h.IntentRecognitionEventArgs}});var f=RI;Object.defineProperty(n,"RecognitionResult",{enumerable:!0,get:function(){return f.RecognitionResult}});var m=uue();Object.defineProperty(n,"SpeechRecognitionResult",{enumerable:!0,get:function(){return m.SpeechRecognitionResult}});var g=due();Object.defineProperty(n,"IntentRecognitionResult",{enumerable:!0,get:function(){return g.IntentRecognitionResult}});var v=zg;Object.defineProperty(n,"LanguageUnderstandingModel",{enumerable:!0,get:function(){return v.LanguageUnderstandingModel}});var y=hue();Object.defineProperty(n,"SpeechRecognitionEventArgs",{enumerable:!0,get:function(){return y.SpeechRecognitionEventArgs}}),Object.defineProperty(n,"ConversationTranscriptionEventArgs",{enumerable:!0,get:function(){return y.ConversationTranscriptionEventArgs}}),Object.defineProperty(n,"MeetingTranscriptionEventArgs",{enumerable:!0,get:function(){return y.MeetingTranscriptionEventArgs}});var A=fue();Object.defineProperty(n,"SpeechRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return A.SpeechRecognitionCanceledEventArgs}});var C=pue();Object.defineProperty(n,"TranslationRecognitionEventArgs",{enumerable:!0,get:function(){return C.TranslationRecognitionEventArgs}});var T=mue();Object.defineProperty(n,"TranslationSynthesisEventArgs",{enumerable:!0,get:function(){return T.TranslationSynthesisEventArgs}});var x=O$();Object.defineProperty(n,"TranslationRecognitionResult",{enumerable:!0,get:function(){return x.TranslationRecognitionResult}});var R=NI;Object.defineProperty(n,"TranslationSynthesisResult",{enumerable:!0,get:function(){return R.TranslationSynthesisResult}});var N=D$;Object.defineProperty(n,"ResultReason",{enumerable:!0,get:function(){return N.ResultReason}});var M=vue();Object.defineProperty(n,"SpeechConfig",{enumerable:!0,get:function(){return M.SpeechConfig}}),Object.defineProperty(n,"SpeechConfigImpl",{enumerable:!0,get:function(){return M.SpeechConfigImpl}});var O=yue();Object.defineProperty(n,"SpeechTranslationConfig",{enumerable:!0,get:function(){return O.SpeechTranslationConfig}}),Object.defineProperty(n,"SpeechTranslationConfigImpl",{enumerable:!0,get:function(){return O.SpeechTranslationConfigImpl}});var P=k$();Object.defineProperty(n,"PropertyCollection",{enumerable:!0,get:function(){return P.PropertyCollection}});var z=PI;Object.defineProperty(n,"PropertyId",{enumerable:!0,get:function(){return z.PropertyId}});var V=_ue();Object.defineProperty(n,"Recognizer",{enumerable:!0,get:function(){return V.Recognizer}});var $=Sue();Object.defineProperty(n,"SpeechRecognizer",{enumerable:!0,get:function(){return $.SpeechRecognizer}});var B=Aue();Object.defineProperty(n,"IntentRecognizer",{enumerable:!0,get:function(){return B.IntentRecognizer}});var q=z$;Object.defineProperty(n,"VoiceProfileType",{enumerable:!0,get:function(){return q.VoiceProfileType}});var K=Eue();Object.defineProperty(n,"TranslationRecognizer",{enumerable:!0,get:function(){return K.TranslationRecognizer}});var se=Cue();Object.defineProperty(n,"Translations",{enumerable:!0,get:function(){return se.Translations}});var W=H$;Object.defineProperty(n,"NoMatchReason",{enumerable:!0,get:function(){return W.NoMatchReason}});var ee=wue();Object.defineProperty(n,"NoMatchDetails",{enumerable:!0,get:function(){return ee.NoMatchDetails}});var Q=OI;Object.defineProperty(n,"TranslationRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return Q.TranslationRecognitionCanceledEventArgs}});var Y=xue();Object.defineProperty(n,"IntentRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return Y.IntentRecognitionCanceledEventArgs}});var ae=YS;Object.defineProperty(n,"CancellationDetailsBase",{enumerable:!0,get:function(){return ae.CancellationDetailsBase}});var fe=bue();Object.defineProperty(n,"CancellationDetails",{enumerable:!0,get:function(){return fe.CancellationDetails}});var we=W$;Object.defineProperty(n,"CancellationErrorCode",{enumerable:!0,get:function(){return we.CancellationErrorCode}});var ge=Mue();Object.defineProperty(n,"ConnectionEventArgs",{enumerable:!0,get:function(){return ge.ConnectionEventArgs}});var Se=Rue();Object.defineProperty(n,"ServiceEventArgs",{enumerable:!0,get:function(){return Se.ServiceEventArgs}});var Ke=j$();Object.defineProperty(n,"Connection",{enumerable:!0,get:function(){return Ke.Connection}});var xe=DI;Object.defineProperty(n,"PhraseListGrammar",{enumerable:!0,get:function(){return xe.PhraseListGrammar}});var Qe=xO();Object.defineProperty(n,"DialogServiceConfig",{enumerable:!0,get:function(){return Qe.DialogServiceConfig}});var We=Nue();Object.defineProperty(n,"BotFrameworkConfig",{enumerable:!0,get:function(){return We.BotFrameworkConfig}});var Ve=Pue();Object.defineProperty(n,"CustomCommandsConfig",{enumerable:!0,get:function(){return Ve.CustomCommandsConfig}});var te=Due();Object.defineProperty(n,"DialogServiceConnector",{enumerable:!0,get:function(){return te.DialogServiceConnector}});var ce=LI;Object.defineProperty(n,"ActivityReceivedEventArgs",{enumerable:!0,get:function(){return ce.ActivityReceivedEventArgs}});var de=kI;Object.defineProperty(n,"TurnStatusReceivedEventArgs",{enumerable:!0,get:function(){return de.TurnStatusReceivedEventArgs}});var Pe=q$;Object.defineProperty(n,"ServicePropertyChannel",{enumerable:!0,get:function(){return Pe.ServicePropertyChannel}});var Te=Q$;Object.defineProperty(n,"ProfanityOption",{enumerable:!0,get:function(){return Te.ProfanityOption}});var De=Fue();Object.defineProperty(n,"BaseAudioPlayer",{enumerable:!0,get:function(){return De.BaseAudioPlayer}});var Ge=FI;Object.defineProperty(n,"ConnectionMessageEventArgs",{enumerable:!0,get:function(){return Ge.ConnectionMessageEventArgs}});var it=U$();Object.defineProperty(n,"ConnectionMessage",{enumerable:!0,get:function(){return it.ConnectionMessage}});var ke=zI;Object.defineProperty(n,"VoiceProfile",{enumerable:!0,get:function(){return ke.VoiceProfile}});var ct=jue();Object.defineProperty(n,"VoiceProfileEnrollmentResult",{enumerable:!0,get:function(){return ct.VoiceProfileEnrollmentResult}}),Object.defineProperty(n,"VoiceProfileEnrollmentCancellationDetails",{enumerable:!0,get:function(){return ct.VoiceProfileEnrollmentCancellationDetails}});var oe=Gue();Object.defineProperty(n,"VoiceProfileResult",{enumerable:!0,get:function(){return oe.VoiceProfileResult}}),Object.defineProperty(n,"VoiceProfileCancellationDetails",{enumerable:!0,get:function(){return oe.VoiceProfileCancellationDetails}});var ne=Hue();Object.defineProperty(n,"VoiceProfilePhraseResult",{enumerable:!0,get:function(){return ne.VoiceProfilePhraseResult}});var Oe=Vue();Object.defineProperty(n,"VoiceProfileClient",{enumerable:!0,get:function(){return Oe.VoiceProfileClient}});var st=$ue();Object.defineProperty(n,"SpeakerRecognizer",{enumerable:!0,get:function(){return st.SpeakerRecognizer}});var Je=Wue();Object.defineProperty(n,"SpeakerIdentificationModel",{enumerable:!0,get:function(){return Je.SpeakerIdentificationModel}});var ft=que();Object.defineProperty(n,"SpeakerVerificationModel",{enumerable:!0,get:function(){return ft.SpeakerVerificationModel}});var zt=Que();Object.defineProperty(n,"AutoDetectSourceLanguageConfig",{enumerable:!0,get:function(){return zt.AutoDetectSourceLanguageConfig}});var je=UI;Object.defineProperty(n,"AutoDetectSourceLanguageResult",{enumerable:!0,get:function(){return je.AutoDetectSourceLanguageResult}});var Bt=jI;Object.defineProperty(n,"SourceLanguageConfig",{enumerable:!0,get:function(){return Bt.SourceLanguageConfig}});var Ct=Kue();Object.defineProperty(n,"SpeakerRecognitionResult",{enumerable:!0,get:function(){return Ct.SpeakerRecognitionResult}}),Object.defineProperty(n,"SpeakerRecognitionResultType",{enumerable:!0,get:function(){return Ct.SpeakerRecognitionResultType}}),Object.defineProperty(n,"SpeakerRecognitionCancellationDetails",{enumerable:!0,get:function(){return Ct.SpeakerRecognitionCancellationDetails}});var wt=RO();Object.defineProperty(n,"Conversation",{enumerable:!0,get:function(){return wt.Conversation}}),Object.defineProperty(n,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return wt.ConversationExpirationEventArgs}}),Object.defineProperty(n,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return wt.ConversationParticipantsChangedEventArgs}}),Object.defineProperty(n,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return wt.ConversationTranslationCanceledEventArgs}}),Object.defineProperty(n,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return wt.ConversationTranslationEventArgs}}),Object.defineProperty(n,"ConversationTranslationResult",{enumerable:!0,get:function(){return wt.ConversationTranslationResult}}),Object.defineProperty(n,"ConversationTranslator",{enumerable:!0,get:function(){return wt.ConversationTranslator}}),Object.defineProperty(n,"ConversationTranscriber",{enumerable:!0,get:function(){return wt.ConversationTranscriber}}),Object.defineProperty(n,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return wt.ConversationTranscriptionResult}}),Object.defineProperty(n,"Meeting",{enumerable:!0,get:function(){return wt.Meeting}}),Object.defineProperty(n,"MeetingTranscriber",{enumerable:!0,get:function(){return wt.MeetingTranscriber}}),Object.defineProperty(n,"Participant",{enumerable:!0,get:function(){return wt.Participant}}),Object.defineProperty(n,"ParticipantChangedReason",{enumerable:!0,get:function(){return wt.ParticipantChangedReason}}),Object.defineProperty(n,"User",{enumerable:!0,get:function(){return wt.User}});var xt=NO();Object.defineProperty(n,"Synthesizer",{enumerable:!0,get:function(){return xt.Synthesizer}});var qt=EO;Object.defineProperty(n,"SpeechSynthesisOutputFormat",{enumerable:!0,get:function(){return qt.SpeechSynthesisOutputFormat}});var cn=hde();Object.defineProperty(n,"SpeechSynthesizer",{enumerable:!0,get:function(){return cn.SpeechSynthesizer}});var Ae=HI;Object.defineProperty(n,"SynthesisResult",{enumerable:!0,get:function(){return Ae.SynthesisResult}});var ue=pde();Object.defineProperty(n,"SpeechSynthesisResult",{enumerable:!0,get:function(){return ue.SpeechSynthesisResult}});var et=VI;Object.defineProperty(n,"SpeechSynthesisEventArgs",{enumerable:!0,get:function(){return et.SpeechSynthesisEventArgs}});var Be=$I;Object.defineProperty(n,"SpeechSynthesisWordBoundaryEventArgs",{enumerable:!0,get:function(){return Be.SpeechSynthesisWordBoundaryEventArgs}});var lt=WI;Object.defineProperty(n,"SpeechSynthesisBookmarkEventArgs",{enumerable:!0,get:function(){return lt.SpeechSynthesisBookmarkEventArgs}});var St=qI;Object.defineProperty(n,"SpeechSynthesisVisemeEventArgs",{enumerable:!0,get:function(){return St.SpeechSynthesisVisemeEventArgs}});var nn=rW;Object.defineProperty(n,"SpeechSynthesisBoundaryType",{enumerable:!0,get:function(){return nn.SpeechSynthesisBoundaryType}});var Dr=_de();Object.defineProperty(n,"SynthesisVoicesResult",{enumerable:!0,get:function(){return Dr.SynthesisVoicesResult}});var mr=iW;Object.defineProperty(n,"VoiceInfo",{enumerable:!0,get:function(){return mr.VoiceInfo}});var wn=QI;Object.defineProperty(n,"SpeakerAudioDestination",{enumerable:!0,get:function(){return wn.SpeakerAudioDestination}});var yn=Cde();Object.defineProperty(n,"ConversationTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return yn.ConversationTranscriptionCanceledEventArgs}});var jr=wde();Object.defineProperty(n,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return jr.MeetingTranscriptionCanceledEventArgs}});var Mr=sW;Object.defineProperty(n,"PronunciationAssessmentGradingSystem",{enumerable:!0,get:function(){return Mr.PronunciationAssessmentGradingSystem}});var Wi=oW;Object.defineProperty(n,"PronunciationAssessmentGranularity",{enumerable:!0,get:function(){return Wi.PronunciationAssessmentGranularity}});var nr=Tde();Object.defineProperty(n,"PronunciationAssessmentConfig",{enumerable:!0,get:function(){return nr.PronunciationAssessmentConfig}});var ma=xde();Object.defineProperty(n,"PronunciationAssessmentResult",{enumerable:!0,get:function(){return ma.PronunciationAssessmentResult}});var _l=bO;Object.defineProperty(n,"LanguageIdMode",{enumerable:!0,get:function(){return _l.LanguageIdMode}});var qi=Ide();Object.defineProperty(n,"AvatarConfig",{enumerable:!0,get:function(){return qi.AvatarConfig}});var Yn=cW;Object.defineProperty(n,"AvatarEventArgs",{enumerable:!0,get:function(){return Yn.AvatarEventArgs}});var re=bde();Object.defineProperty(n,"AvatarSynthesizer",{enumerable:!0,get:function(){return re.AvatarSynthesizer}});var Re=Ug;Object.defineProperty(n,"AvatarVideoFormat",{enumerable:!0,get:function(){return Re.AvatarVideoFormat}}),Object.defineProperty(n,"Coordinate",{enumerable:!0,get:function(){return Re.Coordinate}});var qe=Nde();Object.defineProperty(n,"AvatarWebRTCConnectionResult",{enumerable:!0,get:function(){return qe.AvatarWebRTCConnectionResult}});var Le=Pde();Object.defineProperty(n,"Diagnostics",{enumerable:!0,get:function(){return Le.Diagnostics}});var $e=SO;Object.defineProperty(n,"LogLevel",{enumerable:!0,get:function(){return $e.LogLevel}})}(CM)),CM}var P7;function Ode(){if(P7)return n1;P7=1,Object.defineProperty(n1,"__esModule",{value:!0}),n1.ProxyInfo=void 0;const n=vt();let e=class dW{constructor(r,i,s,o){this.privProxyHostName=r,this.privProxyPort=i,this.privProxyUserName=s,this.privProxyPassword=o}static fromParameters(r){return new dW(r.getProperty(n.PropertyId.SpeechServiceConnection_ProxyHostName),parseInt(r.getProperty(n.PropertyId.SpeechServiceConnection_ProxyPort),10),r.getProperty(n.PropertyId.SpeechServiceConnection_ProxyUserName),r.getProperty(n.PropertyId.SpeechServiceConnection_ProxyPassword))}static fromRecognizerConfig(r){return this.fromParameters(r.parameters)}get HostName(){return this.privProxyHostName}get Port(){return this.privProxyPort}get UserName(){return this.privProxyUserName}get Password(){return this.privProxyPassword}};return n1.ProxyInfo=e,n1}var hW={};const Dde=new Set(["json","buffer","string"]);var Lde=n=>(...e)=>{const t=new Set;let r,i,s,o="";return e.forEach(a=>{if(typeof a=="string")if(a.toUpperCase()===a)if(r){const l=`Can't set method to ${a}, already set to ${r}.`;throw new Error(l)}else r=a;else if(a.startsWith("http:")||a.startsWith("https:"))o=a;else if(Dde.has(a))i=a;else throw new Error(`Unknown encoding, ${a}`);else if(typeof a=="number")t.add(a);else if(typeof a=="object")if(Array.isArray(a)||a instanceof Set)a.forEach(l=>t.add(l));else{if(s)throw new Error("Cannot set headers twice.");s=a}else throw new Error(`Unknown type: ${typeof a}`)}),r||(r="GET"),t.size===0&&t.add(200),n(t,r,i,s,o)};const kde=Lde;class PO extends Error{constructor(e,...t){super(...t),Error.captureStackTrace&&Error.captureStackTrace(this,PO),this.name="StatusError",this.message=e.statusMessage,this.statusCode=e.status,this.res=e,this.json=e.json.bind(e),this.text=e.text.bind(e),this.arrayBuffer=e.arrayBuffer.bind(e);let r;Object.defineProperty(this,"responseBody",{get:()=>(r||(r=this.arrayBuffer()),r)}),this.headers={};for(const[s,o]of e.headers.entries())this.headers[s.toLowerCase()]=o}}const Bde=(n,e,t,r,i)=>async(s,o,a={})=>{s=i+(s||"");let l=new URL(s);if(r||(r={}),l.username&&(r.Authorization="Basic "+btoa(l.username+":"+l.password),l=new URL(l.protocol+"//"+l.host+l.pathname+l.search)),l.protocol!=="https:"&&l.protocol!=="http:")throw new Error(`Unknown protocol, ${l.protocol}`);if(o&&!(o instanceof ArrayBuffer||ArrayBuffer.isView(o)||typeof o=="string"))if(typeof o=="object")o=JSON.stringify(o),r["Content-Type"]="application/json";else throw new Error("Unknown body type.");a=new Headers({...r||{},...a});const c=await fetch(l,{method:e,headers:a,body:o});if(c.statusCode=c.status,!n.has(c.status))throw new PO(c);return t==="json"?c.json():t==="buffer"?c.arrayBuffer():t==="string"?c.text():c};var Fde=kde(Bde);(function(n){var e=Ze&&Ze.__awaiter||function(a,l,c,u){function d(h){return h instanceof c?h:new c(function(f){f(h)})}return new(c||(c=Promise))(function(h,f){function m(y){try{v(u.next(y))}catch(A){f(A)}}function g(y){try{v(u.throw(y))}catch(A){f(A)}}function v(y){y.done?h(y.value):d(y.value).then(m,g)}v((u=u.apply(a,l||[])).next())})},t=Ze&&Ze.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(n,"__esModule",{value:!0}),n.RestMessageAdapter=n.RestRequestType=void 0;const r=t(Fde),i=pn();var s;(function(a){a.Get="GET",a.Post="POST",a.Delete="DELETE",a.File="file"})(s=n.RestRequestType||(n.RestRequestType={}));class o{constructor(l){if(!l)throw new i.ArgumentNullError("configParams");this.privHeaders=l.headers,this.privIgnoreCache=l.ignoreCache}static extractHeaderValue(l,c){let u="";try{const d=c.trim().split(/[\r\n]+/),h={};d.forEach(f=>{const m=f.split(": "),g=m.shift().toLowerCase(),v=m.join(": ");h[g]=v}),u=h[l.toLowerCase()]}catch{}return u}set options(l){this.privHeaders=l.headers,this.privIgnoreCache=l.ignoreCache}setHeaders(l,c){this.privHeaders[l]=c}request(l,c,u={},d=null){const h=new i.Deferred,f=l===s.File?"POST":l,m=(v,y={})=>{const A=v;return{data:JSON.stringify(y),headers:JSON.stringify(v.headers),json:y,ok:v.statusCode>=200&&v.statusCode<300,status:v.statusCode,statusText:y.error?y.error.message:A.statusText?A.statusText:A.statusMessage}},g=v=>{const y=r.default(c,f,this.privHeaders,200,201,202,204,400,401,402,403,404),A=this.queryParams(u)===""?"":`?${this.queryParams(u)}`;y(A,v).then(C=>e(this,void 0,void 0,function*(){if(l===s.Delete||C.statusCode===204)h.resolve(m(C));else try{const T=yield C.json();h.resolve(m(C,T))}catch{h.resolve(m(C))}})).catch(C=>{h.reject(C)})};return this.privIgnoreCache&&(this.privHeaders["Cache-Control"]="no-cache"),l===s.Post&&d&&(this.privHeaders["content-type"]="application/json",this.privHeaders["Content-Type"]="application/json"),g(d),h.promise}queryParams(l={}){return Object.keys(l).map(c=>encodeURIComponent(c)+"="+encodeURIComponent(l[c])).join("&")}}n.RestMessageAdapter=o})(hW);var ZS={};Object.defineProperty(ZS,"__esModule",{value:!0});ZS.RestConfigBase=void 0;class xf{static get requestOptions(){return xf.privDefaultRequestOptions}static get configParams(){return xf.privDefaultParams}static get restErrors(){return xf.privRestErrors}}ZS.RestConfigBase=xf;xf.privDefaultRequestOptions={headers:{Accept:"application/json"},ignoreCache:!1,timeout:1e4};xf.privRestErrors={authInvalidSubscriptionKey:"You must specify either an authentication token to use, or a Cognitive Speech subscription key.",authInvalidSubscriptionRegion:"You must specify the Cognitive Speech region to use.",invalidArgs:"Required input not found: {arg}.",invalidCreateJoinConversationResponse:"Creating/Joining conversation failed with HTTP {status}.",invalidParticipantRequest:"The requested participant was not found.",permissionDeniedConnect:"Required credentials not found.",permissionDeniedConversation:"Invalid operation: only the host can {command} the conversation.",permissionDeniedParticipant:"Invalid operation: only the host can {command} a participant.",permissionDeniedSend:"Invalid operation: the conversation is not in a connected state.",permissionDeniedStart:"Invalid operation: there is already an active conversation."};xf.privDefaultParams={apiVersion:"api-version",authorization:"Authorization",clientAppId:"X-ClientAppId",contentTypeKey:"Content-Type",correlationId:"X-CorrelationId",languageCode:"language",nickname:"nickname",profanity:"profanity",requestId:"X-RequestId",roomId:"roomid",sessionToken:"token",subscriptionKey:"Ocp-Apim-Subscription-Key",subscriptionRegion:"Ocp-Apim-Subscription-Region",token:"X-CapitoToken"};var O7;function Ws(){return O7||(O7=1,function(n){var e=Ze&&Ze.__createBinding||(Object.create?function(r,i,s,o){o===void 0&&(o=s),Object.defineProperty(r,o,{enumerable:!0,get:function(){return i[s]}})}:function(r,i,s,o){o===void 0&&(o=s),r[o]=i[s]}),t=Ze&&Ze.__exportStar||function(r,i){for(var s in r)s!=="default"&&!i.hasOwnProperty(s)&&e(i,r,s)};Object.defineProperty(n,"__esModule",{value:!0}),t(EI,n),t(A$,n),t(Oce(),n),t(Dce(),n),t(CI,n),t(wI,n),t(QS,n),t(TI,n),t(Ode(),n),t(hW,n),t(ZS,n)}(SM)),SM}var D7;function zde(){if(D7)return Zv;D7=1,Object.defineProperty(Zv,"__esModule",{value:!0}),Zv.IntentConnectionFactory=void 0;const n=Ws(),e=vt(),t=Kc(),r=Wt(),i=$s;let s=class extends t.ConnectionFactoryBase{create(a,l,c){let u=a.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint);if(!u){const m=a.parameters.getProperty(e.PropertyId.SpeechServiceConnection_IntentRegion),g=t.ConnectionFactoryBase.getHostSuffix(m);u=a.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,"wss://"+m+".sr.speech"+g)+"/speech/recognition/interactive/cognitiveservices/v1"}const d={format:"simple",language:a.parameters.getProperty(e.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(a,d,u);const h={};l.token!==void 0&&l.token!==""&&(h[l.headerName]=l.token),h[i.HeaderNames.ConnectionId]=c,a.parameters.setProperty(e.PropertyId.SpeechServiceConnection_Url,u);const f=a.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new n.WebsocketConnection(u,d,h,new r.WebsocketMessageFormatter,n.ProxyInfo.fromRecognizerConfig(a),f,c)}getSpeechRegionFromIntentRegion(a){switch(a){case"West US":case"US West":case"westus":return"uswest";case"West US 2":case"US West 2":case"westus2":return"uswest2";case"South Central US":case"US South Central":case"southcentralus":return"ussouthcentral";case"West Central US":case"US West Central":case"westcentralus":return"uswestcentral";case"East US":case"US East":case"eastus":return"useast";case"East US 2":case"US East 2":case"eastus2":return"useast2";case"West Europe":case"Europe West":case"westeurope":return"europewest";case"North Europe":case"Europe North":case"northeurope":return"europenorth";case"Brazil South":case"South Brazil":case"southbrazil":return"brazilsouth";case"Australia East":case"East Australia":case"eastaustralia":return"australiaeast";case"Southeast Asia":case"Asia Southeast":case"southeastasia":return"asiasoutheast";case"East Asia":case"Asia East":case"eastasia":return"asiaeast";default:return a}}};return Zv.IntentConnectionFactory=s,Zv}var Rp={},L7;function Ude(){if(L7)return Rp;L7=1,Object.defineProperty(Rp,"__esModule",{value:!0}),Rp.VoiceProfileConnectionFactory=Rp.SpeakerRecognitionConnectionFactory=void 0;const n=Ws(),e=vt(),t=Kc(),r=Wt(),i=$s;class s extends t.ConnectionFactoryBase{create(c,u,d,h){let f=c.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint);if(!f){const y=c.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Region),A=t.ConnectionFactoryBase.getHostSuffix(y),C=c.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,`wss://${y}.spr-frontend.speech${A}`),T=c.parameters.getProperty(e.PropertyId.SpeechServiceConnection_SpeakerIdMode,"TextIndependentIdentification");f=`${C}/speaker/ws/${this.scenarioToPath(T)}/${d}`}const m={format:"simple",language:c.parameters.getProperty(e.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(c,m,f);const g={};u.token!==void 0&&u.token!==""&&(g[u.headerName]=u.token),g[i.HeaderNames.ConnectionId]=h,g[i.HeaderNames.SpIDAuthKey]=c.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Key),c.parameters.setProperty(e.PropertyId.SpeechServiceConnection_Url,f);const v=c.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new n.WebsocketConnection(f,m,g,new r.WebsocketMessageFormatter,n.ProxyInfo.fromRecognizerConfig(c),v,h)}scenarioToPath(c){switch(c){case"TextIndependentVerification":case"2":return"verification/text-independent";case"TextDependentVerification":case"1":return"verification/text-dependent";default:return"identification/text-independent"}}}let o=class extends s{create(c,u,d){return super.create(c,u,"recognition",d)}};Rp.SpeakerRecognitionConnectionFactory=o;class a extends s{create(c,u,d){return super.create(c,u,"profile",d)}}return Rp.VoiceProfileConnectionFactory=a,Rp}var JI={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.RecognitionEndedEvent=n.RecognitionCompletionStatus=n.RecognitionStartedEvent=n.ConnectingToServiceEvent=n.ListeningStartedEvent=n.RecognitionTriggeredEvent=n.SpeechRecognitionEvent=void 0;const e=pn();class t extends e.PlatformEvent{constructor(u,d,h,f=e.EventType.Info){super(u,f),this.privRequestId=d,this.privSessionId=h}get requestId(){return this.privRequestId}get sessionId(){return this.privSessionId}}n.SpeechRecognitionEvent=t;class r extends t{constructor(u,d,h,f){super("RecognitionTriggeredEvent",u,d),this.privAudioSourceId=h,this.privAudioNodeId=f}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}n.RecognitionTriggeredEvent=r;class i extends t{constructor(u,d,h,f){super("ListeningStartedEvent",u,d),this.privAudioSourceId=h,this.privAudioNodeId=f}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}n.ListeningStartedEvent=i;class s extends t{constructor(u,d,h){super("ConnectingToServiceEvent",u,h),this.privAuthFetchEventid=d}get authFetchEventid(){return this.privAuthFetchEventid}}n.ConnectingToServiceEvent=s;class o extends t{constructor(u,d,h,f,m){super("RecognitionStartedEvent",u,m),this.privAudioSourceId=d,this.privAudioNodeId=h,this.privAuthFetchEventId=f}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}}n.RecognitionStartedEvent=o;var a;(function(c){c[c.Success=0]="Success",c[c.AudioSourceError=1]="AudioSourceError",c[c.AudioSourceTimeout=2]="AudioSourceTimeout",c[c.AuthTokenFetchError=3]="AuthTokenFetchError",c[c.AuthTokenFetchTimeout=4]="AuthTokenFetchTimeout",c[c.UnAuthorized=5]="UnAuthorized",c[c.ConnectTimeout=6]="ConnectTimeout",c[c.ConnectError=7]="ConnectError",c[c.ClientRecognitionActivityTimeout=8]="ClientRecognitionActivityTimeout",c[c.UnknownError=9]="UnknownError"})(a=n.RecognitionCompletionStatus||(n.RecognitionCompletionStatus={}));class l extends t{constructor(u,d,h,f,m,g,v,y){super("RecognitionEndedEvent",u,m,v===a.Success?e.EventType.Info:e.EventType.Error),this.privAudioSourceId=d,this.privAudioNodeId=h,this.privAuthFetchEventId=f,this.privStatus=v,this.privError=y,this.privServiceTag=g}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}get serviceTag(){return this.privServiceTag}get status(){return this.privStatus}get error(){return this.privError}}n.RecognitionEndedEvent=l})(JI);var iy={},lh={};Object.defineProperty(lh,"__esModule",{value:!0});lh.SpeechConnectionMessage=void 0;const MM=pn(),cd=$s;class OO extends MM.ConnectionMessage{constructor(e,t,r,i,s,o,a,l){if(!t)throw new MM.ArgumentNullError("path");if(!r)throw new MM.ArgumentNullError("requestId");const c={};if(c[cd.HeaderNames.Path]=t,c[cd.HeaderNames.RequestId]=r,c[cd.HeaderNames.RequestTimestamp]=new Date().toISOString(),i&&(c[cd.HeaderNames.ContentType]=i),o&&(c[cd.HeaderNames.RequestStreamId]=o),a)for(const u in a)u&&(c[u]=a[u]);l?super(e,s,c,l):super(e,s,c),this.privPath=t,this.privRequestId=r,this.privContentType=i,this.privStreamId=o,this.privAdditionalHeaders=a}get path(){return this.privPath}get requestId(){return this.privRequestId}get contentType(){return this.privContentType}get streamId(){return this.privStreamId}get additionalHeaders(){return this.privAdditionalHeaders}static fromConnectionMessage(e){let t=null,r=null,i=null,s=null;const o={};if(e.headers)for(const a in e.headers)a&&(a.toLowerCase()===cd.HeaderNames.Path.toLowerCase()?t=e.headers[a]:a.toLowerCase()===cd.HeaderNames.RequestId.toLowerCase()?r=e.headers[a]:a.toLowerCase()===cd.HeaderNames.ContentType.toLowerCase()?i=e.headers[a]:a.toLowerCase()===cd.HeaderNames.RequestStreamId.toLowerCase()?s=e.headers[a]:o[a]=e.headers[a]);return new OO(e.messageType,t,r,i,e.body,s,o,e.id)}}lh.SpeechConnectionMessage=OO;var k7;function jde(){if(k7)return iy;k7=1;var n=Ze&&Ze.__awaiter||function(a,l,c,u){function d(h){return h instanceof c?h:new c(function(f){f(h)})}return new(c||(c=Promise))(function(h,f){function m(y){try{v(u.next(y))}catch(A){f(A)}}function g(y){try{v(u.throw(y))}catch(A){f(A)}}function v(y){y.done?h(y.value):d(y.value).then(m,g)}v((u=u.apply(a,l||[])).next())})};Object.defineProperty(iy,"__esModule",{value:!0}),iy.ServiceRecognizerBase=void 0;const e=Ws(),t=pn(),r=vt(),i=Wt(),s=lh;let o=class u_{constructor(l,c,u,d,h){if(this.privConnectionConfigurationPromise=void 0,this.privConnectionPromise=void 0,this.privSetTimeout=setTimeout,this.privIsLiveAudio=!1,this.privAverageBytesPerMs=0,this.privEnableSpeakerId=!1,this.privExpectContentAssessmentResponse=!1,this.recognizeOverride=void 0,this.recognizeSpeaker=void 0,this.disconnectOverride=void 0,this.receiveMessageOverride=void 0,this.sendPrePayloadJSONOverride=void 0,this.postConnectImplOverride=void 0,this.configConnectionOverride=void 0,this.handleSpeechPhraseMessage=void 0,this.handleSpeechHypothesisMessage=void 0,!l)throw new t.ArgumentNullError("authentication");if(!c)throw new t.ArgumentNullError("connectionFactory");if(!u)throw new t.ArgumentNullError("audioSource");if(!d)throw new t.ArgumentNullError("recognizerConfig");this.privEnableSpeakerId=d.isSpeakerDiarizationEnabled,this.privMustReportEndOfStream=!1,this.privAuthentication=l,this.privConnectionFactory=c,this.privAudioSource=u,this.privRecognizerConfig=d,this.privIsDisposed=!1,this.privRecognizer=h,this.privRequestSession=new i.RequestSession(this.privAudioSource.id()),this.privConnectionEvents=new t.EventSource,this.privServiceEvents=new t.EventSource,this.privDynamicGrammar=new i.DynamicGrammarBuilder,this.privSpeechContext=new i.SpeechContext(this.privDynamicGrammar),this.privAgentConfig=new i.AgentConfig,this.privRecognizerConfig.parameters.getProperty(r.PropertyId.WebWorkerLoadType,"on").toLowerCase()==="on"&&typeof Blob<"u"&&typeof Worker<"u"?this.privSetTimeout=t.Timeout.setTimeout:typeof window<"u"&&(this.privSetTimeout=window.setTimeout.bind(window)),this.connectionEvents.attach(m=>{if(m.name==="ConnectionClosedEvent"){const g=m;(g.statusCode===1003||g.statusCode===1007||g.statusCode===1002||g.statusCode===4e3||this.privRequestSession.numConnectionAttempts>this.privRecognizerConfig.maxRetryCount)&&this.cancelRecognitionLocal(r.CancellationReason.Error,g.statusCode===1007?r.CancellationErrorCode.BadRequestParameters:r.CancellationErrorCode.ConnectionFailure,`${g.reason} websocket error code: ${g.statusCode}`)}}),this.privEnableSpeakerId&&(this.privDiarizationSessionId=t.createNoDashGuid()),this.setLanguageIdJson(),this.setOutputDetailLevelJson()}setTranslationJson(){const l=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0);if(l!==void 0){const c=l.split(","),u=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationVoice,void 0),d=u!==void 0?"Synthesize":"None";if(this.privSpeechContext.setSection("translation",{onSuccess:{action:d},output:{interimResults:{mode:"Always"}},targetLanguages:c}),u!==void 0){const h={};for(const f of c)h[f]=u;this.privSpeechContext.setSection("synthesis",{defaultVoices:h})}}}setSpeechSegmentationTimeoutJson(){const l=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.Speech_SegmentationSilenceTimeoutMs,void 0);if(l!==void 0){const c=this.recognitionMode===i.RecognitionMode.Conversation?"CONVERSATION":this.recognitionMode===i.RecognitionMode.Dictation?"DICTATION":"INTERACTIVE",u=parseInt(l,10),d=this.privSpeechContext.getSection("phraseDetection");d.mode=c,d[c]={segmentation:{mode:"Custom",segmentationSilenceTimeoutMs:u}},this.privSpeechContext.setSection("phraseDetection",d)}}setLanguageIdJson(){const l=this.privSpeechContext.getSection("phraseDetection");if(this.privRecognizerConfig.autoDetectSourceLanguages!==void 0){const u=this.privRecognizerConfig.autoDetectSourceLanguages.split(",");let d;this.privRecognizerConfig.languageIdMode==="Continuous"?d="DetectContinuous":d="DetectAtAudioStart",this.privSpeechContext.setSection("languageId",{Priority:"PrioritizeLatency",languages:u,mode:d,onSuccess:{action:"Recognize"},onUnknown:{action:"None"}}),this.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"Auto"},phraseResults:{resultType:"Always"}});const h=this.privRecognizerConfig.sourceLanguageModels;h!==void 0&&(l.customModels=h,l.onInterim={action:"None"},l.onSuccess={action:"None"})}this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0&&(l.onInterim={action:"Translate"},l.onSuccess={action:"Translate"},this.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"None"},phraseResults:{resultType:"None"}})),this.privSpeechContext.setSection("phraseDetection",l)}setOutputDetailLevelJson(){this.privEnableSpeakerId&&(this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()==="true"?this.privSpeechContext.setWordLevelTimings():this.privRecognizerConfig.parameters.getProperty(i.OutputFormatPropertyName,r.OutputFormat[r.OutputFormat.Simple]).toLowerCase()===r.OutputFormat[r.OutputFormat.Detailed].toLocaleLowerCase()&&this.privSpeechContext.setDetailedOutputFormat())}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}get audioSource(){return this.privAudioSource}get speechContext(){return this.privSpeechContext}get dynamicGrammar(){return this.privDynamicGrammar}get agentConfig(){return this.privAgentConfig}set conversationTranslatorToken(l){this.privRecognizerConfig.parameters.setProperty(r.PropertyId.ConversationTranslator_Token,l)}set voiceProfileType(l){this.privRecognizerConfig.parameters.setProperty(r.PropertyId.SpeechServiceConnection_SpeakerIdMode,l)}set authentication(l){this.privAuthentication=l}isDisposed(){return this.privIsDisposed}dispose(l){return n(this,void 0,void 0,function*(){if(this.privIsDisposed=!0,this.privConnectionConfigurationPromise!==void 0)try{yield(yield this.privConnectionConfigurationPromise).dispose(l)}catch{return}})}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}get recognitionMode(){return this.privRecognizerConfig.recognitionMode}recognize(l,c,u){return n(this,void 0,void 0,function*(){if(this.recognizeOverride!==void 0){yield this.recognizeOverride(l,c,u);return}this.privConnectionConfigurationPromise=void 0,this.privRecognizerConfig.recognitionMode=l,this.setSpeechSegmentationTimeoutJson(),this.setTranslationJson(),this.privSuccessCallback=c,this.privErrorCallback=u,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privAudioSource.events);const d=this.connectImpl();let h;try{const g=yield this.audioSource.attach(this.privRequestSession.audioNodeId),v=yield this.audioSource.format,y=yield this.audioSource.deviceInfo;this.privIsLiveAudio=y.type&&y.type===i.type.Microphones,h=new e.ReplayableAudioNode(g,v.avgBytesPerSec),yield this.privRequestSession.onAudioSourceAttachCompleted(h,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:y}}catch(g){throw yield this.privRequestSession.onStopRecognizing(),g}try{yield d}catch(g){yield this.cancelRecognitionLocal(r.CancellationReason.Error,r.CancellationErrorCode.ConnectionFailure,g);return}const f=new r.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,f),this.receiveMessage(),this.sendAudio(h).catch(g=>n(this,void 0,void 0,function*(){yield this.cancelRecognitionLocal(r.CancellationReason.Error,r.CancellationErrorCode.RuntimeError,g)}))})}stopRecognizing(){return n(this,void 0,void 0,function*(){if(this.privRequestSession.isRecognizing)try{yield this.audioSource.turnOff(),yield this.sendFinalAudio(),yield this.privRequestSession.onStopRecognizing(),yield this.privRequestSession.turnCompletionPromise}finally{yield this.privRequestSession.dispose()}})}connect(){return n(this,void 0,void 0,function*(){return yield this.connectImpl(),Promise.resolve()})}connectAsync(l,c){this.connectImpl().then(()=>{try{l&&l()}catch(u){c&&c(u)}},u=>{try{c&&c(u)}catch{}})}disconnect(){return n(this,void 0,void 0,function*(){if(yield this.cancelRecognitionLocal(r.CancellationReason.Error,r.CancellationErrorCode.NoError,"Disconnecting"),this.disconnectOverride!==void 0&&(yield this.disconnectOverride()),this.privConnectionPromise!==void 0)try{yield(yield this.privConnectionPromise).dispose()}catch{}this.privConnectionPromise=void 0})}sendMessage(l){}sendNetworkMessage(l,c){return n(this,void 0,void 0,function*(){const u=typeof c=="string"?t.MessageType.Text:t.MessageType.Binary,d=typeof c=="string"?"application/json":"";return(yield this.fetchConnection()).send(new s.SpeechConnectionMessage(u,l,this.privRequestSession.requestId,d,c))})}set activityTemplate(l){this.privActivityTemplate=l}get activityTemplate(){return this.privActivityTemplate}set expectContentAssessmentResponse(l){this.privExpectContentAssessmentResponse=l}sendTelemetryData(){return n(this,void 0,void 0,function*(){const l=this.privRequestSession.getTelemetry();if(u_.telemetryDataEnabled!==!0||this.privIsDisposed||l===null)return;if(u_.telemetryData)try{u_.telemetryData(l)}catch{}yield(yield this.fetchConnection()).send(new s.SpeechConnectionMessage(t.MessageType.Text,"telemetry",this.privRequestSession.requestId,"application/json",l))})}cancelRecognitionLocal(l,c,u){return n(this,void 0,void 0,function*(){this.privRequestSession.isRecognizing&&(yield this.privRequestSession.onStopRecognizing(),this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,l,c,u))})}receiveMessage(){return n(this,void 0,void 0,function*(){try{if(this.privIsDisposed)return;let l=yield this.fetchConnection();const c=yield l.read();if(this.receiveMessageOverride!==void 0)return this.receiveMessageOverride();if(!c)return this.receiveMessage();this.privServiceHasSentMessage=!0;const u=s.SpeechConnectionMessage.fromConnectionMessage(c);if(u.requestId.toLowerCase()===this.privRequestSession.requestId.toLowerCase())switch(u.path.toLowerCase()){case"turn.start":this.privMustReportEndOfStream=!0,this.privRequestSession.onServiceTurnStartResponse();break;case"speech.startdetected":const d=i.SpeechDetected.fromJSON(u.textBody),h=new r.RecognitionEventArgs(d.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,h);break;case"speech.enddetected":let f;u.textBody.length>0?f=u.textBody:f="{ Offset: 0 }";const m=i.SpeechDetected.fromJSON(f),g=new r.RecognitionEventArgs(m.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,g);break;case"turn.end":yield this.sendTelemetryData(),this.privRequestSession.isSpeechEnded&&this.privMustReportEndOfStream&&(this.privMustReportEndOfStream=!1,yield this.cancelRecognitionLocal(r.CancellationReason.EndOfStream,r.CancellationErrorCode.NoError,void 0));const v=new r.SessionEventArgs(this.privRequestSession.sessionId);if(yield this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition),!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing){this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,v);return}else l=yield this.fetchConnection(),yield this.sendPrePayloadJSON(l);break;default:(yield this.processTypeSpecificMessages(u))||this.privServiceEvents&&this.serviceEvents.onEvent(new t.ServiceEvent(u.path.toLowerCase(),u.textBody))}return this.receiveMessage()}catch{return null}})}updateSpeakerDiarizationAudioOffset(){const c=this.privRequestSession.recognitionBytesSent/this.privAverageBytesPerMs;this.privSpeechContext.setSpeakerDiarizationAudioOffsetMs(c)}sendSpeechContext(l,c){this.privEnableSpeakerId&&this.updateSpeakerDiarizationAudioOffset();const u=this.speechContext.toJSON();if(c&&this.privRequestSession.onSpeechContext(),u)return l.send(new s.SpeechConnectionMessage(t.MessageType.Text,"speech.context",this.privRequestSession.requestId,"application/json",u))}noOp(){}sendPrePayloadJSON(l,c=!0){return n(this,void 0,void 0,function*(){if(this.sendPrePayloadJSONOverride!==void 0)return this.sendPrePayloadJSONOverride(l);yield this.sendSpeechContext(l,c),yield this.sendWaveHeader(l)})}sendWaveHeader(l){return n(this,void 0,void 0,function*(){const c=yield this.audioSource.format;return l.send(new s.SpeechConnectionMessage(t.MessageType.Binary,"audio",this.privRequestSession.requestId,"audio/x-wav",c.header))})}connectImpl(){return this.privConnectionPromise!==void 0?this.privConnectionPromise.then(l=>l.state()===t.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl())):(this.privConnectionPromise=this.retryableConnect(),this.privConnectionPromise.catch(()=>{}),this.postConnectImplOverride!==void 0?this.postConnectImplOverride(this.privConnectionPromise):this.privConnectionPromise)}sendSpeechServiceConfig(l,c,u){if(c.onSpeechContext(),u_.telemetryDataEnabled!==!0){const h={context:{system:JSON.parse(u).context.system}};u=JSON.stringify(h)}if(this.privRecognizerConfig.parameters.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()==="true"){const d=JSON.parse(u);d.context.DisableReferenceChannel="True",d.context.MicSpec="1_0_0",u=JSON.stringify(d)}if(u)return l.send(new s.SpeechConnectionMessage(t.MessageType.Text,"speech.config",c.requestId,"application/json",u))}fetchConnection(){return n(this,void 0,void 0,function*(){return this.privConnectionConfigurationPromise!==void 0?this.privConnectionConfigurationPromise.then(l=>l.state()===t.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),yield this.privConnectionConfigurationPromise)})}sendAudio(l){return n(this,void 0,void 0,function*(){const c=yield this.audioSource.format;this.privAverageBytesPerMs=c.avgBytesPerSec/1e3;let u=Date.now();const d=this.privRecognizerConfig.parameters.getProperty("SPEECH-TransmitLengthBeforThrottleMs","5000"),h=c.avgBytesPerSec/1e3*parseInt(d,10),f=this.privRequestSession.recogNumber,m=()=>n(this,void 0,void 0,function*(){if(!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===f){const g=yield this.fetchConnection(),v=yield l.read();if(this.privRequestSession.isSpeechEnded)return;let y,A;if(!v||v.isEnd?(y=null,A=0):(y=v.buffer,this.privRequestSession.onAudioSent(y.byteLength),h>=this.privRequestSession.bytesSent?A=0:A=Math.max(0,u-Date.now())),A!==0&&(yield this.delay(A)),y!==null&&(u=Date.now()+y.byteLength*1e3/(c.avgBytesPerSec*2)),!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===f)if(g.send(new s.SpeechConnectionMessage(t.MessageType.Binary,"audio",this.privRequestSession.requestId,null,y)).catch(()=>{this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition).catch(()=>{})}),v!=null&&v.isEnd)this.privIsLiveAudio||this.privRequestSession.onSpeechEnded();else return m()}});return m()})}retryableConnect(){return n(this,void 0,void 0,function*(){let l=!1;this.privAuthFetchEventId=t.createNoDashGuid();const c=this.privRequestSession.sessionId;this.privConnectionId=c!==void 0?c:t.createNoDashGuid(),this.privRequestSession.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId);let u=0,d="";for(;this.privRequestSession.numConnectionAttempts<=this.privRecognizerConfig.maxRetryCount;){const f=yield l?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);yield this.privRequestSession.onAuthCompleted(!1);const m=this.privConnectionFactory.create(this.privRecognizerConfig,f,this.privConnectionId);this.privRequestSession.listenForServiceTelemetry(m.events),m.events.attach(v=>{this.connectionEvents.onEvent(v)});const g=yield m.open();if(g.statusCode===200)return yield this.privRequestSession.onConnectionEstablishCompleted(g.statusCode),Promise.resolve(m);g.statusCode===1006&&(l=!0),u=g.statusCode,d=g.reason,this.privRequestSession.onRetryConnection()}return yield this.privRequestSession.onConnectionEstablishCompleted(u,d),Promise.reject(`Unable to contact server. StatusCode: ${u}, ${this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint)} Reason: ${d}`)})}delay(l){return new Promise(c=>this.privSetTimeout(c,l))}writeBufferToConsole(l){let c="Buffer Size: ";if(l===null)c+="null";else{const u=new Uint8Array(l);c+=`${l.byteLength}\r
`;for(let d=0;d<l.byteLength;d++)c+=u[d].toString(16).padStart(2,"0")+" ",(d+1)%16===0&&(console.info(c),c="")}console.info(c)}sendFinalAudio(){return n(this,void 0,void 0,function*(){yield(yield this.fetchConnection()).send(new s.SpeechConnectionMessage(t.MessageType.Binary,"audio",this.privRequestSession.requestId,null,null))})}configureConnection(){return n(this,void 0,void 0,function*(){const l=yield this.connectImpl();return this.configConnectionOverride!==void 0?this.configConnectionOverride(l):(yield this.sendSpeechServiceConfig(l,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),yield this.sendPrePayloadJSON(l,!1),l)})}};return iy.ServiceRecognizerBase=o,o.telemetryDataEnabled=!0,iy}var sy={},B7;function Gde(){if(B7)return sy;B7=1;var n=Ze&&Ze.__awaiter||function(i,s,o,a){function l(c){return c instanceof o?c:new o(function(u){u(c)})}return new(o||(o=Promise))(function(c,u){function d(m){try{f(a.next(m))}catch(g){u(g)}}function h(m){try{f(a.throw(m))}catch(g){u(g)}}function f(m){m.done?c(m.value):l(m.value).then(d,h)}f((a=a.apply(i,s||[])).next())})};Object.defineProperty(sy,"__esModule",{value:!0}),sy.ConversationServiceRecognizer=void 0;const e=vt(),t=Wt();let r=class extends t.ServiceRecognizerBase{constructor(s,o,a,l,c){super(s,o,a,l,c),this.handleSpeechPhraseMessage=u=>n(this,void 0,void 0,function*(){return this.handleSpeechPhrase(u)}),this.handleSpeechHypothesisMessage=u=>this.handleSpeechHypothesis(u)}processTypeSpecificMessages(s){}handleRecognizedCallback(s,o,a){}handleRecognizingCallback(s,o,a){}processSpeechMessages(s){return n(this,void 0,void 0,function*(){let o=!1;switch(s.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":this.handleSpeechHypothesisMessage&&this.handleSpeechHypothesisMessage(s.textBody),o=!0;break;case"speech.phrase":this.handleSpeechPhraseMessage&&(yield this.handleSpeechPhraseMessage(s.textBody)),o=!0;break}return o})}cancelRecognition(s,o,a,l,c){}handleSpeechPhrase(s){return n(this,void 0,void 0,function*(){const o=t.SimpleSpeechPhrase.fromJSON(s),a=t.EnumTranslation.implTranslateRecognitionResult(o.RecognitionStatus);let l;const c=new e.PropertyCollection;c.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,s);const u=o.Offset+this.privRequestSession.currentTurnAudioOffset;let d=u;if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+o.Offset+o.Duration),e.ResultReason.Canceled===a){const h=t.EnumTranslation.implTranslateCancelResult(o.RecognitionStatus),f=t.EnumTranslation.implTranslateCancelErrorCode(o.RecognitionStatus);yield this.cancelRecognitionLocal(h,f,t.EnumTranslation.implTranslateErrorDetails(f))}else if(!(this.privRequestSession.isSpeechEnded&&a===e.ResultReason.NoMatch&&o.RecognitionStatus!==t.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(t.OutputFormatPropertyName)===e.OutputFormat[e.OutputFormat.Simple])l=new e.SpeechRecognitionResult(this.privRequestSession.requestId,a,o.DisplayText,o.Duration,u,o.Language,o.LanguageDetectionConfidence,o.SpeakerId,void 0,s,c);else{const h=t.DetailedSpeechPhrase.fromJSON(s),f=h.Offset+this.privRequestSession.currentTurnAudioOffset,m=h.getJsonWithCorrectedOffsets(f);l=new e.SpeechRecognitionResult(this.privRequestSession.requestId,a,h.Text,h.Duration,f,h.Language,h.LanguageDetectionConfidence,h.SpeakerId,void 0,m,c),d=l.offset}this.handleRecognizedCallback(l,d,this.privRequestSession.sessionId)}})}handleSpeechHypothesis(s){const o=t.SpeechHypothesis.fromJSON(s),a=o.Offset+this.privRequestSession.currentTurnAudioOffset,l=new e.PropertyCollection;l.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,s);const c=new e.SpeechRecognitionResult(this.privRequestSession.requestId,e.ResultReason.RecognizingSpeech,o.Text,o.Duration,a,o.Language,o.LanguageDetectionConfidence,o.SpeakerId,void 0,s,l);this.privRequestSession.onHypothesis(a),this.handleRecognizingCallback(c,o.Duration,this.privRequestSession.sessionId)}};return sy.ConversationServiceRecognizer=r,sy}var RM={},F7;function Hde(){return F7||(F7=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.RecognizerConfig=n.SpeechResultFormat=n.RecognitionMode=void 0;const e=vt(),t=Wt();var r;(function(s){s[s.Interactive=0]="Interactive",s[s.Conversation=1]="Conversation",s[s.Dictation=2]="Dictation"})(r=n.RecognitionMode||(n.RecognitionMode={})),function(s){s[s.Simple=0]="Simple",s[s.Detailed=1]="Detailed"}(n.SpeechResultFormat||(n.SpeechResultFormat={}));class i{constructor(o,a){this.privSpeechServiceConfig=o||new t.SpeechServiceConfig(new t.Context(null)),this.privParameters=a,this.privMaxRetryCount=parseInt(a.getProperty("SPEECH-Error-MaxRetryCount","4"),10),this.privLanguageIdMode=a.getProperty(e.PropertyId.SpeechServiceConnection_LanguageIdMode,void 0),this.privEnableSpeakerId=!1}get parameters(){return this.privParameters}get recognitionMode(){return this.privRecognitionMode}set recognitionMode(o){this.privRecognitionMode=o,this.privRecognitionActivityTimeout=o===r.Interactive?8e3:25e3,this.privSpeechServiceConfig.Recognition=r[o]}get SpeechServiceConfig(){return this.privSpeechServiceConfig}get recognitionActivityTimeout(){return this.privRecognitionActivityTimeout}get isContinuousRecognition(){return this.privRecognitionMode!==r.Interactive}get languageIdMode(){return this.privLanguageIdMode}get autoDetectSourceLanguages(){return this.parameters.getProperty(e.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)}get recognitionEndpointVersion(){return this.parameters.getProperty(e.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,void 0)}get sourceLanguageModels(){const o=[];let a=!1;if(this.autoDetectSourceLanguages!==void 0)for(const l of this.autoDetectSourceLanguages.split(",")){const c=l+e.PropertyId.SpeechServiceConnection_EndpointId.toString(),u=this.parameters.getProperty(c,void 0);u!==void 0?(o.push({language:l,endpoint:u}),a=!0):o.push({language:l,endpoint:""})}return a?o:void 0}get maxRetryCount(){return this.privMaxRetryCount}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}set isSpeakerDiarizationEnabled(o){this.privEnableSpeakerId=o}}n.RecognizerConfig=i}(RM)),RM}var fW={};Object.defineProperty(fW,"__esModule",{value:!0});var KI={};Object.defineProperty(KI,"__esModule",{value:!0});KI.WebsocketMessageFormatter=void 0;const Nl=pn(),z7=`\r
`;class Vde{toConnectionMessage(e){const t=new Nl.Deferred;try{if(e.messageType===Nl.MessageType.Text){const r=e.textContent;let i={},s=null;if(r){const o=r.split(`\r
\r
`);o&&o.length>0&&(i=this.parseHeaders(o[0]),o.length>1&&(s=o[1]))}t.resolve(new Nl.ConnectionMessage(e.messageType,s,i,e.id))}else if(e.messageType===Nl.MessageType.Binary){const r=e.binaryContent;let i={},s=null;if(!r||r.byteLength<2)throw new Error("Invalid binary message format. Header length missing.");const o=new DataView(r),a=o.getInt16(0);if(r.byteLength<a+2)throw new Error("Invalid binary message format. Header content missing.");let l="";for(let c=0;c<a;c++)l+=String.fromCharCode(o.getInt8(c+2));i=this.parseHeaders(l),r.byteLength>a+2&&(s=r.slice(2+a)),t.resolve(new Nl.ConnectionMessage(e.messageType,s,i,e.id))}}catch(r){t.reject(`Error formatting the message. Error: ${r}`)}return t.promise}fromConnectionMessage(e){const t=new Nl.Deferred;try{if(e.messageType===Nl.MessageType.Text){const r=`${this.makeHeaders(e)}${z7}${e.textBody?e.textBody:""}`;t.resolve(new Nl.RawWebsocketMessage(Nl.MessageType.Text,r,e.id))}else if(e.messageType===Nl.MessageType.Binary){const r=this.makeHeaders(e),i=e.binaryBody,s=this.stringToArrayBuffer(r),o=new Int8Array(s),a=o.byteLength,l=new Int8Array(2+a+(i?i.byteLength:0));if(l[0]=a>>8&255,l[1]=a&255,l.set(o,2),i){const u=new Int8Array(i);l.set(u,2+a)}const c=l.buffer;t.resolve(new Nl.RawWebsocketMessage(Nl.MessageType.Binary,c,e.id))}}catch(r){t.reject(`Error formatting the message. ${r}`)}return t.promise}makeHeaders(e){let t="";if(e.headers)for(const r in e.headers)r&&(t+=`${r}: ${e.headers[r]}${z7}`);return t}parseHeaders(e){const t={};if(e){const r=e.match(/[^\r\n]+/g);if(t){for(const i of r)if(i){const s=i.indexOf(":"),o=s>0?i.substr(0,s).trim().toLowerCase():i,a=s>0&&i.length>s+1?i.substr(s+1).trim():"";t[o]=a}}}return t}stringToArrayBuffer(e){const t=new ArrayBuffer(e.length),r=new DataView(t);for(let i=0;i<e.length;i++)r.setUint8(i,e.charCodeAt(i));return t}}KI.WebsocketMessageFormatter=Vde;var oy={},U7;function $de(){if(U7)return oy;U7=1,Object.defineProperty(oy,"__esModule",{value:!0}),oy.SpeechConnectionFactory=void 0;const n=Ws(),e=Wt(),t=vt(),r=Kc(),i=Wt(),s=$s,o=Jc;let a=class extends r.ConnectionFactoryBase{constructor(){super(...arguments),this.interactiveRelativeUri="/speech/recognition/interactive/cognitiveservices/v1",this.conversationRelativeUri="/speech/recognition/conversation/cognitiveservices/v1",this.dictationRelativeUri="/speech/recognition/dictation/cognitiveservices/v1",this.universalUri="/speech/universal/v"}create(c,u,d){let h=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint,void 0);const f=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region,void 0),m=r.ConnectionFactoryBase.getHostSuffix(f),g=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,"wss://"+f+".stt.speech"+m),v={},y=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_EndpointId,void 0),A=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);if(y?(!h||h.search(o.QueryParameterNames.CustomSpeechDeploymentId)===-1)&&(v[o.QueryParameterNames.CustomSpeechDeploymentId]=y):A&&(!h||h.search(o.QueryParameterNames.Language)===-1)&&(v[o.QueryParameterNames.Language]=A),(!h||h.search(o.QueryParameterNames.Format)===-1)&&(v[o.QueryParameterNames.Format]=c.parameters.getProperty(e.OutputFormatPropertyName,t.OutputFormat[t.OutputFormat.Simple]).toLowerCase()),c.autoDetectSourceLanguages!==void 0&&(v[o.QueryParameterNames.EnableLanguageId]="true"),this.setCommonUrlParams(c,v,h),!h)switch(c.recognitionMode){case i.RecognitionMode.Conversation:c.parameters.getProperty(e.ForceDictationPropertyName,"false")==="true"?h=g+this.dictationRelativeUri:c.recognitionEndpointVersion!==void 0&&parseInt(c.recognitionEndpointVersion,10)>1?h=`${g}${this.universalUri}${c.recognitionEndpointVersion}`:h=g+this.conversationRelativeUri;break;case i.RecognitionMode.Dictation:h=g+this.dictationRelativeUri;break;default:c.recognitionEndpointVersion!==void 0&&parseInt(c.recognitionEndpointVersion,10)>1?h=`${g}${this.universalUri}${c.recognitionEndpointVersion}`:h=g+this.interactiveRelativeUri;break}const C={};u.token!==void 0&&u.token!==""&&(C[u.headerName]=u.token),C[s.HeaderNames.ConnectionId]=d;const T=c.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true",x=new n.WebsocketConnection(h,v,C,new i.WebsocketMessageFormatter,n.ProxyInfo.fromRecognizerConfig(c),T,d),R=x.uri;return c.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,R),x}};return oy.SpeechConnectionFactory=a,oy}var ay={},j7;function Wde(){if(j7)return ay;j7=1,Object.defineProperty(ay,"__esModule",{value:!0}),ay.ConversationTranscriberConnectionFactory=void 0;const n=Ws(),e=vt(),t=Wt(),r=Kc(),i=Wt(),s=$s,o=Jc;let a=class extends r.ConnectionFactoryBase{constructor(){super(...arguments),this.universalUri="/speech/universal/v2"}create(c,u,d){let h=c.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint,void 0);const f=c.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Region,void 0),m=r.ConnectionFactoryBase.getHostSuffix(f),g=c.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,"wss://"+f+".stt.speech"+m),v={},y=c.parameters.getProperty(e.PropertyId.SpeechServiceConnection_EndpointId,void 0),A=c.parameters.getProperty(e.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);y?(!h||h.search(o.QueryParameterNames.CustomSpeechDeploymentId)===-1)&&(v[o.QueryParameterNames.CustomSpeechDeploymentId]=y):A&&(!h||h.search(o.QueryParameterNames.Language)===-1)&&(v[o.QueryParameterNames.Language]=A),c.autoDetectSourceLanguages!==void 0&&(v[o.QueryParameterNames.EnableLanguageId]="true"),this.setV2UrlParams(c,v,h),h||(h=`${g}${this.universalUri}`);const C={};u.token!==void 0&&u.token!==""&&(C[u.headerName]=u.token),C[s.HeaderNames.ConnectionId]=d;const T=c.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true",x=new n.WebsocketConnection(h,v,C,new i.WebsocketMessageFormatter,n.ProxyInfo.fromRecognizerConfig(c),T,d),R=x.uri;return c.parameters.setProperty(e.PropertyId.SpeechServiceConnection_Url,R),x}setV2UrlParams(c,u,d){new Map([[e.PropertyId.Speech_SegmentationSilenceTimeoutMs,o.QueryParameterNames.SegmentationSilenceTimeoutMs],[e.PropertyId.SpeechServiceConnection_EnableAudioLogging,o.QueryParameterNames.EnableAudioLogging],[e.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,o.QueryParameterNames.EndSilenceTimeoutMs],[e.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,o.QueryParameterNames.InitialSilenceTimeoutMs],[e.PropertyId.SpeechServiceResponse_PostProcessingOption,o.QueryParameterNames.Postprocessing],[e.PropertyId.SpeechServiceResponse_ProfanityOption,o.QueryParameterNames.Profanity],[e.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,o.QueryParameterNames.StableIntermediateThreshold]]).forEach((m,g)=>{this.setUrlParameter(g,m,c,u,d)});const f=JSON.parse(c.parameters.getProperty(t.ServicePropertiesPropertyName,"{}"));Object.keys(f).forEach(m=>{u[m]=f[m]})}};return ay.ConversationTranscriberConnectionFactory=a,ay}var ly={},G7;function qde(){if(G7)return ly;G7=1,Object.defineProperty(ly,"__esModule",{value:!0}),ly.TranscriberConnectionFactory=void 0;const n=Ws(),e=vt(),t=Kc(),r=Wt(),i=$s,s=Jc;let o=class extends t.ConnectionFactoryBase{constructor(){super(...arguments),this.multiaudioRelativeUri="/speech/recognition/multiaudio"}create(l,c,u){let d=l.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint,void 0);const h=l.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Region,"centralus"),f=t.ConnectionFactoryBase.getHostSuffix(h),m="wss://transcribe."+h+".cts.speech"+f+this.multiaudioRelativeUri,g=l.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,m),v={};this.setQueryParams(v,l,d),d||(d=g);const y={};c.token!==void 0&&c.token!==""&&(y[c.headerName]=c.token),y[i.HeaderNames.ConnectionId]=u,l.parameters.setProperty(e.PropertyId.SpeechServiceConnection_Url,d);const A=l.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new n.WebsocketConnection(d,v,y,new r.WebsocketMessageFormatter,n.ProxyInfo.fromRecognizerConfig(l),A,u)}setQueryParams(l,c,u){const d=c.parameters.getProperty(e.PropertyId.SpeechServiceConnection_EndpointId,void 0),h=c.parameters.getProperty(e.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);d&&!(s.QueryParameterNames.CustomSpeechDeploymentId in l)&&(l[s.QueryParameterNames.CustomSpeechDeploymentId]=d),h&&!(s.QueryParameterNames.Language in l)&&(l[s.QueryParameterNames.Language]=h);const f=c.parameters.getProperty(e.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()==="true",m=c.parameters.getProperty(r.OutputFormatPropertyName,e.OutputFormat[e.OutputFormat.Simple])!==e.OutputFormat[e.OutputFormat.Simple];(f||m)&&(l[s.QueryParameterNames.Format]=e.OutputFormat[e.OutputFormat.Detailed].toLowerCase()),this.setCommonUrlParams(c,l,u)}};return ly.TranscriberConnectionFactory=o,ly}var cy={},H7;function Qde(){if(H7)return cy;H7=1,Object.defineProperty(cy,"__esModule",{value:!0}),cy.TranslationConnectionFactory=void 0;const n=Ws(),e=XS,t=vt(),r=Kc(),i=Wt(),s=$s,o=Jc;let a=class extends r.ConnectionFactoryBase{create(c,u,d){const h=this.getEndpointUrl(c),f={};c.autoDetectSourceLanguages!==void 0&&(f[o.QueryParameterNames.EnableLanguageId]="true"),this.setQueryParams(f,c,h);const m={};u.token!==void 0&&u.token!==""&&(m[u.headerName]=u.token),m[s.HeaderNames.ConnectionId]=d,c.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,h);const g=c.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new n.WebsocketConnection(h,f,m,new i.WebsocketMessageFormatter,n.ProxyInfo.fromRecognizerConfig(c),g,d)}getEndpointUrl(c,u){const d=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region),h=r.ConnectionFactoryBase.getHostSuffix(d);let f=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint,void 0);return f||(c.autoDetectSourceLanguages!==void 0?f=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,"wss://{region}.stt.speech"+h)+"/speech/universal/v2":f=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,"wss://{region}.s2s.speech"+h)+"/speech/translation/cognitiveservices/v1"),u===!0?f:e.StringUtils.formatString(f,{region:d})}setQueryParams(c,u,d){c.from=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage),c.to=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_TranslationToLanguages),c.scenario=u.recognitionMode===i.RecognitionMode.Interactive?"interactive":u.recognitionMode===i.RecognitionMode.Conversation?"conversation":"",this.setCommonUrlParams(u,c,d),this.setUrlParameter(t.PropertyId.SpeechServiceResponse_TranslationRequestStablePartialResult,o.QueryParameterNames.StableTranslation,u,c,d);const h=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_TranslationVoice,void 0);h!==void 0&&(c.voice=h,c.features="texttospeech")}};return cy.TranslationConnectionFactory=a,cy}var uy={},V7;function Jde(){if(V7)return uy;V7=1,Object.defineProperty(uy,"__esModule",{value:!0}),uy.EnumTranslation=void 0;const n=vt(),e=Wt();let t=class{static implTranslateRecognitionResult(i,s=!1){let o=n.ResultReason.Canceled;switch(i){case e.RecognitionStatus.Success:o=n.ResultReason.RecognizedSpeech;break;case e.RecognitionStatus.EndOfDictation:o=s?n.ResultReason.RecognizedSpeech:n.ResultReason.NoMatch;break;case e.RecognitionStatus.NoMatch:case e.RecognitionStatus.InitialSilenceTimeout:case e.RecognitionStatus.BabbleTimeout:o=n.ResultReason.NoMatch;break;case e.RecognitionStatus.Error:case e.RecognitionStatus.BadRequest:case e.RecognitionStatus.Forbidden:default:o=n.ResultReason.Canceled;break}return o}static implTranslateCancelResult(i){let s=n.CancellationReason.EndOfStream;switch(i){case e.RecognitionStatus.Success:case e.RecognitionStatus.EndOfDictation:case e.RecognitionStatus.NoMatch:s=n.CancellationReason.EndOfStream;break;case e.RecognitionStatus.InitialSilenceTimeout:case e.RecognitionStatus.BabbleTimeout:case e.RecognitionStatus.Error:case e.RecognitionStatus.BadRequest:case e.RecognitionStatus.Forbidden:default:s=n.CancellationReason.Error;break}return s}static implTranslateCancelErrorCode(i){let s=n.CancellationErrorCode.NoError;switch(i){case e.RecognitionStatus.Error:s=n.CancellationErrorCode.ServiceError;break;case e.RecognitionStatus.TooManyRequests:s=n.CancellationErrorCode.TooManyRequests;break;case e.RecognitionStatus.BadRequest:s=n.CancellationErrorCode.BadRequestParameters;break;case e.RecognitionStatus.Forbidden:s=n.CancellationErrorCode.Forbidden;break;default:s=n.CancellationErrorCode.NoError;break}return s}static implTranslateErrorDetails(i){let s="The speech service encountered an internal error and could not continue.";switch(i){case n.CancellationErrorCode.Forbidden:s="The recognizer is using a free subscription that ran out of quota.";break;case n.CancellationErrorCode.BadRequestParameters:s="Invalid parameter or unsupported audio format in the request.";break;case n.CancellationErrorCode.TooManyRequests:s="The number of parallel requests exceeded the number of allowed concurrent transcriptions.";break}return s}};return uy.EnumTranslation=t,uy}var pW={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.RecognitionStatus=n.SynthesisStatus=void 0,function(e){e[e.Success=0]="Success",e[e.SynthesisEnd=1]="SynthesisEnd",e[e.Error=2]="Error"}(n.SynthesisStatus||(n.SynthesisStatus={})),function(e){e[e.Success=0]="Success",e[e.NoMatch=1]="NoMatch",e[e.InitialSilenceTimeout=2]="InitialSilenceTimeout",e[e.BabbleTimeout=3]="BabbleTimeout",e[e.Error=4]="Error",e[e.EndOfDictation=5]="EndOfDictation",e[e.TooManyRequests=6]="TooManyRequests",e[e.BadRequest=7]="BadRequest",e[e.Forbidden=8]="Forbidden"}(n.RecognitionStatus||(n.RecognitionStatus={}))})(pW);var dy={},$7;function Kde(){if($7)return dy;$7=1,Object.defineProperty(dy,"__esModule",{value:!0}),dy.TranslationSynthesisEnd=void 0;const n=Wt();let e=class mW{constructor(r){this.privSynthesisEnd=JSON.parse(r),this.privSynthesisEnd.SynthesisStatus&&(this.privSynthesisEnd.SynthesisStatus=n.SynthesisStatus[this.privSynthesisEnd.SynthesisStatus]),this.privSynthesisEnd.Status&&(this.privSynthesisEnd.SynthesisStatus=n.SynthesisStatus[this.privSynthesisEnd.Status])}static fromJSON(r){return new mW(r)}get SynthesisStatus(){return this.privSynthesisEnd.SynthesisStatus}get FailureReason(){return this.privSynthesisEnd.FailureReason}};return dy.TranslationSynthesisEnd=e,dy}var YI={};Object.defineProperty(YI,"__esModule",{value:!0});YI.TranslationHypothesis=void 0;const Yde=In,Xde=_I;class ex{constructor(e){this.privTranslationHypothesis=e,this.privTranslationHypothesis.Translation.TranslationStatus=Xde.TranslationStatus[this.privTranslationHypothesis.Translation.TranslationStatus]}static fromJSON(e){return new ex(JSON.parse(e))}static fromTranslationResponse(e){Yde.Contracts.throwIfNullOrUndefined(e,"translationHypothesis");const t=e.SpeechHypothesis;return e.SpeechHypothesis=void 0,t.Translation=e,new ex(t)}get Duration(){return this.privTranslationHypothesis.Duration}get Offset(){return this.privTranslationHypothesis.Offset}get Text(){return this.privTranslationHypothesis.Text}get Translation(){return this.privTranslationHypothesis.Translation}get Language(){var e;return(e=this.privTranslationHypothesis.PrimaryLanguage)===null||e===void 0?void 0:e.Language}}YI.TranslationHypothesis=ex;var hy={},W7;function Zde(){if(W7)return hy;W7=1,Object.defineProperty(hy,"__esModule",{value:!0}),hy.TranslationPhrase=void 0;const n=In,e=Wt(),t=_I;let r=class D4{constructor(s){this.privTranslationPhrase=s,this.privTranslationPhrase.RecognitionStatus=e.RecognitionStatus[this.privTranslationPhrase.RecognitionStatus],this.privTranslationPhrase.Translation!==void 0&&(this.privTranslationPhrase.Translation.TranslationStatus=t.TranslationStatus[this.privTranslationPhrase.Translation.TranslationStatus])}static fromJSON(s){return new D4(JSON.parse(s))}static fromTranslationResponse(s){n.Contracts.throwIfNullOrUndefined(s,"translationResponse");const o=s.SpeechPhrase;return s.SpeechPhrase=void 0,o.Translation=s,o.Text=o.DisplayText,new D4(o)}get RecognitionStatus(){return this.privTranslationPhrase.RecognitionStatus}get Offset(){return this.privTranslationPhrase.Offset}get Duration(){return this.privTranslationPhrase.Duration}get Text(){return this.privTranslationPhrase.Text}get Language(){var s;return(s=this.privTranslationPhrase.PrimaryLanguage)===null||s===void 0?void 0:s.Language}get Confidence(){var s;return(s=this.privTranslationPhrase.PrimaryLanguage)===null||s===void 0?void 0:s.Confidence}get Translation(){return this.privTranslationPhrase.Translation}};return hy.TranslationPhrase=r,hy}var fy={},q7;function ehe(){if(q7)return fy;q7=1;var n=Ze&&Ze.__awaiter||function(s,o,a,l){function c(u){return u instanceof a?u:new a(function(d){d(u)})}return new(a||(a=Promise))(function(u,d){function h(g){try{m(l.next(g))}catch(v){d(v)}}function f(g){try{m(l.throw(g))}catch(v){d(v)}}function m(g){g.done?u(g.value):c(g.value).then(h,f)}m((l=l.apply(s,o||[])).next())})};Object.defineProperty(fy,"__esModule",{value:!0}),fy.TranslationServiceRecognizer=void 0;const e=pn(),t=vt(),r=Wt();let i=class extends r.ConversationServiceRecognizer{constructor(o,a,l,c,u){super(o,a,l,c,u),this.privTranslationRecognizer=u,this.connectionEvents.attach(d=>{d.name==="ConnectionEstablishedEvent"&&this.privTranslationRecognizer.onConnection()})}processTypeSpecificMessages(o){return n(this,void 0,void 0,function*(){const a=new t.PropertyCollection;let l=yield this.processSpeechMessages(o);if(l)return!0;const c=d=>n(this,void 0,void 0,function*(){if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+d.Offset+d.Duration),d.RecognitionStatus===r.RecognitionStatus.Success){const h=this.fireEventForResult(d,a);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,h)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(h.result)}catch(f){this.privErrorCallback&&this.privErrorCallback(f)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}else{const h=r.EnumTranslation.implTranslateRecognitionResult(d.RecognitionStatus),f=new t.TranslationRecognitionResult(void 0,this.privRequestSession.requestId,h,d.Text,d.Duration,this.privRequestSession.currentTurnAudioOffset+d.Offset,d.Language,d.Confidence,void 0,o.textBody,a);if(h===t.ResultReason.Canceled){const m=r.EnumTranslation.implTranslateCancelResult(d.RecognitionStatus),g=r.EnumTranslation.implTranslateCancelErrorCode(d.RecognitionStatus);yield this.cancelRecognitionLocal(m,g,r.EnumTranslation.implTranslateErrorDetails(g))}else{if(!(this.privRequestSession.isSpeechEnded&&h===t.ResultReason.NoMatch&&d.RecognitionStatus!==r.RecognitionStatus.InitialSilenceTimeout)){const m=new t.TranslationRecognitionEventArgs(f,f.offset,this.privRequestSession.sessionId);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,m)}catch{}}if(this.privSuccessCallback){try{this.privSuccessCallback(f)}catch(m){this.privErrorCallback&&this.privErrorCallback(m)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}l=!0}}),u=(d,h)=>{const f=this.fireEventForResult(d,h);if(this.privRequestSession.onHypothesis(this.privRequestSession.currentTurnAudioOffset+f.offset),this.privTranslationRecognizer.recognizing)try{this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,f)}catch{}l=!0};switch(o.messageType===e.MessageType.Text&&a.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,o.textBody),o.path.toLowerCase()){case"translation.hypothesis":u(r.TranslationHypothesis.fromJSON(o.textBody),a);break;case"translation.response":const d=JSON.parse(o.textBody);if(d.SpeechPhrase)yield c(r.TranslationPhrase.fromTranslationResponse(d));else{const f=JSON.parse(o.textBody);f.SpeechHypothesis&&u(r.TranslationHypothesis.fromTranslationResponse(f),a)}break;case"translation.phrase":yield c(r.TranslationPhrase.fromJSON(o.textBody));break;case"translation.synthesis":this.sendSynthesisAudio(o.binaryBody,this.privRequestSession.sessionId),l=!0;break;case"audio.end":case"translation.synthesis.end":const h=r.TranslationSynthesisEnd.fromJSON(o.textBody);switch(h.SynthesisStatus){case r.SynthesisStatus.Error:if(this.privTranslationRecognizer.synthesizing){const f=new t.TranslationSynthesisResult(t.ResultReason.Canceled,void 0),m=new t.TranslationSynthesisEventArgs(f,this.privRequestSession.sessionId);try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,m)}catch{}}if(this.privTranslationRecognizer.canceled){const f=new t.TranslationRecognitionCanceledEventArgs(this.privRequestSession.sessionId,t.CancellationReason.Error,h.FailureReason,t.CancellationErrorCode.ServiceError,null);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,f)}catch{}}break;case r.SynthesisStatus.Success:this.sendSynthesisAudio(void 0,this.privRequestSession.sessionId);break}l=!0;break}return l})}cancelRecognition(o,a,l,c,u){const d=new t.PropertyCollection;if(d.setProperty(r.CancellationErrorCodePropertyName,t.CancellationErrorCode[c]),this.privTranslationRecognizer.canceled){const h=new t.TranslationRecognitionCanceledEventArgs(o,l,u,c,void 0);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,h)}catch{}}if(this.privSuccessCallback){const h=new t.TranslationRecognitionResult(void 0,a,t.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,u,void 0,d);try{this.privSuccessCallback(h),this.privSuccessCallback=void 0}catch{}}}handleRecognizingCallback(o,a,l){try{const c=new t.TranslationRecognitionEventArgs(t.TranslationRecognitionResult.fromSpeechRecognitionResult(o),a,l);this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,c)}catch{}}handleRecognizedCallback(o,a,l){try{const c=new t.TranslationRecognitionEventArgs(t.TranslationRecognitionResult.fromSpeechRecognitionResult(o),a,l);this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,c)}catch{}}fireEventForResult(o,a){let l;if(o.Translation.Translations!==void 0){l=new t.Translations;for(const g of o.Translation.Translations)l.set(g.Language,g.Text||g.DisplayText)}let c,u;o instanceof r.TranslationPhrase?(o.Translation&&o.Translation.TranslationStatus===e.TranslationStatus.Success?c=t.ResultReason.TranslatedSpeech:c=t.ResultReason.RecognizedSpeech,u=o.Confidence):c=t.ResultReason.TranslatingSpeech;const d=o.Language,h=o.Offset+this.privRequestSession.currentTurnAudioOffset,f=new t.TranslationRecognitionResult(l,this.privRequestSession.requestId,c,o.Text,o.Duration,h,d,u,o.Translation.FailureReason,JSON.stringify(o),a);return new t.TranslationRecognitionEventArgs(f,h,this.privRequestSession.sessionId)}sendSynthesisAudio(o,a){const l=o===void 0?t.ResultReason.SynthesizingAudioCompleted:t.ResultReason.SynthesizingAudio,c=new t.TranslationSynthesisResult(l,o),u=new t.TranslationSynthesisEventArgs(c,a);if(this.privTranslationRecognizer.synthesizing)try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,u)}catch{}}};return fy.TranslationServiceRecognizer=i,fy}var XI={};Object.defineProperty(XI,"__esModule",{value:!0});XI.SpeechDetected=void 0;class DO{constructor(e){this.privSpeechStartDetected=JSON.parse(e)}static fromJSON(e){return new DO(e)}get Offset(){return this.privSpeechStartDetected.Offset}}XI.SpeechDetected=DO;var ZI={};Object.defineProperty(ZI,"__esModule",{value:!0});ZI.SpeechHypothesis=void 0;class LO{constructor(e){this.privSpeechHypothesis=JSON.parse(e)}static fromJSON(e){return new LO(e)}get Text(){return this.privSpeechHypothesis.Text}get Offset(){return this.privSpeechHypothesis.Offset}get Duration(){return this.privSpeechHypothesis.Duration}get Language(){return this.privSpeechHypothesis.PrimaryLanguage===void 0?void 0:this.privSpeechHypothesis.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privSpeechHypothesis.PrimaryLanguage===void 0?void 0:this.privSpeechHypothesis.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSpeechHypothesis.SpeakerId}}ZI.SpeechHypothesis=LO;var e2={};Object.defineProperty(e2,"__esModule",{value:!0});e2.SpeechKeyword=void 0;class kO{constructor(e){this.privSpeechKeyword=JSON.parse(e)}static fromJSON(e){return new kO(e)}get Status(){return this.privSpeechKeyword.Status}get Text(){return this.privSpeechKeyword.Text}get Offset(){return this.privSpeechKeyword.Offset}get Duration(){return this.privSpeechKeyword.Duration}}e2.SpeechKeyword=kO;var py={},Q7;function the(){if(Q7)return py;Q7=1;var n=Ze&&Ze.__awaiter||function(i,s,o,a){function l(c){return c instanceof o?c:new o(function(u){u(c)})}return new(o||(o=Promise))(function(c,u){function d(m){try{f(a.next(m))}catch(g){u(g)}}function h(m){try{f(a.throw(m))}catch(g){u(g)}}function f(m){m.done?c(m.value):l(m.value).then(d,h)}f((a=a.apply(i,s||[])).next())})};Object.defineProperty(py,"__esModule",{value:!0}),py.SpeechServiceRecognizer=void 0;const e=vt(),t=Wt();let r=class extends t.ServiceRecognizerBase{constructor(s,o,a,l,c){super(s,o,a,l,c),this.privSpeechRecognizer=c}processTypeSpecificMessages(s){return n(this,void 0,void 0,function*(){let o;const a=new e.PropertyCollection;a.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,s.textBody);let l=!1;switch(s.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const c=t.SpeechHypothesis.fromJSON(s.textBody),u=c.Offset+this.privRequestSession.currentTurnAudioOffset;o=new e.SpeechRecognitionResult(this.privRequestSession.requestId,e.ResultReason.RecognizingSpeech,c.Text,c.Duration,u,c.Language,c.LanguageDetectionConfidence,void 0,void 0,s.textBody,a),this.privRequestSession.onHypothesis(u);const d=new e.SpeechRecognitionEventArgs(o,c.Duration,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognizing)try{this.privSpeechRecognizer.recognizing(this.privSpeechRecognizer,d)}catch{}l=!0;break;case"speech.phrase":const h=t.SimpleSpeechPhrase.fromJSON(s.textBody),f=t.EnumTranslation.implTranslateRecognitionResult(h.RecognitionStatus,this.privExpectContentAssessmentResponse);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+h.Offset+h.Duration),e.ResultReason.Canceled===f){const m=t.EnumTranslation.implTranslateCancelResult(h.RecognitionStatus),g=t.EnumTranslation.implTranslateCancelErrorCode(h.RecognitionStatus);yield this.cancelRecognitionLocal(m,g,t.EnumTranslation.implTranslateErrorDetails(g))}else{if(!(this.privRequestSession.isSpeechEnded&&f===e.ResultReason.NoMatch&&h.RecognitionStatus!==t.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(t.OutputFormatPropertyName)===e.OutputFormat[e.OutputFormat.Simple])o=new e.SpeechRecognitionResult(this.privRequestSession.requestId,f,h.DisplayText,h.Duration,h.Offset+this.privRequestSession.currentTurnAudioOffset,h.Language,h.LanguageDetectionConfidence,void 0,void 0,s.textBody,a);else{const g=t.DetailedSpeechPhrase.fromJSON(s.textBody),v=g.Offset+this.privRequestSession.currentTurnAudioOffset,y=g.getJsonWithCorrectedOffsets(v);o=new e.SpeechRecognitionResult(this.privRequestSession.requestId,f,g.RecognitionStatus===t.RecognitionStatus.Success?g.NBest[0].Display:void 0,g.Duration,v,g.Language,g.LanguageDetectionConfidence,void 0,void 0,y,a)}const m=new e.SpeechRecognitionEventArgs(o,o.offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognized)try{this.privSpeechRecognizer.recognized(this.privSpeechRecognizer,m)}catch{}}if(this.privSuccessCallback){try{this.privSuccessCallback(o)}catch(m){this.privErrorCallback&&this.privErrorCallback(m)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}l=!0;break}return l})}cancelRecognition(s,o,a,l,c){const u=new e.PropertyCollection;if(u.setProperty(t.CancellationErrorCodePropertyName,e.CancellationErrorCode[l]),this.privSpeechRecognizer.canceled){const d=new e.SpeechRecognitionCanceledEventArgs(a,c,l,void 0,s);try{this.privSpeechRecognizer.canceled(this.privSpeechRecognizer,d)}catch{}}if(this.privSuccessCallback){const d=new e.SpeechRecognitionResult(o,e.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,c,void 0,u);try{this.privSuccessCallback(d),this.privSuccessCallback=void 0}catch{}}}};return py.SpeechServiceRecognizer=r,py}var my={},J7;function nhe(){if(J7)return my;J7=1;var n=Ze&&Ze.__awaiter||function(i,s,o,a){function l(c){return c instanceof o?c:new o(function(u){u(c)})}return new(o||(o=Promise))(function(c,u){function d(m){try{f(a.next(m))}catch(g){u(g)}}function h(m){try{f(a.throw(m))}catch(g){u(g)}}function f(m){m.done?c(m.value):l(m.value).then(d,h)}f((a=a.apply(i,s||[])).next())})};Object.defineProperty(my,"__esModule",{value:!0}),my.ConversationTranscriptionServiceRecognizer=void 0;const e=vt(),t=Wt();let r=class extends t.ServiceRecognizerBase{constructor(s,o,a,l,c){super(s,o,a,l,c),this.privConversationTranscriber=c,this.setSpeakerDiarizationJson()}setSpeakerDiarizationJson(){if(this.privEnableSpeakerId){const s=this.privSpeechContext.getSection("phraseDetection");s.mode="Conversation";const o={};o.mode="Anonymous",o.audioSessionId=this.privDiarizationSessionId,o.audioOffsetMs=0,s.speakerDiarization=o,this.privSpeechContext.setSection("phraseDetection",s)}}processTypeSpecificMessages(s){return n(this,void 0,void 0,function*(){let o;const a=new e.PropertyCollection;a.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,s.textBody);let l=!1;switch(s.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const c=t.SpeechHypothesis.fromJSON(s.textBody),u=c.Offset+this.privRequestSession.currentTurnAudioOffset;o=new e.ConversationTranscriptionResult(this.privRequestSession.requestId,e.ResultReason.RecognizingSpeech,c.Text,c.Duration,u,c.Language,c.LanguageDetectionConfidence,void 0,void 0,s.textBody,a),this.privRequestSession.onHypothesis(u);const d=new e.ConversationTranscriptionEventArgs(o,c.Duration,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribing)try{this.privConversationTranscriber.transcribing(this.privConversationTranscriber,d)}catch{}l=!0;break;case"speech.phrase":const h=t.SimpleSpeechPhrase.fromJSON(s.textBody),f=t.EnumTranslation.implTranslateRecognitionResult(h.RecognitionStatus);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+h.Offset+h.Duration),e.ResultReason.Canceled===f){const m=t.EnumTranslation.implTranslateCancelResult(h.RecognitionStatus),g=t.EnumTranslation.implTranslateCancelErrorCode(h.RecognitionStatus);yield this.cancelRecognitionLocal(m,g,t.EnumTranslation.implTranslateErrorDetails(g))}else if(!(this.privRequestSession.isSpeechEnded&&f===e.ResultReason.NoMatch&&h.RecognitionStatus!==t.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(t.OutputFormatPropertyName)===e.OutputFormat[e.OutputFormat.Simple])o=new e.ConversationTranscriptionResult(this.privRequestSession.requestId,f,h.DisplayText,h.Duration,h.Offset+this.privRequestSession.currentTurnAudioOffset,h.Language,h.LanguageDetectionConfidence,h.SpeakerId,void 0,s.textBody,a);else{const g=t.DetailedSpeechPhrase.fromJSON(s.textBody),v=g.Offset+this.privRequestSession.currentTurnAudioOffset,y=g.getJsonWithCorrectedOffsets(v);o=new e.ConversationTranscriptionResult(this.privRequestSession.requestId,f,g.RecognitionStatus===t.RecognitionStatus.Success?g.NBest[0].Display:void 0,g.Duration,v,g.Language,g.LanguageDetectionConfidence,h.SpeakerId,void 0,y,a)}const m=new e.ConversationTranscriptionEventArgs(o,o.offset,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribed)try{this.privConversationTranscriber.transcribed(this.privConversationTranscriber,m)}catch{}}l=!0;break}return l})}cancelRecognition(s,o,a,l,c){if(new e.PropertyCollection().setProperty(t.CancellationErrorCodePropertyName,e.CancellationErrorCode[l]),this.privConversationTranscriber.canceled){const d=new e.ConversationTranscriptionCanceledEventArgs(a,c,l,void 0,s);try{this.privConversationTranscriber.canceled(this.privConversationTranscriber,d)}catch{}}}};return my.ConversationTranscriptionServiceRecognizer=r,my}var gy={},K7;function rhe(){if(K7)return gy;K7=1;var n=Ze&&Ze.__awaiter||function(o,a,l,c){function u(d){return d instanceof l?d:new l(function(h){h(d)})}return new(l||(l=Promise))(function(d,h){function f(v){try{g(c.next(v))}catch(y){h(y)}}function m(v){try{g(c.throw(v))}catch(y){h(y)}}function g(v){v.done?d(v.value):u(v.value).then(f,m)}g((c=c.apply(o,a||[])).next())})};Object.defineProperty(gy,"__esModule",{value:!0}),gy.TranscriptionServiceRecognizer=void 0;const e=pn(),t=vt(),r=Wt(),i=lh;let s=class extends r.ConversationServiceRecognizer{constructor(a,l,c,u,d){super(a,l,c,u,d),this.privTranscriberRecognizer=d,this.sendPrePayloadJSONOverride=h=>this.sendTranscriptionStartJSON(h),this.privRecognizerConfig.parameters.getProperty(t.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps)==="true"&&this.privSpeechContext.setWordLevelTimings()}sendSpeechEventAsync(a,l){return n(this,void 0,void 0,function*(){if(this.privRequestSession.isRecognizing){const c=yield this.fetchConnection();yield this.sendSpeechEvent(c,this.createSpeechEventPayload(a,l))}})}sendMeetingSpeechEventAsync(a,l){return n(this,void 0,void 0,function*(){if(this.privRequestSession.isRecognizing){const c=yield this.fetchConnection();yield this.sendSpeechEvent(c,this.createMeetingSpeechEventPayload(a,l))}})}processTypeSpecificMessages(a){return this.processSpeechMessages(a)}handleRecognizedCallback(a,l,c){try{const u=new t.SpeechRecognitionEventArgs(a,l,c);if(this.privTranscriberRecognizer.recognized(this.privTranscriberRecognizer,u),this.privSuccessCallback){try{this.privSuccessCallback(a)}catch(d){this.privErrorCallback&&this.privErrorCallback(d)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}catch{}}handleRecognizingCallback(a,l,c){try{const u=new t.SpeechRecognitionEventArgs(a,l,c);this.privTranscriberRecognizer.recognizing(this.privTranscriberRecognizer,u)}catch{}}cancelRecognition(a,l,c,u,d){const h=new t.PropertyCollection;if(h.setProperty(r.CancellationErrorCodePropertyName,t.CancellationErrorCode[u]),this.privTranscriberRecognizer.IsMeetingRecognizer()){if(this.privTranscriberRecognizer.canceled){const f=new t.MeetingTranscriptionCanceledEventArgs(c,d,u,void 0,a);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,f)}catch{}}}else if(this.privTranscriberRecognizer.canceled){const f=new t.ConversationTranscriptionCanceledEventArgs(c,d,u,void 0,a);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,f)}catch{}}if(this.privSuccessCallback){const f=new t.SpeechRecognitionResult(l,t.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,d,void 0,h);try{this.privSuccessCallback(f),this.privSuccessCallback=void 0}catch{}}}sendTranscriptionStartJSON(a){return n(this,void 0,void 0,function*(){if(yield this.sendSpeechContext(a,!0),this.privTranscriberRecognizer.IsMeetingRecognizer()){const l=this.privTranscriberRecognizer.getMeetingInfo(),c=this.createMeetingSpeechEventPayload(l,"start");yield this.sendSpeechEvent(a,c)}else{const l=this.privTranscriberRecognizer.getConversationInfo(),c=this.createSpeechEventPayload(l,"start");yield this.sendSpeechEvent(a,c)}yield this.sendWaveHeader(a)})}sendSpeechEvent(a,l){const c=JSON.stringify(l);if(c)return a.send(new i.SpeechConnectionMessage(e.MessageType.Text,"speech.event",this.privRequestSession.requestId,"application/json",c))}createSpeechEventPayload(a,l){const c={id:"meeting",name:l,meeting:a.conversationProperties};return c.meeting.id=a.id,c.meeting.attendees=a.participants,c}createMeetingSpeechEventPayload(a,l){const c={id:"meeting",name:l,meeting:a.meetingProperties};return c.meeting.id=a.id,c.meeting.attendees=a.participants,c}};return gy.TranscriptionServiceRecognizer=s,gy}var vy={},Y7;function ihe(){if(Y7)return vy;Y7=1,Object.defineProperty(vy,"__esModule",{value:!0}),vy.DetailedSpeechPhrase=void 0;const n=Wt();let e=class gW{constructor(r){this.privDetailedSpeechPhrase=JSON.parse(r),this.privDetailedSpeechPhrase.RecognitionStatus=n.RecognitionStatus[this.privDetailedSpeechPhrase.RecognitionStatus]}static fromJSON(r){return new gW(r)}getJsonWithCorrectedOffsets(r){if(this.privDetailedSpeechPhrase.NBest){let i;for(const s of this.privDetailedSpeechPhrase.NBest)if(s.Words&&s.Words[0]){i=s.Words[0].Offset;break}if(i&&i<r){const s=r-i;for(const o of this.privDetailedSpeechPhrase.NBest){if(o.Words)for(const a of o.Words)a.Offset+=s;if(o.DisplayWords)for(const a of o.DisplayWords)a.Offset+=s}}}return JSON.stringify(this.privDetailedSpeechPhrase)}get RecognitionStatus(){return this.privDetailedSpeechPhrase.RecognitionStatus}get NBest(){return this.privDetailedSpeechPhrase.NBest}get Duration(){return this.privDetailedSpeechPhrase.Duration}get Offset(){return this.privDetailedSpeechPhrase.Offset}get Language(){return this.privDetailedSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privDetailedSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Confidence}get Text(){return this.privDetailedSpeechPhrase.NBest&&this.privDetailedSpeechPhrase.NBest[0]?this.privDetailedSpeechPhrase.NBest[0].Display||this.privDetailedSpeechPhrase.NBest[0].DisplayText:this.privDetailedSpeechPhrase.DisplayText}get SpeakerId(){return this.privDetailedSpeechPhrase.SpeakerId}};return vy.DetailedSpeechPhrase=e,vy}var yy={},X7;function she(){if(X7)return yy;X7=1,Object.defineProperty(yy,"__esModule",{value:!0}),yy.SimpleSpeechPhrase=void 0;const n=Wt();let e=class vW{constructor(r){this.privSimpleSpeechPhrase=JSON.parse(r),this.privSimpleSpeechPhrase.RecognitionStatus=n.RecognitionStatus[this.privSimpleSpeechPhrase.RecognitionStatus]}static fromJSON(r){return new vW(r)}get RecognitionStatus(){return this.privSimpleSpeechPhrase.RecognitionStatus}get DisplayText(){return this.privSimpleSpeechPhrase.DisplayText}get Offset(){return this.privSimpleSpeechPhrase.Offset}get Duration(){return this.privSimpleSpeechPhrase.Duration}get Language(){return this.privSimpleSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privSimpleSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSimpleSpeechPhrase.SpeakerId}};return yy.SimpleSpeechPhrase=e,yy}var t2={};Object.defineProperty(t2,"__esModule",{value:!0});t2.AddedLmIntent=void 0;class ohe{constructor(e,t){this.modelImpl=e,this.intentName=t}}t2.AddedLmIntent=ohe;var _y={},Z7;function ahe(){if(Z7)return _y;Z7=1,Object.defineProperty(_y,"__esModule",{value:!0}),_y.IntentServiceRecognizer=void 0;const n=pn(),e=vt(),t=Wt();let r=class extends t.ServiceRecognizerBase{constructor(s,o,a,l,c){super(s,o,a,l,c),this.privIntentRecognizer=c,this.privIntentDataSent=!1}setIntents(s,o){this.privAddedLmIntents=s,this.privUmbrellaIntent=o,this.privIntentDataSent=!0}processTypeSpecificMessages(s){let o,a,l=!1;const c=new e.PropertyCollection;switch(s.messageType===n.MessageType.Text&&c.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,s.textBody),s.path.toLowerCase()){case"speech.hypothesis":const d=t.SpeechHypothesis.fromJSON(s.textBody);if(o=new e.IntentRecognitionResult(void 0,this.privRequestSession.requestId,e.ResultReason.RecognizingIntent,d.Text,d.Duration,d.Offset+this.privRequestSession.currentTurnAudioOffset,d.Language,d.LanguageDetectionConfidence,void 0,s.textBody,c),this.privRequestSession.onHypothesis(o.offset),a=new e.IntentRecognitionEventArgs(o,d.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId),this.privIntentRecognizer.recognizing)try{this.privIntentRecognizer.recognizing(this.privIntentRecognizer,a)}catch{}l=!0;break;case"speech.phrase":const h=t.SimpleSpeechPhrase.fromJSON(s.textBody);o=new e.IntentRecognitionResult(void 0,this.privRequestSession.requestId,t.EnumTranslation.implTranslateRecognitionResult(h.RecognitionStatus),h.DisplayText,h.Duration,h.Offset+this.privRequestSession.currentTurnAudioOffset,h.Language,h.LanguageDetectionConfidence,void 0,s.textBody,c),a=new e.IntentRecognitionEventArgs(o,o.offset,this.privRequestSession.sessionId);const f=()=>{if(this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,a)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(o)}catch(g){this.privErrorCallback&&this.privErrorCallback(g)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}};this.privIntentDataSent===!1||e.ResultReason.NoMatch===a.result.reason?(this.privRequestSession.onPhraseRecognized(a.offset+a.result.duration),f()):this.privPendingIntentArgs=a,l=!0;break;case"response":if(a=this.privPendingIntentArgs,this.privPendingIntentArgs=void 0,a===void 0){if(s.textBody==="")return;a=new e.IntentRecognitionEventArgs(new e.IntentRecognitionResult,0,this.privRequestSession.sessionId)}const m=t.IntentResponse.fromJSON(s.textBody);if(m!==null&&m.topScoringIntent&&m.topScoringIntent.intent){let g=this.privAddedLmIntents[m.topScoringIntent.intent];if(this.privUmbrellaIntent!==void 0&&(g=this.privUmbrellaIntent),g){const v=g===void 0||g.intentName===void 0?m.topScoringIntent.intent:g.intentName;let y=a.result.reason;v!==void 0&&(y=e.ResultReason.RecognizedIntent);const A=a.result.properties!==void 0?a.result.properties:new e.PropertyCollection;A.setProperty(e.PropertyId.LanguageUnderstandingServiceResponse_JsonResult,s.textBody),a=new e.IntentRecognitionEventArgs(new e.IntentRecognitionResult(v,a.result.resultId,y,a.result.text,a.result.duration,a.result.offset,void 0,void 0,a.result.errorDetails,a.result.json,A),a.offset,a.sessionId)}}if(this.privRequestSession.onPhraseRecognized(a.offset+a.result.duration),this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,a)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(a.result)}catch(g){this.privErrorCallback&&this.privErrorCallback(g)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}l=!0;break}const u=new n.Deferred;return u.resolve(l),u.promise}cancelRecognition(s,o,a,l,c){const u=new e.PropertyCollection;if(u.setProperty(t.CancellationErrorCodePropertyName,e.CancellationErrorCode[l]),this.privIntentRecognizer.canceled){const d=new e.IntentRecognitionCanceledEventArgs(a,c,l,void 0,void 0,s);try{this.privIntentRecognizer.canceled(this.privIntentRecognizer,d)}catch{}}if(this.privSuccessCallback){const d=new e.IntentRecognitionResult(void 0,o,e.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,c,void 0,u);try{this.privSuccessCallback(d),this.privSuccessCallback=void 0}catch{}}}};return _y.IntentServiceRecognizer=r,_y}var n2={};Object.defineProperty(n2,"__esModule",{value:!0});n2.IntentResponse=void 0;class BO{constructor(e){e===""?this.privIntentResponse={}:this.privIntentResponse=JSON.parse(e)}static fromJSON(e){return new BO(e)}get query(){return this.privIntentResponse.query}get topScoringIntent(){return this.privIntentResponse.topScoringIntent}get entities(){return this.privIntentResponse.entities}}n2.IntentResponse=BO;var yW={};Object.defineProperty(yW,"__esModule",{value:!0});var r2={},i2={};Object.defineProperty(i2,"__esModule",{value:!0});i2.ServiceTelemetryListener=void 0;const ud=pn(),e9=JI;class lhe{constructor(e,t,r){this.privIsDisposed=!1,this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privRequestId=e,this.privAudioSourceId=t,this.privAudioNodeId=r,this.privReceivedMessages={},this.privPhraseLatencies=[],this.privHypothesisLatencies=[]}phraseReceived(e){e>0&&this.privPhraseLatencies.push(Date.now()-e)}hypothesisReceived(e){e>0&&this.privHypothesisLatencies.push(Date.now()-e)}onEvent(e){if(!this.privIsDisposed&&(e instanceof e9.RecognitionTriggeredEvent&&e.requestId===this.privRequestId&&(this.privListeningTriggerMetric={End:e.eventTime,Name:"ListeningTrigger",Start:e.eventTime}),e instanceof ud.AudioStreamNodeAttachingEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=e.eventTime),e instanceof ud.AudioStreamNodeAttachedEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=e.eventTime),e instanceof ud.AudioSourceErrorEvent&&e.audioSourceId===this.privAudioSourceId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime})),e instanceof ud.AudioStreamNodeErrorEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime})),e instanceof ud.AudioStreamNodeDetachedEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Name:"Microphone",Start:this.privMicStartTime})),e instanceof e9.ConnectingToServiceEvent&&e.requestId===this.privRequestId&&(this.privConnectionId=e.sessionId),e instanceof ud.ConnectionStartEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionStartTime=e.eventTime),e instanceof ud.ConnectionEstablishedEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:e.eventTime,Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),e instanceof ud.ConnectionEstablishErrorEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:e.eventTime,Error:this.getConnectionError(e.statusCode),Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),e instanceof ud.ConnectionMessageReceivedEvent&&e.connectionId===this.privConnectionId&&e.message&&e.message.headers&&e.message.headers.path)){this.privReceivedMessages[e.message.headers.path]||(this.privReceivedMessages[e.message.headers.path]=new Array);const t=50;this.privReceivedMessages[e.message.headers.path].length<t&&this.privReceivedMessages[e.message.headers.path].push(e.networkReceivedTime)}}getTelemetry(){const e=new Array;this.privListeningTriggerMetric&&e.push(this.privListeningTriggerMetric),this.privMicMetric&&e.push(this.privMicMetric),this.privConnectionEstablishMetric&&e.push(this.privConnectionEstablishMetric),this.privPhraseLatencies.length>0&&e.push({PhraseLatencyMs:this.privPhraseLatencies}),this.privHypothesisLatencies.length>0&&e.push({FirstHypothesisLatencyMs:this.privHypothesisLatencies});const t={Metrics:e,ReceivedMessages:this.privReceivedMessages},r=JSON.stringify(t);return this.privReceivedMessages={},this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privPhraseLatencies=[],this.privHypothesisLatencies=[],r}get hasTelemetry(){return Object.keys(this.privReceivedMessages).length!==0||this.privListeningTriggerMetric!==null||this.privMicMetric!==null||this.privConnectionEstablishMetric!==null||this.privPhraseLatencies.length!==0||this.privHypothesisLatencies.length!==0}dispose(){this.privIsDisposed=!0}getConnectionError(e){switch(e){case 400:case 1002:case 1003:case 1005:case 1007:case 1008:case 1009:return"BadRequest";case 401:return"Unauthorized";case 403:return"Forbidden";case 503:case 1001:return"ServerUnavailable";case 500:case 1011:return"ServerError";case 408:case 504:return"Timeout";default:return"statuscode:"+e.toString()}}}i2.ServiceTelemetryListener=lhe;var kh=Ze&&Ze.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};Object.defineProperty(r2,"__esModule",{value:!0});r2.RequestSession=void 0;const v0=pn(),FE=JI,che=i2;class uhe{constructor(e){this.privIsDisposed=!1,this.privDetachables=new Array,this.privIsAudioNodeDetached=!1,this.privIsRecognizing=!1,this.privIsSpeechEnded=!1,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privHypothesisReceived=!1,this.privBytesSent=0,this.privRecognitionBytesSent=0,this.privRecogNumber=0,this.privInTurn=!1,this.privConnectionAttempts=0,this.privAudioSourceId=e,this.privRequestId=v0.createNoDashGuid(),this.privAudioNodeId=v0.createNoDashGuid(),this.privTurnDeferral=new v0.Deferred,this.privTurnDeferral.resolve()}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get audioNodeId(){return this.privAudioNodeId}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSpeechEnded(){return this.privIsSpeechEnded}get isRecognizing(){return this.privIsRecognizing}get currentTurnAudioOffset(){return this.privTurnStartAudioOffset}get recogNumber(){return this.privRecogNumber}get numConnectionAttempts(){return this.privConnectionAttempts}get bytesSent(){return this.privBytesSent}get recognitionBytesSent(){return this.privRecognitionBytesSent}listenForServiceTelemetry(e){this.privServiceTelemetryListener&&this.privDetachables.push(e.attachListener(this.privServiceTelemetryListener))}startNewRecognition(){this.privRecognitionBytesSent=0,this.privIsSpeechEnded=!1,this.privIsRecognizing=!0,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privRecogNumber++,this.privServiceTelemetryListener=new che.ServiceTelemetryListener(this.privRequestId,this.privAudioSourceId,this.privAudioNodeId),this.onEvent(new FE.RecognitionTriggeredEvent(this.requestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}onAudioSourceAttachCompleted(e,t){return kh(this,void 0,void 0,function*(){this.privAudioNode=e,this.privIsAudioNodeDetached=!1,t?yield this.onComplete():this.onEvent(new FE.ListeningStartedEvent(this.privRequestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))})}onPreConnectionStart(e,t){this.privAuthFetchEventId=e,this.privSessionId=t,this.onEvent(new FE.ConnectingToServiceEvent(this.privRequestId,this.privAuthFetchEventId,this.privSessionId))}onAuthCompleted(e){return kh(this,void 0,void 0,function*(){e&&(yield this.onComplete())})}onConnectionEstablishCompleted(e,t){return kh(this,void 0,void 0,function*(){if(e===200){this.onEvent(new FE.RecognitionStartedEvent(this.requestId,this.privAudioSourceId,this.privAudioNodeId,this.privAuthFetchEventId,this.privSessionId)),this.privAudioNode&&this.privAudioNode.replay(),this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privBytesSent=0;return}else e===403&&(yield this.onComplete())})}onServiceTurnEndResponse(e){return kh(this,void 0,void 0,function*(){this.privTurnDeferral.resolve(),!e||this.isSpeechEnded?(yield this.onComplete(),this.privInTurn=!1):(this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privAudioNode.replay())})}onSpeechContext(){this.privRequestId=v0.createNoDashGuid()}onServiceTurnStartResponse(){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new v0.Deferred}onHypothesis(e){this.privHypothesisReceived||(this.privHypothesisReceived=!0,this.privServiceTelemetryListener.hypothesisReceived(this.privAudioNode.findTimeAtOffset(e)))}onPhraseRecognized(e){this.privServiceTelemetryListener.phraseReceived(this.privAudioNode.findTimeAtOffset(e)),this.onServiceRecognized(e)}onServiceRecognized(e){this.privLastRecoOffset=e,this.privHypothesisReceived=!1,this.privAudioNode.shrinkBuffers(e),this.privConnectionAttempts=0}onAudioSent(e){this.privBytesSent+=e,this.privRecognitionBytesSent+=e}onRetryConnection(){this.privConnectionAttempts++}dispose(){return kh(this,void 0,void 0,function*(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const e of this.privDetachables)yield e.detach();this.privServiceTelemetryListener&&this.privServiceTelemetryListener.dispose(),this.privIsRecognizing=!1}})}getTelemetry(){return this.privServiceTelemetryListener.hasTelemetry?this.privServiceTelemetryListener.getTelemetry():null}onStopRecognizing(){return kh(this,void 0,void 0,function*(){yield this.onComplete()})}onSpeechEnded(){this.privIsSpeechEnded=!0}onEvent(e){this.privServiceTelemetryListener&&this.privServiceTelemetryListener.onEvent(e),v0.Events.instance.onEvent(e)}onComplete(){return kh(this,void 0,void 0,function*(){this.privIsRecognizing&&(this.privIsRecognizing=!1,yield this.detachAudioNode())})}detachAudioNode(){return kh(this,void 0,void 0,function*(){this.privIsAudioNodeDetached||(this.privIsAudioNodeDetached=!0,this.privAudioNode&&(yield this.privAudioNode.detach()))})}}r2.RequestSession=uhe;var s2={};Object.defineProperty(s2,"__esModule",{value:!0});s2.SpeechContext=void 0;class dhe{constructor(e){this.privContext={},this.privDynamicGrammar=e}getSection(e){return this.privContext[e]||{}}setSection(e,t){this.privContext[e]=t}setPronunciationAssessmentParams(e,t,r=!1){this.privContext.phraseDetection===void 0&&(this.privContext.phraseDetection={enrichment:{pronunciationAssessment:{}}}),this.privContext.phraseDetection.enrichment===void 0&&(this.privContext.phraseDetection.enrichment={pronunciationAssessment:{}}),this.privContext.phraseDetection.enrichment.pronunciationAssessment=JSON.parse(e),r&&(this.privContext.phraseDetection.mode="Conversation"),this.setWordLevelTimings(),this.privContext.phraseOutput.detailed.options.push("PronunciationAssessment"),this.privContext.phraseOutput.detailed.options.indexOf("SNR")===-1&&this.privContext.phraseOutput.detailed.options.push("SNR"),t&&(this.privContext.phraseDetection.enrichment.contentAssessment={topic:t},this.privContext.phraseOutput.detailed.options.push("ContentAssessment"))}setDetailedOutputFormat(){this.privContext.phraseOutput===void 0&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),this.privContext.phraseOutput.detailed===void 0&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format="Detailed"}setWordLevelTimings(){this.privContext.phraseOutput===void 0&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),this.privContext.phraseOutput.detailed===void 0&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format="Detailed",this.privContext.phraseOutput.detailed.options.indexOf("WordTimings")===-1&&this.privContext.phraseOutput.detailed.options.push("WordTimings")}setSpeakerDiarizationAudioOffsetMs(e){this.privContext.phraseDetection.speakerDiarization.audioOffsetMs=e}toJSON(){const e=this.privDynamicGrammar.generateGrammarObject();return this.setSection("dgi",e),JSON.stringify(this.privContext)}}s2.SpeechContext=dhe;var o2={};Object.defineProperty(o2,"__esModule",{value:!0});o2.DynamicGrammarBuilder=void 0;class hhe{addPhrase(e){this.privPhrases||(this.privPhrases=[]),e instanceof Array?this.privPhrases=this.privPhrases.concat(e):this.privPhrases.push(e)}clearPhrases(){this.privPhrases=void 0}addReferenceGrammar(e){this.privGrammars||(this.privGrammars=[]),e instanceof Array?this.privGrammars=this.privGrammars.concat(e):this.privGrammars.push(e)}clearGrammars(){this.privGrammars=void 0}generateGrammarObject(){if(this.privGrammars===void 0&&this.privPhrases===void 0)return;const e={};if(e.ReferenceGrammars=this.privGrammars,this.privPhrases!==void 0&&this.privPhrases.length!==0){const t=[];this.privPhrases.forEach(r=>{t.push({Text:r})}),e.Groups=[{Type:"Generic",Items:t}]}return e}}o2.DynamicGrammarBuilder=hhe;var _W={};Object.defineProperty(_W,"__esModule",{value:!0});var Sy={},a2={},l2={},FO={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.MessageDataStreamType=n.ActivityPayloadResponse=void 0;class e{constructor(r){this.privActivityResponse=JSON.parse(r)}static fromJSON(r){return new e(r)}get conversationId(){return this.privActivityResponse.conversationId}get messageDataStreamType(){return this.privActivityResponse.messageDataStreamType}get messagePayload(){return this.privActivityResponse.messagePayload}get version(){return this.privActivityResponse.version}}n.ActivityPayloadResponse=e,function(t){t[t.None=0]="None",t[t.TextToSpeechAudio=1]="TextToSpeechAudio"}(n.MessageDataStreamType||(n.MessageDataStreamType={}))})(FO);Object.defineProperty(l2,"__esModule",{value:!0});l2.DialogServiceTurnState=void 0;const fhe=Xf,phe=to,mhe=FO;class ghe{constructor(e,t){this.privRequestId=t,this.privIsCompleted=!1,this.privAudioStream=null,this.privTurnManager=e,this.resetTurnEndTimeout()}get audioStream(){return this.resetTurnEndTimeout(),this.privAudioStream}processActivityPayload(e,t){return e.messageDataStreamType===mhe.MessageDataStreamType.TextToSpeechAudio&&(this.privAudioStream=phe.AudioOutputStream.createPullStream(),this.privAudioStream.format=t!==void 0?t:fhe.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privAudioStream}endAudioStream(){this.privAudioStream!==null&&!this.privAudioStream.isClosed&&this.privAudioStream.close()}complete(){this.privTimeoutToken!==void 0&&clearTimeout(this.privTimeoutToken),this.endAudioStream()}resetTurnEndTimeout(){this.privTimeoutToken!==void 0&&clearTimeout(this.privTimeoutToken),this.privTimeoutToken=setTimeout(()=>{this.privTurnManager.CompleteTurn(this.privRequestId)},2e3)}}l2.DialogServiceTurnState=ghe;Object.defineProperty(a2,"__esModule",{value:!0});a2.DialogServiceTurnStateManager=void 0;const t9=ro,vhe=l2;class yhe{constructor(){this.privTurnMap=new Map}StartTurn(e){if(this.privTurnMap.has(e))throw new t9.InvalidOperationError("Service error: There is already a turn with id:"+e);const t=new vhe.DialogServiceTurnState(this,e);return this.privTurnMap.set(e,t),this.privTurnMap.get(e)}GetTurn(e){return this.privTurnMap.get(e)}CompleteTurn(e){if(!this.privTurnMap.has(e))throw new t9.InvalidOperationError("Service error: Received turn end for an unknown turn id:"+e);const t=this.privTurnMap.get(e);return t.complete(),this.privTurnMap.delete(e),t}}a2.DialogServiceTurnStateManager=yhe;var n9;function _he(){if(n9)return Sy;n9=1;var n=Ze&&Ze.__awaiter||function(d,h,f,m){function g(v){return v instanceof f?v:new f(function(y){y(v)})}return new(f||(f=Promise))(function(v,y){function A(x){try{T(m.next(x))}catch(R){y(R)}}function C(x){try{T(m.throw(x))}catch(R){y(R)}}function T(x){x.done?v(x.value):g(x.value).then(A,C)}T((m=m.apply(d,h||[])).next())})};Object.defineProperty(Sy,"__esModule",{value:!0}),Sy.DialogServiceAdapter=void 0;const e=Ws(),t=bm,r=pn(),i=Xf,s=vt(),o=a2,a=Wt(),l=FO,c=lh;let u=class extends a.ServiceRecognizerBase{constructor(h,f,m,g,v){super(h,f,m,g,v),this.privEvents=new r.EventSource,this.privDialogServiceConnector=v,this.receiveMessageOverride=()=>this.receiveDialogMessageOverride(),this.privTurnStateManager=new o.DialogServiceTurnStateManager,this.recognizeOverride=(y,A,C)=>this.listenOnce(y,A,C),this.postConnectImplOverride=y=>this.dialogConnectImpl(y),this.configConnectionOverride=y=>this.configConnection(y),this.disconnectOverride=()=>this.privDisconnect(),this.privDialogAudioSource=m,this.agentConfigSent=!1,this.privLastResult=null,this.connectionEvents.attach(y=>{y.name==="ConnectionClosedEvent"&&(this.terminateMessageLoop=!0)})}sendMessage(h){return n(this,void 0,void 0,function*(){const f=r.createGuid(),m=r.createNoDashGuid(),g={context:{interactionId:f},messagePayload:JSON.parse(h),version:.5},v=JSON.stringify(g);yield(yield this.fetchConnection()).send(new c.SpeechConnectionMessage(r.MessageType.Text,"agent",m,"application/json",v))})}privDisconnect(){return n(this,void 0,void 0,function*(){yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,s.CancellationReason.Error,s.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,this.agentConfigSent=!1})}processTypeSpecificMessages(h){const f=new s.PropertyCollection;h.messageType===r.MessageType.Text&&f.setProperty(s.PropertyId.SpeechServiceResponse_JsonResult,h.textBody);let m,g;switch(h.path.toLowerCase()){case"speech.phrase":const y=a.SimpleSpeechPhrase.fromJSON(h.textBody);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+y.Offset+y.Duration),y.RecognitionStatus!==a.RecognitionStatus.TooManyRequests&&y.RecognitionStatus!==a.RecognitionStatus.Error){const N=this.fireEventForResult(y,f);if(this.privLastResult=N.result,this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,N)}catch{}}g=!0;break;case"speech.hypothesis":const A=a.SpeechHypothesis.fromJSON(h.textBody),C=A.Offset+this.privRequestSession.currentTurnAudioOffset;m=new s.SpeechRecognitionResult(this.privRequestSession.requestId,s.ResultReason.RecognizingSpeech,A.Text,A.Duration,C,A.Language,A.LanguageDetectionConfidence,void 0,void 0,h.textBody,f),this.privRequestSession.onHypothesis(C);const T=new s.SpeechRecognitionEventArgs(m,A.Duration,this.privRequestSession.sessionId);if(this.privDialogServiceConnector.recognizing)try{this.privDialogServiceConnector.recognizing(this.privDialogServiceConnector,T)}catch{}g=!0;break;case"speech.keyword":const x=a.SpeechKeyword.fromJSON(h.textBody);m=new s.SpeechRecognitionResult(this.privRequestSession.requestId,x.Status==="Accepted"?s.ResultReason.RecognizedKeyword:s.ResultReason.NoMatch,x.Text,x.Duration,x.Offset,void 0,void 0,void 0,void 0,h.textBody,f),x.Status!=="Accepted"&&(this.privLastResult=m);const R=new s.SpeechRecognitionEventArgs(m,m.duration,m.resultId);if(this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,R)}catch{}g=!0;break;case"audio":{const N=h.requestId.toUpperCase(),M=this.privTurnStateManager.GetTurn(N);try{h.binaryBody?M.audioStream.write(h.binaryBody):M.endAudioStream()}catch{}}g=!0;break;case"response":this.handleResponseMessage(h),g=!0;break}const v=new r.Deferred;return v.resolve(g),v.promise}cancelRecognition(h,f,m,g,v){return n(this,void 0,void 0,function*(){if(this.terminateMessageLoop=!0,this.privRequestSession.isRecognizing&&(yield this.privRequestSession.onStopRecognizing()),this.privDialogServiceConnector.canceled){const y=new s.PropertyCollection;y.setProperty(a.CancellationErrorCodePropertyName,s.CancellationErrorCode[g]);const A=new s.SpeechRecognitionCanceledEventArgs(m,v,g,void 0,h);try{this.privDialogServiceConnector.canceled(this.privDialogServiceConnector,A)}catch{}if(this.privSuccessCallback){const C=new s.SpeechRecognitionResult(void 0,s.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,v,void 0,y);try{this.privSuccessCallback(C),this.privSuccessCallback=void 0}catch{}}}})}listenOnce(h,f,m){return n(this,void 0,void 0,function*(){this.privRecognizerConfig.recognitionMode=h,this.privSuccessCallback=f,this.privErrorCallback=m,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privDialogAudioSource.events),this.privRecognizerConfig.parameters.setProperty(s.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const g=this.connectImpl(),v=this.sendPreAudioMessages(),y=yield this.privDialogAudioSource.attach(this.privRequestSession.audioNodeId),A=yield this.privDialogAudioSource.format,C=yield this.privDialogAudioSource.deviceInfo,T=new e.ReplayableAudioNode(y,A.avgBytesPerSec);yield this.privRequestSession.onAudioSourceAttachCompleted(T,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:C};try{yield g,yield v}catch(N){return yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,s.CancellationReason.Error,s.CancellationErrorCode.ConnectionFailure,N),Promise.resolve()}const x=new s.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,x),this.sendAudio(T).then(()=>{},N=>n(this,void 0,void 0,function*(){yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,s.CancellationReason.Error,s.CancellationErrorCode.RuntimeError,N)}))})}dialogConnectImpl(h){return this.privConnectionLoop=this.startMessageLoop(),h}receiveDialogMessageOverride(){const h=new r.Deferred,f=()=>n(this,void 0,void 0,function*(){try{const m=this.isDisposed(),g=!this.isDisposed()&&this.terminateMessageLoop;if(m||g){h.resolve(void 0);return}const y=yield(yield this.fetchConnection()).read();if(!y)return f();const A=c.SpeechConnectionMessage.fromConnectionMessage(y);switch(A.path.toLowerCase()){case"turn.start":{const O=A.requestId.toUpperCase(),P=this.privRequestSession.requestId.toUpperCase();O!==P?this.privTurnStateManager.StartTurn(O):this.privRequestSession.onServiceTurnStartResponse()}break;case"speech.startdetected":const T=a.SpeechDetected.fromJSON(A.textBody),x=new s.RecognitionEventArgs(T.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,x);break;case"speech.enddetected":let R;A.textBody.length>0?R=A.textBody:R="{ Offset: 0 }";const N=a.SpeechDetected.fromJSON(R);this.privRequestSession.onServiceRecognized(N.Offset+this.privRequestSession.currentTurnAudioOffset);const M=new s.RecognitionEventArgs(N.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,M);break;case"turn.end":{const O=A.requestId.toUpperCase(),P=this.privRequestSession.requestId.toUpperCase();if(O!==P)this.privTurnStateManager.CompleteTurn(O);else{const z=new s.SessionEventArgs(this.privRequestSession.sessionId);if(yield this.privRequestSession.onServiceTurnEndResponse(!1),(!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing)&&this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,z),this.privSuccessCallback&&this.privLastResult){try{this.privSuccessCallback(this.privLastResult),this.privLastResult=null}catch(V){this.privErrorCallback&&this.privErrorCallback(V)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}}break;default:try{(yield this.processTypeSpecificMessages(A))||this.serviceEvents&&this.serviceEvents.onEvent(new r.ServiceEvent(A.path.toLowerCase(),A.textBody))}catch{}}return f()}catch{this.terminateMessageLoop=!0,h.resolve()}});return f().catch(m=>{r.Events.instance.onEvent(new r.BackgroundEvent(m))}),h.promise}startMessageLoop(){return n(this,void 0,void 0,function*(){this.terminateMessageLoop=!1;try{yield this.receiveDialogMessageOverride()}catch(h){yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,s.CancellationReason.Error,s.CancellationErrorCode.RuntimeError,h)}return Promise.resolve()})}configConnection(h){return n(this,void 0,void 0,function*(){return this.terminateMessageLoop?(this.terminateMessageLoop=!1,Promise.reject("Connection to service terminated.")):(yield this.sendSpeechServiceConfig(h,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),yield this.sendAgentConfig(h),h)})}sendPreAudioMessages(){return n(this,void 0,void 0,function*(){const h=yield this.fetchConnection();this.addKeywordContextData(),yield this.sendSpeechContext(h,!0),yield this.sendAgentContext(h),yield this.sendWaveHeader(h)})}sendAgentConfig(h){if(this.agentConfig&&!this.agentConfigSent){if(this.privRecognizerConfig.parameters.getProperty(s.PropertyId.Conversation_DialogType)===s.DialogServiceConfig.DialogTypes.CustomCommands){const m=this.agentConfig.get();m.botInfo.commandsCulture=this.privRecognizerConfig.parameters.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage,"en-us"),this.agentConfig.set(m)}this.onEvent(new t.SendingAgentContextMessageEvent(this.agentConfig));const f=this.agentConfig.toJsonString();return this.agentConfigSent=!0,h.send(new c.SpeechConnectionMessage(r.MessageType.Text,"agent.config",this.privRequestSession.requestId,"application/json",f))}}sendAgentContext(h){const f=r.createGuid(),m=this.privDialogServiceConnector.properties.getProperty(s.PropertyId.Conversation_Speech_Activity_Template),v=JSON.stringify({channelData:"",context:{interactionId:f},messagePayload:typeof m===void 0?void 0:m,version:.5});return h.send(new c.SpeechConnectionMessage(r.MessageType.Text,"speech.agent.context",this.privRequestSession.requestId,"application/json",v))}fireEventForResult(h,f){const m=a.EnumTranslation.implTranslateRecognitionResult(h.RecognitionStatus),g=h.Offset+this.privRequestSession.currentTurnAudioOffset,v=new s.SpeechRecognitionResult(this.privRequestSession.requestId,m,h.DisplayText,h.Duration,g,h.Language,h.LanguageDetectionConfidence,void 0,void 0,JSON.stringify(h),f);return new s.SpeechRecognitionEventArgs(v,g,this.privRequestSession.sessionId)}handleResponseMessage(h){const f=JSON.parse(h.textBody);switch(f.messageType.toLowerCase()){case"message":const m=h.requestId.toUpperCase(),g=l.ActivityPayloadResponse.fromJSON(h.textBody),v=this.privTurnStateManager.GetTurn(m);if(g.conversationId){const C=this.agentConfig.get();C.botInfo.conversationId=g.conversationId,this.agentConfig.set(C)}const y=v.processActivityPayload(g,i.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormatString(this.privDialogServiceConnector.properties.getProperty(s.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0))),A=new s.ActivityReceivedEventArgs(g.messagePayload,y);if(this.privDialogServiceConnector.activityReceived)try{this.privDialogServiceConnector.activityReceived(this.privDialogServiceConnector,A)}catch{}break;case"messagestatus":if(this.privDialogServiceConnector.turnStatusReceived)try{this.privDialogServiceConnector.turnStatusReceived(this.privDialogServiceConnector,new s.TurnStatusReceivedEventArgs(h.textBody))}catch{}break;default:r.Events.instance.onEvent(new r.BackgroundEvent(`Unexpected response of type ${f.messageType}. Ignoring.`));break}}onEvent(h){this.privEvents.onEvent(h),r.Events.instance.onEvent(h)}addKeywordContextData(){const h=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect");if(h===void 0)return;const f=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Offsets"),m=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Durations"),g=h.split(";"),v=f===void 0?[]:f.split(";"),y=m===void 0?[]:m.split(";"),A=[];for(let C=0;C<g.length;C++){const T={};T.text=g[C],C<v.length&&(T.offset=Number(v[C])),C<y.length&&(T.duration=Number(y[C])),A.push(T)}this.speechContext.setSection("invocationSource","VoiceActivationWithKeyword"),this.speechContext.setSection("keywordDetection",[{clientDetectedKeywords:A,onReject:{action:"EndOfTurn"},type:"startTrigger"}])}};return Sy.DialogServiceAdapter=u,Sy}var c2={};Object.defineProperty(c2,"__esModule",{value:!0});c2.AgentConfig=void 0;class She{toJsonString(){return JSON.stringify(this.iPrivConfig)}get(){return this.iPrivConfig}set(e){this.iPrivConfig=e}}c2.AgentConfig=She;var NM={},Ay={},hv={};Object.defineProperty(hv,"__esModule",{value:!0});hv.ConversationConnectionConfig=void 0;const Ahe=ZS;class bo extends Ahe.RestConfigBase{static get host(){return bo.privHost}static get apiVersion(){return bo.privApiVersion}static get clientAppId(){return bo.privClientAppId}static get defaultLanguageCode(){return bo.privDefaultLanguageCode}static get restPath(){return bo.privRestPath}static get webSocketPath(){return bo.privWebSocketPath}static get transcriptionEventKeys(){return bo.privTranscriptionEventKeys}}hv.ConversationConnectionConfig=bo;bo.privHost="dev.microsofttranslator.com";bo.privRestPath="/capito/room";bo.privApiVersion="2.0";bo.privDefaultLanguageCode="en-US";bo.privClientAppId="FC539C22-1767-4F1F-84BC-B4D811114F15";bo.privWebSocketPath="/capito/translate";bo.privTranscriptionEventKeys=["iCalUid","callId","organizer","FLAC","MTUri","DifferentiateGuestSpeakers","audiorecording","Threadid","OrganizerMri","OrganizerTenantId","UserToken"];var r9;function Ehe(){if(r9)return Ay;r9=1,Object.defineProperty(Ay,"__esModule",{value:!0}),Ay.ConversationManager=void 0;const n=Ws(),e=In,t=vt(),r=hv;let i=class{constructor(){this.privRequestParams=r.ConversationConnectionConfig.configParams,this.privErrors=r.ConversationConnectionConfig.restErrors,this.privHost=r.ConversationConnectionConfig.host,this.privApiVersion=r.ConversationConnectionConfig.apiVersion,this.privRestPath=r.ConversationConnectionConfig.restPath,this.privRestAdapter=new n.RestMessageAdapter({})}createOrJoin(o,a,l,c){try{e.Contracts.throwIfNullOrUndefined(o,"args");const u=o.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage,r.ConversationConnectionConfig.defaultLanguageCode),d=o.getProperty(t.PropertyId.ConversationTranslator_Name,"conversation_host"),h=o.getProperty(t.PropertyId.ConversationTranslator_Host,this.privHost),f=o.getProperty(t.PropertyId.ConversationTranslator_CorrelationId),m=o.getProperty(t.PropertyId.SpeechServiceConnection_Key),g=o.getProperty(t.PropertyId.SpeechServiceConnection_Region),v=o.getProperty(t.PropertyId.SpeechServiceAuthorization_Token);e.Contracts.throwIfNullOrWhitespace(u,"languageCode"),e.Contracts.throwIfNullOrWhitespace(d,"nickname"),e.Contracts.throwIfNullOrWhitespace(h,"endpointHost");const y={};y[this.privRequestParams.apiVersion]=this.privApiVersion,y[this.privRequestParams.languageCode]=u,y[this.privRequestParams.nickname]=d;const A={};f&&(A[this.privRequestParams.correlationId]=f),A[this.privRequestParams.clientAppId]=r.ConversationConnectionConfig.clientAppId,a!==void 0?y[this.privRequestParams.roomId]=a:(e.Contracts.throwIfNullOrUndefined(g,this.privErrors.authInvalidSubscriptionRegion),A[this.privRequestParams.subscriptionRegion]=g,m?A[this.privRequestParams.subscriptionKey]=m:v?A[this.privRequestParams.authorization]=`Bearer ${v}`:e.Contracts.throwIfNullOrUndefined(m,this.privErrors.authInvalidSubscriptionKey));const C={};C.headers=A,this.privRestAdapter.options=C;const T=`https://${h}${this.privRestPath}`;this.privRestAdapter.request(n.RestRequestType.Post,T,y,null).then(x=>{const R=n.RestMessageAdapter.extractHeaderValue(this.privRequestParams.requestId,x.headers);if(!x.ok){if(c){let M=this.privErrors.invalidCreateJoinConversationResponse.replace("{status}",x.status.toString()),O;try{O=JSON.parse(x.data),M+=` [${O.error.code}: ${O.error.message}]`}catch{M+=` [${x.data}]`}R&&(M+=` ${R}`),c(M)}return}const N=JSON.parse(x.data);if(N&&(N.requestId=R),l){try{l(N)}catch(M){c&&c(M)}l=void 0}}).catch(()=>{})}catch(u){if(c)if(u instanceof Error){const d=u;c(d.name+": "+d.message)}else c(u)}}leave(o,a){return new Promise((l,c)=>{try{e.Contracts.throwIfNullOrUndefined(o,this.privErrors.invalidArgs.replace("{arg}","config")),e.Contracts.throwIfNullOrWhitespace(a,this.privErrors.invalidArgs.replace("{arg}","token"));const u=o.getProperty(t.PropertyId.ConversationTranslator_Host,this.privHost),d=o.getProperty(t.PropertyId.ConversationTranslator_CorrelationId),h={};h[this.privRequestParams.apiVersion]=this.privApiVersion,h[this.privRequestParams.sessionToken]=a;const f={};d&&(f[this.privRequestParams.correlationId]=d);const m={};m.headers=f,this.privRestAdapter.options=m;const g=`https://${u}${this.privRestPath}`;this.privRestAdapter.request(n.RestRequestType.Delete,g,h,null).then(v=>{v.ok,l()}).catch(()=>{})}catch(u){if(u instanceof Error){const d=u;c(d.name+": "+d.message)}else c(u)}})}};return Ay.ConversationManager=i,Ay}var Np={},Ey={},u2={},eA={};Object.defineProperty(eA,"__esModule",{value:!0});eA.ConversationConnectionMessage=void 0;const Che=pn();class whe extends Che.ConnectionMessage{constructor(e,t,r,i){super(e,t,r,i);const s=JSON.parse(this.textBody);s.type!==void 0&&(this.privConversationMessageType=s.type)}get conversationMessageType(){return this.privConversationMessageType}}eA.ConversationConnectionMessage=whe;Object.defineProperty(u2,"__esModule",{value:!0});u2.ConversationWebsocketMessageFormatter=void 0;const Pp=pn(),i9=eA;class The{toConnectionMessage(e){const t=new Pp.Deferred;try{if(e.messageType===Pp.MessageType.Text){const r=new i9.ConversationConnectionMessage(e.messageType,e.textContent,{},e.id);t.resolve(r)}else e.messageType===Pp.MessageType.Binary&&t.resolve(new i9.ConversationConnectionMessage(e.messageType,e.binaryContent,void 0,e.id))}catch(r){t.reject(`Error formatting the message. Error: ${r}`)}return t.promise}fromConnectionMessage(e){const t=new Pp.Deferred;try{if(e.messageType===Pp.MessageType.Text){const r=`${e.textBody?e.textBody:""}`;t.resolve(new Pp.RawWebsocketMessage(Pp.MessageType.Text,r,e.id))}}catch(r){t.reject(`Error formatting the message. ${r}`)}return t.promise}}u2.ConversationWebsocketMessageFormatter=The;var s9;function xhe(){if(s9)return Ey;s9=1,Object.defineProperty(Ey,"__esModule",{value:!0}),Ey.ConversationConnectionFactory=void 0;const n=Ws(),e=pn(),t=In,r=vt(),i=Kc(),s=hv,o=u2;let a=class extends i.ConnectionFactoryBase{create(c,u,d){const h=c.parameters.getProperty(r.PropertyId.ConversationTranslator_Host,s.ConversationConnectionConfig.host),f=c.parameters.getProperty(r.PropertyId.ConversationTranslator_CorrelationId,e.createGuid()),m=`wss://${h}${s.ConversationConnectionConfig.webSocketPath}`,g=c.parameters.getProperty(r.PropertyId.ConversationTranslator_Token,void 0);t.Contracts.throwIfNullOrUndefined(g,"token");const v={};v[s.ConversationConnectionConfig.configParams.apiVersion]=s.ConversationConnectionConfig.apiVersion,v[s.ConversationConnectionConfig.configParams.token]=g,v[s.ConversationConnectionConfig.configParams.correlationId]=f;const y=c.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new n.WebsocketConnection(m,v,{},new o.ConversationWebsocketMessageFormatter,n.ProxyInfo.fromRecognizerConfig(c),y,d)}};return Ey.ConversationConnectionFactory=a,Ey}var Cy={},d2={},Ihe=Ze&&Ze.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};Object.defineProperty(d2,"__esModule",{value:!0});d2.ConversationRequestSession=void 0;const PM=pn();class bhe{constructor(e){this.privIsDisposed=!1,this.privDetachables=new Array,this.privSessionId=e,this.privRequestId=PM.createNoDashGuid(),this.privRequestCompletionDeferral=new PM.Deferred}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get completionPromise(){return this.privRequestCompletionDeferral.promise}onPreConnectionStart(e,t){this.privSessionId=t}onAuthCompleted(e){e&&this.onComplete()}onConnectionEstablishCompleted(e){e!==200&&e===403&&this.onComplete()}onServiceTurnEndResponse(e){e?this.privRequestId=PM.createNoDashGuid():this.onComplete()}dispose(){return Ihe(this,void 0,void 0,function*(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const e of this.privDetachables)yield e.detach()}})}onComplete(){}}d2.ConversationRequestSession=bhe;var $o={},o9;function SW(){if(o9)return $o;o9=1,Object.defineProperty($o,"__esModule",{value:!0}),$o.ConversationReceivedTranslationEventArgs=$o.ParticipantsListEventArgs=$o.ParticipantAttributeEventArgs=$o.ParticipantEventArgs=$o.LockRoomEventArgs=$o.MuteAllEventArgs=void 0;const n=vt();class e extends n.SessionEventArgs{constructor(l,c){super(c),this.privIsMuted=l}get isMuted(){return this.privIsMuted}}$o.MuteAllEventArgs=e;class t extends n.SessionEventArgs{constructor(l,c){super(c),this.privIsLocked=l}get isMuted(){return this.privIsLocked}}$o.LockRoomEventArgs=t;class r extends n.SessionEventArgs{constructor(l,c){super(c),this.privParticipant=l}get participant(){return this.privParticipant}}$o.ParticipantEventArgs=r;class i extends n.SessionEventArgs{constructor(l,c,u,d){super(d),this.privKey=c,this.privValue=u,this.privParticipantId=l}get value(){return this.privValue}get key(){return this.privKey}get id(){return this.privParticipantId}}$o.ParticipantAttributeEventArgs=i;class s extends n.SessionEventArgs{constructor(l,c,u,d,h,f,m,g,v){super(v),this.privRoomId=l,this.privSessionToken=c,this.privTranslateTo=u,this.privProfanityFilter=d,this.privRoomProfanityFilter=h,this.privIsRoomLocked=f,this.privIsRoomLocked=m,this.privParticipants=g}get sessionToken(){return this.privSessionToken}get conversationId(){return this.privRoomId}get translateTo(){return this.privTranslateTo}get profanityFilter(){return this.privProfanityFilter}get roomProfanityFilter(){return this.privRoomProfanityFilter}get isRoomLocked(){return this.privIsRoomLocked}get isMuteAll(){return this.privIsMuteAll}get participants(){return this.privParticipants}}$o.ParticipantsListEventArgs=s;class o{constructor(l,c,u){this.privPayload=c,this.privCommand=l,this.privSessionId=u}get payload(){return this.privPayload}get command(){return this.privCommand}get sessionId(){return this.privSessionId}}return $o.ConversationReceivedTranslationEventArgs=o,$o}var Ud={};Object.defineProperty(Ud,"__esModule",{value:!0});Ud.ConversationTranslatorCommandTypes=Ud.ConversationTranslatorMessageTypes=Ud.InternalParticipants=void 0;class Mhe{constructor(e=[],t){this.participants=e,this.meId=t}addOrUpdateParticipant(e){if(e===void 0)return;const t=this.getParticipantIndex(e.id);return t>-1?this.participants.splice(t,1,e):this.participants.push(e),this.getParticipant(e.id)}getParticipantIndex(e){return this.participants.findIndex(t=>t.id===e)}getParticipant(e){return this.participants.find(t=>t.id===e)}deleteParticipant(e){this.participants=this.participants.filter(t=>t.id!==e)}get host(){return this.participants.find(e=>e.isHost===!0)}get me(){return this.getParticipant(this.meId)}}Ud.InternalParticipants=Mhe;Ud.ConversationTranslatorMessageTypes={command:"command",final:"final",info:"info",instantMessage:"instant_message",keepAlive:"keep_alive",partial:"partial",participantCommand:"participant_command",translatedMessage:"translated_message"};Ud.ConversationTranslatorCommandTypes={changeNickname:"ChangeNickname",disconnectSession:"DisconnectSession",ejectParticipant:"EjectParticipant",instant_message:"instant_message",joinSession:"JoinSession",leaveSession:"LeaveSession",participantList:"ParticipantList",roomExpirationWarning:"RoomExpirationWarning",setLockState:"SetLockState",setMute:"SetMute",setMuteAll:"SetMuteAll",setProfanityFiltering:"SetProfanityFiltering",setTranslateToLanguages:"SetTranslateToLanguages",setUseTTS:"SetUseTTS"};var AW={},h2={};Object.defineProperty(h2,"__esModule",{value:!0});h2.CommandResponsePayload=void 0;const Rhe=n=>JSON.parse(n);class zO{constructor(e){this.privCommandResponse=Rhe(e)}get type(){return this.privCommandResponse.type}get command(){return this.privCommandResponse.command}get id(){return this.privCommandResponse.id}get nickname(){return this.privCommandResponse.nickname}get participantId(){return this.privCommandResponse.participantId}get roomid(){return this.privCommandResponse.roomid}get value(){return this.privCommandResponse.value}get token(){return this.privCommandResponse.token}static fromJSON(e){return new zO(e)}}h2.CommandResponsePayload=zO;var jg={};Object.defineProperty(jg,"__esModule",{value:!0});jg.ParticipantPayloadResponse=jg.ParticipantsListPayloadResponse=void 0;const Nhe=n=>JSON.parse(n),Phe=n=>JSON.parse(n);class UO{constructor(e){this.privParticipantsPayloadResponse=Nhe(e)}get roomid(){return this.privParticipantsPayloadResponse.roomid}get id(){return this.privParticipantsPayloadResponse.id}get command(){return this.privParticipantsPayloadResponse.command}get participants(){return this.privParticipantsPayloadResponse.participants}get token(){return this.privParticipantsPayloadResponse.token}get translateTo(){return this.privParticipantsPayloadResponse.translateTo}get profanityFilter(){return this.privParticipantsPayloadResponse.profanityFilter}get roomProfanityFilter(){return this.privParticipantsPayloadResponse.roomProfanityFilter}get roomLocked(){return this.privParticipantsPayloadResponse.roomLocked}get muteAll(){return this.privParticipantsPayloadResponse.muteAll}get type(){return this.privParticipantsPayloadResponse.type}static fromJSON(e){return new UO(e)}}jg.ParticipantsListPayloadResponse=UO;class jO{constructor(e){this.privParticipantPayloadResponse=Phe(e)}get nickname(){return this.privParticipantPayloadResponse.nickname}get locale(){return this.privParticipantPayloadResponse.locale}get usetts(){return this.privParticipantPayloadResponse.usetts}get ismuted(){return this.privParticipantPayloadResponse.ismuted}get ishost(){return this.privParticipantPayloadResponse.ishost}get participantId(){return this.privParticipantPayloadResponse.participantId}get avatar(){return this.privParticipantPayloadResponse.avatar}static fromJSON(e){return new jO(e)}}jg.ParticipantPayloadResponse=jO;var Gg={};Object.defineProperty(Gg,"__esModule",{value:!0});Gg.TextResponsePayload=Gg.SpeechResponsePayload=void 0;const Ohe=n=>JSON.parse(n),Dhe=n=>JSON.parse(n);class GO{constructor(e){this.privSpeechResponse=Ohe(e)}get recognition(){return this.privSpeechResponse.recognition}get translations(){return this.privSpeechResponse.translations}get id(){return this.privSpeechResponse.id}get language(){return this.privSpeechResponse.language}get nickname(){return this.privSpeechResponse.nickname}get participantId(){return this.privSpeechResponse.participantId}get roomid(){return this.privSpeechResponse.roomid}get timestamp(){return this.privSpeechResponse.timestamp}get type(){return this.privSpeechResponse.type}get isFinal(){return this.privSpeechResponse.type==="final"}static fromJSON(e){return new GO(e)}}Gg.SpeechResponsePayload=GO;class HO{constructor(e){this.privTextResponse=Dhe(e)}get originalText(){return this.privTextResponse.originalText}get translations(){return this.privTextResponse.translations}get id(){return this.privTextResponse.id}get language(){return this.privTextResponse.language}get nickname(){return this.privTextResponse.nickname}get participantId(){return this.privTextResponse.participantId}get roomid(){return this.privTextResponse.roomid}get timestamp(){return this.privTextResponse.timestamp}get type(){return this.privTextResponse.type}static fromJSON(e){return new HO(e)}}Gg.TextResponsePayload=HO;(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=h2;Object.defineProperty(n,"CommandResponsePayload",{enumerable:!0,get:function(){return e.CommandResponsePayload}});var t=jg;Object.defineProperty(n,"ParticipantsListPayloadResponse",{enumerable:!0,get:function(){return t.ParticipantsListPayloadResponse}}),Object.defineProperty(n,"ParticipantPayloadResponse",{enumerable:!0,get:function(){return t.ParticipantPayloadResponse}});var r=Gg;Object.defineProperty(n,"SpeechResponsePayload",{enumerable:!0,get:function(){return r.SpeechResponsePayload}}),Object.defineProperty(n,"TextResponsePayload",{enumerable:!0,get:function(){return r.TextResponsePayload}})})(AW);var a9;function Lhe(){if(a9)return Cy;a9=1;var n=Ze&&Ze.__awaiter||function(u,d,h,f){function m(g){return g instanceof h?g:new h(function(v){v(g)})}return new(h||(h=Promise))(function(g,v){function y(T){try{C(f.next(T))}catch(x){v(x)}}function A(T){try{C(f.throw(T))}catch(x){v(x)}}function C(T){T.done?g(T.value):m(T.value).then(y,A)}C((f=f.apply(u,d||[])).next())})};Object.defineProperty(Cy,"__esModule",{value:!0}),Cy.ConversationServiceAdapter=void 0;const e=pn(),t=vt(),r=Wt(),i=eA,s=d2,o=SW(),a=Ud,l=AW;let c=class extends r.ServiceRecognizerBase{constructor(d,h,f,m,g){super(d,h,f,m,g),this.privConnectionConfigPromise=void 0,this.privLastPartialUtteranceId="",this.privConversationServiceConnector=g,this.privConversationAuthentication=d,this.receiveMessageOverride=()=>this.receiveConversationMessageOverride(),this.recognizeOverride=()=>this.noOp(),this.postConnectImplOverride=v=>this.conversationConnectImpl(v),this.configConnectionOverride=()=>this.configConnection(),this.disconnectOverride=()=>this.privDisconnect(),this.privConversationRequestSession=new s.ConversationRequestSession(e.createNoDashGuid()),this.privConversationConnectionFactory=h,this.privConversationIsDisposed=!1}isDisposed(){return super.isDisposed()||this.privConversationIsDisposed}dispose(d){const h=Object.create(null,{dispose:{get:()=>super.dispose}});return n(this,void 0,void 0,function*(){this.privConversationIsDisposed=!0,this.privConnectionConfigPromise!==void 0&&(yield(yield this.privConnectionConfigPromise).dispose(d)),yield h.dispose.call(this,d)})}sendMessage(d){return n(this,void 0,void 0,function*(){return(yield this.fetchConnection()).send(new i.ConversationConnectionMessage(e.MessageType.Text,d))})}sendMessageAsync(d){return n(this,void 0,void 0,function*(){yield(yield this.fetchConnection()).send(new i.ConversationConnectionMessage(e.MessageType.Text,d))})}privDisconnect(){if(!this.terminateMessageLoop)return this.cancelRecognition(this.privConversationRequestSession.sessionId,this.privConversationRequestSession.requestId,t.CancellationReason.Error,t.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,Promise.resolve()}processTypeSpecificMessages(){return n(this,void 0,void 0,function*(){return!0})}cancelRecognition(d,h,f,m,g){this.terminateMessageLoop=!0;const v=new t.ConversationTranslationCanceledEventArgs(f,g,m,void 0,d);try{this.privConversationServiceConnector.canceled&&this.privConversationServiceConnector.canceled(this.privConversationServiceConnector,v)}catch{}}conversationConnectImpl(d){return n(this,void 0,void 0,function*(){return this.privConnectionLoop=this.startMessageLoop(),d})}receiveConversationMessageOverride(){return n(this,void 0,void 0,function*(){if(this.isDisposed()||this.terminateMessageLoop)return Promise.resolve();const d=new e.Deferred;try{const f=yield(yield this.fetchConnection()).read();if(this.isDisposed()||this.terminateMessageLoop)return d.resolve(),Promise.resolve();if(!f)return this.receiveConversationMessageOverride();const m=this.privConversationRequestSession.sessionId,g=f.conversationMessageType.toLowerCase();let v=!1;try{switch(g){case"info":case"participant_command":case"command":const y=l.CommandResponsePayload.fromJSON(f.textBody);switch(y.command.toLowerCase()){case"participantlist":const N=l.ParticipantsListPayloadResponse.fromJSON(f.textBody),M=N.participants.map(B=>({avatar:B.avatar,displayName:B.nickname,id:B.participantId,isHost:B.ishost,isMuted:B.ismuted,isUsingTts:B.usetts,preferredLanguage:B.locale}));this.privConversationServiceConnector.participantsListReceived&&this.privConversationServiceConnector.participantsListReceived(this.privConversationServiceConnector,new o.ParticipantsListEventArgs(N.roomid,N.token,N.translateTo,N.profanityFilter,N.roomProfanityFilter,N.roomLocked,N.muteAll,M,m));break;case"settranslatetolanguages":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new o.ParticipantAttributeEventArgs(y.participantId,a.ConversationTranslatorCommandTypes.setTranslateToLanguages,y.value,m));break;case"setprofanityfiltering":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new o.ParticipantAttributeEventArgs(y.participantId,a.ConversationTranslatorCommandTypes.setProfanityFiltering,y.value,m));break;case"setmute":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new o.ParticipantAttributeEventArgs(y.participantId,a.ConversationTranslatorCommandTypes.setMute,y.value,m));break;case"setmuteall":this.privConversationServiceConnector.muteAllCommandReceived&&this.privConversationServiceConnector.muteAllCommandReceived(this.privConversationServiceConnector,new o.MuteAllEventArgs(y.value,m));break;case"roomexpirationwarning":this.privConversationServiceConnector.conversationExpiration&&this.privConversationServiceConnector.conversationExpiration(this.privConversationServiceConnector,new t.ConversationExpirationEventArgs(y.value,this.privConversationRequestSession.sessionId));break;case"setusetts":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new o.ParticipantAttributeEventArgs(y.participantId,a.ConversationTranslatorCommandTypes.setUseTTS,y.value,m));break;case"setlockstate":this.privConversationServiceConnector.lockRoomCommandReceived&&this.privConversationServiceConnector.lockRoomCommandReceived(this.privConversationServiceConnector,new o.LockRoomEventArgs(y.value,m));break;case"changenickname":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new o.ParticipantAttributeEventArgs(y.participantId,a.ConversationTranslatorCommandTypes.changeNickname,y.value,m));break;case"joinsession":const O=l.ParticipantPayloadResponse.fromJSON(f.textBody),P={avatar:O.avatar,displayName:O.nickname,id:O.participantId,isHost:O.ishost,isMuted:O.ismuted,isUsingTts:O.usetts,preferredLanguage:O.locale};this.privConversationServiceConnector.participantJoinCommandReceived&&this.privConversationServiceConnector.participantJoinCommandReceived(this.privConversationServiceConnector,new o.ParticipantEventArgs(P,m));break;case"leavesession":const z={id:y.participantId};this.privConversationServiceConnector.participantLeaveCommandReceived&&this.privConversationServiceConnector.participantLeaveCommandReceived(this.privConversationServiceConnector,new o.ParticipantEventArgs(z,m));break;case"disconnectsession":const V={id:y.participantId};break;case"token":const $=new r.CognitiveTokenAuthentication(()=>{const B=y.token;return Promise.resolve(B)},()=>{const B=y.token;return Promise.resolve(B)});this.authentication=$,this.privConversationServiceConnector.onToken($);break;default:break}break;case"partial":case"final":const A=l.SpeechResponsePayload.fromJSON(f.textBody),C=g==="final"?t.ResultReason.TranslatedParticipantSpeech:t.ResultReason.TranslatingParticipantSpeech,T=new t.ConversationTranslationResult(A.participantId,this.getTranslations(A.translations),A.language,A.id,C,A.recognition,void 0,void 0,f.textBody,void 0);A.isFinal?((T.text!==void 0&&T.text.length>0||A.id===this.privLastPartialUtteranceId)&&(v=!0),v&&this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new o.ConversationReceivedTranslationEventArgs(a.ConversationTranslatorMessageTypes.final,T,m))):T.text!==void 0&&(this.privLastPartialUtteranceId=A.id,this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new o.ConversationReceivedTranslationEventArgs(a.ConversationTranslatorMessageTypes.partial,T,m)));break;case"translated_message":const x=l.TextResponsePayload.fromJSON(f.textBody),R=new t.ConversationTranslationResult(x.participantId,this.getTranslations(x.translations),x.language,void 0,void 0,x.originalText,void 0,void 0,void 0,f.textBody,void 0);this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new o.ConversationReceivedTranslationEventArgs(a.ConversationTranslatorMessageTypes.instantMessage,R,m));break;default:break}}catch{}return this.receiveConversationMessageOverride()}catch{this.terminateMessageLoop=!0}return d.promise})}startMessageLoop(){return n(this,void 0,void 0,function*(){if(this.isDisposed())return Promise.resolve();this.terminateMessageLoop=!1;const d=this.receiveConversationMessageOverride();try{return yield d}catch(h){return this.cancelRecognition(this.privRequestSession?this.privRequestSession.sessionId:"",this.privRequestSession?this.privRequestSession.requestId:"",t.CancellationReason.Error,t.CancellationErrorCode.RuntimeError,h),null}})}configConnection(){return this.isDisposed()?Promise.resolve(void 0):this.privConnectionConfigPromise!==void 0?this.privConnectionConfigPromise.then(d=>d.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection()):this.privConnectionConfigPromise,()=>(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection())):this.terminateMessageLoop?Promise.resolve(void 0):(this.privConnectionConfigPromise=this.connectImpl().then(d=>d),this.privConnectionConfigPromise)}getTranslations(d){let h;if(d!==void 0){h=new t.Translations;for(const f of d)h.set(f.lang,f.translation)}return h}};return Cy.ConversationServiceAdapter=c,Cy}var l9;function khe(){if(l9)return Np;l9=1;var n=Ze&&Ze.__awaiter||function(c,u,d,h){function f(m){return m instanceof d?m:new d(function(g){g(m)})}return new(d||(d=Promise))(function(m,g){function v(C){try{A(h.next(C))}catch(T){g(T)}}function y(C){try{A(h.throw(C))}catch(T){g(T)}}function A(C){C.done?m(C.value):f(C.value).then(v,y)}A((h=h.apply(c,u||[])).next())})};Object.defineProperty(Np,"__esModule",{value:!0}),Np.ConversationTranslatorRecognizer=Np.ConversationRecognizerFactory=void 0;const e=Wt(),t=pn(),r=In,i=vt(),s=xhe(),o=Lhe();class a{static fromConfig(u,d,h){return new l(u,d,h)}}Np.ConversationRecognizerFactory=a;let l=class extends i.Recognizer{constructor(u,d,h){const f=d;r.Contracts.throwIfNull(f,"speechConfig");const m=u;r.Contracts.throwIfNull(m,"conversationImpl"),super(h,f.properties,new s.ConversationConnectionFactory),this.privConversation=m,this.privIsDisposed=!1,this.privProperties=f.properties.clone(),this.privConnection=i.Connection.fromRecognizer(this),this.privProperties.getProperty(i.PropertyId.WebWorkerLoadType,"on").toLowerCase()==="on"&&typeof Blob<"u"&&typeof Worker<"u"?(this.privSetTimeout=t.Timeout.setTimeout,this.privClearTimeout=t.Timeout.clearTimeout):typeof window<"u"?(this.privSetTimeout=window.setTimeout.bind(window),this.privClearTimeout=window.clearTimeout.bind(window)):(this.privSetTimeout=setTimeout,this.privClearTimeout=clearTimeout)}set connected(u){this.privConnection.connected=u}set disconnected(u){this.privConnection.disconnected=u}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get properties(){return this.privProperties}isDisposed(){return this.privIsDisposed}connect(u,d,h){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfNullOrWhitespace(u,"token"),this.privReco.conversationTranslatorToken=u,this.resetConversationTimeout(),this.privReco.connectAsync(d,h)}catch(f){if(h)if(f instanceof Error){const m=f;h(m.name+": "+m.message)}else h(f)}}disconnect(u,d){try{r.Contracts.throwIfDisposed(this.privIsDisposed),this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privReco.disconnect().then(()=>{u&&u()},h=>{d&&d(h)})}catch(h){if(d)if(h instanceof Error){const f=h;d(f.name+": "+f.message)}else d(h);this.dispose(!0).catch(f=>{t.Events.instance.onEvent(new t.BackgroundEvent(f))})}}sendRequest(u,d,h){try{r.Contracts.throwIfDisposed(this.privIsDisposed),this.sendMessage(u,d,h)}catch(f){if(h)if(f instanceof Error){const m=f;h(m.name+": "+m.message)}else h(f);this.dispose(!0).catch(m=>{t.Events.instance.onEvent(new t.BackgroundEvent(m))})}}onToken(u){this.privConversation.onToken(u)}close(){return n(this,void 0,void 0,function*(){this.privIsDisposed||(this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close()),this.privConnection=void 0,yield this.dispose(!0))})}dispose(u){const d=Object.create(null,{dispose:{get:()=>super.dispose}});return n(this,void 0,void 0,function*(){this.privIsDisposed||u&&(this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privIsDisposed=!0,this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close(),this.privConnection=void 0),yield d.dispose.call(this,u))})}createRecognizerConfig(u){return new e.RecognizerConfig(u,this.privProperties)}createServiceRecognizer(u,d,h,f){const m=h;return new o.ConversationServiceAdapter(u,d,m,f,this)}sendMessage(u,d,h){const f=this.privReco;((g,v,y)=>{g!==void 0?g.then(()=>{try{v&&v()}catch(A){y&&y(`'Unhandled error on promise callback: ${A}'`)}},A=>{try{y&&y(A)}catch{}}):y&&y("Null promise")})(f.sendMessageAsync(u),d,h),this.resetConversationTimeout()}resetConversationTimeout(){this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privTimeoutToken=this.privSetTimeout(()=>{this.sendRequest(this.privConversation.getKeepAlive())},6e4)}};return Np.ConversationTranslatorRecognizer=l,Np}var wy={},c9;function Bhe(){if(c9)return wy;c9=1;var n=Ze&&Ze.__awaiter||function(o,a,l,c){function u(d){return d instanceof l?d:new l(function(h){h(d)})}return new(l||(l=Promise))(function(d,h){function f(v){try{g(c.next(v))}catch(y){h(y)}}function m(v){try{g(c.throw(v))}catch(y){h(y)}}function g(v){v.done?d(v.value):u(v.value).then(f,m)}g((c=c.apply(o,a||[])).next())})};Object.defineProperty(wy,"__esModule",{value:!0}),wy.TranscriberRecognizer=void 0;const e=pn(),t=In,r=vt(),i=Wt();let s=class extends r.Recognizer{constructor(a,l){const c=a;t.Contracts.throwIfNull(c,"speechTranslationConfig");const u=l;t.Contracts.throwIfNull(u,"audioConfigImpl"),t.Contracts.throwIfNullOrWhitespace(c.speechRecognitionLanguage,r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage]),super(l,c.properties,new i.TranscriberConnectionFactory),this.privDisposedRecognizer=!1,this.isMeetingRecognizer=!1}get speechRecognitionLanguage(){return t.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){t.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a)}set conversation(a){t.Contracts.throwIfNullOrUndefined(a,"Conversation"),this.isMeetingRecognizer=!1,this.privConversation=a}getConversationInfo(){return t.Contracts.throwIfNullOrUndefined(this.privConversation,"Conversation"),this.privConversation.conversationInfo}set meeting(a){t.Contracts.throwIfNullOrUndefined(a,"Meeting"),this.isMeetingRecognizer=!0,this.privMeeting=a}getMeetingInfo(){return t.Contracts.throwIfNullOrUndefined(this.privMeeting,"Meeting"),this.privMeeting.meetingInfo}IsMeetingRecognizer(){return this.isMeetingRecognizer}startContinuousRecognitionAsync(a,l){e.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(i.RecognitionMode.Conversation),a,l)}stopContinuousRecognitionAsync(a,l){e.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),a,l)}close(){return n(this,void 0,void 0,function*(){this.privDisposedRecognizer||(yield this.dispose(!0))})}pushConversationEvent(a,l){return n(this,void 0,void 0,function*(){const c=this.privReco;t.Contracts.throwIfNullOrUndefined(c,"serviceRecognizer"),yield c.sendSpeechEventAsync(a,l)})}pushMeetingEvent(a,l){return n(this,void 0,void 0,function*(){const c=this.privReco;t.Contracts.throwIfNullOrUndefined(c,"serviceRecognizer"),yield c.sendMeetingSpeechEventAsync(a,l)})}enforceAudioGating(){return n(this,void 0,void 0,function*(){const c=(yield this.audioConfig.format).channels;if(c===1){if(this.properties.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()!=="true")throw new Error("Single channel audio configuration for MeetingTranscriber is currently under private preview, please contact diarizationrequest@microsoft.com for more details")}else if(c!==8)throw new Error(`Unsupported audio configuration: Detected ${c}-channel audio`)})}connectMeetingCallbacks(a){this.isMeetingRecognizer=!0,this.canceled=(l,c)=>{a.canceled&&a.canceled(a,c)},this.recognizing=(l,c)=>{a.transcribing&&a.transcribing(a,c)},this.recognized=(l,c)=>{a.transcribed&&a.transcribed(a,c)},this.sessionStarted=(l,c)=>{a.sessionStarted&&a.sessionStarted(a,c)},this.sessionStopped=(l,c)=>{a.sessionStopped&&a.sessionStopped(a,c)}}disconnectCallbacks(){this.canceled=void 0,this.recognizing=void 0,this.recognized=void 0,this.sessionStarted=void 0,this.sessionStopped=void 0}dispose(a){const l=Object.create(null,{dispose:{get:()=>super.dispose}});return n(this,void 0,void 0,function*(){this.privDisposedRecognizer||(a&&(this.privDisposedRecognizer=!0,yield this.implRecognizerStop()),yield l.dispose.call(this,a))})}createRecognizerConfig(a){return new i.RecognizerConfig(a,this.properties)}createServiceRecognizer(a,l,c,u){const d=c;return new i.TranscriptionServiceRecognizer(a,l,d,u,this)}};return wy.TranscriberRecognizer=s,wy}var u9;function Fhe(){return u9||(u9=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=Ehe();Object.defineProperty(n,"ConversationManager",{enumerable:!0,get:function(){return e.ConversationManager}});var t=hv;Object.defineProperty(n,"ConversationConnectionConfig",{enumerable:!0,get:function(){return t.ConversationConnectionConfig}});var r=khe();Object.defineProperty(n,"ConversationRecognizerFactory",{enumerable:!0,get:function(){return r.ConversationRecognizerFactory}});var i=Bhe();Object.defineProperty(n,"TranscriberRecognizer",{enumerable:!0,get:function(){return i.TranscriberRecognizer}});var s=SW();Object.defineProperty(n,"ConversationReceivedTranslationEventArgs",{enumerable:!0,get:function(){return s.ConversationReceivedTranslationEventArgs}}),Object.defineProperty(n,"LockRoomEventArgs",{enumerable:!0,get:function(){return s.LockRoomEventArgs}}),Object.defineProperty(n,"MuteAllEventArgs",{enumerable:!0,get:function(){return s.MuteAllEventArgs}}),Object.defineProperty(n,"ParticipantAttributeEventArgs",{enumerable:!0,get:function(){return s.ParticipantAttributeEventArgs}}),Object.defineProperty(n,"ParticipantEventArgs",{enumerable:!0,get:function(){return s.ParticipantEventArgs}}),Object.defineProperty(n,"ParticipantsListEventArgs",{enumerable:!0,get:function(){return s.ParticipantsListEventArgs}});var o=Ud;Object.defineProperty(n,"ConversationTranslatorCommandTypes",{enumerable:!0,get:function(){return o.ConversationTranslatorCommandTypes}}),Object.defineProperty(n,"ConversationTranslatorMessageTypes",{enumerable:!0,get:function(){return o.ConversationTranslatorMessageTypes}}),Object.defineProperty(n,"InternalParticipants",{enumerable:!0,get:function(){return o.InternalParticipants}})}(NM)),NM}var VO={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.SynthesisAudioMetadata=n.MetadataType=void 0,function(t){t.WordBoundary="WordBoundary",t.Bookmark="Bookmark",t.Viseme="Viseme",t.SentenceBoundary="SentenceBoundary",t.SessionEnd="SessionEnd",t.AvatarSignal="TalkingAvatarSignal"}(n.MetadataType||(n.MetadataType={}));class e{constructor(r){this.privSynthesisAudioMetadata=JSON.parse(r)}static fromJSON(r){return new e(r)}get Metadata(){return this.privSynthesisAudioMetadata.Metadata}}n.SynthesisAudioMetadata=e})(VO);var Ty={},Tu={};Object.defineProperty(Tu,"__esModule",{value:!0});Tu.SynthesisStartedEvent=Tu.ConnectingToSynthesisServiceEvent=Tu.SynthesisTriggeredEvent=Tu.SpeechSynthesisEvent=void 0;const d9=pn();class f2 extends d9.PlatformEvent{constructor(e,t,r=d9.EventType.Info){super(e,r),this.privRequestId=t}get requestId(){return this.privRequestId}}Tu.SpeechSynthesisEvent=f2;class zhe extends f2{constructor(e,t,r){super("SynthesisTriggeredEvent",e),this.privSessionAudioDestinationId=t,this.privTurnAudioDestinationId=r}get audioSessionDestinationId(){return this.privSessionAudioDestinationId}get audioTurnDestinationId(){return this.privTurnAudioDestinationId}}Tu.SynthesisTriggeredEvent=zhe;class Uhe extends f2{constructor(e,t){super("ConnectingToSynthesisServiceEvent",e),this.privAuthFetchEventId=t}get authFetchEventId(){return this.privAuthFetchEventId}}Tu.ConnectingToSynthesisServiceEvent=Uhe;class jhe extends f2{constructor(e,t){super("SynthesisStartedEvent",e),this.privAuthFetchEventId=t}get authFetchEventId(){return this.privAuthFetchEventId}}Tu.SynthesisStartedEvent=jhe;var h9;function Ghe(){if(h9)return Ty;h9=1;var n=Ze&&Ze.__awaiter||function(a,l,c,u){function d(h){return h instanceof c?h:new c(function(f){f(h)})}return new(c||(c=Promise))(function(h,f){function m(y){try{v(u.next(y))}catch(A){f(A)}}function g(y){try{v(u.throw(y))}catch(A){f(A)}}function v(y){y.done?h(y.value):d(y.value).then(m,g)}v((u=u.apply(a,l||[])).next())})};Object.defineProperty(Ty,"__esModule",{value:!0}),Ty.SynthesisTurn=void 0;const e=pn(),t=to,r=vt(),i=VO,s=Tu;let o=class L4{constructor(){this.privIsDisposed=!1,this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!1,this.privBytesReceived=0,this.privInTurn=!1,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privRequestId=e.createNoDashGuid(),this.privTurnDeferral=new e.Deferred,this.privTurnDeferral.resolve()}get requestId(){return this.privRequestId}get streamId(){return this.privStreamId}set streamId(l){this.privStreamId=l}get audioOutputFormat(){return this.privAudioOutputFormat}set audioOutputFormat(l){this.privAudioOutputFormat=l}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSynthesisEnded(){return this.privIsSynthesisEnded}get isSynthesizing(){return this.privIsSynthesizing}get currentTextOffset(){return this.privTextOffset}get currentSentenceOffset(){return this.privSentenceOffset}get bytesReceived(){return this.privBytesReceived}get audioDuration(){return this.privAudioDuration}get extraProperties(){if(this.privWebRTCSDP){const l=new r.PropertyCollection;return l.setProperty(r.PropertyId.TalkingAvatarService_WebRTC_SDP,this.privWebRTCSDP),l}}getAllReceivedAudio(){return n(this,void 0,void 0,function*(){return this.privReceivedAudio?Promise.resolve(this.privReceivedAudio):this.privIsSynthesisEnded?(yield this.readAllAudioFromStream(),Promise.resolve(this.privReceivedAudio)):null})}getAllReceivedAudioWithHeader(){return n(this,void 0,void 0,function*(){if(this.privReceivedAudioWithHeader)return this.privReceivedAudioWithHeader;if(!this.privIsSynthesisEnded)return null;if(this.audioOutputFormat.hasHeader){const l=yield this.getAllReceivedAudio();return this.privReceivedAudioWithHeader=this.audioOutputFormat.addHeader(l),this.privReceivedAudioWithHeader}else return this.getAllReceivedAudio()})}startNewSynthesis(l,c,u,d){this.privIsSynthesisEnded=!1,this.privIsSynthesizing=!0,this.privRequestId=l,this.privRawText=c,this.privIsSSML=u,this.privAudioOutputStream=new t.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privAudioOutputFormat,this.privReceivedAudio=null,this.privReceivedAudioWithHeader=null,this.privBytesReceived=0,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privPartialVisemeAnimation="",this.privWebRTCSDP="",d!==void 0&&(this.privTurnAudioDestination=d,this.privTurnAudioDestination.format=this.privAudioOutputFormat),this.onEvent(new s.SynthesisTriggeredEvent(this.requestId,void 0,d===void 0?void 0:d.id()))}onPreConnectionStart(l){this.privAuthFetchEventId=l,this.onEvent(new s.ConnectingToSynthesisServiceEvent(this.privRequestId,this.privAuthFetchEventId))}onAuthCompleted(l){l&&this.onComplete()}onConnectionEstablishCompleted(l){if(l===200){this.onEvent(new s.SynthesisStartedEvent(this.requestId,this.privAuthFetchEventId)),this.privBytesReceived=0;return}else l===403&&this.onComplete()}onServiceResponseMessage(l){const c=JSON.parse(l);this.streamId=c.audio.streamId}onServiceTurnEndResponse(){this.privInTurn=!1,this.privTurnDeferral.resolve(),this.onComplete()}onServiceTurnStartResponse(l){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new e.Deferred;const c=JSON.parse(l);c.webrtc&&(this.privWebRTCSDP=c.webrtc.connectionString)}onAudioChunkReceived(l){this.isSynthesizing&&(this.privAudioOutputStream.write(l),this.privBytesReceived+=l.byteLength,this.privTurnAudioDestination!==void 0&&this.privTurnAudioDestination.write(l))}onTextBoundaryEvent(l){this.updateTextOffset(l.Data.text.Text,l.Type)}onVisemeMetadataReceived(l){l.Data.AnimationChunk!==void 0&&(this.privPartialVisemeAnimation+=l.Data.AnimationChunk)}onSessionEnd(l){this.privAudioDuration=l.Data.Offset}constructSynthesisResult(){return n(this,void 0,void 0,function*(){const l=yield this.getAllReceivedAudioWithHeader();return new r.SpeechSynthesisResult(this.requestId,r.ResultReason.SynthesizingAudioCompleted,l,void 0,this.extraProperties,this.audioDuration)})}dispose(){this.privIsDisposed||(this.privIsDisposed=!0)}onStopSynthesizing(){this.onComplete()}getAndClearVisemeAnimation(){const l=this.privPartialVisemeAnimation;return this.privPartialVisemeAnimation="",l}onEvent(l){e.Events.instance.onEvent(l)}static isXmlTag(l){return l.length>=2&&l[0]==="<"&&l[l.length-1]===">"}updateTextOffset(l,c){c===i.MetadataType.WordBoundary?(this.privTextOffset=this.privRawText.indexOf(l,this.privNextSearchTextIndex),this.privTextOffset>=0&&(this.privNextSearchTextIndex=this.privTextOffset+l.length,this.privIsSSML&&this.withinXmlTag(this.privTextOffset)&&!L4.isXmlTag(l)&&this.updateTextOffset(l,c))):(this.privSentenceOffset=this.privRawText.indexOf(l,this.privNextSearchSentenceIndex),this.privSentenceOffset>=0&&(this.privNextSearchSentenceIndex=this.privSentenceOffset+l.length,this.privIsSSML&&this.withinXmlTag(this.privSentenceOffset)&&!L4.isXmlTag(l)&&this.updateTextOffset(l,c)))}onComplete(){this.privIsSynthesizing&&(this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!0,this.privAudioOutputStream.close(),this.privInTurn=!1,this.privTurnAudioDestination!==void 0&&(this.privTurnAudioDestination.close(),this.privTurnAudioDestination=void 0))}readAllAudioFromStream(){return n(this,void 0,void 0,function*(){if(this.privIsSynthesisEnded){this.privReceivedAudio=new ArrayBuffer(this.bytesReceived);try{yield this.privAudioOutputStream.read(this.privReceivedAudio)}catch{this.privReceivedAudio=new ArrayBuffer(0)}}})}withinXmlTag(l){return this.privRawText.indexOf("<",l+1)>this.privRawText.indexOf(">",l+1)}};return Ty.SynthesisTurn=o,Ty}var xy={},f9;function Hhe(){if(f9)return xy;f9=1;var n=Ze&&Ze.__awaiter||function(o,a,l,c){function u(d){return d instanceof l?d:new l(function(h){h(d)})}return new(l||(l=Promise))(function(d,h){function f(v){try{g(c.next(v))}catch(y){h(y)}}function m(v){try{g(c.throw(v))}catch(y){h(y)}}function g(v){v.done?d(v.value):u(v.value).then(f,m)}g((c=c.apply(o,a||[])).next())})};Object.defineProperty(xy,"__esModule",{value:!0}),xy.SynthesisAdapterBase=void 0;const e=pn(),t=vt(),r=Wt(),i=lh;let s=class{constructor(a,l,c,u){if(this.speakOverride=void 0,this.receiveMessageOverride=void 0,this.connectImplOverride=void 0,this.configConnectionOverride=void 0,this.privConnectionConfigurationPromise=void 0,!a)throw new e.ArgumentNullError("authentication");if(!l)throw new e.ArgumentNullError("connectionFactory");if(!c)throw new e.ArgumentNullError("synthesizerConfig");this.privAuthentication=a,this.privConnectionFactory=l,this.privSynthesizerConfig=c,this.privIsDisposed=!1,this.privSessionAudioDestination=u,this.privSynthesisTurn=new r.SynthesisTurn,this.privConnectionEvents=new e.EventSource,this.privServiceEvents=new e.EventSource,this.privSynthesisContext=new r.SynthesisContext,this.privAgentConfig=new r.AgentConfig,this.connectionEvents.attach(d=>{if(d.name==="ConnectionClosedEvent"){const h=d;h.statusCode!==1e3&&this.cancelSynthesisLocal(t.CancellationReason.Error,h.statusCode===1007?t.CancellationErrorCode.BadRequestParameters:t.CancellationErrorCode.ConnectionFailure,`${h.reason} websocket error code: ${h.statusCode}`)}})}get synthesisContext(){return this.privSynthesisContext}get agentConfig(){return this.privAgentConfig}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}set activityTemplate(a){this.privActivityTemplate=a}get activityTemplate(){return this.privActivityTemplate}set audioOutputFormat(a){this.privAudioOutputFormat=a,this.privSynthesisTurn.audioOutputFormat=a,this.privSessionAudioDestination!==void 0&&(this.privSessionAudioDestination.format=a),this.synthesisContext!==void 0&&(this.synthesisContext.audioOutputFormat=a)}isDisposed(){return this.privIsDisposed}dispose(a){return n(this,void 0,void 0,function*(){this.privIsDisposed=!0,this.privSessionAudioDestination!==void 0&&this.privSessionAudioDestination.close(),this.privConnectionConfigurationPromise!==void 0&&(yield(yield this.privConnectionConfigurationPromise).dispose(a))})}connect(){return n(this,void 0,void 0,function*(){yield this.connectImpl()})}sendNetworkMessage(a,l){return n(this,void 0,void 0,function*(){const c=typeof l=="string"?e.MessageType.Text:e.MessageType.Binary,u=typeof l=="string"?"application/json":"";return(yield this.fetchConnection()).send(new i.SpeechConnectionMessage(c,a,this.privSynthesisTurn.requestId,u,l))})}Speak(a,l,c,u,d,h){return n(this,void 0,void 0,function*(){let f;if(l?f=a:f=this.privSynthesizer.buildSsml(a),this.speakOverride!==void 0)return this.speakOverride(f,c,u,d);this.privSuccessCallback=u,this.privErrorCallback=d,this.privSynthesisTurn.startNewSynthesis(c,a,l,h);try{yield this.connectImpl();const m=yield this.fetchConnection();yield this.sendSynthesisContext(m),yield this.sendSsmlMessage(m,f,c),this.onSynthesisStarted(c),this.receiveMessage()}catch(m){return this.cancelSynthesisLocal(t.CancellationReason.Error,t.CancellationErrorCode.ConnectionFailure,m),Promise.reject(m)}})}stopSpeaking(){return n(this,void 0,void 0,function*(){return yield this.connectImpl(),(yield this.fetchConnection()).send(new i.SpeechConnectionMessage(e.MessageType.Text,"synthesis.control",this.privSynthesisTurn.requestId,"application/json",JSON.stringify({action:"stop"})))})}cancelSynthesis(a,l,c,u){const d=new t.PropertyCollection;d.setProperty(r.CancellationErrorCodePropertyName,t.CancellationErrorCode[c]);const h=new t.SpeechSynthesisResult(a,t.ResultReason.Canceled,void 0,u,d);if(this.onSynthesisCancelled(h),this.privSuccessCallback)try{this.privSuccessCallback(h)}catch{}}cancelSynthesisLocal(a,l,c){this.privSynthesisTurn.isSynthesizing&&(this.privSynthesisTurn.onStopSynthesizing(),this.cancelSynthesis(this.privSynthesisTurn.requestId,a,l,c))}processTypeSpecificMessages(a){return!0}receiveMessage(){return n(this,void 0,void 0,function*(){try{const l=yield(yield this.fetchConnection()).read();if(this.receiveMessageOverride!==void 0)return this.receiveMessageOverride();if(this.privIsDisposed)return;if(!l)return this.privSynthesisTurn.isSynthesizing?this.receiveMessage():void 0;const c=i.SpeechConnectionMessage.fromConnectionMessage(l);if(c.requestId.toLowerCase()===this.privSynthesisTurn.requestId.toLowerCase())switch(c.path.toLowerCase()){case"turn.start":this.privSynthesisTurn.onServiceTurnStartResponse(c.textBody);break;case"response":this.privSynthesisTurn.onServiceResponseMessage(c.textBody);break;case"audio":this.privSynthesisTurn.streamId.toLowerCase()===c.streamId.toLowerCase()&&c.binaryBody&&(this.privSynthesisTurn.onAudioChunkReceived(c.binaryBody),this.onSynthesizing(c.binaryBody),this.privSessionAudioDestination!==void 0&&this.privSessionAudioDestination.write(c.binaryBody));break;case"audio.metadata":const u=r.SynthesisAudioMetadata.fromJSON(c.textBody).Metadata;for(const h of u)switch(h.Type){case r.MetadataType.WordBoundary:case r.MetadataType.SentenceBoundary:this.privSynthesisTurn.onTextBoundaryEvent(h);const f=new t.SpeechSynthesisWordBoundaryEventArgs(h.Data.Offset,h.Data.Duration,h.Data.text.Text,h.Data.text.Length,h.Type===r.MetadataType.WordBoundary?this.privSynthesisTurn.currentTextOffset:this.privSynthesisTurn.currentSentenceOffset,h.Data.text.BoundaryType);this.onWordBoundary(f);break;case r.MetadataType.Bookmark:const m=new t.SpeechSynthesisBookmarkEventArgs(h.Data.Offset,h.Data.Bookmark);this.onBookmarkReached(m);break;case r.MetadataType.Viseme:if(this.privSynthesisTurn.onVisemeMetadataReceived(h),h.Data.IsLastAnimation){const g=new t.SpeechSynthesisVisemeEventArgs(h.Data.Offset,h.Data.VisemeId,this.privSynthesisTurn.getAndClearVisemeAnimation());this.onVisemeReceived(g)}break;case r.MetadataType.AvatarSignal:this.onAvatarEvent(h);break;case r.MetadataType.SessionEnd:this.privSynthesisTurn.onSessionEnd(h);break}break;case"turn.end":this.privSynthesisTurn.onServiceTurnEndResponse();let d;try{d=yield this.privSynthesisTurn.constructSynthesisResult(),this.privSuccessCallback&&this.privSuccessCallback(d)}catch(h){this.privErrorCallback&&this.privErrorCallback(h)}this.onSynthesisCompleted(d);break;default:this.processTypeSpecificMessages(c)||this.privServiceEvents&&this.serviceEvents.onEvent(new e.ServiceEvent(c.path.toLowerCase(),c.textBody))}return this.receiveMessage()}catch{}})}sendSynthesisContext(a){this.setSynthesisContextSynthesisSection();const l=this.synthesisContext.toJSON();if(l)return a.send(new i.SpeechConnectionMessage(e.MessageType.Text,"synthesis.context",this.privSynthesisTurn.requestId,"application/json",l))}setSpeechConfigSynthesisSection(){}connectImpl(a=!1){if(this.privConnectionPromise!=null)return this.privConnectionPromise.then(c=>c.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()));this.privAuthFetchEventId=e.createNoDashGuid(),this.privConnectionId=e.createNoDashGuid(),this.privSynthesisTurn.onPreConnectionStart(this.privAuthFetchEventId);const l=a?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);return this.privConnectionPromise=l.then(c=>n(this,void 0,void 0,function*(){this.privSynthesisTurn.onAuthCompleted(!1);const u=this.privConnectionFactory.create(this.privSynthesizerConfig,c,this.privConnectionId);u.events.attach(h=>{this.connectionEvents.onEvent(h)});const d=yield u.open();return d.statusCode===200?(this.privSynthesisTurn.onConnectionEstablishCompleted(d.statusCode),Promise.resolve(u)):d.statusCode===403&&!a?this.connectImpl(!0):(this.privSynthesisTurn.onConnectionEstablishCompleted(d.statusCode),Promise.reject(`Unable to contact server. StatusCode: ${d.statusCode}, ${this.privSynthesizerConfig.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint)} Reason: ${d.reason}`))}),c=>{throw this.privSynthesisTurn.onAuthCompleted(!0),new Error(c)}),this.privConnectionPromise.catch(()=>{}),this.privConnectionPromise}sendSpeechServiceConfig(a,l){if(l)return a.send(new i.SpeechConnectionMessage(e.MessageType.Text,"speech.config",this.privSynthesisTurn.requestId,"application/json",l))}sendSsmlMessage(a,l,c){return a.send(new i.SpeechConnectionMessage(e.MessageType.Text,"ssml",c,"application/ssml+xml",l))}fetchConnection(){return n(this,void 0,void 0,function*(){return this.privConnectionConfigurationPromise!==void 0?this.privConnectionConfigurationPromise.then(a=>a.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),yield this.privConnectionConfigurationPromise)})}configureConnection(){return n(this,void 0,void 0,function*(){const a=yield this.connectImpl();return this.configConnectionOverride!==void 0?this.configConnectionOverride(a):(this.setSpeechConfigSynthesisSection(),yield this.sendSpeechServiceConfig(a,this.privSynthesizerConfig.SpeechServiceConfig.serialize()),a)})}onAvatarEvent(a){}onSynthesisStarted(a){}onSynthesizing(a){}onSynthesisCancelled(a){}onSynthesisCompleted(a){}onWordBoundary(a){}onVisemeReceived(a){}onBookmarkReached(a){}};return xy.SynthesisAdapterBase=s,s.telemetryDataEnabled=!0,xy}var Iy={},p9;function Vhe(){if(p9)return Iy;p9=1,Object.defineProperty(Iy,"__esModule",{value:!0}),Iy.AvatarSynthesisAdapter=void 0;const n=vt(),e=Wt();let t=class extends e.SynthesisAdapterBase{constructor(i,s,o,a,l){super(i,s,o,void 0),this.privAvatarSynthesizer=a,this.privSynthesizer=a,this.privAvatarConfig=l}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(void 0)}setSpeechConfigSynthesisSection(){var i,s,o,a,l,c,u,d,h,f,m,g,v,y,A,C;this.privSynthesizerConfig.synthesisVideoSection={format:{bitrate:(i=this.privAvatarConfig.videoFormat)===null||i===void 0?void 0:i.bitrate,codec:(s=this.privAvatarConfig.videoFormat)===null||s===void 0?void 0:s.codec,crop:{bottomRight:{x:(l=(a=(o=this.privAvatarConfig.videoFormat)===null||o===void 0?void 0:o.cropRange)===null||a===void 0?void 0:a.bottomRight)===null||l===void 0?void 0:l.x,y:(d=(u=(c=this.privAvatarConfig.videoFormat)===null||c===void 0?void 0:c.cropRange)===null||u===void 0?void 0:u.bottomRight)===null||d===void 0?void 0:d.y},topLeft:{x:(m=(f=(h=this.privAvatarConfig.videoFormat)===null||h===void 0?void 0:h.cropRange)===null||f===void 0?void 0:f.topLeft)===null||m===void 0?void 0:m.x,y:(y=(v=(g=this.privAvatarConfig.videoFormat)===null||g===void 0?void 0:g.cropRange)===null||v===void 0?void 0:v.topLeft)===null||y===void 0?void 0:y.y}},resolution:{height:(A=this.privAvatarConfig.videoFormat)===null||A===void 0?void 0:A.height,width:(C=this.privAvatarConfig.videoFormat)===null||C===void 0?void 0:C.width}},protocol:{name:"WebRTC",webrtcConfig:{clientDescription:btoa(this.privSynthesizerConfig.parameters.getProperty(n.PropertyId.TalkingAvatarService_WebRTC_SDP)),iceServers:this.privAvatarSynthesizer.iceServers}},talkingAvatar:{background:{color:this.privAvatarConfig.backgroundColor},character:this.privAvatarConfig.character,customized:this.privAvatarConfig.customized,style:this.privAvatarConfig.style}}}onAvatarEvent(i){if(this.privAvatarSynthesizer.avatarEventReceived){const s=new n.AvatarEventArgs(i.Data.Offset,i.Data.Name);try{this.privAvatarSynthesizer.avatarEventReceived(this.privAvatarSynthesizer,s)}catch{}}}};return Iy.AvatarSynthesisAdapter=t,Iy}var by={},m9;function $he(){if(m9)return by;m9=1,Object.defineProperty(by,"__esModule",{value:!0}),by.SpeechSynthesisAdapter=void 0;const n=vt(),e=Wt();let t=class extends e.SynthesisAdapterBase{constructor(i,s,o,a,l){super(i,s,o,l),this.privSpeechSynthesizer=a,this.privSynthesizer=a}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(this.privSpeechSynthesizer)}onSynthesisStarted(i){const s=new n.SpeechSynthesisEventArgs(new n.SpeechSynthesisResult(i,n.ResultReason.SynthesizingAudioStarted));this.privSpeechSynthesizer.synthesisStarted&&this.privSpeechSynthesizer.synthesisStarted(this.privSpeechSynthesizer,s)}onSynthesizing(i){if(this.privSpeechSynthesizer.synthesizing)try{const s=this.privSynthesisTurn.audioOutputFormat.addHeader(i),o=new n.SpeechSynthesisEventArgs(new n.SpeechSynthesisResult(this.privSynthesisTurn.requestId,n.ResultReason.SynthesizingAudio,s));this.privSpeechSynthesizer.synthesizing(this.privSpeechSynthesizer,o)}catch{}}onSynthesisCancelled(i){if(this.privSpeechSynthesizer.SynthesisCanceled){const s=new n.SpeechSynthesisEventArgs(i);try{this.privSpeechSynthesizer.SynthesisCanceled(this.privSpeechSynthesizer,s)}catch{}}}onSynthesisCompleted(i){if(this.privSpeechSynthesizer.synthesisCompleted)try{this.privSpeechSynthesizer.synthesisCompleted(this.privSpeechSynthesizer,new n.SpeechSynthesisEventArgs(i))}catch{}}onWordBoundary(i){if(this.privSpeechSynthesizer.wordBoundary)try{this.privSpeechSynthesizer.wordBoundary(this.privSpeechSynthesizer,i)}catch{}}onVisemeReceived(i){if(this.privSpeechSynthesizer.visemeReceived)try{this.privSpeechSynthesizer.visemeReceived(this.privSpeechSynthesizer,i)}catch{}}onBookmarkReached(i){if(this.privSpeechSynthesizer.bookmarkReached)try{this.privSpeechSynthesizer.bookmarkReached(this.privSpeechSynthesizer,i)}catch{}}};return by.SpeechSynthesisAdapter=t,by}var My={},g9;function Whe(){if(g9)return My;g9=1,Object.defineProperty(My,"__esModule",{value:!0}),My.SynthesisRestAdapter=void 0;const n=Ws(),e=vt(),t=Kc(),r=$s;let i=class{constructor(o,a){let l=o.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint,void 0);if(!l){const u=o.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Region,"westus"),d=t.ConnectionFactoryBase.getHostSuffix(u);l=o.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,`https://${u}.tts.speech${d}`)}this.privUri=`${l}/cognitiveservices/voices/list`;const c=n.RestConfigBase.requestOptions;this.privRestAdapter=new n.RestMessageAdapter(c),this.privAuthentication=a}getVoicesList(o){return this.privRestAdapter.setHeaders(r.HeaderNames.ConnectionId,o),this.privAuthentication.fetch(o).then(a=>(this.privRestAdapter.setHeaders(a.headerName,a.token),this.privRestAdapter.request(n.RestRequestType.Get,this.privUri)))}};return My.SynthesisRestAdapter=i,My}var OM={},v9;function qhe(){return v9||(v9=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.SynthesizerConfig=n.SynthesisServiceType=void 0;const e=Wt();var t;(function(i){i[i.Standard=0]="Standard",i[i.Custom=1]="Custom"})(t=n.SynthesisServiceType||(n.SynthesisServiceType={}));class r{constructor(s,o){this.privSynthesisServiceType=t.Standard,this.avatarEnabled=!1,this.privSpeechServiceConfig=s||new e.SpeechServiceConfig(new e.Context(null)),this.privParameters=o}get parameters(){return this.privParameters}get synthesisServiceType(){return this.privSynthesisServiceType}set synthesisServiceType(s){this.privSynthesisServiceType=s}set synthesisVideoSection(s){this.privSpeechServiceConfig.Context.synthesis={video:s}}get SpeechServiceConfig(){return this.privSpeechServiceConfig}}n.SynthesizerConfig=r}(OM)),OM}var Ry={},y9;function Qhe(){if(y9)return Ry;y9=1,Object.defineProperty(Ry,"__esModule",{value:!0}),Ry.SynthesisContext=void 0;const n=vt();let e=class{constructor(){this.privContext={}}setSection(r,i){this.privContext[r]=i}set audioOutputFormat(r){this.privAudioOutputFormat=r}toJSON(){return JSON.stringify(this.privContext)}setSynthesisSection(r){const i=this.buildSynthesisContext(r);this.setSection("synthesis",i)}buildSynthesisContext(r){return{audio:{metadataOptions:{bookmarkEnabled:!!(r!=null&&r.bookmarkReached),punctuationBoundaryEnabled:r==null?void 0:r.properties.getProperty(n.PropertyId.SpeechServiceResponse_RequestPunctuationBoundary,!!(r!=null&&r.wordBoundary)),sentenceBoundaryEnabled:r==null?void 0:r.properties.getProperty(n.PropertyId.SpeechServiceResponse_RequestSentenceBoundary,!1),sessionEndEnabled:!0,visemeEnabled:!!(r!=null&&r.visemeReceived),wordBoundaryEnabled:r==null?void 0:r.properties.getProperty(n.PropertyId.SpeechServiceResponse_RequestWordBoundary,!!(r!=null&&r.wordBoundary))},outputFormat:this.privAudioOutputFormat.requestAudioFormatString},language:{autoDetection:r==null?void 0:r.autoDetectSourceLanguage}}}};return Ry.SynthesisContext=e,Ry}var Ny={},_9;function Jhe(){if(_9)return Ny;_9=1,Object.defineProperty(Ny,"__esModule",{value:!0}),Ny.SpeakerRecognitionConfig=void 0;const n=Wt();let e=class{constructor(r,i){this.privContext=r||new n.Context(null),this.privParameters=i}get parameters(){return this.privParameters}get Context(){return this.privContext}};return Ny.SpeakerRecognitionConfig=e,Ny}var Py={},S9;function Khe(){if(S9)return Py;S9=1;var n=Ze&&Ze.__awaiter||function(a,l,c,u){function d(h){return h instanceof c?h:new c(function(f){f(h)})}return new(c||(c=Promise))(function(h,f){function m(y){try{v(u.next(y))}catch(A){f(A)}}function g(y){try{v(u.throw(y))}catch(A){f(A)}}function v(y){y.done?h(y.value):d(y.value).then(m,g)}v((u=u.apply(a,l||[])).next())})};Object.defineProperty(Py,"__esModule",{value:!0}),Py.SpeakerServiceRecognizer=void 0;const e=Ws(),t=pn(),r=vt(),i=Wt(),s=lh;let o=class extends i.ServiceRecognizerBase{constructor(l,c,u,d,h){super(l,c,u,d,h),this.privSpeakerRecognizer=h,this.privSpeakerAudioSource=u,this.recognizeSpeaker=f=>this.recognizeSpeakerOnce(f),this.sendPrePayloadJSONOverride=()=>this.noOp()}processTypeSpecificMessages(l){let c=!1;const u=new r.PropertyCollection;switch(l.messageType===t.MessageType.Text&&u.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,l.textBody),l.path.toLowerCase()){case"speaker.response":const h=JSON.parse(l.textBody);let f;h.status.statusCode.toLowerCase()!=="success"?f=new r.SpeakerRecognitionResult(h,r.ResultReason.Canceled,r.CancellationErrorCode.ServiceError,h.status.reason):f=new r.SpeakerRecognitionResult(h,r.ResultReason.RecognizedSpeaker),this.privResultDeferral&&this.privResultDeferral.resolve(f),c=!0;break}const d=new t.Deferred;return d.resolve(c),d.promise}cancelRecognition(l,c,u,d,h){if(new r.PropertyCollection().setProperty(i.CancellationErrorCodePropertyName,r.CancellationErrorCode[d]),this.privResultDeferral){const m=new r.SpeakerRecognitionResult({scenario:this.privSpeakerModel.scenario,status:{statusCode:h,reason:h}},r.ResultReason.Canceled,d,h);try{this.privResultDeferral.resolve(m)}catch(g){this.privResultDeferral.reject(g)}}}recognizeSpeakerOnce(l){return n(this,void 0,void 0,function*(){this.privSpeakerModel=l,this.voiceProfileType=l.scenario,this.privResultDeferral||(this.privResultDeferral=new t.Deferred),this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(r.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const c=this.connectImpl(),u=this.sendPreAudioMessages(this.extractSpeakerContext(l)),d=yield this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),h=yield this.privSpeakerAudioSource.format,f=yield this.privSpeakerAudioSource.deviceInfo,m=new e.ReplayableAudioNode(d,h.avgBytesPerSec);yield this.privRequestSession.onAudioSourceAttachCompleted(m,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:f};try{yield c,yield u}catch(y){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,r.CancellationReason.Error,r.CancellationErrorCode.ConnectionFailure,y)}const g=new r.SessionEventArgs(this.privRequestSession.sessionId);return this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,g),this.receiveMessage(),this.sendAudio(m).then(()=>{},y=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,r.CancellationReason.Error,r.CancellationErrorCode.RuntimeError,y)}),this.privResultDeferral.promise})}sendPreAudioMessages(l){return n(this,void 0,void 0,function*(){const c=yield this.fetchConnection();yield this.sendSpeakerRecognition(c,l)})}sendSpeakerRecognition(l,c){return n(this,void 0,void 0,function*(){const u=JSON.stringify(c);return l.send(new s.SpeechConnectionMessage(t.MessageType.Text,"speaker.context",this.privRequestSession.requestId,"application/json; charset=utf-8",u))})}extractSpeakerContext(l){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:l.profileIds,scenario:l.scenario}}};return Py.SpeakerServiceRecognizer=o,Py}var Oy={},A9;function Yhe(){if(A9)return Oy;A9=1;var n=Ze&&Ze.__awaiter||function(a,l,c,u){function d(h){return h instanceof c?h:new c(function(f){f(h)})}return new(c||(c=Promise))(function(h,f){function m(y){try{v(u.next(y))}catch(A){f(A)}}function g(y){try{v(u.throw(y))}catch(A){f(A)}}function v(y){y.done?h(y.value):d(y.value).then(m,g)}v((u=u.apply(a,l||[])).next())})};Object.defineProperty(Oy,"__esModule",{value:!0}),Oy.VoiceServiceRecognizer=void 0;const e=Ws(),t=pn(),r=vt(),i=Wt(),s=lh;let o=class extends i.ServiceRecognizerBase{constructor(l,c,u,d,h){super(l,c,u,d,h),this.privDeferralMap=new t.DeferralMap,this.privSpeakerAudioSource=u,this.sendPrePayloadJSONOverride=()=>this.noOp()}set SpeakerAudioSource(l){this.privSpeakerAudioSource=l}processTypeSpecificMessages(l){let c=!1;const u=new r.PropertyCollection;switch(l.messageType===t.MessageType.Text&&u.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,l.textBody),l.path.toLowerCase()){case"speaker.profiles":const h=JSON.parse(l.textBody);switch(h.operation.toLowerCase()){case"create":this.handleCreateResponse(h,l.requestId);break;case"delete":case"reset":this.handleResultResponse(h,l.requestId);break;case"fetch":const v=JSON.parse(l.textBody);this.handleFetchResponse(v,l.requestId);break}c=!0;break;case"speaker.phrases":const f=JSON.parse(l.textBody);this.handlePhrasesResponse(f,l.requestId),c=!0;break;case"speaker.profile.enrollment":const m=JSON.parse(l.textBody),g=new r.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(m.enrollment?m.enrollment.enrollmentStatus:m.status.statusCode),m.enrollment?JSON.stringify(m.enrollment):void 0,m.status.reason);this.privDeferralMap.getId(l.requestId)&&this.privDeferralMap.complete(l.requestId,g),this.privRequestSession.onSpeechEnded(),c=!0;break}const d=new t.Deferred;return d.resolve(c),d.promise}cancelRecognition(l,c,u,d,h){new r.PropertyCollection().setProperty(i.CancellationErrorCodePropertyName,r.CancellationErrorCode[d]);const m=new r.VoiceProfileEnrollmentResult(r.ResultReason.Canceled,h,h);this.privDeferralMap.getId(c)&&this.privDeferralMap.complete(c,m)}createProfile(l,c){return n(this,void 0,void 0,function*(){this.voiceProfileType=l.toString();const u=this.connectImpl();try{const d=new t.Deferred;return yield u,yield this.sendCreateProfile(d,l,c),this.receiveMessage(),d.promise}catch(d){throw d}})}resetProfile(l){return n(this,void 0,void 0,function*(){return this.voiceProfileType=l.profileType.toString(),this.sendCommonRequest("reset",l.profileType,l)})}deleteProfile(l){return n(this,void 0,void 0,function*(){return this.voiceProfileType=l.profileType.toString(),this.sendCommonRequest("delete",l.profileType,l)})}retrieveEnrollmentResult(l){return n(this,void 0,void 0,function*(){return this.voiceProfileType=l.profileType.toString(),this.privExpectedProfileId=l.profileId,this.sendCommonRequest("fetch",l.profileType,l)})}getAllProfiles(l){return n(this,void 0,void 0,function*(){return this.voiceProfileType=l.toString(),this.sendCommonRequest("fetch",l)})}getActivationPhrases(l,c){return n(this,void 0,void 0,function*(){this.voiceProfileType=l.toString();const u=this.connectImpl();try{const d=new t.Deferred;return yield u,yield this.sendPhrasesRequest(d,l,c),this.receiveMessage(),d.promise}catch(d){throw d}})}enrollProfile(l){return n(this,void 0,void 0,function*(){this.voiceProfileType=l.profileType.toString();const c=new t.Deferred;this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(r.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const u=this.connectImpl(),d=this.sendPreAudioMessages(l,c),h=yield this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),f=yield this.privSpeakerAudioSource.format,m=yield this.privSpeakerAudioSource.deviceInfo,g=new e.ReplayableAudioNode(h,f.avgBytesPerSec);yield this.privRequestSession.onAudioSourceAttachCompleted(g,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:m};try{yield u,yield d}catch(A){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,r.CancellationReason.Error,r.CancellationErrorCode.ConnectionFailure,A)}const v=new r.SessionEventArgs(this.privRequestSession.sessionId);return this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,v),this.receiveMessage(),this.sendAudio(g).then(()=>{},A=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,r.CancellationReason.Error,r.CancellationErrorCode.RuntimeError,A)}),c.promise})}sendPreAudioMessages(l,c){return n(this,void 0,void 0,function*(){const u=yield this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,c),yield this.sendBaseRequest(u,"enroll",this.scenarioFrom(l.profileType),l)})}sendPhrasesRequest(l,c,u){return n(this,void 0,void 0,function*(){const d=yield this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,l);const h=this.scenarioFrom(c),f={locale:u,scenario:h};return d.send(new s.SpeechConnectionMessage(t.MessageType.Text,"speaker.profile.phrases",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(f)))})}sendCreateProfile(l,c,u){return n(this,void 0,void 0,function*(){const d=yield this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,l);const h=c===r.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":c===r.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification",f={locale:u,number:"1",scenario:h};return d.send(new s.SpeechConnectionMessage(t.MessageType.Text,"speaker.profile.create",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(f)))})}sendCommonRequest(l,c,u=void 0){return n(this,void 0,void 0,function*(){const d=this.connectImpl();try{const h=new t.Deferred;this.privRequestSession.onSpeechContext(),yield d;const f=yield this.fetchConnection();return this.privDeferralMap.add(this.privRequestSession.requestId,h),yield this.sendBaseRequest(f,l,this.scenarioFrom(c),u),this.receiveMessage(),h.promise}catch(h){throw h}})}sendBaseRequest(l,c,u,d){return n(this,void 0,void 0,function*(){const h={scenario:u};return d?h.profileIds=[d.profileId]:h.maxPageSize=-1,l.send(new s.SpeechConnectionMessage(t.MessageType.Text,`speaker.profile.${c}`,this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(h)))})}extractSpeakerContext(l){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:l.profileIds,scenario:l.scenario}}handlePhrasesResponse(l,c){if(this.privDeferralMap.getId(c))if(l.status.statusCode.toLowerCase()!=="success"){const u=r.ResultReason.Canceled,d=new r.VoiceProfilePhraseResult(u,l.status.statusCode,l.passPhraseType,[]);this.privDeferralMap.complete(c,d)}else if(l.phrases&&l.phrases.length>0){const u=r.ResultReason.EnrollingVoiceProfile,d=new r.VoiceProfilePhraseResult(u,l.status.statusCode,l.passPhraseType,l.phrases);this.privDeferralMap.complete(c,d)}else throw new Error("Voice Profile get activation phrases failed, no phrases received");else throw new Error(`Voice Profile get activation phrases request for requestID ${c} not found`)}handleCreateResponse(l,c){if(l.profiles&&l.profiles.length>0)if(this.privDeferralMap.getId(c)){const u=l.profiles.map(d=>d.profileId);this.privDeferralMap.complete(c,u)}else throw new Error(`Voice Profile create request for requestID ${c} not found`);else throw new Error("Voice Profile create failed, no profile id received")}handleResultResponse(l,c){if(this.privDeferralMap.getId(c)){const u=l.operation.toLowerCase()==="delete"?r.ResultReason.DeletedVoiceProfile:r.ResultReason.ResetVoiceProfile,d=l.status.statusCode.toLowerCase()==="success"?u:r.ResultReason.Canceled,h=new r.VoiceProfileResult(d,`statusCode: ${l.status.statusCode}, errorDetails: ${l.status.reason}`);this.privDeferralMap.complete(c,h)}else throw new Error(`Voice Profile create request for requestID ${c} not found`)}handleFetchResponse(l,c){if(this.privDeferralMap.getId(c)&&l.profiles[0]){if(this.privExpectedProfileId&&l.profiles.length===1&&l.profiles[0].profileId===this.privExpectedProfileId){this.privExpectedProfileId=void 0;const u=l.profiles[0],d=new r.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(u.enrollmentStatus),JSON.stringify(u),l.status.reason);this.privDeferralMap.complete(c,d)}else if(l.profiles.length>0){const u=l.profiles,d=[];for(const h of u)d.push(new r.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(h.enrollmentStatus),JSON.stringify(h),l.status.reason));this.privDeferralMap.complete(c,d)}}else throw new Error(`Voice Profile fetch request for requestID ${c} not found`)}enrollmentReasonFrom(l){switch(l.toLowerCase()){case"enrolled":return r.ResultReason.EnrolledVoiceProfile;case"invalidlocale":case"invalidphrase":case"invalidaudioformat":case"invalidscenario":case"invalidprofilecount":case"invalidoperation":case"audiotooshort":case"audiotoolong":case"toomanyenrollments":case"storageconflict":case"profilenotfound":case"incompatibleprofiles":case"incompleteenrollment":return r.ResultReason.Canceled;default:return r.ResultReason.EnrollingVoiceProfile}}scenarioFrom(l){return l===r.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":l===r.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification"}};return Oy.VoiceServiceRecognizer=o,Oy}var EW={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.type=n.connectivity=n.Device=n.OS=n.System=n.Context=n.SpeechServiceConfig=void 0;class e{constructor(a){this.context=a}serialize(){return JSON.stringify(this,(a,l)=>{if(l&&typeof l=="object"&&!Array.isArray(l)){const c={};for(const u in l)Object.hasOwnProperty.call(l,u)&&(c[u&&u.charAt(0).toLowerCase()+u.substring(1)]=l[u]);return c}return l})}get Context(){return this.context}get Recognition(){return this.recognition}set Recognition(a){this.recognition=a.toLowerCase()}}n.SpeechServiceConfig=e;class t{constructor(a){this.system=new r,this.os=a}}n.Context=t;class r{constructor(){const a="1.34.0";this.name="SpeechSDK",this.version=a,this.build="JavaScript",this.lang="JavaScript"}}n.System=r;class i{constructor(a,l,c){this.platform=a,this.name=l,this.version=c}}n.OS=i;class s{constructor(a,l,c){this.manufacturer=a,this.model=l,this.version=c}}n.Device=s,function(o){o.Bluetooth="Bluetooth",o.Wired="Wired",o.WiFi="WiFi",o.Cellular="Cellular",o.InBuilt="InBuilt",o.Unknown="Unknown"}(n.connectivity||(n.connectivity={})),function(o){o.Phone="Phone",o.Speaker="Speaker",o.Car="Car",o.Headset="Headset",o.Thermostat="Thermostat",o.Microphones="Microphones",o.Deskphone="Deskphone",o.RemoteControl="RemoteControl",o.Unknown="Unknown",o.File="File",o.Stream="Stream"}(n.type||(n.type={}))})(EW);var E9;function Wt(){return E9||(E9=1,function(n){var e=Ze&&Ze.__createBinding||(Object.create?function(s,o,a,l){l===void 0&&(l=a),Object.defineProperty(s,l,{enumerable:!0,get:function(){return o[a]}})}:function(s,o,a,l){l===void 0&&(l=a),s[l]=o[a]}),t=Ze&&Ze.__exportStar||function(s,o){for(var a in s)a!=="default"&&!o.hasOwnProperty(a)&&e(o,s,a)};Object.defineProperty(n,"__esModule",{value:!0}),n.AutoDetectSourceLanguagesOpenRangeOptionName=n.ForceDictationPropertyName=n.ServicePropertiesPropertyName=n.CancellationErrorCodePropertyName=n.OutputFormatPropertyName=void 0,t(eI,n),t(AI,n),t(dv,n),t(_$,n),t(S$,n),t(zde(),n),t(Ude(),n),t(JI,n),t(jde(),n),t(Gde(),n),t(Hde(),n),t(fW,n),t(KI,n),t($de(),n),t(Wde(),n),t(qde(),n),t(Qde(),n),t(uW(),n),t(Jde(),n),t(pW,n),t(Kde(),n),t(YI,n),t(Zde(),n),t(ehe(),n),t(XI,n),t(ZI,n),t(e2,n),t(the(),n),t(nhe(),n),t(rhe(),n),t(ihe(),n),t(she(),n),t(t2,n),t(ahe(),n),t(n2,n),t(yW,n),t(r2,n),t(s2,n),t(o2,n),t(_W,n),t(_he(),n),t(c2,n),t(Fhe(),n),t(VO,n),t(Ghe(),n),t(Hhe(),n);var r=Vhe();Object.defineProperty(n,"AvatarSynthesisAdapter",{enumerable:!0,get:function(){return r.AvatarSynthesisAdapter}});var i=$he();Object.defineProperty(n,"SpeechSynthesisAdapter",{enumerable:!0,get:function(){return i.SpeechSynthesisAdapter}}),t(Whe(),n),t(qhe(),n),t(Qhe(),n),t(Jhe(),n),t(Khe(),n),t(Yhe(),n),t(EW,n),n.OutputFormatPropertyName="OutputFormat",n.CancellationErrorCodePropertyName="CancellationErrorCode",n.ServicePropertiesPropertyName="ServiceProperties",n.ForceDictationPropertyName="ForceDictation",n.AutoDetectSourceLanguagesOpenRangeOptionName="OpenRange"}(hM)),hM}(function(n){var e=Ze&&Ze.__createBinding||(Object.create?function(i,s,o,a){a===void 0&&(a=o),Object.defineProperty(i,a,{enumerable:!0,get:function(){return s[o]}})}:function(i,s,o,a){a===void 0&&(a=o),i[a]=s[o]}),t=Ze&&Ze.__exportStar||function(i,s){for(var o in i)o!=="default"&&!s.hasOwnProperty(o)&&e(s,i,o)};Object.defineProperty(n,"__esModule",{value:!0});const r=Wt();new r.AgentConfig,t(vt(),n)})(Yo);var CW={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var s="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(s=i(s,r(a)))}return s}function r(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return t.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var a in s)e.call(s,a)&&s[a]&&(o=i(o,a));return o}function i(s,o){return o?s?s+" "+o:s+o:s}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(CW);var lo=CW.exports;const er=zu(lo);class Wm extends Error{}class Xhe extends Wm{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class Zhe extends Wm{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class efe extends Wm{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class og extends Wm{}class wW extends Wm{constructor(e){super(`Invalid unit ${e}`)}}class xo extends Wm{}class Bh extends Wm{constructor(){super("Zone is an abstract class")}}const Ot="numeric",Hc="short",al="long",tx={year:Ot,month:Ot,day:Ot},TW={year:Ot,month:Hc,day:Ot},tfe={year:Ot,month:Hc,day:Ot,weekday:Hc},xW={year:Ot,month:al,day:Ot},IW={year:Ot,month:al,day:Ot,weekday:al},bW={hour:Ot,minute:Ot},MW={hour:Ot,minute:Ot,second:Ot},RW={hour:Ot,minute:Ot,second:Ot,timeZoneName:Hc},NW={hour:Ot,minute:Ot,second:Ot,timeZoneName:al},PW={hour:Ot,minute:Ot,hourCycle:"h23"},OW={hour:Ot,minute:Ot,second:Ot,hourCycle:"h23"},DW={hour:Ot,minute:Ot,second:Ot,hourCycle:"h23",timeZoneName:Hc},LW={hour:Ot,minute:Ot,second:Ot,hourCycle:"h23",timeZoneName:al},kW={year:Ot,month:Ot,day:Ot,hour:Ot,minute:Ot},BW={year:Ot,month:Ot,day:Ot,hour:Ot,minute:Ot,second:Ot},FW={year:Ot,month:Hc,day:Ot,hour:Ot,minute:Ot},zW={year:Ot,month:Hc,day:Ot,hour:Ot,minute:Ot,second:Ot},nfe={year:Ot,month:Hc,day:Ot,weekday:Hc,hour:Ot,minute:Ot},UW={year:Ot,month:al,day:Ot,hour:Ot,minute:Ot,timeZoneName:Hc},jW={year:Ot,month:al,day:Ot,hour:Ot,minute:Ot,second:Ot,timeZoneName:Hc},GW={year:Ot,month:al,day:Ot,weekday:al,hour:Ot,minute:Ot,timeZoneName:al},HW={year:Ot,month:al,day:Ot,weekday:al,hour:Ot,minute:Ot,second:Ot,timeZoneName:al};class tA{get type(){throw new Bh}get name(){throw new Bh}get ianaName(){return this.name}get isUniversal(){throw new Bh}offsetName(e,t){throw new Bh}formatOffset(e,t){throw new Bh}offset(e){throw new Bh}equals(e){throw new Bh}get isValid(){throw new Bh}}let DM=null;class p2 extends tA{static get instance(){return DM===null&&(DM=new p2),DM}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:t,locale:r}){return XW(e,t,r)}formatOffset(e,t){return M_(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}let eT={};function rfe(n){return eT[n]||(eT[n]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:n,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),eT[n]}const ife={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function sfe(n,e){const t=n.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(t),[,i,s,o,a,l,c,u]=r;return[o,i,s,a,l,c,u]}function ofe(n,e){const t=n.formatToParts(e),r=[];for(let i=0;i<t.length;i++){const{type:s,value:o}=t[i],a=ife[s];s==="era"?r[a]=o:Pn(a)||(r[a]=parseInt(o,10))}return r}let zE={};class Jd extends tA{static create(e){return zE[e]||(zE[e]=new Jd(e)),zE[e]}static resetCache(){zE={},eT={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=Jd.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:t,locale:r}){return XW(e,t,r,this.name)}formatOffset(e,t){return M_(this.offset(e),t)}offset(e){const t=new Date(e);if(isNaN(t))return NaN;const r=rfe(this.name);let[i,s,o,a,l,c,u]=r.formatToParts?ofe(r,t):sfe(r,t);a==="BC"&&(i=-Math.abs(i)+1);const h=g2({year:i,month:s,day:o,hour:l===24?0:l,minute:c,second:u,millisecond:0});let f=+t;const m=f%1e3;return f-=m>=0?m:1e3+m,(h-f)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let C9={};function afe(n,e={}){const t=JSON.stringify([n,e]);let r=C9[t];return r||(r=new Intl.ListFormat(n,e),C9[t]=r),r}let k4={};function B4(n,e={}){const t=JSON.stringify([n,e]);let r=k4[t];return r||(r=new Intl.DateTimeFormat(n,e),k4[t]=r),r}let F4={};function lfe(n,e={}){const t=JSON.stringify([n,e]);let r=F4[t];return r||(r=new Intl.NumberFormat(n,e),F4[t]=r),r}let z4={};function cfe(n,e={}){const{base:t,...r}=e,i=JSON.stringify([n,r]);let s=z4[i];return s||(s=new Intl.RelativeTimeFormat(n,e),z4[i]=s),s}let d_=null;function ufe(){return d_||(d_=new Intl.DateTimeFormat().resolvedOptions().locale,d_)}let w9={};function dfe(n){let e=w9[n];if(!e){const t=new Intl.Locale(n);e="getWeekInfo"in t?t.getWeekInfo():t.weekInfo,w9[n]=e}return e}function hfe(n){const e=n.indexOf("-x-");e!==-1&&(n=n.substring(0,e));const t=n.indexOf("-u-");if(t===-1)return[n];{let r,i;try{r=B4(n).resolvedOptions(),i=n}catch{const l=n.substring(0,t);r=B4(l).resolvedOptions(),i=l}const{numberingSystem:s,calendar:o}=r;return[i,s,o]}}function ffe(n,e,t){return(t||e)&&(n.includes("-u-")||(n+="-u"),t&&(n+=`-ca-${t}`),e&&(n+=`-nu-${e}`)),n}function pfe(n){const e=[];for(let t=1;t<=12;t++){const r=dn.utc(2009,t,1);e.push(n(r))}return e}function mfe(n){const e=[];for(let t=1;t<=7;t++){const r=dn.utc(2016,11,13+t);e.push(n(r))}return e}function UE(n,e,t,r){const i=n.listingMode();return i==="error"?null:i==="en"?t(e):r(e)}function gfe(n){return n.numberingSystem&&n.numberingSystem!=="latn"?!1:n.numberingSystem==="latn"||!n.locale||n.locale.startsWith("en")||new Intl.DateTimeFormat(n.intl).resolvedOptions().numberingSystem==="latn"}class vfe{constructor(e,t,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:i,floor:s,...o}=r;if(!t||Object.keys(o).length>0){const a={useGrouping:!1,...r};r.padTo>0&&(a.minimumIntegerDigits=r.padTo),this.inf=lfe(e,a)}}format(e){if(this.inf){const t=this.floor?Math.floor(e):e;return this.inf.format(t)}else{const t=this.floor?Math.floor(e):JO(e,3);return ps(t,this.padTo)}}}class yfe{constructor(e,t,r){this.opts=r,this.originalZone=void 0;let i;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const o=-1*(e.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&Jd.create(a).valid?(i=a,this.dt=e):(i="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,i=e.zone.name):(i="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const s={...this.opts};s.timeZone=s.timeZone||i,this.dtf=B4(t,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(t=>{if(t.type==="timeZoneName"){const r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...t,value:r}}else return t}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class _fe{constructor(e,t,r){this.opts={style:"long",...r},!t&&KW()&&(this.rtf=cfe(e,r))}format(e,t){return this.rtf?this.rtf.format(e,t):Gfe(t,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}}const Sfe={firstDay:1,minimalDays:4,weekend:[6,7]};class Or{static fromOpts(e){return Or.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,t,r,i,s=!1){const o=e||ji.defaultLocale,a=o||(s?"en-US":ufe()),l=t||ji.defaultNumberingSystem,c=r||ji.defaultOutputCalendar,u=U4(i)||ji.defaultWeekSettings;return new Or(a,l,c,u,o)}static resetCache(){d_=null,k4={},F4={},z4={}}static fromObject({locale:e,numberingSystem:t,outputCalendar:r,weekSettings:i}={}){return Or.create(e,t,r,i)}constructor(e,t,r,i,s){const[o,a,l]=hfe(e);this.locale=o,this.numberingSystem=t||a||null,this.outputCalendar=r||l||null,this.weekSettings=i,this.intl=ffe(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=gfe(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),t=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&t?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:Or.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,U4(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,t=!1){return UE(this,e,tq,()=>{const r=t?{month:e,day:"numeric"}:{month:e},i=t?"format":"standalone";return this.monthsCache[i][e]||(this.monthsCache[i][e]=pfe(s=>this.extract(s,r,"month"))),this.monthsCache[i][e]})}weekdays(e,t=!1){return UE(this,e,iq,()=>{const r=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},i=t?"format":"standalone";return this.weekdaysCache[i][e]||(this.weekdaysCache[i][e]=mfe(s=>this.extract(s,r,"weekday"))),this.weekdaysCache[i][e]})}meridiems(){return UE(this,void 0,()=>sq,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[dn.utc(2016,11,13,9),dn.utc(2016,11,13,19)].map(t=>this.extract(t,e,"dayperiod"))}return this.meridiemCache})}eras(e){return UE(this,e,oq,()=>{const t={era:e};return this.eraCache[e]||(this.eraCache[e]=[dn.utc(-40,1,1),dn.utc(2017,1,1)].map(r=>this.extract(r,t,"era"))),this.eraCache[e]})}extract(e,t,r){const i=this.dtFormatter(e,t),s=i.formatToParts(),o=s.find(a=>a.type.toLowerCase()===r);return o?o.value:null}numberFormatter(e={}){return new vfe(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,t={}){return new yfe(e,this.intl,t)}relFormatter(e={}){return new _fe(this.intl,this.isEnglish(),e)}listFormatter(e={}){return afe(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:YW()?dfe(this.locale):Sfe}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let LM=null;class na extends tA{static get utcInstance(){return LM===null&&(LM=new na(0)),LM}static instance(e){return e===0?na.utcInstance:new na(e)}static parseSpecifier(e){if(e){const t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new na(v2(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${M_(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${M_(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,t){return M_(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class Afe extends tA{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function lf(n,e){if(Pn(n)||n===null)return e;if(n instanceof tA)return n;if(Ife(n)){const t=n.toLowerCase();return t==="default"?e:t==="local"||t==="system"?p2.instance:t==="utc"||t==="gmt"?na.utcInstance:na.parseSpecifier(t)||Jd.create(n)}else return If(n)?na.instance(n):typeof n=="object"&&"offset"in n&&typeof n.offset=="function"?n:new Afe(n)}const $O={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},T9={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Efe=$O.hanidec.replace(/[\[|\]]/g,"").split("");function Cfe(n){let e=parseInt(n,10);if(isNaN(e)){e="";for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);if(n[t].search($O.hanidec)!==-1)e+=Efe.indexOf(n[t]);else for(const i in T9){const[s,o]=T9[i];r>=s&&r<=o&&(e+=r-s)}}return parseInt(e,10)}else return e}let V0={};function wfe(){V0={}}function Ac({numberingSystem:n},e=""){const t=n||"latn";return V0[t]||(V0[t]={}),V0[t][e]||(V0[t][e]=new RegExp(`${$O[t]}${e}`)),V0[t][e]}let x9=()=>Date.now(),I9="system",b9=null,M9=null,R9=null,N9=60,P9,O9=null,ji=class{static get now(){return x9}static set now(e){x9=e}static set defaultZone(e){I9=e}static get defaultZone(){return lf(I9,p2.instance)}static get defaultLocale(){return b9}static set defaultLocale(e){b9=e}static get defaultNumberingSystem(){return M9}static set defaultNumberingSystem(e){M9=e}static get defaultOutputCalendar(){return R9}static set defaultOutputCalendar(e){R9=e}static get defaultWeekSettings(){return O9}static set defaultWeekSettings(e){O9=U4(e)}static get twoDigitCutoffYear(){return N9}static set twoDigitCutoffYear(e){N9=e%100}static get throwOnInvalid(){return P9}static set throwOnInvalid(e){P9=e}static resetCaches(){Or.resetCache(),Jd.resetCache(),dn.resetCache(),wfe()}};class Lc{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const VW=[0,31,59,90,120,151,181,212,243,273,304,334],$W=[0,31,60,91,121,152,182,213,244,274,305,335];function Vl(n,e){return new Lc("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${n}, which is invalid`)}function WO(n,e,t){const r=new Date(Date.UTC(n,e-1,t));n<100&&n>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const i=r.getUTCDay();return i===0?7:i}function WW(n,e,t){return t+(nA(n)?$W:VW)[e-1]}function qW(n,e){const t=nA(n)?$W:VW,r=t.findIndex(s=>s<e),i=e-t[r];return{month:r+1,day:i}}function qO(n,e){return(n-e+7)%7+1}function nx(n,e=4,t=1){const{year:r,month:i,day:s}=n,o=WW(r,i,s),a=qO(WO(r,i,s),t);let l=Math.floor((o-a+14-e)/7),c;return l<1?(c=r-1,l=rS(c,e,t)):l>rS(r,e,t)?(c=r+1,l=1):c=r,{weekYear:c,weekNumber:l,weekday:a,...y2(n)}}function D9(n,e=4,t=1){const{weekYear:r,weekNumber:i,weekday:s}=n,o=qO(WO(r,1,e),t),a=Eg(r);let l=i*7+s-o-7+e,c;l<1?(c=r-1,l+=Eg(c)):l>a?(c=r+1,l-=Eg(r)):c=r;const{month:u,day:d}=qW(c,l);return{year:c,month:u,day:d,...y2(n)}}function kM(n){const{year:e,month:t,day:r}=n,i=WW(e,t,r);return{year:e,ordinal:i,...y2(n)}}function L9(n){const{year:e,ordinal:t}=n,{month:r,day:i}=qW(e,t);return{year:e,month:r,day:i,...y2(n)}}function k9(n,e){if(!Pn(n.localWeekday)||!Pn(n.localWeekNumber)||!Pn(n.localWeekYear)){if(!Pn(n.weekday)||!Pn(n.weekNumber)||!Pn(n.weekYear))throw new og("Cannot mix locale-based week fields with ISO-based week fields");return Pn(n.localWeekday)||(n.weekday=n.localWeekday),Pn(n.localWeekNumber)||(n.weekNumber=n.localWeekNumber),Pn(n.localWeekYear)||(n.weekYear=n.localWeekYear),delete n.localWeekday,delete n.localWeekNumber,delete n.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function Tfe(n,e=4,t=1){const r=m2(n.weekYear),i=$l(n.weekNumber,1,rS(n.weekYear,e,t)),s=$l(n.weekday,1,7);return r?i?s?!1:Vl("weekday",n.weekday):Vl("week",n.weekNumber):Vl("weekYear",n.weekYear)}function xfe(n){const e=m2(n.year),t=$l(n.ordinal,1,Eg(n.year));return e?t?!1:Vl("ordinal",n.ordinal):Vl("year",n.year)}function QW(n){const e=m2(n.year),t=$l(n.month,1,12),r=$l(n.day,1,rx(n.year,n.month));return e?t?r?!1:Vl("day",n.day):Vl("month",n.month):Vl("year",n.year)}function JW(n){const{hour:e,minute:t,second:r,millisecond:i}=n,s=$l(e,0,23)||e===24&&t===0&&r===0&&i===0,o=$l(t,0,59),a=$l(r,0,59),l=$l(i,0,999);return s?o?a?l?!1:Vl("millisecond",i):Vl("second",r):Vl("minute",t):Vl("hour",e)}function Pn(n){return typeof n>"u"}function If(n){return typeof n=="number"}function m2(n){return typeof n=="number"&&n%1===0}function Ife(n){return typeof n=="string"}function bfe(n){return Object.prototype.toString.call(n)==="[object Date]"}function KW(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function YW(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function Mfe(n){return Array.isArray(n)?n:[n]}function B9(n,e,t){if(n.length!==0)return n.reduce((r,i)=>{const s=[e(i),i];return r&&t(r[0],s[0])===r[0]?r:s},null)[1]}function Rfe(n,e){return e.reduce((t,r)=>(t[r]=n[r],t),{})}function Hg(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function U4(n){if(n==null)return null;if(typeof n!="object")throw new xo("Week settings must be an object");if(!$l(n.firstDay,1,7)||!$l(n.minimalDays,1,7)||!Array.isArray(n.weekend)||n.weekend.some(e=>!$l(e,1,7)))throw new xo("Invalid week settings");return{firstDay:n.firstDay,minimalDays:n.minimalDays,weekend:Array.from(n.weekend)}}function $l(n,e,t){return m2(n)&&n>=e&&n<=t}function Nfe(n,e){return n-e*Math.floor(n/e)}function ps(n,e=2){const t=n<0;let r;return t?r="-"+(""+-n).padStart(e,"0"):r=(""+n).padStart(e,"0"),r}function sf(n){if(!(Pn(n)||n===null||n===""))return parseInt(n,10)}function Op(n){if(!(Pn(n)||n===null||n===""))return parseFloat(n)}function QO(n){if(!(Pn(n)||n===null||n==="")){const e=parseFloat("0."+n)*1e3;return Math.floor(e)}}function JO(n,e,t=!1){const r=10**e;return(t?Math.trunc:Math.round)(n*r)/r}function nA(n){return n%4===0&&(n%100!==0||n%400===0)}function Eg(n){return nA(n)?366:365}function rx(n,e){const t=Nfe(e-1,12)+1,r=n+(e-t)/12;return t===2?nA(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][t-1]}function g2(n){let e=Date.UTC(n.year,n.month-1,n.day,n.hour,n.minute,n.second,n.millisecond);return n.year<100&&n.year>=0&&(e=new Date(e),e.setUTCFullYear(n.year,n.month-1,n.day)),+e}function F9(n,e,t){return-qO(WO(n,1,e),t)+e-1}function rS(n,e=4,t=1){const r=F9(n,e,t),i=F9(n+1,e,t);return(Eg(n)-r+i)/7}function j4(n){return n>99?n:n>ji.twoDigitCutoffYear?1900+n:2e3+n}function XW(n,e,t,r=null){const i=new Date(n),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(s.timeZone=r);const o={timeZoneName:e,...s},a=new Intl.DateTimeFormat(t,o).formatToParts(i).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function v2(n,e){let t=parseInt(n,10);Number.isNaN(t)&&(t=0);const r=parseInt(e,10)||0,i=t<0||Object.is(t,-0)?-r:r;return t*60+i}function ZW(n){const e=Number(n);if(typeof n=="boolean"||n===""||Number.isNaN(e))throw new xo(`Invalid unit value ${n}`);return e}function ix(n,e){const t={};for(const r in n)if(Hg(n,r)){const i=n[r];if(i==null)continue;t[e(r)]=ZW(i)}return t}function M_(n,e){const t=Math.trunc(Math.abs(n/60)),r=Math.trunc(Math.abs(n%60)),i=n>=0?"+":"-";switch(e){case"short":return`${i}${ps(t,2)}:${ps(r,2)}`;case"narrow":return`${i}${t}${r>0?`:${r}`:""}`;case"techie":return`${i}${ps(t,2)}${ps(r,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function y2(n){return Rfe(n,["hour","minute","second","millisecond"])}const Pfe=["January","February","March","April","May","June","July","August","September","October","November","December"],eq=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Ofe=["J","F","M","A","M","J","J","A","S","O","N","D"];function tq(n){switch(n){case"narrow":return[...Ofe];case"short":return[...eq];case"long":return[...Pfe];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const nq=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],rq=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Dfe=["M","T","W","T","F","S","S"];function iq(n){switch(n){case"narrow":return[...Dfe];case"short":return[...rq];case"long":return[...nq];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const sq=["AM","PM"],Lfe=["Before Christ","Anno Domini"],kfe=["BC","AD"],Bfe=["B","A"];function oq(n){switch(n){case"narrow":return[...Bfe];case"short":return[...kfe];case"long":return[...Lfe];default:return null}}function Ffe(n){return sq[n.hour<12?0:1]}function zfe(n,e){return iq(e)[n.weekday-1]}function Ufe(n,e){return tq(e)[n.month-1]}function jfe(n,e){return oq(e)[n.year<0?0:1]}function Gfe(n,e,t="always",r=!1){const i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(n)===-1;if(t==="auto"&&s){const d=n==="days";switch(e){case 1:return d?"tomorrow":`next ${i[n][0]}`;case-1:return d?"yesterday":`last ${i[n][0]}`;case 0:return d?"today":`this ${i[n][0]}`}}const o=Object.is(e,-0)||e<0,a=Math.abs(e),l=a===1,c=i[n],u=r?l?c[1]:c[2]||c[1]:l?i[n][0]:n;return o?`${a} ${u} ago`:`in ${a} ${u}`}function z9(n,e){let t="";for(const r of n)r.literal?t+=r.val:t+=e(r.val);return t}const Hfe={D:tx,DD:TW,DDD:xW,DDDD:IW,t:bW,tt:MW,ttt:RW,tttt:NW,T:PW,TT:OW,TTT:DW,TTTT:LW,f:kW,ff:FW,fff:UW,ffff:GW,F:BW,FF:zW,FFF:jW,FFFF:HW};let Oc=class h_{static create(e,t={}){return new h_(e,t)}static parseFormat(e){let t=null,r="",i=!1;const s=[];for(let o=0;o<e.length;o++){const a=e.charAt(o);a==="'"?(r.length>0&&s.push({literal:i||/^\s+$/.test(r),val:r}),t=null,r="",i=!i):i||a===t?r+=a:(r.length>0&&s.push({literal:/^\s+$/.test(r),val:r}),r=a,t=a)}return r.length>0&&s.push({literal:i||/^\s+$/.test(r),val:r}),s}static macroTokenToFormatOpts(e){return Hfe[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...t}).format()}dtFormatter(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t})}formatDateTime(e,t){return this.dtFormatter(e,t).format()}formatDateTimeParts(e,t){return this.dtFormatter(e,t).formatToParts()}formatInterval(e,t){return this.dtFormatter(e.start,t).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t){return this.dtFormatter(e,t).resolvedOptions()}num(e,t=0){if(this.opts.forceSimple)return ps(e,t);const r={...this.opts};return t>0&&(r.padTo=t),this.loc.numberFormatter(r).format(e)}formatDateTimeFromString(e,t){const r=this.loc.listingMode()==="en",i=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(f,m)=>this.loc.extract(e,f,m),o=f=>e.isOffsetFixed&&e.offset===0&&f.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,f.format):"",a=()=>r?Ffe(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(f,m)=>r?Ufe(e,f):s(m?{month:f}:{month:f,day:"numeric"},"month"),c=(f,m)=>r?zfe(e,f):s(m?{weekday:f}:{weekday:f,month:"long",day:"numeric"},"weekday"),u=f=>{const m=h_.macroTokenToFormatOpts(f);return m?this.formatWithSystemDefault(e,m):f},d=f=>r?jfe(e,f):s({era:f},"era"),h=f=>{switch(f){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return a();case"d":return i?s({day:"numeric"},"day"):this.num(e.day);case"dd":return i?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return i?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return i?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return i?s({month:"numeric"},"month"):this.num(e.month);case"MM":return i?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return i?s({year:"numeric"},"year"):this.num(e.year);case"yy":return i?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return i?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return i?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return d("short");case"GG":return d("long");case"GGGGG":return d("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return u(f)}};return z9(h_.parseFormat(t),h)}formatDurationFromString(e,t){const r=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},i=l=>c=>{const u=r(c);return u?this.num(l.get(u),c.length):c},s=h_.parseFormat(t),o=s.reduce((l,{literal:c,val:u})=>c?l:l.concat(u),[]),a=e.shiftTo(...o.map(r).filter(l=>l));return z9(s,i(a))}};const aq=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function fv(...n){const e=n.reduce((t,r)=>t+r.source,"");return RegExp(`^${e}$`)}function pv(...n){return e=>n.reduce(([t,r,i],s)=>{const[o,a,l]=s(e,i);return[{...t,...o},a||r,l]},[{},null,1]).slice(0,2)}function mv(n,...e){if(n==null)return[null,null];for(const[t,r]of e){const i=t.exec(n);if(i)return r(i)}return[null,null]}function lq(...n){return(e,t)=>{const r={};let i;for(i=0;i<n.length;i++)r[n[i]]=sf(e[t+i]);return[r,null,t+i]}}const cq=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Vfe=`(?:${cq.source}?(?:\\[(${aq.source})\\])?)?`,KO=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,uq=RegExp(`${KO.source}${Vfe}`),YO=RegExp(`(?:T${uq.source})?`),$fe=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Wfe=/(\d{4})-?W(\d\d)(?:-?(\d))?/,qfe=/(\d{4})-?(\d{3})/,Qfe=lq("weekYear","weekNumber","weekDay"),Jfe=lq("year","ordinal"),Kfe=/(\d{4})-(\d\d)-(\d\d)/,dq=RegExp(`${KO.source} ?(?:${cq.source}|(${aq.source}))?`),Yfe=RegExp(`(?: ${dq.source})?`);function Cg(n,e,t){const r=n[e];return Pn(r)?t:sf(r)}function Xfe(n,e){return[{year:Cg(n,e),month:Cg(n,e+1,1),day:Cg(n,e+2,1)},null,e+3]}function gv(n,e){return[{hours:Cg(n,e,0),minutes:Cg(n,e+1,0),seconds:Cg(n,e+2,0),milliseconds:QO(n[e+3])},null,e+4]}function rA(n,e){const t=!n[e]&&!n[e+1],r=v2(n[e+1],n[e+2]),i=t?null:na.instance(r);return[{},i,e+3]}function iA(n,e){const t=n[e]?Jd.create(n[e]):null;return[{},t,e+1]}const Zfe=RegExp(`^T?${KO.source}$`),epe=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function tpe(n){const[e,t,r,i,s,o,a,l,c]=n,u=e[0]==="-",d=l&&l[0]==="-",h=(f,m=!1)=>f!==void 0&&(m||f&&u)?-f:f;return[{years:h(Op(t)),months:h(Op(r)),weeks:h(Op(i)),days:h(Op(s)),hours:h(Op(o)),minutes:h(Op(a)),seconds:h(Op(l),l==="-0"),milliseconds:h(QO(c),d)}]}const npe={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function XO(n,e,t,r,i,s,o){const a={year:e.length===2?j4(sf(e)):sf(e),month:eq.indexOf(t)+1,day:sf(r),hour:sf(i),minute:sf(s)};return o&&(a.second=sf(o)),n&&(a.weekday=n.length>3?nq.indexOf(n)+1:rq.indexOf(n)+1),a}const rpe=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function ipe(n){const[,e,t,r,i,s,o,a,l,c,u,d]=n,h=XO(e,i,r,t,s,o,a);let f;return l?f=npe[l]:c?f=0:f=v2(u,d),[h,new na(f)]}function spe(n){return n.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const ope=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,ape=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,lpe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function U9(n){const[,e,t,r,i,s,o,a]=n;return[XO(e,i,r,t,s,o,a),na.utcInstance]}function cpe(n){const[,e,t,r,i,s,o,a]=n;return[XO(e,a,t,r,i,s,o),na.utcInstance]}const upe=fv($fe,YO),dpe=fv(Wfe,YO),hpe=fv(qfe,YO),fpe=fv(uq),hq=pv(Xfe,gv,rA,iA),ppe=pv(Qfe,gv,rA,iA),mpe=pv(Jfe,gv,rA,iA),gpe=pv(gv,rA,iA);function vpe(n){return mv(n,[upe,hq],[dpe,ppe],[hpe,mpe],[fpe,gpe])}function ype(n){return mv(spe(n),[rpe,ipe])}function _pe(n){return mv(n,[ope,U9],[ape,U9],[lpe,cpe])}function Spe(n){return mv(n,[epe,tpe])}const Ape=pv(gv);function Epe(n){return mv(n,[Zfe,Ape])}const Cpe=fv(Kfe,Yfe),wpe=fv(dq),Tpe=pv(gv,rA,iA);function xpe(n){return mv(n,[Cpe,hq],[wpe,Tpe])}const j9="Invalid Duration",fq={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},Ipe={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...fq},Pl=146097/400,y0=146097/4800,bpe={years:{quarters:4,months:12,weeks:Pl/7,days:Pl,hours:Pl*24,minutes:Pl*24*60,seconds:Pl*24*60*60,milliseconds:Pl*24*60*60*1e3},quarters:{months:3,weeks:Pl/28,days:Pl/4,hours:Pl*24/4,minutes:Pl*24*60/4,seconds:Pl*24*60*60/4,milliseconds:Pl*24*60*60*1e3/4},months:{weeks:y0/7,days:y0,hours:y0*24,minutes:y0*24*60,seconds:y0*24*60*60,milliseconds:y0*24*60*60*1e3},...fq},om=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Mpe=om.slice(0).reverse();function Fh(n,e,t=!1){const r={values:t?e.values:{...n.values,...e.values||{}},loc:n.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||n.conversionAccuracy,matrix:e.matrix||n.matrix};return new Sr(r)}function pq(n,e){let t=e.milliseconds??0;for(const r of Mpe.slice(1))e[r]&&(t+=e[r]*n[r].milliseconds);return t}function G9(n,e){const t=pq(n,e)<0?-1:1;om.reduceRight((r,i)=>{if(Pn(e[i]))return r;if(r){const s=e[r]*t,o=n[i][r],a=Math.floor(s/o);e[i]+=a*t,e[r]-=a*o*t}return i},null),om.reduce((r,i)=>{if(Pn(e[i]))return r;if(r){const s=e[r]%1;e[r]-=s,e[i]+=s*n[r][i]}return i},null)}function Rpe(n){const e={};for(const[t,r]of Object.entries(n))r!==0&&(e[t]=r);return e}class Sr{constructor(e){const t=e.conversionAccuracy==="longterm"||!1;let r=t?bpe:Ipe;e.matrix&&(r=e.matrix),this.values=e.values,this.loc=e.loc||Or.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(e,t){return Sr.fromObject({milliseconds:e},t)}static fromObject(e,t={}){if(e==null||typeof e!="object")throw new xo(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new Sr({values:ix(e,Sr.normalizeUnit),loc:Or.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if(If(e))return Sr.fromMillis(e);if(Sr.isDuration(e))return e;if(typeof e=="object")return Sr.fromObject(e);throw new xo(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,t){const[r]=Spe(e);return r?Sr.fromObject(r,t):Sr.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,t){const[r]=Epe(e);return r?Sr.fromObject(r,t):Sr.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,t=null){if(!e)throw new xo("need to specify a reason the Duration is invalid");const r=e instanceof Lc?e:new Lc(e,t);if(ji.throwOnInvalid)throw new efe(r);return new Sr({invalid:r})}static normalizeUnit(e){const t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!t)throw new wW(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,t={}){const r={...t,floor:t.round!==!1&&t.floor!==!1};return this.isValid?Oc.create(this.loc,r).formatDurationFromString(this,e):j9}toHuman(e={}){if(!this.isValid)return j9;const t=om.map(r=>{const i=this.values[r];return Pn(i)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:r.slice(0,-1)}).format(i)}).filter(r=>r);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(t)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=JO(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const t=this.toMillis();return t<0||t>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},dn.fromMillis(t,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?pq(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const t=Sr.fromDurationLike(e),r={};for(const i of om)(Hg(t.values,i)||Hg(this.values,i))&&(r[i]=t.get(i)+this.get(i));return Fh(this,{values:r},!0)}minus(e){if(!this.isValid)return this;const t=Sr.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;const t={};for(const r of Object.keys(this.values))t[r]=ZW(e(this.values[r],r));return Fh(this,{values:t},!0)}get(e){return this[Sr.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const t={...this.values,...ix(e,Sr.normalizeUnit)};return Fh(this,{values:t})}reconfigure({locale:e,numberingSystem:t,conversionAccuracy:r,matrix:i}={}){const o={loc:this.loc.clone({locale:e,numberingSystem:t}),matrix:i,conversionAccuracy:r};return Fh(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return G9(this.matrix,e),Fh(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=Rpe(this.normalize().shiftToAll().toObject());return Fh(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>Sr.normalizeUnit(o));const t={},r={},i=this.toObject();let s;for(const o of om)if(e.indexOf(o)>=0){s=o;let a=0;for(const c in r)a+=this.matrix[c][o]*r[c],r[c]=0;If(i[o])&&(a+=i[o]);const l=Math.trunc(a);t[o]=l,r[o]=(a*1e3-l*1e3)/1e3}else If(i[o])&&(r[o]=i[o]);for(const o in r)r[o]!==0&&(t[s]+=o===s?r[o]:r[o]/this.matrix[s][o]);return G9(this.matrix,t),Fh(this,{values:t},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const t of Object.keys(this.values))e[t]=this.values[t]===0?0:-this.values[t];return Fh(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function t(r,i){return r===void 0||r===0?i===void 0||i===0:r===i}for(const r of om)if(!t(this.values[r],e.values[r]))return!1;return!0}}const _0="Invalid Interval";function Npe(n,e){return!n||!n.isValid?Fi.invalid("missing or invalid start"):!e||!e.isValid?Fi.invalid("missing or invalid end"):e<n?Fi.invalid("end before start",`The end of an interval must be after its start, but you had start=${n.toISO()} and end=${e.toISO()}`):null}class Fi{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,t=null){if(!e)throw new xo("need to specify a reason the Interval is invalid");const r=e instanceof Lc?e:new Lc(e,t);if(ji.throwOnInvalid)throw new Zhe(r);return new Fi({invalid:r})}static fromDateTimes(e,t){const r=Dy(e),i=Dy(t),s=Npe(r,i);return s??new Fi({start:r,end:i})}static after(e,t){const r=Sr.fromDurationLike(t),i=Dy(e);return Fi.fromDateTimes(i,i.plus(r))}static before(e,t){const r=Sr.fromDurationLike(t),i=Dy(e);return Fi.fromDateTimes(i.minus(r),i)}static fromISO(e,t){const[r,i]=(e||"").split("/",2);if(r&&i){let s,o;try{s=dn.fromISO(r,t),o=s.isValid}catch{o=!1}let a,l;try{a=dn.fromISO(i,t),l=a.isValid}catch{l=!1}if(o&&l)return Fi.fromDateTimes(s,a);if(o){const c=Sr.fromISO(i,t);if(c.isValid)return Fi.after(s,c)}else if(l){const c=Sr.fromISO(r,t);if(c.isValid)return Fi.before(a,c)}}return Fi.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",t){if(!this.isValid)return NaN;const r=this.start.startOf(e,t);let i;return t!=null&&t.useLocaleWeeks?i=this.end.reconfigure({locale:r.locale}):i=this.end,i=i.startOf(e,t),Math.floor(i.diff(r,e).get(e))+(i.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:t}={}){return this.isValid?Fi.fromDateTimes(e||this.s,t||this.e):this}splitAt(...e){if(!this.isValid)return[];const t=e.map(Dy).filter(o=>this.contains(o)).sort((o,a)=>o.toMillis()-a.toMillis()),r=[];let{s:i}=this,s=0;for(;i<this.e;){const o=t[s]||this.e,a=+o>+this.e?this.e:o;r.push(Fi.fromDateTimes(i,a)),i=a,s+=1}return r}splitBy(e){const t=Sr.fromDurationLike(e);if(!this.isValid||!t.isValid||t.as("milliseconds")===0)return[];let{s:r}=this,i=1,s;const o=[];for(;r<this.e;){const a=this.start.plus(t.mapUnits(l=>l*i));s=+a>+this.e?this.e:a,o.push(Fi.fromDateTimes(r,s)),r=s,i+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const t=this.s>e.s?this.s:e.s,r=this.e<e.e?this.e:e.e;return t>=r?null:Fi.fromDateTimes(t,r)}union(e){if(!this.isValid)return this;const t=this.s<e.s?this.s:e.s,r=this.e>e.e?this.e:e.e;return Fi.fromDateTimes(t,r)}static merge(e){const[t,r]=e.sort((i,s)=>i.s-s.s).reduce(([i,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[i,s.union(o)]:[i.concat([s]),o]:[i,o],[[],null]);return r&&t.push(r),t}static xor(e){let t=null,r=0;const i=[],s=e.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...s),a=o.sort((l,c)=>l.time-c.time);for(const l of a)r+=l.type==="s"?1:-1,r===1?t=l.time:(t&&+t!=+l.time&&i.push(Fi.fromDateTimes(t,l.time)),t=null);return Fi.merge(i)}difference(...e){return Fi.xor([this].concat(e)).map(t=>this.intersection(t)).filter(t=>t&&!t.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:_0}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=tx,t={}){return this.isValid?Oc.create(this.s.loc.clone(t),e).formatInterval(this):_0}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:_0}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:_0}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:_0}toFormat(e,{separator:t=" – "}={}){return this.isValid?`${this.s.toFormat(e)}${t}${this.e.toFormat(e)}`:_0}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):Sr.invalid(this.invalidReason)}mapEndpoints(e){return Fi.fromDateTimes(e(this.s),e(this.e))}}class jE{static hasDST(e=ji.defaultZone){const t=dn.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return Jd.isValidZone(e)}static normalizeZone(e){return lf(e,ji.defaultZone)}static getStartOfWeek({locale:e=null,locObj:t=null}={}){return(t||Or.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:t=null}={}){return(t||Or.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:t=null}={}){return(t||Or.create(e)).getWeekendDays().slice()}static months(e="long",{locale:t=null,numberingSystem:r=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||Or.create(t,r,s)).months(e)}static monthsFormat(e="long",{locale:t=null,numberingSystem:r=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||Or.create(t,r,s)).months(e,!0)}static weekdays(e="long",{locale:t=null,numberingSystem:r=null,locObj:i=null}={}){return(i||Or.create(t,r,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:t=null,numberingSystem:r=null,locObj:i=null}={}){return(i||Or.create(t,r,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Or.create(e).meridiems()}static eras(e="short",{locale:t=null}={}){return Or.create(t,null,"gregory").eras(e)}static features(){return{relative:KW(),localeWeek:YW()}}}function H9(n,e){const t=i=>i.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=t(e)-t(n);return Math.floor(Sr.fromMillis(r).as("days"))}function Ppe(n,e,t){const r=[["years",(l,c)=>c.year-l.year],["quarters",(l,c)=>c.quarter-l.quarter+(c.year-l.year)*4],["months",(l,c)=>c.month-l.month+(c.year-l.year)*12],["weeks",(l,c)=>{const u=H9(l,c);return(u-u%7)/7}],["days",H9]],i={},s=n;let o,a;for(const[l,c]of r)t.indexOf(l)>=0&&(o=l,i[l]=c(n,e),a=s.plus(i),a>e?(i[l]--,n=s.plus(i),n>e&&(a=n,i[l]--,n=s.plus(i))):n=a);return[n,i,a,o]}function Ope(n,e,t,r){let[i,s,o,a]=Ppe(n,e,t);const l=e-i,c=t.filter(d=>["hours","minutes","seconds","milliseconds"].indexOf(d)>=0);c.length===0&&(o<e&&(o=i.plus({[a]:1})),o!==i&&(s[a]=(s[a]||0)+l/(o-i)));const u=Sr.fromObject(s,r);return c.length>0?Sr.fromMillis(l,r).shiftTo(...c).plus(u):u}const Dpe="missing Intl.DateTimeFormat.formatToParts support";function br(n,e=t=>t){return{regex:n,deser:([t])=>e(Cfe(t))}}const Lpe=String.fromCharCode(160),mq=`[ ${Lpe}]`,gq=new RegExp(mq,"g");function kpe(n){return n.replace(/\./g,"\\.?").replace(gq,mq)}function V9(n){return n.replace(/\./g,"").replace(gq," ").toLowerCase()}function Ec(n,e){return n===null?null:{regex:RegExp(n.map(kpe).join("|")),deser:([t])=>n.findIndex(r=>V9(t)===V9(r))+e}}function $9(n,e){return{regex:n,deser:([,t,r])=>v2(t,r),groups:e}}function GE(n){return{regex:n,deser:([e])=>e}}function Bpe(n){return n.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Fpe(n,e){const t=Ac(e),r=Ac(e,"{2}"),i=Ac(e,"{3}"),s=Ac(e,"{4}"),o=Ac(e,"{6}"),a=Ac(e,"{1,2}"),l=Ac(e,"{1,3}"),c=Ac(e,"{1,6}"),u=Ac(e,"{1,9}"),d=Ac(e,"{2,4}"),h=Ac(e,"{4,6}"),f=v=>({regex:RegExp(Bpe(v.val)),deser:([y])=>y,literal:!0}),g=(v=>{if(n.literal)return f(v);switch(v.val){case"G":return Ec(e.eras("short"),0);case"GG":return Ec(e.eras("long"),0);case"y":return br(c);case"yy":return br(d,j4);case"yyyy":return br(s);case"yyyyy":return br(h);case"yyyyyy":return br(o);case"M":return br(a);case"MM":return br(r);case"MMM":return Ec(e.months("short",!0),1);case"MMMM":return Ec(e.months("long",!0),1);case"L":return br(a);case"LL":return br(r);case"LLL":return Ec(e.months("short",!1),1);case"LLLL":return Ec(e.months("long",!1),1);case"d":return br(a);case"dd":return br(r);case"o":return br(l);case"ooo":return br(i);case"HH":return br(r);case"H":return br(a);case"hh":return br(r);case"h":return br(a);case"mm":return br(r);case"m":return br(a);case"q":return br(a);case"qq":return br(r);case"s":return br(a);case"ss":return br(r);case"S":return br(l);case"SSS":return br(i);case"u":return GE(u);case"uu":return GE(a);case"uuu":return br(t);case"a":return Ec(e.meridiems(),0);case"kkkk":return br(s);case"kk":return br(d,j4);case"W":return br(a);case"WW":return br(r);case"E":case"c":return br(t);case"EEE":return Ec(e.weekdays("short",!1),1);case"EEEE":return Ec(e.weekdays("long",!1),1);case"ccc":return Ec(e.weekdays("short",!0),1);case"cccc":return Ec(e.weekdays("long",!0),1);case"Z":case"ZZ":return $9(new RegExp(`([+-]${a.source})(?::(${r.source}))?`),2);case"ZZZ":return $9(new RegExp(`([+-]${a.source})(${r.source})?`),2);case"z":return GE(/[a-z_+-/]{1,256}?/i);case" ":return GE(/[^\S\n\r]/);default:return f(v)}})(n)||{invalidReason:Dpe};return g.token=n,g}const zpe={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function Upe(n,e,t){const{type:r,value:i}=n;if(r==="literal"){const l=/^\s+$/.test(i);return{literal:!l,val:l?" ":i}}const s=e[r];let o=r;r==="hour"&&(e.hour12!=null?o=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?o="hour12":o="hour24":o=t.hour12?"hour12":"hour24");let a=zpe[o];if(typeof a=="object"&&(a=a[s]),a)return{literal:!1,val:a}}function jpe(n){return[`^${n.map(t=>t.regex).reduce((t,r)=>`${t}(${r.source})`,"")}$`,n]}function Gpe(n,e,t){const r=n.match(e);if(r){const i={};let s=1;for(const o in t)if(Hg(t,o)){const a=t[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(i[a.token.val[0]]=a.deser(r.slice(s,s+l))),s+=l}return[r,i]}else return[r,{}]}function Hpe(n){const e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let t=null,r;return Pn(n.z)||(t=Jd.create(n.z)),Pn(n.Z)||(t||(t=new na(n.Z)),r=n.Z),Pn(n.q)||(n.M=(n.q-1)*3+1),Pn(n.h)||(n.h<12&&n.a===1?n.h+=12:n.h===12&&n.a===0&&(n.h=0)),n.G===0&&n.y&&(n.y=-n.y),Pn(n.u)||(n.S=QO(n.u)),[Object.keys(n).reduce((s,o)=>{const a=e(o);return a&&(s[a]=n[o]),s},{}),t,r]}let BM=null;function Vpe(){return BM||(BM=dn.fromMillis(1555555555555)),BM}function $pe(n,e){if(n.literal)return n;const t=Oc.macroTokenToFormatOpts(n.val),r=Sq(t,e);return r==null||r.includes(void 0)?n:r}function vq(n,e){return Array.prototype.concat(...n.map(t=>$pe(t,e)))}class yq{constructor(e,t){if(this.locale=e,this.format=t,this.tokens=vq(Oc.parseFormat(t),e),this.units=this.tokens.map(r=>Fpe(r,e)),this.disqualifyingUnit=this.units.find(r=>r.invalidReason),!this.disqualifyingUnit){const[r,i]=jpe(this.units);this.regex=RegExp(r,"i"),this.handlers=i}}explainFromTokens(e){if(this.isValid){const[t,r]=Gpe(e,this.regex,this.handlers),[i,s,o]=r?Hpe(r):[null,null,void 0];if(Hg(r,"a")&&Hg(r,"H"))throw new og("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:t,matches:r,result:i,zone:s,specificOffset:o}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function _q(n,e,t){return new yq(n,t).explainFromTokens(e)}function Wpe(n,e,t){const{result:r,zone:i,specificOffset:s,invalidReason:o}=_q(n,e,t);return[r,i,s,o]}function Sq(n,e){if(!n)return null;const r=Oc.create(e,n).dtFormatter(Vpe()),i=r.formatToParts(),s=r.resolvedOptions();return i.map(o=>Upe(o,n,s))}const FM="Invalid DateTime",W9=864e13;function f_(n){return new Lc("unsupported zone",`the zone "${n.name}" is not supported`)}function zM(n){return n.weekData===null&&(n.weekData=nx(n.c)),n.weekData}function UM(n){return n.localWeekData===null&&(n.localWeekData=nx(n.c,n.loc.getMinDaysInFirstWeek(),n.loc.getStartOfWeek())),n.localWeekData}function Dp(n,e){const t={ts:n.ts,zone:n.zone,c:n.c,o:n.o,loc:n.loc,invalid:n.invalid};return new dn({...t,...e,old:t})}function Aq(n,e,t){let r=n-e*60*1e3;const i=t.offset(r);if(e===i)return[r,e];r-=(i-e)*60*1e3;const s=t.offset(r);return i===s?[r,i]:[n-Math.min(i,s)*60*1e3,Math.max(i,s)]}function HE(n,e){n+=e*60*1e3;const t=new Date(n);return{year:t.getUTCFullYear(),month:t.getUTCMonth()+1,day:t.getUTCDate(),hour:t.getUTCHours(),minute:t.getUTCMinutes(),second:t.getUTCSeconds(),millisecond:t.getUTCMilliseconds()}}function tT(n,e,t){return Aq(g2(n),e,t)}function q9(n,e){const t=n.o,r=n.c.year+Math.trunc(e.years),i=n.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...n.c,year:r,month:i,day:Math.min(n.c.day,rx(r,i))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=Sr.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),a=g2(s);let[l,c]=Aq(a,t,n.zone);return o!==0&&(l+=o,c=n.zone.offset(l)),{ts:l,o:c}}function S0(n,e,t,r,i,s){const{setZone:o,zone:a}=t;if(n&&Object.keys(n).length!==0||e){const l=e||a,c=dn.fromObject(n,{...t,zone:l,specificOffset:s});return o?c:c.setZone(a)}else return dn.invalid(new Lc("unparsable",`the input "${i}" can't be parsed as ${r}`))}function VE(n,e,t=!0){return n.isValid?Oc.create(Or.create("en-US"),{allowZ:t,forceSimple:!0}).formatDateTimeFromString(n,e):null}function jM(n,e){const t=n.c.year>9999||n.c.year<0;let r="";return t&&n.c.year>=0&&(r+="+"),r+=ps(n.c.year,t?6:4),e?(r+="-",r+=ps(n.c.month),r+="-",r+=ps(n.c.day)):(r+=ps(n.c.month),r+=ps(n.c.day)),r}function Q9(n,e,t,r,i,s){let o=ps(n.c.hour);return e?(o+=":",o+=ps(n.c.minute),(n.c.millisecond!==0||n.c.second!==0||!t)&&(o+=":")):o+=ps(n.c.minute),(n.c.millisecond!==0||n.c.second!==0||!t)&&(o+=ps(n.c.second),(n.c.millisecond!==0||!r)&&(o+=".",o+=ps(n.c.millisecond,3))),i&&(n.isOffsetFixed&&n.offset===0&&!s?o+="Z":n.o<0?(o+="-",o+=ps(Math.trunc(-n.o/60)),o+=":",o+=ps(Math.trunc(-n.o%60))):(o+="+",o+=ps(Math.trunc(n.o/60)),o+=":",o+=ps(Math.trunc(n.o%60)))),s&&(o+="["+n.zone.ianaName+"]"),o}const Eq={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},qpe={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Qpe={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Cq=["year","month","day","hour","minute","second","millisecond"],Jpe=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],Kpe=["year","ordinal","hour","minute","second","millisecond"];function Ype(n){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[n.toLowerCase()];if(!e)throw new wW(n);return e}function J9(n){switch(n.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return Ype(n)}}function Xpe(n){return rT[n]||(nT===void 0&&(nT=ji.now()),rT[n]=n.offset(nT)),rT[n]}function K9(n,e){const t=lf(e.zone,ji.defaultZone);if(!t.isValid)return dn.invalid(f_(t));const r=Or.fromObject(e);let i,s;if(Pn(n.year))i=ji.now();else{for(const l of Cq)Pn(n[l])&&(n[l]=Eq[l]);const o=QW(n)||JW(n);if(o)return dn.invalid(o);const a=Xpe(t);[i,s]=tT(n,a,t)}return new dn({ts:i,zone:t,loc:r,o:s})}function Y9(n,e,t){const r=Pn(t.round)?!0:t.round,i=(o,a)=>(o=JO(o,r||t.calendary?0:2,!0),e.loc.clone(t).relFormatter(t).format(o,a)),s=o=>t.calendary?e.hasSame(n,o)?0:e.startOf(o).diff(n.startOf(o),o).get(o):e.diff(n,o).get(o);if(t.unit)return i(s(t.unit),t.unit);for(const o of t.units){const a=s(o);if(Math.abs(a)>=1)return i(a,o)}return i(n>e?-0:0,t.units[t.units.length-1])}function X9(n){let e={},t;return n.length>0&&typeof n[n.length-1]=="object"?(e=n[n.length-1],t=Array.from(n).slice(0,n.length-1)):t=Array.from(n),[e,t]}let nT,rT={};class dn{constructor(e){const t=e.zone||ji.defaultZone;let r=e.invalid||(Number.isNaN(e.ts)?new Lc("invalid input"):null)||(t.isValid?null:f_(t));this.ts=Pn(e.ts)?ji.now():e.ts;let i=null,s=null;if(!r)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t))[i,s]=[e.old.c,e.old.o];else{const a=If(e.o)&&!e.old?e.o:t.offset(this.ts);i=HE(this.ts,a),r=Number.isNaN(i.year)?new Lc("invalid input"):null,i=r?null:i,s=r?null:a}this._zone=t,this.loc=e.loc||Or.create(),this.invalid=r,this.weekData=null,this.localWeekData=null,this.c=i,this.o=s,this.isLuxonDateTime=!0}static now(){return new dn({})}static local(){const[e,t]=X9(arguments),[r,i,s,o,a,l,c]=t;return K9({year:r,month:i,day:s,hour:o,minute:a,second:l,millisecond:c},e)}static utc(){const[e,t]=X9(arguments),[r,i,s,o,a,l,c]=t;return e.zone=na.utcInstance,K9({year:r,month:i,day:s,hour:o,minute:a,second:l,millisecond:c},e)}static fromJSDate(e,t={}){const r=bfe(e)?e.valueOf():NaN;if(Number.isNaN(r))return dn.invalid("invalid input");const i=lf(t.zone,ji.defaultZone);return i.isValid?new dn({ts:r,zone:i,loc:Or.fromObject(t)}):dn.invalid(f_(i))}static fromMillis(e,t={}){if(If(e))return e<-W9||e>W9?dn.invalid("Timestamp out of range"):new dn({ts:e,zone:lf(t.zone,ji.defaultZone),loc:Or.fromObject(t)});throw new xo(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,t={}){if(If(e))return new dn({ts:e*1e3,zone:lf(t.zone,ji.defaultZone),loc:Or.fromObject(t)});throw new xo("fromSeconds requires a numerical input")}static fromObject(e,t={}){e=e||{};const r=lf(t.zone,ji.defaultZone);if(!r.isValid)return dn.invalid(f_(r));const i=Or.fromObject(t),s=ix(e,J9),{minDaysInFirstWeek:o,startOfWeek:a}=k9(s,i),l=ji.now(),c=Pn(t.specificOffset)?r.offset(l):t.specificOffset,u=!Pn(s.ordinal),d=!Pn(s.year),h=!Pn(s.month)||!Pn(s.day),f=d||h,m=s.weekYear||s.weekNumber;if((f||u)&&m)throw new og("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(h&&u)throw new og("Can't mix ordinal dates with month/day");const g=m||s.weekday&&!f;let v,y,A=HE(l,c);g?(v=Jpe,y=qpe,A=nx(A,o,a)):u?(v=Kpe,y=Qpe,A=kM(A)):(v=Cq,y=Eq);let C=!1;for(const P of v){const z=s[P];Pn(z)?C?s[P]=y[P]:s[P]=A[P]:C=!0}const T=g?Tfe(s,o,a):u?xfe(s):QW(s),x=T||JW(s);if(x)return dn.invalid(x);const R=g?D9(s,o,a):u?L9(s):s,[N,M]=tT(R,c,r),O=new dn({ts:N,zone:r,o:M,loc:i});return s.weekday&&f&&e.weekday!==O.weekday?dn.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${O.toISO()}`):O.isValid?O:dn.invalid(O.invalid)}static fromISO(e,t={}){const[r,i]=vpe(e);return S0(r,i,t,"ISO 8601",e)}static fromRFC2822(e,t={}){const[r,i]=ype(e);return S0(r,i,t,"RFC 2822",e)}static fromHTTP(e,t={}){const[r,i]=_pe(e);return S0(r,i,t,"HTTP",t)}static fromFormat(e,t,r={}){if(Pn(e)||Pn(t))throw new xo("fromFormat requires an input string and a format");const{locale:i=null,numberingSystem:s=null}=r,o=Or.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0}),[a,l,c,u]=Wpe(o,e,t);return u?dn.invalid(u):S0(a,l,r,`format ${t}`,e,c)}static fromString(e,t,r={}){return dn.fromFormat(e,t,r)}static fromSQL(e,t={}){const[r,i]=xpe(e);return S0(r,i,t,"SQL",e)}static invalid(e,t=null){if(!e)throw new xo("need to specify a reason the DateTime is invalid");const r=e instanceof Lc?e:new Lc(e,t);if(ji.throwOnInvalid)throw new Xhe(r);return new dn({invalid:r})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,t={}){const r=Sq(e,Or.fromObject(t));return r?r.map(i=>i?i.val:null).join(""):null}static expandFormat(e,t={}){return vq(Oc.parseFormat(e),Or.fromObject(t)).map(i=>i.val).join("")}static resetCache(){nT=void 0,rT={}}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?zM(this).weekYear:NaN}get weekNumber(){return this.isValid?zM(this).weekNumber:NaN}get weekday(){return this.isValid?zM(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?UM(this).weekday:NaN}get localWeekNumber(){return this.isValid?UM(this).weekNumber:NaN}get localWeekYear(){return this.isValid?UM(this).weekYear:NaN}get ordinal(){return this.isValid?kM(this.c).ordinal:NaN}get monthShort(){return this.isValid?jE.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?jE.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?jE.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?jE.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,t=6e4,r=g2(this.c),i=this.zone.offset(r-e),s=this.zone.offset(r+e),o=this.zone.offset(r-i*t),a=this.zone.offset(r-s*t);if(o===a)return[this];const l=r-o*t,c=r-a*t,u=HE(l,o),d=HE(c,a);return u.hour===d.hour&&u.minute===d.minute&&u.second===d.second&&u.millisecond===d.millisecond?[Dp(this,{ts:l}),Dp(this,{ts:c})]:[this]}get isInLeapYear(){return nA(this.year)}get daysInMonth(){return rx(this.year,this.month)}get daysInYear(){return this.isValid?Eg(this.year):NaN}get weeksInWeekYear(){return this.isValid?rS(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?rS(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:t,numberingSystem:r,calendar:i}=Oc.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:r,outputCalendar:i}}toUTC(e=0,t={}){return this.setZone(na.instance(e),t)}toLocal(){return this.setZone(ji.defaultZone)}setZone(e,{keepLocalTime:t=!1,keepCalendarTime:r=!1}={}){if(e=lf(e,ji.defaultZone),e.equals(this.zone))return this;if(e.isValid){let i=this.ts;if(t||r){const s=e.offset(this.ts),o=this.toObject();[i]=tT(o,s,e)}return Dp(this,{ts:i,zone:e})}else return dn.invalid(f_(e))}reconfigure({locale:e,numberingSystem:t,outputCalendar:r}={}){const i=this.loc.clone({locale:e,numberingSystem:t,outputCalendar:r});return Dp(this,{loc:i})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const t=ix(e,J9),{minDaysInFirstWeek:r,startOfWeek:i}=k9(t,this.loc),s=!Pn(t.weekYear)||!Pn(t.weekNumber)||!Pn(t.weekday),o=!Pn(t.ordinal),a=!Pn(t.year),l=!Pn(t.month)||!Pn(t.day),c=a||l,u=t.weekYear||t.weekNumber;if((c||o)&&u)throw new og("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&o)throw new og("Can't mix ordinal dates with month/day");let d;s?d=D9({...nx(this.c,r,i),...t},r,i):Pn(t.ordinal)?(d={...this.toObject(),...t},Pn(t.day)&&(d.day=Math.min(rx(d.year,d.month),d.day))):d=L9({...kM(this.c),...t});const[h,f]=tT(d,this.o,this.zone);return Dp(this,{ts:h,o:f})}plus(e){if(!this.isValid)return this;const t=Sr.fromDurationLike(e);return Dp(this,q9(this,t))}minus(e){if(!this.isValid)return this;const t=Sr.fromDurationLike(e).negate();return Dp(this,q9(this,t))}startOf(e,{useLocaleWeeks:t=!1}={}){if(!this.isValid)return this;const r={},i=Sr.normalizeUnit(e);switch(i){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break}if(i==="weeks")if(t){const s=this.loc.getStartOfWeek(),{weekday:o}=this;o<s&&(r.weekNumber=this.weekNumber-1),r.weekday=s}else r.weekday=1;if(i==="quarters"){const s=Math.ceil(this.month/3);r.month=(s-1)*3+1}return this.set(r)}endOf(e,t){return this.isValid?this.plus({[e]:1}).startOf(e,t).minus(1):this}toFormat(e,t={}){return this.isValid?Oc.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):FM}toLocaleString(e=tx,t={}){return this.isValid?Oc.create(this.loc.clone(t),e).formatDateTime(this):FM}toLocaleParts(e={}){return this.isValid?Oc.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:r=!1,includeOffset:i=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const o=e==="extended";let a=jM(this,o);return a+="T",a+=Q9(this,o,t,r,i,s),a}toISODate({format:e="extended"}={}){return this.isValid?jM(this,e==="extended"):null}toISOWeekDate(){return VE(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:r=!0,includePrefix:i=!1,extendedZone:s=!1,format:o="extended"}={}){return this.isValid?(i?"T":"")+Q9(this,o==="extended",t,e,r,s):null}toRFC2822(){return VE(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return VE(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?jM(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:r=!0}={}){let i="HH:mm:ss.SSS";return(t||e)&&(r&&(i+=" "),t?i+="z":e&&(i+="ZZ")),VE(this,i,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():FM}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,t="milliseconds",r={}){if(!this.isValid||!e.isValid)return Sr.invalid("created by diffing an invalid DateTime");const i={locale:this.locale,numberingSystem:this.numberingSystem,...r},s=Mfe(t).map(Sr.normalizeUnit),o=e.valueOf()>this.valueOf(),a=o?this:e,l=o?e:this,c=Ope(a,l,s,i);return o?c.negate():c}diffNow(e="milliseconds",t={}){return this.diff(dn.now(),e,t)}until(e){return this.isValid?Fi.fromDateTimes(this,e):this}hasSame(e,t,r){if(!this.isValid)return!1;const i=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(t,r)<=i&&i<=s.endOf(t,r)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const t=e.base||dn.fromObject({},{zone:this.zone}),r=e.padding?this<t?-e.padding:e.padding:0;let i=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(i=e.unit,s=void 0),Y9(t,this.plus(r),{...e,numeric:"always",units:i,unit:s})}toRelativeCalendar(e={}){return this.isValid?Y9(e.base||dn.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(dn.isDateTime))throw new xo("min requires all arguments be DateTimes");return B9(e,t=>t.valueOf(),Math.min)}static max(...e){if(!e.every(dn.isDateTime))throw new xo("max requires all arguments be DateTimes");return B9(e,t=>t.valueOf(),Math.max)}static fromFormatExplain(e,t,r={}){const{locale:i=null,numberingSystem:s=null}=r,o=Or.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});return _q(o,e,t)}static fromStringExplain(e,t,r={}){return dn.fromFormatExplain(e,t,r)}static buildFormatParser(e,t={}){const{locale:r=null,numberingSystem:i=null}=t,s=Or.fromOpts({locale:r,numberingSystem:i,defaultToEN:!0});return new yq(s,e)}static fromFormatParser(e,t,r={}){if(Pn(e)||Pn(t))throw new xo("fromFormatParser requires an input string and a format parser");const{locale:i=null,numberingSystem:s=null}=r,o=Or.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});if(!o.equals(t.locale))throw new xo(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${t.locale}`);const{result:a,zone:l,specificOffset:c,invalidReason:u}=t.explainFromTokens(e);return u?dn.invalid(u):S0(a,l,r,`format ${t.format}`,e,c)}static get DATE_SHORT(){return tx}static get DATE_MED(){return TW}static get DATE_MED_WITH_WEEKDAY(){return tfe}static get DATE_FULL(){return xW}static get DATE_HUGE(){return IW}static get TIME_SIMPLE(){return bW}static get TIME_WITH_SECONDS(){return MW}static get TIME_WITH_SHORT_OFFSET(){return RW}static get TIME_WITH_LONG_OFFSET(){return NW}static get TIME_24_SIMPLE(){return PW}static get TIME_24_WITH_SECONDS(){return OW}static get TIME_24_WITH_SHORT_OFFSET(){return DW}static get TIME_24_WITH_LONG_OFFSET(){return LW}static get DATETIME_SHORT(){return kW}static get DATETIME_SHORT_WITH_SECONDS(){return BW}static get DATETIME_MED(){return FW}static get DATETIME_MED_WITH_SECONDS(){return zW}static get DATETIME_MED_WITH_WEEKDAY(){return nfe}static get DATETIME_FULL(){return UW}static get DATETIME_FULL_WITH_SECONDS(){return jW}static get DATETIME_HUGE(){return GW}static get DATETIME_HUGE_WITH_SECONDS(){return HW}}function Dy(n){if(dn.isDateTime(n))return n;if(n&&n.valueOf&&If(n.valueOf()))return dn.fromJSDate(n);if(n&&typeof n=="object")return dn.fromObject(n);throw new xo(`Unknown datetime argument: ${n}, of type ${typeof n}`)}let Zpe={data:""},eme=n=>typeof window=="object"?((n?n.querySelector("#_goober"):window._goober)||Object.assign((n||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:n||Zpe,tme=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,nme=/\/\*[^]*?\*\/|  +/g,Z9=/\n+/g,cf=(n,e)=>{let t="",r="",i="";for(let s in n){let o=n[s];s[0]=="@"?s[1]=="i"?t=s+" "+o+";":r+=s[1]=="f"?cf(o,s):s+"{"+cf(o,s[1]=="k"?"":e)+"}":typeof o=="object"?r+=cf(o,e?e.replace(/([^,])+/g,a=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):s):o!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=cf.p?cf.p(s,o):s+":"+o+";")}return t+(e&&i?e+"{"+i+"}":i)+r},dd={},wq=n=>{if(typeof n=="object"){let e="";for(let t in n)e+=t+wq(n[t]);return e}return n},rme=(n,e,t,r,i)=>{let s=wq(n),o=dd[s]||(dd[s]=(l=>{let c=0,u=11;for(;c<l.length;)u=101*u+l.charCodeAt(c++)>>>0;return"go"+u})(s));if(!dd[o]){let l=s!==n?n:(c=>{let u,d,h=[{}];for(;u=tme.exec(c.replace(nme,""));)u[4]?h.shift():u[3]?(d=u[3].replace(Z9," ").trim(),h.unshift(h[0][d]=h[0][d]||{})):h[0][u[1]]=u[2].replace(Z9," ").trim();return h[0]})(n);dd[o]=cf(i?{["@keyframes "+o]:l}:l,t?"":"."+o)}let a=t&&dd.g?dd.g:null;return t&&(dd.g=dd[o]),((l,c,u,d)=>{d?c.data=c.data.replace(d,l):c.data.indexOf(l)===-1&&(c.data=u?l+c.data:c.data+l)})(dd[o],e,r,a),o},ime=(n,e,t)=>n.reduce((r,i,s)=>{let o=e[s];if(o&&o.call){let a=o(t),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=l?"."+l:a&&typeof a=="object"?a.props?"":cf(a,""):a===!1?"":a}return r+i+(o??"")},"");function _2(n){let e=this||{},t=n.call?n(e.p):n;return rme(t.unshift?t.raw?ime(t,[].slice.call(arguments,1),e.p):t.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):t,eme(e.target),e.g,e.o,e.k)}let Tq,G4,H4;_2.bind({g:1});let Kd=_2.bind({k:1});function sme(n,e,t,r){cf.p=e,Tq=n,G4=t,H4=r}function Zf(n,e){let t=this||{};return function(){let r=arguments;function i(s,o){let a=Object.assign({},s),l=a.className||i.className;t.p=Object.assign({theme:G4&&G4()},a),t.o=/ *go\d+/.test(l),a.className=_2.apply(t,r)+(l?" "+l:""),e&&(a.ref=o);let c=n;return n[0]&&(c=a.as||n,delete a.as),H4&&c[0]&&H4(a),Tq(c,a)}return e?e(i):i}}var ome=n=>typeof n=="function",iS=(n,e)=>ome(n)?n(e):n,ame=(()=>{let n=0;return()=>(++n).toString()})(),xq=(()=>{let n;return()=>{if(n===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");n=!e||e.matches}return n}})(),lme=20,iT=new Map,cme=1e3,eB=n=>{if(iT.has(n))return;let e=setTimeout(()=>{iT.delete(n),qm({type:4,toastId:n})},cme);iT.set(n,e)},ume=n=>{let e=iT.get(n);e&&clearTimeout(e)},V4=(n,e)=>{switch(e.type){case 0:return{...n,toasts:[e.toast,...n.toasts].slice(0,lme)};case 1:return e.toast.id&&ume(e.toast.id),{...n,toasts:n.toasts.map(s=>s.id===e.toast.id?{...s,...e.toast}:s)};case 2:let{toast:t}=e;return n.toasts.find(s=>s.id===t.id)?V4(n,{type:1,toast:t}):V4(n,{type:0,toast:t});case 3:let{toastId:r}=e;return r?eB(r):n.toasts.forEach(s=>{eB(s.id)}),{...n,toasts:n.toasts.map(s=>s.id===r||r===void 0?{...s,visible:!1}:s)};case 4:return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(s=>s.id!==e.toastId)};case 5:return{...n,pausedAt:e.time};case 6:let i=e.time-(n.pausedAt||0);return{...n,pausedAt:void 0,toasts:n.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+i}))}}},sT=[],oT={toasts:[],pausedAt:void 0},qm=n=>{oT=V4(oT,n),sT.forEach(e=>{e(oT)})},dme={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Iq=(n={})=>{let[e,t]=D.useState(oT);D.useEffect(()=>(sT.push(t),()=>{let i=sT.indexOf(t);i>-1&&sT.splice(i,1)}),[e]);let r=e.toasts.map(i=>{var s,o;return{...n,...n[i.type],...i,duration:i.duration||((s=n[i.type])==null?void 0:s.duration)||(n==null?void 0:n.duration)||dme[i.type],style:{...n.style,...(o=n[i.type])==null?void 0:o.style,...i.style}}});return{...e,toasts:r}},hme=(n,e="blank",t)=>({createdAt:Date.now(),visible:!0,type:e,ariaProps:{role:"status","aria-live":"polite"},message:n,pauseDuration:0,...t,id:(t==null?void 0:t.id)||ame()}),sA=n=>(e,t)=>{let r=hme(e,n,t);return qm({type:2,toast:r}),r.id},Da=(n,e)=>sA("blank")(n,e);Da.error=sA("error");Da.success=sA("success");Da.loading=sA("loading");Da.custom=sA("custom");Da.dismiss=n=>{qm({type:3,toastId:n})};Da.remove=n=>qm({type:4,toastId:n});Da.promise=(n,e,t)=>{let r=Da.loading(e.loading,{...t,...t==null?void 0:t.loading});return n.then(i=>(Da.success(iS(e.success,i),{id:r,...t,...t==null?void 0:t.success}),i)).catch(i=>{Da.error(iS(e.error,i),{id:r,...t,...t==null?void 0:t.error})}),n};var fme=(n,e)=>{qm({type:1,toast:{id:n,height:e}})},pme=()=>{qm({type:5,time:Date.now()})},bq=n=>{let{toasts:e,pausedAt:t}=Iq(n);D.useEffect(()=>{if(t)return;let s=Date.now(),o=e.map(a=>{if(a.duration===1/0)return;let l=(a.duration||0)+a.pauseDuration-(s-a.createdAt);if(l<0){a.visible&&Da.dismiss(a.id);return}return setTimeout(()=>Da.dismiss(a.id),l)});return()=>{o.forEach(a=>a&&clearTimeout(a))}},[e,t]);let r=D.useCallback(()=>{t&&qm({type:6,time:Date.now()})},[t]),i=D.useCallback((s,o)=>{let{reverseOrder:a=!1,gutter:l=8,defaultPosition:c}=o||{},u=e.filter(f=>(f.position||c)===(s.position||c)&&f.height),d=u.findIndex(f=>f.id===s.id),h=u.filter((f,m)=>m<d&&f.visible).length;return u.filter(f=>f.visible).slice(...a?[h+1]:[0,h]).reduce((f,m)=>f+(m.height||0)+l,0)},[e]);return{toasts:e,handlers:{updateHeight:fme,startPause:pme,endPause:r,calculateOffset:i}}},mme=Kd`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,gme=Kd`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,vme=Kd`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Mq=Zf("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${mme} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${gme} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${n=>n.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${vme} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,yme=Kd`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Rq=Zf("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${n=>n.secondary||"#e0e0e0"};
  border-right-color: ${n=>n.primary||"#616161"};
  animation: ${yme} 1s linear infinite;
`,_me=Kd`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Sme=Kd`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Nq=Zf("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${_me} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Sme} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${n=>n.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Ame=Zf("div")`
  position: absolute;
`,Eme=Zf("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Cme=Kd`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,wme=Zf("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Cme} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Pq=({toast:n})=>{let{icon:e,type:t,iconTheme:r}=n;return e!==void 0?typeof e=="string"?D.createElement(wme,null,e):e:t==="blank"?null:D.createElement(Eme,null,D.createElement(Rq,{...r}),t!=="loading"&&D.createElement(Ame,null,t==="error"?D.createElement(Mq,{...r}):D.createElement(Nq,{...r})))},Tme=n=>`
0% {transform: translate3d(0,${n*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,xme=n=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${n*-150}%,-1px) scale(.6); opacity:0;}
`,Ime="0%{opacity:0;} 100%{opacity:1;}",bme="0%{opacity:1;} 100%{opacity:0;}",Mme=Zf("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Rme=Zf("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Nme=(n,e)=>{let t=n.includes("top")?1:-1,[r,i]=xq()?[Ime,bme]:[Tme(t),xme(t)];return{animation:e?`${Kd(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Kd(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Oq=D.memo(({toast:n,position:e,style:t,children:r})=>{let i=n.height?Nme(n.position||e||"top-center",n.visible):{opacity:0},s=D.createElement(Pq,{toast:n}),o=D.createElement(Rme,{...n.ariaProps},iS(n.message,n));return D.createElement(Mme,{className:n.className,style:{...i,...t,...n.style}},typeof r=="function"?r({icon:s,message:o}):D.createElement(D.Fragment,null,s,o))});sme(D.createElement);var Pme=({id:n,className:e,style:t,onHeightUpdate:r,children:i})=>{let s=D.useCallback(o=>{if(o){let a=()=>{let l=o.getBoundingClientRect().height;r(n,l)};a(),new MutationObserver(a).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[n,r]);return D.createElement("div",{ref:s,className:e,style:t},i)},Ome=(n,e)=>{let t=n.includes("top"),r=t?{top:0}:{bottom:0},i=n.includes("center")?{justifyContent:"center"}:n.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:xq()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(t?1:-1)}px)`,...r,...i}},Dme=_2`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,$E=16,Dq=({reverseOrder:n,position:e="top-center",toastOptions:t,gutter:r,children:i,containerStyle:s,containerClassName:o})=>{let{toasts:a,handlers:l}=bq(t);return D.createElement("div",{style:{position:"fixed",zIndex:9999,top:$E,left:$E,right:$E,bottom:$E,pointerEvents:"none",...s},className:o,onMouseEnter:l.startPause,onMouseLeave:l.endPause},a.map(c=>{let u=c.position||e,d=l.calculateOffset(c,{reverseOrder:n,gutter:r,defaultPosition:e}),h=Ome(u,d);return D.createElement(Pme,{id:c.id,key:c.id,onHeightUpdate:l.updateHeight,className:c.visible?Dme:"",style:h},c.type==="custom"?iS(c.message,c):i?i(c):D.createElement(Oq,{toast:c,position:u}))}))},kn=Da;const Lme=Object.freeze(Object.defineProperty({__proto__:null,CheckmarkIcon:Nq,ErrorIcon:Mq,LoaderIcon:Rq,ToastBar:Oq,ToastIcon:Pq,Toaster:Dq,default:kn,resolveValue:iS,toast:Da,useToaster:bq,useToasterStore:Iq},Symbol.toStringTag,{value:"Module"})),S2=typeof window>"u"||typeof document>"u";let Zn=S2?D.useEffect:D.useLayoutEffect;function za(n){let e=D.useRef(n);return Zn(()=>{e.current=n},[n]),e}function oA(n,e){let[t,r]=D.useState(n),i=za(n);return Zn(()=>r(i.current),[i,r,...e]),t}function aA(n){typeof queueMicrotask=="function"?queueMicrotask(n):Promise.resolve().then(n).catch(e=>setTimeout(()=>{throw e}))}function Ua(){let n=[],e=[],t={enqueue(r){e.push(r)},addEventListener(r,i,s,o){return r.addEventListener(i,s,o),t.add(()=>r.removeEventListener(i,s,o))},requestAnimationFrame(...r){let i=requestAnimationFrame(...r);return t.add(()=>cancelAnimationFrame(i))},nextFrame(...r){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...r))},setTimeout(...r){let i=setTimeout(...r);return t.add(()=>clearTimeout(i))},microTask(...r){let i={current:!0};return aA(()=>{i.current&&r[0]()}),t.add(()=>{i.current=!1})},add(r){return n.push(r),()=>{let i=n.indexOf(r);if(i>=0){let[s]=n.splice(i,1);s()}}},dispose(){for(let r of n.splice(0))r()},async workQueue(){for(let r of e.splice(0))await r()}};return t}function Yd(){let[n]=D.useState(Ua);return D.useEffect(()=>()=>n.dispose(),[n]),n}let gt=function(n){let e=za(n);return ht.useCallback((...t)=>e.current(...t),[e])},GM={serverHandoffComplete:!1};function vv(){let[n,e]=D.useState(GM.serverHandoffComplete);return D.useEffect(()=>{n!==!0&&e(!0)},[n]),D.useEffect(()=>{GM.serverHandoffComplete===!1&&(GM.serverHandoffComplete=!0)},[]),n}var tB;let kme=0;function nB(){return++kme}let Tr=(tB=ht.useId)!=null?tB:function(){let n=vv(),[e,t]=ht.useState(n?nB:null);return Zn(()=>{e===null&&t(nB())},[e]),e!=null?""+e:void 0};function On(n,e,...t){if(n in e){let i=e[n];return typeof i=="function"?i(...t):i}let r=new Error(`Tried to handle "${n}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(i=>`"${i}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,On),r}function ju(n){return S2?null:n instanceof Node?n.ownerDocument:n!=null&&n.hasOwnProperty("current")&&n.current instanceof Node?n.current.ownerDocument:document}let $4=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(n=>`${n}:not([tabindex='-1'])`).join(",");var Xr=(n=>(n[n.First=1]="First",n[n.Previous=2]="Previous",n[n.Next=4]="Next",n[n.Last=8]="Last",n[n.WrapAround=16]="WrapAround",n[n.NoScroll=32]="NoScroll",n))(Xr||{}),ff=(n=>(n[n.Error=0]="Error",n[n.Overflow=1]="Overflow",n[n.Success=2]="Success",n[n.Underflow=3]="Underflow",n))(ff||{}),Bme=(n=>(n[n.Previous=-1]="Previous",n[n.Next=1]="Next",n))(Bme||{});function A2(n=document.body){return n==null?[]:Array.from(n.querySelectorAll($4))}var lA=(n=>(n[n.Strict=0]="Strict",n[n.Loose=1]="Loose",n))(lA||{});function cA(n,e=0){var t;return n===((t=ju(n))==null?void 0:t.body)?!1:On(e,{0(){return n.matches($4)},1(){let r=n;for(;r!==null;){if(r.matches($4))return!0;r=r.parentElement}return!1}})}function Lq(n){let e=ju(n);Ua().nextFrame(()=>{e&&!cA(e.activeElement,0)&&pm(n)})}function pm(n){n==null||n.focus({preventScroll:!0})}let Fme=["textarea","input"].join(",");function zme(n){var e,t;return(t=(e=n==null?void 0:n.matches)==null?void 0:e.call(n,Fme))!=null?t:!1}function Mm(n,e=t=>t){return n.slice().sort((t,r)=>{let i=e(t),s=e(r);if(i===null||s===null)return 0;let o=i.compareDocumentPosition(s);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Ume(n,e){return Us(A2(),e,!0,n)}function Us(n,e,t=!0,r=null){let i=Array.isArray(n)?n.length>0?n[0].ownerDocument:document:n.ownerDocument,s=Array.isArray(n)?t?Mm(n):n:A2(n);r=r??i.activeElement;let o=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),a=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,s.indexOf(r))-1;if(e&4)return Math.max(0,s.indexOf(r))+1;if(e&8)return s.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),l=e&32?{preventScroll:!0}:{},c=0,u=s.length,d;do{if(c>=u||c+u<=0)return 0;let h=a+c;if(e&16)h=(h+u)%u;else{if(h<0)return 3;if(h>=u)return 1}d=s[h],d==null||d.focus(l),c+=o}while(d!==i.activeElement);return e&6&&zme(d)&&d.select(),d.hasAttribute("tabindex")||d.setAttribute("tabindex","0"),2}function HM(n,e,t){let r=za(e);D.useEffect(()=>{function i(s){r.current(s)}return document.addEventListener(n,i,t),()=>document.removeEventListener(n,i,t)},[n,t])}function uA(n,e,t=!0){let r=D.useRef(!1);D.useEffect(()=>{requestAnimationFrame(()=>{r.current=t})},[t]);function i(o,a){if(!r.current||o.defaultPrevented)return;let l=function u(d){return typeof d=="function"?u(d()):Array.isArray(d)||d instanceof Set?d:[d]}(n),c=a(o);if(c!==null&&c.getRootNode().contains(c)){for(let u of l){if(u===null)continue;let d=u instanceof HTMLElement?u:u.current;if(d!=null&&d.contains(c))return}return!cA(c,lA.Loose)&&c.tabIndex!==-1&&o.preventDefault(),e(o,c)}}let s=D.useRef(null);HM("mousedown",o=>{var a,l;r.current&&(s.current=((l=(a=o.composedPath)==null?void 0:a.call(o))==null?void 0:l[0])||o.target)},!0),HM("click",o=>{!s.current||(i(o,()=>s.current),s.current=null)},!0),HM("blur",o=>i(o,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function rB(n){var e;if(n.type)return n.type;let t=(e=n.as)!=null?e:"button";if(typeof t=="string"&&t.toLowerCase()==="button")return"button"}function Qm(n,e){let[t,r]=D.useState(()=>rB(n));return Zn(()=>{r(rB(n))},[n.type,n.as]),Zn(()=>{t||!e.current||e.current instanceof HTMLButtonElement&&!e.current.hasAttribute("type")&&r("button")},[t,e]),t}let kq=Symbol();function ZO(n,e=!0){return Object.assign(n,{[kq]:e})}function Vn(...n){let e=D.useRef(n);D.useEffect(()=>{e.current=n},[n]);let t=gt(r=>{for(let i of e.current)i!=null&&(typeof i=="function"?i(r):i.current=r)});return n.every(r=>r==null||(r==null?void 0:r[kq]))?void 0:t}function e6({container:n,accept:e,walk:t,enabled:r=!0}){let i=D.useRef(e),s=D.useRef(t);D.useEffect(()=>{i.current=e,s.current=t},[e,t]),Zn(()=>{if(!n||!r)return;let o=ju(n);if(!o)return;let a=i.current,l=s.current,c=Object.assign(d=>a(d),{acceptNode:a}),u=o.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,c,!1);for(;u.nextNode();)l(u.currentNode)},[n,r,i,s])}function jme(n){throw new Error("Unexpected object: "+n)}var hr=(n=>(n[n.First=0]="First",n[n.Previous=1]="Previous",n[n.Next=2]="Next",n[n.Last=3]="Last",n[n.Specific=4]="Specific",n[n.Nothing=5]="Nothing",n))(hr||{});function t6(n,e){let t=e.resolveItems();if(t.length<=0)return null;let r=e.resolveActiveIndex(),i=r??-1,s=(()=>{switch(n.focus){case 0:return t.findIndex(o=>!e.resolveDisabled(o));case 1:{let o=t.slice().reverse().findIndex((a,l,c)=>i!==-1&&c.length-l-1>=i?!1:!e.resolveDisabled(a));return o===-1?o:t.length-1-o}case 2:return t.findIndex((o,a)=>a<=i?!1:!e.resolveDisabled(o));case 3:{let o=t.slice().reverse().findIndex(a=>!e.resolveDisabled(a));return o===-1?o:t.length-1-o}case 4:return t.findIndex(o=>e.resolveId(o)===n.id);case 5:return null;default:jme(n)}})();return s===-1?r:s}var Vs=(n=>(n[n.None=0]="None",n[n.RenderStrategy=1]="RenderStrategy",n[n.Static=2]="Static",n))(Vs||{}),Pd=(n=>(n[n.Unmount=0]="Unmount",n[n.Hidden=1]="Hidden",n))(Pd||{});function Bn({ourProps:n,theirProps:e,slot:t,defaultTag:r,features:i,visible:s=!0,name:o}){let a=Bq(e,n);if(s)return WE(a,t,r,o);let l=i??0;if(l&2){let{static:c=!1,...u}=a;if(c)return WE(u,t,r,o)}if(l&1){let{unmount:c=!0,...u}=a;return On(c?0:1,{0(){return null},1(){return WE({...u,hidden:!0,style:{display:"none"}},t,r,o)}})}return WE(a,t,r,o)}function WE(n,e={},t,r){let{as:i=t,children:s,refName:o="ref",...a}=VM(n,["unmount","static"]),l=n.ref!==void 0?{[o]:n.ref}:{},c=typeof s=="function"?s(e):s;a.className&&typeof a.className=="function"&&(a.className=a.className(e));let u={};if(e){let d=!1,h=[];for(let[f,m]of Object.entries(e))typeof m=="boolean"&&(d=!0),m===!0&&h.push(f);d&&(u["data-headlessui-state"]=h.join(" "))}if(i===D.Fragment&&Object.keys(Vg(a)).length>0){if(!D.isValidElement(c)||Array.isArray(c)&&c.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(a).map(d=>`  - ${d}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(d=>`  - ${d}`).join(`
`)].join(`
`));return D.cloneElement(c,Object.assign({},Bq(c.props,Vg(VM(a,["ref"]))),u,l,Gme(c.ref,l.ref)))}return D.createElement(i,Object.assign({},VM(a,["ref"]),i!==D.Fragment&&l,i!==D.Fragment&&u),c)}function Gme(...n){return{ref:n.every(e=>e==null)?void 0:e=>{for(let t of n)t!=null&&(typeof t=="function"?t(e):t.current=e)}}}function Bq(...n){if(n.length===0)return{};if(n.length===1)return n[0];let e={},t={};for(let r of n)for(let i in r)i.startsWith("on")&&typeof r[i]=="function"?(t[i]!=null||(t[i]=[]),t[i].push(r[i])):e[i]=r[i];if(e.disabled||e["aria-disabled"])return Object.assign(e,Object.fromEntries(Object.keys(t).map(r=>[r,void 0])));for(let r in t)Object.assign(e,{[r](i,...s){let o=t[r];for(let a of o){if((i instanceof Event||(i==null?void 0:i.nativeEvent)instanceof Event)&&i.defaultPrevented)return;a(i,...s)}}});return e}function Fn(n){var e;return Object.assign(D.forwardRef(n),{displayName:(e=n.displayName)!=null?e:n.name})}function Vg(n){let e=Object.assign({},n);for(let t in e)e[t]===void 0&&delete e[t];return e}function VM(n,e=[]){let t=Object.assign({},n);for(let r of e)r in t&&delete t[r];return t}function ku(n){let e=n.parentElement,t=null;for(;e&&!(e instanceof HTMLFieldSetElement);)e instanceof HTMLLegendElement&&(t=e),e=e.parentElement;let r=(e==null?void 0:e.getAttribute("disabled"))==="";return r&&Hme(t)?!1:r}function Hme(n){if(!n)return!1;let e=n.previousElementSibling;for(;e!==null;){if(e instanceof HTMLLegendElement)return!1;e=e.previousElementSibling}return!0}function E2(n={},e=null,t=[]){for(let[r,i]of Object.entries(n))zq(t,Fq(e,r),i);return t}function Fq(n,e){return n?n+"["+e+"]":e}function zq(n,e,t){if(Array.isArray(t))for(let[r,i]of t.entries())zq(n,Fq(e,r.toString()),i);else t instanceof Date?n.push([e,t.toISOString()]):typeof t=="boolean"?n.push([e,t?"1":"0"]):typeof t=="string"?n.push([e,t]):typeof t=="number"?n.push([e,`${t}`]):t==null?n.push([e,""]):E2(t,e,n)}function Uq(n){var e;let t=(e=n==null?void 0:n.form)!=null?e:n.closest("form");if(t){for(let r of t.elements)if(r.tagName==="INPUT"&&r.type==="submit"||r.tagName==="BUTTON"&&r.type==="submit"||r.nodeName==="INPUT"&&r.type==="image"){r.click();return}}}let Vme="div";var ec=(n=>(n[n.None=1]="None",n[n.Focusable=2]="Focusable",n[n.Hidden=4]="Hidden",n))(ec||{});let tc=Fn(function(n,e){let{features:t=1,...r}=n,i={ref:e,"aria-hidden":(t&2)===2?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(t&4)===4&&(t&2)!==2&&{display:"none"}}};return Bn({ourProps:i,theirProps:r,slot:{},defaultTag:Vme,name:"Hidden"})}),n6=D.createContext(null);n6.displayName="OpenClosedContext";var Mi=(n=>(n[n.Open=0]="Open",n[n.Closed=1]="Closed",n))(Mi||{});function ch(){return D.useContext(n6)}function yv({value:n,children:e}){return ht.createElement(n6.Provider,{value:n},e)}var bt=(n=>(n.Space=" ",n.Enter="Enter",n.Escape="Escape",n.Backspace="Backspace",n.Delete="Delete",n.ArrowLeft="ArrowLeft",n.ArrowUp="ArrowUp",n.ArrowRight="ArrowRight",n.ArrowDown="ArrowDown",n.Home="Home",n.End="End",n.PageUp="PageUp",n.PageDown="PageDown",n.Tab="Tab",n))(bt||{});function C2(n,e,t){let[r,i]=D.useState(t),s=n!==void 0,o=D.useRef(s),a=D.useRef(!1),l=D.useRef(!1);return s&&!o.current&&!a.current?(a.current=!0,o.current=s,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")):!s&&o.current&&!l.current&&(l.current=!0,o.current=s,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")),[s?n:r,gt(c=>(s||i(c),e==null?void 0:e(c)))]}function r6(n,e){let t=D.useRef([]),r=gt(n);D.useEffect(()=>{let i=[...t.current];for(let[s,o]of e.entries())if(t.current[s]!==o){let a=r(e,i);return t.current=e,a}},[r,...e])}var $me=(n=>(n[n.Open=0]="Open",n[n.Closed=1]="Closed",n))($me||{}),Wme=(n=>(n[n.Single=0]="Single",n[n.Multi=1]="Multi",n))(Wme||{}),qme=(n=>(n[n.Pointer=0]="Pointer",n[n.Other=1]="Other",n))(qme||{}),Qme=(n=>(n[n.OpenCombobox=0]="OpenCombobox",n[n.CloseCombobox=1]="CloseCombobox",n[n.GoToOption=2]="GoToOption",n[n.RegisterOption=3]="RegisterOption",n[n.UnregisterOption=4]="UnregisterOption",n[n.RegisterLabel=5]="RegisterLabel",n))(Qme||{});function $M(n,e=t=>t){let t=n.activeOptionIndex!==null?n.options[n.activeOptionIndex]:null,r=Mm(e(n.options.slice()),s=>s.dataRef.current.domRef.current),i=t?r.indexOf(t):null;return i===-1&&(i=null),{options:r,activeOptionIndex:i}}let Jme={1(n){return n.dataRef.current.disabled||n.comboboxState===1?n:{...n,activeOptionIndex:null,comboboxState:1}},0(n){if(n.dataRef.current.disabled||n.comboboxState===0)return n;let e=n.activeOptionIndex,{isSelected:t}=n.dataRef.current,r=n.options.findIndex(i=>t(i.dataRef.current.value));return r!==-1&&(e=r),{...n,comboboxState:0,activeOptionIndex:e}},2(n,e){var t;if(n.dataRef.current.disabled||n.dataRef.current.optionsRef.current&&!n.dataRef.current.optionsPropsRef.current.static&&n.comboboxState===1)return n;let r=$M(n);if(r.activeOptionIndex===null){let s=r.options.findIndex(o=>!o.dataRef.current.disabled);s!==-1&&(r.activeOptionIndex=s)}let i=t6(e,{resolveItems:()=>r.options,resolveActiveIndex:()=>r.activeOptionIndex,resolveId:s=>s.id,resolveDisabled:s=>s.dataRef.current.disabled});return{...n,...r,activeOptionIndex:i,activationTrigger:(t=e.trigger)!=null?t:1}},3:(n,e)=>{let t={id:e.id,dataRef:e.dataRef},r=$M(n,s=>[...s,t]);n.activeOptionIndex===null&&n.dataRef.current.isSelected(e.dataRef.current.value)&&(r.activeOptionIndex=r.options.indexOf(t));let i={...n,...r,activationTrigger:1};return n.dataRef.current.__demoMode&&n.dataRef.current.value===void 0&&(i.activeOptionIndex=0),i},4:(n,e)=>{let t=$M(n,r=>{let i=r.findIndex(s=>s.id===e.id);return i!==-1&&r.splice(i,1),r});return{...n,...t,activationTrigger:1}},5:(n,e)=>({...n,labelId:e.id})},i6=D.createContext(null);i6.displayName="ComboboxActionsContext";function dA(n){let e=D.useContext(i6);if(e===null){let t=new Error(`<${n} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,dA),t}return e}let s6=D.createContext(null);s6.displayName="ComboboxDataContext";function _v(n){let e=D.useContext(s6);if(e===null){let t=new Error(`<${n} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,_v),t}return e}function Kme(n,e){return On(e.type,Jme,n,e)}let Yme=D.Fragment;function Xme(n,e){let{value:t,defaultValue:r,onChange:i,name:s,by:o=(Q,Y)=>Q===Y,disabled:a=!1,__demoMode:l=!1,nullable:c=!1,multiple:u=!1,...d}=n,[h,f]=C2(t,i,r),[m,g]=D.useReducer(Kme,{dataRef:D.createRef(),comboboxState:l?0:1,options:[],activeOptionIndex:null,activationTrigger:1,labelId:null}),v=D.useRef(!1),y=D.useRef({static:!1,hold:!1}),A=D.useRef(null),C=D.useRef(null),T=D.useRef(null),x=D.useRef(null),R=gt(typeof o=="string"?(Q,Y)=>{let ae=o;return(Q==null?void 0:Q[ae])===(Y==null?void 0:Y[ae])}:o),N=D.useCallback(Q=>On(M.mode,{1:()=>h.some(Y=>R(Y,Q)),0:()=>R(h,Q)}),[h]),M=D.useMemo(()=>({...m,optionsPropsRef:y,labelRef:A,inputRef:C,buttonRef:T,optionsRef:x,value:h,disabled:a,mode:u?1:0,get activeOptionIndex(){if(v.current&&m.activeOptionIndex===null&&m.options.length>0){let Q=m.options.findIndex(Y=>!Y.dataRef.current.disabled);if(Q!==-1)return Q}return m.activeOptionIndex},compare:R,isSelected:N,nullable:c,__demoMode:l}),[h,a,u,c,l,m]);Zn(()=>{m.dataRef.current=M},[M]),uA([M.buttonRef,M.inputRef,M.optionsRef],()=>g({type:1}),M.comboboxState===0);let O=D.useMemo(()=>({open:M.comboboxState===0,disabled:a,activeIndex:M.activeOptionIndex,activeOption:M.activeOptionIndex===null?null:M.options[M.activeOptionIndex].dataRef.current.value,value:h}),[M,a,h]),P=gt(Q=>{let Y=M.options.find(ae=>ae.id===Q);!Y||se(Y.dataRef.current.value)}),z=gt(()=>{if(M.activeOptionIndex!==null){let{dataRef:Q,id:Y}=M.options[M.activeOptionIndex];se(Q.current.value),g({type:2,focus:hr.Specific,id:Y})}}),V=gt(()=>{g({type:0}),v.current=!0}),$=gt(()=>{g({type:1}),v.current=!1}),B=gt((Q,Y,ae)=>(v.current=!1,Q===hr.Specific?g({type:2,focus:hr.Specific,id:Y,trigger:ae}):g({type:2,focus:Q,trigger:ae}))),q=gt((Q,Y)=>(g({type:3,id:Q,dataRef:Y}),()=>g({type:4,id:Q}))),K=gt(Q=>(g({type:5,id:Q}),()=>g({type:5,id:null}))),se=gt(Q=>On(M.mode,{0(){return f==null?void 0:f(Q)},1(){let Y=M.value.slice(),ae=Y.findIndex(fe=>R(fe,Q));return ae===-1?Y.push(Q):Y.splice(ae,1),f==null?void 0:f(Y)}})),W=D.useMemo(()=>({onChange:se,registerOption:q,registerLabel:K,goToOption:B,closeCombobox:$,openCombobox:V,selectActiveOption:z,selectOption:P}),[]),ee=e===null?{}:{ref:e};return ht.createElement(i6.Provider,{value:W},ht.createElement(s6.Provider,{value:M},ht.createElement(yv,{value:On(M.comboboxState,{0:Mi.Open,1:Mi.Closed})},s!=null&&h!=null&&E2({[s]:h}).map(([Q,Y])=>ht.createElement(tc,{features:ec.Hidden,...Vg({key:Q,as:"input",type:"hidden",hidden:!0,readOnly:!0,name:Q,value:Y})})),Bn({ourProps:ee,theirProps:d,slot:O,defaultTag:Yme,name:"Combobox"}))))}let Zme=Fn(Xme),e0e="input",t0e=Fn(function(n,e){var t,r;let{value:i,onChange:s,displayValue:o,type:a="text",...l}=n,c=_v("Combobox.Input"),u=dA("Combobox.Input"),d=Vn(c.inputRef,e),h=`headlessui-combobox-input-${Tr()}`,f=Yd(),m=!1;function g(O){var P;let z=c.inputRef.current;if(!z||z.value===O)return;let V=Object.getOwnPropertyDescriptor(z.constructor.prototype,"value");(P=V==null?void 0:V.set)==null||P.call(z,O),m=!0,z.dispatchEvent(new Event("input",{bubbles:!0})),z.value=O,m=!1}let v=D.useMemo(()=>{var O;return typeof o=="function"?(O=o(c.value))!=null?O:"":typeof c.value=="string"?c.value:""},[c.value]);r6(([O,P],[z,V])=>{!c.inputRef.current||(V===0&&P===1?g(O):O!==z&&(c.inputRef.current.value=O))},[v,c.comboboxState]);let y=D.useRef(!1),A=gt(()=>{y.current=!0}),C=gt(()=>{setTimeout(()=>{y.current=!1})}),T=gt(O=>{switch(O.key){case bt.Backspace:case bt.Delete:if(c.mode!==0||!c.nullable)return;let P=O.currentTarget;f.requestAnimationFrame(()=>{P.value===""&&(u.onChange(null),c.optionsRef.current&&(c.optionsRef.current.scrollTop=0),u.goToOption(hr.Nothing))});break;case bt.Enter:if(c.comboboxState!==0||y.current)return;if(O.preventDefault(),O.stopPropagation(),c.activeOptionIndex===null){u.closeCombobox();return}u.selectActiveOption(),c.mode===0&&u.closeCombobox();break;case bt.ArrowDown:return O.preventDefault(),O.stopPropagation(),On(c.comboboxState,{0:()=>{u.goToOption(hr.Next)},1:()=>{u.openCombobox()}});case bt.ArrowUp:return O.preventDefault(),O.stopPropagation(),On(c.comboboxState,{0:()=>{u.goToOption(hr.Previous)},1:()=>{u.openCombobox(),f.nextFrame(()=>{c.value||u.goToOption(hr.Last)})}});case bt.Home:case bt.PageUp:return O.preventDefault(),O.stopPropagation(),u.goToOption(hr.First);case bt.End:case bt.PageDown:return O.preventDefault(),O.stopPropagation(),u.goToOption(hr.Last);case bt.Escape:return c.comboboxState!==0?void 0:(O.preventDefault(),c.optionsRef.current&&!c.optionsPropsRef.current.static&&O.stopPropagation(),u.closeCombobox());case bt.Tab:if(c.comboboxState!==0)return;c.mode===0&&u.selectActiveOption(),u.closeCombobox();break}}),x=gt(O=>{m||u.openCombobox(),s==null||s(O)}),R=oA(()=>{if(c.labelId)return[c.labelId].join(" ")},[c.labelId]),N=D.useMemo(()=>({open:c.comboboxState===0,disabled:c.disabled}),[c]),M={ref:d,id:h,role:"combobox",type:a,"aria-controls":(t=c.optionsRef.current)==null?void 0:t.id,"aria-expanded":c.disabled?void 0:c.comboboxState===0,"aria-activedescendant":c.activeOptionIndex===null||(r=c.options[c.activeOptionIndex])==null?void 0:r.id,"aria-multiselectable":c.mode===1?!0:void 0,"aria-labelledby":R,disabled:c.disabled,onCompositionStart:A,onCompositionEnd:C,onKeyDown:T,onChange:x};return Bn({ourProps:M,theirProps:l,slot:N,defaultTag:e0e,name:"Combobox.Input"})}),n0e="button",r0e=Fn(function(n,e){var t;let r=_v("Combobox.Button"),i=dA("Combobox.Button"),s=Vn(r.buttonRef,e),o=`headlessui-combobox-button-${Tr()}`,a=Yd(),l=gt(m=>{switch(m.key){case bt.ArrowDown:return m.preventDefault(),m.stopPropagation(),r.comboboxState===1&&i.openCombobox(),a.nextFrame(()=>{var g;return(g=r.inputRef.current)==null?void 0:g.focus({preventScroll:!0})});case bt.ArrowUp:return m.preventDefault(),m.stopPropagation(),r.comboboxState===1&&(i.openCombobox(),a.nextFrame(()=>{r.value||i.goToOption(hr.Last)})),a.nextFrame(()=>{var g;return(g=r.inputRef.current)==null?void 0:g.focus({preventScroll:!0})});case bt.Escape:return r.comboboxState!==0?void 0:(m.preventDefault(),r.optionsRef.current&&!r.optionsPropsRef.current.static&&m.stopPropagation(),i.closeCombobox(),a.nextFrame(()=>{var g;return(g=r.inputRef.current)==null?void 0:g.focus({preventScroll:!0})}));default:return}}),c=gt(m=>{if(ku(m.currentTarget))return m.preventDefault();r.comboboxState===0?i.closeCombobox():(m.preventDefault(),i.openCombobox()),a.nextFrame(()=>{var g;return(g=r.inputRef.current)==null?void 0:g.focus({preventScroll:!0})})}),u=oA(()=>{if(r.labelId)return[r.labelId,o].join(" ")},[r.labelId,o]),d=D.useMemo(()=>({open:r.comboboxState===0,disabled:r.disabled,value:r.value}),[r]),h=n,f={ref:s,id:o,type:Qm(n,r.buttonRef),tabIndex:-1,"aria-haspopup":!0,"aria-controls":(t=r.optionsRef.current)==null?void 0:t.id,"aria-expanded":r.disabled?void 0:r.comboboxState===0,"aria-labelledby":u,disabled:r.disabled,onClick:c,onKeyDown:l};return Bn({ourProps:f,theirProps:h,slot:d,defaultTag:n0e,name:"Combobox.Button"})}),i0e="label",s0e=Fn(function(n,e){let t=_v("Combobox.Label"),r=`headlessui-combobox-label-${Tr()}`,i=dA("Combobox.Label"),s=Vn(t.labelRef,e);Zn(()=>i.registerLabel(r),[r]);let o=gt(()=>{var l;return(l=t.inputRef.current)==null?void 0:l.focus({preventScroll:!0})}),a=D.useMemo(()=>({open:t.comboboxState===0,disabled:t.disabled}),[t]);return Bn({ourProps:{ref:s,id:r,onClick:o},theirProps:n,slot:a,defaultTag:i0e,name:"Combobox.Label"})}),o0e="ul",a0e=Vs.RenderStrategy|Vs.Static,l0e=Fn(function(n,e){var t;let{hold:r=!1,...i}=n,s=_v("Combobox.Options"),o=Vn(s.optionsRef,e),a=`headlessui-combobox-options-${Tr()}`,l=ch(),c=(()=>l!==null?l===Mi.Open:s.comboboxState===0)();Zn(()=>{var f;s.optionsPropsRef.current.static=(f=n.static)!=null?f:!1},[s.optionsPropsRef,n.static]),Zn(()=>{s.optionsPropsRef.current.hold=r},[s.optionsPropsRef,r]),e6({container:s.optionsRef.current,enabled:s.comboboxState===0,accept(f){return f.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:f.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(f){f.setAttribute("role","none")}});let u=oA(()=>{var f,m;return(m=s.labelId)!=null?m:(f=s.buttonRef.current)==null?void 0:f.id},[s.labelId,s.buttonRef.current]),d=D.useMemo(()=>({open:s.comboboxState===0}),[s]),h={"aria-activedescendant":s.activeOptionIndex===null||(t=s.options[s.activeOptionIndex])==null?void 0:t.id,"aria-labelledby":u,role:"listbox",id:a,ref:o};return Bn({ourProps:h,theirProps:i,slot:d,defaultTag:o0e,features:a0e,visible:c,name:"Combobox.Options"})}),c0e="li",u0e=Fn(function(n,e){var t,r;let{disabled:i=!1,value:s,...o}=n,a=_v("Combobox.Option"),l=dA("Combobox.Option"),c=`headlessui-combobox-option-${Tr()}`,u=a.activeOptionIndex!==null?a.options[a.activeOptionIndex].id===c:!1,d=a.isSelected(s),h=D.useRef(null),f=za({disabled:i,value:s,domRef:h,textValue:(r=(t=h.current)==null?void 0:t.textContent)==null?void 0:r.toLowerCase()}),m=Vn(e,h),g=gt(()=>l.selectOption(c));Zn(()=>l.registerOption(c,f),[f,c]);let v=D.useRef(!a.__demoMode);Zn(()=>{if(!a.__demoMode)return;let R=Ua();return R.requestAnimationFrame(()=>{v.current=!0}),R.dispose},[]),Zn(()=>{if(a.comboboxState!==0||!u||!v.current||a.activationTrigger===0)return;let R=Ua();return R.requestAnimationFrame(()=>{var N,M;(M=(N=h.current)==null?void 0:N.scrollIntoView)==null||M.call(N,{block:"nearest"})}),R.dispose},[h,u,a.comboboxState,a.activationTrigger,a.activeOptionIndex]);let y=gt(R=>{if(i)return R.preventDefault();g(),a.mode===0&&l.closeCombobox()}),A=gt(()=>{if(i)return l.goToOption(hr.Nothing);l.goToOption(hr.Specific,c)}),C=gt(()=>{i||u||l.goToOption(hr.Specific,c,0)}),T=gt(()=>{i||!u||a.optionsPropsRef.current.hold||l.goToOption(hr.Nothing)}),x=D.useMemo(()=>({active:u,selected:d,disabled:i}),[u,d,i]);return Bn({ourProps:{id:c,ref:m,role:"option",tabIndex:i===!0?void 0:-1,"aria-disabled":i===!0?!0:void 0,"aria-selected":d,disabled:void 0,onClick:y,onFocus:A,onPointerMove:C,onMouseMove:C,onPointerLeave:T,onMouseLeave:T},theirProps:o,slot:x,defaultTag:c0e,name:"Combobox.Option"})}),p_=Object.assign(Zme,{Input:t0e,Button:r0e,Label:s0e,Options:l0e,Option:u0e});function d0e(n,e,t){let r=za(e);D.useEffect(()=>{function i(s){r.current(s)}return window.addEventListener(n,i,t),()=>window.removeEventListener(n,i,t)},[n,t])}var Od=(n=>(n[n.Forwards=0]="Forwards",n[n.Backwards=1]="Backwards",n))(Od||{});function o6(){let n=D.useRef(0);return d0e("keydown",e=>{e.key==="Tab"&&(n.current=e.shiftKey?1:0)},!0),n}function w2(){let n=D.useRef(!1);return Zn(()=>(n.current=!0,()=>{n.current=!1}),[]),n}function ep(...n){return D.useMemo(()=>ju(...n),[...n])}function T2(n,e,t,r){let i=za(t);D.useEffect(()=>{n=n??window;function s(o){i.current(o)}return n.addEventListener(e,s,r),()=>n.removeEventListener(e,s,r)},[n,e,r])}let h0e="div";var jq=(n=>(n[n.None=1]="None",n[n.InitialFocus=2]="InitialFocus",n[n.TabLock=4]="TabLock",n[n.FocusLock=8]="FocusLock",n[n.RestoreFocus=16]="RestoreFocus",n[n.All=30]="All",n))(jq||{});let $0=Object.assign(Fn(function(n,e){let t=D.useRef(null),r=Vn(t,e),{initialFocus:i,containers:s,features:o=30,...a}=n;vv()||(o=1);let l=ep(t);f0e({ownerDocument:l},!!(o&16));let c=p0e({ownerDocument:l,container:t,initialFocus:i},!!(o&2));m0e({ownerDocument:l,container:t,containers:s,previousActiveElement:c},!!(o&8));let u=o6(),d=gt(()=>{let f=t.current;!f||On(u.current,{[Od.Forwards]:()=>Us(f,Xr.First),[Od.Backwards]:()=>Us(f,Xr.Last)})}),h={ref:r};return ht.createElement(ht.Fragment,null,!!(o&4)&&ht.createElement(tc,{as:"button",type:"button",onFocus:d,features:ec.Focusable}),Bn({ourProps:h,theirProps:a,defaultTag:h0e,name:"FocusTrap"}),!!(o&4)&&ht.createElement(tc,{as:"button",type:"button",onFocus:d,features:ec.Focusable}))}),{features:jq});function f0e({ownerDocument:n},e){let t=D.useRef(null);T2(n==null?void 0:n.defaultView,"focusout",i=>{!e||t.current||(t.current=i.target)},!0),r6(()=>{e||((n==null?void 0:n.activeElement)===(n==null?void 0:n.body)&&pm(t.current),t.current=null)},[e]);let r=D.useRef(!1);D.useEffect(()=>(r.current=!1,()=>{r.current=!0,aA(()=>{!r.current||(pm(t.current),t.current=null)})}),[])}function p0e({ownerDocument:n,container:e,initialFocus:t},r){let i=D.useRef(null),s=w2();return r6(()=>{if(!r)return;let o=e.current;!o||aA(()=>{if(!s.current)return;let a=n==null?void 0:n.activeElement;if(t!=null&&t.current){if((t==null?void 0:t.current)===a){i.current=a;return}}else if(o.contains(a)){i.current=a;return}t!=null&&t.current?pm(t.current):Us(o,Xr.First)===ff.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),i.current=n==null?void 0:n.activeElement})},[r]),i}function m0e({ownerDocument:n,container:e,containers:t,previousActiveElement:r},i){let s=w2();T2(n==null?void 0:n.defaultView,"focus",o=>{if(!i||!s.current)return;let a=new Set(t==null?void 0:t.current);a.add(e);let l=r.current;if(!l)return;let c=o.target;c&&c instanceof HTMLElement?g0e(a,c)?(r.current=c,pm(c)):(o.preventDefault(),o.stopPropagation(),pm(l)):pm(r.current)},!0)}function g0e(n,e){var t;for(let r of n)if((t=r.current)!=null&&t.contains(e))return!0;return!1}let A0=new Set,Xh=new Map;function iB(n){n.setAttribute("aria-hidden","true"),n.inert=!0}function sB(n){let e=Xh.get(n);!e||(e["aria-hidden"]===null?n.removeAttribute("aria-hidden"):n.setAttribute("aria-hidden",e["aria-hidden"]),n.inert=e.inert)}function v0e(n,e=!0){Zn(()=>{if(!e||!n.current)return;let t=n.current,r=ju(t);if(r){A0.add(t);for(let i of Xh.keys())i.contains(t)&&(sB(i),Xh.delete(i));return r.querySelectorAll("body > *").forEach(i=>{if(i instanceof HTMLElement){for(let s of A0)if(i.contains(s))return;A0.size===1&&(Xh.set(i,{"aria-hidden":i.getAttribute("aria-hidden"),inert:i.inert}),iB(i))}}),()=>{if(A0.delete(t),A0.size>0)r.querySelectorAll("body > *").forEach(i=>{if(i instanceof HTMLElement&&!Xh.has(i)){for(let s of A0)if(i.contains(s))return;Xh.set(i,{"aria-hidden":i.getAttribute("aria-hidden"),inert:i.inert}),iB(i)}});else for(let i of Xh.keys())sB(i),Xh.delete(i)}}},[e])}let Gq=D.createContext(!1);function y0e(){return D.useContext(Gq)}function W4(n){return ht.createElement(Gq.Provider,{value:n.force},n.children)}function _0e(n){let e=y0e(),t=D.useContext(Hq),r=ep(n),[i,s]=D.useState(()=>{if(!e&&t!==null||S2)return null;let o=r==null?void 0:r.getElementById("headlessui-portal-root");if(o)return o;if(r===null)return null;let a=r.createElement("div");return a.setAttribute("id","headlessui-portal-root"),r.body.appendChild(a)});return D.useEffect(()=>{i!==null&&(r!=null&&r.body.contains(i)||r==null||r.body.appendChild(i))},[i,r]),D.useEffect(()=>{e||t!==null&&s(t.current)},[t,s,e]),i}let S0e=D.Fragment,A0e=Fn(function(n,e){let t=n,r=D.useRef(null),i=Vn(ZO(u=>{r.current=u}),e),s=ep(r),o=_0e(r),[a]=D.useState(()=>{var u;return S2?null:(u=s==null?void 0:s.createElement("div"))!=null?u:null}),l=vv(),c=D.useRef(!1);return Zn(()=>{if(c.current=!1,!(!o||!a))return o.contains(a)||(a.setAttribute("data-headlessui-portal",""),o.appendChild(a)),()=>{c.current=!0,aA(()=>{var u;!c.current||!o||!a||(o.removeChild(a),o.childNodes.length<=0&&((u=o.parentElement)==null||u.removeChild(o)))})}},[o,a]),l?!o||!a?null:Ag.createPortal(Bn({ourProps:{ref:i},theirProps:t,defaultTag:S0e,name:"Portal"}),a):null}),E0e=D.Fragment,Hq=D.createContext(null),C0e=Fn(function(n,e){let{target:t,...r}=n,i={ref:Vn(e)};return ht.createElement(Hq.Provider,{value:t},Bn({ourProps:i,theirProps:r,defaultTag:E0e,name:"Popover.Group"}))}),sx=Object.assign(A0e,{Group:C0e}),Vq=D.createContext(null);function $q(){let n=D.useContext(Vq);if(n===null){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,$q),e}return n}function x2(){let[n,e]=D.useState([]);return[n.length>0?n.join(" "):void 0,D.useMemo(()=>function(t){let r=gt(s=>(e(o=>[...o,s]),()=>e(o=>{let a=o.slice(),l=a.indexOf(s);return l!==-1&&a.splice(l,1),a}))),i=D.useMemo(()=>({register:r,slot:t.slot,name:t.name,props:t.props}),[r,t.slot,t.name,t.props]);return ht.createElement(Vq.Provider,{value:i},t.children)},[e])]}let w0e="p",a6=Fn(function(n,e){let t=$q(),r=`headlessui-description-${Tr()}`,i=Vn(e);Zn(()=>t.register(r),[r,t.register]);let s=n,o={ref:i,...t.props,id:r};return Bn({ourProps:o,theirProps:s,slot:t.slot||{},defaultTag:w0e,name:t.name||"Description"})}),l6=D.createContext(()=>{});l6.displayName="StackContext";var q4=(n=>(n[n.Add=0]="Add",n[n.Remove=1]="Remove",n))(q4||{});function T0e(){return D.useContext(l6)}function x0e({children:n,onUpdate:e,type:t,element:r,enabled:i}){let s=T0e(),o=gt((...a)=>{e==null||e(...a),s(...a)});return Zn(()=>{let a=i===void 0||i===!0;return a&&o(0,t,r),()=>{a&&o(1,t,r)}},[o,t,r,i]),ht.createElement(l6.Provider,{value:o},n)}function I0e(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}var b0e=(n=>(n[n.Open=0]="Open",n[n.Closed=1]="Closed",n))(b0e||{}),M0e=(n=>(n[n.SetTitleId=0]="SetTitleId",n))(M0e||{});let R0e={0(n,e){return n.titleId===e.id?n:{...n,titleId:e.id}}},ox=D.createContext(null);ox.displayName="DialogContext";function hA(n){let e=D.useContext(ox);if(e===null){let t=new Error(`<${n} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,hA),t}return e}function N0e(n,e){D.useEffect(()=>{var t;if(!e||!n)return;let r=Ua();function i(a,l,c){let u=a.style.getPropertyValue(l);return Object.assign(a.style,{[l]:c}),r.add(()=>{Object.assign(a.style,{[l]:u})})}let s=n.documentElement,o=((t=n.defaultView)!=null?t:window).innerWidth-s.clientWidth;if(i(s,"overflow","hidden"),o>0){let a=s.clientWidth-s.offsetWidth,l=o-a;i(s,"paddingRight",`${l}px`)}if(I0e()){let a=window.pageYOffset;i(s,"position","fixed"),i(s,"marginTop",`-${a}px`),i(s,"width","100%"),r.add(()=>window.scrollTo(0,a))}return r.dispose},[n,e])}function P0e(n,e){return On(e.type,R0e,n,e)}let O0e="div",D0e=Vs.RenderStrategy|Vs.Static,L0e=Fn(function(n,e){let{open:t,onClose:r,initialFocus:i,__demoMode:s=!1,...o}=n,[a,l]=D.useState(0),c=ch();t===void 0&&c!==null&&(t=On(c,{[Mi.Open]:!0,[Mi.Closed]:!1}));let u=D.useRef(new Set),d=D.useRef(null),h=Vn(d,e),f=D.useRef(null),m=ep(d),g=n.hasOwnProperty("open")||c!==null,v=n.hasOwnProperty("onClose");if(!g&&!v)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!g)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!v)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(typeof t!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${t}`);if(typeof r!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${r}`);let y=t?0:1,[A,C]=D.useReducer(P0e,{titleId:null,descriptionId:null,panelRef:D.createRef()}),T=gt(()=>r(!1)),x=gt(K=>C({type:0,id:K})),R=vv()?s?!1:y===0:!1,N=a>1,M=D.useContext(ox)!==null,O=N?"parent":"leaf";v0e(d,N?R:!1),uA(()=>{var K,se;return[...Array.from((K=m==null?void 0:m.querySelectorAll("body > *, [data-headlessui-portal]"))!=null?K:[]).filter(W=>!(!(W instanceof HTMLElement)||W.contains(f.current)||A.panelRef.current&&W.contains(A.panelRef.current))),(se=A.panelRef.current)!=null?se:d.current]},T,R&&!N),T2(m==null?void 0:m.defaultView,"keydown",K=>{K.defaultPrevented||K.key===bt.Escape&&y===0&&(N||(K.preventDefault(),K.stopPropagation(),T()))}),N0e(m,y===0&&!M),D.useEffect(()=>{if(y!==0||!d.current)return;let K=new IntersectionObserver(se=>{for(let W of se)W.boundingClientRect.x===0&&W.boundingClientRect.y===0&&W.boundingClientRect.width===0&&W.boundingClientRect.height===0&&T()});return K.observe(d.current),()=>K.disconnect()},[y,d,T]);let[P,z]=x2(),V=`headlessui-dialog-${Tr()}`,$=D.useMemo(()=>[{dialogState:y,close:T,setTitleId:x},A],[y,A,T,x]),B=D.useMemo(()=>({open:y===0}),[y]),q={ref:h,id:V,role:"dialog","aria-modal":y===0?!0:void 0,"aria-labelledby":A.titleId,"aria-describedby":P};return ht.createElement(x0e,{type:"Dialog",enabled:y===0,element:d,onUpdate:gt((K,se,W)=>{se==="Dialog"&&On(K,{[q4.Add](){u.current.add(W),l(ee=>ee+1)},[q4.Remove](){u.current.add(W),l(ee=>ee-1)}})})},ht.createElement(W4,{force:!0},ht.createElement(sx,null,ht.createElement(ox.Provider,{value:$},ht.createElement(sx.Group,{target:d},ht.createElement(W4,{force:!1},ht.createElement(z,{slot:B,name:"Dialog.Description"},ht.createElement($0,{initialFocus:i,containers:u,features:R?On(O,{parent:$0.features.RestoreFocus,leaf:$0.features.All&~$0.features.FocusLock}):$0.features.None},Bn({ourProps:q,theirProps:o,slot:B,defaultTag:O0e,features:D0e,visible:y===0,name:"Dialog"})))))))),ht.createElement(tc,{features:ec.Hidden,ref:f}))}),k0e="div",B0e=Fn(function(n,e){let[{dialogState:t,close:r}]=hA("Dialog.Overlay"),i=Vn(e),s=`headlessui-dialog-overlay-${Tr()}`,o=gt(l=>{if(l.target===l.currentTarget){if(ku(l.currentTarget))return l.preventDefault();l.preventDefault(),l.stopPropagation(),r()}}),a=D.useMemo(()=>({open:t===0}),[t]);return Bn({ourProps:{ref:i,id:s,"aria-hidden":!0,onClick:o},theirProps:n,slot:a,defaultTag:k0e,name:"Dialog.Overlay"})}),F0e="div",z0e=Fn(function(n,e){let[{dialogState:t},r]=hA("Dialog.Backdrop"),i=Vn(e),s=`headlessui-dialog-backdrop-${Tr()}`;D.useEffect(()=>{if(r.panelRef.current===null)throw new Error("A <Dialog.Backdrop /> component is being used, but a <Dialog.Panel /> component is missing.")},[r.panelRef]);let o=D.useMemo(()=>({open:t===0}),[t]);return ht.createElement(W4,{force:!0},ht.createElement(sx,null,Bn({ourProps:{ref:i,id:s,"aria-hidden":!0},theirProps:n,slot:o,defaultTag:F0e,name:"Dialog.Backdrop"})))}),U0e="div",j0e=Fn(function(n,e){let[{dialogState:t},r]=hA("Dialog.Panel"),i=Vn(e,r.panelRef),s=`headlessui-dialog-panel-${Tr()}`,o=D.useMemo(()=>({open:t===0}),[t]),a=gt(l=>{l.stopPropagation()});return Bn({ourProps:{ref:i,id:s,onClick:a},theirProps:n,slot:o,defaultTag:U0e,name:"Dialog.Panel"})}),G0e="h2",H0e=Fn(function(n,e){let[{dialogState:t,setTitleId:r}]=hA("Dialog.Title"),i=`headlessui-dialog-title-${Tr()}`,s=Vn(e);D.useEffect(()=>(r(i),()=>r(null)),[i,r]);let o=D.useMemo(()=>({open:t===0}),[t]);return Bn({ourProps:{ref:s,id:i},theirProps:n,slot:o,defaultTag:G0e,name:"Dialog.Title"})}),Dd=Object.assign(L0e,{Backdrop:z0e,Panel:j0e,Overlay:B0e,Title:H0e,Description:a6});var V0e=(n=>(n[n.Open=0]="Open",n[n.Closed=1]="Closed",n))(V0e||{}),$0e=(n=>(n[n.ToggleDisclosure=0]="ToggleDisclosure",n[n.CloseDisclosure=1]="CloseDisclosure",n[n.SetButtonId=2]="SetButtonId",n[n.SetPanelId=3]="SetPanelId",n[n.LinkPanel=4]="LinkPanel",n[n.UnlinkPanel=5]="UnlinkPanel",n))($0e||{});let W0e={0:n=>({...n,disclosureState:On(n.disclosureState,{0:1,1:0})}),1:n=>n.disclosureState===1?n:{...n,disclosureState:1},4(n){return n.linkedPanel===!0?n:{...n,linkedPanel:!0}},5(n){return n.linkedPanel===!1?n:{...n,linkedPanel:!1}},2(n,e){return n.buttonId===e.buttonId?n:{...n,buttonId:e.buttonId}},3(n,e){return n.panelId===e.panelId?n:{...n,panelId:e.panelId}}},c6=D.createContext(null);c6.displayName="DisclosureContext";function u6(n){let e=D.useContext(c6);if(e===null){let t=new Error(`<${n} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,u6),t}return e}let d6=D.createContext(null);d6.displayName="DisclosureAPIContext";function Wq(n){let e=D.useContext(d6);if(e===null){let t=new Error(`<${n} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,Wq),t}return e}let h6=D.createContext(null);h6.displayName="DisclosurePanelContext";function q0e(){return D.useContext(h6)}function Q0e(n,e){return On(e.type,W0e,n,e)}let J0e=D.Fragment,K0e=Fn(function(n,e){let{defaultOpen:t=!1,...r}=n,i=`headlessui-disclosure-button-${Tr()}`,s=`headlessui-disclosure-panel-${Tr()}`,o=D.useRef(null),a=Vn(e,ZO(y=>{o.current=y},n.as===void 0||n.as===D.Fragment)),l=D.useRef(null),c=D.useRef(null),u=D.useReducer(Q0e,{disclosureState:t?0:1,linkedPanel:!1,buttonRef:c,panelRef:l,buttonId:i,panelId:s}),[{disclosureState:d},h]=u;D.useEffect(()=>h({type:2,buttonId:i}),[i,h]),D.useEffect(()=>h({type:3,panelId:s}),[s,h]);let f=gt(y=>{h({type:1});let A=ju(o);if(!A)return;let C=(()=>y?y instanceof HTMLElement?y:y.current instanceof HTMLElement?y.current:A.getElementById(i):A.getElementById(i))();C==null||C.focus()}),m=D.useMemo(()=>({close:f}),[f]),g=D.useMemo(()=>({open:d===0,close:f}),[d,f]),v={ref:a};return ht.createElement(c6.Provider,{value:u},ht.createElement(d6.Provider,{value:m},ht.createElement(yv,{value:On(d,{0:Mi.Open,1:Mi.Closed})},Bn({ourProps:v,theirProps:r,slot:g,defaultTag:J0e,name:"Disclosure"}))))}),Y0e="button",X0e=Fn(function(n,e){let[t,r]=u6("Disclosure.Button"),i=q0e(),s=i===null?!1:i===t.panelId,o=D.useRef(null),a=Vn(o,e,s?null:t.buttonRef),l=gt(g=>{var v;if(s){if(t.disclosureState===1)return;switch(g.key){case bt.Space:case bt.Enter:g.preventDefault(),g.stopPropagation(),r({type:0}),(v=t.buttonRef.current)==null||v.focus();break}}else switch(g.key){case bt.Space:case bt.Enter:g.preventDefault(),g.stopPropagation(),r({type:0});break}}),c=gt(g=>{switch(g.key){case bt.Space:g.preventDefault();break}}),u=gt(g=>{var v;ku(g.currentTarget)||n.disabled||(s?(r({type:0}),(v=t.buttonRef.current)==null||v.focus()):r({type:0}))}),d=D.useMemo(()=>({open:t.disclosureState===0}),[t]),h=Qm(n,o),f=n,m=s?{ref:a,type:h,onKeyDown:l,onClick:u}:{ref:a,id:t.buttonId,type:h,"aria-expanded":n.disabled?void 0:t.disclosureState===0,"aria-controls":t.linkedPanel?t.panelId:void 0,onKeyDown:l,onKeyUp:c,onClick:u};return Bn({ourProps:m,theirProps:f,slot:d,defaultTag:Y0e,name:"Disclosure.Button"})}),Z0e="div",ege=Vs.RenderStrategy|Vs.Static,tge=Fn(function(n,e){let[t,r]=u6("Disclosure.Panel"),{close:i}=Wq("Disclosure.Panel"),s=Vn(e,t.panelRef,d=>{r({type:d?4:5})}),o=ch(),a=(()=>o!==null?o===Mi.Open:t.disclosureState===0)(),l=D.useMemo(()=>({open:t.disclosureState===0,close:i}),[t,i]),c=n,u={ref:s,id:t.panelId};return ht.createElement(h6.Provider,{value:t.panelId},Bn({ourProps:u,theirProps:c,slot:l,defaultTag:Z0e,features:ege,visible:a,name:"Disclosure.Panel"}))}),nge=Object.assign(K0e,{Button:X0e,Panel:tge});var rge=(n=>(n[n.Open=0]="Open",n[n.Closed=1]="Closed",n))(rge||{}),ige=(n=>(n[n.Single=0]="Single",n[n.Multi=1]="Multi",n))(ige||{}),sge=(n=>(n[n.Pointer=0]="Pointer",n[n.Other=1]="Other",n))(sge||{}),oge=(n=>(n[n.OpenListbox=0]="OpenListbox",n[n.CloseListbox=1]="CloseListbox",n[n.SetDisabled=2]="SetDisabled",n[n.SetOrientation=3]="SetOrientation",n[n.GoToOption=4]="GoToOption",n[n.Search=5]="Search",n[n.ClearSearch=6]="ClearSearch",n[n.RegisterOption=7]="RegisterOption",n[n.UnregisterOption=8]="UnregisterOption",n))(oge||{});function WM(n,e=t=>t){let t=n.activeOptionIndex!==null?n.options[n.activeOptionIndex]:null,r=Mm(e(n.options.slice()),s=>s.dataRef.current.domRef.current),i=t?r.indexOf(t):null;return i===-1&&(i=null),{options:r,activeOptionIndex:i}}let age={1(n){return n.disabled||n.listboxState===1?n:{...n,activeOptionIndex:null,listboxState:1}},0(n){if(n.disabled||n.listboxState===0)return n;let e=n.activeOptionIndex,{value:t,mode:r,compare:i}=n.propsRef.current,s=n.options.findIndex(o=>{let a=o.dataRef.current.value;return On(r,{1:()=>t.some(l=>i(l,a)),0:()=>i(t,a)})});return s!==-1&&(e=s),{...n,listboxState:0,activeOptionIndex:e}},2(n,e){return n.disabled===e.disabled?n:{...n,disabled:e.disabled}},3(n,e){return n.orientation===e.orientation?n:{...n,orientation:e.orientation}},4(n,e){var t;if(n.disabled||n.listboxState===1)return n;let r=WM(n),i=t6(e,{resolveItems:()=>r.options,resolveActiveIndex:()=>r.activeOptionIndex,resolveId:s=>s.id,resolveDisabled:s=>s.dataRef.current.disabled});return{...n,...r,searchQuery:"",activeOptionIndex:i,activationTrigger:(t=e.trigger)!=null?t:1}},5:(n,e)=>{if(n.disabled||n.listboxState===1)return n;let t=n.searchQuery!==""?0:1,r=n.searchQuery+e.value.toLowerCase(),i=(n.activeOptionIndex!==null?n.options.slice(n.activeOptionIndex+t).concat(n.options.slice(0,n.activeOptionIndex+t)):n.options).find(o=>{var a;return!o.dataRef.current.disabled&&((a=o.dataRef.current.textValue)==null?void 0:a.startsWith(r))}),s=i?n.options.indexOf(i):-1;return s===-1||s===n.activeOptionIndex?{...n,searchQuery:r}:{...n,searchQuery:r,activeOptionIndex:s,activationTrigger:1}},6(n){return n.disabled||n.listboxState===1||n.searchQuery===""?n:{...n,searchQuery:""}},7:(n,e)=>{let t={id:e.id,dataRef:e.dataRef},r=WM(n,i=>[...i,t]);if(n.activeOptionIndex===null){let{value:i,mode:s,compare:o}=n.propsRef.current,a=e.dataRef.current.value;On(s,{1:()=>i.some(l=>o(l,a)),0:()=>o(i,a)})&&(r.activeOptionIndex=r.options.indexOf(t))}return{...n,...r}},8:(n,e)=>{let t=WM(n,r=>{let i=r.findIndex(s=>s.id===e.id);return i!==-1&&r.splice(i,1),r});return{...n,...t,activationTrigger:1}}},f6=D.createContext(null);f6.displayName="ListboxContext";function fA(n){let e=D.useContext(f6);if(e===null){let t=new Error(`<${n} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,fA),t}return e}function lge(n,e){return On(e.type,age,n,e)}let cge=D.Fragment,uge=Fn(function(n,e){let{value:t,defaultValue:r,name:i,onChange:s,by:o=(N,M)=>N===M,disabled:a=!1,horizontal:l=!1,multiple:c=!1,...u}=n;const d=l?"horizontal":"vertical";let h=Vn(e),[f,m]=C2(t,s,r),g=D.useReducer(lge,{listboxState:1,propsRef:{current:{value:f,onChange:m,mode:c?1:0,compare:gt(typeof o=="string"?(N,M)=>{let O=o;return(N==null?void 0:N[O])===(M==null?void 0:M[O])}:o)}},labelRef:D.createRef(),buttonRef:D.createRef(),optionsRef:D.createRef(),disabled:a,orientation:d,options:[],searchQuery:"",activeOptionIndex:null,activationTrigger:1}),[{listboxState:v,propsRef:y,optionsRef:A,buttonRef:C},T]=g;y.current.value=f,y.current.mode=c?1:0,Zn(()=>{y.current.onChange=N=>On(y.current.mode,{0(){return m(N)},1(){let M=y.current.value.slice(),{compare:O}=y.current,P=M.findIndex(z=>O(z,N));return P===-1?M.push(N):M.splice(P,1),m(M)}})},[m,y]),Zn(()=>T({type:2,disabled:a}),[a]),Zn(()=>T({type:3,orientation:d}),[d]),uA([C,A],(N,M)=>{var O;T({type:1}),cA(M,lA.Loose)||(N.preventDefault(),(O=C.current)==null||O.focus())},v===0);let x=D.useMemo(()=>({open:v===0,disabled:a,value:f}),[v,a,f]),R={ref:h};return ht.createElement(f6.Provider,{value:g},ht.createElement(yv,{value:On(v,{0:Mi.Open,1:Mi.Closed})},i!=null&&f!=null&&E2({[i]:f}).map(([N,M])=>ht.createElement(tc,{features:ec.Hidden,...Vg({key:N,as:"input",type:"hidden",hidden:!0,readOnly:!0,name:N,value:M})})),Bn({ourProps:R,theirProps:u,slot:x,defaultTag:cge,name:"Listbox"})))}),dge="button",hge=Fn(function(n,e){var t;let[r,i]=fA("Listbox.Button"),s=Vn(r.buttonRef,e),o=`headlessui-listbox-button-${Tr()}`,a=Yd(),l=gt(g=>{switch(g.key){case bt.Space:case bt.Enter:case bt.ArrowDown:g.preventDefault(),i({type:0}),a.nextFrame(()=>{r.propsRef.current.value||i({type:4,focus:hr.First})});break;case bt.ArrowUp:g.preventDefault(),i({type:0}),a.nextFrame(()=>{r.propsRef.current.value||i({type:4,focus:hr.Last})});break}}),c=gt(g=>{switch(g.key){case bt.Space:g.preventDefault();break}}),u=gt(g=>{if(ku(g.currentTarget))return g.preventDefault();r.listboxState===0?(i({type:1}),a.nextFrame(()=>{var v;return(v=r.buttonRef.current)==null?void 0:v.focus({preventScroll:!0})})):(g.preventDefault(),i({type:0}))}),d=oA(()=>{if(r.labelRef.current)return[r.labelRef.current.id,o].join(" ")},[r.labelRef.current,o]),h=D.useMemo(()=>({open:r.listboxState===0,disabled:r.disabled,value:r.propsRef.current.value}),[r]),f=n,m={ref:s,id:o,type:Qm(n,r.buttonRef),"aria-haspopup":!0,"aria-controls":(t=r.optionsRef.current)==null?void 0:t.id,"aria-expanded":r.disabled?void 0:r.listboxState===0,"aria-labelledby":d,disabled:r.disabled,onKeyDown:l,onKeyUp:c,onClick:u};return Bn({ourProps:m,theirProps:f,slot:h,defaultTag:dge,name:"Listbox.Button"})}),fge="label",pge=Fn(function(n,e){let[t]=fA("Listbox.Label"),r=`headlessui-listbox-label-${Tr()}`,i=Vn(t.labelRef,e),s=gt(()=>{var a;return(a=t.buttonRef.current)==null?void 0:a.focus({preventScroll:!0})}),o=D.useMemo(()=>({open:t.listboxState===0,disabled:t.disabled}),[t]);return Bn({ourProps:{ref:i,id:r,onClick:s},theirProps:n,slot:o,defaultTag:fge,name:"Listbox.Label"})}),mge="ul",gge=Vs.RenderStrategy|Vs.Static,vge=Fn(function(n,e){var t;let[r,i]=fA("Listbox.Options"),s=Vn(r.optionsRef,e),o=`headlessui-listbox-options-${Tr()}`,a=Yd(),l=Yd(),c=ch(),u=(()=>c!==null?c===Mi.Open:r.listboxState===0)();D.useEffect(()=>{var v;let y=r.optionsRef.current;!y||r.listboxState===0&&y!==((v=ju(y))==null?void 0:v.activeElement)&&y.focus({preventScroll:!0})},[r.listboxState,r.optionsRef]);let d=gt(v=>{switch(l.dispose(),v.key){case bt.Space:if(r.searchQuery!=="")return v.preventDefault(),v.stopPropagation(),i({type:5,value:v.key});case bt.Enter:if(v.preventDefault(),v.stopPropagation(),r.activeOptionIndex!==null){let{dataRef:y}=r.options[r.activeOptionIndex];r.propsRef.current.onChange(y.current.value)}r.propsRef.current.mode===0&&(i({type:1}),Ua().nextFrame(()=>{var y;return(y=r.buttonRef.current)==null?void 0:y.focus({preventScroll:!0})}));break;case On(r.orientation,{vertical:bt.ArrowDown,horizontal:bt.ArrowRight}):return v.preventDefault(),v.stopPropagation(),i({type:4,focus:hr.Next});case On(r.orientation,{vertical:bt.ArrowUp,horizontal:bt.ArrowLeft}):return v.preventDefault(),v.stopPropagation(),i({type:4,focus:hr.Previous});case bt.Home:case bt.PageUp:return v.preventDefault(),v.stopPropagation(),i({type:4,focus:hr.First});case bt.End:case bt.PageDown:return v.preventDefault(),v.stopPropagation(),i({type:4,focus:hr.Last});case bt.Escape:return v.preventDefault(),v.stopPropagation(),i({type:1}),a.nextFrame(()=>{var y;return(y=r.buttonRef.current)==null?void 0:y.focus({preventScroll:!0})});case bt.Tab:v.preventDefault(),v.stopPropagation();break;default:v.key.length===1&&(i({type:5,value:v.key}),l.setTimeout(()=>i({type:6}),350));break}}),h=oA(()=>{var v,y,A;return(A=(v=r.labelRef.current)==null?void 0:v.id)!=null?A:(y=r.buttonRef.current)==null?void 0:y.id},[r.labelRef.current,r.buttonRef.current]),f=D.useMemo(()=>({open:r.listboxState===0}),[r]),m=n,g={"aria-activedescendant":r.activeOptionIndex===null||(t=r.options[r.activeOptionIndex])==null?void 0:t.id,"aria-multiselectable":r.propsRef.current.mode===1?!0:void 0,"aria-labelledby":h,"aria-orientation":r.orientation,id:o,onKeyDown:d,role:"listbox",tabIndex:0,ref:s};return Bn({ourProps:g,theirProps:m,slot:f,defaultTag:mge,features:gge,visible:u,name:"Listbox.Options"})}),yge="li",_ge=Fn(function(n,e){let{disabled:t=!1,value:r,...i}=n,[s,o]=fA("Listbox.Option"),a=`headlessui-listbox-option-${Tr()}`,l=s.activeOptionIndex!==null?s.options[s.activeOptionIndex].id===a:!1,{value:c,compare:u}=s.propsRef.current,d=On(s.propsRef.current.mode,{1:()=>c.some(x=>u(x,r)),0:()=>u(c,r)}),h=D.useRef(null),f=Vn(e,h);Zn(()=>{if(s.listboxState!==0||!l||s.activationTrigger===0)return;let x=Ua();return x.requestAnimationFrame(()=>{var R,N;(N=(R=h.current)==null?void 0:R.scrollIntoView)==null||N.call(R,{block:"nearest"})}),x.dispose},[h,l,s.listboxState,s.activationTrigger,s.activeOptionIndex]);let m=D.useRef({disabled:t,value:r,domRef:h});Zn(()=>{m.current.disabled=t},[m,t]),Zn(()=>{m.current.value=r},[m,r]),Zn(()=>{var x,R;m.current.textValue=(R=(x=h.current)==null?void 0:x.textContent)==null?void 0:R.toLowerCase()},[m,h]);let g=gt(()=>s.propsRef.current.onChange(r));Zn(()=>(o({type:7,id:a,dataRef:m}),()=>o({type:8,id:a})),[m,a]);let v=gt(x=>{if(t)return x.preventDefault();g(),s.propsRef.current.mode===0&&(o({type:1}),Ua().nextFrame(()=>{var R;return(R=s.buttonRef.current)==null?void 0:R.focus({preventScroll:!0})}))}),y=gt(()=>{if(t)return o({type:4,focus:hr.Nothing});o({type:4,focus:hr.Specific,id:a})}),A=gt(()=>{t||l||o({type:4,focus:hr.Specific,id:a,trigger:0})}),C=gt(()=>{t||!l||o({type:4,focus:hr.Nothing})}),T=D.useMemo(()=>({active:l,selected:d,disabled:t}),[l,d,t]);return Bn({ourProps:{id:a,ref:f,role:"option",tabIndex:t===!0?void 0:-1,"aria-disabled":t===!0?!0:void 0,"aria-selected":d,disabled:void 0,onClick:v,onFocus:y,onPointerMove:A,onMouseMove:A,onPointerLeave:C,onMouseLeave:C},theirProps:i,slot:T,defaultTag:yge,name:"Listbox.Option"})}),zi=Object.assign(uge,{Button:hge,Label:pge,Options:vge,Option:_ge});var Sge=(n=>(n[n.Open=0]="Open",n[n.Closed=1]="Closed",n))(Sge||{}),Age=(n=>(n[n.Pointer=0]="Pointer",n[n.Other=1]="Other",n))(Age||{}),Ege=(n=>(n[n.OpenMenu=0]="OpenMenu",n[n.CloseMenu=1]="CloseMenu",n[n.GoToItem=2]="GoToItem",n[n.Search=3]="Search",n[n.ClearSearch=4]="ClearSearch",n[n.RegisterItem=5]="RegisterItem",n[n.UnregisterItem=6]="UnregisterItem",n))(Ege||{});function qM(n,e=t=>t){let t=n.activeItemIndex!==null?n.items[n.activeItemIndex]:null,r=Mm(e(n.items.slice()),s=>s.dataRef.current.domRef.current),i=t?r.indexOf(t):null;return i===-1&&(i=null),{items:r,activeItemIndex:i}}let Cge={1(n){return n.menuState===1?n:{...n,activeItemIndex:null,menuState:1}},0(n){return n.menuState===0?n:{...n,menuState:0}},2:(n,e)=>{var t;let r=qM(n),i=t6(e,{resolveItems:()=>r.items,resolveActiveIndex:()=>r.activeItemIndex,resolveId:s=>s.id,resolveDisabled:s=>s.dataRef.current.disabled});return{...n,...r,searchQuery:"",activeItemIndex:i,activationTrigger:(t=e.trigger)!=null?t:1}},3:(n,e)=>{let t=n.searchQuery!==""?0:1,r=n.searchQuery+e.value.toLowerCase(),i=(n.activeItemIndex!==null?n.items.slice(n.activeItemIndex+t).concat(n.items.slice(0,n.activeItemIndex+t)):n.items).find(o=>{var a;return((a=o.dataRef.current.textValue)==null?void 0:a.startsWith(r))&&!o.dataRef.current.disabled}),s=i?n.items.indexOf(i):-1;return s===-1||s===n.activeItemIndex?{...n,searchQuery:r}:{...n,searchQuery:r,activeItemIndex:s,activationTrigger:1}},4(n){return n.searchQuery===""?n:{...n,searchQuery:"",searchActiveItemIndex:null}},5:(n,e)=>{let t=qM(n,r=>[...r,{id:e.id,dataRef:e.dataRef}]);return{...n,...t}},6:(n,e)=>{let t=qM(n,r=>{let i=r.findIndex(s=>s.id===e.id);return i!==-1&&r.splice(i,1),r});return{...n,...t,activationTrigger:1}}},p6=D.createContext(null);p6.displayName="MenuContext";function I2(n){let e=D.useContext(p6);if(e===null){let t=new Error(`<${n} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,I2),t}return e}function wge(n,e){return On(e.type,Cge,n,e)}let Tge=D.Fragment,xge=Fn(function(n,e){let t=D.useReducer(wge,{menuState:1,buttonRef:D.createRef(),itemsRef:D.createRef(),items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:r,itemsRef:i,buttonRef:s},o]=t,a=Vn(e);uA([s,i],(h,f)=>{var m;o({type:1}),cA(f,lA.Loose)||(h.preventDefault(),(m=s.current)==null||m.focus())},r===0);let l=gt(()=>{o({type:1})}),c=D.useMemo(()=>({open:r===0,close:l}),[r,l]),u=n,d={ref:a};return ht.createElement(p6.Provider,{value:t},ht.createElement(yv,{value:On(r,{0:Mi.Open,1:Mi.Closed})},Bn({ourProps:d,theirProps:u,slot:c,defaultTag:Tge,name:"Menu"})))}),Ige="button",bge=Fn(function(n,e){var t;let[r,i]=I2("Menu.Button"),s=Vn(r.buttonRef,e),o=`headlessui-menu-button-${Tr()}`,a=Yd(),l=gt(m=>{switch(m.key){case bt.Space:case bt.Enter:case bt.ArrowDown:m.preventDefault(),m.stopPropagation(),i({type:0}),a.nextFrame(()=>i({type:2,focus:hr.First}));break;case bt.ArrowUp:m.preventDefault(),m.stopPropagation(),i({type:0}),a.nextFrame(()=>i({type:2,focus:hr.Last}));break}}),c=gt(m=>{switch(m.key){case bt.Space:m.preventDefault();break}}),u=gt(m=>{if(ku(m.currentTarget))return m.preventDefault();n.disabled||(r.menuState===0?(i({type:1}),a.nextFrame(()=>{var g;return(g=r.buttonRef.current)==null?void 0:g.focus({preventScroll:!0})})):(m.preventDefault(),i({type:0})))}),d=D.useMemo(()=>({open:r.menuState===0}),[r]),h=n,f={ref:s,id:o,type:Qm(n,r.buttonRef),"aria-haspopup":!0,"aria-controls":(t=r.itemsRef.current)==null?void 0:t.id,"aria-expanded":n.disabled?void 0:r.menuState===0,onKeyDown:l,onKeyUp:c,onClick:u};return Bn({ourProps:f,theirProps:h,slot:d,defaultTag:Ige,name:"Menu.Button"})}),Mge="div",Rge=Vs.RenderStrategy|Vs.Static,Nge=Fn(function(n,e){var t,r;let[i,s]=I2("Menu.Items"),o=Vn(i.itemsRef,e),a=ep(i.itemsRef),l=`headlessui-menu-items-${Tr()}`,c=Yd(),u=ch(),d=(()=>u!==null?u===Mi.Open:i.menuState===0)();D.useEffect(()=>{let y=i.itemsRef.current;!y||i.menuState===0&&y!==(a==null?void 0:a.activeElement)&&y.focus({preventScroll:!0})},[i.menuState,i.itemsRef,a]),e6({container:i.itemsRef.current,enabled:i.menuState===0,accept(y){return y.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:y.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(y){y.setAttribute("role","none")}});let h=gt(y=>{var A,C;switch(c.dispose(),y.key){case bt.Space:if(i.searchQuery!=="")return y.preventDefault(),y.stopPropagation(),s({type:3,value:y.key});case bt.Enter:if(y.preventDefault(),y.stopPropagation(),s({type:1}),i.activeItemIndex!==null){let{dataRef:T}=i.items[i.activeItemIndex];(C=(A=T.current)==null?void 0:A.domRef.current)==null||C.click()}Lq(i.buttonRef.current);break;case bt.ArrowDown:return y.preventDefault(),y.stopPropagation(),s({type:2,focus:hr.Next});case bt.ArrowUp:return y.preventDefault(),y.stopPropagation(),s({type:2,focus:hr.Previous});case bt.Home:case bt.PageUp:return y.preventDefault(),y.stopPropagation(),s({type:2,focus:hr.First});case bt.End:case bt.PageDown:return y.preventDefault(),y.stopPropagation(),s({type:2,focus:hr.Last});case bt.Escape:y.preventDefault(),y.stopPropagation(),s({type:1}),Ua().nextFrame(()=>{var T;return(T=i.buttonRef.current)==null?void 0:T.focus({preventScroll:!0})});break;case bt.Tab:y.preventDefault(),y.stopPropagation(),s({type:1}),Ua().nextFrame(()=>{Ume(i.buttonRef.current,y.shiftKey?Xr.Previous:Xr.Next)});break;default:y.key.length===1&&(s({type:3,value:y.key}),c.setTimeout(()=>s({type:4}),350));break}}),f=gt(y=>{switch(y.key){case bt.Space:y.preventDefault();break}}),m=D.useMemo(()=>({open:i.menuState===0}),[i]),g=n,v={"aria-activedescendant":i.activeItemIndex===null||(t=i.items[i.activeItemIndex])==null?void 0:t.id,"aria-labelledby":(r=i.buttonRef.current)==null?void 0:r.id,id:l,onKeyDown:h,onKeyUp:f,role:"menu",tabIndex:0,ref:o};return Bn({ourProps:v,theirProps:g,slot:m,defaultTag:Mge,features:Rge,visible:d,name:"Menu.Items"})}),Pge=D.Fragment,Oge=Fn(function(n,e){let{disabled:t=!1,...r}=n,[i,s]=I2("Menu.Item"),o=`headlessui-menu-item-${Tr()}`,a=i.activeItemIndex!==null?i.items[i.activeItemIndex].id===o:!1,l=D.useRef(null),c=Vn(e,l);Zn(()=>{if(i.menuState!==0||!a||i.activationTrigger===0)return;let y=Ua();return y.requestAnimationFrame(()=>{var A,C;(C=(A=l.current)==null?void 0:A.scrollIntoView)==null||C.call(A,{block:"nearest"})}),y.dispose},[l,a,i.menuState,i.activationTrigger,i.activeItemIndex]);let u=D.useRef({disabled:t,domRef:l});Zn(()=>{u.current.disabled=t},[u,t]),Zn(()=>{var y,A;u.current.textValue=(A=(y=l.current)==null?void 0:y.textContent)==null?void 0:A.toLowerCase()},[u,l]),Zn(()=>(s({type:5,id:o,dataRef:u}),()=>s({type:6,id:o})),[u,o]);let d=gt(()=>{s({type:1})}),h=gt(y=>{if(t)return y.preventDefault();s({type:1}),Lq(i.buttonRef.current)}),f=gt(()=>{if(t)return s({type:2,focus:hr.Nothing});s({type:2,focus:hr.Specific,id:o})}),m=gt(()=>{t||a||s({type:2,focus:hr.Specific,id:o,trigger:0})}),g=gt(()=>{t||!a||s({type:2,focus:hr.Nothing})}),v=D.useMemo(()=>({active:a,disabled:t,close:d}),[a,t,d]);return Bn({ourProps:{id:o,ref:c,role:"menuitem",tabIndex:t===!0?void 0:-1,"aria-disabled":t===!0?!0:void 0,disabled:void 0,onClick:h,onFocus:f,onPointerMove:m,onMouseMove:m,onPointerLeave:g,onMouseLeave:g},theirProps:r,slot:v,defaultTag:Pge,name:"Menu.Item"})}),jl=Object.assign(xge,{Button:bge,Items:Nge,Item:Oge});var Dge=(n=>(n[n.Open=0]="Open",n[n.Closed=1]="Closed",n))(Dge||{}),Lge=(n=>(n[n.TogglePopover=0]="TogglePopover",n[n.ClosePopover=1]="ClosePopover",n[n.SetButton=2]="SetButton",n[n.SetButtonId=3]="SetButtonId",n[n.SetPanel=4]="SetPanel",n[n.SetPanelId=5]="SetPanelId",n))(Lge||{});let kge={0:n=>({...n,popoverState:On(n.popoverState,{0:1,1:0})}),1(n){return n.popoverState===1?n:{...n,popoverState:1}},2(n,e){return n.button===e.button?n:{...n,button:e.button}},3(n,e){return n.buttonId===e.buttonId?n:{...n,buttonId:e.buttonId}},4(n,e){return n.panel===e.panel?n:{...n,panel:e.panel}},5(n,e){return n.panelId===e.panelId?n:{...n,panelId:e.panelId}}},m6=D.createContext(null);m6.displayName="PopoverContext";function b2(n){let e=D.useContext(m6);if(e===null){let t=new Error(`<${n} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,b2),t}return e}let g6=D.createContext(null);g6.displayName="PopoverAPIContext";function v6(n){let e=D.useContext(g6);if(e===null){let t=new Error(`<${n} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,v6),t}return e}let y6=D.createContext(null);y6.displayName="PopoverGroupContext";function qq(){return D.useContext(y6)}let _6=D.createContext(null);_6.displayName="PopoverPanelContext";function Bge(){return D.useContext(_6)}function Fge(n,e){return On(e.type,kge,n,e)}let zge="div",Uge=Fn(function(n,e){var t;let r=`headlessui-popover-button-${Tr()}`,i=`headlessui-popover-panel-${Tr()}`,s=D.useRef(null),o=Vn(e,ZO(O=>{s.current=O})),a=D.useReducer(Fge,{popoverState:1,button:null,buttonId:r,panel:null,panelId:i,beforePanelSentinel:D.createRef(),afterPanelSentinel:D.createRef()}),[{popoverState:l,button:c,panel:u,beforePanelSentinel:d,afterPanelSentinel:h},f]=a,m=ep((t=s.current)!=null?t:c);D.useEffect(()=>f({type:3,buttonId:r}),[r,f]),D.useEffect(()=>f({type:5,panelId:i}),[i,f]);let g=D.useMemo(()=>{if(!c||!u)return!1;for(let q of document.querySelectorAll("body > *"))if(Number(q==null?void 0:q.contains(c))^Number(q==null?void 0:q.contains(u)))return!0;let O=A2(),P=O.indexOf(c),z=(P+O.length-1)%O.length,V=(P+1)%O.length,$=O[z],B=O[V];return!u.contains($)&&!u.contains(B)},[c,u]),v=D.useMemo(()=>({buttonId:r,panelId:i,close:()=>f({type:1})}),[r,i,f]),y=qq(),A=y==null?void 0:y.registerPopover,C=gt(()=>{var O;return(O=y==null?void 0:y.isFocusWithinPopoverGroup())!=null?O:(m==null?void 0:m.activeElement)&&((c==null?void 0:c.contains(m.activeElement))||(u==null?void 0:u.contains(m.activeElement)))});D.useEffect(()=>A==null?void 0:A(v),[A,v]),T2(m==null?void 0:m.defaultView,"focus",O=>{var P,z,V,$;l===0&&(C()||!c||!u||(z=(P=d.current)==null?void 0:P.contains)!=null&&z.call(P,O.target)||($=(V=h.current)==null?void 0:V.contains)!=null&&$.call(V,O.target)||f({type:1}))},!0),uA([c,u],(O,P)=>{f({type:1}),cA(P,lA.Loose)||(O.preventDefault(),c==null||c.focus())},l===0);let T=gt(O=>{f({type:1});let P=(()=>O?O instanceof HTMLElement?O:"current"in O&&O.current instanceof HTMLElement?O.current:c:c)();P==null||P.focus()}),x=D.useMemo(()=>({close:T,isPortalled:g}),[T,g]),R=D.useMemo(()=>({open:l===0,close:T}),[l,T]),N=n,M={ref:o};return ht.createElement(m6.Provider,{value:a},ht.createElement(g6.Provider,{value:x},ht.createElement(yv,{value:On(l,{0:Mi.Open,1:Mi.Closed})},Bn({ourProps:M,theirProps:N,slot:R,defaultTag:zge,name:"Popover"}))))}),jge="button",Gge=Fn(function(n,e){let[t,r]=b2("Popover.Button"),{isPortalled:i}=v6("Popover.Button"),s=D.useRef(null),o=`headlessui-focus-sentinel-${Tr()}`,a=qq(),l=a==null?void 0:a.closeOthers,c=Bge(),u=c===null?!1:c===t.panelId,d=Vn(s,e,u?null:O=>O&&r({type:2,button:O})),h=Vn(s,e),f=ep(s),m=gt(O=>{var P,z,V;if(u){if(t.popoverState===1)return;switch(O.key){case bt.Space:case bt.Enter:O.preventDefault(),(z=(P=O.target).click)==null||z.call(P),r({type:1}),(V=t.button)==null||V.focus();break}}else switch(O.key){case bt.Space:case bt.Enter:O.preventDefault(),O.stopPropagation(),t.popoverState===1&&(l==null||l(t.buttonId)),r({type:0});break;case bt.Escape:if(t.popoverState!==0)return l==null?void 0:l(t.buttonId);if(!s.current||f!=null&&f.activeElement&&!s.current.contains(f.activeElement))return;O.preventDefault(),O.stopPropagation(),r({type:1});break}}),g=gt(O=>{u||O.key===bt.Space&&O.preventDefault()}),v=gt(O=>{var P,z;ku(O.currentTarget)||n.disabled||(u?(r({type:1}),(P=t.button)==null||P.focus()):(O.preventDefault(),O.stopPropagation(),t.popoverState===1&&(l==null||l(t.buttonId)),r({type:0}),(z=t.button)==null||z.focus()))}),y=gt(O=>{O.preventDefault(),O.stopPropagation()}),A=t.popoverState===0,C=D.useMemo(()=>({open:A}),[A]),T=Qm(n,s),x=n,R=u?{ref:h,type:T,onKeyDown:m,onClick:v}:{ref:d,id:t.buttonId,type:T,"aria-expanded":n.disabled?void 0:t.popoverState===0,"aria-controls":t.panel?t.panelId:void 0,onKeyDown:m,onKeyUp:g,onClick:v,onMouseDown:y},N=o6(),M=gt(()=>{let O=t.panel;if(!O)return;function P(){On(N.current,{[Od.Forwards]:()=>Us(O,Xr.First),[Od.Backwards]:()=>Us(O,Xr.Last)})}P()});return ht.createElement(ht.Fragment,null,Bn({ourProps:R,theirProps:x,slot:C,defaultTag:jge,name:"Popover.Button"}),A&&!u&&i&&ht.createElement(tc,{id:o,features:ec.Focusable,as:"button",type:"button",onFocus:M}))}),Hge="div",Vge=Vs.RenderStrategy|Vs.Static,$ge=Fn(function(n,e){let[{popoverState:t},r]=b2("Popover.Overlay"),i=Vn(e),s=`headlessui-popover-overlay-${Tr()}`,o=ch(),a=(()=>o!==null?o===Mi.Open:t===0)(),l=gt(u=>{if(ku(u.currentTarget))return u.preventDefault();r({type:1})}),c=D.useMemo(()=>({open:t===0}),[t]);return Bn({ourProps:{ref:i,id:s,"aria-hidden":!0,onClick:l},theirProps:n,slot:c,defaultTag:Hge,features:Vge,visible:a,name:"Popover.Overlay"})}),Wge="div",qge=Vs.RenderStrategy|Vs.Static,Qge=Fn(function(n,e){let{focus:t=!1,...r}=n,[i,s]=b2("Popover.Panel"),{close:o,isPortalled:a}=v6("Popover.Panel"),l=`headlessui-focus-sentinel-before-${Tr()}`,c=`headlessui-focus-sentinel-after-${Tr()}`,u=D.useRef(null),d=Vn(u,e,x=>{s({type:4,panel:x})}),h=ep(u),f=ch(),m=(()=>f!==null?f===Mi.Open:i.popoverState===0)(),g=gt(x=>{var R;switch(x.key){case bt.Escape:if(i.popoverState!==0||!u.current||h!=null&&h.activeElement&&!u.current.contains(h.activeElement))return;x.preventDefault(),x.stopPropagation(),s({type:1}),(R=i.button)==null||R.focus();break}});D.useEffect(()=>{var x;n.static||i.popoverState===1&&((x=n.unmount)==null||x)&&s({type:4,panel:null})},[i.popoverState,n.unmount,n.static,s]),D.useEffect(()=>{if(!t||i.popoverState!==0||!u.current)return;let x=h==null?void 0:h.activeElement;u.current.contains(x)||Us(u.current,Xr.First)},[t,u,i.popoverState]);let v=D.useMemo(()=>({open:i.popoverState===0,close:o}),[i,o]),y={ref:d,id:i.panelId,onKeyDown:g,onBlur:t&&i.popoverState===0?x=>{var R,N,M,O,P;let z=x.relatedTarget;!z||!u.current||(R=u.current)!=null&&R.contains(z)||(s({type:1}),((M=(N=i.beforePanelSentinel.current)==null?void 0:N.contains)!=null&&M.call(N,z)||(P=(O=i.afterPanelSentinel.current)==null?void 0:O.contains)!=null&&P.call(O,z))&&z.focus({preventScroll:!0}))}:void 0,tabIndex:-1},A=o6(),C=gt(()=>{let x=u.current;if(!x)return;function R(){On(A.current,{[Od.Forwards]:()=>{Us(x,Xr.First)},[Od.Backwards]:()=>{var N;(N=i.button)==null||N.focus({preventScroll:!0})}})}R()}),T=gt(()=>{let x=u.current;if(!x)return;function R(){On(A.current,{[Od.Forwards]:()=>{var N,M,O;if(!i.button)return;let P=A2(),z=P.indexOf(i.button),V=P.slice(0,z+1),$=[...P.slice(z+1),...V];for(let B of $.slice())if((M=(N=B==null?void 0:B.id)==null?void 0:N.startsWith)!=null&&M.call(N,"headlessui-focus-sentinel-")||(O=i.panel)!=null&&O.contains(B)){let q=$.indexOf(B);q!==-1&&$.splice(q,1)}Us($,Xr.First,!1)},[Od.Backwards]:()=>Us(x,Xr.Last)})}R()});return ht.createElement(_6.Provider,{value:i.panelId},m&&a&&ht.createElement(tc,{id:l,ref:i.beforePanelSentinel,features:ec.Focusable,as:"button",type:"button",onFocus:C}),Bn({ourProps:y,theirProps:r,slot:v,defaultTag:Wge,features:qge,visible:m,name:"Popover.Panel"}),m&&a&&ht.createElement(tc,{id:c,ref:i.afterPanelSentinel,features:ec.Focusable,as:"button",type:"button",onFocus:T}))}),Jge="div",Kge=Fn(function(n,e){let t=D.useRef(null),r=Vn(t,e),[i,s]=D.useState([]),o=gt(m=>{s(g=>{let v=g.indexOf(m);if(v!==-1){let y=g.slice();return y.splice(v,1),y}return g})}),a=gt(m=>(s(g=>[...g,m]),()=>o(m))),l=gt(()=>{var m;let g=ju(t);if(!g)return!1;let v=g.activeElement;return(m=t.current)!=null&&m.contains(v)?!0:i.some(y=>{var A,C;return((A=g.getElementById(y.buttonId))==null?void 0:A.contains(v))||((C=g.getElementById(y.panelId))==null?void 0:C.contains(v))})}),c=gt(m=>{for(let g of i)g.buttonId!==m&&g.close()}),u=D.useMemo(()=>({registerPopover:a,unregisterPopover:o,isFocusWithinPopoverGroup:l,closeOthers:c}),[a,o,l,c]),d=D.useMemo(()=>({}),[]),h=n,f={ref:r};return ht.createElement(y6.Provider,{value:u},Bn({ourProps:f,theirProps:h,slot:d,defaultTag:Jge,name:"Popover.Group"}))}),aT=Object.assign(Uge,{Button:Gge,Overlay:$ge,Panel:Qge,Group:Kge});function Yge(n=0){let[e,t]=D.useState(n),r=D.useCallback(a=>t(l=>l|a),[e]),i=D.useCallback(a=>!!(e&a),[e]),s=D.useCallback(a=>t(l=>l&~a),[t]),o=D.useCallback(a=>t(l=>l^a),[t]);return{addFlag:r,hasFlag:i,removeFlag:s,toggleFlag:o}}let Qq=D.createContext(null);function Jq(){let n=D.useContext(Qq);if(n===null){let e=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,Jq),e}return n}function S6(){let[n,e]=D.useState([]);return[n.length>0?n.join(" "):void 0,D.useMemo(()=>function(t){let r=gt(s=>(e(o=>[...o,s]),()=>e(o=>{let a=o.slice(),l=a.indexOf(s);return l!==-1&&a.splice(l,1),a}))),i=D.useMemo(()=>({register:r,slot:t.slot,name:t.name,props:t.props}),[r,t.slot,t.name,t.props]);return ht.createElement(Qq.Provider,{value:i},t.children)},[e])]}let Xge="label",Kq=Fn(function(n,e){let{passive:t=!1,...r}=n,i=Jq(),s=`headlessui-label-${Tr()}`,o=Vn(e);Zn(()=>i.register(s),[s,i.register]);let a={ref:o,...i.props,id:s};return t&&("onClick"in a&&delete a.onClick,"onClick"in r&&delete r.onClick),Bn({ourProps:a,theirProps:r,slot:i.slot||{},defaultTag:Xge,name:i.name||"Label"})});var Zge=(n=>(n[n.RegisterOption=0]="RegisterOption",n[n.UnregisterOption=1]="UnregisterOption",n))(Zge||{});let eve={0(n,e){let t=[...n.options,{id:e.id,element:e.element,propsRef:e.propsRef}];return{...n,options:Mm(t,r=>r.element.current)}},1(n,e){let t=n.options.slice(),r=n.options.findIndex(i=>i.id===e.id);return r===-1?n:(t.splice(r,1),{...n,options:t})}},A6=D.createContext(null);A6.displayName="RadioGroupContext";function Yq(n){let e=D.useContext(A6);if(e===null){let t=new Error(`<${n} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,Yq),t}return e}function tve(n,e){return On(e.type,eve,n,e)}let nve="div",rve=Fn(function(n,e){let{value:t,defaultValue:r,name:i,onChange:s,by:o=(B,q)=>B===q,disabled:a=!1,...l}=n,c=gt(typeof o=="string"?(B,q)=>{let K=o;return(B==null?void 0:B[K])===(q==null?void 0:q[K])}:o),[u,d]=D.useReducer(tve,{options:[]}),h=u.options,[f,m]=S6(),[g,v]=x2(),y=`headlessui-radiogroup-${Tr()}`,A=D.useRef(null),C=Vn(A,e),[T,x]=C2(t,s,r),R=D.useMemo(()=>h.find(B=>!B.propsRef.current.disabled),[h]),N=D.useMemo(()=>h.some(B=>c(B.propsRef.current.value,T)),[h,T]),M=gt(B=>{var q;if(a||c(B,T))return!1;let K=(q=h.find(se=>c(se.propsRef.current.value,B)))==null?void 0:q.propsRef.current;return K!=null&&K.disabled?!1:(x==null||x(B),!0)});e6({container:A.current,accept(B){return B.getAttribute("role")==="radio"?NodeFilter.FILTER_REJECT:B.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(B){B.setAttribute("role","none")}});let O=gt(B=>{let q=A.current;if(!q)return;let K=ju(q),se=h.filter(W=>W.propsRef.current.disabled===!1).map(W=>W.element.current);switch(B.key){case bt.Enter:Uq(B.currentTarget);break;case bt.ArrowLeft:case bt.ArrowUp:if(B.preventDefault(),B.stopPropagation(),Us(se,Xr.Previous|Xr.WrapAround)===ff.Success){let W=h.find(ee=>ee.element.current===(K==null?void 0:K.activeElement));W&&M(W.propsRef.current.value)}break;case bt.ArrowRight:case bt.ArrowDown:if(B.preventDefault(),B.stopPropagation(),Us(se,Xr.Next|Xr.WrapAround)===ff.Success){let W=h.find(ee=>ee.element.current===(K==null?void 0:K.activeElement));W&&M(W.propsRef.current.value)}break;case bt.Space:{B.preventDefault(),B.stopPropagation();let W=h.find(ee=>ee.element.current===(K==null?void 0:K.activeElement));W&&M(W.propsRef.current.value)}break}}),P=gt(B=>(d({type:0,...B}),()=>d({type:1,id:B.id}))),z=D.useMemo(()=>({registerOption:P,firstOption:R,containsCheckedOption:N,change:M,disabled:a,value:T,compare:c}),[P,R,N,M,a,T,c]),V={ref:C,id:y,role:"radiogroup","aria-labelledby":f,"aria-describedby":g,onKeyDown:O},$=D.useMemo(()=>({value:T}),[T]);return ht.createElement(v,{name:"RadioGroup.Description"},ht.createElement(m,{name:"RadioGroup.Label"},ht.createElement(A6.Provider,{value:z},i!=null&&T!=null&&E2({[i]:T}).map(([B,q])=>ht.createElement(tc,{features:ec.Hidden,...Vg({key:B,as:"input",type:"radio",checked:q!=null,hidden:!0,readOnly:!0,name:B,value:q})})),Bn({ourProps:V,theirProps:l,slot:$,defaultTag:nve,name:"RadioGroup"}))))});var ive=(n=>(n[n.Empty=1]="Empty",n[n.Active=2]="Active",n))(ive||{});let sve="div",ove=Fn(function(n,e){let t=D.useRef(null),r=Vn(t,e),i=`headlessui-radiogroup-option-${Tr()}`,[s,o]=S6(),[a,l]=x2(),{addFlag:c,removeFlag:u,hasFlag:d}=Yge(1),{value:h,disabled:f=!1,...m}=n,g=D.useRef({value:h,disabled:f});Zn(()=>{g.current.value=h},[h,g]),Zn(()=>{g.current.disabled=f},[f,g]);let{registerOption:v,disabled:y,change:A,firstOption:C,containsCheckedOption:T,value:x,compare:R}=Yq("RadioGroup.Option");Zn(()=>v({id:i,element:t,propsRef:g}),[i,v,t,n]);let N=gt(q=>{var K;if(ku(q.currentTarget))return q.preventDefault();!A(h)||(c(2),(K=t.current)==null||K.focus())}),M=gt(q=>{if(ku(q.currentTarget))return q.preventDefault();c(2)}),O=gt(()=>u(2)),P=(C==null?void 0:C.id)===i,z=y||f,V=R(x,h),$={ref:r,id:i,role:"radio","aria-checked":V?"true":"false","aria-labelledby":s,"aria-describedby":a,"aria-disabled":z?!0:void 0,tabIndex:(()=>z?-1:V||!T&&P?0:-1)(),onClick:z?void 0:N,onFocus:z?void 0:M,onBlur:z?void 0:O},B=D.useMemo(()=>({checked:V,disabled:z,active:d(2)}),[V,z,d]);return ht.createElement(l,{name:"RadioGroup.Description"},ht.createElement(o,{name:"RadioGroup.Label"},Bn({ourProps:$,theirProps:m,slot:B,defaultTag:sve,name:"RadioGroup.Option"})))}),Ja=Object.assign(rve,{Option:ove,Label:Kq,Description:a6}),E6=D.createContext(null);E6.displayName="GroupContext";let ave=D.Fragment;function lve(n){let[e,t]=D.useState(null),[r,i]=S6(),[s,o]=x2(),a=D.useMemo(()=>({switch:e,setSwitch:t,labelledby:r,describedby:s}),[e,t,r,s]),l={},c=n;return ht.createElement(o,{name:"Switch.Description"},ht.createElement(i,{name:"Switch.Label",props:{onClick(){!e||(e.click(),e.focus({preventScroll:!0}))}}},ht.createElement(E6.Provider,{value:a},Bn({ourProps:l,theirProps:c,defaultTag:ave,name:"Switch.Group"}))))}let cve="button",uve=Fn(function(n,e){let{checked:t,defaultChecked:r=!1,onChange:i,name:s,value:o,...a}=n,l=`headlessui-switch-${Tr()}`,c=D.useContext(E6),u=D.useRef(null),d=Vn(u,e,c===null?null:c.setSwitch),[h,f]=C2(t,i,r),m=gt(()=>f==null?void 0:f(!h)),g=gt(T=>{if(ku(T.currentTarget))return T.preventDefault();T.preventDefault(),m()}),v=gt(T=>{T.key===bt.Space?(T.preventDefault(),m()):T.key===bt.Enter&&Uq(T.currentTarget)}),y=gt(T=>T.preventDefault()),A=D.useMemo(()=>({checked:h}),[h]),C={id:l,ref:d,role:"switch",type:Qm(n,u),tabIndex:0,"aria-checked":h,"aria-labelledby":c==null?void 0:c.labelledby,"aria-describedby":c==null?void 0:c.describedby,onClick:g,onKeyUp:v,onKeyPress:y};return ht.createElement(ht.Fragment,null,s!=null&&h&&ht.createElement(tc,{features:ec.Hidden,...Vg({as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:h,name:s,value:o})}),Bn({ourProps:C,theirProps:a,slot:A,defaultTag:cve,name:"Switch"}))}),dve=Object.assign(uve,{Group:lve,Label:Kq,Description:a6});function hve({onFocus:n}){let[e,t]=D.useState(!0);return e?ht.createElement(tc,{as:"button",type:"button",features:ec.Focusable,onFocus:r=>{r.preventDefault();let i,s=50;function o(){if(s--<=0){i&&cancelAnimationFrame(i);return}if(n()){t(!1),cancelAnimationFrame(i);return}i=requestAnimationFrame(o)}i=requestAnimationFrame(o)}}):null}var fve=(n=>(n[n.SetSelectedIndex=0]="SetSelectedIndex",n[n.RegisterTab=1]="RegisterTab",n[n.UnregisterTab=2]="UnregisterTab",n[n.RegisterPanel=3]="RegisterPanel",n[n.UnregisterPanel=4]="UnregisterPanel",n))(fve||{});let pve={0(n,e){let t=n.tabs.filter(s=>{var o;return!((o=s.current)!=null&&o.hasAttribute("disabled"))});if(e.index<0)return{...n,selectedIndex:n.tabs.indexOf(t[0])};if(e.index>n.tabs.length)return{...n,selectedIndex:n.tabs.indexOf(t[t.length-1])};let r=n.tabs.slice(0,e.index),i=[...n.tabs.slice(e.index),...r].find(s=>t.includes(s));return i?{...n,selectedIndex:n.tabs.indexOf(i)}:n},1(n,e){var t;if(n.tabs.includes(e.tab))return n;let r=n.tabs[n.selectedIndex],i=Mm([...n.tabs,e.tab],o=>o.current),s=(t=i.indexOf(r))!=null?t:n.selectedIndex;return s===-1&&(s=n.selectedIndex),{...n,tabs:i,selectedIndex:s}},2(n,e){return{...n,tabs:n.tabs.filter(t=>t!==e.tab)}},3(n,e){return n.panels.includes(e.panel)?n:{...n,panels:Mm([...n.panels,e.panel],t=>t.current)}},4(n,e){return{...n,panels:n.panels.filter(t=>t!==e.panel)}}},C6=D.createContext(null);C6.displayName="TabsSSRContext";function w6(n){let e=D.useContext(C6);if(e===null){let t=new Error(`<${n} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,w6),t}return e}let T6=D.createContext(null);T6.displayName="TabsDataContext";function $g(n){let e=D.useContext(T6);if(e===null){let t=new Error(`<${n} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,$g),t}return e}let x6=D.createContext(null);x6.displayName="TabsActionsContext";function I6(n){let e=D.useContext(x6);if(e===null){let t=new Error(`<${n} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,I6),t}return e}function mve(n,e){return On(e.type,pve,n,e)}let gve=D.Fragment,vve=Fn(function(n,e){let{defaultIndex:t=0,vertical:r=!1,manual:i=!1,onChange:s,selectedIndex:o=null,...a}=n;const l=r?"vertical":"horizontal",c=i?"manual":"auto";let u=o!==null,d=Vn(e),[h,f]=D.useReducer(mve,{selectedIndex:o??t,tabs:[],panels:[]}),m=D.useMemo(()=>({selectedIndex:h.selectedIndex}),[h.selectedIndex]),g=za(s||(()=>{})),v=za(h.tabs),y=D.useMemo(()=>({orientation:l,activation:c,...h}),[l,c,h]),A=za(u?n.selectedIndex:h.selectedIndex),C=D.useMemo(()=>({registerTab(R){return f({type:1,tab:R}),()=>f({type:2,tab:R})},registerPanel(R){return f({type:3,panel:R}),()=>f({type:4,panel:R})},change(R){A.current!==R&&g.current(R),u||f({type:0,index:R})}}),[f,u]);Zn(()=>{f({type:0,index:o??t})},[o]);let T=D.useRef({tabs:[],panels:[]}),x={ref:d};return ht.createElement(C6.Provider,{value:T},ht.createElement(x6.Provider,{value:C},ht.createElement(T6.Provider,{value:y},y.tabs.length<=0&&ht.createElement(hve,{onFocus:()=>{var R,N;for(let M of v.current)if(((R=M.current)==null?void 0:R.tabIndex)===0)return(N=M.current)==null||N.focus(),!0;return!1}}),Bn({ourProps:x,theirProps:a,slot:m,defaultTag:gve,name:"Tabs"}))))}),yve="div",_ve=Fn(function(n,e){let{orientation:t,selectedIndex:r}=$g("Tab.List"),i=Vn(e);return Bn({ourProps:{ref:i,role:"tablist","aria-orientation":t},theirProps:n,slot:{selectedIndex:r},defaultTag:yve,name:"Tabs.List"})}),Sve="button",Ave=Fn(function(n,e){var t,r;let i=`headlessui-tabs-tab-${Tr()}`,{orientation:s,activation:o,selectedIndex:a,tabs:l,panels:c}=$g("Tab"),u=I6("Tab"),d=$g("Tab"),h=w6("Tab"),f=D.useRef(null),m=Vn(f,e);Zn(()=>u.registerTab(f),[u,f]);let g=h.current.tabs.indexOf(i);g===-1&&(g=h.current.tabs.push(i)-1);let v=l.indexOf(f);v===-1&&(v=g);let y=v===a,A=gt(P=>{var z;let V=P();if(V===ff.Success&&o==="auto"){let $=(z=ju(f))==null?void 0:z.activeElement,B=d.tabs.findIndex(q=>q.current===$);B!==-1&&u.change(B)}return V}),C=gt(P=>{let z=l.map(V=>V.current).filter(Boolean);if(P.key===bt.Space||P.key===bt.Enter){P.preventDefault(),P.stopPropagation(),u.change(v);return}switch(P.key){case bt.Home:case bt.PageUp:return P.preventDefault(),P.stopPropagation(),A(()=>Us(z,Xr.First));case bt.End:case bt.PageDown:return P.preventDefault(),P.stopPropagation(),A(()=>Us(z,Xr.Last))}if(A(()=>On(s,{vertical(){return P.key===bt.ArrowUp?Us(z,Xr.Previous|Xr.WrapAround):P.key===bt.ArrowDown?Us(z,Xr.Next|Xr.WrapAround):ff.Error},horizontal(){return P.key===bt.ArrowLeft?Us(z,Xr.Previous|Xr.WrapAround):P.key===bt.ArrowRight?Us(z,Xr.Next|Xr.WrapAround):ff.Error}}))===ff.Success)return P.preventDefault()}),T=D.useRef(!1),x=gt(()=>{var P;T.current||(T.current=!0,(P=f.current)==null||P.focus(),u.change(v),aA(()=>{T.current=!1}))}),R=gt(P=>{P.preventDefault()}),N=D.useMemo(()=>({selected:y}),[y]),M=n,O={ref:m,onKeyDown:C,onMouseDown:R,onClick:x,id:i,role:"tab",type:Qm(n,f),"aria-controls":(r=(t=c[v])==null?void 0:t.current)==null?void 0:r.id,"aria-selected":y,tabIndex:y?0:-1};return Bn({ourProps:O,theirProps:M,slot:N,defaultTag:Sve,name:"Tabs.Tab"})}),Eve="div",Cve=Fn(function(n,e){let{selectedIndex:t}=$g("Tab.Panels"),r=Vn(e),i=D.useMemo(()=>({selectedIndex:t}),[t]);return Bn({ourProps:{ref:r},theirProps:n,slot:i,defaultTag:Eve,name:"Tabs.Panels"})}),wve="div",Tve=Vs.RenderStrategy|Vs.Static,xve=Fn(function(n,e){var t,r,i,s;let{selectedIndex:o,tabs:a,panels:l}=$g("Tab.Panel"),c=I6("Tab.Panel"),u=w6("Tab.Panel"),d=`headlessui-tabs-panel-${Tr()}`,h=D.useRef(null),f=Vn(h,e);Zn(()=>c.registerPanel(h),[c,h]);let m=u.current.panels.indexOf(d);m===-1&&(m=u.current.panels.push(d)-1);let g=l.indexOf(h);g===-1&&(g=m);let v=g===o,y=D.useMemo(()=>({selected:v}),[v]),A=n,C={ref:f,id:d,role:"tabpanel","aria-labelledby":(r=(t=a[g])==null?void 0:t.current)==null?void 0:r.id,tabIndex:v?0:-1};return!v&&((i=n.unmount)==null||i)&&!((s=n.static)!=null&&s)?ht.createElement(tc,{as:"span",...C}):Bn({ourProps:C,theirProps:A,slot:y,defaultTag:wve,features:Tve,visible:v,name:"Tabs.Panel"})}),Ive=Object.assign(Ave,{Group:vve,List:_ve,Panels:Cve,Panel:xve});function bve(n){let e={called:!1};return(...t)=>{if(!e.called)return e.called=!0,n(...t)}}function QM(n,...e){n&&e.length>0&&n.classList.add(...e)}function JM(n,...e){n&&e.length>0&&n.classList.remove(...e)}var Q4=(n=>(n.Ended="ended",n.Cancelled="cancelled",n))(Q4||{});function Mve(n,e){let t=Ua();if(!n)return t.dispose;let{transitionDuration:r,transitionDelay:i}=getComputedStyle(n),[s,o]=[r,i].map(a=>{let[l=0]=a.split(",").filter(Boolean).map(c=>c.includes("ms")?parseFloat(c):parseFloat(c)*1e3).sort((c,u)=>u-c);return l});if(s+o!==0){let a=[];a.push(t.addEventListener(n,"transitionrun",l=>{l.target===l.currentTarget&&(a.splice(0).forEach(c=>c()),a.push(t.addEventListener(n,"transitionend",c=>{c.target===c.currentTarget&&(e("ended"),a.splice(0).forEach(u=>u()))}),t.addEventListener(n,"transitioncancel",c=>{c.target===c.currentTarget&&(e("cancelled"),a.splice(0).forEach(u=>u()))})))}))}else e("ended");return t.add(()=>e("cancelled")),t.dispose}function Rve(n,e,t,r){let i=t?"enter":"leave",s=Ua(),o=r!==void 0?bve(r):()=>{};i==="enter"&&(n.removeAttribute("hidden"),n.style.display="");let a=On(i,{enter:()=>e.enter,leave:()=>e.leave}),l=On(i,{enter:()=>e.enterTo,leave:()=>e.leaveTo}),c=On(i,{enter:()=>e.enterFrom,leave:()=>e.leaveFrom});return JM(n,...e.enter,...e.enterTo,...e.enterFrom,...e.leave,...e.leaveFrom,...e.leaveTo,...e.entered),QM(n,...a,...c),s.nextFrame(()=>{JM(n,...c),QM(n,...l),Mve(n,u=>(u==="ended"&&(JM(n,...a),QM(n,...e.entered)),o(u)))}),s.dispose}function Nve({container:n,direction:e,classes:t,onStart:r,onStop:i}){let s=w2(),o=Yd(),a=za(e);Zn(()=>{let l=Ua();o.add(l.dispose);let c=n.current;if(c&&a.current!=="idle"&&s.current)return l.dispose(),r.current(a.current),l.add(Rve(c,t.current,a.current==="enter",u=>{l.dispose(),On(u,{[Q4.Ended](){i.current(a.current)},[Q4.Cancelled]:()=>{}})})),l.dispose},[e])}function Lp(n=""){return n.split(" ").filter(e=>e.trim().length>1)}let M2=D.createContext(null);M2.displayName="TransitionContext";var Pve=(n=>(n.Visible="visible",n.Hidden="hidden",n))(Pve||{});function Ove(){let n=D.useContext(M2);if(n===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return n}function Dve(){let n=D.useContext(R2);if(n===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return n}let R2=D.createContext(null);R2.displayName="NestingContext";function N2(n){return"children"in n?N2(n.children):n.current.filter(({el:e})=>e.current!==null).filter(({state:e})=>e==="visible").length>0}function Xq(n,e){let t=za(n),r=D.useRef([]),i=w2(),s=Yd(),o=gt((f,m=Pd.Hidden)=>{let g=r.current.findIndex(({el:v})=>v===f);g!==-1&&(On(m,{[Pd.Unmount](){r.current.splice(g,1)},[Pd.Hidden](){r.current[g].state="hidden"}}),s.microTask(()=>{var v;!N2(r)&&i.current&&((v=t.current)==null||v.call(t))}))}),a=gt(f=>{let m=r.current.find(({el:g})=>g===f);return m?m.state!=="visible"&&(m.state="visible"):r.current.push({el:f,state:"visible"}),()=>o(f,Pd.Unmount)}),l=D.useRef([]),c=D.useRef(Promise.resolve()),u=D.useRef({enter:[],leave:[],idle:[]}),d=gt((f,m,g)=>{l.current.splice(0),e&&(e.chains.current[m]=e.chains.current[m].filter(([v])=>v!==f)),e==null||e.chains.current[m].push([f,new Promise(v=>{l.current.push(v)})]),e==null||e.chains.current[m].push([f,new Promise(v=>{Promise.all(u.current[m].map(([y,A])=>A)).then(()=>v())})]),m==="enter"?c.current=c.current.then(()=>e==null?void 0:e.wait.current).then(()=>g(m)):g(m)}),h=gt((f,m,g)=>{Promise.all(u.current[m].splice(0).map(([v,y])=>y)).then(()=>{var v;(v=l.current.shift())==null||v()}).then(()=>g(m))});return D.useMemo(()=>({children:r,register:a,unregister:o,onStart:d,onStop:h,wait:c,chains:u}),[a,o,r,d,h,u,c])}function Lve(){}let kve=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function oB(n){var e;let t={};for(let r of kve)t[r]=(e=n[r])!=null?e:Lve;return t}function Bve(n){let e=D.useRef(oB(n));return D.useEffect(()=>{e.current=oB(n)},[n]),e}let Fve="div",Zq=Vs.RenderStrategy,eQ=Fn(function(n,e){let{beforeEnter:t,afterEnter:r,beforeLeave:i,afterLeave:s,enter:o,enterFrom:a,enterTo:l,entered:c,leave:u,leaveFrom:d,leaveTo:h,...f}=n,m=D.useRef(null),g=Vn(m,e),v=f.unmount?Pd.Unmount:Pd.Hidden,{show:y,appear:A,initial:C}=Ove(),[T,x]=D.useState(y?"visible":"hidden"),R=Dve(),{register:N,unregister:M}=R,O=D.useRef(null);D.useEffect(()=>N(m),[N,m]),D.useEffect(()=>{if(v===Pd.Hidden&&m.current){if(y&&T!=="visible"){x("visible");return}return On(T,{hidden:()=>M(m),visible:()=>N(m)})}},[T,m,N,M,y,v]);let P=za({enter:Lp(o),enterFrom:Lp(a),enterTo:Lp(l),entered:Lp(c),leave:Lp(u),leaveFrom:Lp(d),leaveTo:Lp(h)}),z=Bve({beforeEnter:t,afterEnter:r,beforeLeave:i,afterLeave:s}),V=vv();D.useEffect(()=>{if(V&&T==="visible"&&m.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[m,T,V]);let $=C&&!A,B=(()=>!V||$||O.current===y?"idle":y?"enter":"leave")(),q=gt(Q=>On(Q,{enter:()=>z.current.beforeEnter(),leave:()=>z.current.beforeLeave(),idle:()=>{}})),K=gt(Q=>On(Q,{enter:()=>z.current.afterEnter(),leave:()=>z.current.afterLeave(),idle:()=>{}})),se=Xq(()=>{x("hidden"),M(m)},R);Nve({container:m,classes:P,direction:B,onStart:za(Q=>{se.onStart(m,Q,q)}),onStop:za(Q=>{se.onStop(m,Q,K),Q==="leave"&&!N2(se)&&(x("hidden"),M(m))})}),D.useEffect(()=>{!$||(v===Pd.Hidden?O.current=null:O.current=y)},[y,$,T]);let W=f,ee={ref:g};return ht.createElement(R2.Provider,{value:se},ht.createElement(yv,{value:On(T,{visible:Mi.Open,hidden:Mi.Closed})},Bn({ourProps:ee,theirProps:W,defaultTag:Fve,features:Zq,visible:T==="visible",name:"Transition.Child"})))}),J4=Fn(function(n,e){let{show:t,appear:r=!1,unmount:i,...s}=n,o=D.useRef(null),a=Vn(o,e);vv();let l=ch();if(t===void 0&&l!==null&&(t=On(l,{[Mi.Open]:!0,[Mi.Closed]:!1})),![!0,!1].includes(t))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[c,u]=D.useState(t?"visible":"hidden"),d=Xq(()=>{u("hidden")}),[h,f]=D.useState(!0),m=D.useRef([t]);Zn(()=>{h!==!1&&m.current[m.current.length-1]!==t&&(m.current.push(t),f(!1))},[m,t]);let g=D.useMemo(()=>({show:t,appear:r,initial:h}),[t,r,h]);D.useEffect(()=>{if(t)u("visible");else if(!N2(d))u("hidden");else{let y=o.current;if(!y)return;let A=y.getBoundingClientRect();A.x===0&&A.y===0&&A.width===0&&A.height===0&&u("hidden")}},[t,d]);let v={unmount:i};return ht.createElement(R2.Provider,{value:d},ht.createElement(M2.Provider,{value:g},Bn({ourProps:{...v,as:D.Fragment,children:ht.createElement(eQ,{ref:a,...v,...s})},theirProps:{},defaultTag:D.Fragment,features:Zq,visible:c==="visible",name:"Transition"})))}),zve=Fn(function(n,e){let t=D.useContext(M2)!==null,r=ch()!==null;return ht.createElement(ht.Fragment,null,!t&&r?ht.createElement(J4,{ref:e,...n}):ht.createElement(eQ,{ref:e,...n}))}),Zr=Object.assign(J4,{Child:zve,Root:J4});const Uve=Object.freeze(Object.defineProperty({__proto__:null,Combobox:p_,Dialog:Dd,Disclosure:nge,FocusTrap:$0,Listbox:zi,Menu:jl,Popover:aT,Portal:sx,RadioGroup:Ja,Switch:dve,Tab:Ive,Transition:Zr},Symbol.toStringTag,{value:"Module"})),tQ=({className:n,title:e,loading:t=!0})=>w.jsx("svg",{...e?{}:{"aria-hidden":"true"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",focusable:"false",role:"img",className:er(n,{"memori-loading-icon":t}),"aria-label":e,children:w.jsx("path",{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"})}),vl=({spinning:n=!1,primary:e=!1,className:t,children:r})=>w.jsxs("div",{className:er("memori-spin",t,{"memori-spin--spinning":n,"memori-spin--primary":e}),children:[r,w.jsx("div",{className:"memori-spin--spinner",children:w.jsx(tQ,{loading:!0})})]}),Pt=({primary:n=!1,outlined:e=!1,ghost:t=!1,padded:r=!0,shape:i="rounded",danger:s=!1,loading:o=!1,disabled:a=!1,block:l=!1,icon:c,className:u,title:d,id:h,htmlType:f,onClick:m,onMouseDown:g,onMouseUp:v,onMouseLeave:y,onTouchStart:A,onTouchEnd:C,children:T,isActive:x})=>w.jsxs("button",{id:h,type:f,onClick:m,onMouseDown:g,onMouseUp:v,onMouseLeave:y,onTouchStart:A,onTouchEnd:C,title:d,disabled:o||a,className:er("memori-button",{"memori-button--primary":n,"memori-button--outlined":e,"memori-button--ghost":t,"memori-button--square":i==="square","memori-button--rounded":i==="rounded","memori-button--circle":i==="circle","memori-button--padded":r,"memori-button--block":l,"memori-button--with-icon":(c||o)&&T,"memori-button--icon-only":(c||o)&&!T,"memori-button--danger":s,"memori-button--loading":o,"memori-button--active":x},u),children:[c&&!o&&w.jsx("span",{className:"memori-button--icon",children:c}),o&&w.jsx("span",{className:"memori-button--icon loading-icon",children:w.jsx(tQ,{loading:!0})}),T]}),pA=({className:n,title:e})=>w.jsx("svg",{...e?{}:{"aria-hidden":"true"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",focusable:"false",role:"img",className:n,"aria-label":e,children:w.jsx("path",{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 0 0 203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"})}),Sv=({open:n=!1,onClose:e,className:t,title:r,description:i,children:s,footer:o,loading:a=!1,animated:l=!0,side:c="right",closable:u=!0,width:d="100%",widthMd:h="80%",widthLg:f="60%"})=>w.jsx(Zr,{appear:!0,show:n,as:ht.Fragment,children:w.jsxs(Dd,{open:n,onClose:e,className:er("memori-drawer",t),children:[w.jsx(Zr.Child,{as:ht.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:w.jsx("div",{className:"memori-drawer--backdrop"})}),w.jsx("div",{className:"memori-drawer--container",children:w.jsx("div",{className:"memori-drawer--container-scrollable",children:w.jsx(Zr.Child,{static:!0,as:ht.Fragment,enter:"ease-out duration-300",enterFrom:l?"max-w-0 opacity-0":"opacity-0",enterTo:"max-w-80 opacity-100",leave:"ease-in duration-200",leaveFrom:"max-w-80 opacity-100",leaveTo:l?"max-w-0 opacity-0":"opacity-0",children:w.jsxs(Dd.Panel,{className:er("memori-drawer--panel",{"memori-drawer--panel-left":c==="left","memori-drawer--with-footer":!!o}),children:[w.jsx("style",{dangerouslySetInnerHTML:{__html:`
                    .memori-drawer--panel {
                      --memori-drawer--width: ${d};
                      --memori-drawer--width-lg: ${f};
                      --memori-drawer--width-md: ${h};
                    }
                  `}}),u&&w.jsx("div",{className:"memori-drawer--close",children:w.jsx(Pt,{shape:"circle",outlined:!0,icon:w.jsx(pA,{}),onClick:()=>e(!1)})}),w.jsxs(vl,{spinning:a,children:[r&&w.jsx(Dd.Title,{className:"memori-drawer--title",children:r}),i&&w.jsx(Dd.Description,{className:"memori-drawer--description",children:i}),s,o&&w.jsx("div",{className:"memori-drawer--footer",children:o})]})]})})})})]})}),jve=(6357+6378)/2,qE=Math.PI/180,Gve=n=>{const[e,t,r,i]=typeof n[0]=="string"?n.map(parseFloat):n,s=e*qE,o=r*qE,a=t*qE,l=i*qE,c=2*Math.asin(Math.sqrt(Math.sin((a-s)/2)*Math.sin((a-s)/2)+Math.cos(s)*Math.cos(a)*Math.sin((l-o)/2)*Math.sin((l-o)/2)));return jve*c};function nQ(n,e){const t=D.useRef(e);D.useEffect(function(){e!==t.current&&n.attributionControl!=null&&(t.current!=null&&n.attributionControl.removeAttribution(t.current),e!=null&&n.attributionControl.addAttribution(e)),t.current=e},[n,e])}const Hve=1;function Vve(n){return Object.freeze({__version:Hve,map:n})}function $ve(n,e){return Object.freeze({...n,...e})}const rQ=D.createContext(null),iQ=rQ.Provider;function b6(){const n=D.useContext(rQ);if(n==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return n}function Wve(n){function e(t,r){const{instance:i,context:s}=n(t).current;return D.useImperativeHandle(r,()=>i),t.children==null?null:ht.createElement(iQ,{value:s},t.children)}return D.forwardRef(e)}function qve(n){function e(t,r){const[i,s]=D.useState(!1),{instance:o}=n(t,s).current;D.useImperativeHandle(r,()=>o),D.useEffect(function(){i&&o.update()},[o,i,t.children]);const a=o._contentNode;return a?Ag.createPortal(t.children,a):null}return D.forwardRef(e)}function Qve(n){function e(t,r){const{instance:i}=n(t).current;return D.useImperativeHandle(r,()=>i),null}return D.forwardRef(e)}function sQ(n,e){const t=D.useRef();D.useEffect(function(){return e!=null&&n.instance.on(e),t.current=e,function(){t.current!=null&&n.instance.off(t.current),t.current=null}},[n,e])}function M6(n,e){const t=n.pane??e.pane;return t?{...n,pane:t}:n}function Jve(n,e){return function(r,i){const s=b6(),o=n(M6(r,s),s);return nQ(s.map,r.attribution),sQ(o.current,r.eventHandlers),e(o.current,s,r,i),o}}var K4={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(n,e){(function(t,r){r(e)})(Ze,function(t){var r="1.9.4";function i(p){var S,I,k,G;for(I=1,k=arguments.length;I<k;I++){G=arguments[I];for(S in G)p[S]=G[S]}return p}var s=Object.create||function(){function p(){}return function(S){return p.prototype=S,new p}}();function o(p,S){var I=Array.prototype.slice;if(p.bind)return p.bind.apply(p,I.call(arguments,1));var k=I.call(arguments,2);return function(){return p.apply(S,k.length?k.concat(I.call(arguments)):arguments)}}var a=0;function l(p){return"_leaflet_id"in p||(p._leaflet_id=++a),p._leaflet_id}function c(p,S,I){var k,G,J,me;return me=function(){k=!1,G&&(J.apply(I,G),G=!1)},J=function(){k?G=arguments:(p.apply(I,arguments),setTimeout(me,S),k=!0)},J}function u(p,S,I){var k=S[1],G=S[0],J=k-G;return p===k&&I?p:((p-G)%J+J)%J+G}function d(){return!1}function h(p,S){if(S===!1)return p;var I=Math.pow(10,S===void 0?6:S);return Math.round(p*I)/I}function f(p){return p.trim?p.trim():p.replace(/^\s+|\s+$/g,"")}function m(p){return f(p).split(/\s+/)}function g(p,S){Object.prototype.hasOwnProperty.call(p,"options")||(p.options=p.options?s(p.options):{});for(var I in S)p.options[I]=S[I];return p.options}function v(p,S,I){var k=[];for(var G in p)k.push(encodeURIComponent(I?G.toUpperCase():G)+"="+encodeURIComponent(p[G]));return(!S||S.indexOf("?")===-1?"?":"&")+k.join("&")}var y=/\{ *([\w_ -]+) *\}/g;function A(p,S){return p.replace(y,function(I,k){var G=S[k];if(G===void 0)throw new Error("No value provided for variable "+I);return typeof G=="function"&&(G=G(S)),G})}var C=Array.isArray||function(p){return Object.prototype.toString.call(p)==="[object Array]"};function T(p,S){for(var I=0;I<p.length;I++)if(p[I]===S)return I;return-1}var x="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function R(p){return window["webkit"+p]||window["moz"+p]||window["ms"+p]}var N=0;function M(p){var S=+new Date,I=Math.max(0,16-(S-N));return N=S+I,window.setTimeout(p,I)}var O=window.requestAnimationFrame||R("RequestAnimationFrame")||M,P=window.cancelAnimationFrame||R("CancelAnimationFrame")||R("CancelRequestAnimationFrame")||function(p){window.clearTimeout(p)};function z(p,S,I){if(I&&O===M)p.call(S);else return O.call(window,o(p,S))}function V(p){p&&P.call(window,p)}var $={__proto__:null,extend:i,create:s,bind:o,get lastId(){return a},stamp:l,throttle:c,wrapNum:u,falseFn:d,formatNum:h,trim:f,splitWords:m,setOptions:g,getParamString:v,template:A,isArray:C,indexOf:T,emptyImageUrl:x,requestFn:O,cancelFn:P,requestAnimFrame:z,cancelAnimFrame:V};function B(){}B.extend=function(p){var S=function(){g(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},I=S.__super__=this.prototype,k=s(I);k.constructor=S,S.prototype=k;for(var G in this)Object.prototype.hasOwnProperty.call(this,G)&&G!=="prototype"&&G!=="__super__"&&(S[G]=this[G]);return p.statics&&i(S,p.statics),p.includes&&(q(p.includes),i.apply(null,[k].concat(p.includes))),i(k,p),delete k.statics,delete k.includes,k.options&&(k.options=I.options?s(I.options):{},i(k.options,p.options)),k._initHooks=[],k.callInitHooks=function(){if(!this._initHooksCalled){I.callInitHooks&&I.callInitHooks.call(this),this._initHooksCalled=!0;for(var J=0,me=k._initHooks.length;J<me;J++)k._initHooks[J].call(this)}},S},B.include=function(p){var S=this.prototype.options;return i(this.prototype,p),p.options&&(this.prototype.options=S,this.mergeOptions(p.options)),this},B.mergeOptions=function(p){return i(this.prototype.options,p),this},B.addInitHook=function(p){var S=Array.prototype.slice.call(arguments,1),I=typeof p=="function"?p:function(){this[p].apply(this,S)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(I),this};function q(p){if(!(typeof L>"u"||!L||!L.Mixin)){p=C(p)?p:[p];for(var S=0;S<p.length;S++)p[S]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var K={on:function(p,S,I){if(typeof p=="object")for(var k in p)this._on(k,p[k],S);else{p=m(p);for(var G=0,J=p.length;G<J;G++)this._on(p[G],S,I)}return this},off:function(p,S,I){if(!arguments.length)delete this._events;else if(typeof p=="object")for(var k in p)this._off(k,p[k],S);else{p=m(p);for(var G=arguments.length===1,J=0,me=p.length;J<me;J++)G?this._off(p[J]):this._off(p[J],S,I)}return this},_on:function(p,S,I,k){if(typeof S!="function"){console.warn("wrong listener type: "+typeof S);return}if(this._listens(p,S,I)===!1){I===this&&(I=void 0);var G={fn:S,ctx:I};k&&(G.once=!0),this._events=this._events||{},this._events[p]=this._events[p]||[],this._events[p].push(G)}},_off:function(p,S,I){var k,G,J;if(this._events&&(k=this._events[p],!!k)){if(arguments.length===1){if(this._firingCount)for(G=0,J=k.length;G<J;G++)k[G].fn=d;delete this._events[p];return}if(typeof S!="function"){console.warn("wrong listener type: "+typeof S);return}var me=this._listens(p,S,I);if(me!==!1){var be=k[me];this._firingCount&&(be.fn=d,this._events[p]=k=k.slice()),k.splice(me,1)}}},fire:function(p,S,I){if(!this.listens(p,I))return this;var k=i({},S,{type:p,target:this,sourceTarget:S&&S.sourceTarget||this});if(this._events){var G=this._events[p];if(G){this._firingCount=this._firingCount+1||1;for(var J=0,me=G.length;J<me;J++){var be=G[J],Ue=be.fn;be.once&&this.off(p,Ue,be.ctx),Ue.call(be.ctx||this,k)}this._firingCount--}}return I&&this._propagateEvent(k),this},listens:function(p,S,I,k){typeof p!="string"&&console.warn('"string" type argument expected');var G=S;typeof S!="function"&&(k=!!S,G=void 0,I=void 0);var J=this._events&&this._events[p];if(J&&J.length&&this._listens(p,G,I)!==!1)return!0;if(k){for(var me in this._eventParents)if(this._eventParents[me].listens(p,S,I,k))return!0}return!1},_listens:function(p,S,I){if(!this._events)return!1;var k=this._events[p]||[];if(!S)return!!k.length;I===this&&(I=void 0);for(var G=0,J=k.length;G<J;G++)if(k[G].fn===S&&k[G].ctx===I)return G;return!1},once:function(p,S,I){if(typeof p=="object")for(var k in p)this._on(k,p[k],S,!0);else{p=m(p);for(var G=0,J=p.length;G<J;G++)this._on(p[G],S,I,!0)}return this},addEventParent:function(p){return this._eventParents=this._eventParents||{},this._eventParents[l(p)]=p,this},removeEventParent:function(p){return this._eventParents&&delete this._eventParents[l(p)],this},_propagateEvent:function(p){for(var S in this._eventParents)this._eventParents[S].fire(p.type,i({layer:p.target,propagatedFrom:p.target},p),!0)}};K.addEventListener=K.on,K.removeEventListener=K.clearAllEventListeners=K.off,K.addOneTimeEventListener=K.once,K.fireEvent=K.fire,K.hasEventListeners=K.listens;var se=B.extend(K);function W(p,S,I){this.x=I?Math.round(p):p,this.y=I?Math.round(S):S}var ee=Math.trunc||function(p){return p>0?Math.floor(p):Math.ceil(p)};W.prototype={clone:function(){return new W(this.x,this.y)},add:function(p){return this.clone()._add(Q(p))},_add:function(p){return this.x+=p.x,this.y+=p.y,this},subtract:function(p){return this.clone()._subtract(Q(p))},_subtract:function(p){return this.x-=p.x,this.y-=p.y,this},divideBy:function(p){return this.clone()._divideBy(p)},_divideBy:function(p){return this.x/=p,this.y/=p,this},multiplyBy:function(p){return this.clone()._multiplyBy(p)},_multiplyBy:function(p){return this.x*=p,this.y*=p,this},scaleBy:function(p){return new W(this.x*p.x,this.y*p.y)},unscaleBy:function(p){return new W(this.x/p.x,this.y/p.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ee(this.x),this.y=ee(this.y),this},distanceTo:function(p){p=Q(p);var S=p.x-this.x,I=p.y-this.y;return Math.sqrt(S*S+I*I)},equals:function(p){return p=Q(p),p.x===this.x&&p.y===this.y},contains:function(p){return p=Q(p),Math.abs(p.x)<=Math.abs(this.x)&&Math.abs(p.y)<=Math.abs(this.y)},toString:function(){return"Point("+h(this.x)+", "+h(this.y)+")"}};function Q(p,S,I){return p instanceof W?p:C(p)?new W(p[0],p[1]):p==null?p:typeof p=="object"&&"x"in p&&"y"in p?new W(p.x,p.y):new W(p,S,I)}function Y(p,S){if(p)for(var I=S?[p,S]:p,k=0,G=I.length;k<G;k++)this.extend(I[k])}Y.prototype={extend:function(p){var S,I;if(!p)return this;if(p instanceof W||typeof p[0]=="number"||"x"in p)S=I=Q(p);else if(p=ae(p),S=p.min,I=p.max,!S||!I)return this;return!this.min&&!this.max?(this.min=S.clone(),this.max=I.clone()):(this.min.x=Math.min(S.x,this.min.x),this.max.x=Math.max(I.x,this.max.x),this.min.y=Math.min(S.y,this.min.y),this.max.y=Math.max(I.y,this.max.y)),this},getCenter:function(p){return Q((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,p)},getBottomLeft:function(){return Q(this.min.x,this.max.y)},getTopRight:function(){return Q(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(p){var S,I;return typeof p[0]=="number"||p instanceof W?p=Q(p):p=ae(p),p instanceof Y?(S=p.min,I=p.max):S=I=p,S.x>=this.min.x&&I.x<=this.max.x&&S.y>=this.min.y&&I.y<=this.max.y},intersects:function(p){p=ae(p);var S=this.min,I=this.max,k=p.min,G=p.max,J=G.x>=S.x&&k.x<=I.x,me=G.y>=S.y&&k.y<=I.y;return J&&me},overlaps:function(p){p=ae(p);var S=this.min,I=this.max,k=p.min,G=p.max,J=G.x>S.x&&k.x<I.x,me=G.y>S.y&&k.y<I.y;return J&&me},isValid:function(){return!!(this.min&&this.max)},pad:function(p){var S=this.min,I=this.max,k=Math.abs(S.x-I.x)*p,G=Math.abs(S.y-I.y)*p;return ae(Q(S.x-k,S.y-G),Q(I.x+k,I.y+G))},equals:function(p){return p?(p=ae(p),this.min.equals(p.getTopLeft())&&this.max.equals(p.getBottomRight())):!1}};function ae(p,S){return!p||p instanceof Y?p:new Y(p,S)}function fe(p,S){if(p)for(var I=S?[p,S]:p,k=0,G=I.length;k<G;k++)this.extend(I[k])}fe.prototype={extend:function(p){var S=this._southWest,I=this._northEast,k,G;if(p instanceof ge)k=p,G=p;else if(p instanceof fe){if(k=p._southWest,G=p._northEast,!k||!G)return this}else return p?this.extend(Se(p)||we(p)):this;return!S&&!I?(this._southWest=new ge(k.lat,k.lng),this._northEast=new ge(G.lat,G.lng)):(S.lat=Math.min(k.lat,S.lat),S.lng=Math.min(k.lng,S.lng),I.lat=Math.max(G.lat,I.lat),I.lng=Math.max(G.lng,I.lng)),this},pad:function(p){var S=this._southWest,I=this._northEast,k=Math.abs(S.lat-I.lat)*p,G=Math.abs(S.lng-I.lng)*p;return new fe(new ge(S.lat-k,S.lng-G),new ge(I.lat+k,I.lng+G))},getCenter:function(){return new ge((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ge(this.getNorth(),this.getWest())},getSouthEast:function(){return new ge(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(p){typeof p[0]=="number"||p instanceof ge||"lat"in p?p=Se(p):p=we(p);var S=this._southWest,I=this._northEast,k,G;return p instanceof fe?(k=p.getSouthWest(),G=p.getNorthEast()):k=G=p,k.lat>=S.lat&&G.lat<=I.lat&&k.lng>=S.lng&&G.lng<=I.lng},intersects:function(p){p=we(p);var S=this._southWest,I=this._northEast,k=p.getSouthWest(),G=p.getNorthEast(),J=G.lat>=S.lat&&k.lat<=I.lat,me=G.lng>=S.lng&&k.lng<=I.lng;return J&&me},overlaps:function(p){p=we(p);var S=this._southWest,I=this._northEast,k=p.getSouthWest(),G=p.getNorthEast(),J=G.lat>S.lat&&k.lat<I.lat,me=G.lng>S.lng&&k.lng<I.lng;return J&&me},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(p,S){return p?(p=we(p),this._southWest.equals(p.getSouthWest(),S)&&this._northEast.equals(p.getNorthEast(),S)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function we(p,S){return p instanceof fe?p:new fe(p,S)}function ge(p,S,I){if(isNaN(p)||isNaN(S))throw new Error("Invalid LatLng object: ("+p+", "+S+")");this.lat=+p,this.lng=+S,I!==void 0&&(this.alt=+I)}ge.prototype={equals:function(p,S){if(!p)return!1;p=Se(p);var I=Math.max(Math.abs(this.lat-p.lat),Math.abs(this.lng-p.lng));return I<=(S===void 0?1e-9:S)},toString:function(p){return"LatLng("+h(this.lat,p)+", "+h(this.lng,p)+")"},distanceTo:function(p){return xe.distance(this,Se(p))},wrap:function(){return xe.wrapLatLng(this)},toBounds:function(p){var S=180*p/40075017,I=S/Math.cos(Math.PI/180*this.lat);return we([this.lat-S,this.lng-I],[this.lat+S,this.lng+I])},clone:function(){return new ge(this.lat,this.lng,this.alt)}};function Se(p,S,I){return p instanceof ge?p:C(p)&&typeof p[0]!="object"?p.length===3?new ge(p[0],p[1],p[2]):p.length===2?new ge(p[0],p[1]):null:p==null?p:typeof p=="object"&&"lat"in p?new ge(p.lat,"lng"in p?p.lng:p.lon,p.alt):S===void 0?null:new ge(p,S,I)}var Ke={latLngToPoint:function(p,S){var I=this.projection.project(p),k=this.scale(S);return this.transformation._transform(I,k)},pointToLatLng:function(p,S){var I=this.scale(S),k=this.transformation.untransform(p,I);return this.projection.unproject(k)},project:function(p){return this.projection.project(p)},unproject:function(p){return this.projection.unproject(p)},scale:function(p){return 256*Math.pow(2,p)},zoom:function(p){return Math.log(p/256)/Math.LN2},getProjectedBounds:function(p){if(this.infinite)return null;var S=this.projection.bounds,I=this.scale(p),k=this.transformation.transform(S.min,I),G=this.transformation.transform(S.max,I);return new Y(k,G)},infinite:!1,wrapLatLng:function(p){var S=this.wrapLng?u(p.lng,this.wrapLng,!0):p.lng,I=this.wrapLat?u(p.lat,this.wrapLat,!0):p.lat,k=p.alt;return new ge(I,S,k)},wrapLatLngBounds:function(p){var S=p.getCenter(),I=this.wrapLatLng(S),k=S.lat-I.lat,G=S.lng-I.lng;if(k===0&&G===0)return p;var J=p.getSouthWest(),me=p.getNorthEast(),be=new ge(J.lat-k,J.lng-G),Ue=new ge(me.lat-k,me.lng-G);return new fe(be,Ue)}},xe=i({},Ke,{wrapLng:[-180,180],R:6371e3,distance:function(p,S){var I=Math.PI/180,k=p.lat*I,G=S.lat*I,J=Math.sin((S.lat-p.lat)*I/2),me=Math.sin((S.lng-p.lng)*I/2),be=J*J+Math.cos(k)*Math.cos(G)*me*me,Ue=2*Math.atan2(Math.sqrt(be),Math.sqrt(1-be));return this.R*Ue}}),Qe=6378137,We={R:Qe,MAX_LATITUDE:85.0511287798,project:function(p){var S=Math.PI/180,I=this.MAX_LATITUDE,k=Math.max(Math.min(I,p.lat),-I),G=Math.sin(k*S);return new W(this.R*p.lng*S,this.R*Math.log((1+G)/(1-G))/2)},unproject:function(p){var S=180/Math.PI;return new ge((2*Math.atan(Math.exp(p.y/this.R))-Math.PI/2)*S,p.x*S/this.R)},bounds:function(){var p=Qe*Math.PI;return new Y([-p,-p],[p,p])}()};function Ve(p,S,I,k){if(C(p)){this._a=p[0],this._b=p[1],this._c=p[2],this._d=p[3];return}this._a=p,this._b=S,this._c=I,this._d=k}Ve.prototype={transform:function(p,S){return this._transform(p.clone(),S)},_transform:function(p,S){return S=S||1,p.x=S*(this._a*p.x+this._b),p.y=S*(this._c*p.y+this._d),p},untransform:function(p,S){return S=S||1,new W((p.x/S-this._b)/this._a,(p.y/S-this._d)/this._c)}};function te(p,S,I,k){return new Ve(p,S,I,k)}var ce=i({},xe,{code:"EPSG:3857",projection:We,transformation:function(){var p=.5/(Math.PI*We.R);return te(p,.5,-p,.5)}()}),de=i({},ce,{code:"EPSG:900913"});function Pe(p){return document.createElementNS("http://www.w3.org/2000/svg",p)}function Te(p,S){var I="",k,G,J,me,be,Ue;for(k=0,J=p.length;k<J;k++){for(be=p[k],G=0,me=be.length;G<me;G++)Ue=be[G],I+=(G?"L":"M")+Ue.x+" "+Ue.y;I+=S?re.svg?"z":"x":""}return I||"M0 0"}var De=document.documentElement.style,Ge="ActiveXObject"in window,it=Ge&&!document.addEventListener,ke="msLaunchUri"in navigator&&!("documentMode"in document),ct=Yn("webkit"),oe=Yn("android"),ne=Yn("android 2")||Yn("android 3"),Oe=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),st=oe&&Yn("Google")&&Oe<537&&!("AudioNode"in window),Je=!!window.opera,ft=!ke&&Yn("chrome"),zt=Yn("gecko")&&!ct&&!Je&&!Ge,je=!ft&&Yn("safari"),Bt=Yn("phantom"),Ct="OTransition"in De,wt=navigator.platform.indexOf("Win")===0,xt=Ge&&"transition"in De,qt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ne,cn="MozPerspective"in De,Ae=!window.L_DISABLE_3D&&(xt||qt||cn)&&!Ct&&!Bt,ue=typeof orientation<"u"||Yn("mobile"),et=ue&&ct,Be=ue&&qt,lt=!window.PointerEvent&&window.MSPointerEvent,St=!!(window.PointerEvent||lt),nn="ontouchstart"in window||!!window.TouchEvent,Dr=!window.L_NO_TOUCH&&(nn||St),mr=ue&&Je,wn=ue&&zt,yn=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,jr=function(){var p=!1;try{var S=Object.defineProperty({},"passive",{get:function(){p=!0}});window.addEventListener("testPassiveEventSupport",d,S),window.removeEventListener("testPassiveEventSupport",d,S)}catch{}return p}(),Mr=function(){return!!document.createElement("canvas").getContext}(),Wi=!!(document.createElementNS&&Pe("svg").createSVGRect),nr=!!Wi&&function(){var p=document.createElement("div");return p.innerHTML="<svg/>",(p.firstChild&&p.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),ma=!Wi&&function(){try{var p=document.createElement("div");p.innerHTML='<v:shape adj="1"/>';var S=p.firstChild;return S.style.behavior="url(#default#VML)",S&&typeof S.adj=="object"}catch{return!1}}(),_l=navigator.platform.indexOf("Mac")===0,qi=navigator.platform.indexOf("Linux")===0;function Yn(p){return navigator.userAgent.toLowerCase().indexOf(p)>=0}var re={ie:Ge,ielt9:it,edge:ke,webkit:ct,android:oe,android23:ne,androidStock:st,opera:Je,chrome:ft,gecko:zt,safari:je,phantom:Bt,opera12:Ct,win:wt,ie3d:xt,webkit3d:qt,gecko3d:cn,any3d:Ae,mobile:ue,mobileWebkit:et,mobileWebkit3d:Be,msPointer:lt,pointer:St,touch:Dr,touchNative:nn,mobileOpera:mr,mobileGecko:wn,retina:yn,passiveEvents:jr,canvas:Mr,svg:Wi,vml:ma,inlineSvg:nr,mac:_l,linux:qi},Re=re.msPointer?"MSPointerDown":"pointerdown",qe=re.msPointer?"MSPointerMove":"pointermove",Le=re.msPointer?"MSPointerUp":"pointerup",$e=re.msPointer?"MSPointerCancel":"pointercancel",Qt={touchstart:Re,touchmove:qe,touchend:Le,touchcancel:$e},Jt={touchstart:rn,touchmove:qn,touchend:qn,touchcancel:qn},ln={},Xt=!1;function Sn(p,S,I){return S==="touchstart"&&$n(),Jt[S]?(I=Jt[S].bind(this,I),p.addEventListener(Qt[S],I,!1),I):(console.warn("wrong event specified:",S),d)}function Ie(p,S,I){if(!Qt[S]){console.warn("wrong event specified:",S);return}p.removeEventListener(Qt[S],I,!1)}function ye(p){ln[p.pointerId]=p}function rt(p){ln[p.pointerId]&&(ln[p.pointerId]=p)}function at(p){delete ln[p.pointerId]}function $n(){Xt||(document.addEventListener(Re,ye,!0),document.addEventListener(qe,rt,!0),document.addEventListener(Le,at,!0),document.addEventListener($e,at,!0),Xt=!0)}function qn(p,S){if(S.pointerType!==(S.MSPOINTER_TYPE_MOUSE||"mouse")){S.touches=[];for(var I in ln)S.touches.push(ln[I]);S.changedTouches=[S],p(S)}}function rn(p,S){S.MSPOINTER_TYPE_TOUCH&&S.pointerType===S.MSPOINTER_TYPE_TOUCH&&Wn(S),qn(p,S)}function Rt(p){var S={},I,k;for(k in p)I=p[k],S[k]=I&&I.bind?I.bind(p):I;return p=S,S.type="dblclick",S.detail=2,S.isTrusted=!1,S._simulated=!0,S}var rr=200;function mn(p,S){p.addEventListener("dblclick",S);var I=0,k;function G(J){if(J.detail!==1){k=J.detail;return}if(!(J.pointerType==="mouse"||J.sourceCapabilities&&!J.sourceCapabilities.firesTouchEvents)){var me=Sl(J);if(!(me.some(function(Ue){return Ue instanceof HTMLLabelElement&&Ue.attributes.for})&&!me.some(function(Ue){return Ue instanceof HTMLInputElement||Ue instanceof HTMLSelectElement}))){var be=Date.now();be-I<=rr?(k++,k===2&&S(Rt(J))):k=1,I=be}}}return p.addEventListener("click",G),{dblclick:S,simDblclick:G}}function Tn(p,S){p.removeEventListener("dblclick",S.dblclick),p.removeEventListener("click",S.simDblclick)}var Gr=Lo(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),gr=Lo(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ri=gr==="webkitTransition"||gr==="OTransition"?gr+"End":"transitionend";function xr(p){return typeof p=="string"?document.getElementById(p):p}function zr(p,S){var I=p.style[S]||p.currentStyle&&p.currentStyle[S];if((!I||I==="auto")&&document.defaultView){var k=document.defaultView.getComputedStyle(p,null);I=k?k[S]:null}return I==="auto"?null:I}function jn(p,S,I){var k=document.createElement(p);return k.className=S||"",I&&I.appendChild(k),k}function Dn(p){var S=p.parentNode;S&&S.removeChild(p)}function ga(p){for(;p.firstChild;)p.removeChild(p.firstChild)}function co(p){var S=p.parentNode;S&&S.lastChild!==p&&S.appendChild(p)}function is(p){var S=p.parentNode;S&&S.firstChild!==p&&S.insertBefore(p,S.firstChild)}function mh(p,S){if(p.classList!==void 0)return p.classList.contains(S);var I=$u(p);return I.length>0&&new RegExp("(^|\\s)"+S+"(\\s|$)").test(I)}function An(p,S){if(p.classList!==void 0)for(var I=m(S),k=0,G=I.length;k<G;k++)p.classList.add(I[k]);else if(!mh(p,S)){var J=$u(p);va(p,(J?J+" ":"")+S)}}function gn(p,S){p.classList!==void 0?p.classList.remove(S):va(p,f((" "+$u(p)+" ").replace(" "+S+" "," ")))}function va(p,S){p.className.baseVal===void 0?p.className=S:p.className.baseVal=S}function $u(p){return p.correspondingElement&&(p=p.correspondingElement),p.className.baseVal===void 0?p.className:p.className.baseVal}function Os(p,S){"opacity"in p.style?p.style.opacity=S:"filter"in p.style&&tu(p,S)}function tu(p,S){var I=!1,k="DXImageTransform.Microsoft.Alpha";try{I=p.filters.item(k)}catch{if(S===1)return}S=Math.round(S*100),I?(I.Enabled=S!==100,I.Opacity=S):p.style.filter+=" progid:"+k+"(opacity="+S+")"}function Lo(p){for(var S=document.documentElement.style,I=0;I<p.length;I++)if(p[I]in S)return p[I];return!1}function ko(p,S,I){var k=S||new W(0,0);p.style[Gr]=(re.ie3d?"translate("+k.x+"px,"+k.y+"px)":"translate3d("+k.x+"px,"+k.y+"px,0)")+(I?" scale("+I+")":"")}function Rr(p,S){p._leaflet_pos=S,re.any3d?ko(p,S):(p.style.left=S.x+"px",p.style.top=S.y+"px")}function ya(p){return p._leaflet_pos||new W(0,0)}var Ri,Ni,gh;if("onselectstart"in document)Ri=function(){En(window,"selectstart",Wn)},Ni=function(){Xn(window,"selectstart",Wn)};else{var nu=Lo(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ri=function(){if(nu){var p=document.documentElement.style;gh=p[nu],p[nu]="none"}},Ni=function(){nu&&(document.documentElement.style[nu]=gh,gh=void 0)}}function vh(){En(window,"dragstart",Wn)}function yh(){Xn(window,"dragstart",Wn)}var lc,ru;function _h(p){for(;p.tabIndex===-1;)p=p.parentNode;p.style&&(iu(),lc=p,ru=p.style.outlineStyle,p.style.outlineStyle="none",En(window,"keydown",iu))}function iu(){lc&&(lc.style.outlineStyle=ru,lc=void 0,ru=void 0,Xn(window,"keydown",iu))}function Sh(p){do p=p.parentNode;while((!p.offsetWidth||!p.offsetHeight)&&p!==document.body);return p}function t0(p){var S=p.getBoundingClientRect();return{x:S.width/p.offsetWidth||1,y:S.height/p.offsetHeight||1,boundingClientRect:S}}var Ah={__proto__:null,TRANSFORM:Gr,TRANSITION:gr,TRANSITION_END:ri,get:xr,getStyle:zr,create:jn,remove:Dn,empty:ga,toFront:co,toBack:is,hasClass:mh,addClass:An,removeClass:gn,setClass:va,getClass:$u,setOpacity:Os,testProp:Lo,setTransform:ko,setPosition:Rr,getPosition:ya,get disableTextSelection(){return Ri},get enableTextSelection(){return Ni},disableImageDrag:vh,enableImageDrag:yh,preventOutline:_h,restoreOutline:iu,getSizedParentNode:Sh,getScale:t0};function En(p,S,I,k){if(S&&typeof S=="object")for(var G in S)up(p,G,S[G],I);else{S=m(S);for(var J=0,me=S.length;J<me;J++)up(p,S[J],I,k)}return this}var qs="_leaflet_events";function Xn(p,S,I,k){if(arguments.length===1)Wu(p),delete p[qs];else if(S&&typeof S=="object")for(var G in S)uo(p,G,S[G],I);else if(S=m(S),arguments.length===2)Wu(p,function(be){return T(S,be)!==-1});else for(var J=0,me=S.length;J<me;J++)uo(p,S[J],I,k);return this}function Wu(p,S){for(var I in p[qs]){var k=I.split(/\d/)[0];(!S||S(k))&&uo(p,k,null,null,I)}}var Bo={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function up(p,S,I,k){var G=S+l(I)+(k?"_"+l(k):"");if(p[qs]&&p[qs][G])return this;var J=function(be){return I.call(k||p,be||window.event)},me=J;!re.touchNative&&re.pointer&&S.indexOf("touch")===0?J=Sn(p,S,J):re.touch&&S==="dblclick"?J=mn(p,J):"addEventListener"in p?S==="touchstart"||S==="touchmove"||S==="wheel"||S==="mousewheel"?p.addEventListener(Bo[S]||S,J,re.passiveEvents?{passive:!1}:!1):S==="mouseenter"||S==="mouseleave"?(J=function(be){be=be||window.event,Qu(p,be)&&me(be)},p.addEventListener(Bo[S],J,!1)):p.addEventListener(S,me,!1):p.attachEvent("on"+S,J),p[qs]=p[qs]||{},p[qs][G]=J}function uo(p,S,I,k,G){G=G||S+l(I)+(k?"_"+l(k):"");var J=p[qs]&&p[qs][G];if(!J)return this;!re.touchNative&&re.pointer&&S.indexOf("touch")===0?Ie(p,S,J):re.touch&&S==="dblclick"?Tn(p,J):"removeEventListener"in p?p.removeEventListener(Bo[S]||S,J,!1):p.detachEvent("on"+S,J),p[qs][G]=null}function Pi(p){return p.stopPropagation?p.stopPropagation():p.originalEvent?p.originalEvent._stopped=!0:p.cancelBubble=!0,this}function ss(p){return up(p,"wheel",Pi),this}function cc(p){return En(p,"mousedown touchstart dblclick contextmenu",Pi),p._leaflet_disable_click=!0,this}function Wn(p){return p.preventDefault?p.preventDefault():p.returnValue=!1,this}function ho(p){return Wn(p),Pi(p),this}function Sl(p){if(p.composedPath)return p.composedPath();for(var S=[],I=p.target;I;)S.push(I),I=I.parentNode;return S}function _s(p,S){if(!S)return new W(p.clientX,p.clientY);var I=t0(S),k=I.boundingClientRect;return new W((p.clientX-k.left)/I.x-S.clientLeft,(p.clientY-k.top)/I.y-S.clientTop)}var qu=re.linux&&re.chrome?window.devicePixelRatio:re.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function yi(p){return re.edge?p.wheelDeltaY/2:p.deltaY&&p.deltaMode===0?-p.deltaY/qu:p.deltaY&&p.deltaMode===1?-p.deltaY*20:p.deltaY&&p.deltaMode===2?-p.deltaY*60:p.deltaX||p.deltaZ?0:p.wheelDelta?(p.wheelDeltaY||p.wheelDelta)/2:p.detail&&Math.abs(p.detail)<32765?-p.detail*20:p.detail?p.detail/-32765*60:0}function Qu(p,S){var I=S.relatedTarget;if(!I)return!0;try{for(;I&&I!==p;)I=I.parentNode}catch{return!1}return I!==p}var uc={__proto__:null,on:En,off:Xn,stopPropagation:Pi,disableScrollPropagation:ss,disableClickPropagation:cc,preventDefault:Wn,stop:ho,getPropagationPath:Sl,getMousePosition:_s,getWheelDelta:yi,isExternalTarget:Qu,addListener:En,removeListener:Xn},_a=se.extend({run:function(p,S,I,k){this.stop(),this._el=p,this._inProgress=!0,this._duration=I||.25,this._easeOutPower=1/Math.max(k||.5,.2),this._startPos=ya(p),this._offset=S.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=z(this._animate,this),this._step()},_step:function(p){var S=+new Date-this._startTime,I=this._duration*1e3;S<I?this._runFrame(this._easeOut(S/I),p):(this._runFrame(1),this._complete())},_runFrame:function(p,S){var I=this._startPos.add(this._offset.multiplyBy(p));S&&I._round(),Rr(this._el,I),this.fire("step")},_complete:function(){V(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(p){return 1-Math.pow(1-p,this._easeOutPower)}}),Zt=se.extend({options:{crs:ce,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(p,S){S=g(this,S),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(p),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),S.maxBounds&&this.setMaxBounds(S.maxBounds),S.zoom!==void 0&&(this._zoom=this._limitZoom(S.zoom)),S.center&&S.zoom!==void 0&&this.setView(Se(S.center),S.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=gr&&re.any3d&&!re.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),En(this._proxy,ri,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(p,S,I){if(S=S===void 0?this._zoom:this._limitZoom(S),p=this._limitCenter(Se(p),S,this.options.maxBounds),I=I||{},this._stop(),this._loaded&&!I.reset&&I!==!0){I.animate!==void 0&&(I.zoom=i({animate:I.animate},I.zoom),I.pan=i({animate:I.animate,duration:I.duration},I.pan));var k=this._zoom!==S?this._tryAnimatedZoom&&this._tryAnimatedZoom(p,S,I.zoom):this._tryAnimatedPan(p,I.pan);if(k)return clearTimeout(this._sizeTimer),this}return this._resetView(p,S,I.pan&&I.pan.noMoveStart),this},setZoom:function(p,S){return this._loaded?this.setView(this.getCenter(),p,{zoom:S}):(this._zoom=p,this)},zoomIn:function(p,S){return p=p||(re.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+p,S)},zoomOut:function(p,S){return p=p||(re.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-p,S)},setZoomAround:function(p,S,I){var k=this.getZoomScale(S),G=this.getSize().divideBy(2),J=p instanceof W?p:this.latLngToContainerPoint(p),me=J.subtract(G).multiplyBy(1-1/k),be=this.containerPointToLatLng(G.add(me));return this.setView(be,S,{zoom:I})},_getBoundsCenterZoom:function(p,S){S=S||{},p=p.getBounds?p.getBounds():we(p);var I=Q(S.paddingTopLeft||S.padding||[0,0]),k=Q(S.paddingBottomRight||S.padding||[0,0]),G=this.getBoundsZoom(p,!1,I.add(k));if(G=typeof S.maxZoom=="number"?Math.min(S.maxZoom,G):G,G===1/0)return{center:p.getCenter(),zoom:G};var J=k.subtract(I).divideBy(2),me=this.project(p.getSouthWest(),G),be=this.project(p.getNorthEast(),G),Ue=this.unproject(me.add(be).divideBy(2).add(J),G);return{center:Ue,zoom:G}},fitBounds:function(p,S){if(p=we(p),!p.isValid())throw new Error("Bounds are not valid.");var I=this._getBoundsCenterZoom(p,S);return this.setView(I.center,I.zoom,S)},fitWorld:function(p){return this.fitBounds([[-90,-180],[90,180]],p)},panTo:function(p,S){return this.setView(p,this._zoom,{pan:S})},panBy:function(p,S){if(p=Q(p).round(),S=S||{},!p.x&&!p.y)return this.fire("moveend");if(S.animate!==!0&&!this.getSize().contains(p))return this._resetView(this.unproject(this.project(this.getCenter()).add(p)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new _a,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),S.noMoveStart||this.fire("movestart"),S.animate!==!1){An(this._mapPane,"leaflet-pan-anim");var I=this._getMapPanePos().subtract(p).round();this._panAnim.run(this._mapPane,I,S.duration||.25,S.easeLinearity)}else this._rawPanBy(p),this.fire("move").fire("moveend");return this},flyTo:function(p,S,I){if(I=I||{},I.animate===!1||!re.any3d)return this.setView(p,S,I);this._stop();var k=this.project(this.getCenter()),G=this.project(p),J=this.getSize(),me=this._zoom;p=Se(p),S=S===void 0?me:S;var be=Math.max(J.x,J.y),Ue=be*this.getZoomScale(me,S),nt=G.distanceTo(k)||1,Nt=1.42,tn=Nt*Nt;function Un(Si){var mp=Si?-1:1,JA=Si?Ue:be,KA=Ue*Ue-be*be+mp*tn*tn*nt*nt,YA=2*JA*tn*nt,l0=KA/YA,c0=Math.sqrt(l0*l0+1)-l0,Ov=c0<1e-9?-18:Math.log(c0);return Ov}function Oi(Si){return(Math.exp(Si)-Math.exp(-Si))/2}function Di(Si){return(Math.exp(Si)+Math.exp(-Si))/2}function po(Si){return Oi(Si)/Di(Si)}var mo=Un(0);function nd(Si){return be*(Di(mo)/Di(mo+Nt*Si))}function VA(Si){return be*(Di(mo)*po(mo+Nt*Si)-Oi(mo))/tn}function db(Si){return 1-Math.pow(1-Si,1.5)}var $A=Date.now(),WA=(Un(1)-mo)/Nt,qA=I.duration?1e3*I.duration:1e3*WA*.8;function QA(){var Si=(Date.now()-$A)/qA,mp=db(Si)*WA;Si<=1?(this._flyToFrame=z(QA,this),this._move(this.unproject(k.add(G.subtract(k).multiplyBy(VA(mp)/nt)),me),this.getScaleZoom(be/nd(mp),me),{flyTo:!0})):this._move(p,S)._moveEnd(!0)}return this._moveStart(!0,I.noMoveStart),QA.call(this),this},flyToBounds:function(p,S){var I=this._getBoundsCenterZoom(p,S);return this.flyTo(I.center,I.zoom,S)},setMaxBounds:function(p){return p=we(p),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),p.isValid()?(this.options.maxBounds=p,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(p){var S=this.options.minZoom;return this.options.minZoom=p,this._loaded&&S!==p&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(p):this},setMaxZoom:function(p){var S=this.options.maxZoom;return this.options.maxZoom=p,this._loaded&&S!==p&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(p):this},panInsideBounds:function(p,S){this._enforcingBounds=!0;var I=this.getCenter(),k=this._limitCenter(I,this._zoom,we(p));return I.equals(k)||this.panTo(k,S),this._enforcingBounds=!1,this},panInside:function(p,S){S=S||{};var I=Q(S.paddingTopLeft||S.padding||[0,0]),k=Q(S.paddingBottomRight||S.padding||[0,0]),G=this.project(this.getCenter()),J=this.project(p),me=this.getPixelBounds(),be=ae([me.min.add(I),me.max.subtract(k)]),Ue=be.getSize();if(!be.contains(J)){this._enforcingBounds=!0;var nt=J.subtract(be.getCenter()),Nt=be.extend(J).getSize().subtract(Ue);G.x+=nt.x<0?-Nt.x:Nt.x,G.y+=nt.y<0?-Nt.y:Nt.y,this.panTo(this.unproject(G),S),this._enforcingBounds=!1}return this},invalidateSize:function(p){if(!this._loaded)return this;p=i({animate:!1,pan:!0},p===!0?{animate:!0}:p);var S=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var I=this.getSize(),k=S.divideBy(2).round(),G=I.divideBy(2).round(),J=k.subtract(G);return!J.x&&!J.y?this:(p.animate&&p.pan?this.panBy(J):(p.pan&&this._rawPanBy(J),this.fire("move"),p.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:S,newSize:I}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(p){if(p=this._locateOptions=i({timeout:1e4,watch:!1},p),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var S=o(this._handleGeolocationResponse,this),I=o(this._handleGeolocationError,this);return p.watch?this._locationWatchId=navigator.geolocation.watchPosition(S,I,p):navigator.geolocation.getCurrentPosition(S,I,p),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(p){if(this._container._leaflet_id){var S=p.code,I=p.message||(S===1?"permission denied":S===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:S,message:"Geolocation error: "+I+"."})}},_handleGeolocationResponse:function(p){if(this._container._leaflet_id){var S=p.coords.latitude,I=p.coords.longitude,k=new ge(S,I),G=k.toBounds(p.coords.accuracy*2),J=this._locateOptions;if(J.setView){var me=this.getBoundsZoom(G);this.setView(k,J.maxZoom?Math.min(me,J.maxZoom):me)}var be={latlng:k,bounds:G,timestamp:p.timestamp};for(var Ue in p.coords)typeof p.coords[Ue]=="number"&&(be[Ue]=p.coords[Ue]);this.fire("locationfound",be)}},addHandler:function(p,S){if(!S)return this;var I=this[p]=new S(this);return this._handlers.push(I),this.options[p]&&I.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Dn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(V(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var p;for(p in this._layers)this._layers[p].remove();for(p in this._panes)Dn(this._panes[p]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(p,S){var I="leaflet-pane"+(p?" leaflet-"+p.replace("Pane","")+"-pane":""),k=jn("div",I,S||this._mapPane);return p&&(this._panes[p]=k),k},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var p=this.getPixelBounds(),S=this.unproject(p.getBottomLeft()),I=this.unproject(p.getTopRight());return new fe(S,I)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(p,S,I){p=we(p),I=Q(I||[0,0]);var k=this.getZoom()||0,G=this.getMinZoom(),J=this.getMaxZoom(),me=p.getNorthWest(),be=p.getSouthEast(),Ue=this.getSize().subtract(I),nt=ae(this.project(be,k),this.project(me,k)).getSize(),Nt=re.any3d?this.options.zoomSnap:1,tn=Ue.x/nt.x,Un=Ue.y/nt.y,Oi=S?Math.max(tn,Un):Math.min(tn,Un);return k=this.getScaleZoom(Oi,k),Nt&&(k=Math.round(k/(Nt/100))*(Nt/100),k=S?Math.ceil(k/Nt)*Nt:Math.floor(k/Nt)*Nt),Math.max(G,Math.min(J,k))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new W(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(p,S){var I=this._getTopLeftPoint(p,S);return new Y(I,I.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(p){return this.options.crs.getProjectedBounds(p===void 0?this.getZoom():p)},getPane:function(p){return typeof p=="string"?this._panes[p]:p},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(p,S){var I=this.options.crs;return S=S===void 0?this._zoom:S,I.scale(p)/I.scale(S)},getScaleZoom:function(p,S){var I=this.options.crs;S=S===void 0?this._zoom:S;var k=I.zoom(p*I.scale(S));return isNaN(k)?1/0:k},project:function(p,S){return S=S===void 0?this._zoom:S,this.options.crs.latLngToPoint(Se(p),S)},unproject:function(p,S){return S=S===void 0?this._zoom:S,this.options.crs.pointToLatLng(Q(p),S)},layerPointToLatLng:function(p){var S=Q(p).add(this.getPixelOrigin());return this.unproject(S)},latLngToLayerPoint:function(p){var S=this.project(Se(p))._round();return S._subtract(this.getPixelOrigin())},wrapLatLng:function(p){return this.options.crs.wrapLatLng(Se(p))},wrapLatLngBounds:function(p){return this.options.crs.wrapLatLngBounds(we(p))},distance:function(p,S){return this.options.crs.distance(Se(p),Se(S))},containerPointToLayerPoint:function(p){return Q(p).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(p){return Q(p).add(this._getMapPanePos())},containerPointToLatLng:function(p){var S=this.containerPointToLayerPoint(Q(p));return this.layerPointToLatLng(S)},latLngToContainerPoint:function(p){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Se(p)))},mouseEventToContainerPoint:function(p){return _s(p,this._container)},mouseEventToLayerPoint:function(p){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(p))},mouseEventToLatLng:function(p){return this.layerPointToLatLng(this.mouseEventToLayerPoint(p))},_initContainer:function(p){var S=this._container=xr(p);if(S){if(S._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");En(S,"scroll",this._onScroll,this),this._containerId=l(S)},_initLayout:function(){var p=this._container;this._fadeAnimated=this.options.fadeAnimation&&re.any3d,An(p,"leaflet-container"+(re.touch?" leaflet-touch":"")+(re.retina?" leaflet-retina":"")+(re.ielt9?" leaflet-oldie":"")+(re.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var S=zr(p,"position");S!=="absolute"&&S!=="relative"&&S!=="fixed"&&S!=="sticky"&&(p.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var p=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Rr(this._mapPane,new W(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(An(p.markerPane,"leaflet-zoom-hide"),An(p.shadowPane,"leaflet-zoom-hide"))},_resetView:function(p,S,I){Rr(this._mapPane,new W(0,0));var k=!this._loaded;this._loaded=!0,S=this._limitZoom(S),this.fire("viewprereset");var G=this._zoom!==S;this._moveStart(G,I)._move(p,S)._moveEnd(G),this.fire("viewreset"),k&&this.fire("load")},_moveStart:function(p,S){return p&&this.fire("zoomstart"),S||this.fire("movestart"),this},_move:function(p,S,I,k){S===void 0&&(S=this._zoom);var G=this._zoom!==S;return this._zoom=S,this._lastCenter=p,this._pixelOrigin=this._getNewPixelOrigin(p),k?I&&I.pinch&&this.fire("zoom",I):((G||I&&I.pinch)&&this.fire("zoom",I),this.fire("move",I)),this},_moveEnd:function(p){return p&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return V(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(p){Rr(this._mapPane,this._getMapPanePos().subtract(p))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(p){this._targets={},this._targets[l(this._container)]=this;var S=p?Xn:En;S(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&S(window,"resize",this._onResize,this),re.any3d&&this.options.transform3DLimit&&(p?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){V(this._resizeRequest),this._resizeRequest=z(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var p=this._getMapPanePos();Math.max(Math.abs(p.x),Math.abs(p.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(p,S){for(var I=[],k,G=S==="mouseout"||S==="mouseover",J=p.target||p.srcElement,me=!1;J;){if(k=this._targets[l(J)],k&&(S==="click"||S==="preclick")&&this._draggableMoved(k)){me=!0;break}if(k&&k.listens(S,!0)&&(G&&!Qu(J,p)||(I.push(k),G))||J===this._container)break;J=J.parentNode}return!I.length&&!me&&!G&&this.listens(S,!0)&&(I=[this]),I},_isClickDisabled:function(p){for(;p&&p!==this._container;){if(p._leaflet_disable_click)return!0;p=p.parentNode}},_handleDOMEvent:function(p){var S=p.target||p.srcElement;if(!(!this._loaded||S._leaflet_disable_events||p.type==="click"&&this._isClickDisabled(S))){var I=p.type;I==="mousedown"&&_h(S),this._fireDOMEvent(p,I)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(p,S,I){if(p.type==="click"){var k=i({},p);k.type="preclick",this._fireDOMEvent(k,k.type,I)}var G=this._findEventTargets(p,S);if(I){for(var J=[],me=0;me<I.length;me++)I[me].listens(S,!0)&&J.push(I[me]);G=J.concat(G)}if(G.length){S==="contextmenu"&&Wn(p);var be=G[0],Ue={originalEvent:p};if(p.type!=="keypress"&&p.type!=="keydown"&&p.type!=="keyup"){var nt=be.getLatLng&&(!be._radius||be._radius<=10);Ue.containerPoint=nt?this.latLngToContainerPoint(be.getLatLng()):this.mouseEventToContainerPoint(p),Ue.layerPoint=this.containerPointToLayerPoint(Ue.containerPoint),Ue.latlng=nt?be.getLatLng():this.layerPointToLatLng(Ue.layerPoint)}for(me=0;me<G.length;me++)if(G[me].fire(S,Ue,!0),Ue.originalEvent._stopped||G[me].options.bubblingMouseEvents===!1&&T(this._mouseEvents,S)!==-1)return}},_draggableMoved:function(p){return p=p.dragging&&p.dragging.enabled()?p:this,p.dragging&&p.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var p=0,S=this._handlers.length;p<S;p++)this._handlers[p].disable()},whenReady:function(p,S){return this._loaded?p.call(S||this,{target:this}):this.on("load",p,S),this},_getMapPanePos:function(){return ya(this._mapPane)||new W(0,0)},_moved:function(){var p=this._getMapPanePos();return p&&!p.equals([0,0])},_getTopLeftPoint:function(p,S){var I=p&&S!==void 0?this._getNewPixelOrigin(p,S):this.getPixelOrigin();return I.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(p,S){var I=this.getSize()._divideBy(2);return this.project(p,S)._subtract(I)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(p,S,I){var k=this._getNewPixelOrigin(I,S);return this.project(p,S)._subtract(k)},_latLngBoundsToNewLayerBounds:function(p,S,I){var k=this._getNewPixelOrigin(I,S);return ae([this.project(p.getSouthWest(),S)._subtract(k),this.project(p.getNorthWest(),S)._subtract(k),this.project(p.getSouthEast(),S)._subtract(k),this.project(p.getNorthEast(),S)._subtract(k)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(p){return this.latLngToLayerPoint(p).subtract(this._getCenterLayerPoint())},_limitCenter:function(p,S,I){if(!I)return p;var k=this.project(p,S),G=this.getSize().divideBy(2),J=new Y(k.subtract(G),k.add(G)),me=this._getBoundsOffset(J,I,S);return Math.abs(me.x)<=1&&Math.abs(me.y)<=1?p:this.unproject(k.add(me),S)},_limitOffset:function(p,S){if(!S)return p;var I=this.getPixelBounds(),k=new Y(I.min.add(p),I.max.add(p));return p.add(this._getBoundsOffset(k,S))},_getBoundsOffset:function(p,S,I){var k=ae(this.project(S.getNorthEast(),I),this.project(S.getSouthWest(),I)),G=k.min.subtract(p.min),J=k.max.subtract(p.max),me=this._rebound(G.x,-J.x),be=this._rebound(G.y,-J.y);return new W(me,be)},_rebound:function(p,S){return p+S>0?Math.round(p-S)/2:Math.max(0,Math.ceil(p))-Math.max(0,Math.floor(S))},_limitZoom:function(p){var S=this.getMinZoom(),I=this.getMaxZoom(),k=re.any3d?this.options.zoomSnap:1;return k&&(p=Math.round(p/k)*k),Math.max(S,Math.min(I,p))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){gn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(p,S){var I=this._getCenterOffset(p)._trunc();return(S&&S.animate)!==!0&&!this.getSize().contains(I)?!1:(this.panBy(I,S),!0)},_createAnimProxy:function(){var p=this._proxy=jn("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(p),this.on("zoomanim",function(S){var I=Gr,k=this._proxy.style[I];ko(this._proxy,this.project(S.center,S.zoom),this.getZoomScale(S.zoom,1)),k===this._proxy.style[I]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Dn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var p=this.getCenter(),S=this.getZoom();ko(this._proxy,this.project(p,S),this.getZoomScale(S,1))},_catchTransitionEnd:function(p){this._animatingZoom&&p.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(p,S,I){if(this._animatingZoom)return!0;if(I=I||{},!this._zoomAnimated||I.animate===!1||this._nothingToAnimate()||Math.abs(S-this._zoom)>this.options.zoomAnimationThreshold)return!1;var k=this.getZoomScale(S),G=this._getCenterOffset(p)._divideBy(1-1/k);return I.animate!==!0&&!this.getSize().contains(G)?!1:(z(function(){this._moveStart(!0,I.noMoveStart||!1)._animateZoom(p,S,!0)},this),!0)},_animateZoom:function(p,S,I,k){this._mapPane&&(I&&(this._animatingZoom=!0,this._animateToCenter=p,this._animateToZoom=S,An(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:p,zoom:S,noUpdate:k}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&gn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Ju(p,S){return new Zt(p,S)}var ii=B.extend({options:{position:"topright"},initialize:function(p){g(this,p)},getPosition:function(){return this.options.position},setPosition:function(p){var S=this._map;return S&&S.removeControl(this),this.options.position=p,S&&S.addControl(this),this},getContainer:function(){return this._container},addTo:function(p){this.remove(),this._map=p;var S=this._container=this.onAdd(p),I=this.getPosition(),k=p._controlCorners[I];return An(S,"leaflet-control"),I.indexOf("bottom")!==-1?k.insertBefore(S,k.firstChild):k.appendChild(S),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Dn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(p){this._map&&p&&p.screenX>0&&p.screenY>0&&this._map.getContainer().focus()}}),Sa=function(p){return new ii(p)};Zt.include({addControl:function(p){return p.addTo(this),this},removeControl:function(p){return p.remove(),this},_initControlPos:function(){var p=this._controlCorners={},S="leaflet-",I=this._controlContainer=jn("div",S+"control-container",this._container);function k(G,J){var me=S+G+" "+S+J;p[G+J]=jn("div",me,I)}k("top","left"),k("top","right"),k("bottom","left"),k("bottom","right")},_clearControlPos:function(){for(var p in this._controlCorners)Dn(this._controlCorners[p]);Dn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var _i=ii.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(p,S,I,k){return I<k?-1:k<I?1:0}},initialize:function(p,S,I){g(this,I),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var k in p)this._addLayer(p[k],k);for(k in S)this._addLayer(S[k],k,!0)},onAdd:function(p){this._initLayout(),this._update(),this._map=p,p.on("zoomend",this._checkDisabledLayers,this);for(var S=0;S<this._layers.length;S++)this._layers[S].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(p){return ii.prototype.addTo.call(this,p),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var p=0;p<this._layers.length;p++)this._layers[p].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(p,S){return this._addLayer(p,S),this._map?this._update():this},addOverlay:function(p,S){return this._addLayer(p,S,!0),this._map?this._update():this},removeLayer:function(p){p.off("add remove",this._onLayerChange,this);var S=this._getLayer(l(p));return S&&this._layers.splice(this._layers.indexOf(S),1),this._map?this._update():this},expand:function(){An(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var p=this._map.getSize().y-(this._container.offsetTop+50);return p<this._section.clientHeight?(An(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=p+"px"):gn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return gn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var p="leaflet-control-layers",S=this._container=jn("div",p),I=this.options.collapsed;S.setAttribute("aria-haspopup",!0),cc(S),ss(S);var k=this._section=jn("section",p+"-list");I&&(this._map.on("click",this.collapse,this),En(S,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var G=this._layersLink=jn("a",p+"-toggle",S);G.href="#",G.title="Layers",G.setAttribute("role","button"),En(G,{keydown:function(J){J.keyCode===13&&this._expandSafely()},click:function(J){Wn(J),this._expandSafely()}},this),I||this.expand(),this._baseLayersList=jn("div",p+"-base",k),this._separator=jn("div",p+"-separator",k),this._overlaysList=jn("div",p+"-overlays",k),S.appendChild(k)},_getLayer:function(p){for(var S=0;S<this._layers.length;S++)if(this._layers[S]&&l(this._layers[S].layer)===p)return this._layers[S]},_addLayer:function(p,S,I){this._map&&p.on("add remove",this._onLayerChange,this),this._layers.push({layer:p,name:S,overlay:I}),this.options.sortLayers&&this._layers.sort(o(function(k,G){return this.options.sortFunction(k.layer,G.layer,k.name,G.name)},this)),this.options.autoZIndex&&p.setZIndex&&(this._lastZIndex++,p.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ga(this._baseLayersList),ga(this._overlaysList),this._layerControlInputs=[];var p,S,I,k,G=0;for(I=0;I<this._layers.length;I++)k=this._layers[I],this._addItem(k),S=S||k.overlay,p=p||!k.overlay,G+=k.overlay?0:1;return this.options.hideSingleBase&&(p=p&&G>1,this._baseLayersList.style.display=p?"":"none"),this._separator.style.display=S&&p?"":"none",this},_onLayerChange:function(p){this._handlingClick||this._update();var S=this._getLayer(l(p.target)),I=S.overlay?p.type==="add"?"overlayadd":"overlayremove":p.type==="add"?"baselayerchange":null;I&&this._map.fire(I,S)},_createRadioElement:function(p,S){var I='<input type="radio" class="leaflet-control-layers-selector" name="'+p+'"'+(S?' checked="checked"':"")+"/>",k=document.createElement("div");return k.innerHTML=I,k.firstChild},_addItem:function(p){var S=document.createElement("label"),I=this._map.hasLayer(p.layer),k;p.overlay?(k=document.createElement("input"),k.type="checkbox",k.className="leaflet-control-layers-selector",k.defaultChecked=I):k=this._createRadioElement("leaflet-base-layers_"+l(this),I),this._layerControlInputs.push(k),k.layerId=l(p.layer),En(k,"click",this._onInputClick,this);var G=document.createElement("span");G.innerHTML=" "+p.name;var J=document.createElement("span");S.appendChild(J),J.appendChild(k),J.appendChild(G);var me=p.overlay?this._overlaysList:this._baseLayersList;return me.appendChild(S),this._checkDisabledLayers(),S},_onInputClick:function(){if(!this._preventClick){var p=this._layerControlInputs,S,I,k=[],G=[];this._handlingClick=!0;for(var J=p.length-1;J>=0;J--)S=p[J],I=this._getLayer(S.layerId).layer,S.checked?k.push(I):S.checked||G.push(I);for(J=0;J<G.length;J++)this._map.hasLayer(G[J])&&this._map.removeLayer(G[J]);for(J=0;J<k.length;J++)this._map.hasLayer(k[J])||this._map.addLayer(k[J]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var p=this._layerControlInputs,S,I,k=this._map.getZoom(),G=p.length-1;G>=0;G--)S=p[G],I=this._getLayer(S.layerId).layer,S.disabled=I.options.minZoom!==void 0&&k<I.options.minZoom||I.options.maxZoom!==void 0&&k>I.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var p=this._section;this._preventClick=!0,En(p,"click",Wn),this.expand();var S=this;setTimeout(function(){Xn(p,"click",Wn),S._preventClick=!1})}}),su=function(p,S,I){return new _i(p,S,I)},ou=ii.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(p){var S="leaflet-control-zoom",I=jn("div",S+" leaflet-bar"),k=this.options;return this._zoomInButton=this._createButton(k.zoomInText,k.zoomInTitle,S+"-in",I,this._zoomIn),this._zoomOutButton=this._createButton(k.zoomOutText,k.zoomOutTitle,S+"-out",I,this._zoomOut),this._updateDisabled(),p.on("zoomend zoomlevelschange",this._updateDisabled,this),I},onRemove:function(p){p.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(p){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(p.shiftKey?3:1))},_zoomOut:function(p){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(p.shiftKey?3:1))},_createButton:function(p,S,I,k,G){var J=jn("a",I,k);return J.innerHTML=p,J.href="#",J.title=S,J.setAttribute("role","button"),J.setAttribute("aria-label",S),cc(J),En(J,"click",ho),En(J,"click",G,this),En(J,"click",this._refocusOnMap,this),J},_updateDisabled:function(){var p=this._map,S="leaflet-disabled";gn(this._zoomInButton,S),gn(this._zoomOutButton,S),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||p._zoom===p.getMinZoom())&&(An(this._zoomOutButton,S),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||p._zoom===p.getMaxZoom())&&(An(this._zoomInButton,S),this._zoomInButton.setAttribute("aria-disabled","true"))}});Zt.mergeOptions({zoomControl:!0}),Zt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ou,this.addControl(this.zoomControl))});var Fo=function(p){return new ou(p)},bn=ii.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(p){var S="leaflet-control-scale",I=jn("div",S),k=this.options;return this._addScales(k,S+"-line",I),p.on(k.updateWhenIdle?"moveend":"move",this._update,this),p.whenReady(this._update,this),I},onRemove:function(p){p.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(p,S,I){p.metric&&(this._mScale=jn("div",S,I)),p.imperial&&(this._iScale=jn("div",S,I))},_update:function(){var p=this._map,S=p.getSize().y/2,I=p.distance(p.containerPointToLatLng([0,S]),p.containerPointToLatLng([this.options.maxWidth,S]));this._updateScales(I)},_updateScales:function(p){this.options.metric&&p&&this._updateMetric(p),this.options.imperial&&p&&this._updateImperial(p)},_updateMetric:function(p){var S=this._getRoundNum(p),I=S<1e3?S+" m":S/1e3+" km";this._updateScale(this._mScale,I,S/p)},_updateImperial:function(p){var S=p*3.2808399,I,k,G;S>5280?(I=S/5280,k=this._getRoundNum(I),this._updateScale(this._iScale,k+" mi",k/I)):(G=this._getRoundNum(S),this._updateScale(this._iScale,G+" ft",G/S))},_updateScale:function(p,S,I){p.style.width=Math.round(this.options.maxWidth*I)+"px",p.innerHTML=S},_getRoundNum:function(p){var S=Math.pow(10,(Math.floor(p)+"").length-1),I=p/S;return I=I>=10?10:I>=5?5:I>=3?3:I>=2?2:1,S*I}}),Ku=function(p){return new bn(p)},Et='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',dc=ii.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(re.inlineSvg?Et+" ":"")+"Leaflet</a>"},initialize:function(p){g(this,p),this._attributions={}},onAdd:function(p){p.attributionControl=this,this._container=jn("div","leaflet-control-attribution"),cc(this._container);for(var S in p._layers)p._layers[S].getAttribution&&this.addAttribution(p._layers[S].getAttribution());return this._update(),p.on("layeradd",this._addAttribution,this),this._container},onRemove:function(p){p.off("layeradd",this._addAttribution,this)},_addAttribution:function(p){p.layer.getAttribution&&(this.addAttribution(p.layer.getAttribution()),p.layer.once("remove",function(){this.removeAttribution(p.layer.getAttribution())},this))},setPrefix:function(p){return this.options.prefix=p,this._update(),this},addAttribution:function(p){return p?(this._attributions[p]||(this._attributions[p]=0),this._attributions[p]++,this._update(),this):this},removeAttribution:function(p){return p?(this._attributions[p]&&(this._attributions[p]--,this._update()),this):this},_update:function(){if(this._map){var p=[];for(var S in this._attributions)this._attributions[S]&&p.push(S);var I=[];this.options.prefix&&I.push(this.options.prefix),p.length&&I.push(p.join(", ")),this._container.innerHTML=I.join(' <span aria-hidden="true">|</span> ')}}});Zt.mergeOptions({attributionControl:!0}),Zt.addInitHook(function(){this.options.attributionControl&&new dc().addTo(this)});var Aa=function(p){return new dc(p)};ii.Layers=_i,ii.Zoom=ou,ii.Scale=bn,ii.Attribution=dc,Sa.layers=su,Sa.zoom=Fo,Sa.scale=Ku,Sa.attribution=Aa;var os=B.extend({initialize:function(p){this._map=p},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});os.addTo=function(p,S){return p.addHandler(S,this),this};var Qi={Events:K},Ss=re.touch?"touchstart mousedown":"mousedown",Ea=se.extend({options:{clickTolerance:3},initialize:function(p,S,I,k){g(this,k),this._element=p,this._dragStartTarget=S||p,this._preventOutline=I},enable:function(){this._enabled||(En(this._dragStartTarget,Ss,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ea._dragging===this&&this.finishDrag(!0),Xn(this._dragStartTarget,Ss,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(p){if(this._enabled&&(this._moved=!1,!mh(this._element,"leaflet-zoom-anim"))){if(p.touches&&p.touches.length!==1){Ea._dragging===this&&this.finishDrag();return}if(!(Ea._dragging||p.shiftKey||p.which!==1&&p.button!==1&&!p.touches)&&(Ea._dragging=this,this._preventOutline&&_h(this._element),vh(),Ri(),!this._moving)){this.fire("down");var S=p.touches?p.touches[0]:p,I=Sh(this._element);this._startPoint=new W(S.clientX,S.clientY),this._startPos=ya(this._element),this._parentScale=t0(I);var k=p.type==="mousedown";En(document,k?"mousemove":"touchmove",this._onMove,this),En(document,k?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(p){if(this._enabled){if(p.touches&&p.touches.length>1){this._moved=!0;return}var S=p.touches&&p.touches.length===1?p.touches[0]:p,I=new W(S.clientX,S.clientY)._subtract(this._startPoint);!I.x&&!I.y||Math.abs(I.x)+Math.abs(I.y)<this.options.clickTolerance||(I.x/=this._parentScale.x,I.y/=this._parentScale.y,Wn(p),this._moved||(this.fire("dragstart"),this._moved=!0,An(document.body,"leaflet-dragging"),this._lastTarget=p.target||p.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),An(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(I),this._moving=!0,this._lastEvent=p,this._updatePosition())}},_updatePosition:function(){var p={originalEvent:this._lastEvent};this.fire("predrag",p),Rr(this._element,this._newPos),this.fire("drag",p)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(p){gn(document.body,"leaflet-dragging"),this._lastTarget&&(gn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Xn(document,"mousemove touchmove",this._onMove,this),Xn(document,"mouseup touchend touchcancel",this._onUp,this),yh(),Ni();var S=this._moved&&this._moving;this._moving=!1,Ea._dragging=!1,S&&this.fire("dragend",{noInertia:p,distance:this._newPos.distanceTo(this._startPos)})}});function hc(p,S,I){var k,G=[1,4,2,8],J,me,be,Ue,nt,Nt,tn,Un;for(J=0,Nt=p.length;J<Nt;J++)p[J]._code=Ta(p[J],S);for(be=0;be<4;be++){for(tn=G[be],k=[],J=0,Nt=p.length,me=Nt-1;J<Nt;me=J++)Ue=p[J],nt=p[me],Ue._code&tn?nt._code&tn||(Un=cu(nt,Ue,tn,S,I),Un._code=Ta(Un,S),k.push(Un)):(nt._code&tn&&(Un=cu(nt,Ue,tn,S,I),Un._code=Ta(Un,S),k.push(Un)),k.push(Ue));p=k}return p}function Ca(p,S){var I,k,G,J,me,be,Ue,nt,Nt;if(!p||p.length===0)throw new Error("latlngs not passed");Lr(p)||(console.warn("latlngs are not flat! Only the first ring will be used"),p=p[0]);var tn=Se([0,0]),Un=we(p),Oi=Un.getNorthWest().distanceTo(Un.getSouthWest())*Un.getNorthEast().distanceTo(Un.getNorthWest());Oi<1700&&(tn=zo(p));var Di=p.length,po=[];for(I=0;I<Di;I++){var mo=Se(p[I]);po.push(S.project(Se([mo.lat-tn.lat,mo.lng-tn.lng])))}for(be=Ue=nt=0,I=0,k=Di-1;I<Di;k=I++)G=po[I],J=po[k],me=G.y*J.x-J.y*G.x,Ue+=(G.x+J.x)*me,nt+=(G.y+J.y)*me,be+=me*3;be===0?Nt=po[0]:Nt=[Ue/be,nt/be];var nd=S.unproject(Q(Nt));return Se([nd.lat+tn.lat,nd.lng+tn.lng])}function zo(p){for(var S=0,I=0,k=0,G=0;G<p.length;G++){var J=Se(p[G]);S+=J.lat,I+=J.lng,k++}return Se([S/k,I/k])}var Ha={__proto__:null,clipPolygon:hc,polygonCenter:Ca,centroid:zo};function wa(p,S){if(!S||!p.length)return p.slice();var I=S*S;return p=Ch(p,I),p=Eh(p,I),p}function Al(p,S,I){return Math.sqrt(jo(p,S,I,!0))}function n0(p,S,I){return jo(p,S,I)}function Eh(p,S){var I=p.length,k=typeof Uint8Array!=void 0+""?Uint8Array:Array,G=new k(I);G[0]=G[I-1]=1,au(p,G,S,0,I-1);var J,me=[];for(J=0;J<I;J++)G[J]&&me.push(p[J]);return me}function au(p,S,I,k,G){var J=0,me,be,Ue;for(be=k+1;be<=G-1;be++)Ue=jo(p[be],p[k],p[G],!0),Ue>J&&(me=be,J=Ue);J>I&&(S[me]=1,au(p,S,I,k,me),au(p,S,I,me,G))}function Ch(p,S){for(var I=[p[0]],k=1,G=0,J=p.length;k<J;k++)Yu(p[k],p[G])>S&&(I.push(p[k]),G=k);return G<J-1&&I.push(p[J-1]),I}var Uo;function lu(p,S,I,k,G){var J=k?Uo:Ta(p,I),me=Ta(S,I),be,Ue,nt;for(Uo=me;;){if(!(J|me))return[p,S];if(J&me)return!1;be=J||me,Ue=cu(p,S,be,I,G),nt=Ta(Ue,I),be===J?(p=Ue,J=nt):(S=Ue,me=nt)}}function cu(p,S,I,k,G){var J=S.x-p.x,me=S.y-p.y,be=k.min,Ue=k.max,nt,Nt;return I&8?(nt=p.x+J*(Ue.y-p.y)/me,Nt=Ue.y):I&4?(nt=p.x+J*(be.y-p.y)/me,Nt=be.y):I&2?(nt=Ue.x,Nt=p.y+me*(Ue.x-p.x)/J):I&1&&(nt=be.x,Nt=p.y+me*(be.x-p.x)/J),new W(nt,Nt,G)}function Ta(p,S){var I=0;return p.x<S.min.x?I|=1:p.x>S.max.x&&(I|=2),p.y<S.min.y?I|=4:p.y>S.max.y&&(I|=8),I}function Yu(p,S){var I=S.x-p.x,k=S.y-p.y;return I*I+k*k}function jo(p,S,I,k){var G=S.x,J=S.y,me=I.x-G,be=I.y-J,Ue=me*me+be*be,nt;return Ue>0&&(nt=((p.x-G)*me+(p.y-J)*be)/Ue,nt>1?(G=I.x,J=I.y):nt>0&&(G+=me*nt,J+=be*nt)),me=p.x-G,be=p.y-J,k?me*me+be*be:new W(G,J)}function Lr(p){return!C(p[0])||typeof p[0][0]!="object"&&typeof p[0][0]<"u"}function fc(p){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Lr(p)}function dp(p,S){var I,k,G,J,me,be,Ue,nt;if(!p||p.length===0)throw new Error("latlngs not passed");Lr(p)||(console.warn("latlngs are not flat! Only the first ring will be used"),p=p[0]);var Nt=Se([0,0]),tn=we(p),Un=tn.getNorthWest().distanceTo(tn.getSouthWest())*tn.getNorthEast().distanceTo(tn.getNorthWest());Un<1700&&(Nt=zo(p));var Oi=p.length,Di=[];for(I=0;I<Oi;I++){var po=Se(p[I]);Di.push(S.project(Se([po.lat-Nt.lat,po.lng-Nt.lng])))}for(I=0,k=0;I<Oi-1;I++)k+=Di[I].distanceTo(Di[I+1])/2;if(k===0)nt=Di[0];else for(I=0,J=0;I<Oi-1;I++)if(me=Di[I],be=Di[I+1],G=me.distanceTo(be),J+=G,J>k){Ue=(J-k)/G,nt=[be.x-Ue*(be.x-me.x),be.y-Ue*(be.y-me.y)];break}var mo=S.unproject(Q(nt));return Se([mo.lat+Nt.lat,mo.lng+Nt.lng])}var Go={__proto__:null,simplify:wa,pointToSegmentDistance:Al,closestPointOnSegment:n0,clipSegment:lu,_getEdgeIntersection:cu,_getBitCode:Ta,_sqClosestPointOnSegment:jo,isFlat:Lr,_flat:fc,polylineCenter:dp},Ds={project:function(p){return new W(p.lng,p.lat)},unproject:function(p){return new ge(p.y,p.x)},bounds:new Y([-180,-90],[180,90])},El={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Y([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(p){var S=Math.PI/180,I=this.R,k=p.lat*S,G=this.R_MINOR/I,J=Math.sqrt(1-G*G),me=J*Math.sin(k),be=Math.tan(Math.PI/4-k/2)/Math.pow((1-me)/(1+me),J/2);return k=-I*Math.log(Math.max(be,1e-10)),new W(p.lng*S*I,k)},unproject:function(p){for(var S=180/Math.PI,I=this.R,k=this.R_MINOR/I,G=Math.sqrt(1-k*k),J=Math.exp(-p.y/I),me=Math.PI/2-2*Math.atan(J),be=0,Ue=.1,nt;be<15&&Math.abs(Ue)>1e-7;be++)nt=G*Math.sin(me),nt=Math.pow((1-nt)/(1+nt),G/2),Ue=Math.PI/2-2*Math.atan(J*nt)-me,me+=Ue;return new ge(me*S,p.x*S/I)}},Cl={__proto__:null,LonLat:Ds,Mercator:El,SphericalMercator:We},As=i({},xe,{code:"EPSG:3395",projection:El,transformation:function(){var p=.5/(Math.PI*El.R);return te(p,.5,-p,.5)}()}),Xu=i({},xe,{code:"EPSG:4326",projection:Ds,transformation:te(1/180,1,-1/180,.5)}),pc=i({},Ke,{projection:Ds,transformation:te(1,0,-1,0),scale:function(p){return Math.pow(2,p)},zoom:function(p){return Math.log(p)/Math.LN2},distance:function(p,S){var I=S.lng-p.lng,k=S.lat-p.lat;return Math.sqrt(I*I+k*k)},infinite:!0});Ke.Earth=xe,Ke.EPSG3395=As,Ke.EPSG3857=ce,Ke.EPSG900913=de,Ke.EPSG4326=Xu,Ke.Simple=pc;var Qs=se.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(p){return p.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(p){return p&&p.removeLayer(this),this},getPane:function(p){return this._map.getPane(p?this.options[p]||p:this.options.pane)},addInteractiveTarget:function(p){return this._map._targets[l(p)]=this,this},removeInteractiveTarget:function(p){return delete this._map._targets[l(p)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(p){var S=p.target;if(S.hasLayer(this)){if(this._map=S,this._zoomAnimated=S._zoomAnimated,this.getEvents){var I=this.getEvents();S.on(I,this),this.once("remove",function(){S.off(I,this)},this)}this.onAdd(S),this.fire("add"),S.fire("layeradd",{layer:this})}}});Zt.include({addLayer:function(p){if(!p._layerAdd)throw new Error("The provided object is not a Layer.");var S=l(p);return this._layers[S]?this:(this._layers[S]=p,p._mapToAdd=this,p.beforeAdd&&p.beforeAdd(this),this.whenReady(p._layerAdd,p),this)},removeLayer:function(p){var S=l(p);return this._layers[S]?(this._loaded&&p.onRemove(this),delete this._layers[S],this._loaded&&(this.fire("layerremove",{layer:p}),p.fire("remove")),p._map=p._mapToAdd=null,this):this},hasLayer:function(p){return l(p)in this._layers},eachLayer:function(p,S){for(var I in this._layers)p.call(S,this._layers[I]);return this},_addLayers:function(p){p=p?C(p)?p:[p]:[];for(var S=0,I=p.length;S<I;S++)this.addLayer(p[S])},_addZoomLimit:function(p){(!isNaN(p.options.maxZoom)||!isNaN(p.options.minZoom))&&(this._zoomBoundLayers[l(p)]=p,this._updateZoomLevels())},_removeZoomLimit:function(p){var S=l(p);this._zoomBoundLayers[S]&&(delete this._zoomBoundLayers[S],this._updateZoomLevels())},_updateZoomLevels:function(){var p=1/0,S=-1/0,I=this._getZoomSpan();for(var k in this._zoomBoundLayers){var G=this._zoomBoundLayers[k].options;p=G.minZoom===void 0?p:Math.min(p,G.minZoom),S=G.maxZoom===void 0?S:Math.max(S,G.maxZoom)}this._layersMaxZoom=S===-1/0?void 0:S,this._layersMinZoom=p===1/0?void 0:p,I!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Va=Qs.extend({initialize:function(p,S){g(this,S),this._layers={};var I,k;if(p)for(I=0,k=p.length;I<k;I++)this.addLayer(p[I])},addLayer:function(p){var S=this.getLayerId(p);return this._layers[S]=p,this._map&&this._map.addLayer(p),this},removeLayer:function(p){var S=p in this._layers?p:this.getLayerId(p);return this._map&&this._layers[S]&&this._map.removeLayer(this._layers[S]),delete this._layers[S],this},hasLayer:function(p){var S=typeof p=="number"?p:this.getLayerId(p);return S in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(p){var S=Array.prototype.slice.call(arguments,1),I,k;for(I in this._layers)k=this._layers[I],k[p]&&k[p].apply(k,S);return this},onAdd:function(p){this.eachLayer(p.addLayer,p)},onRemove:function(p){this.eachLayer(p.removeLayer,p)},eachLayer:function(p,S){for(var I in this._layers)p.call(S,this._layers[I]);return this},getLayer:function(p){return this._layers[p]},getLayers:function(){var p=[];return this.eachLayer(p.push,p),p},setZIndex:function(p){return this.invoke("setZIndex",p)},getLayerId:function(p){return l(p)}}),Kr=function(p,S){return new Va(p,S)},Es=Va.extend({addLayer:function(p){return this.hasLayer(p)?this:(p.addEventParent(this),Va.prototype.addLayer.call(this,p),this.fire("layeradd",{layer:p}))},removeLayer:function(p){return this.hasLayer(p)?(p in this._layers&&(p=this._layers[p]),p.removeEventParent(this),Va.prototype.removeLayer.call(this,p),this.fire("layerremove",{layer:p})):this},setStyle:function(p){return this.invoke("setStyle",p)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var p=new fe;for(var S in this._layers){var I=this._layers[S];p.extend(I.getBounds?I.getBounds():I.getLatLng())}return p}}),as=function(p,S){return new Es(p,S)},Ji=B.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(p){g(this,p)},createIcon:function(p){return this._createIcon("icon",p)},createShadow:function(p){return this._createIcon("shadow",p)},_createIcon:function(p,S){var I=this._getIconUrl(p);if(!I){if(p==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var k=this._createImg(I,S&&S.tagName==="IMG"?S:null);return this._setIconStyles(k,p),(this.options.crossOrigin||this.options.crossOrigin==="")&&(k.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),k},_setIconStyles:function(p,S){var I=this.options,k=I[S+"Size"];typeof k=="number"&&(k=[k,k]);var G=Q(k),J=Q(S==="shadow"&&I.shadowAnchor||I.iconAnchor||G&&G.divideBy(2,!0));p.className="leaflet-marker-"+S+" "+(I.className||""),J&&(p.style.marginLeft=-J.x+"px",p.style.marginTop=-J.y+"px"),G&&(p.style.width=G.x+"px",p.style.height=G.y+"px")},_createImg:function(p,S){return S=S||document.createElement("img"),S.src=p,S},_getIconUrl:function(p){return re.retina&&this.options[p+"RetinaUrl"]||this.options[p+"Url"]}});function xa(p){return new Ji(p)}var wl=Ji.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(p){return typeof wl.imagePath!="string"&&(wl.imagePath=this._detectIconPath()),(this.options.imagePath||wl.imagePath)+Ji.prototype._getIconUrl.call(this,p)},_stripUrl:function(p){var S=function(I,k,G){var J=k.exec(I);return J&&J[G]};return p=S(p,/^url\((['"])?(.+)\1\)$/,2),p&&S(p,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var p=jn("div","leaflet-default-icon-path",document.body),S=zr(p,"background-image")||zr(p,"backgroundImage");if(document.body.removeChild(p),S=this._stripUrl(S),S)return S;var I=document.querySelector('link[href$="leaflet.css"]');return I?I.href.substring(0,I.href.length-11-1):""}}),wh=os.extend({initialize:function(p){this._marker=p},addHooks:function(){var p=this._marker._icon;this._draggable||(this._draggable=new Ea(p,p,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),An(p,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&gn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(p){var S=this._marker,I=S._map,k=this._marker.options.autoPanSpeed,G=this._marker.options.autoPanPadding,J=ya(S._icon),me=I.getPixelBounds(),be=I.getPixelOrigin(),Ue=ae(me.min._subtract(be).add(G),me.max._subtract(be).subtract(G));if(!Ue.contains(J)){var nt=Q((Math.max(Ue.max.x,J.x)-Ue.max.x)/(me.max.x-Ue.max.x)-(Math.min(Ue.min.x,J.x)-Ue.min.x)/(me.min.x-Ue.min.x),(Math.max(Ue.max.y,J.y)-Ue.max.y)/(me.max.y-Ue.max.y)-(Math.min(Ue.min.y,J.y)-Ue.min.y)/(me.min.y-Ue.min.y)).multiplyBy(k);I.panBy(nt,{animate:!1}),this._draggable._newPos._add(nt),this._draggable._startPos._add(nt),Rr(S._icon,this._draggable._newPos),this._onDrag(p),this._panRequest=z(this._adjustPan.bind(this,p))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(p){this._marker.options.autoPan&&(V(this._panRequest),this._panRequest=z(this._adjustPan.bind(this,p)))},_onDrag:function(p){var S=this._marker,I=S._shadow,k=ya(S._icon),G=S._map.layerPointToLatLng(k);I&&Rr(I,k),S._latlng=G,p.latlng=G,p.oldLatLng=this._oldLatLng,S.fire("move",p).fire("drag",p)},_onDragEnd:function(p){V(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",p)}}),uu=Qs.extend({options:{icon:new wl,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(p,S){g(this,S),this._latlng=Se(p)},onAdd:function(p){this._zoomAnimated=this._zoomAnimated&&p.options.markerZoomAnimation,this._zoomAnimated&&p.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(p){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&p.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(p){var S=this._latlng;return this._latlng=Se(p),this.update(),this.fire("move",{oldLatLng:S,latlng:this._latlng})},setZIndexOffset:function(p){return this.options.zIndexOffset=p,this.update()},getIcon:function(){return this.options.icon},setIcon:function(p){return this.options.icon=p,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var p=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(p)}return this},_initIcon:function(){var p=this.options,S="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),I=p.icon.createIcon(this._icon),k=!1;I!==this._icon&&(this._icon&&this._removeIcon(),k=!0,p.title&&(I.title=p.title),I.tagName==="IMG"&&(I.alt=p.alt||"")),An(I,S),p.keyboard&&(I.tabIndex="0",I.setAttribute("role","button")),this._icon=I,p.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&En(I,"focus",this._panOnFocus,this);var G=p.icon.createShadow(this._shadow),J=!1;G!==this._shadow&&(this._removeShadow(),J=!0),G&&(An(G,S),G.alt=""),this._shadow=G,p.opacity<1&&this._updateOpacity(),k&&this.getPane().appendChild(this._icon),this._initInteraction(),G&&J&&this.getPane(p.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Xn(this._icon,"focus",this._panOnFocus,this),Dn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Dn(this._shadow),this._shadow=null},_setPos:function(p){this._icon&&Rr(this._icon,p),this._shadow&&Rr(this._shadow,p),this._zIndex=p.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(p){this._icon&&(this._icon.style.zIndex=this._zIndex+p)},_animateZoom:function(p){var S=this._map._latLngToNewLayerPoint(this._latlng,p.zoom,p.center).round();this._setPos(S)},_initInteraction:function(){if(this.options.interactive&&(An(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),wh)){var p=this.options.draggable;this.dragging&&(p=this.dragging.enabled(),this.dragging.disable()),this.dragging=new wh(this),p&&this.dragging.enable()}},setOpacity:function(p){return this.options.opacity=p,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var p=this.options.opacity;this._icon&&Os(this._icon,p),this._shadow&&Os(this._shadow,p)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var p=this._map;if(p){var S=this.options.icon.options,I=S.iconSize?Q(S.iconSize):Q(0,0),k=S.iconAnchor?Q(S.iconAnchor):Q(0,0);p.panInside(this._latlng,{paddingTopLeft:k,paddingBottomRight:I.subtract(k)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function r0(p,S){return new uu(p,S)}var Ho=Qs.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(p){this._renderer=p.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(p){return g(this,p),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&p&&Object.prototype.hasOwnProperty.call(p,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Tl=Ho.extend({options:{fill:!0,radius:10},initialize:function(p,S){g(this,S),this._latlng=Se(p),this._radius=this.options.radius},setLatLng:function(p){var S=this._latlng;return this._latlng=Se(p),this.redraw(),this.fire("move",{oldLatLng:S,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(p){return this.options.radius=this._radius=p,this.redraw()},getRadius:function(){return this._radius},setStyle:function(p){var S=p&&p.radius||this._radius;return Ho.prototype.setStyle.call(this,p),this.setRadius(S),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var p=this._radius,S=this._radiusY||p,I=this._clickTolerance(),k=[p+I,S+I];this._pxBounds=new Y(this._point.subtract(k),this._point.add(k))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(p){return p.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function du(p,S){return new Tl(p,S)}var Zu=Tl.extend({initialize:function(p,S,I){if(typeof S=="number"&&(S=i({},I,{radius:S})),g(this,S),this._latlng=Se(p),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(p){return this._mRadius=p,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var p=[this._radius,this._radiusY||this._radius];return new fe(this._map.layerPointToLatLng(this._point.subtract(p)),this._map.layerPointToLatLng(this._point.add(p)))},setStyle:Ho.prototype.setStyle,_project:function(){var p=this._latlng.lng,S=this._latlng.lat,I=this._map,k=I.options.crs;if(k.distance===xe.distance){var G=Math.PI/180,J=this._mRadius/xe.R/G,me=I.project([S+J,p]),be=I.project([S-J,p]),Ue=me.add(be).divideBy(2),nt=I.unproject(Ue).lat,Nt=Math.acos((Math.cos(J*G)-Math.sin(S*G)*Math.sin(nt*G))/(Math.cos(S*G)*Math.cos(nt*G)))/G;(isNaN(Nt)||Nt===0)&&(Nt=J/Math.cos(Math.PI/180*S)),this._point=Ue.subtract(I.getPixelOrigin()),this._radius=isNaN(Nt)?0:Ue.x-I.project([nt,p-Nt]).x,this._radiusY=Ue.y-me.y}else{var tn=k.unproject(k.project(this._latlng).subtract([this._mRadius,0]));this._point=I.latLngToLayerPoint(this._latlng),this._radius=this._point.x-I.latLngToLayerPoint(tn).x}this._updateBounds()}});function hu(p,S,I){return new Zu(p,S,I)}var si=Ho.extend({options:{smoothFactor:1,noClip:!1},initialize:function(p,S){g(this,S),this._setLatLngs(p)},getLatLngs:function(){return this._latlngs},setLatLngs:function(p){return this._setLatLngs(p),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(p){for(var S=1/0,I=null,k=jo,G,J,me=0,be=this._parts.length;me<be;me++)for(var Ue=this._parts[me],nt=1,Nt=Ue.length;nt<Nt;nt++){G=Ue[nt-1],J=Ue[nt];var tn=k(p,G,J,!0);tn<S&&(S=tn,I=k(p,G,J))}return I&&(I.distance=Math.sqrt(S)),I},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return dp(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(p,S){return S=S||this._defaultShape(),p=Se(p),S.push(p),this._bounds.extend(p),this.redraw()},_setLatLngs:function(p){this._bounds=new fe,this._latlngs=this._convertLatLngs(p)},_defaultShape:function(){return Lr(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(p){for(var S=[],I=Lr(p),k=0,G=p.length;k<G;k++)I?(S[k]=Se(p[k]),this._bounds.extend(S[k])):S[k]=this._convertLatLngs(p[k]);return S},_project:function(){var p=new Y;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,p),this._bounds.isValid()&&p.isValid()&&(this._rawPxBounds=p,this._updateBounds())},_updateBounds:function(){var p=this._clickTolerance(),S=new W(p,p);this._rawPxBounds&&(this._pxBounds=new Y([this._rawPxBounds.min.subtract(S),this._rawPxBounds.max.add(S)]))},_projectLatlngs:function(p,S,I){var k=p[0]instanceof ge,G=p.length,J,me;if(k){for(me=[],J=0;J<G;J++)me[J]=this._map.latLngToLayerPoint(p[J]),I.extend(me[J]);S.push(me)}else for(J=0;J<G;J++)this._projectLatlngs(p[J],S,I)},_clipPoints:function(){var p=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(p))){if(this.options.noClip){this._parts=this._rings;return}var S=this._parts,I,k,G,J,me,be,Ue;for(I=0,G=0,J=this._rings.length;I<J;I++)for(Ue=this._rings[I],k=0,me=Ue.length;k<me-1;k++)be=lu(Ue[k],Ue[k+1],p,k,!0),be&&(S[G]=S[G]||[],S[G].push(be[0]),(be[1]!==Ue[k+1]||k===me-2)&&(S[G].push(be[1]),G++))}},_simplifyPoints:function(){for(var p=this._parts,S=this.options.smoothFactor,I=0,k=p.length;I<k;I++)p[I]=wa(p[I],S)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(p,S){var I,k,G,J,me,be,Ue=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(p))return!1;for(I=0,J=this._parts.length;I<J;I++)for(be=this._parts[I],k=0,me=be.length,G=me-1;k<me;G=k++)if(!(!S&&k===0)&&Al(p,be[G],be[k])<=Ue)return!0;return!1}});function ed(p,S){return new si(p,S)}si._flat=fc;var Nr=si.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ca(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(p){var S=si.prototype._convertLatLngs.call(this,p),I=S.length;return I>=2&&S[0]instanceof ge&&S[0].equals(S[I-1])&&S.pop(),S},_setLatLngs:function(p){si.prototype._setLatLngs.call(this,p),Lr(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Lr(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var p=this._renderer._bounds,S=this.options.weight,I=new W(S,S);if(p=new Y(p.min.subtract(I),p.max.add(I)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(p))){if(this.options.noClip){this._parts=this._rings;return}for(var k=0,G=this._rings.length,J;k<G;k++)J=hc(this._rings[k],p,!0),J.length&&this._parts.push(J)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(p){var S=!1,I,k,G,J,me,be,Ue,nt;if(!this._pxBounds||!this._pxBounds.contains(p))return!1;for(J=0,Ue=this._parts.length;J<Ue;J++)for(I=this._parts[J],me=0,nt=I.length,be=nt-1;me<nt;be=me++)k=I[me],G=I[be],k.y>p.y!=G.y>p.y&&p.x<(G.x-k.x)*(p.y-k.y)/(G.y-k.y)+k.x&&(S=!S);return S||si.prototype._containsPoint.call(this,p,!0)}});function ls(p,S){return new Nr(p,S)}var kr=Es.extend({initialize:function(p,S){g(this,S),this._layers={},p&&this.addData(p)},addData:function(p){var S=C(p)?p:p.features,I,k,G;if(S){for(I=0,k=S.length;I<k;I++)G=S[I],(G.geometries||G.geometry||G.features||G.coordinates)&&this.addData(G);return this}var J=this.options;if(J.filter&&!J.filter(p))return this;var me=mc(p,J);return me?(me.feature=Js(p),me.defaultOptions=me.options,this.resetStyle(me),J.onEachFeature&&J.onEachFeature(p,me),this.addLayer(me)):this},resetStyle:function(p){return p===void 0?this.eachLayer(this.resetStyle,this):(p.options=i({},p.defaultOptions),this._setLayerStyle(p,this.options.style),this)},setStyle:function(p){return this.eachLayer(function(S){this._setLayerStyle(S,p)},this)},_setLayerStyle:function(p,S){p.setStyle&&(typeof S=="function"&&(S=S(p.feature)),p.setStyle(S))}});function mc(p,S){var I=p.type==="Feature"?p.geometry:p,k=I?I.coordinates:null,G=[],J=S&&S.pointToLayer,me=S&&S.coordsToLatLng||cs,be,Ue,nt,Nt;if(!k&&!I)return null;switch(I.type){case"Point":return be=me(k),gc(J,p,be,S);case"MultiPoint":for(nt=0,Nt=k.length;nt<Nt;nt++)be=me(k[nt]),G.push(gc(J,p,be,S));return new Es(G);case"LineString":case"MultiLineString":return Ue=fu(k,I.type==="LineString"?0:1,me),new si(Ue,S);case"Polygon":case"MultiPolygon":return Ue=fu(k,I.type==="Polygon"?1:2,me),new Nr(Ue,S);case"GeometryCollection":for(nt=0,Nt=I.geometries.length;nt<Nt;nt++){var tn=mc({geometry:I.geometries[nt],type:"Feature",properties:p.properties},S);tn&&G.push(tn)}return new Es(G);case"FeatureCollection":for(nt=0,Nt=I.features.length;nt<Nt;nt++){var Un=mc(I.features[nt],S);Un&&G.push(Un)}return new Es(G);default:throw new Error("Invalid GeoJSON object.")}}function gc(p,S,I,k){return p?p(S,I):new uu(I,k&&k.markersInheritOptions&&k)}function cs(p){return new ge(p[1],p[0],p[2])}function fu(p,S,I){for(var k=[],G=0,J=p.length,me;G<J;G++)me=S?fu(p[G],S-1,I):(I||cs)(p[G]),k.push(me);return k}function xl(p,S){return p=Se(p),p.alt!==void 0?[h(p.lng,S),h(p.lat,S),h(p.alt,S)]:[h(p.lng,S),h(p.lat,S)]}function Ls(p,S,I,k){for(var G=[],J=0,me=p.length;J<me;J++)G.push(S?Ls(p[J],Lr(p[J])?0:S-1,I,k):xl(p[J],k));return!S&&I&&G.length>0&&G.push(G[0].slice()),G}function Ki(p,S){return p.feature?i({},p.feature,{geometry:S}):Js(S)}function Js(p){return p.type==="Feature"||p.type==="FeatureCollection"?p:{type:"Feature",properties:{},geometry:p}}var Il={toGeoJSON:function(p){return Ki(this,{type:"Point",coordinates:xl(this.getLatLng(),p)})}};uu.include(Il),Zu.include(Il),Tl.include(Il),si.include({toGeoJSON:function(p){var S=!Lr(this._latlngs),I=Ls(this._latlngs,S?1:0,!1,p);return Ki(this,{type:(S?"Multi":"")+"LineString",coordinates:I})}}),Nr.include({toGeoJSON:function(p){var S=!Lr(this._latlngs),I=S&&!Lr(this._latlngs[0]),k=Ls(this._latlngs,I?2:S?1:0,!0,p);return S||(k=[k]),Ki(this,{type:(I?"Multi":"")+"Polygon",coordinates:k})}}),Va.include({toMultiPoint:function(p){var S=[];return this.eachLayer(function(I){S.push(I.toGeoJSON(p).geometry.coordinates)}),Ki(this,{type:"MultiPoint",coordinates:S})},toGeoJSON:function(p){var S=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(S==="MultiPoint")return this.toMultiPoint(p);var I=S==="GeometryCollection",k=[];return this.eachLayer(function(G){if(G.toGeoJSON){var J=G.toGeoJSON(p);if(I)k.push(J.geometry);else{var me=Js(J);me.type==="FeatureCollection"?k.push.apply(k,me.features):k.push(me)}}}),I?Ki(this,{geometries:k,type:"GeometryCollection"}):{type:"FeatureCollection",features:k}}});function bl(p,S){return new kr(p,S)}var i0=bl,td=Qs.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(p,S,I){this._url=p,this._bounds=we(S),g(this,I)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(An(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Dn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(p){return this.options.opacity=p,this._image&&this._updateOpacity(),this},setStyle:function(p){return p.opacity&&this.setOpacity(p.opacity),this},bringToFront:function(){return this._map&&co(this._image),this},bringToBack:function(){return this._map&&is(this._image),this},setUrl:function(p){return this._url=p,this._image&&(this._image.src=p),this},setBounds:function(p){return this._bounds=we(p),this._map&&this._reset(),this},getEvents:function(){var p={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(p.zoomanim=this._animateZoom),p},setZIndex:function(p){return this.options.zIndex=p,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var p=this._url.tagName==="IMG",S=this._image=p?this._url:jn("img");if(An(S,"leaflet-image-layer"),this._zoomAnimated&&An(S,"leaflet-zoom-animated"),this.options.className&&An(S,this.options.className),S.onselectstart=d,S.onmousemove=d,S.onload=o(this.fire,this,"load"),S.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(S.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),p){this._url=S.src;return}S.src=this._url,S.alt=this.options.alt},_animateZoom:function(p){var S=this._map.getZoomScale(p.zoom),I=this._map._latLngBoundsToNewLayerBounds(this._bounds,p.zoom,p.center).min;ko(this._image,I,S)},_reset:function(){var p=this._image,S=new Y(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),I=S.getSize();Rr(p,S.min),p.style.width=I.x+"px",p.style.height=I.y+"px"},_updateOpacity:function(){Os(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var p=this.options.errorOverlayUrl;p&&this._url!==p&&(this._url=p,this._image.src=p)},getCenter:function(){return this._bounds.getCenter()}}),hp=function(p,S,I){return new td(p,S,I)},pu=td.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var p=this._url.tagName==="VIDEO",S=this._image=p?this._url:jn("video");if(An(S,"leaflet-image-layer"),this._zoomAnimated&&An(S,"leaflet-zoom-animated"),this.options.className&&An(S,this.options.className),S.onselectstart=d,S.onmousemove=d,S.onloadeddata=o(this.fire,this,"load"),p){for(var I=S.getElementsByTagName("source"),k=[],G=0;G<I.length;G++)k.push(I[G].src);this._url=I.length>0?k:[S.src];return}C(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(S.style,"objectFit")&&(S.style.objectFit="fill"),S.autoplay=!!this.options.autoplay,S.loop=!!this.options.loop,S.muted=!!this.options.muted,S.playsInline=!!this.options.playsInline;for(var J=0;J<this._url.length;J++){var me=jn("source");me.src=this._url[J],S.appendChild(me)}}});function Th(p,S,I){return new pu(p,S,I)}var fp=td.extend({_initImage:function(){var p=this._image=this._url;An(p,"leaflet-image-layer"),this._zoomAnimated&&An(p,"leaflet-zoom-animated"),this.options.className&&An(p,this.options.className),p.onselectstart=d,p.onmousemove=d}});function xh(p,S,I){return new fp(p,S,I)}var fo=Qs.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(p,S){p&&(p instanceof ge||C(p))?(this._latlng=Se(p),g(this,S)):(g(this,p),this._source=S),this.options.content&&(this._content=this.options.content)},openOn:function(p){return p=arguments.length?p:this._source._map,p.hasLayer(this)||p.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(p){return this._map?this.close():(arguments.length?this._source=p:p=this._source,this._prepareOpen(),this.openOn(p._map)),this},onAdd:function(p){this._zoomAnimated=p._zoomAnimated,this._container||this._initLayout(),p._fadeAnimated&&Os(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),p._fadeAnimated&&Os(this._container,1),this.bringToFront(),this.options.interactive&&(An(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(p){p._fadeAnimated?(Os(this._container,0),this._removeTimeout=setTimeout(o(Dn,void 0,this._container),200)):Dn(this._container),this.options.interactive&&(gn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(p){return this._latlng=Se(p),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(p){return this._content=p,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var p={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(p.zoomanim=this._animateZoom),p},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&co(this._container),this},bringToBack:function(){return this._map&&is(this._container),this},_prepareOpen:function(p){var S=this._source;if(!S._map)return!1;if(S instanceof Es){S=null;var I=this._source._layers;for(var k in I)if(I[k]._map){S=I[k];break}if(!S)return!1;this._source=S}if(!p)if(S.getCenter)p=S.getCenter();else if(S.getLatLng)p=S.getLatLng();else if(S.getBounds)p=S.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(p),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var p=this._contentNode,S=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof S=="string")p.innerHTML=S;else{for(;p.hasChildNodes();)p.removeChild(p.firstChild);p.appendChild(S)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var p=this._map.latLngToLayerPoint(this._latlng),S=Q(this.options.offset),I=this._getAnchor();this._zoomAnimated?Rr(this._container,p.add(I)):S=S.add(p).add(I);var k=this._containerBottom=-S.y,G=this._containerLeft=-Math.round(this._containerWidth/2)+S.x;this._container.style.bottom=k+"px",this._container.style.left=G+"px"}},_getAnchor:function(){return[0,0]}});Zt.include({_initOverlay:function(p,S,I,k){var G=S;return G instanceof p||(G=new p(k).setContent(S)),I&&G.setLatLng(I),G}}),Qs.include({_initOverlay:function(p,S,I,k){var G=I;return G instanceof p?(g(G,k),G._source=this):(G=S&&!k?S:new p(k,this),G.setContent(I)),G}});var mu=fo.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(p){return p=arguments.length?p:this._source._map,!p.hasLayer(this)&&p._popup&&p._popup.options.autoClose&&p.removeLayer(p._popup),p._popup=this,fo.prototype.openOn.call(this,p)},onAdd:function(p){fo.prototype.onAdd.call(this,p),p.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ho||this._source.on("preclick",Pi))},onRemove:function(p){fo.prototype.onRemove.call(this,p),p.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ho||this._source.off("preclick",Pi))},getEvents:function(){var p=fo.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(p.preclick=this.close),this.options.keepInView&&(p.moveend=this._adjustPan),p},_initLayout:function(){var p="leaflet-popup",S=this._container=jn("div",p+" "+(this.options.className||"")+" leaflet-zoom-animated"),I=this._wrapper=jn("div",p+"-content-wrapper",S);if(this._contentNode=jn("div",p+"-content",I),cc(S),ss(this._contentNode),En(S,"contextmenu",Pi),this._tipContainer=jn("div",p+"-tip-container",S),this._tip=jn("div",p+"-tip",this._tipContainer),this.options.closeButton){var k=this._closeButton=jn("a",p+"-close-button",S);k.setAttribute("role","button"),k.setAttribute("aria-label","Close popup"),k.href="#close",k.innerHTML='<span aria-hidden="true">&#215;</span>',En(k,"click",function(G){Wn(G),this.close()},this)}},_updateLayout:function(){var p=this._contentNode,S=p.style;S.width="",S.whiteSpace="nowrap";var I=p.offsetWidth;I=Math.min(I,this.options.maxWidth),I=Math.max(I,this.options.minWidth),S.width=I+1+"px",S.whiteSpace="",S.height="";var k=p.offsetHeight,G=this.options.maxHeight,J="leaflet-popup-scrolled";G&&k>G?(S.height=G+"px",An(p,J)):gn(p,J),this._containerWidth=this._container.offsetWidth},_animateZoom:function(p){var S=this._map._latLngToNewLayerPoint(this._latlng,p.zoom,p.center),I=this._getAnchor();Rr(this._container,S.add(I))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var p=this._map,S=parseInt(zr(this._container,"marginBottom"),10)||0,I=this._container.offsetHeight+S,k=this._containerWidth,G=new W(this._containerLeft,-I-this._containerBottom);G._add(ya(this._container));var J=p.layerPointToContainerPoint(G),me=Q(this.options.autoPanPadding),be=Q(this.options.autoPanPaddingTopLeft||me),Ue=Q(this.options.autoPanPaddingBottomRight||me),nt=p.getSize(),Nt=0,tn=0;J.x+k+Ue.x>nt.x&&(Nt=J.x+k-nt.x+Ue.x),J.x-Nt-be.x<0&&(Nt=J.x-be.x),J.y+I+Ue.y>nt.y&&(tn=J.y+I-nt.y+Ue.y),J.y-tn-be.y<0&&(tn=J.y-be.y),(Nt||tn)&&(this.options.keepInView&&(this._autopanning=!0),p.fire("autopanstart").panBy([Nt,tn]))}},_getAnchor:function(){return Q(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),s0=function(p,S){return new mu(p,S)};Zt.mergeOptions({closePopupOnClick:!0}),Zt.include({openPopup:function(p,S,I){return this._initOverlay(mu,p,S,I).openOn(this),this},closePopup:function(p){return p=arguments.length?p:this._popup,p&&p.close(),this}}),Qs.include({bindPopup:function(p,S){return this._popup=this._initOverlay(mu,this._popup,p,S),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(p){return this._popup&&(this instanceof Es||(this._popup._source=this),this._popup._prepareOpen(p||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(p){return this._popup&&this._popup.setContent(p),this},getPopup:function(){return this._popup},_openPopup:function(p){if(!(!this._popup||!this._map)){ho(p);var S=p.layer||p.target;if(this._popup._source===S&&!(S instanceof Ho)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(p.latlng);return}this._popup._source=S,this.openPopup(p.latlng)}},_movePopup:function(p){this._popup.setLatLng(p.latlng)},_onKeyPress:function(p){p.originalEvent.keyCode===13&&this._openPopup(p)}});var vc=fo.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(p){fo.prototype.onAdd.call(this,p),this.setOpacity(this.options.opacity),p.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(p){fo.prototype.onRemove.call(this,p),p.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var p=fo.prototype.getEvents.call(this);return this.options.permanent||(p.preclick=this.close),p},_initLayout:function(){var p="leaflet-tooltip",S=p+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=jn("div",S),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+l(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(p){var S,I,k=this._map,G=this._container,J=k.latLngToContainerPoint(k.getCenter()),me=k.layerPointToContainerPoint(p),be=this.options.direction,Ue=G.offsetWidth,nt=G.offsetHeight,Nt=Q(this.options.offset),tn=this._getAnchor();be==="top"?(S=Ue/2,I=nt):be==="bottom"?(S=Ue/2,I=0):be==="center"?(S=Ue/2,I=nt/2):be==="right"?(S=0,I=nt/2):be==="left"?(S=Ue,I=nt/2):me.x<J.x?(be="right",S=0,I=nt/2):(be="left",S=Ue+(Nt.x+tn.x)*2,I=nt/2),p=p.subtract(Q(S,I,!0)).add(Nt).add(tn),gn(G,"leaflet-tooltip-right"),gn(G,"leaflet-tooltip-left"),gn(G,"leaflet-tooltip-top"),gn(G,"leaflet-tooltip-bottom"),An(G,"leaflet-tooltip-"+be),Rr(G,p)},_updatePosition:function(){var p=this._map.latLngToLayerPoint(this._latlng);this._setPosition(p)},setOpacity:function(p){this.options.opacity=p,this._container&&Os(this._container,p)},_animateZoom:function(p){var S=this._map._latLngToNewLayerPoint(this._latlng,p.zoom,p.center);this._setPosition(S)},_getAnchor:function(){return Q(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),o0=function(p,S){return new vc(p,S)};Zt.include({openTooltip:function(p,S,I){return this._initOverlay(vc,p,S,I).openOn(this),this},closeTooltip:function(p){return p.close(),this}}),Qs.include({bindTooltip:function(p,S){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(vc,this._tooltip,p,S),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(p){if(!(!p&&this._tooltipHandlersAdded)){var S=p?"off":"on",I={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?I.add=this._openTooltip:(I.mouseover=this._openTooltip,I.mouseout=this.closeTooltip,I.click=this._openTooltip,this._map?this._addFocusListeners():I.add=this._addFocusListeners),this._tooltip.options.sticky&&(I.mousemove=this._moveTooltip),this[S](I),this._tooltipHandlersAdded=!p}},openTooltip:function(p){return this._tooltip&&(this instanceof Es||(this._tooltip._source=this),this._tooltip._prepareOpen(p)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(p){return this._tooltip&&this._tooltip.setContent(p),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(p){var S=typeof p.getElement=="function"&&p.getElement();S&&(En(S,"focus",function(){this._tooltip._source=p,this.openTooltip()},this),En(S,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(p){var S=typeof p.getElement=="function"&&p.getElement();S&&S.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(p){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var S=this;this._map.once("moveend",function(){S._openOnceFlag=!1,S._openTooltip(p)});return}this._tooltip._source=p.layer||p.target,this.openTooltip(this._tooltip.options.sticky?p.latlng:void 0)}},_moveTooltip:function(p){var S=p.latlng,I,k;this._tooltip.options.sticky&&p.originalEvent&&(I=this._map.mouseEventToContainerPoint(p.originalEvent),k=this._map.containerPointToLayerPoint(I),S=this._map.layerPointToLatLng(k)),this._tooltip.setLatLng(S)}});var pp=Ji.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(p){var S=p&&p.tagName==="DIV"?p:document.createElement("div"),I=this.options;if(I.html instanceof Element?(ga(S),S.appendChild(I.html)):S.innerHTML=I.html!==!1?I.html:"",I.bgPos){var k=Q(I.bgPos);S.style.backgroundPosition=-k.x+"px "+-k.y+"px"}return this._setIconStyles(S,"icon"),S},createShadow:function(){return null}});function a0(p){return new pp(p)}Ji.Default=wl;var yc=Qs.extend({options:{tileSize:256,opacity:1,updateWhenIdle:re.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(p){g(this,p)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(p){p._addZoomLimit(this)},onRemove:function(p){this._removeAllTiles(),Dn(this._container),p._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(co(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(is(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(p){return this.options.opacity=p,this._updateOpacity(),this},setZIndex:function(p){return this.options.zIndex=p,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var p=this._clampZoom(this._map.getZoom());p!==this._tileZoom&&(this._tileZoom=p,this._updateLevels()),this._update()}return this},getEvents:function(){var p={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=c(this._onMoveEnd,this.options.updateInterval,this)),p.move=this._onMove),this._zoomAnimated&&(p.zoomanim=this._animateZoom),p},createTile:function(){return document.createElement("div")},getTileSize:function(){var p=this.options.tileSize;return p instanceof W?p:new W(p,p)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(p){for(var S=this.getPane().children,I=-p(-1/0,1/0),k=0,G=S.length,J;k<G;k++)J=S[k].style.zIndex,S[k]!==this._container&&J&&(I=p(I,+J));isFinite(I)&&(this.options.zIndex=I+p(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!re.ielt9){Os(this._container,this.options.opacity);var p=+new Date,S=!1,I=!1;for(var k in this._tiles){var G=this._tiles[k];if(!(!G.current||!G.loaded)){var J=Math.min(1,(p-G.loaded)/200);Os(G.el,J),J<1?S=!0:(G.active?I=!0:this._onOpaqueTile(G),G.active=!0)}}I&&!this._noPrune&&this._pruneTiles(),S&&(V(this._fadeFrame),this._fadeFrame=z(this._updateOpacity,this))}},_onOpaqueTile:d,_initContainer:function(){this._container||(this._container=jn("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var p=this._tileZoom,S=this.options.maxZoom;if(p!==void 0){for(var I in this._levels)I=Number(I),this._levels[I].el.children.length||I===p?(this._levels[I].el.style.zIndex=S-Math.abs(p-I),this._onUpdateLevel(I)):(Dn(this._levels[I].el),this._removeTilesAtZoom(I),this._onRemoveLevel(I),delete this._levels[I]);var k=this._levels[p],G=this._map;return k||(k=this._levels[p]={},k.el=jn("div","leaflet-tile-container leaflet-zoom-animated",this._container),k.el.style.zIndex=S,k.origin=G.project(G.unproject(G.getPixelOrigin()),p).round(),k.zoom=p,this._setZoomTransform(k,G.getCenter(),G.getZoom()),d(k.el.offsetWidth),this._onCreateLevel(k)),this._level=k,k}},_onUpdateLevel:d,_onRemoveLevel:d,_onCreateLevel:d,_pruneTiles:function(){if(this._map){var p,S,I=this._map.getZoom();if(I>this.options.maxZoom||I<this.options.minZoom){this._removeAllTiles();return}for(p in this._tiles)S=this._tiles[p],S.retain=S.current;for(p in this._tiles)if(S=this._tiles[p],S.current&&!S.active){var k=S.coords;this._retainParent(k.x,k.y,k.z,k.z-5)||this._retainChildren(k.x,k.y,k.z,k.z+2)}for(p in this._tiles)this._tiles[p].retain||this._removeTile(p)}},_removeTilesAtZoom:function(p){for(var S in this._tiles)this._tiles[S].coords.z===p&&this._removeTile(S)},_removeAllTiles:function(){for(var p in this._tiles)this._removeTile(p)},_invalidateAll:function(){for(var p in this._levels)Dn(this._levels[p].el),this._onRemoveLevel(Number(p)),delete this._levels[p];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(p,S,I,k){var G=Math.floor(p/2),J=Math.floor(S/2),me=I-1,be=new W(+G,+J);be.z=+me;var Ue=this._tileCoordsToKey(be),nt=this._tiles[Ue];return nt&&nt.active?(nt.retain=!0,!0):(nt&&nt.loaded&&(nt.retain=!0),me>k?this._retainParent(G,J,me,k):!1)},_retainChildren:function(p,S,I,k){for(var G=2*p;G<2*p+2;G++)for(var J=2*S;J<2*S+2;J++){var me=new W(G,J);me.z=I+1;var be=this._tileCoordsToKey(me),Ue=this._tiles[be];if(Ue&&Ue.active){Ue.retain=!0;continue}else Ue&&Ue.loaded&&(Ue.retain=!0);I+1<k&&this._retainChildren(G,J,I+1,k)}},_resetView:function(p){var S=p&&(p.pinch||p.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),S,S)},_animateZoom:function(p){this._setView(p.center,p.zoom,!0,p.noUpdate)},_clampZoom:function(p){var S=this.options;return S.minNativeZoom!==void 0&&p<S.minNativeZoom?S.minNativeZoom:S.maxNativeZoom!==void 0&&S.maxNativeZoom<p?S.maxNativeZoom:p},_setView:function(p,S,I,k){var G=Math.round(S);this.options.maxZoom!==void 0&&G>this.options.maxZoom||this.options.minZoom!==void 0&&G<this.options.minZoom?G=void 0:G=this._clampZoom(G);var J=this.options.updateWhenZooming&&G!==this._tileZoom;(!k||J)&&(this._tileZoom=G,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),G!==void 0&&this._update(p),I||this._pruneTiles(),this._noPrune=!!I),this._setZoomTransforms(p,S)},_setZoomTransforms:function(p,S){for(var I in this._levels)this._setZoomTransform(this._levels[I],p,S)},_setZoomTransform:function(p,S,I){var k=this._map.getZoomScale(I,p.zoom),G=p.origin.multiplyBy(k).subtract(this._map._getNewPixelOrigin(S,I)).round();re.any3d?ko(p.el,G,k):Rr(p.el,G)},_resetGrid:function(){var p=this._map,S=p.options.crs,I=this._tileSize=this.getTileSize(),k=this._tileZoom,G=this._map.getPixelWorldBounds(this._tileZoom);G&&(this._globalTileRange=this._pxBoundsToTileRange(G)),this._wrapX=S.wrapLng&&!this.options.noWrap&&[Math.floor(p.project([0,S.wrapLng[0]],k).x/I.x),Math.ceil(p.project([0,S.wrapLng[1]],k).x/I.y)],this._wrapY=S.wrapLat&&!this.options.noWrap&&[Math.floor(p.project([S.wrapLat[0],0],k).y/I.x),Math.ceil(p.project([S.wrapLat[1],0],k).y/I.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(p){var S=this._map,I=S._animatingZoom?Math.max(S._animateToZoom,S.getZoom()):S.getZoom(),k=S.getZoomScale(I,this._tileZoom),G=S.project(p,this._tileZoom).floor(),J=S.getSize().divideBy(k*2);return new Y(G.subtract(J),G.add(J))},_update:function(p){var S=this._map;if(S){var I=this._clampZoom(S.getZoom());if(p===void 0&&(p=S.getCenter()),this._tileZoom!==void 0){var k=this._getTiledPixelBounds(p),G=this._pxBoundsToTileRange(k),J=G.getCenter(),me=[],be=this.options.keepBuffer,Ue=new Y(G.getBottomLeft().subtract([be,-be]),G.getTopRight().add([be,-be]));if(!(isFinite(G.min.x)&&isFinite(G.min.y)&&isFinite(G.max.x)&&isFinite(G.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var nt in this._tiles){var Nt=this._tiles[nt].coords;(Nt.z!==this._tileZoom||!Ue.contains(new W(Nt.x,Nt.y)))&&(this._tiles[nt].current=!1)}if(Math.abs(I-this._tileZoom)>1){this._setView(p,I);return}for(var tn=G.min.y;tn<=G.max.y;tn++)for(var Un=G.min.x;Un<=G.max.x;Un++){var Oi=new W(Un,tn);if(Oi.z=this._tileZoom,!!this._isValidTile(Oi)){var Di=this._tiles[this._tileCoordsToKey(Oi)];Di?Di.current=!0:me.push(Oi)}}if(me.sort(function(mo,nd){return mo.distanceTo(J)-nd.distanceTo(J)}),me.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var po=document.createDocumentFragment();for(Un=0;Un<me.length;Un++)this._addTile(me[Un],po);this._level.el.appendChild(po)}}}},_isValidTile:function(p){var S=this._map.options.crs;if(!S.infinite){var I=this._globalTileRange;if(!S.wrapLng&&(p.x<I.min.x||p.x>I.max.x)||!S.wrapLat&&(p.y<I.min.y||p.y>I.max.y))return!1}if(!this.options.bounds)return!0;var k=this._tileCoordsToBounds(p);return we(this.options.bounds).overlaps(k)},_keyToBounds:function(p){return this._tileCoordsToBounds(this._keyToTileCoords(p))},_tileCoordsToNwSe:function(p){var S=this._map,I=this.getTileSize(),k=p.scaleBy(I),G=k.add(I),J=S.unproject(k,p.z),me=S.unproject(G,p.z);return[J,me]},_tileCoordsToBounds:function(p){var S=this._tileCoordsToNwSe(p),I=new fe(S[0],S[1]);return this.options.noWrap||(I=this._map.wrapLatLngBounds(I)),I},_tileCoordsToKey:function(p){return p.x+":"+p.y+":"+p.z},_keyToTileCoords:function(p){var S=p.split(":"),I=new W(+S[0],+S[1]);return I.z=+S[2],I},_removeTile:function(p){var S=this._tiles[p];S&&(Dn(S.el),delete this._tiles[p],this.fire("tileunload",{tile:S.el,coords:this._keyToTileCoords(p)}))},_initTile:function(p){An(p,"leaflet-tile");var S=this.getTileSize();p.style.width=S.x+"px",p.style.height=S.y+"px",p.onselectstart=d,p.onmousemove=d,re.ielt9&&this.options.opacity<1&&Os(p,this.options.opacity)},_addTile:function(p,S){var I=this._getTilePos(p),k=this._tileCoordsToKey(p),G=this.createTile(this._wrapCoords(p),o(this._tileReady,this,p));this._initTile(G),this.createTile.length<2&&z(o(this._tileReady,this,p,null,G)),Rr(G,I),this._tiles[k]={el:G,coords:p,current:!0},S.appendChild(G),this.fire("tileloadstart",{tile:G,coords:p})},_tileReady:function(p,S,I){S&&this.fire("tileerror",{error:S,tile:I,coords:p});var k=this._tileCoordsToKey(p);I=this._tiles[k],I&&(I.loaded=+new Date,this._map._fadeAnimated?(Os(I.el,0),V(this._fadeFrame),this._fadeFrame=z(this._updateOpacity,this)):(I.active=!0,this._pruneTiles()),S||(An(I.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:I.el,coords:p})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),re.ielt9||!this._map._fadeAnimated?z(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(p){return p.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(p){var S=new W(this._wrapX?u(p.x,this._wrapX):p.x,this._wrapY?u(p.y,this._wrapY):p.y);return S.z=p.z,S},_pxBoundsToTileRange:function(p){var S=this.getTileSize();return new Y(p.min.unscaleBy(S).floor(),p.max.unscaleBy(S).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var p in this._tiles)if(!this._tiles[p].loaded)return!1;return!0}});function _e(p){return new yc(p)}var He=yc.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(p,S){this._url=p,S=g(this,S),S.detectRetina&&re.retina&&S.maxZoom>0?(S.tileSize=Math.floor(S.tileSize/2),S.zoomReverse?(S.zoomOffset--,S.minZoom=Math.min(S.maxZoom,S.minZoom+1)):(S.zoomOffset++,S.maxZoom=Math.max(S.minZoom,S.maxZoom-1)),S.minZoom=Math.max(0,S.minZoom)):S.zoomReverse?S.minZoom=Math.min(S.maxZoom,S.minZoom):S.maxZoom=Math.max(S.minZoom,S.maxZoom),typeof S.subdomains=="string"&&(S.subdomains=S.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(p,S){return this._url===p&&S===void 0&&(S=!0),this._url=p,S||this.redraw(),this},createTile:function(p,S){var I=document.createElement("img");return En(I,"load",o(this._tileOnLoad,this,S,I)),En(I,"error",o(this._tileOnError,this,S,I)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(I.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(I.referrerPolicy=this.options.referrerPolicy),I.alt="",I.src=this.getTileUrl(p),I},getTileUrl:function(p){var S={r:re.retina?"@2x":"",s:this._getSubdomain(p),x:p.x,y:p.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var I=this._globalTileRange.max.y-p.y;this.options.tms&&(S.y=I),S["-y"]=I}return A(this._url,i(S,this.options))},_tileOnLoad:function(p,S){re.ielt9?setTimeout(o(p,this,null,S),0):p(null,S)},_tileOnError:function(p,S,I){var k=this.options.errorTileUrl;k&&S.getAttribute("src")!==k&&(S.src=k),p(I,S)},_onTileRemove:function(p){p.tile.onload=null},_getZoomForUrl:function(){var p=this._tileZoom,S=this.options.maxZoom,I=this.options.zoomReverse,k=this.options.zoomOffset;return I&&(p=S-p),p+k},_getSubdomain:function(p){var S=Math.abs(p.x+p.y)%this.options.subdomains.length;return this.options.subdomains[S]},_abortLoading:function(){var p,S;for(p in this._tiles)if(this._tiles[p].coords.z!==this._tileZoom&&(S=this._tiles[p].el,S.onload=d,S.onerror=d,!S.complete)){S.src=x;var I=this._tiles[p].coords;Dn(S),delete this._tiles[p],this.fire("tileabort",{tile:S,coords:I})}},_removeTile:function(p){var S=this._tiles[p];if(S)return S.el.setAttribute("src",x),yc.prototype._removeTile.call(this,p)},_tileReady:function(p,S,I){if(!(!this._map||I&&I.getAttribute("src")===x))return yc.prototype._tileReady.call(this,p,S,I)}});function ut(p,S){return new He(p,S)}var ot=He.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(p,S){this._url=p;var I=i({},this.defaultWmsParams);for(var k in S)k in this.options||(I[k]=S[k]);S=g(this,S);var G=S.detectRetina&&re.retina?2:1,J=this.getTileSize();I.width=J.x*G,I.height=J.y*G,this.wmsParams=I},onAdd:function(p){this._crs=this.options.crs||p.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var S=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[S]=this._crs.code,He.prototype.onAdd.call(this,p)},getTileUrl:function(p){var S=this._tileCoordsToNwSe(p),I=this._crs,k=ae(I.project(S[0]),I.project(S[1])),G=k.min,J=k.max,me=(this._wmsVersion>=1.3&&this._crs===Xu?[G.y,G.x,J.y,J.x]:[G.x,G.y,J.x,J.y]).join(","),be=He.prototype.getTileUrl.call(this,p);return be+v(this.wmsParams,be,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+me},setParams:function(p,S){return i(this.wmsParams,p),S||this.redraw(),this}});function At(p,S){return new ot(p,S)}He.WMS=ot,ut.wms=At;var pt=Qs.extend({options:{padding:.1},initialize:function(p){g(this,p),l(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),An(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var p={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(p.zoomanim=this._onAnimZoom),p},_onAnimZoom:function(p){this._updateTransform(p.center,p.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(p,S){var I=this._map.getZoomScale(S,this._zoom),k=this._map.getSize().multiplyBy(.5+this.options.padding),G=this._map.project(this._center,S),J=k.multiplyBy(-I).add(G).subtract(this._map._getNewPixelOrigin(p,S));re.any3d?ko(this._container,J,I):Rr(this._container,J)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var p in this._layers)this._layers[p]._reset()},_onZoomEnd:function(){for(var p in this._layers)this._layers[p]._project()},_updatePaths:function(){for(var p in this._layers)this._layers[p]._update()},_update:function(){var p=this.options.padding,S=this._map.getSize(),I=this._map.containerPointToLayerPoint(S.multiplyBy(-p)).round();this._bounds=new Y(I,I.add(S.multiplyBy(1+p*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Lt=pt.extend({options:{tolerance:0},getEvents:function(){var p=pt.prototype.getEvents.call(this);return p.viewprereset=this._onViewPreReset,p},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){pt.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var p=this._container=document.createElement("canvas");En(p,"mousemove",this._onMouseMove,this),En(p,"click dblclick mousedown mouseup contextmenu",this._onClick,this),En(p,"mouseout",this._handleMouseOut,this),p._leaflet_disable_events=!0,this._ctx=p.getContext("2d")},_destroyContainer:function(){V(this._redrawRequest),delete this._ctx,Dn(this._container),Xn(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var p;this._redrawBounds=null;for(var S in this._layers)p=this._layers[S],p._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){pt.prototype._update.call(this);var p=this._bounds,S=this._container,I=p.getSize(),k=re.retina?2:1;Rr(S,p.min),S.width=k*I.x,S.height=k*I.y,S.style.width=I.x+"px",S.style.height=I.y+"px",re.retina&&this._ctx.scale(2,2),this._ctx.translate(-p.min.x,-p.min.y),this.fire("update")}},_reset:function(){pt.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(p){this._updateDashArray(p),this._layers[l(p)]=p;var S=p._order={layer:p,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=S),this._drawLast=S,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(p){this._requestRedraw(p)},_removePath:function(p){var S=p._order,I=S.next,k=S.prev;I?I.prev=k:this._drawLast=k,k?k.next=I:this._drawFirst=I,delete p._order,delete this._layers[l(p)],this._requestRedraw(p)},_updatePath:function(p){this._extendRedrawBounds(p),p._project(),p._update(),this._requestRedraw(p)},_updateStyle:function(p){this._updateDashArray(p),this._requestRedraw(p)},_updateDashArray:function(p){if(typeof p.options.dashArray=="string"){var S=p.options.dashArray.split(/[, ]+/),I=[],k,G;for(G=0;G<S.length;G++){if(k=Number(S[G]),isNaN(k))return;I.push(k)}p.options._dashArray=I}else p.options._dashArray=p.options.dashArray},_requestRedraw:function(p){this._map&&(this._extendRedrawBounds(p),this._redrawRequest=this._redrawRequest||z(this._redraw,this))},_extendRedrawBounds:function(p){if(p._pxBounds){var S=(p.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Y,this._redrawBounds.extend(p._pxBounds.min.subtract([S,S])),this._redrawBounds.extend(p._pxBounds.max.add([S,S]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var p=this._redrawBounds;if(p){var S=p.getSize();this._ctx.clearRect(p.min.x,p.min.y,S.x,S.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var p,S=this._redrawBounds;if(this._ctx.save(),S){var I=S.getSize();this._ctx.beginPath(),this._ctx.rect(S.min.x,S.min.y,I.x,I.y),this._ctx.clip()}this._drawing=!0;for(var k=this._drawFirst;k;k=k.next)p=k.layer,(!S||p._pxBounds&&p._pxBounds.intersects(S))&&p._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(p,S){if(this._drawing){var I,k,G,J,me=p._parts,be=me.length,Ue=this._ctx;if(be){for(Ue.beginPath(),I=0;I<be;I++){for(k=0,G=me[I].length;k<G;k++)J=me[I][k],Ue[k?"lineTo":"moveTo"](J.x,J.y);S&&Ue.closePath()}this._fillStroke(Ue,p)}}},_updateCircle:function(p){if(!(!this._drawing||p._empty())){var S=p._point,I=this._ctx,k=Math.max(Math.round(p._radius),1),G=(Math.max(Math.round(p._radiusY),1)||k)/k;G!==1&&(I.save(),I.scale(1,G)),I.beginPath(),I.arc(S.x,S.y/G,k,0,Math.PI*2,!1),G!==1&&I.restore(),this._fillStroke(I,p)}},_fillStroke:function(p,S){var I=S.options;I.fill&&(p.globalAlpha=I.fillOpacity,p.fillStyle=I.fillColor||I.color,p.fill(I.fillRule||"evenodd")),I.stroke&&I.weight!==0&&(p.setLineDash&&p.setLineDash(S.options&&S.options._dashArray||[]),p.globalAlpha=I.opacity,p.lineWidth=I.weight,p.strokeStyle=I.color,p.lineCap=I.lineCap,p.lineJoin=I.lineJoin,p.stroke())},_onClick:function(p){for(var S=this._map.mouseEventToLayerPoint(p),I,k,G=this._drawFirst;G;G=G.next)I=G.layer,I.options.interactive&&I._containsPoint(S)&&(!(p.type==="click"||p.type==="preclick")||!this._map._draggableMoved(I))&&(k=I);this._fireEvent(k?[k]:!1,p)},_onMouseMove:function(p){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var S=this._map.mouseEventToLayerPoint(p);this._handleMouseHover(p,S)}},_handleMouseOut:function(p){var S=this._hoveredLayer;S&&(gn(this._container,"leaflet-interactive"),this._fireEvent([S],p,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(p,S){if(!this._mouseHoverThrottled){for(var I,k,G=this._drawFirst;G;G=G.next)I=G.layer,I.options.interactive&&I._containsPoint(S)&&(k=I);k!==this._hoveredLayer&&(this._handleMouseOut(p),k&&(An(this._container,"leaflet-interactive"),this._fireEvent([k],p,"mouseover"),this._hoveredLayer=k)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,p),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(p,S,I){this._map._fireDOMEvent(S,I||S.type,p)},_bringToFront:function(p){var S=p._order;if(S){var I=S.next,k=S.prev;if(I)I.prev=k;else return;k?k.next=I:I&&(this._drawFirst=I),S.prev=this._drawLast,this._drawLast.next=S,S.next=null,this._drawLast=S,this._requestRedraw(p)}},_bringToBack:function(p){var S=p._order;if(S){var I=S.next,k=S.prev;if(k)k.next=I;else return;I?I.prev=k:k&&(this._drawLast=k),S.prev=null,S.next=this._drawFirst,this._drawFirst.prev=S,this._drawFirst=S,this._requestRedraw(p)}}});function Ht(p){return re.canvas?new Lt(p):null}var Mn=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(p){return document.createElement("<lvml:"+p+' class="lvml">')}}catch{}return function(p){return document.createElement("<"+p+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),en={_initContainer:function(){this._container=jn("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(pt.prototype._update.call(this),this.fire("update"))},_initPath:function(p){var S=p._container=Mn("shape");An(S,"leaflet-vml-shape "+(this.options.className||"")),S.coordsize="1 1",p._path=Mn("path"),S.appendChild(p._path),this._updateStyle(p),this._layers[l(p)]=p},_addPath:function(p){var S=p._container;this._container.appendChild(S),p.options.interactive&&p.addInteractiveTarget(S)},_removePath:function(p){var S=p._container;Dn(S),p.removeInteractiveTarget(S),delete this._layers[l(p)]},_updateStyle:function(p){var S=p._stroke,I=p._fill,k=p.options,G=p._container;G.stroked=!!k.stroke,G.filled=!!k.fill,k.stroke?(S||(S=p._stroke=Mn("stroke")),G.appendChild(S),S.weight=k.weight+"px",S.color=k.color,S.opacity=k.opacity,k.dashArray?S.dashStyle=C(k.dashArray)?k.dashArray.join(" "):k.dashArray.replace(/( *, *)/g," "):S.dashStyle="",S.endcap=k.lineCap.replace("butt","flat"),S.joinstyle=k.lineJoin):S&&(G.removeChild(S),p._stroke=null),k.fill?(I||(I=p._fill=Mn("fill")),G.appendChild(I),I.color=k.fillColor||k.color,I.opacity=k.fillOpacity):I&&(G.removeChild(I),p._fill=null)},_updateCircle:function(p){var S=p._point.round(),I=Math.round(p._radius),k=Math.round(p._radiusY||I);this._setPath(p,p._empty()?"M0 0":"AL "+S.x+","+S.y+" "+I+","+k+" 0,"+65535*360)},_setPath:function(p,S){p._path.v=S},_bringToFront:function(p){co(p._container)},_bringToBack:function(p){is(p._container)}},Gt=re.vml?Mn:Pe,_r=pt.extend({_initContainer:function(){this._container=Gt("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Gt("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Dn(this._container),Xn(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){pt.prototype._update.call(this);var p=this._bounds,S=p.getSize(),I=this._container;(!this._svgSize||!this._svgSize.equals(S))&&(this._svgSize=S,I.setAttribute("width",S.x),I.setAttribute("height",S.y)),Rr(I,p.min),I.setAttribute("viewBox",[p.min.x,p.min.y,S.x,S.y].join(" ")),this.fire("update")}},_initPath:function(p){var S=p._path=Gt("path");p.options.className&&An(S,p.options.className),p.options.interactive&&An(S,"leaflet-interactive"),this._updateStyle(p),this._layers[l(p)]=p},_addPath:function(p){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(p._path),p.addInteractiveTarget(p._path)},_removePath:function(p){Dn(p._path),p.removeInteractiveTarget(p._path),delete this._layers[l(p)]},_updatePath:function(p){p._project(),p._update()},_updateStyle:function(p){var S=p._path,I=p.options;S&&(I.stroke?(S.setAttribute("stroke",I.color),S.setAttribute("stroke-opacity",I.opacity),S.setAttribute("stroke-width",I.weight),S.setAttribute("stroke-linecap",I.lineCap),S.setAttribute("stroke-linejoin",I.lineJoin),I.dashArray?S.setAttribute("stroke-dasharray",I.dashArray):S.removeAttribute("stroke-dasharray"),I.dashOffset?S.setAttribute("stroke-dashoffset",I.dashOffset):S.removeAttribute("stroke-dashoffset")):S.setAttribute("stroke","none"),I.fill?(S.setAttribute("fill",I.fillColor||I.color),S.setAttribute("fill-opacity",I.fillOpacity),S.setAttribute("fill-rule",I.fillRule||"evenodd")):S.setAttribute("fill","none"))},_updatePoly:function(p,S){this._setPath(p,Te(p._parts,S))},_updateCircle:function(p){var S=p._point,I=Math.max(Math.round(p._radius),1),k=Math.max(Math.round(p._radiusY),1)||I,G="a"+I+","+k+" 0 1,0 ",J=p._empty()?"M0 0":"M"+(S.x-I)+","+S.y+G+I*2+",0 "+G+-I*2+",0 ";this._setPath(p,J)},_setPath:function(p,S){p._path.setAttribute("d",S)},_bringToFront:function(p){co(p._path)},_bringToBack:function(p){is(p._path)}});re.vml&&_r.include(en);function Ir(p){return re.svg||re.vml?new _r(p):null}Zt.include({getRenderer:function(p){var S=p.options.renderer||this._getPaneRenderer(p.options.pane)||this.options.renderer||this._renderer;return S||(S=this._renderer=this._createRenderer()),this.hasLayer(S)||this.addLayer(S),S},_getPaneRenderer:function(p){if(p==="overlayPane"||p===void 0)return!1;var S=this._paneRenderers[p];return S===void 0&&(S=this._createRenderer({pane:p}),this._paneRenderers[p]=S),S},_createRenderer:function(p){return this.options.preferCanvas&&Ht(p)||Ir(p)}});var Hr=Nr.extend({initialize:function(p,S){Nr.prototype.initialize.call(this,this._boundsToLatLngs(p),S)},setBounds:function(p){return this.setLatLngs(this._boundsToLatLngs(p))},_boundsToLatLngs:function(p){return p=we(p),[p.getSouthWest(),p.getNorthWest(),p.getNorthEast(),p.getSouthEast()]}});function Yi(p,S){return new Hr(p,S)}_r.create=Gt,_r.pointsToPath=Te,kr.geometryToLayer=mc,kr.coordsToLatLng=cs,kr.coordsToLatLngs=fu,kr.latLngToCoords=xl,kr.latLngsToCoords=Ls,kr.getFeature=Ki,kr.asFeature=Js,Zt.mergeOptions({boxZoom:!0});var Cs=os.extend({initialize:function(p){this._map=p,this._container=p._container,this._pane=p._panes.overlayPane,this._resetStateTimeout=0,p.on("unload",this._destroy,this)},addHooks:function(){En(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Xn(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Dn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(p){if(!p.shiftKey||p.which!==1&&p.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ri(),vh(),this._startPoint=this._map.mouseEventToContainerPoint(p),En(document,{contextmenu:ho,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(p){this._moved||(this._moved=!0,this._box=jn("div","leaflet-zoom-box",this._container),An(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(p);var S=new Y(this._point,this._startPoint),I=S.getSize();Rr(this._box,S.min),this._box.style.width=I.x+"px",this._box.style.height=I.y+"px"},_finish:function(){this._moved&&(Dn(this._box),gn(this._container,"leaflet-crosshair")),Ni(),yh(),Xn(document,{contextmenu:ho,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(p){if(!(p.which!==1&&p.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var S=new fe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(S).fire("boxzoomend",{boxZoomBounds:S})}},_onKeyDown:function(p){p.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Zt.addInitHook("addHandler","boxZoom",Cs),Zt.mergeOptions({doubleClickZoom:!0});var lr=os.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(p){var S=this._map,I=S.getZoom(),k=S.options.zoomDelta,G=p.originalEvent.shiftKey?I-k:I+k;S.options.doubleClickZoom==="center"?S.setZoom(G):S.setZoomAround(p.containerPoint,G)}});Zt.addInitHook("addHandler","doubleClickZoom",lr),Zt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Gn=os.extend({addHooks:function(){if(!this._draggable){var p=this._map;this._draggable=new Ea(p._mapPane,p._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),p.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),p.on("zoomend",this._onZoomEnd,this),p.whenReady(this._onZoomEnd,this))}An(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){gn(this._map._container,"leaflet-grab"),gn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var p=this._map;if(p._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var S=we(this._map.options.maxBounds);this._offsetLimit=ae(this._map.latLngToContainerPoint(S.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(S.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;p.fire("movestart").fire("dragstart"),p.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(p){if(this._map.options.inertia){var S=this._lastTime=+new Date,I=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(I),this._times.push(S),this._prunePositions(S)}this._map.fire("move",p).fire("drag",p)},_prunePositions:function(p){for(;this._positions.length>1&&p-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var p=this._map.getSize().divideBy(2),S=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=S.subtract(p).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(p,S){return p-(p-S)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var p=this._draggable._newPos.subtract(this._draggable._startPos),S=this._offsetLimit;p.x<S.min.x&&(p.x=this._viscousLimit(p.x,S.min.x)),p.y<S.min.y&&(p.y=this._viscousLimit(p.y,S.min.y)),p.x>S.max.x&&(p.x=this._viscousLimit(p.x,S.max.x)),p.y>S.max.y&&(p.y=this._viscousLimit(p.y,S.max.y)),this._draggable._newPos=this._draggable._startPos.add(p)}},_onPreDragWrap:function(){var p=this._worldWidth,S=Math.round(p/2),I=this._initialWorldOffset,k=this._draggable._newPos.x,G=(k-S+I)%p+S-I,J=(k+S+I)%p-S-I,me=Math.abs(G+I)<Math.abs(J+I)?G:J;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=me},_onDragEnd:function(p){var S=this._map,I=S.options,k=!I.inertia||p.noInertia||this._times.length<2;if(S.fire("dragend",p),k)S.fire("moveend");else{this._prunePositions(+new Date);var G=this._lastPos.subtract(this._positions[0]),J=(this._lastTime-this._times[0])/1e3,me=I.easeLinearity,be=G.multiplyBy(me/J),Ue=be.distanceTo([0,0]),nt=Math.min(I.inertiaMaxSpeed,Ue),Nt=be.multiplyBy(nt/Ue),tn=nt/(I.inertiaDeceleration*me),Un=Nt.multiplyBy(-tn/2).round();!Un.x&&!Un.y?S.fire("moveend"):(Un=S._limitOffset(Un,S.options.maxBounds),z(function(){S.panBy(Un,{duration:tn,easeLinearity:me,noMoveStart:!0,animate:!0})}))}}});Zt.addInitHook("addHandler","dragging",Gn),Zt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var zn=os.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(p){this._map=p,this._setPanDelta(p.options.keyboardPanDelta),this._setZoomDelta(p.options.zoomDelta)},addHooks:function(){var p=this._map._container;p.tabIndex<=0&&(p.tabIndex="0"),En(p,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Xn(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var p=document.body,S=document.documentElement,I=p.scrollTop||S.scrollTop,k=p.scrollLeft||S.scrollLeft;this._map._container.focus(),window.scrollTo(k,I)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(p){var S=this._panKeys={},I=this.keyCodes,k,G;for(k=0,G=I.left.length;k<G;k++)S[I.left[k]]=[-1*p,0];for(k=0,G=I.right.length;k<G;k++)S[I.right[k]]=[p,0];for(k=0,G=I.down.length;k<G;k++)S[I.down[k]]=[0,p];for(k=0,G=I.up.length;k<G;k++)S[I.up[k]]=[0,-1*p]},_setZoomDelta:function(p){var S=this._zoomKeys={},I=this.keyCodes,k,G;for(k=0,G=I.zoomIn.length;k<G;k++)S[I.zoomIn[k]]=p;for(k=0,G=I.zoomOut.length;k<G;k++)S[I.zoomOut[k]]=-p},_addHooks:function(){En(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Xn(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(p){if(!(p.altKey||p.ctrlKey||p.metaKey)){var S=p.keyCode,I=this._map,k;if(S in this._panKeys){if(!I._panAnim||!I._panAnim._inProgress)if(k=this._panKeys[S],p.shiftKey&&(k=Q(k).multiplyBy(3)),I.options.maxBounds&&(k=I._limitOffset(Q(k),I.options.maxBounds)),I.options.worldCopyJump){var G=I.wrapLatLng(I.unproject(I.project(I.getCenter()).add(k)));I.panTo(G)}else I.panBy(k)}else if(S in this._zoomKeys)I.setZoom(I.getZoom()+(p.shiftKey?3:1)*this._zoomKeys[S]);else if(S===27&&I._popup&&I._popup.options.closeOnEscapeKey)I.closePopup();else return;ho(p)}}});Zt.addInitHook("addHandler","keyboard",zn),Zt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Vr=os.extend({addHooks:function(){En(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Xn(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(p){var S=yi(p),I=this._map.options.wheelDebounceTime;this._delta+=S,this._lastMousePos=this._map.mouseEventToContainerPoint(p),this._startTime||(this._startTime=+new Date);var k=Math.max(I-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),k),ho(p)},_performZoom:function(){var p=this._map,S=p.getZoom(),I=this._map.options.zoomSnap||0;p._stop();var k=this._delta/(this._map.options.wheelPxPerZoomLevel*4),G=4*Math.log(2/(1+Math.exp(-Math.abs(k))))/Math.LN2,J=I?Math.ceil(G/I)*I:G,me=p._limitZoom(S+(this._delta>0?J:-J))-S;this._delta=0,this._startTime=null,me&&(p.options.scrollWheelZoom==="center"?p.setZoom(S+me):p.setZoomAround(this._lastMousePos,S+me))}});Zt.addInitHook("addHandler","scrollWheelZoom",Vr);var Xi=600;Zt.mergeOptions({tapHold:re.touchNative&&re.safari&&re.mobile,tapTolerance:15});var dr=os.extend({addHooks:function(){En(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Xn(this._map._container,"touchstart",this._onDown,this)},_onDown:function(p){if(clearTimeout(this._holdTimeout),p.touches.length===1){var S=p.touches[0];this._startPos=this._newPos=new W(S.clientX,S.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(En(document,"touchend",Wn),En(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",S))},this),Xi),En(document,"touchend touchcancel contextmenu",this._cancel,this),En(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function p(){Xn(document,"touchend",Wn),Xn(document,"touchend touchcancel",p)},_cancel:function(){clearTimeout(this._holdTimeout),Xn(document,"touchend touchcancel contextmenu",this._cancel,this),Xn(document,"touchmove",this._onMove,this)},_onMove:function(p){var S=p.touches[0];this._newPos=new W(S.clientX,S.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(p,S){var I=new MouseEvent(p,{bubbles:!0,cancelable:!0,view:window,screenX:S.screenX,screenY:S.screenY,clientX:S.clientX,clientY:S.clientY});I._simulated=!0,S.target.dispatchEvent(I)}});Zt.addInitHook("addHandler","tapHold",dr),Zt.mergeOptions({touchZoom:re.touch,bounceAtZoomLimits:!0});var _c=os.extend({addHooks:function(){An(this._map._container,"leaflet-touch-zoom"),En(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){gn(this._map._container,"leaflet-touch-zoom"),Xn(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(p){var S=this._map;if(!(!p.touches||p.touches.length!==2||S._animatingZoom||this._zooming)){var I=S.mouseEventToContainerPoint(p.touches[0]),k=S.mouseEventToContainerPoint(p.touches[1]);this._centerPoint=S.getSize()._divideBy(2),this._startLatLng=S.containerPointToLatLng(this._centerPoint),S.options.touchZoom!=="center"&&(this._pinchStartLatLng=S.containerPointToLatLng(I.add(k)._divideBy(2))),this._startDist=I.distanceTo(k),this._startZoom=S.getZoom(),this._moved=!1,this._zooming=!0,S._stop(),En(document,"touchmove",this._onTouchMove,this),En(document,"touchend touchcancel",this._onTouchEnd,this),Wn(p)}},_onTouchMove:function(p){if(!(!p.touches||p.touches.length!==2||!this._zooming)){var S=this._map,I=S.mouseEventToContainerPoint(p.touches[0]),k=S.mouseEventToContainerPoint(p.touches[1]),G=I.distanceTo(k)/this._startDist;if(this._zoom=S.getScaleZoom(G,this._startZoom),!S.options.bounceAtZoomLimits&&(this._zoom<S.getMinZoom()&&G<1||this._zoom>S.getMaxZoom()&&G>1)&&(this._zoom=S._limitZoom(this._zoom)),S.options.touchZoom==="center"){if(this._center=this._startLatLng,G===1)return}else{var J=I._add(k)._divideBy(2)._subtract(this._centerPoint);if(G===1&&J.x===0&&J.y===0)return;this._center=S.unproject(S.project(this._pinchStartLatLng,this._zoom).subtract(J),this._zoom)}this._moved||(S._moveStart(!0,!1),this._moved=!0),V(this._animRequest);var me=o(S._move,S,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=z(me,this,!0),Wn(p)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,V(this._animRequest),Xn(document,"touchmove",this._onTouchMove,this),Xn(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Zt.addInitHook("addHandler","touchZoom",_c),Zt.BoxZoom=Cs,Zt.DoubleClickZoom=lr,Zt.Drag=Gn,Zt.Keyboard=zn,Zt.ScrollWheelZoom=Vr,Zt.TapHold=dr,Zt.TouchZoom=_c,t.Bounds=Y,t.Browser=re,t.CRS=Ke,t.Canvas=Lt,t.Circle=Zu,t.CircleMarker=Tl,t.Class=B,t.Control=ii,t.DivIcon=pp,t.DivOverlay=fo,t.DomEvent=uc,t.DomUtil=Ah,t.Draggable=Ea,t.Evented=se,t.FeatureGroup=Es,t.GeoJSON=kr,t.GridLayer=yc,t.Handler=os,t.Icon=Ji,t.ImageOverlay=td,t.LatLng=ge,t.LatLngBounds=fe,t.Layer=Qs,t.LayerGroup=Va,t.LineUtil=Go,t.Map=Zt,t.Marker=uu,t.Mixin=Qi,t.Path=Ho,t.Point=W,t.PolyUtil=Ha,t.Polygon=Nr,t.Polyline=si,t.Popup=mu,t.PosAnimation=_a,t.Projection=Cl,t.Rectangle=Hr,t.Renderer=pt,t.SVG=_r,t.SVGOverlay=fp,t.TileLayer=He,t.Tooltip=vc,t.Transformation=Ve,t.Util=$,t.VideoOverlay=pu,t.bind=o,t.bounds=ae,t.canvas=Ht,t.circle=hu,t.circleMarker=du,t.control=Sa,t.divIcon=a0,t.extend=i,t.featureGroup=as,t.geoJSON=bl,t.geoJson=i0,t.gridLayer=_e,t.icon=xa,t.imageOverlay=hp,t.latLng=Se,t.latLngBounds=we,t.layerGroup=Kr,t.map=Ju,t.marker=r0,t.point=Q,t.polygon=ls,t.polyline=ed,t.popup=s0,t.rectangle=Yi,t.setOptions=g,t.stamp=l,t.svg=Ir,t.svgOverlay=xh,t.tileLayer=ut,t.tooltip=o0,t.transformation=te,t.version=r,t.videoOverlay=Th;var Ih=window.L;t.noConflict=function(){return window.L=Ih,this},window.L=t})})(K4,K4.exports);var mA=K4.exports;const R6=zu(mA);function N6(n,e,t){return Object.freeze({instance:n,context:e,container:t})}function P6(n,e){return e==null?function(r,i){const s=D.useRef();return s.current||(s.current=n(r,i)),s}:function(r,i){const s=D.useRef();s.current||(s.current=n(r,i));const o=D.useRef(r),{instance:a}=s.current;return D.useEffect(function(){o.current!==r&&(e(a,r,o.current),o.current=r)},[a,r,i]),s}}function Kve(n,e){D.useEffect(function(){return(e.layerContainer??e.map).addLayer(n.instance),function(){var s;(s=e.layerContainer)==null||s.removeLayer(n.instance),e.map.removeLayer(n.instance)}},[e,n])}function oQ(n){return function(t){const r=b6(),i=n(M6(t,r),r);return nQ(r.map,t.attribution),sQ(i.current,t.eventHandlers),Kve(i.current,r),i}}function Yve(n,e){const t=P6(n,e),r=oQ(t);return Wve(r)}function Xve(n,e){const t=P6(n),r=Jve(t,e);return qve(r)}function Zve(n,e){const t=P6(n,e),r=oQ(t);return Qve(r)}function e1e(n,e,t){const{opacity:r,zIndex:i}=e;r!=null&&r!==t.opacity&&n.setOpacity(r),i!=null&&i!==t.zIndex&&n.setZIndex(i)}function t1e(){return b6().map}function Y4(){return Y4=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Y4.apply(this,arguments)}function n1e({bounds:n,boundsOptions:e,center:t,children:r,className:i,id:s,placeholder:o,style:a,whenReady:l,zoom:c,...u},d){const[h]=D.useState({className:i,id:s,style:a}),[f,m]=D.useState(null);D.useImperativeHandle(d,()=>(f==null?void 0:f.map)??null,[f]);const g=D.useCallback(y=>{if(y!==null&&f===null){const A=new mA.Map(y,u);t!=null&&c!=null?A.setView(t,c):n!=null&&A.fitBounds(n,e),l!=null&&A.whenReady(l),m(Vve(A))}},[]);D.useEffect(()=>()=>{f==null||f.map.remove()},[f]);const v=f?ht.createElement(iQ,{value:f},r):o??null;return ht.createElement("div",Y4({},h,{ref:g}),v)}const r1e=D.forwardRef(n1e),i1e=Yve(function({position:e,...t},r){const i=new mA.Marker(e,t);return N6(i,$ve(r,{overlayContainer:i}))},function(e,t,r){t.position!==r.position&&e.setLatLng(t.position),t.icon!=null&&t.icon!==r.icon&&e.setIcon(t.icon),t.zIndexOffset!=null&&t.zIndexOffset!==r.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),t.opacity!=null&&t.opacity!==r.opacity&&e.setOpacity(t.opacity),e.dragging!=null&&t.draggable!==r.draggable&&(t.draggable===!0?e.dragging.enable():e.dragging.disable())}),s1e=Xve(function(e,t){const r=new mA.Popup(e,t.overlayContainer);return N6(r,t)},function(e,t,{position:r},i){D.useEffect(function(){const{instance:o}=e;function a(c){c.popup===o&&(o.update(),i(!0))}function l(c){c.popup===o&&i(!1)}return t.map.on({popupopen:a,popupclose:l}),t.overlayContainer==null?(r!=null&&o.setLatLng(r),o.openOn(t.map)):t.overlayContainer.bindPopup(o),function(){var u;t.map.off({popupopen:a,popupclose:l}),(u=t.overlayContainer)==null||u.unbindPopup(),t.map.removeLayer(o)}},[e,t,i,r])}),o1e=Zve(function({url:e,...t},r){const i=new mA.TileLayer(e,M6(t,r));return N6(i,r)},function(e,t,r){e1e(e,t,r);const{url:i}=t;i!=null&&i!==r.url&&e.setUrl(i)}),a1e=D.createContext(null);function l1e(){const n=D.use(a1e);if(n==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return n}/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const gA="144",Kp={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Yp={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},aQ=0,X4=1,lQ=2,c1e=3,u1e=0,O6=1,D6=2,ag=3,Df=0,ll=1,xu=2,jd=0,mm=1,Z4=2,eN=3,tN=4,cQ=5,tm=100,uQ=101,dQ=102,nN=103,rN=104,hQ=200,fQ=201,pQ=202,mQ=203,L6=204,k6=205,gQ=206,vQ=207,yQ=208,_Q=209,SQ=210,AQ=0,EQ=1,CQ=2,ax=3,wQ=4,TQ=5,xQ=6,IQ=7,vA=0,bQ=1,MQ=2,zc=0,RQ=1,NQ=2,PQ=3,B6=4,OQ=5,P2=300,Xd=301,Lf=302,Wg=303,sS=304,Av=306,kf=1e3,Ro=1001,qg=1002,ts=1003,oS=1004,d1e=1004,aS=1005,h1e=1005,li=1006,O2=1007,f1e=1007,uh=1008,p1e=1008,Bf=1009,DQ=1010,LQ=1011,F6=1012,kQ=1013,pf=1014,nl=1015,kc=1016,BQ=1017,FQ=1018,gm=1020,zQ=1021,UQ=1022,Wl=1023,jQ=1024,GQ=1025,bf=1026,Rm=1027,HQ=1028,VQ=1029,$Q=1030,WQ=1031,qQ=1033,lT=33776,cT=33777,uT=33778,dT=33779,iN=35840,sN=35841,oN=35842,aN=35843,QQ=36196,lN=37492,cN=37496,uN=37808,dN=37809,hN=37810,fN=37811,pN=37812,mN=37813,gN=37814,vN=37815,yN=37816,_N=37817,SN=37818,AN=37819,EN=37820,CN=37821,wN=36492,z6=2200,JQ=2201,KQ=2202,Qg=2300,Nm=2301,hT=2302,am=2400,lm=2401,lS=2402,D2=2500,U6=2501,YQ=0,j6=1,lx=2,Bu=3e3,ai=3001,XQ=3200,ZQ=3201,tp=0,eJ=1,m1e="",Eu="srgb",mf="srgb-linear",g1e=0,fT=7680,v1e=7681,y1e=7682,_1e=7683,S1e=34055,A1e=34056,E1e=5386,C1e=512,w1e=513,T1e=514,x1e=515,I1e=516,b1e=517,M1e=518,tJ=519,cS=35044,R1e=35048,N1e=35040,P1e=35045,O1e=35049,D1e=35041,L1e=35046,k1e=35050,B1e=35042,F1e="100",TN="300 es",cx=1035;let dh=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}};const Co=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let aB=1234567;const vm=Math.PI/180,uS=180/Math.PI;function cl(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Co[n&255]+Co[n>>8&255]+Co[n>>16&255]+Co[n>>24&255]+"-"+Co[e&255]+Co[e>>8&255]+"-"+Co[e>>16&15|64]+Co[e>>24&255]+"-"+Co[t&63|128]+Co[t>>8&255]+"-"+Co[t>>16&255]+Co[t>>24&255]+Co[r&255]+Co[r>>8&255]+Co[r>>16&255]+Co[r>>24&255]).toLowerCase()}function ns(n,e,t){return Math.max(e,Math.min(t,n))}function G6(n,e){return(n%e+e)%e}function z1e(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function U1e(n,e,t){return n!==e?(t-n)/(e-n):0}function R_(n,e,t){return(1-t)*n+t*e}function j1e(n,e,t,r){return R_(n,e,1-Math.exp(-t*r))}function G1e(n,e=1){return e-Math.abs(G6(n,e*2)-e)}function H1e(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function V1e(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function $1e(n,e){return n+Math.floor(Math.random()*(e-n+1))}function W1e(n,e){return n+Math.random()*(e-n)}function q1e(n){return n*(.5-Math.random())}function Q1e(n){n!==void 0&&(aB=n);let e=aB+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function J1e(n){return n*vm}function K1e(n){return n*uS}function xN(n){return(n&n-1)===0&&n!==0}function nJ(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function ux(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function Y1e(n,e,t,r,i){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+r)/2),u=o((e+r)/2),d=s((e-r)/2),h=o((e-r)/2),f=s((r-e)/2),m=o((r-e)/2);switch(i){case"XYX":n.set(a*u,l*d,l*h,a*c);break;case"YZY":n.set(l*h,a*u,l*d,a*c);break;case"ZXZ":n.set(l*d,l*h,a*u,a*c);break;case"XZX":n.set(a*u,l*m,l*f,a*c);break;case"YXY":n.set(l*f,a*u,l*m,a*c);break;case"ZYZ":n.set(l*m,l*f,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Ld(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Qr(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var kd=Object.freeze({__proto__:null,DEG2RAD:vm,RAD2DEG:uS,generateUUID:cl,clamp:ns,euclideanModulo:G6,mapLinear:z1e,inverseLerp:U1e,lerp:R_,damp:j1e,pingpong:G1e,smoothstep:H1e,smootherstep:V1e,randInt:$1e,randFloat:W1e,randFloatSpread:q1e,seededRandom:Q1e,degToRad:J1e,radToDeg:K1e,isPowerOfTwo:xN,ceilPowerOfTwo:nJ,floorPowerOfTwo:ux,setQuaternionFromProperEuler:Y1e,normalize:Qr,denormalize:Ld});class tt{constructor(e=0,t=0){tt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class La{constructor(){La.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,r,i,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=i,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=r,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[3],l=r[6],c=r[1],u=r[4],d=r[7],h=r[2],f=r[5],m=r[8],g=i[0],v=i[3],y=i[6],A=i[1],C=i[4],T=i[7],x=i[2],R=i[5],N=i[8];return s[0]=o*g+a*A+l*x,s[3]=o*v+a*C+l*R,s[6]=o*y+a*T+l*N,s[1]=c*g+u*A+d*x,s[4]=c*v+u*C+d*R,s[7]=c*y+u*T+d*N,s[2]=h*g+f*A+m*x,s[5]=h*v+f*C+m*R,s[8]=h*y+f*T+m*N,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-r*s*u+r*a*l+i*s*c-i*o*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*o-a*c,h=a*l-u*s,f=c*s-o*l,m=t*d+r*h+i*f;if(m===0)return this.set(0,0,0,0,0,0,0,0,0);const g=1/m;return e[0]=d*g,e[1]=(i*c-u*r)*g,e[2]=(a*r-i*o)*g,e[3]=h*g,e[4]=(u*t-i*l)*g,e[5]=(i*s-a*t)*g,e[6]=f*g,e[7]=(r*l-c*t)*g,e[8]=(o*t-r*s)*g,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(r*l,r*c,-r*(l*o+c*a)+o+e,-i*c,i*l,-i*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){const r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=t,r[4]*=t,r[7]*=t,this}rotate(e){const t=Math.cos(e),r=Math.sin(e),i=this.elements,s=i[0],o=i[3],a=i[6],l=i[1],c=i[4],u=i[7];return i[0]=t*s+r*l,i[3]=t*o+r*c,i[6]=t*a+r*u,i[1]=-r*s+t*l,i[4]=-r*o+t*c,i[7]=-r*a+t*u,this}translate(e,t){const r=this.elements;return r[0]+=e*r[2],r[3]+=e*r[5],r[6]+=e*r[8],r[1]+=t*r[2],r[4]+=t*r[5],r[7]+=t*r[8],this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}function rJ(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const X1e={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function lg(n,e){return new X1e[n](e)}function dS(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function ym(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function pT(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const KM={[Eu]:{[mf]:ym},[mf]:{[Eu]:pT}},Dl={legacyMode:!0,get workingColorSpace(){return mf},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.legacyMode||e===t||!e||!t)return n;if(KM[e]&&KM[e][t]!==void 0){const r=KM[e][t];return n.r=r(n.r),n.g=r(n.g),n.b=r(n.b),n}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}},iJ={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ts={r:0,g:0,b:0},Cc={h:0,s:0,l:0},QE={h:0,s:0,l:0};function YM(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}function JE(n,e){return e.r=n.r,e.g=n.g,e.b=n.b,e}class Dt{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&r===void 0?this.set(e):this.setRGB(e,t,r)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Eu){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Dl.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=mf){return this.r=e,this.g=t,this.b=r,Dl.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=mf){if(e=G6(e,1),t=ns(t,0,1),r=ns(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,o=2*r-s;this.r=YM(o,s,e+1/3),this.g=YM(o,s,e),this.b=YM(o,s,e-1/3)}return Dl.toWorkingColorSpace(this,i),this}setStyle(e,t=Eu){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,Dl.toWorkingColorSpace(this,t),r(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,Dl.toWorkingColorSpace(this,t),r(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const l=parseFloat(s[1])/360,c=parseFloat(s[2])/100,u=parseFloat(s[3])/100;return r(s[4]),this.setHSL(l,c,u,t)}break}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,Dl.toWorkingColorSpace(this,t),this;if(o===6)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,Dl.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=Eu){const r=iJ[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=ym(e.r),this.g=ym(e.g),this.b=ym(e.b),this}copyLinearToSRGB(e){return this.r=pT(e.r),this.g=pT(e.g),this.b=pT(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Eu){return Dl.fromWorkingColorSpace(JE(this,Ts),e),ns(Ts.r*255,0,255)<<16^ns(Ts.g*255,0,255)<<8^ns(Ts.b*255,0,255)<<0}getHexString(e=Eu){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=mf){Dl.fromWorkingColorSpace(JE(this,Ts),t);const r=Ts.r,i=Ts.g,s=Ts.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const d=o-a;switch(c=u<=.5?d/(o+a):d/(2-o-a),o){case r:l=(i-s)/d+(i<s?6:0);break;case i:l=(s-r)/d+2;break;case s:l=(r-i)/d+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=mf){return Dl.fromWorkingColorSpace(JE(this,Ts),t),e.r=Ts.r,e.g=Ts.g,e.b=Ts.b,e}getStyle(e=Eu){return Dl.fromWorkingColorSpace(JE(this,Ts),e),e!==Eu?`color(${e} ${Ts.r} ${Ts.g} ${Ts.b})`:`rgb(${Ts.r*255|0},${Ts.g*255|0},${Ts.b*255|0})`}offsetHSL(e,t,r){return this.getHSL(Cc),Cc.h+=e,Cc.s+=t,Cc.l+=r,this.setHSL(Cc.h,Cc.s,Cc.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(Cc),e.getHSL(QE);const r=R_(Cc.h,QE.h,t),i=R_(Cc.s,QE.s,t),s=R_(Cc.l,QE.l,t);return this.setHSL(r,i,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}Dt.NAMES=iJ;let E0;class H6{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{E0===void 0&&(E0=dS("canvas")),E0.width=e.width,E0.height=e.height;const r=E0.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=E0}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=dS("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=ym(s[o]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(ym(t[r]/255)*255):t[r]=ym(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class cm{constructor(e=null){this.isSource=!0,this.uuid=cl(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(XM(i[o].image)):s.push(XM(i[o]))}else s=XM(i);r.url=s}return t||(e.images[this.uuid]=r),r}}function XM(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?H6.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Z1e=0;class Vi extends dh{constructor(e=Vi.DEFAULT_IMAGE,t=Vi.DEFAULT_MAPPING,r=Ro,i=Ro,s=li,o=uh,a=Wl,l=Bf,c=1,u=Bu){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Z1e++}),this.uuid=cl(),this.name="",this.source=new cm(e),this.mipmaps=[],this.mapping=t,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new tt(0,0),this.repeat=new tt(1,1),this.center=new tt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new La,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==P2)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case kf:e.x=e.x-Math.floor(e.x);break;case Ro:e.x=e.x<0?0:1;break;case qg:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case kf:e.y=e.y-Math.floor(e.y);break;case Ro:e.y=e.y<0?0:1;break;case qg:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}Vi.DEFAULT_IMAGE=null;Vi.DEFAULT_MAPPING=P2;class Br{constructor(e=0,t=0,r=0,i=1){Br.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const l=e.elements,c=l[0],u=l[4],d=l[8],h=l[1],f=l[5],m=l[9],g=l[2],v=l[6],y=l[10];if(Math.abs(u-h)<.01&&Math.abs(d-g)<.01&&Math.abs(m-v)<.01){if(Math.abs(u+h)<.1&&Math.abs(d+g)<.1&&Math.abs(m+v)<.1&&Math.abs(c+f+y-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const C=(c+1)/2,T=(f+1)/2,x=(y+1)/2,R=(u+h)/4,N=(d+g)/4,M=(m+v)/4;return C>T&&C>x?C<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(C),i=R/r,s=N/r):T>x?T<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(T),r=R/i,s=M/i):x<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(x),r=N/s,i=M/s),this.set(r,i,s,t),this}let A=Math.sqrt((v-m)*(v-m)+(d-g)*(d-g)+(h-u)*(h-u));return Math.abs(A)<.001&&(A=1),this.x=(v-m)/A,this.y=(d-g)/A,this.z=(h-u)/A,this.w=Math.acos((c+f+y-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class nc extends dh{constructor(e,t,r={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Br(0,0,e,t),this.scissorTest=!1,this.viewport=new Br(0,0,e,t);const i={width:e,height:t,depth:1};this.texture=new Vi(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:li,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new cm(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class yA extends Vi{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=ts,this.minFilter=ts,this.wrapR=Ro,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class eye extends nc{constructor(e,t,r){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new yA(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class L2 extends Vi{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=ts,this.minFilter=ts,this.wrapR=Ro,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class tye extends nc{constructor(e,t,r){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new L2(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class nye extends nc{constructor(e,t,r,i={}){super(e,t,i),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<r;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,s=this.texture.length;i<s;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=r;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class Hs{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,s,o,a){let l=r[i+0],c=r[i+1],u=r[i+2],d=r[i+3];const h=s[o+0],f=s[o+1],m=s[o+2],g=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d;return}if(a===1){e[t+0]=h,e[t+1]=f,e[t+2]=m,e[t+3]=g;return}if(d!==g||l!==h||c!==f||u!==m){let v=1-a;const y=l*h+c*f+u*m+d*g,A=y>=0?1:-1,C=1-y*y;if(C>Number.EPSILON){const x=Math.sqrt(C),R=Math.atan2(x,y*A);v=Math.sin(v*R)/x,a=Math.sin(a*R)/x}const T=a*A;if(l=l*v+h*T,c=c*v+f*T,u=u*v+m*T,d=d*v+g*T,v===1-a){const x=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=x,c*=x,u*=x,d*=x}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,r,i,s,o){const a=r[i],l=r[i+1],c=r[i+2],u=r[i+3],d=s[o],h=s[o+1],f=s[o+2],m=s[o+3];return e[t]=a*m+u*d+l*f-c*h,e[t+1]=l*m+u*h+c*d-a*f,e[t+2]=c*m+u*f+a*h-l*d,e[t+3]=u*m-a*d-l*h-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(r/2),u=a(i/2),d=a(s/2),h=l(r/2),f=l(i/2),m=l(s/2);switch(o){case"XYZ":this._x=h*u*d+c*f*m,this._y=c*f*d-h*u*m,this._z=c*u*m+h*f*d,this._w=c*u*d-h*f*m;break;case"YXZ":this._x=h*u*d+c*f*m,this._y=c*f*d-h*u*m,this._z=c*u*m-h*f*d,this._w=c*u*d+h*f*m;break;case"ZXY":this._x=h*u*d-c*f*m,this._y=c*f*d+h*u*m,this._z=c*u*m+h*f*d,this._w=c*u*d-h*f*m;break;case"ZYX":this._x=h*u*d-c*f*m,this._y=c*f*d+h*u*m,this._z=c*u*m-h*f*d,this._w=c*u*d+h*f*m;break;case"YZX":this._x=h*u*d+c*f*m,this._y=c*f*d+h*u*m,this._z=c*u*m-h*f*d,this._w=c*u*d-h*f*m;break;case"XZY":this._x=h*u*d-c*f*m,this._y=c*f*d-h*u*m,this._z=c*u*m+h*f*d,this._w=c*u*d+h*f*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],d=t[10],h=r+a+d;if(h>0){const f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(u-l)*f,this._y=(s-c)*f,this._z=(o-i)*f}else if(r>a&&r>d){const f=2*Math.sqrt(1+r-a-d);this._w=(u-l)/f,this._x=.25*f,this._y=(i+o)/f,this._z=(s+c)/f}else if(a>d){const f=2*Math.sqrt(1+a-r-d);this._w=(s-c)/f,this._x=(i+o)/f,this._y=.25*f,this._z=(l+u)/f}else{const f=2*Math.sqrt(1+d-r-a);this._w=(o-i)/f,this._x=(s+c)/f,this._y=(l+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(ns(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=r*u+o*a+i*c-s*l,this._y=i*u+o*l+s*a-r*c,this._z=s*u+o*c+r*l-i*a,this._w=o*u-r*a-i*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const f=1-t;return this._w=f*o+t*this._w,this._x=f*r+t*this._x,this._y=f*i+t*this._y,this._z=f*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),d=Math.sin((1-t)*u)/c,h=Math.sin(t*u)/c;return this._w=o*d+this._w*h,this._x=r*d+this._x*h,this._y=i*d+this._y*h,this._z=s*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(s),r*Math.cos(s),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class le{constructor(e=0,t=0,r=0){le.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(lB.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(lB.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=l*t+o*i-a*r,u=l*r+a*t-s*i,d=l*i+s*r-o*t,h=-s*t-o*r-a*i;return this.x=c*l+h*-s+u*-a-d*-o,this.y=u*l+h*-o+d*-s-c*-a,this.z=d*l+h*-a+c*-o-u*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return ZM.copy(this).projectOnVector(e),this.sub(ZM)}reflect(e){return this.sub(ZM.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(ns(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const ZM=new le,lB=new Hs;class np{constructor(e=new le(1/0,1/0,1/0),t=new le(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,r=1/0,i=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=e.length;l<c;l+=3){const u=e[l],d=e[l+1],h=e[l+2];u<t&&(t=u),d<r&&(r=d),h<i&&(i=h),u>s&&(s=u),d>o&&(o=d),h>a&&(a=h)}return this.min.set(t,r,i),this.max.set(s,o,a),this}setFromBufferAttribute(e){let t=1/0,r=1/0,i=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=e.count;l<c;l++){const u=e.getX(l),d=e.getY(l),h=e.getZ(l);u<t&&(t=u),d<r&&(r=d),h<i&&(i=h),u>s&&(s=u),d>o&&(o=d),h>a&&(a=h)}return this.min.set(t,r,i),this.max.set(s,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=kp.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0)if(t&&r.attributes!=null&&r.attributes.position!==void 0){const s=r.attributes.position;for(let o=0,a=s.count;o<a;o++)kp.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(kp)}else r.boundingBox===null&&r.computeBoundingBox(),e3.copy(r.boundingBox),e3.applyMatrix4(e.matrixWorld),this.union(e3);const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,kp),kp.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Ly),KE.subVectors(this.max,Ly),C0.subVectors(e.a,Ly),w0.subVectors(e.b,Ly),T0.subVectors(e.c,Ly),zh.subVectors(w0,C0),Uh.subVectors(T0,w0),Bp.subVectors(C0,T0);let t=[0,-zh.z,zh.y,0,-Uh.z,Uh.y,0,-Bp.z,Bp.y,zh.z,0,-zh.x,Uh.z,0,-Uh.x,Bp.z,0,-Bp.x,-zh.y,zh.x,0,-Uh.y,Uh.x,0,-Bp.y,Bp.x,0];return!t3(t,C0,w0,T0,KE)||(t=[1,0,0,0,1,0,0,0,1],!t3(t,C0,w0,T0,KE))?!1:(YE.crossVectors(zh,Uh),t=[YE.x,YE.y,YE.z],t3(t,C0,w0,T0,KE))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return kp.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(kp).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(hd[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),hd[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),hd[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),hd[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),hd[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),hd[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),hd[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),hd[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(hd),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const hd=[new le,new le,new le,new le,new le,new le,new le,new le],kp=new le,e3=new np,C0=new le,w0=new le,T0=new le,zh=new le,Uh=new le,Bp=new le,Ly=new le,KE=new le,YE=new le,Fp=new le;function t3(n,e,t,r,i){for(let s=0,o=n.length-3;s<=o;s+=3){Fp.fromArray(n,s);const a=i.x*Math.abs(Fp.x)+i.y*Math.abs(Fp.y)+i.z*Math.abs(Fp.z),l=e.dot(Fp),c=t.dot(Fp),u=r.dot(Fp);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const rye=new np,cB=new le,XE=new le,n3=new le;class rp{constructor(e=new le,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):rye.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){n3.subVectors(e,this.center);const t=n3.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.add(n3.multiplyScalar(i/r)),this.radius+=i}return this}union(e){return this.center.equals(e.center)===!0?XE.set(0,0,1).multiplyScalar(e.radius):XE.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(cB.copy(e.center).add(XE)),this.expandByPoint(cB.copy(e.center).sub(XE)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const fd=new le,r3=new le,ZE=new le,jh=new le,i3=new le,eC=new le,s3=new le;class Ev{constructor(e=new le,t=new le(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,fd)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(r).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=fd.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(fd.copy(this.direction).multiplyScalar(t).add(this.origin),fd.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){r3.copy(e).add(t).multiplyScalar(.5),ZE.copy(t).sub(e).normalize(),jh.copy(this.origin).sub(r3);const s=e.distanceTo(t)*.5,o=-this.direction.dot(ZE),a=jh.dot(this.direction),l=-jh.dot(ZE),c=jh.lengthSq(),u=Math.abs(1-o*o);let d,h,f,m;if(u>0)if(d=o*l-a,h=o*a-l,m=s*u,d>=0)if(h>=-m)if(h<=m){const g=1/u;d*=g,h*=g,f=d*(d+o*h+2*a)+h*(o*d+h+2*l)+c}else h=s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;else h=-s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;else h<=-m?(d=Math.max(0,-(-o*s+a)),h=d>0?-s:Math.min(Math.max(-s,-l),s),f=-d*d+h*(h+2*l)+c):h<=m?(d=0,h=Math.min(Math.max(-s,-l),s),f=h*(h+2*l)+c):(d=Math.max(0,-(o*s+a)),h=d>0?s:Math.min(Math.max(-s,-l),s),f=-d*d+h*(h+2*l)+c);else h=o>0?-s:s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;return r&&r.copy(this.direction).multiplyScalar(d).add(this.origin),i&&i.copy(ZE).multiplyScalar(h).add(r3),f}intersectSphere(e,t){fd.subVectors(e.center,this.origin);const r=fd.dot(this.direction),i=fd.dot(fd)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return a<0&&l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,h=this.origin;return c>=0?(r=(e.min.x-h.x)*c,i=(e.max.x-h.x)*c):(r=(e.max.x-h.x)*c,i=(e.min.x-h.x)*c),u>=0?(s=(e.min.y-h.y)*u,o=(e.max.y-h.y)*u):(s=(e.max.y-h.y)*u,o=(e.min.y-h.y)*u),r>o||s>i||((s>r||r!==r)&&(r=s),(o<i||i!==i)&&(i=o),d>=0?(a=(e.min.z-h.z)*d,l=(e.max.z-h.z)*d):(a=(e.max.z-h.z)*d,l=(e.min.z-h.z)*d),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,fd)!==null}intersectTriangle(e,t,r,i,s){i3.subVectors(t,e),eC.subVectors(r,e),s3.crossVectors(i3,eC);let o=this.direction.dot(s3),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;jh.subVectors(this.origin,e);const l=a*this.direction.dot(eC.crossVectors(jh,eC));if(l<0)return null;const c=a*this.direction.dot(i3.cross(jh));if(c<0||l+c>o)return null;const u=-a*jh.dot(s3);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class xn{constructor(){xn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,r,i,s,o,a,l,c,u,d,h,f,m,g,v){const y=this.elements;return y[0]=e,y[4]=t,y[8]=r,y[12]=i,y[1]=s,y[5]=o,y[9]=a,y[13]=l,y[2]=c,y[6]=u,y[10]=d,y[14]=h,y[3]=f,y[7]=m,y[11]=g,y[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new xn().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/x0.setFromMatrixColumn(e,0).length(),s=1/x0.setFromMatrixColumn(e,1).length(),o=1/x0.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),c=Math.sin(i),u=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const h=o*u,f=o*d,m=a*u,g=a*d;t[0]=l*u,t[4]=-l*d,t[8]=c,t[1]=f+m*c,t[5]=h-g*c,t[9]=-a*l,t[2]=g-h*c,t[6]=m+f*c,t[10]=o*l}else if(e.order==="YXZ"){const h=l*u,f=l*d,m=c*u,g=c*d;t[0]=h+g*a,t[4]=m*a-f,t[8]=o*c,t[1]=o*d,t[5]=o*u,t[9]=-a,t[2]=f*a-m,t[6]=g+h*a,t[10]=o*l}else if(e.order==="ZXY"){const h=l*u,f=l*d,m=c*u,g=c*d;t[0]=h-g*a,t[4]=-o*d,t[8]=m+f*a,t[1]=f+m*a,t[5]=o*u,t[9]=g-h*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const h=o*u,f=o*d,m=a*u,g=a*d;t[0]=l*u,t[4]=m*c-f,t[8]=h*c+g,t[1]=l*d,t[5]=g*c+h,t[9]=f*c-m,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const h=o*l,f=o*c,m=a*l,g=a*c;t[0]=l*u,t[4]=g-h*d,t[8]=m*d+f,t[1]=d,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=f*d+m,t[10]=h-g*d}else if(e.order==="XZY"){const h=o*l,f=o*c,m=a*l,g=a*c;t[0]=l*u,t[4]=-d,t[8]=c*u,t[1]=h*d+g,t[5]=o*u,t[9]=f*d-m,t[2]=m*d-f,t[6]=a*u,t[10]=g*d+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(iye,e,sye)}lookAt(e,t,r){const i=this.elements;return qa.subVectors(e,t),qa.lengthSq()===0&&(qa.z=1),qa.normalize(),Gh.crossVectors(r,qa),Gh.lengthSq()===0&&(Math.abs(r.z)===1?qa.x+=1e-4:qa.z+=1e-4,qa.normalize(),Gh.crossVectors(r,qa)),Gh.normalize(),tC.crossVectors(qa,Gh),i[0]=Gh.x,i[4]=tC.x,i[8]=qa.x,i[1]=Gh.y,i[5]=tC.y,i[9]=qa.y,i[2]=Gh.z,i[6]=tC.z,i[10]=qa.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[4],l=r[8],c=r[12],u=r[1],d=r[5],h=r[9],f=r[13],m=r[2],g=r[6],v=r[10],y=r[14],A=r[3],C=r[7],T=r[11],x=r[15],R=i[0],N=i[4],M=i[8],O=i[12],P=i[1],z=i[5],V=i[9],$=i[13],B=i[2],q=i[6],K=i[10],se=i[14],W=i[3],ee=i[7],Q=i[11],Y=i[15];return s[0]=o*R+a*P+l*B+c*W,s[4]=o*N+a*z+l*q+c*ee,s[8]=o*M+a*V+l*K+c*Q,s[12]=o*O+a*$+l*se+c*Y,s[1]=u*R+d*P+h*B+f*W,s[5]=u*N+d*z+h*q+f*ee,s[9]=u*M+d*V+h*K+f*Q,s[13]=u*O+d*$+h*se+f*Y,s[2]=m*R+g*P+v*B+y*W,s[6]=m*N+g*z+v*q+y*ee,s[10]=m*M+g*V+v*K+y*Q,s[14]=m*O+g*$+v*se+y*Y,s[3]=A*R+C*P+T*B+x*W,s[7]=A*N+C*z+T*q+x*ee,s[11]=A*M+C*V+T*K+x*Q,s[15]=A*O+C*$+T*se+x*Y,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],d=e[6],h=e[10],f=e[14],m=e[3],g=e[7],v=e[11],y=e[15];return m*(+s*l*d-i*c*d-s*a*h+r*c*h+i*a*f-r*l*f)+g*(+t*l*f-t*c*h+s*o*h-i*o*f+i*c*u-s*l*u)+v*(+t*c*d-t*a*f-s*o*d+r*o*f+s*a*u-r*c*u)+y*(-i*a*u-t*l*d+t*a*h+i*o*d-r*o*h+r*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],h=e[10],f=e[11],m=e[12],g=e[13],v=e[14],y=e[15],A=d*v*c-g*h*c+g*l*f-a*v*f-d*l*y+a*h*y,C=m*h*c-u*v*c-m*l*f+o*v*f+u*l*y-o*h*y,T=u*g*c-m*d*c+m*a*f-o*g*f-u*a*y+o*d*y,x=m*d*l-u*g*l-m*a*h+o*g*h+u*a*v-o*d*v,R=t*A+r*C+i*T+s*x;if(R===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const N=1/R;return e[0]=A*N,e[1]=(g*h*s-d*v*s-g*i*f+r*v*f+d*i*y-r*h*y)*N,e[2]=(a*v*s-g*l*s+g*i*c-r*v*c-a*i*y+r*l*y)*N,e[3]=(d*l*s-a*h*s-d*i*c+r*h*c+a*i*f-r*l*f)*N,e[4]=C*N,e[5]=(u*v*s-m*h*s+m*i*f-t*v*f-u*i*y+t*h*y)*N,e[6]=(m*l*s-o*v*s-m*i*c+t*v*c+o*i*y-t*l*y)*N,e[7]=(o*h*s-u*l*s+u*i*c-t*h*c-o*i*f+t*l*f)*N,e[8]=T*N,e[9]=(m*d*s-u*g*s-m*r*f+t*g*f+u*r*y-t*d*y)*N,e[10]=(o*g*s-m*a*s+m*r*c-t*g*c-o*r*y+t*a*y)*N,e[11]=(u*a*s-o*d*s-u*r*c+t*d*c+o*r*f-t*a*f)*N,e[12]=x*N,e[13]=(u*g*i-m*d*i+m*r*h-t*g*h-u*r*v+t*d*v)*N,e[14]=(m*a*i-o*g*i-m*r*l+t*g*l+o*r*v-t*a*v)*N,e[15]=(o*d*i-u*a*i+u*r*l-t*d*l-o*r*h+t*a*h)*N,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+r,c*a-i*l,c*l+i*a,0,c*a+i*l,u*a+r,u*l-i*o,0,c*l-i*a,u*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,d=a+a,h=s*c,f=s*u,m=s*d,g=o*u,v=o*d,y=a*d,A=l*c,C=l*u,T=l*d,x=r.x,R=r.y,N=r.z;return i[0]=(1-(g+y))*x,i[1]=(f+T)*x,i[2]=(m-C)*x,i[3]=0,i[4]=(f-T)*R,i[5]=(1-(h+y))*R,i[6]=(v+A)*R,i[7]=0,i[8]=(m+C)*N,i[9]=(v-A)*N,i[10]=(1-(h+g))*N,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=x0.set(i[0],i[1],i[2]).length();const o=x0.set(i[4],i[5],i[6]).length(),a=x0.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],wc.copy(this);const c=1/s,u=1/o,d=1/a;return wc.elements[0]*=c,wc.elements[1]*=c,wc.elements[2]*=c,wc.elements[4]*=u,wc.elements[5]*=u,wc.elements[6]*=u,wc.elements[8]*=d,wc.elements[9]*=d,wc.elements[10]*=d,t.setFromRotationMatrix(wc),r.x=s,r.y=o,r.z=a,this}makePerspective(e,t,r,i,s,o){const a=this.elements,l=2*s/(t-e),c=2*s/(r-i),u=(t+e)/(t-e),d=(r+i)/(r-i),h=-(o+s)/(o-s),f=-2*o*s/(o-s);return a[0]=l,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=c,a[9]=d,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,r,i,s,o){const a=this.elements,l=1/(t-e),c=1/(r-i),u=1/(o-s),d=(t+e)*l,h=(r+i)*c,f=(o+s)*u;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-d,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const x0=new le,wc=new xn,iye=new le(0,0,0),sye=new le(1,1,1),Gh=new le,tC=new le,qa=new le,uB=new xn,dB=new Hs;class Jm{constructor(e=0,t=0,r=0,i=Jm.DefaultOrder){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],c=i[5],u=i[9],d=i[2],h=i[6],f=i[10];switch(t){case"XYZ":this._y=Math.asin(ns(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(h,c),this._z=0);break;case"YXZ":this._x=Math.asin(-ns(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(ns(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-d,f),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-ns(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(h,f),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(ns(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-ns(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return uB.makeRotationFromQuaternion(e),this.setFromRotationMatrix(uB,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return dB.setFromEuler(this),this.setFromQuaternion(dB,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}Jm.DefaultOrder="XYZ";Jm.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class _m{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let oye=0;const hB=new le,I0=new Hs,pd=new xn,nC=new le,ky=new le,aye=new le,lye=new Hs,fB=new le(1,0,0),pB=new le(0,1,0),mB=new le(0,0,1),cye={type:"added"},gB={type:"removed"};class pr extends dh{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:oye++}),this.uuid=cl(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=pr.DefaultUp.clone();const e=new le,t=new Jm,r=new Hs,i=new le(1,1,1);function s(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new xn},normalMatrix:{value:new La}}),this.matrix=new xn,this.matrixWorld=new xn,this.matrixAutoUpdate=pr.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=pr.DefaultMatrixWorldAutoUpdate,this.layers=new _m,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return I0.setFromAxisAngle(e,t),this.quaternion.multiply(I0),this}rotateOnWorldAxis(e,t){return I0.setFromAxisAngle(e,t),this.quaternion.premultiply(I0),this}rotateX(e){return this.rotateOnAxis(fB,e)}rotateY(e){return this.rotateOnAxis(pB,e)}rotateZ(e){return this.rotateOnAxis(mB,e)}translateOnAxis(e,t){return hB.copy(e).applyQuaternion(this.quaternion),this.position.add(hB.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(fB,e)}translateY(e){return this.translateOnAxis(pB,e)}translateZ(e){return this.translateOnAxis(mB,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(pd.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?nC.copy(e):nC.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),ky.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?pd.lookAt(ky,nC,this.up):pd.lookAt(nC,ky,this.up),this.quaternion.setFromRotationMatrix(pd),i&&(pd.extractRotation(i.matrixWorld),I0.setFromRotationMatrix(pd),this.quaternion.premultiply(I0.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(cye)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(gB)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(gB)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),pd.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),pd.multiply(e.parent.matrixWorld)),e.applyMatrix4(pd),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,t);if(o!==void 0)return o}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ky,e,aye),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ky,lye,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++){const s=t[r];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++){const a=i[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const d=l[c];s(e.shapes,d)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),d=o(e.shapes),h=o(e.skeletons),f=o(e.animations),m=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),u.length>0&&(r.images=u),d.length>0&&(r.shapes=d),h.length>0&&(r.skeletons=h),f.length>0&&(r.animations=f),m.length>0&&(r.nodes=m)}return r.object=i,r;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}pr.DefaultUp=new le(0,1,0);pr.DefaultMatrixAutoUpdate=!0;pr.DefaultMatrixWorldAutoUpdate=!0;const Tc=new le,md=new le,o3=new le,gd=new le,b0=new le,M0=new le,vB=new le,a3=new le,l3=new le,c3=new le;class Gl{constructor(e=new le,t=new le,r=new le){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),Tc.subVectors(e,t),i.cross(Tc);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){Tc.subVectors(i,t),md.subVectors(r,t),o3.subVectors(e,t);const o=Tc.dot(Tc),a=Tc.dot(md),l=Tc.dot(o3),c=md.dot(md),u=md.dot(o3),d=o*c-a*a;if(d===0)return s.set(-2,-1,-1);const h=1/d,f=(c*l-a*u)*h,m=(o*u-a*l)*h;return s.set(1-f-m,m,f)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,gd),gd.x>=0&&gd.y>=0&&gd.x+gd.y<=1}static getUV(e,t,r,i,s,o,a,l){return this.getBarycoord(e,t,r,i,gd),l.set(0,0),l.addScaledVector(s,gd.x),l.addScaledVector(o,gd.y),l.addScaledVector(a,gd.z),l}static isFrontFacing(e,t,r,i){return Tc.subVectors(r,t),md.subVectors(e,t),Tc.cross(md).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Tc.subVectors(this.c,this.b),md.subVectors(this.a,this.b),Tc.cross(md).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Gl.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Gl.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,i,s){return Gl.getUV(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return Gl.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Gl.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let o,a;b0.subVectors(i,r),M0.subVectors(s,r),a3.subVectors(e,r);const l=b0.dot(a3),c=M0.dot(a3);if(l<=0&&c<=0)return t.copy(r);l3.subVectors(e,i);const u=b0.dot(l3),d=M0.dot(l3);if(u>=0&&d<=u)return t.copy(i);const h=l*d-u*c;if(h<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(r).addScaledVector(b0,o);c3.subVectors(e,s);const f=b0.dot(c3),m=M0.dot(c3);if(m>=0&&f<=m)return t.copy(s);const g=f*c-l*m;if(g<=0&&c>=0&&m<=0)return a=c/(c-m),t.copy(r).addScaledVector(M0,a);const v=u*m-f*d;if(v<=0&&d-u>=0&&f-m>=0)return vB.subVectors(s,i),a=(d-u)/(d-u+(f-m)),t.copy(i).addScaledVector(vB,a);const y=1/(v+g+h);return o=g*y,a=h*y,t.copy(r).addScaledVector(b0,o).addScaledVector(M0,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let uye=0;class Rs extends dh{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:uye++}),this.uuid=cl(),this.name="",this.type="Material",this.blending=mm,this.side=Df,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=L6,this.blendDst=k6,this.blendEquation=tm,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=ax,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=tJ,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=fT,this.stencilZFail=fT,this.stencilZPass=fT,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const i=this[t];if(i===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==mm&&(r.blending=this.blending),this.side!==Df&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class rl extends Rs{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Dt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=vA,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const ds=new le,rC=new tt;class wr{constructor(e,t,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r===!0,this.usage=cS,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)rC.fromBufferAttribute(this,t),rC.applyMatrix3(e),this.setXY(t,rC.x,rC.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)ds.fromBufferAttribute(this,t),ds.applyMatrix3(e),this.setXYZ(t,ds.x,ds.y,ds.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)ds.fromBufferAttribute(this,t),ds.applyMatrix4(e),this.setXYZ(t,ds.x,ds.y,ds.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)ds.fromBufferAttribute(this,t),ds.applyNormalMatrix(e),this.setXYZ(t,ds.x,ds.y,ds.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)ds.fromBufferAttribute(this,t),ds.transformDirection(e),this.setXYZ(t,ds.x,ds.y,ds.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Ld(t,this.array)),t}setX(e,t){return this.normalized&&(t=Qr(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Ld(t,this.array)),t}setY(e,t){return this.normalized&&(t=Qr(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Ld(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Qr(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Ld(t,this.array)),t}setW(e,t){return this.normalized&&(t=Qr(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Qr(t,this.array),r=Qr(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=Qr(t,this.array),r=Qr(r,this.array),i=Qr(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=Qr(t,this.array),r=Qr(r,this.array),i=Qr(i,this.array),s=Qr(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==cS&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class dye extends wr{constructor(e,t,r){super(new Int8Array(e),t,r)}}class hye extends wr{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class fye extends wr{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class pye extends wr{constructor(e,t,r){super(new Int16Array(e),t,r)}}class V6 extends wr{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class mye extends wr{constructor(e,t,r){super(new Int32Array(e),t,r)}}class $6 extends wr{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class gye extends wr{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}}class Kt extends wr{constructor(e,t,r){super(new Float32Array(e),t,r)}}class vye extends wr{constructor(e,t,r){super(new Float64Array(e),t,r)}}let yye=0;const Ol=new xn,u3=new pr,R0=new le,Qa=new np,By=new np,ks=new le;class Jn extends dh{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:yye++}),this.uuid=cl(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(rJ(e)?$6:V6)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new La().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ol.makeRotationFromQuaternion(e),this.applyMatrix4(Ol),this}rotateX(e){return Ol.makeRotationX(e),this.applyMatrix4(Ol),this}rotateY(e){return Ol.makeRotationY(e),this.applyMatrix4(Ol),this}rotateZ(e){return Ol.makeRotationZ(e),this.applyMatrix4(Ol),this}translate(e,t,r){return Ol.makeTranslation(e,t,r),this.applyMatrix4(Ol),this}scale(e,t,r){return Ol.makeScale(e,t,r),this.applyMatrix4(Ol),this}lookAt(e){return u3.lookAt(e),u3.updateMatrix(),this.applyMatrix4(u3.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(R0).negate(),this.translate(R0.x,R0.y,R0.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Kt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new np);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new le(-1/0,-1/0,-1/0),new le(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const s=t[r];Qa.setFromBufferAttribute(s),this.morphTargetsRelative?(ks.addVectors(this.boundingBox.min,Qa.min),this.boundingBox.expandByPoint(ks),ks.addVectors(this.boundingBox.max,Qa.max),this.boundingBox.expandByPoint(ks)):(this.boundingBox.expandByPoint(Qa.min),this.boundingBox.expandByPoint(Qa.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new rp);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new le,1/0);return}if(e){const r=this.boundingSphere.center;if(Qa.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];By.setFromBufferAttribute(a),this.morphTargetsRelative?(ks.addVectors(Qa.min,By.min),Qa.expandByPoint(ks),ks.addVectors(Qa.max,By.max),Qa.expandByPoint(ks)):(Qa.expandByPoint(By.min),Qa.expandByPoint(By.max))}Qa.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)ks.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(ks));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)ks.fromBufferAttribute(a,c),l&&(R0.fromBufferAttribute(e,c),ks.add(R0)),i=Math.max(i,r.distanceToSquared(ks))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=t.position.array,s=t.normal.array,o=t.uv.array,a=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new wr(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let P=0;P<a;P++)c[P]=new le,u[P]=new le;const d=new le,h=new le,f=new le,m=new tt,g=new tt,v=new tt,y=new le,A=new le;function C(P,z,V){d.fromArray(i,P*3),h.fromArray(i,z*3),f.fromArray(i,V*3),m.fromArray(o,P*2),g.fromArray(o,z*2),v.fromArray(o,V*2),h.sub(d),f.sub(d),g.sub(m),v.sub(m);const $=1/(g.x*v.y-v.x*g.y);isFinite($)&&(y.copy(h).multiplyScalar(v.y).addScaledVector(f,-g.y).multiplyScalar($),A.copy(f).multiplyScalar(g.x).addScaledVector(h,-v.x).multiplyScalar($),c[P].add(y),c[z].add(y),c[V].add(y),u[P].add(A),u[z].add(A),u[V].add(A))}let T=this.groups;T.length===0&&(T=[{start:0,count:r.length}]);for(let P=0,z=T.length;P<z;++P){const V=T[P],$=V.start,B=V.count;for(let q=$,K=$+B;q<K;q+=3)C(r[q+0],r[q+1],r[q+2])}const x=new le,R=new le,N=new le,M=new le;function O(P){N.fromArray(s,P*3),M.copy(N);const z=c[P];x.copy(z),x.sub(N.multiplyScalar(N.dot(z))).normalize(),R.crossVectors(M,z);const $=R.dot(u[P])<0?-1:1;l[P*4]=x.x,l[P*4+1]=x.y,l[P*4+2]=x.z,l[P*4+3]=$}for(let P=0,z=T.length;P<z;++P){const V=T[P],$=V.start,B=V.count;for(let q=$,K=$+B;q<K;q+=3)O(r[q+0]),O(r[q+1]),O(r[q+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new wr(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let h=0,f=r.count;h<f;h++)r.setXYZ(h,0,0,0);const i=new le,s=new le,o=new le,a=new le,l=new le,c=new le,u=new le,d=new le;if(e)for(let h=0,f=e.count;h<f;h+=3){const m=e.getX(h+0),g=e.getX(h+1),v=e.getX(h+2);i.fromBufferAttribute(t,m),s.fromBufferAttribute(t,g),o.fromBufferAttribute(t,v),u.subVectors(o,s),d.subVectors(i,s),u.cross(d),a.fromBufferAttribute(r,m),l.fromBufferAttribute(r,g),c.fromBufferAttribute(r,v),a.add(u),l.add(u),c.add(u),r.setXYZ(m,a.x,a.y,a.z),r.setXYZ(g,l.x,l.y,l.z),r.setXYZ(v,c.x,c.y,c.z)}else for(let h=0,f=t.count;h<f;h+=3)i.fromBufferAttribute(t,h+0),s.fromBufferAttribute(t,h+1),o.fromBufferAttribute(t,h+2),u.subVectors(o,s),d.subVectors(i,s),u.cross(d),r.setXYZ(h+0,u.x,u.y,u.z),r.setXYZ(h+1,u.x,u.y,u.z),r.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)ks.fromBufferAttribute(e,t),ks.normalize(),e.setXYZ(t,ks.x,ks.y,ks.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,d=a.normalized,h=new c.constructor(l.length*u);let f=0,m=0;for(let g=0,v=l.length;g<v;g++){a.isInterleavedBufferAttribute?f=l[g]*a.data.stride+a.offset:f=l[g]*u;for(let y=0;y<u;y++)h[m++]=c[f++]}return new wr(h,u,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Jn,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],c=e(l,r);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,d=c.length;u<d;u++){const h=c[u],f=e(h,r);l.push(f)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,h=c.length;d<h;d++){const f=c[d];u.push(f.toJSON(e.data))}u.length>0&&(i[l]=u,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const c in i){const u=i[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],d=s[c];for(let h=0,f=d.length;h<f;h++)u.push(d[h].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const d=o[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const yB=new xn,N0=new Ev,d3=new rp,Hh=new le,Vh=new le,$h=new le,h3=new le,f3=new le,p3=new le,iC=new le,sC=new le,oC=new le,aC=new tt,lC=new tt,cC=new tt,m3=new le,uC=new le;class js extends pr{constructor(e=new Jn,t=new rl){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;if(i===void 0||(r.boundingSphere===null&&r.computeBoundingSphere(),d3.copy(r.boundingSphere),d3.applyMatrix4(s),e.ray.intersectsSphere(d3)===!1)||(yB.copy(s).invert(),N0.copy(e.ray).applyMatrix4(yB),r.boundingBox!==null&&N0.intersectsBox(r.boundingBox)===!1))return;let o;const a=r.index,l=r.attributes.position,c=r.morphAttributes.position,u=r.morphTargetsRelative,d=r.attributes.uv,h=r.attributes.uv2,f=r.groups,m=r.drawRange;if(a!==null)if(Array.isArray(i))for(let g=0,v=f.length;g<v;g++){const y=f[g],A=i[y.materialIndex],C=Math.max(y.start,m.start),T=Math.min(a.count,Math.min(y.start+y.count,m.start+m.count));for(let x=C,R=T;x<R;x+=3){const N=a.getX(x),M=a.getX(x+1),O=a.getX(x+2);o=dC(this,A,e,N0,l,c,u,d,h,N,M,O),o&&(o.faceIndex=Math.floor(x/3),o.face.materialIndex=y.materialIndex,t.push(o))}}else{const g=Math.max(0,m.start),v=Math.min(a.count,m.start+m.count);for(let y=g,A=v;y<A;y+=3){const C=a.getX(y),T=a.getX(y+1),x=a.getX(y+2);o=dC(this,i,e,N0,l,c,u,d,h,C,T,x),o&&(o.faceIndex=Math.floor(y/3),t.push(o))}}else if(l!==void 0)if(Array.isArray(i))for(let g=0,v=f.length;g<v;g++){const y=f[g],A=i[y.materialIndex],C=Math.max(y.start,m.start),T=Math.min(l.count,Math.min(y.start+y.count,m.start+m.count));for(let x=C,R=T;x<R;x+=3){const N=x,M=x+1,O=x+2;o=dC(this,A,e,N0,l,c,u,d,h,N,M,O),o&&(o.faceIndex=Math.floor(x/3),o.face.materialIndex=y.materialIndex,t.push(o))}}else{const g=Math.max(0,m.start),v=Math.min(l.count,m.start+m.count);for(let y=g,A=v;y<A;y+=3){const C=y,T=y+1,x=y+2;o=dC(this,i,e,N0,l,c,u,d,h,C,T,x),o&&(o.faceIndex=Math.floor(y/3),t.push(o))}}}}function _ye(n,e,t,r,i,s,o,a){let l;if(e.side===ll?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side!==xu,a),l===null)return null;uC.copy(a),uC.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(uC);return c<t.near||c>t.far?null:{distance:c,point:uC.clone(),object:n}}function dC(n,e,t,r,i,s,o,a,l,c,u,d){Hh.fromBufferAttribute(i,c),Vh.fromBufferAttribute(i,u),$h.fromBufferAttribute(i,d);const h=n.morphTargetInfluences;if(s&&h){iC.set(0,0,0),sC.set(0,0,0),oC.set(0,0,0);for(let m=0,g=s.length;m<g;m++){const v=h[m],y=s[m];v!==0&&(h3.fromBufferAttribute(y,c),f3.fromBufferAttribute(y,u),p3.fromBufferAttribute(y,d),o?(iC.addScaledVector(h3,v),sC.addScaledVector(f3,v),oC.addScaledVector(p3,v)):(iC.addScaledVector(h3.sub(Hh),v),sC.addScaledVector(f3.sub(Vh),v),oC.addScaledVector(p3.sub($h),v)))}Hh.add(iC),Vh.add(sC),$h.add(oC)}n.isSkinnedMesh&&(n.boneTransform(c,Hh),n.boneTransform(u,Vh),n.boneTransform(d,$h));const f=_ye(n,e,t,r,Hh,Vh,$h,m3);if(f){a&&(aC.fromBufferAttribute(a,c),lC.fromBufferAttribute(a,u),cC.fromBufferAttribute(a,d),f.uv=Gl.getUV(m3,Hh,Vh,$h,aC,lC,cC,new tt)),l&&(aC.fromBufferAttribute(l,c),lC.fromBufferAttribute(l,u),cC.fromBufferAttribute(l,d),f.uv2=Gl.getUV(m3,Hh,Vh,$h,aC,lC,cC,new tt));const m={a:c,b:u,c:d,normal:new le,materialIndex:0};Gl.getNormal(Hh,Vh,$h,m.normal),f.face=m}return f}class ip extends Jn{constructor(e=1,t=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],d=[];let h=0,f=0;m("z","y","x",-1,-1,r,t,e,o,s,0),m("z","y","x",1,-1,r,t,-e,o,s,1),m("x","z","y",1,1,e,r,t,i,o,2),m("x","z","y",1,-1,e,r,-t,i,o,3),m("x","y","z",1,-1,e,t,r,i,s,4),m("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new Kt(c,3)),this.setAttribute("normal",new Kt(u,3)),this.setAttribute("uv",new Kt(d,2));function m(g,v,y,A,C,T,x,R,N,M,O){const P=T/N,z=x/M,V=T/2,$=x/2,B=R/2,q=N+1,K=M+1;let se=0,W=0;const ee=new le;for(let Q=0;Q<K;Q++){const Y=Q*z-$;for(let ae=0;ae<q;ae++){const fe=ae*P-V;ee[g]=fe*A,ee[v]=Y*C,ee[y]=B,c.push(ee.x,ee.y,ee.z),ee[g]=0,ee[v]=0,ee[y]=R>0?1:-1,u.push(ee.x,ee.y,ee.z),d.push(ae/N),d.push(1-Q/M),se+=1}}for(let Q=0;Q<M;Q++)for(let Y=0;Y<N;Y++){const ae=h+Y+q*Q,fe=h+Y+q*(Q+1),we=h+(Y+1)+q*(Q+1),ge=h+(Y+1)+q*Q;l.push(ae,fe,ge),l.push(fe,we,ge),W+=6}a.addGroup(f,W,O),f+=W,h+=se}}static fromJSON(e){return new ip(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Jg(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function To(n){const e={};for(let t=0;t<n.length;t++){const r=Jg(n[t]);for(const i in r)e[i]=r[i]}return e}function Sye(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}const sJ={clone:Jg,merge:To};var Aye=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Eye=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Vc extends Rs{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Aye,this.fragmentShader=Eye,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Jg(e.uniforms),this.uniformsGroups=Sye(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class Kg extends pr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new xn,this.projectionMatrix=new xn,this.projectionMatrixInverse=new xn}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}let gi=class extends Kg{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=uS*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(vm*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return uS*2*Math.atan(Math.tan(vm*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(vm*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*i/l,t-=o.offsetY*r/c,i*=o.width/l,r*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}};const P0=90,O0=1;class oJ extends pr{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r;const i=new gi(P0,O0,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new le(1,0,0)),this.add(i);const s=new gi(P0,O0,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new le(-1,0,0)),this.add(s);const o=new gi(P0,O0,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new le(0,1,0)),this.add(o);const a=new gi(P0,O0,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new le(0,-1,0)),this.add(a);const l=new gi(P0,O0,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new le(0,0,1)),this.add(l);const c=new gi(P0,O0,e,t);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new le(0,0,-1)),this.add(c)}update(e,t){this.parent===null&&this.updateMatrixWorld();const r=this.renderTarget,[i,s,o,a,l,c]=this.children,u=e.getRenderTarget(),d=e.toneMapping,h=e.xr.enabled;e.toneMapping=zc,e.xr.enabled=!1;const f=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,i),e.setRenderTarget(r,1),e.render(t,s),e.setRenderTarget(r,2),e.render(t,o),e.setRenderTarget(r,3),e.render(t,a),e.setRenderTarget(r,4),e.render(t,l),r.texture.generateMipmaps=f,e.setRenderTarget(r,5),e.render(t,c),e.setRenderTarget(u),e.toneMapping=d,e.xr.enabled=h,r.texture.needsPMREMUpdate=!0}}class _A extends Vi{constructor(e,t,r,i,s,o,a,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:Xd,super(e,t,r,i,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class W6 extends nc{constructor(e,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new _A(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:li}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new ip(5,5,5),s=new Vc({name:"CubemapFromEquirect",uniforms:Jg(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:ll,blending:jd});s.uniforms.tEquirect.value=t;const o=new js(i,s),a=t.minFilter;return t.minFilter===uh&&(t.minFilter=li),new oJ(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(s)}}const g3=new le,Cye=new le,wye=new La;class Id{constructor(e=new le(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=g3.subVectors(r,t).cross(Cye.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const r=e.delta(g3),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(r).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||wye.getNormalMatrix(e),i=this.coplanarPoint(g3).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const D0=new rp,hC=new le;class k2{constructor(e=new Id,t=new Id,r=new Id,i=new Id,s=new Id,o=new Id){this.planes=[e,t,r,i,s,o]}set(e,t,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){const t=this.planes,r=e.elements,i=r[0],s=r[1],o=r[2],a=r[3],l=r[4],c=r[5],u=r[6],d=r[7],h=r[8],f=r[9],m=r[10],g=r[11],v=r[12],y=r[13],A=r[14],C=r[15];return t[0].setComponents(a-i,d-l,g-h,C-v).normalize(),t[1].setComponents(a+i,d+l,g+h,C+v).normalize(),t[2].setComponents(a+s,d+c,g+f,C+y).normalize(),t[3].setComponents(a-s,d-c,g-f,C-y).normalize(),t[4].setComponents(a-o,d-u,g-m,C-A).normalize(),t[5].setComponents(a+o,d+u,g+m,C+A).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),D0.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(D0)}intersectsSprite(e){return D0.center.set(0,0,0),D0.radius=.7071067811865476,D0.applyMatrix4(e.matrixWorld),this.intersectsSphere(D0)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(hC.x=i.normal.x>0?e.max.x:e.min.x,hC.y=i.normal.y>0?e.max.y:e.min.y,hC.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(hC)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function aJ(){let n=null,e=!1,t=null,r=null;function i(s,o){t(s,o),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function Tye(n,e){const t=e.isWebGL2,r=new WeakMap;function i(c,u){const d=c.array,h=c.usage,f=n.createBuffer();n.bindBuffer(u,f),n.bufferData(u,d,h),c.onUploadCallback();let m;if(d instanceof Float32Array)m=5126;else if(d instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(t)m=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else m=5123;else if(d instanceof Int16Array)m=5122;else if(d instanceof Uint32Array)m=5125;else if(d instanceof Int32Array)m=5124;else if(d instanceof Int8Array)m=5120;else if(d instanceof Uint8Array)m=5121;else if(d instanceof Uint8ClampedArray)m=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:f,type:m,bytesPerElement:d.BYTES_PER_ELEMENT,version:c.version}}function s(c,u,d){const h=u.array,f=u.updateRange;n.bindBuffer(d,c),f.count===-1?n.bufferSubData(d,0,h):(t?n.bufferSubData(d,f.offset*h.BYTES_PER_ELEMENT,h,f.offset,f.count):n.bufferSubData(d,f.offset*h.BYTES_PER_ELEMENT,h.subarray(f.offset,f.offset+f.count)),f.count=-1)}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),r.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=r.get(c);u&&(n.deleteBuffer(u.buffer),r.delete(c))}function l(c,u){if(c.isGLBufferAttribute){const h=r.get(c);(!h||h.version<c.version)&&r.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const d=r.get(c);d===void 0?r.set(c,i(c,u)):d.version<c.version&&(s(d.buffer,c,u),d.version=c.version)}return{get:o,remove:a,update:l}}class Cv extends Jn{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,o=t/2,a=Math.floor(r),l=Math.floor(i),c=a+1,u=l+1,d=e/a,h=t/l,f=[],m=[],g=[],v=[];for(let y=0;y<u;y++){const A=y*h-o;for(let C=0;C<c;C++){const T=C*d-s;m.push(T,-A,0),g.push(0,0,1),v.push(C/a),v.push(1-y/l)}}for(let y=0;y<l;y++)for(let A=0;A<a;A++){const C=A+c*y,T=A+c*(y+1),x=A+1+c*(y+1),R=A+1+c*y;f.push(C,T,R),f.push(T,x,R)}this.setIndex(f),this.setAttribute("position",new Kt(m,3)),this.setAttribute("normal",new Kt(g,3)),this.setAttribute("uv",new Kt(v,2))}static fromJSON(e){return new Cv(e.width,e.height,e.widthSegments,e.heightSegments)}}var xye=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,Iye=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,bye=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,Mye=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Rye=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Nye=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Pye="vec3 transformed = vec3( position );",Oye=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Dye=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,Lye=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,kye=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Bye=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,Fye=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,zye=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Uye=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,jye=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Gye=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Hye=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,Vye=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,$ye=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,Wye=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,qye=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Qye=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Jye=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,Kye=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Yye=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Xye="gl_FragColor = linearToOutputTexel( gl_FragColor );",Zye=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,e_e=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,t_e=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,n_e=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,r_e=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,i_e=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,s_e=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,o_e=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,a_e=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,l_e=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,c_e=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,u_e=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,d_e=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,h_e=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,f_e=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert
#define Material_LightProbeLOD( material )	(0)`,p_e=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,m_e=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,g_e=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,v_e=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,y_e=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,__e=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,S_e=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,A_e=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,E_e=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,C_e=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,w_e=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,T_e=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,x_e=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,I_e=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,b_e=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,M_e=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,R_e=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,N_e=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,P_e=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,O_e=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,D_e=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,L_e=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,k_e=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,B_e=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,F_e=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,z_e=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,U_e=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,j_e=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,G_e=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,H_e=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,V_e=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,$_e=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,W_e=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,q_e=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,Q_e=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,J_e=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,K_e=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,Y_e=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,X_e=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Z_e=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,eSe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,tSe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,nSe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,rSe=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,iSe=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,sSe=`#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,oSe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,aSe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,lSe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,cSe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,uSe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,dSe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,hSe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,fSe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,pSe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,mSe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,gSe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,vSe=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,ySe=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,_Se=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,SSe=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,ASe=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,ESe=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,CSe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const wSe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,TSe=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	gl_FragColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		gl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );
	#endif
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,xSe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,ISe=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,bSe=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,MSe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,RSe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,NSe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,PSe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,OSe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,DSe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,LSe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,kSe=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,BSe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,FSe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,zSe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,USe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,jSe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,GSe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,HSe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,VSe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,$Se=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,WSe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,qSe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,QSe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,JSe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,KSe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,YSe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,XSe=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ZSe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,eAe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,tAe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,tr={alphamap_fragment:xye,alphamap_pars_fragment:Iye,alphatest_fragment:bye,alphatest_pars_fragment:Mye,aomap_fragment:Rye,aomap_pars_fragment:Nye,begin_vertex:Pye,beginnormal_vertex:Oye,bsdfs:Dye,iridescence_fragment:Lye,bumpmap_pars_fragment:kye,clipping_planes_fragment:Bye,clipping_planes_pars_fragment:Fye,clipping_planes_pars_vertex:zye,clipping_planes_vertex:Uye,color_fragment:jye,color_pars_fragment:Gye,color_pars_vertex:Hye,color_vertex:Vye,common:$ye,cube_uv_reflection_fragment:Wye,defaultnormal_vertex:qye,displacementmap_pars_vertex:Qye,displacementmap_vertex:Jye,emissivemap_fragment:Kye,emissivemap_pars_fragment:Yye,encodings_fragment:Xye,encodings_pars_fragment:Zye,envmap_fragment:e_e,envmap_common_pars_fragment:t_e,envmap_pars_fragment:n_e,envmap_pars_vertex:r_e,envmap_physical_pars_fragment:m_e,envmap_vertex:i_e,fog_vertex:s_e,fog_pars_vertex:o_e,fog_fragment:a_e,fog_pars_fragment:l_e,gradientmap_pars_fragment:c_e,lightmap_fragment:u_e,lightmap_pars_fragment:d_e,lights_lambert_fragment:h_e,lights_lambert_pars_fragment:f_e,lights_pars_begin:p_e,lights_toon_fragment:g_e,lights_toon_pars_fragment:v_e,lights_phong_fragment:y_e,lights_phong_pars_fragment:__e,lights_physical_fragment:S_e,lights_physical_pars_fragment:A_e,lights_fragment_begin:E_e,lights_fragment_maps:C_e,lights_fragment_end:w_e,logdepthbuf_fragment:T_e,logdepthbuf_pars_fragment:x_e,logdepthbuf_pars_vertex:I_e,logdepthbuf_vertex:b_e,map_fragment:M_e,map_pars_fragment:R_e,map_particle_fragment:N_e,map_particle_pars_fragment:P_e,metalnessmap_fragment:O_e,metalnessmap_pars_fragment:D_e,morphcolor_vertex:L_e,morphnormal_vertex:k_e,morphtarget_pars_vertex:B_e,morphtarget_vertex:F_e,normal_fragment_begin:z_e,normal_fragment_maps:U_e,normal_pars_fragment:j_e,normal_pars_vertex:G_e,normal_vertex:H_e,normalmap_pars_fragment:V_e,clearcoat_normal_fragment_begin:$_e,clearcoat_normal_fragment_maps:W_e,clearcoat_pars_fragment:q_e,iridescence_pars_fragment:Q_e,output_fragment:J_e,packing:K_e,premultiplied_alpha_fragment:Y_e,project_vertex:X_e,dithering_fragment:Z_e,dithering_pars_fragment:eSe,roughnessmap_fragment:tSe,roughnessmap_pars_fragment:nSe,shadowmap_pars_fragment:rSe,shadowmap_pars_vertex:iSe,shadowmap_vertex:sSe,shadowmask_pars_fragment:oSe,skinbase_vertex:aSe,skinning_pars_vertex:lSe,skinning_vertex:cSe,skinnormal_vertex:uSe,specularmap_fragment:dSe,specularmap_pars_fragment:hSe,tonemapping_fragment:fSe,tonemapping_pars_fragment:pSe,transmission_fragment:mSe,transmission_pars_fragment:gSe,uv_pars_fragment:vSe,uv_pars_vertex:ySe,uv_vertex:_Se,uv2_pars_fragment:SSe,uv2_pars_vertex:ASe,uv2_vertex:ESe,worldpos_vertex:CSe,background_vert:wSe,background_frag:TSe,cube_vert:xSe,cube_frag:ISe,depth_vert:bSe,depth_frag:MSe,distanceRGBA_vert:RSe,distanceRGBA_frag:NSe,equirect_vert:PSe,equirect_frag:OSe,linedashed_vert:DSe,linedashed_frag:LSe,meshbasic_vert:kSe,meshbasic_frag:BSe,meshlambert_vert:FSe,meshlambert_frag:zSe,meshmatcap_vert:USe,meshmatcap_frag:jSe,meshnormal_vert:GSe,meshnormal_frag:HSe,meshphong_vert:VSe,meshphong_frag:$Se,meshphysical_vert:WSe,meshphysical_frag:qSe,meshtoon_vert:QSe,meshtoon_frag:JSe,points_vert:KSe,points_frag:YSe,shadow_vert:XSe,shadow_frag:ZSe,sprite_vert:eAe,sprite_frag:tAe},It={common:{diffuse:{value:new Dt(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new La},uv2Transform:{value:new La},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new tt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Dt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Dt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new La}},sprite:{diffuse:{value:new Dt(16777215)},opacity:{value:1},center:{value:new tt(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new La}}},Pc={basic:{uniforms:To([It.common,It.specularmap,It.envmap,It.aomap,It.lightmap,It.fog]),vertexShader:tr.meshbasic_vert,fragmentShader:tr.meshbasic_frag},lambert:{uniforms:To([It.common,It.specularmap,It.envmap,It.aomap,It.lightmap,It.emissivemap,It.bumpmap,It.normalmap,It.displacementmap,It.fog,It.lights,{emissive:{value:new Dt(0)}}]),vertexShader:tr.meshlambert_vert,fragmentShader:tr.meshlambert_frag},phong:{uniforms:To([It.common,It.specularmap,It.envmap,It.aomap,It.lightmap,It.emissivemap,It.bumpmap,It.normalmap,It.displacementmap,It.fog,It.lights,{emissive:{value:new Dt(0)},specular:{value:new Dt(1118481)},shininess:{value:30}}]),vertexShader:tr.meshphong_vert,fragmentShader:tr.meshphong_frag},standard:{uniforms:To([It.common,It.envmap,It.aomap,It.lightmap,It.emissivemap,It.bumpmap,It.normalmap,It.displacementmap,It.roughnessmap,It.metalnessmap,It.fog,It.lights,{emissive:{value:new Dt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:tr.meshphysical_vert,fragmentShader:tr.meshphysical_frag},toon:{uniforms:To([It.common,It.aomap,It.lightmap,It.emissivemap,It.bumpmap,It.normalmap,It.displacementmap,It.gradientmap,It.fog,It.lights,{emissive:{value:new Dt(0)}}]),vertexShader:tr.meshtoon_vert,fragmentShader:tr.meshtoon_frag},matcap:{uniforms:To([It.common,It.bumpmap,It.normalmap,It.displacementmap,It.fog,{matcap:{value:null}}]),vertexShader:tr.meshmatcap_vert,fragmentShader:tr.meshmatcap_frag},points:{uniforms:To([It.points,It.fog]),vertexShader:tr.points_vert,fragmentShader:tr.points_frag},dashed:{uniforms:To([It.common,It.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:tr.linedashed_vert,fragmentShader:tr.linedashed_frag},depth:{uniforms:To([It.common,It.displacementmap]),vertexShader:tr.depth_vert,fragmentShader:tr.depth_frag},normal:{uniforms:To([It.common,It.bumpmap,It.normalmap,It.displacementmap,{opacity:{value:1}}]),vertexShader:tr.meshnormal_vert,fragmentShader:tr.meshnormal_frag},sprite:{uniforms:To([It.sprite,It.fog]),vertexShader:tr.sprite_vert,fragmentShader:tr.sprite_frag},background:{uniforms:{uvTransform:{value:new La},t2D:{value:null}},vertexShader:tr.background_vert,fragmentShader:tr.background_frag},cube:{uniforms:To([It.envmap,{opacity:{value:1}}]),vertexShader:tr.cube_vert,fragmentShader:tr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:tr.equirect_vert,fragmentShader:tr.equirect_frag},distanceRGBA:{uniforms:To([It.common,It.displacementmap,{referencePosition:{value:new le},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:tr.distanceRGBA_vert,fragmentShader:tr.distanceRGBA_frag},shadow:{uniforms:To([It.lights,It.fog,{color:{value:new Dt(0)},opacity:{value:1}}]),vertexShader:tr.shadow_vert,fragmentShader:tr.shadow_frag}};Pc.physical={uniforms:To([Pc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new tt(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Dt(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new tt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Dt(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Dt(1,1,1)},specularColorMap:{value:null}}]),vertexShader:tr.meshphysical_vert,fragmentShader:tr.meshphysical_frag};function nAe(n,e,t,r,i,s){const o=new Dt(0);let a=i===!0?0:1,l,c,u=null,d=0,h=null;function f(g,v){let y=!1,A=v.isScene===!0?v.background:null;A&&A.isTexture&&(A=e.get(A));const C=n.xr,T=C.getSession&&C.getSession();T&&T.environmentBlendMode==="additive"&&(A=null),A===null?m(o,a):A&&A.isColor&&(m(A,1),y=!0),(n.autoClear||y)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),A&&(A.isCubeTexture||A.mapping===Av)?(c===void 0&&(c=new js(new ip(1,1,1),new Vc({name:"BackgroundCubeMaterial",uniforms:Jg(Pc.cube.uniforms),vertexShader:Pc.cube.vertexShader,fragmentShader:Pc.cube.fragmentShader,side:ll,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(x,R,N){this.matrixWorld.copyPosition(N.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(c)),c.material.uniforms.envMap.value=A,c.material.uniforms.flipEnvMap.value=A.isCubeTexture&&A.isRenderTargetTexture===!1?-1:1,(u!==A||d!==A.version||h!==n.toneMapping)&&(c.material.needsUpdate=!0,u=A,d=A.version,h=n.toneMapping),c.layers.enableAll(),g.unshift(c,c.geometry,c.material,0,0,null)):A&&A.isTexture&&(l===void 0&&(l=new js(new Cv(2,2),new Vc({name:"BackgroundMaterial",uniforms:Jg(Pc.background.uniforms),vertexShader:Pc.background.vertexShader,fragmentShader:Pc.background.fragmentShader,side:Df,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=A,A.matrixAutoUpdate===!0&&A.updateMatrix(),l.material.uniforms.uvTransform.value.copy(A.matrix),(u!==A||d!==A.version||h!==n.toneMapping)&&(l.material.needsUpdate=!0,u=A,d=A.version,h=n.toneMapping),l.layers.enableAll(),g.unshift(l,l.geometry,l.material,0,0,null))}function m(g,v){t.buffers.color.setClear(g.r,g.g,g.b,v,s)}return{getClearColor:function(){return o},setClearColor:function(g,v=1){o.set(g),a=v,m(o,a)},getClearAlpha:function(){return a},setClearAlpha:function(g){a=g,m(o,a)},render:f}}function rAe(n,e,t,r){const i=n.getParameter(34921),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||s!==null,a={},l=v(null);let c=l,u=!1;function d(B,q,K,se,W){let ee=!1;if(o){const Q=g(se,K,q);c!==Q&&(c=Q,f(c.object)),ee=y(B,se,K,W),ee&&A(B,se,K,W)}else{const Q=q.wireframe===!0;(c.geometry!==se.id||c.program!==K.id||c.wireframe!==Q)&&(c.geometry=se.id,c.program=K.id,c.wireframe=Q,ee=!0)}W!==null&&t.update(W,34963),(ee||u)&&(u=!1,M(B,q,K,se),W!==null&&n.bindBuffer(34963,t.get(W).buffer))}function h(){return r.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function f(B){return r.isWebGL2?n.bindVertexArray(B):s.bindVertexArrayOES(B)}function m(B){return r.isWebGL2?n.deleteVertexArray(B):s.deleteVertexArrayOES(B)}function g(B,q,K){const se=K.wireframe===!0;let W=a[B.id];W===void 0&&(W={},a[B.id]=W);let ee=W[q.id];ee===void 0&&(ee={},W[q.id]=ee);let Q=ee[se];return Q===void 0&&(Q=v(h()),ee[se]=Q),Q}function v(B){const q=[],K=[],se=[];for(let W=0;W<i;W++)q[W]=0,K[W]=0,se[W]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:q,enabledAttributes:K,attributeDivisors:se,object:B,attributes:{},index:null}}function y(B,q,K,se){const W=c.attributes,ee=q.attributes;let Q=0;const Y=K.getAttributes();for(const ae in Y)if(Y[ae].location>=0){const we=W[ae];let ge=ee[ae];if(ge===void 0&&(ae==="instanceMatrix"&&B.instanceMatrix&&(ge=B.instanceMatrix),ae==="instanceColor"&&B.instanceColor&&(ge=B.instanceColor)),we===void 0||we.attribute!==ge||ge&&we.data!==ge.data)return!0;Q++}return c.attributesNum!==Q||c.index!==se}function A(B,q,K,se){const W={},ee=q.attributes;let Q=0;const Y=K.getAttributes();for(const ae in Y)if(Y[ae].location>=0){let we=ee[ae];we===void 0&&(ae==="instanceMatrix"&&B.instanceMatrix&&(we=B.instanceMatrix),ae==="instanceColor"&&B.instanceColor&&(we=B.instanceColor));const ge={};ge.attribute=we,we&&we.data&&(ge.data=we.data),W[ae]=ge,Q++}c.attributes=W,c.attributesNum=Q,c.index=se}function C(){const B=c.newAttributes;for(let q=0,K=B.length;q<K;q++)B[q]=0}function T(B){x(B,0)}function x(B,q){const K=c.newAttributes,se=c.enabledAttributes,W=c.attributeDivisors;K[B]=1,se[B]===0&&(n.enableVertexAttribArray(B),se[B]=1),W[B]!==q&&((r.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](B,q),W[B]=q)}function R(){const B=c.newAttributes,q=c.enabledAttributes;for(let K=0,se=q.length;K<se;K++)q[K]!==B[K]&&(n.disableVertexAttribArray(K),q[K]=0)}function N(B,q,K,se,W,ee){r.isWebGL2===!0&&(K===5124||K===5125)?n.vertexAttribIPointer(B,q,K,W,ee):n.vertexAttribPointer(B,q,K,se,W,ee)}function M(B,q,K,se){if(r.isWebGL2===!1&&(B.isInstancedMesh||se.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;C();const W=se.attributes,ee=K.getAttributes(),Q=q.defaultAttributeValues;for(const Y in ee){const ae=ee[Y];if(ae.location>=0){let fe=W[Y];if(fe===void 0&&(Y==="instanceMatrix"&&B.instanceMatrix&&(fe=B.instanceMatrix),Y==="instanceColor"&&B.instanceColor&&(fe=B.instanceColor)),fe!==void 0){const we=fe.normalized,ge=fe.itemSize,Se=t.get(fe);if(Se===void 0)continue;const Ke=Se.buffer,xe=Se.type,Qe=Se.bytesPerElement;if(fe.isInterleavedBufferAttribute){const We=fe.data,Ve=We.stride,te=fe.offset;if(We.isInstancedInterleavedBuffer){for(let ce=0;ce<ae.locationSize;ce++)x(ae.location+ce,We.meshPerAttribute);B.isInstancedMesh!==!0&&se._maxInstanceCount===void 0&&(se._maxInstanceCount=We.meshPerAttribute*We.count)}else for(let ce=0;ce<ae.locationSize;ce++)T(ae.location+ce);n.bindBuffer(34962,Ke);for(let ce=0;ce<ae.locationSize;ce++)N(ae.location+ce,ge/ae.locationSize,xe,we,Ve*Qe,(te+ge/ae.locationSize*ce)*Qe)}else{if(fe.isInstancedBufferAttribute){for(let We=0;We<ae.locationSize;We++)x(ae.location+We,fe.meshPerAttribute);B.isInstancedMesh!==!0&&se._maxInstanceCount===void 0&&(se._maxInstanceCount=fe.meshPerAttribute*fe.count)}else for(let We=0;We<ae.locationSize;We++)T(ae.location+We);n.bindBuffer(34962,Ke);for(let We=0;We<ae.locationSize;We++)N(ae.location+We,ge/ae.locationSize,xe,we,ge*Qe,ge/ae.locationSize*We*Qe)}}else if(Q!==void 0){const we=Q[Y];if(we!==void 0)switch(we.length){case 2:n.vertexAttrib2fv(ae.location,we);break;case 3:n.vertexAttrib3fv(ae.location,we);break;case 4:n.vertexAttrib4fv(ae.location,we);break;default:n.vertexAttrib1fv(ae.location,we)}}}}R()}function O(){V();for(const B in a){const q=a[B];for(const K in q){const se=q[K];for(const W in se)m(se[W].object),delete se[W];delete q[K]}delete a[B]}}function P(B){if(a[B.id]===void 0)return;const q=a[B.id];for(const K in q){const se=q[K];for(const W in se)m(se[W].object),delete se[W];delete q[K]}delete a[B.id]}function z(B){for(const q in a){const K=a[q];if(K[B.id]===void 0)continue;const se=K[B.id];for(const W in se)m(se[W].object),delete se[W];delete K[B.id]}}function V(){$(),u=!0,c!==l&&(c=l,f(c.object))}function $(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:d,reset:V,resetDefaultState:$,dispose:O,releaseStatesOfGeometry:P,releaseStatesOfProgram:z,initAttributes:C,enableAttribute:T,disableUnusedAttributes:R}}function iAe(n,e,t,r){const i=r.isWebGL2;let s;function o(c){s=c}function a(c,u){n.drawArrays(s,c,u),t.update(u,s,1)}function l(c,u,d){if(d===0)return;let h,f;if(i)h=n,f="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",h===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}h[f](s,c,u,d),t.update(u,s,d)}this.setMode=o,this.render=a,this.renderInstances=l}function sAe(n,e,t){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const N=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(N.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(N){if(N==="highp"){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";N="mediump"}return N==="mediump"&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&n instanceof WebGL2ComputeRenderingContext;let a=t.precision!==void 0?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),u=t.logarithmicDepthBuffer===!0,d=n.getParameter(34930),h=n.getParameter(35660),f=n.getParameter(3379),m=n.getParameter(34076),g=n.getParameter(34921),v=n.getParameter(36347),y=n.getParameter(36348),A=n.getParameter(36349),C=h>0,T=o||e.has("OES_texture_float"),x=C&&T,R=o?n.getParameter(36183):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:i,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:d,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:m,maxAttributes:g,maxVertexUniforms:v,maxVaryings:y,maxFragmentUniforms:A,vertexTextures:C,floatFragmentTextures:T,floatVertexTextures:x,maxSamples:R}}function oAe(n){const e=this;let t=null,r=0,i=!1,s=!1;const o=new Id,a=new La,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h,f){const m=d.length!==0||h||r!==0||i;return i=h,t=u(d,f,0),r=d.length,m},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1,c()},this.setState=function(d,h,f){const m=d.clippingPlanes,g=d.clipIntersection,v=d.clipShadows,y=n.get(d);if(!i||m===null||m.length===0||s&&!v)s?u(null):c();else{const A=s?0:r,C=A*4;let T=y.clippingState||null;l.value=T,T=u(m,h,C,f);for(let x=0;x!==C;++x)T[x]=t[x];y.clippingState=T,this.numIntersection=g?this.numPlanes:0,this.numPlanes+=A}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(d,h,f,m){const g=d!==null?d.length:0;let v=null;if(g!==0){if(v=l.value,m!==!0||v===null){const y=f+g*4,A=h.matrixWorldInverse;a.getNormalMatrix(A),(v===null||v.length<y)&&(v=new Float32Array(y));for(let C=0,T=f;C!==g;++C,T+=4)o.copy(d[C]).applyMatrix4(A,a),o.normal.toArray(v,T),v[T+3]=o.constant}l.value=v,l.needsUpdate=!0}return e.numPlanes=g,e.numIntersection=0,v}}function aAe(n){let e=new WeakMap;function t(o,a){return a===Wg?o.mapping=Xd:a===sS&&(o.mapping=Lf),o}function r(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===Wg||a===sS)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new W6(l.height/2);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",i),t(c.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}class Uc extends Kg{constructor(e=-1,t=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const cg=4,_B=[.125,.215,.35,.446,.526,.582],nm=20,v3=new Uc,SB=new Dt;let y3=null;const Xp=(1+Math.sqrt(5))/2,L0=1/Xp,AB=[new le(1,1,1),new le(-1,1,1),new le(1,1,-1),new le(-1,1,-1),new le(0,Xp,L0),new le(0,Xp,-L0),new le(L0,0,Xp),new le(-L0,0,Xp),new le(Xp,L0,0),new le(-Xp,L0,0)];class IN{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){y3=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=wB(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=CB(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(y3),e.scissorTest=!1,fC(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Xd||e.mapping===Lf?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),y3=this._renderer.getRenderTarget();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:li,minFilter:li,generateMipmaps:!1,type:kc,format:Wl,encoding:Bu,depthBuffer:!1},i=EB(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=EB(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=lAe(s)),this._blurMaterial=cAe(s,e,t)}return i}_compileMaterial(e){const t=new js(this._lodPlanes[0],e);this._renderer.compile(t,v3)}_sceneToCubeUV(e,t,r,i){const a=new gi(90,1,t,r),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,h=u.toneMapping;u.getClearColor(SB),u.toneMapping=zc,u.autoClear=!1;const f=new rl({name:"PMREM.Background",side:ll,depthWrite:!1,depthTest:!1}),m=new js(new ip,f);let g=!1;const v=e.background;v?v.isColor&&(f.color.copy(v),e.background=null,g=!0):(f.color.copy(SB),g=!0);for(let y=0;y<6;y++){const A=y%3;A===0?(a.up.set(0,l[y],0),a.lookAt(c[y],0,0)):A===1?(a.up.set(0,0,l[y]),a.lookAt(0,c[y],0)):(a.up.set(0,l[y],0),a.lookAt(0,0,c[y]));const C=this._cubeSize;fC(i,A*C,y>2?C:0,C,C),u.setRenderTarget(i),g&&u.render(m,a),u.render(e,a)}m.geometry.dispose(),m.material.dispose(),u.toneMapping=h,u.autoClear=d,e.background=v}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===Xd||e.mapping===Lf;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=wB()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=CB());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new js(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;fC(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(o,v3)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=AB[(i-1)%AB.length];this._blur(e,i-1,i,s,o)}t.autoClear=r}_blur(e,t,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,d=new js(this._lodPlanes[i],c),h=c.uniforms,f=this._sizeLods[r]-1,m=isFinite(s)?Math.PI/(2*f):2*Math.PI/(2*nm-1),g=s/m,v=isFinite(s)?1+Math.floor(u*g):nm;v>nm&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${v} samples when the maximum is set to ${nm}`);const y=[];let A=0;for(let N=0;N<nm;++N){const M=N/g,O=Math.exp(-M*M/2);y.push(O),N===0?A+=O:N<v&&(A+=2*O)}for(let N=0;N<y.length;N++)y[N]=y[N]/A;h.envMap.value=e.texture,h.samples.value=v,h.weights.value=y,h.latitudinal.value=o==="latitudinal",a&&(h.poleAxis.value=a);const{_lodMax:C}=this;h.dTheta.value=m,h.mipInt.value=C-r;const T=this._sizeLods[i],x=3*T*(i>C-cg?i-C+cg:0),R=4*(this._cubeSize-T);fC(t,x,R,3*T,2*T),l.setRenderTarget(t),l.render(d,v3)}}function lAe(n){const e=[],t=[],r=[];let i=n;const s=n-cg+1+_B.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);t.push(a);let l=1/a;o>n-cg?l=_B[o-n+cg-1]:o===0&&(l=0),r.push(l);const c=1/(a-2),u=-c,d=1+c,h=[u,u,d,u,d,d,u,u,d,d,u,d],f=6,m=6,g=3,v=2,y=1,A=new Float32Array(g*m*f),C=new Float32Array(v*m*f),T=new Float32Array(y*m*f);for(let R=0;R<f;R++){const N=R%3*2/3-1,M=R>2?0:-1,O=[N,M,0,N+2/3,M,0,N+2/3,M+1,0,N,M,0,N+2/3,M+1,0,N,M+1,0];A.set(O,g*m*R),C.set(h,v*m*R);const P=[R,R,R,R,R,R];T.set(P,y*m*R)}const x=new Jn;x.setAttribute("position",new wr(A,g)),x.setAttribute("uv",new wr(C,v)),x.setAttribute("faceIndex",new wr(T,y)),e.push(x),i>cg&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function EB(n,e,t){const r=new nc(n,e,t);return r.texture.mapping=Av,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function fC(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function cAe(n,e,t){const r=new Float32Array(nm),i=new le(0,1,0);return new Vc({name:"SphericalGaussianBlur",defines:{n:nm,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:q6(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:jd,depthTest:!1,depthWrite:!1})}function CB(){return new Vc({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:q6(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:jd,depthTest:!1,depthWrite:!1})}function wB(){return new Vc({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:q6(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:jd,depthTest:!1,depthWrite:!1})}function q6(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function uAe(n){let e=new WeakMap,t=null;function r(a){if(a&&a.isTexture){const l=a.mapping,c=l===Wg||l===sS,u=l===Xd||l===Lf;if(c||u)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let d=e.get(a);return t===null&&(t=new IN(n)),d=c?t.fromEquirectangular(a,d):t.fromCubemap(a,d),e.set(a,d),d.texture}else{if(e.has(a))return e.get(a).texture;{const d=a.image;if(c&&d&&d.height>0||u&&d&&i(d)){t===null&&(t=new IN(n));const h=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,h),a.addEventListener("dispose",s),h.texture}else return null}}}return a}function i(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:o}}function dAe(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const i=t(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function hAe(n,e,t,r){const i={},s=new WeakMap;function o(d){const h=d.target;h.index!==null&&e.remove(h.index);for(const m in h.attributes)e.remove(h.attributes[m]);h.removeEventListener("dispose",o),delete i[h.id];const f=s.get(h);f&&(e.remove(f),s.delete(h)),r.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,t.memory.geometries--}function a(d,h){return i[h.id]===!0||(h.addEventListener("dispose",o),i[h.id]=!0,t.memory.geometries++),h}function l(d){const h=d.attributes;for(const m in h)e.update(h[m],34962);const f=d.morphAttributes;for(const m in f){const g=f[m];for(let v=0,y=g.length;v<y;v++)e.update(g[v],34962)}}function c(d){const h=[],f=d.index,m=d.attributes.position;let g=0;if(f!==null){const A=f.array;g=f.version;for(let C=0,T=A.length;C<T;C+=3){const x=A[C+0],R=A[C+1],N=A[C+2];h.push(x,R,R,N,N,x)}}else{const A=m.array;g=m.version;for(let C=0,T=A.length/3-1;C<T;C+=3){const x=C+0,R=C+1,N=C+2;h.push(x,R,R,N,N,x)}}const v=new(rJ(h)?$6:V6)(h,1);v.version=g;const y=s.get(d);y&&e.remove(y),s.set(d,v)}function u(d){const h=s.get(d);if(h){const f=d.index;f!==null&&h.version<f.version&&c(d)}else c(d);return s.get(d)}return{get:a,update:l,getWireframeAttribute:u}}function fAe(n,e,t,r){const i=r.isWebGL2;let s;function o(h){s=h}let a,l;function c(h){a=h.type,l=h.bytesPerElement}function u(h,f){n.drawElements(s,f,a,h*l),t.update(f,s,1)}function d(h,f,m){if(m===0)return;let g,v;if(i)g=n,v="drawElementsInstanced";else if(g=e.get("ANGLE_instanced_arrays"),v="drawElementsInstancedANGLE",g===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}g[v](s,f,a,h*l,m),t.update(f,s,m)}this.setMode=o,this.setIndex=c,this.render=u,this.renderInstances=d}function pAe(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(t.calls++,o){case 4:t.triangles+=a*(s/3);break;case 1:t.lines+=a*(s/2);break;case 3:t.lines+=a*(s-1);break;case 2:t.lines+=a*s;break;case 0:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function mAe(n,e){return n[0]-e[0]}function gAe(n,e){return Math.abs(e[1])-Math.abs(n[1])}function vAe(n,e,t){const r={},i=new Float32Array(8),s=new WeakMap,o=new Br,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(c,u,d,h){const f=c.morphTargetInfluences;if(e.isWebGL2===!0){const g=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,v=g!==void 0?g.length:0;let y=s.get(u);if(y===void 0||y.count!==v){let K=function(){B.dispose(),s.delete(u),u.removeEventListener("dispose",K)};var m=K;y!==void 0&&y.texture.dispose();const T=u.morphAttributes.position!==void 0,x=u.morphAttributes.normal!==void 0,R=u.morphAttributes.color!==void 0,N=u.morphAttributes.position||[],M=u.morphAttributes.normal||[],O=u.morphAttributes.color||[];let P=0;T===!0&&(P=1),x===!0&&(P=2),R===!0&&(P=3);let z=u.attributes.position.count*P,V=1;z>e.maxTextureSize&&(V=Math.ceil(z/e.maxTextureSize),z=e.maxTextureSize);const $=new Float32Array(z*V*4*v),B=new yA($,z,V,v);B.type=nl,B.needsUpdate=!0;const q=P*4;for(let se=0;se<v;se++){const W=N[se],ee=M[se],Q=O[se],Y=z*V*4*se;for(let ae=0;ae<W.count;ae++){const fe=ae*q;T===!0&&(o.fromBufferAttribute(W,ae),$[Y+fe+0]=o.x,$[Y+fe+1]=o.y,$[Y+fe+2]=o.z,$[Y+fe+3]=0),x===!0&&(o.fromBufferAttribute(ee,ae),$[Y+fe+4]=o.x,$[Y+fe+5]=o.y,$[Y+fe+6]=o.z,$[Y+fe+7]=0),R===!0&&(o.fromBufferAttribute(Q,ae),$[Y+fe+8]=o.x,$[Y+fe+9]=o.y,$[Y+fe+10]=o.z,$[Y+fe+11]=Q.itemSize===4?o.w:1)}}y={count:v,texture:B,size:new tt(z,V)},s.set(u,y),u.addEventListener("dispose",K)}let A=0;for(let T=0;T<f.length;T++)A+=f[T];const C=u.morphTargetsRelative?1:1-A;h.getUniforms().setValue(n,"morphTargetBaseInfluence",C),h.getUniforms().setValue(n,"morphTargetInfluences",f),h.getUniforms().setValue(n,"morphTargetsTexture",y.texture,t),h.getUniforms().setValue(n,"morphTargetsTextureSize",y.size)}else{const g=f===void 0?0:f.length;let v=r[u.id];if(v===void 0||v.length!==g){v=[];for(let x=0;x<g;x++)v[x]=[x,0];r[u.id]=v}for(let x=0;x<g;x++){const R=v[x];R[0]=x,R[1]=f[x]}v.sort(gAe);for(let x=0;x<8;x++)x<g&&v[x][1]?(a[x][0]=v[x][0],a[x][1]=v[x][1]):(a[x][0]=Number.MAX_SAFE_INTEGER,a[x][1]=0);a.sort(mAe);const y=u.morphAttributes.position,A=u.morphAttributes.normal;let C=0;for(let x=0;x<8;x++){const R=a[x],N=R[0],M=R[1];N!==Number.MAX_SAFE_INTEGER&&M?(y&&u.getAttribute("morphTarget"+x)!==y[N]&&u.setAttribute("morphTarget"+x,y[N]),A&&u.getAttribute("morphNormal"+x)!==A[N]&&u.setAttribute("morphNormal"+x,A[N]),i[x]=M,C+=M):(y&&u.hasAttribute("morphTarget"+x)===!0&&u.deleteAttribute("morphTarget"+x),A&&u.hasAttribute("morphNormal"+x)===!0&&u.deleteAttribute("morphNormal"+x),i[x]=0)}const T=u.morphTargetsRelative?1:1-C;h.getUniforms().setValue(n,"morphTargetBaseInfluence",T),h.getUniforms().setValue(n,"morphTargetInfluences",i)}}return{update:l}}function yAe(n,e,t,r){let i=new WeakMap;function s(l){const c=r.render.frame,u=l.geometry,d=e.get(l,u);return i.get(d)!==c&&(e.update(d),i.set(d,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),t.update(l.instanceMatrix,34962),l.instanceColor!==null&&t.update(l.instanceColor,34962)),d}function o(){i=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}const lJ=new Vi,cJ=new yA,uJ=new L2,dJ=new _A,TB=[],xB=[],IB=new Float32Array(16),bB=new Float32Array(9),MB=new Float32Array(4);function wv(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=TB[i];if(s===void 0&&(s=new Float32Array(i),TB[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function aa(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function la(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function B2(n,e){let t=xB[e];t===void 0&&(t=new Int32Array(e),xB[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function _Ae(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function SAe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(aa(t,e))return;n.uniform2fv(this.addr,e),la(t,e)}}function AAe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(aa(t,e))return;n.uniform3fv(this.addr,e),la(t,e)}}function EAe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(aa(t,e))return;n.uniform4fv(this.addr,e),la(t,e)}}function CAe(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(aa(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),la(t,e)}else{if(aa(t,r))return;MB.set(r),n.uniformMatrix2fv(this.addr,!1,MB),la(t,r)}}function wAe(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(aa(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),la(t,e)}else{if(aa(t,r))return;bB.set(r),n.uniformMatrix3fv(this.addr,!1,bB),la(t,r)}}function TAe(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(aa(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),la(t,e)}else{if(aa(t,r))return;IB.set(r),n.uniformMatrix4fv(this.addr,!1,IB),la(t,r)}}function xAe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function IAe(n,e){const t=this.cache;aa(t,e)||(n.uniform2iv(this.addr,e),la(t,e))}function bAe(n,e){const t=this.cache;aa(t,e)||(n.uniform3iv(this.addr,e),la(t,e))}function MAe(n,e){const t=this.cache;aa(t,e)||(n.uniform4iv(this.addr,e),la(t,e))}function RAe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function NAe(n,e){const t=this.cache;aa(t,e)||(n.uniform2uiv(this.addr,e),la(t,e))}function PAe(n,e){const t=this.cache;aa(t,e)||(n.uniform3uiv(this.addr,e),la(t,e))}function OAe(n,e){const t=this.cache;aa(t,e)||(n.uniform4uiv(this.addr,e),la(t,e))}function DAe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2D(e||lJ,i)}function LAe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||uJ,i)}function kAe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||dJ,i)}function BAe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||cJ,i)}function FAe(n){switch(n){case 5126:return _Ae;case 35664:return SAe;case 35665:return AAe;case 35666:return EAe;case 35674:return CAe;case 35675:return wAe;case 35676:return TAe;case 5124:case 35670:return xAe;case 35667:case 35671:return IAe;case 35668:case 35672:return bAe;case 35669:case 35673:return MAe;case 5125:return RAe;case 36294:return NAe;case 36295:return PAe;case 36296:return OAe;case 35678:case 36198:case 36298:case 36306:case 35682:return DAe;case 35679:case 36299:case 36307:return LAe;case 35680:case 36300:case 36308:case 36293:return kAe;case 36289:case 36303:case 36311:case 36292:return BAe}}function zAe(n,e){n.uniform1fv(this.addr,e)}function UAe(n,e){const t=wv(e,this.size,2);n.uniform2fv(this.addr,t)}function jAe(n,e){const t=wv(e,this.size,3);n.uniform3fv(this.addr,t)}function GAe(n,e){const t=wv(e,this.size,4);n.uniform4fv(this.addr,t)}function HAe(n,e){const t=wv(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function VAe(n,e){const t=wv(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function $Ae(n,e){const t=wv(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function WAe(n,e){n.uniform1iv(this.addr,e)}function qAe(n,e){n.uniform2iv(this.addr,e)}function QAe(n,e){n.uniform3iv(this.addr,e)}function JAe(n,e){n.uniform4iv(this.addr,e)}function KAe(n,e){n.uniform1uiv(this.addr,e)}function YAe(n,e){n.uniform2uiv(this.addr,e)}function XAe(n,e){n.uniform3uiv(this.addr,e)}function ZAe(n,e){n.uniform4uiv(this.addr,e)}function eEe(n,e,t){const r=e.length,i=B2(t,r);n.uniform1iv(this.addr,i);for(let s=0;s!==r;++s)t.setTexture2D(e[s]||lJ,i[s])}function tEe(n,e,t){const r=e.length,i=B2(t,r);n.uniform1iv(this.addr,i);for(let s=0;s!==r;++s)t.setTexture3D(e[s]||uJ,i[s])}function nEe(n,e,t){const r=e.length,i=B2(t,r);n.uniform1iv(this.addr,i);for(let s=0;s!==r;++s)t.setTextureCube(e[s]||dJ,i[s])}function rEe(n,e,t){const r=e.length,i=B2(t,r);n.uniform1iv(this.addr,i);for(let s=0;s!==r;++s)t.setTexture2DArray(e[s]||cJ,i[s])}function iEe(n){switch(n){case 5126:return zAe;case 35664:return UAe;case 35665:return jAe;case 35666:return GAe;case 35674:return HAe;case 35675:return VAe;case 35676:return $Ae;case 5124:case 35670:return WAe;case 35667:case 35671:return qAe;case 35668:case 35672:return QAe;case 35669:case 35673:return JAe;case 5125:return KAe;case 36294:return YAe;case 36295:return XAe;case 36296:return ZAe;case 35678:case 36198:case 36298:case 36306:case 35682:return eEe;case 35679:case 36299:case 36307:return tEe;case 35680:case 36300:case 36308:case 36293:return nEe;case 36289:case 36303:case 36311:case 36292:return rEe}}class sEe{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.setValue=FAe(t.type)}}class oEe{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.size=t.size,this.setValue=iEe(t.type)}}class aEe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,t[a.id],r)}}}const _3=/(\w+)(\])?(\[|\.)?/g;function RB(n,e){n.seq.push(e),n.map[e.id]=e}function lEe(n,e,t){const r=n.name,i=r.length;for(_3.lastIndex=0;;){const s=_3.exec(r),o=_3.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===i){RB(t,c===void 0?new sEe(a,n,e):new oEe(a,n,e));break}else{let d=t.map[a];d===void 0&&(d=new aEe(a),RB(t,d)),t=d}}}class mT{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,35718);for(let i=0;i<r;++i){const s=e.getActiveUniform(t,i),o=e.getUniformLocation(t,s.name);lEe(s,o,this)}}setValue(e,t,r,i){const s=this.map[t];s!==void 0&&s.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&r.push(o)}return r}}function NB(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}let cEe=0;function uEe(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return r.join(`
`)}function dEe(n){switch(n){case Bu:return["Linear","( value )"];case ai:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}function PB(n,e,t){const r=n.getShaderParameter(e,35713),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+uEe(n.getShaderSource(e),o)}else return i}function hEe(n,e){const t=dEe(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function fEe(n,e){let t;switch(e){case RQ:t="Linear";break;case NQ:t="Reinhard";break;case PQ:t="OptimizedCineon";break;case B6:t="ACESFilmic";break;case OQ:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function pEe(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(m_).join(`
`)}function mEe(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function gEe(n,e){const t={},r=n.getProgramParameter(e,35721);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),o=s.name;let a=1;s.type===35674&&(a=2),s.type===35675&&(a=3),s.type===35676&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function m_(n){return n!==""}function OB(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function DB(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const vEe=/^[ \t]*#include +<([\w\d./]+)>/gm;function bN(n){return n.replace(vEe,yEe)}function yEe(n,e){const t=tr[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return bN(t)}const _Ee=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function LB(n){return n.replace(_Ee,SEe)}function SEe(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function kB(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function AEe(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===O6?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===D6?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===ag&&(e="SHADOWMAP_TYPE_VSM"),e}function EEe(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Xd:case Lf:e="ENVMAP_TYPE_CUBE";break;case Av:e="ENVMAP_TYPE_CUBE_UV";break}return e}function CEe(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Lf:e="ENVMAP_MODE_REFRACTION";break}return e}function wEe(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case vA:e="ENVMAP_BLENDING_MULTIPLY";break;case bQ:e="ENVMAP_BLENDING_MIX";break;case MQ:e="ENVMAP_BLENDING_ADD";break}return e}function TEe(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function xEe(n,e,t,r){const i=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=AEe(t),c=EEe(t),u=CEe(t),d=wEe(t),h=TEe(t),f=t.isWebGL2?"":pEe(t),m=mEe(s),g=i.createProgram();let v,y,A=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(v=[m].filter(m_).join(`
`),v.length>0&&(v+=`
`),y=[f,m].filter(m_).join(`
`),y.length>0&&(y+=`
`)):(v=[kB(t),"#define SHADER_NAME "+t.shaderName,m,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(m_).join(`
`),y=[f,kB(t),"#define SHADER_NAME "+t.shaderName,m,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==zc?"#define TONE_MAPPING":"",t.toneMapping!==zc?tr.tonemapping_pars_fragment:"",t.toneMapping!==zc?fEe("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",tr.encodings_pars_fragment,hEe("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(m_).join(`
`)),o=bN(o),o=OB(o,t),o=DB(o,t),a=bN(a),a=OB(a,t),a=DB(a,t),o=LB(o),a=LB(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(A=`#version 300 es
`,v=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+v,y=["#define varying in",t.glslVersion===TN?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===TN?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+y);const C=A+v+o,T=A+y+a,x=NB(i,35633,C),R=NB(i,35632,T);if(i.attachShader(g,x),i.attachShader(g,R),t.index0AttributeName!==void 0?i.bindAttribLocation(g,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(g,0,"position"),i.linkProgram(g),n.debug.checkShaderErrors){const O=i.getProgramInfoLog(g).trim(),P=i.getShaderInfoLog(x).trim(),z=i.getShaderInfoLog(R).trim();let V=!0,$=!0;if(i.getProgramParameter(g,35714)===!1){V=!1;const B=PB(i,x,"vertex"),q=PB(i,R,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(g,35715)+`

Program Info Log: `+O+`
`+B+`
`+q)}else O!==""?console.warn("THREE.WebGLProgram: Program Info Log:",O):(P===""||z==="")&&($=!1);$&&(this.diagnostics={runnable:V,programLog:O,vertexShader:{log:P,prefix:v},fragmentShader:{log:z,prefix:y}})}i.deleteShader(x),i.deleteShader(R);let N;this.getUniforms=function(){return N===void 0&&(N=new mT(i,g)),N};let M;return this.getAttributes=function(){return M===void 0&&(M=gEe(i,g)),M},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(g),this.program=void 0},this.name=t.shaderName,this.id=cEe++,this.cacheKey=e,this.usedTimes=1,this.program=g,this.vertexShader=x,this.fragmentShader=R,this}let IEe=0;class bEe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new MEe(e),t.set(e,r)),r}}class MEe{constructor(e){this.id=IEe++,this.code=e,this.usedTimes=0}}function REe(n,e,t,r,i,s,o){const a=new _m,l=new bEe,c=[],u=i.isWebGL2,d=i.logarithmicDepthBuffer,h=i.vertexTextures;let f=i.precision;const m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function g(M,O,P,z,V){const $=z.fog,B=V.geometry,q=M.isMeshStandardMaterial?z.environment:null,K=(M.isMeshStandardMaterial?t:e).get(M.envMap||q),se=K&&K.mapping===Av?K.image.height:null,W=m[M.type];M.precision!==null&&(f=i.getMaxPrecision(M.precision),f!==M.precision&&console.warn("THREE.WebGLProgram.getParameters:",M.precision,"not supported, using",f,"instead."));const ee=B.morphAttributes.position||B.morphAttributes.normal||B.morphAttributes.color,Q=ee!==void 0?ee.length:0;let Y=0;B.morphAttributes.position!==void 0&&(Y=1),B.morphAttributes.normal!==void 0&&(Y=2),B.morphAttributes.color!==void 0&&(Y=3);let ae,fe,we,ge;if(W){const Ve=Pc[W];ae=Ve.vertexShader,fe=Ve.fragmentShader}else ae=M.vertexShader,fe=M.fragmentShader,l.update(M),we=l.getVertexShaderID(M),ge=l.getFragmentShaderID(M);const Se=n.getRenderTarget(),Ke=M.alphaTest>0,xe=M.clearcoat>0,Qe=M.iridescence>0;return{isWebGL2:u,shaderID:W,shaderName:M.type,vertexShader:ae,fragmentShader:fe,defines:M.defines,customVertexShaderID:we,customFragmentShaderID:ge,isRawShaderMaterial:M.isRawShaderMaterial===!0,glslVersion:M.glslVersion,precision:f,instancing:V.isInstancedMesh===!0,instancingColor:V.isInstancedMesh===!0&&V.instanceColor!==null,supportsVertexTextures:h,outputEncoding:Se===null?n.outputEncoding:Se.isXRRenderTarget===!0?Se.texture.encoding:Bu,map:!!M.map,matcap:!!M.matcap,envMap:!!K,envMapMode:K&&K.mapping,envMapCubeUVHeight:se,lightMap:!!M.lightMap,aoMap:!!M.aoMap,emissiveMap:!!M.emissiveMap,bumpMap:!!M.bumpMap,normalMap:!!M.normalMap,objectSpaceNormalMap:M.normalMapType===eJ,tangentSpaceNormalMap:M.normalMapType===tp,decodeVideoTexture:!!M.map&&M.map.isVideoTexture===!0&&M.map.encoding===ai,clearcoat:xe,clearcoatMap:xe&&!!M.clearcoatMap,clearcoatRoughnessMap:xe&&!!M.clearcoatRoughnessMap,clearcoatNormalMap:xe&&!!M.clearcoatNormalMap,iridescence:Qe,iridescenceMap:Qe&&!!M.iridescenceMap,iridescenceThicknessMap:Qe&&!!M.iridescenceThicknessMap,displacementMap:!!M.displacementMap,roughnessMap:!!M.roughnessMap,metalnessMap:!!M.metalnessMap,specularMap:!!M.specularMap,specularIntensityMap:!!M.specularIntensityMap,specularColorMap:!!M.specularColorMap,opaque:M.transparent===!1&&M.blending===mm,alphaMap:!!M.alphaMap,alphaTest:Ke,gradientMap:!!M.gradientMap,sheen:M.sheen>0,sheenColorMap:!!M.sheenColorMap,sheenRoughnessMap:!!M.sheenRoughnessMap,transmission:M.transmission>0,transmissionMap:!!M.transmissionMap,thicknessMap:!!M.thicknessMap,combine:M.combine,vertexTangents:!!M.normalMap&&!!B.attributes.tangent,vertexColors:M.vertexColors,vertexAlphas:M.vertexColors===!0&&!!B.attributes.color&&B.attributes.color.itemSize===4,vertexUvs:!!M.map||!!M.bumpMap||!!M.normalMap||!!M.specularMap||!!M.alphaMap||!!M.emissiveMap||!!M.roughnessMap||!!M.metalnessMap||!!M.clearcoatMap||!!M.clearcoatRoughnessMap||!!M.clearcoatNormalMap||!!M.iridescenceMap||!!M.iridescenceThicknessMap||!!M.displacementMap||!!M.transmissionMap||!!M.thicknessMap||!!M.specularIntensityMap||!!M.specularColorMap||!!M.sheenColorMap||!!M.sheenRoughnessMap,uvsVertexOnly:!(M.map||M.bumpMap||M.normalMap||M.specularMap||M.alphaMap||M.emissiveMap||M.roughnessMap||M.metalnessMap||M.clearcoatNormalMap||M.iridescenceMap||M.iridescenceThicknessMap||M.transmission>0||M.transmissionMap||M.thicknessMap||M.specularIntensityMap||M.specularColorMap||M.sheen>0||M.sheenColorMap||M.sheenRoughnessMap)&&!!M.displacementMap,fog:!!$,useFog:M.fog===!0,fogExp2:$&&$.isFogExp2,flatShading:!!M.flatShading,sizeAttenuation:M.sizeAttenuation,logarithmicDepthBuffer:d,skinning:V.isSkinnedMesh===!0,morphTargets:B.morphAttributes.position!==void 0,morphNormals:B.morphAttributes.normal!==void 0,morphColors:B.morphAttributes.color!==void 0,morphTargetsCount:Q,morphTextureStride:Y,numDirLights:O.directional.length,numPointLights:O.point.length,numSpotLights:O.spot.length,numSpotLightMaps:O.spotLightMap.length,numRectAreaLights:O.rectArea.length,numHemiLights:O.hemi.length,numDirLightShadows:O.directionalShadowMap.length,numPointLightShadows:O.pointShadowMap.length,numSpotLightShadows:O.spotShadowMap.length,numSpotLightShadowsWithMaps:O.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:M.dithering,shadowMapEnabled:n.shadowMap.enabled&&P.length>0,shadowMapType:n.shadowMap.type,toneMapping:M.toneMapped?n.toneMapping:zc,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:M.premultipliedAlpha,doubleSided:M.side===xu,flipSided:M.side===ll,useDepthPacking:!!M.depthPacking,depthPacking:M.depthPacking||0,index0AttributeName:M.index0AttributeName,extensionDerivatives:M.extensions&&M.extensions.derivatives,extensionFragDepth:M.extensions&&M.extensions.fragDepth,extensionDrawBuffers:M.extensions&&M.extensions.drawBuffers,extensionShaderTextureLOD:M.extensions&&M.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||r.has("EXT_shader_texture_lod"),customProgramCacheKey:M.customProgramCacheKey()}}function v(M){const O=[];if(M.shaderID?O.push(M.shaderID):(O.push(M.customVertexShaderID),O.push(M.customFragmentShaderID)),M.defines!==void 0)for(const P in M.defines)O.push(P),O.push(M.defines[P]);return M.isRawShaderMaterial===!1&&(y(O,M),A(O,M),O.push(n.outputEncoding)),O.push(M.customProgramCacheKey),O.join()}function y(M,O){M.push(O.precision),M.push(O.outputEncoding),M.push(O.envMapMode),M.push(O.envMapCubeUVHeight),M.push(O.combine),M.push(O.vertexUvs),M.push(O.fogExp2),M.push(O.sizeAttenuation),M.push(O.morphTargetsCount),M.push(O.morphAttributeCount),M.push(O.numDirLights),M.push(O.numPointLights),M.push(O.numSpotLights),M.push(O.numSpotLightMaps),M.push(O.numHemiLights),M.push(O.numRectAreaLights),M.push(O.numDirLightShadows),M.push(O.numPointLightShadows),M.push(O.numSpotLightShadows),M.push(O.numSpotLightShadowsWithMaps),M.push(O.shadowMapType),M.push(O.toneMapping),M.push(O.numClippingPlanes),M.push(O.numClipIntersection),M.push(O.depthPacking)}function A(M,O){a.disableAll(),O.isWebGL2&&a.enable(0),O.supportsVertexTextures&&a.enable(1),O.instancing&&a.enable(2),O.instancingColor&&a.enable(3),O.map&&a.enable(4),O.matcap&&a.enable(5),O.envMap&&a.enable(6),O.lightMap&&a.enable(7),O.aoMap&&a.enable(8),O.emissiveMap&&a.enable(9),O.bumpMap&&a.enable(10),O.normalMap&&a.enable(11),O.objectSpaceNormalMap&&a.enable(12),O.tangentSpaceNormalMap&&a.enable(13),O.clearcoat&&a.enable(14),O.clearcoatMap&&a.enable(15),O.clearcoatRoughnessMap&&a.enable(16),O.clearcoatNormalMap&&a.enable(17),O.iridescence&&a.enable(18),O.iridescenceMap&&a.enable(19),O.iridescenceThicknessMap&&a.enable(20),O.displacementMap&&a.enable(21),O.specularMap&&a.enable(22),O.roughnessMap&&a.enable(23),O.metalnessMap&&a.enable(24),O.gradientMap&&a.enable(25),O.alphaMap&&a.enable(26),O.alphaTest&&a.enable(27),O.vertexColors&&a.enable(28),O.vertexAlphas&&a.enable(29),O.vertexUvs&&a.enable(30),O.vertexTangents&&a.enable(31),O.uvsVertexOnly&&a.enable(32),M.push(a.mask),a.disableAll(),O.fog&&a.enable(0),O.useFog&&a.enable(1),O.flatShading&&a.enable(2),O.logarithmicDepthBuffer&&a.enable(3),O.skinning&&a.enable(4),O.morphTargets&&a.enable(5),O.morphNormals&&a.enable(6),O.morphColors&&a.enable(7),O.premultipliedAlpha&&a.enable(8),O.shadowMapEnabled&&a.enable(9),O.physicallyCorrectLights&&a.enable(10),O.doubleSided&&a.enable(11),O.flipSided&&a.enable(12),O.useDepthPacking&&a.enable(13),O.dithering&&a.enable(14),O.specularIntensityMap&&a.enable(15),O.specularColorMap&&a.enable(16),O.transmission&&a.enable(17),O.transmissionMap&&a.enable(18),O.thicknessMap&&a.enable(19),O.sheen&&a.enable(20),O.sheenColorMap&&a.enable(21),O.sheenRoughnessMap&&a.enable(22),O.decodeVideoTexture&&a.enable(23),O.opaque&&a.enable(24),M.push(a.mask)}function C(M){const O=m[M.type];let P;if(O){const z=Pc[O];P=sJ.clone(z.uniforms)}else P=M.uniforms;return P}function T(M,O){let P;for(let z=0,V=c.length;z<V;z++){const $=c[z];if($.cacheKey===O){P=$,++P.usedTimes;break}}return P===void 0&&(P=new xEe(n,O,M,s),c.push(P)),P}function x(M){if(--M.usedTimes===0){const O=c.indexOf(M);c[O]=c[c.length-1],c.pop(),M.destroy()}}function R(M){l.remove(M)}function N(){l.dispose()}return{getParameters:g,getProgramCacheKey:v,getUniforms:C,acquireProgram:T,releaseProgram:x,releaseShaderCache:R,programs:c,dispose:N}}function NEe(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function r(s,o,a){n.get(s)[o]=a}function i(){n=new WeakMap}return{get:e,remove:t,update:r,dispose:i}}function PEe(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function BB(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function FB(){const n=[];let e=0;const t=[],r=[],i=[];function s(){e=0,t.length=0,r.length=0,i.length=0}function o(d,h,f,m,g,v){let y=n[e];return y===void 0?(y={id:d.id,object:d,geometry:h,material:f,groupOrder:m,renderOrder:d.renderOrder,z:g,group:v},n[e]=y):(y.id=d.id,y.object=d,y.geometry=h,y.material=f,y.groupOrder=m,y.renderOrder=d.renderOrder,y.z=g,y.group=v),e++,y}function a(d,h,f,m,g,v){const y=o(d,h,f,m,g,v);f.transmission>0?r.push(y):f.transparent===!0?i.push(y):t.push(y)}function l(d,h,f,m,g,v){const y=o(d,h,f,m,g,v);f.transmission>0?r.unshift(y):f.transparent===!0?i.unshift(y):t.unshift(y)}function c(d,h){t.length>1&&t.sort(d||PEe),r.length>1&&r.sort(h||BB),i.length>1&&i.sort(h||BB)}function u(){for(let d=e,h=n.length;d<h;d++){const f=n[d];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:t,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:u,sort:c}}function OEe(){let n=new WeakMap;function e(r,i){const s=n.get(r);let o;return s===void 0?(o=new FB,n.set(r,[o])):i>=s.length?(o=new FB,s.push(o)):o=s[i],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function DEe(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new le,color:new Dt};break;case"SpotLight":t={position:new le,direction:new le,color:new Dt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new le,color:new Dt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new le,skyColor:new Dt,groundColor:new Dt};break;case"RectAreaLight":t={color:new Dt,position:new le,halfWidth:new le,halfHeight:new le};break}return n[e.id]=t,t}}}function LEe(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new tt};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new tt};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new tt,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let kEe=0;function BEe(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function FEe(n,e){const t=new DEe,r=LEe(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let u=0;u<9;u++)i.probe.push(new le);const s=new le,o=new xn,a=new xn;function l(u,d){let h=0,f=0,m=0;for(let z=0;z<9;z++)i.probe[z].set(0,0,0);let g=0,v=0,y=0,A=0,C=0,T=0,x=0,R=0,N=0,M=0;u.sort(BEe);const O=d!==!0?Math.PI:1;for(let z=0,V=u.length;z<V;z++){const $=u[z],B=$.color,q=$.intensity,K=$.distance,se=$.shadow&&$.shadow.map?$.shadow.map.texture:null;if($.isAmbientLight)h+=B.r*q*O,f+=B.g*q*O,m+=B.b*q*O;else if($.isLightProbe)for(let W=0;W<9;W++)i.probe[W].addScaledVector($.sh.coefficients[W],q);else if($.isDirectionalLight){const W=t.get($);if(W.color.copy($.color).multiplyScalar($.intensity*O),$.castShadow){const ee=$.shadow,Q=r.get($);Q.shadowBias=ee.bias,Q.shadowNormalBias=ee.normalBias,Q.shadowRadius=ee.radius,Q.shadowMapSize=ee.mapSize,i.directionalShadow[g]=Q,i.directionalShadowMap[g]=se,i.directionalShadowMatrix[g]=$.shadow.matrix,T++}i.directional[g]=W,g++}else if($.isSpotLight){const W=t.get($);W.position.setFromMatrixPosition($.matrixWorld),W.color.copy(B).multiplyScalar(q*O),W.distance=K,W.coneCos=Math.cos($.angle),W.penumbraCos=Math.cos($.angle*(1-$.penumbra)),W.decay=$.decay,i.spot[y]=W;const ee=$.shadow;if($.map&&(i.spotLightMap[N]=$.map,N++,ee.updateMatrices($),$.castShadow&&M++),i.spotLightMatrix[y]=ee.matrix,$.castShadow){const Q=r.get($);Q.shadowBias=ee.bias,Q.shadowNormalBias=ee.normalBias,Q.shadowRadius=ee.radius,Q.shadowMapSize=ee.mapSize,i.spotShadow[y]=Q,i.spotShadowMap[y]=se,R++}y++}else if($.isRectAreaLight){const W=t.get($);W.color.copy(B).multiplyScalar(q),W.halfWidth.set($.width*.5,0,0),W.halfHeight.set(0,$.height*.5,0),i.rectArea[A]=W,A++}else if($.isPointLight){const W=t.get($);if(W.color.copy($.color).multiplyScalar($.intensity*O),W.distance=$.distance,W.decay=$.decay,$.castShadow){const ee=$.shadow,Q=r.get($);Q.shadowBias=ee.bias,Q.shadowNormalBias=ee.normalBias,Q.shadowRadius=ee.radius,Q.shadowMapSize=ee.mapSize,Q.shadowCameraNear=ee.camera.near,Q.shadowCameraFar=ee.camera.far,i.pointShadow[v]=Q,i.pointShadowMap[v]=se,i.pointShadowMatrix[v]=$.shadow.matrix,x++}i.point[v]=W,v++}else if($.isHemisphereLight){const W=t.get($);W.skyColor.copy($.color).multiplyScalar(q*O),W.groundColor.copy($.groundColor).multiplyScalar(q*O),i.hemi[C]=W,C++}}A>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=It.LTC_FLOAT_1,i.rectAreaLTC2=It.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=It.LTC_HALF_1,i.rectAreaLTC2=It.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=h,i.ambient[1]=f,i.ambient[2]=m;const P=i.hash;(P.directionalLength!==g||P.pointLength!==v||P.spotLength!==y||P.rectAreaLength!==A||P.hemiLength!==C||P.numDirectionalShadows!==T||P.numPointShadows!==x||P.numSpotShadows!==R||P.numSpotMaps!==N)&&(i.directional.length=g,i.spot.length=y,i.rectArea.length=A,i.point.length=v,i.hemi.length=C,i.directionalShadow.length=T,i.directionalShadowMap.length=T,i.pointShadow.length=x,i.pointShadowMap.length=x,i.spotShadow.length=R,i.spotShadowMap.length=R,i.directionalShadowMatrix.length=T,i.pointShadowMatrix.length=x,i.spotLightMatrix.length=R+N-M,i.spotLightMap.length=N,i.numSpotLightShadowsWithMaps=M,P.directionalLength=g,P.pointLength=v,P.spotLength=y,P.rectAreaLength=A,P.hemiLength=C,P.numDirectionalShadows=T,P.numPointShadows=x,P.numSpotShadows=R,P.numSpotMaps=N,i.version=kEe++)}function c(u,d){let h=0,f=0,m=0,g=0,v=0;const y=d.matrixWorldInverse;for(let A=0,C=u.length;A<C;A++){const T=u[A];if(T.isDirectionalLight){const x=i.directional[h];x.direction.setFromMatrixPosition(T.matrixWorld),s.setFromMatrixPosition(T.target.matrixWorld),x.direction.sub(s),x.direction.transformDirection(y),h++}else if(T.isSpotLight){const x=i.spot[m];x.position.setFromMatrixPosition(T.matrixWorld),x.position.applyMatrix4(y),x.direction.setFromMatrixPosition(T.matrixWorld),s.setFromMatrixPosition(T.target.matrixWorld),x.direction.sub(s),x.direction.transformDirection(y),m++}else if(T.isRectAreaLight){const x=i.rectArea[g];x.position.setFromMatrixPosition(T.matrixWorld),x.position.applyMatrix4(y),a.identity(),o.copy(T.matrixWorld),o.premultiply(y),a.extractRotation(o),x.halfWidth.set(T.width*.5,0,0),x.halfHeight.set(0,T.height*.5,0),x.halfWidth.applyMatrix4(a),x.halfHeight.applyMatrix4(a),g++}else if(T.isPointLight){const x=i.point[f];x.position.setFromMatrixPosition(T.matrixWorld),x.position.applyMatrix4(y),f++}else if(T.isHemisphereLight){const x=i.hemi[v];x.direction.setFromMatrixPosition(T.matrixWorld),x.direction.transformDirection(y),v++}}}return{setup:l,setupView:c,state:i}}function zB(n,e){const t=new FEe(n,e),r=[],i=[];function s(){r.length=0,i.length=0}function o(d){r.push(d)}function a(d){i.push(d)}function l(d){t.setup(r,d)}function c(d){t.setupView(r,d)}return{init:s,state:{lightsArray:r,shadowsArray:i,lights:t},setupLights:l,setupLightsView:c,pushLight:o,pushShadow:a}}function zEe(n,e){let t=new WeakMap;function r(s,o=0){const a=t.get(s);let l;return a===void 0?(l=new zB(n,e),t.set(s,[l])):o>=a.length?(l=new zB(n,e),a.push(l)):l=a[o],l}function i(){t=new WeakMap}return{get:r,dispose:i}}class Q6 extends Rs{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=XQ,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class J6 extends Rs{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new le,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const UEe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,jEe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function GEe(n,e,t){let r=new k2;const i=new tt,s=new tt,o=new Br,a=new Q6({depthPacking:ZQ}),l=new J6,c={},u=t.maxTextureSize,d={0:ll,1:Df,2:xu},h=new Vc({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new tt},radius:{value:4}},vertexShader:UEe,fragmentShader:jEe}),f=h.clone();f.defines.HORIZONTAL_PASS=1;const m=new Jn;m.setAttribute("position",new wr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const g=new js(m,h),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=O6,this.render=function(T,x,R){if(v.enabled===!1||v.autoUpdate===!1&&v.needsUpdate===!1||T.length===0)return;const N=n.getRenderTarget(),M=n.getActiveCubeFace(),O=n.getActiveMipmapLevel(),P=n.state;P.setBlending(jd),P.buffers.color.setClear(1,1,1,1),P.buffers.depth.setTest(!0),P.setScissorTest(!1);for(let z=0,V=T.length;z<V;z++){const $=T[z],B=$.shadow;if(B===void 0){console.warn("THREE.WebGLShadowMap:",$,"has no shadow.");continue}if(B.autoUpdate===!1&&B.needsUpdate===!1)continue;i.copy(B.mapSize);const q=B.getFrameExtents();if(i.multiply(q),s.copy(B.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(s.x=Math.floor(u/q.x),i.x=s.x*q.x,B.mapSize.x=s.x),i.y>u&&(s.y=Math.floor(u/q.y),i.y=s.y*q.y,B.mapSize.y=s.y)),B.map===null){const se=this.type!==ag?{minFilter:ts,magFilter:ts}:{};B.map=new nc(i.x,i.y,se),B.map.texture.name=$.name+".shadowMap",B.camera.updateProjectionMatrix()}n.setRenderTarget(B.map),n.clear();const K=B.getViewportCount();for(let se=0;se<K;se++){const W=B.getViewport(se);o.set(s.x*W.x,s.y*W.y,s.x*W.z,s.y*W.w),P.viewport(o),B.updateMatrices($,se),r=B.getFrustum(),C(x,R,B.camera,$,this.type)}B.isPointLightShadow!==!0&&this.type===ag&&y(B,R),B.needsUpdate=!1}v.needsUpdate=!1,n.setRenderTarget(N,M,O)};function y(T,x){const R=e.update(g);h.defines.VSM_SAMPLES!==T.blurSamples&&(h.defines.VSM_SAMPLES=T.blurSamples,f.defines.VSM_SAMPLES=T.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),T.mapPass===null&&(T.mapPass=new nc(i.x,i.y)),h.uniforms.shadow_pass.value=T.map.texture,h.uniforms.resolution.value=T.mapSize,h.uniforms.radius.value=T.radius,n.setRenderTarget(T.mapPass),n.clear(),n.renderBufferDirect(x,null,R,h,g,null),f.uniforms.shadow_pass.value=T.mapPass.texture,f.uniforms.resolution.value=T.mapSize,f.uniforms.radius.value=T.radius,n.setRenderTarget(T.map),n.clear(),n.renderBufferDirect(x,null,R,f,g,null)}function A(T,x,R,N,M,O){let P=null;const z=R.isPointLight===!0?T.customDistanceMaterial:T.customDepthMaterial;if(z!==void 0?P=z:P=R.isPointLight===!0?l:a,n.localClippingEnabled&&x.clipShadows===!0&&Array.isArray(x.clippingPlanes)&&x.clippingPlanes.length!==0||x.displacementMap&&x.displacementScale!==0||x.alphaMap&&x.alphaTest>0){const V=P.uuid,$=x.uuid;let B=c[V];B===void 0&&(B={},c[V]=B);let q=B[$];q===void 0&&(q=P.clone(),B[$]=q),P=q}return P.visible=x.visible,P.wireframe=x.wireframe,O===ag?P.side=x.shadowSide!==null?x.shadowSide:x.side:P.side=x.shadowSide!==null?x.shadowSide:d[x.side],P.alphaMap=x.alphaMap,P.alphaTest=x.alphaTest,P.clipShadows=x.clipShadows,P.clippingPlanes=x.clippingPlanes,P.clipIntersection=x.clipIntersection,P.displacementMap=x.displacementMap,P.displacementScale=x.displacementScale,P.displacementBias=x.displacementBias,P.wireframeLinewidth=x.wireframeLinewidth,P.linewidth=x.linewidth,R.isPointLight===!0&&P.isMeshDistanceMaterial===!0&&(P.referencePosition.setFromMatrixPosition(R.matrixWorld),P.nearDistance=N,P.farDistance=M),P}function C(T,x,R,N,M){if(T.visible===!1)return;if(T.layers.test(x.layers)&&(T.isMesh||T.isLine||T.isPoints)&&(T.castShadow||T.receiveShadow&&M===ag)&&(!T.frustumCulled||r.intersectsObject(T))){T.modelViewMatrix.multiplyMatrices(R.matrixWorldInverse,T.matrixWorld);const z=e.update(T),V=T.material;if(Array.isArray(V)){const $=z.groups;for(let B=0,q=$.length;B<q;B++){const K=$[B],se=V[K.materialIndex];if(se&&se.visible){const W=A(T,se,N,R.near,R.far,M);n.renderBufferDirect(R,null,z,W,T,K)}}}else if(V.visible){const $=A(T,V,N,R.near,R.far,M);n.renderBufferDirect(R,null,z,$,T,null)}}const P=T.children;for(let z=0,V=P.length;z<V;z++)C(P[z],x,R,N,M)}}function HEe(n,e,t){const r=t.isWebGL2;function i(){let ue=!1;const et=new Br;let Be=null;const lt=new Br(0,0,0,0);return{setMask:function(St){Be!==St&&!ue&&(n.colorMask(St,St,St,St),Be=St)},setLocked:function(St){ue=St},setClear:function(St,nn,Dr,mr,wn){wn===!0&&(St*=mr,nn*=mr,Dr*=mr),et.set(St,nn,Dr,mr),lt.equals(et)===!1&&(n.clearColor(St,nn,Dr,mr),lt.copy(et))},reset:function(){ue=!1,Be=null,lt.set(-1,0,0,0)}}}function s(){let ue=!1,et=null,Be=null,lt=null;return{setTest:function(St){St?Ke(2929):xe(2929)},setMask:function(St){et!==St&&!ue&&(n.depthMask(St),et=St)},setFunc:function(St){if(Be!==St){if(St)switch(St){case AQ:n.depthFunc(512);break;case EQ:n.depthFunc(519);break;case CQ:n.depthFunc(513);break;case ax:n.depthFunc(515);break;case wQ:n.depthFunc(514);break;case TQ:n.depthFunc(518);break;case xQ:n.depthFunc(516);break;case IQ:n.depthFunc(517);break;default:n.depthFunc(515)}else n.depthFunc(515);Be=St}},setLocked:function(St){ue=St},setClear:function(St){lt!==St&&(n.clearDepth(St),lt=St)},reset:function(){ue=!1,et=null,Be=null,lt=null}}}function o(){let ue=!1,et=null,Be=null,lt=null,St=null,nn=null,Dr=null,mr=null,wn=null;return{setTest:function(yn){ue||(yn?Ke(2960):xe(2960))},setMask:function(yn){et!==yn&&!ue&&(n.stencilMask(yn),et=yn)},setFunc:function(yn,jr,Mr){(Be!==yn||lt!==jr||St!==Mr)&&(n.stencilFunc(yn,jr,Mr),Be=yn,lt=jr,St=Mr)},setOp:function(yn,jr,Mr){(nn!==yn||Dr!==jr||mr!==Mr)&&(n.stencilOp(yn,jr,Mr),nn=yn,Dr=jr,mr=Mr)},setLocked:function(yn){ue=yn},setClear:function(yn){wn!==yn&&(n.clearStencil(yn),wn=yn)},reset:function(){ue=!1,et=null,Be=null,lt=null,St=null,nn=null,Dr=null,mr=null,wn=null}}}const a=new i,l=new s,c=new o,u=new WeakMap,d=new WeakMap;let h={},f={},m=new WeakMap,g=[],v=null,y=!1,A=null,C=null,T=null,x=null,R=null,N=null,M=null,O=!1,P=null,z=null,V=null,$=null,B=null;const q=n.getParameter(35661);let K=!1,se=0;const W=n.getParameter(7938);W.indexOf("WebGL")!==-1?(se=parseFloat(/^WebGL (\d)/.exec(W)[1]),K=se>=1):W.indexOf("OpenGL ES")!==-1&&(se=parseFloat(/^OpenGL ES (\d)/.exec(W)[1]),K=se>=2);let ee=null,Q={};const Y=n.getParameter(3088),ae=n.getParameter(2978),fe=new Br().fromArray(Y),we=new Br().fromArray(ae);function ge(ue,et,Be){const lt=new Uint8Array(4),St=n.createTexture();n.bindTexture(ue,St),n.texParameteri(ue,10241,9728),n.texParameteri(ue,10240,9728);for(let nn=0;nn<Be;nn++)n.texImage2D(et+nn,0,6408,1,1,0,6408,5121,lt);return St}const Se={};Se[3553]=ge(3553,3553,1),Se[34067]=ge(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),Ke(2929),l.setFunc(ax),Te(!1),De(X4),Ke(2884),de(jd);function Ke(ue){h[ue]!==!0&&(n.enable(ue),h[ue]=!0)}function xe(ue){h[ue]!==!1&&(n.disable(ue),h[ue]=!1)}function Qe(ue,et){return f[ue]!==et?(n.bindFramebuffer(ue,et),f[ue]=et,r&&(ue===36009&&(f[36160]=et),ue===36160&&(f[36009]=et)),!0):!1}function We(ue,et){let Be=g,lt=!1;if(ue)if(Be=m.get(et),Be===void 0&&(Be=[],m.set(et,Be)),ue.isWebGLMultipleRenderTargets){const St=ue.texture;if(Be.length!==St.length||Be[0]!==36064){for(let nn=0,Dr=St.length;nn<Dr;nn++)Be[nn]=36064+nn;Be.length=St.length,lt=!0}}else Be[0]!==36064&&(Be[0]=36064,lt=!0);else Be[0]!==1029&&(Be[0]=1029,lt=!0);lt&&(t.isWebGL2?n.drawBuffers(Be):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Be))}function Ve(ue){return v!==ue?(n.useProgram(ue),v=ue,!0):!1}const te={[tm]:32774,[uQ]:32778,[dQ]:32779};if(r)te[nN]=32775,te[rN]=32776;else{const ue=e.get("EXT_blend_minmax");ue!==null&&(te[nN]=ue.MIN_EXT,te[rN]=ue.MAX_EXT)}const ce={[hQ]:0,[fQ]:1,[pQ]:768,[L6]:770,[SQ]:776,[yQ]:774,[gQ]:772,[mQ]:769,[k6]:771,[_Q]:775,[vQ]:773};function de(ue,et,Be,lt,St,nn,Dr,mr){if(ue===jd){y===!0&&(xe(3042),y=!1);return}if(y===!1&&(Ke(3042),y=!0),ue!==cQ){if(ue!==A||mr!==O){if((C!==tm||R!==tm)&&(n.blendEquation(32774),C=tm,R=tm),mr)switch(ue){case mm:n.blendFuncSeparate(1,771,1,771);break;case Z4:n.blendFunc(1,1);break;case eN:n.blendFuncSeparate(0,769,0,1);break;case tN:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",ue);break}else switch(ue){case mm:n.blendFuncSeparate(770,771,1,771);break;case Z4:n.blendFunc(770,1);break;case eN:n.blendFuncSeparate(0,769,0,1);break;case tN:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",ue);break}T=null,x=null,N=null,M=null,A=ue,O=mr}return}St=St||et,nn=nn||Be,Dr=Dr||lt,(et!==C||St!==R)&&(n.blendEquationSeparate(te[et],te[St]),C=et,R=St),(Be!==T||lt!==x||nn!==N||Dr!==M)&&(n.blendFuncSeparate(ce[Be],ce[lt],ce[nn],ce[Dr]),T=Be,x=lt,N=nn,M=Dr),A=ue,O=null}function Pe(ue,et){ue.side===xu?xe(2884):Ke(2884);let Be=ue.side===ll;et&&(Be=!Be),Te(Be),ue.blending===mm&&ue.transparent===!1?de(jd):de(ue.blending,ue.blendEquation,ue.blendSrc,ue.blendDst,ue.blendEquationAlpha,ue.blendSrcAlpha,ue.blendDstAlpha,ue.premultipliedAlpha),l.setFunc(ue.depthFunc),l.setTest(ue.depthTest),l.setMask(ue.depthWrite),a.setMask(ue.colorWrite);const lt=ue.stencilWrite;c.setTest(lt),lt&&(c.setMask(ue.stencilWriteMask),c.setFunc(ue.stencilFunc,ue.stencilRef,ue.stencilFuncMask),c.setOp(ue.stencilFail,ue.stencilZFail,ue.stencilZPass)),it(ue.polygonOffset,ue.polygonOffsetFactor,ue.polygonOffsetUnits),ue.alphaToCoverage===!0?Ke(32926):xe(32926)}function Te(ue){P!==ue&&(ue?n.frontFace(2304):n.frontFace(2305),P=ue)}function De(ue){ue!==aQ?(Ke(2884),ue!==z&&(ue===X4?n.cullFace(1029):ue===lQ?n.cullFace(1028):n.cullFace(1032))):xe(2884),z=ue}function Ge(ue){ue!==V&&(K&&n.lineWidth(ue),V=ue)}function it(ue,et,Be){ue?(Ke(32823),($!==et||B!==Be)&&(n.polygonOffset(et,Be),$=et,B=Be)):xe(32823)}function ke(ue){ue?Ke(3089):xe(3089)}function ct(ue){ue===void 0&&(ue=33984+q-1),ee!==ue&&(n.activeTexture(ue),ee=ue)}function oe(ue,et){ee===null&&ct();let Be=Q[ee];Be===void 0&&(Be={type:void 0,texture:void 0},Q[ee]=Be),(Be.type!==ue||Be.texture!==et)&&(n.bindTexture(ue,et||Se[ue]),Be.type=ue,Be.texture=et)}function ne(){const ue=Q[ee];ue!==void 0&&ue.type!==void 0&&(n.bindTexture(ue.type,null),ue.type=void 0,ue.texture=void 0)}function Oe(){try{n.compressedTexImage2D.apply(n,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function st(){try{n.texSubImage2D.apply(n,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function Je(){try{n.texSubImage3D.apply(n,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function ft(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function zt(){try{n.texStorage2D.apply(n,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function je(){try{n.texStorage3D.apply(n,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function Bt(){try{n.texImage2D.apply(n,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function Ct(){try{n.texImage3D.apply(n,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function wt(ue){fe.equals(ue)===!1&&(n.scissor(ue.x,ue.y,ue.z,ue.w),fe.copy(ue))}function xt(ue){we.equals(ue)===!1&&(n.viewport(ue.x,ue.y,ue.z,ue.w),we.copy(ue))}function qt(ue,et){let Be=d.get(et);Be===void 0&&(Be=new WeakMap,d.set(et,Be));let lt=Be.get(ue);lt===void 0&&(lt=n.getUniformBlockIndex(et,ue.name),Be.set(ue,lt))}function cn(ue,et){const lt=d.get(et).get(ue);u.get(ue)!==lt&&(n.uniformBlockBinding(et,lt,ue.__bindingPointIndex),u.set(ue,lt))}function Ae(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),r===!0&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),h={},ee=null,Q={},f={},m=new WeakMap,g=[],v=null,y=!1,A=null,C=null,T=null,x=null,R=null,N=null,M=null,O=!1,P=null,z=null,V=null,$=null,B=null,fe.set(0,0,n.canvas.width,n.canvas.height),we.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:Ke,disable:xe,bindFramebuffer:Qe,drawBuffers:We,useProgram:Ve,setBlending:de,setMaterial:Pe,setFlipSided:Te,setCullFace:De,setLineWidth:Ge,setPolygonOffset:it,setScissorTest:ke,activeTexture:ct,bindTexture:oe,unbindTexture:ne,compressedTexImage2D:Oe,texImage2D:Bt,texImage3D:Ct,updateUBOMapping:qt,uniformBlockBinding:cn,texStorage2D:zt,texStorage3D:je,texSubImage2D:st,texSubImage3D:Je,compressedTexSubImage2D:ft,scissor:wt,viewport:xt,reset:Ae}}function VEe(n,e,t,r,i,s,o){const a=i.isWebGL2,l=i.maxTextures,c=i.maxCubemapSize,u=i.maxTextureSize,d=i.maxSamples,h=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f=/OculusBrowser/g.test(navigator.userAgent),m=new WeakMap;let g;const v=new WeakMap;let y=!1;try{y=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function A(oe,ne){return y?new OffscreenCanvas(oe,ne):dS("canvas")}function C(oe,ne,Oe,st){let Je=1;if((oe.width>st||oe.height>st)&&(Je=st/Math.max(oe.width,oe.height)),Je<1||ne===!0)if(typeof HTMLImageElement<"u"&&oe instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&oe instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&oe instanceof ImageBitmap){const ft=ne?ux:Math.floor,zt=ft(Je*oe.width),je=ft(Je*oe.height);g===void 0&&(g=A(zt,je));const Bt=Oe?A(zt,je):g;return Bt.width=zt,Bt.height=je,Bt.getContext("2d").drawImage(oe,0,0,zt,je),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+oe.width+"x"+oe.height+") to ("+zt+"x"+je+")."),Bt}else return"data"in oe&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+oe.width+"x"+oe.height+")."),oe;return oe}function T(oe){return xN(oe.width)&&xN(oe.height)}function x(oe){return a?!1:oe.wrapS!==Ro||oe.wrapT!==Ro||oe.minFilter!==ts&&oe.minFilter!==li}function R(oe,ne){return oe.generateMipmaps&&ne&&oe.minFilter!==ts&&oe.minFilter!==li}function N(oe){n.generateMipmap(oe)}function M(oe,ne,Oe,st,Je=!1){if(a===!1)return ne;if(oe!==null){if(n[oe]!==void 0)return n[oe];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+oe+"'")}let ft=ne;return ne===6403&&(Oe===5126&&(ft=33326),Oe===5131&&(ft=33325),Oe===5121&&(ft=33321)),ne===33319&&(Oe===5126&&(ft=33328),Oe===5131&&(ft=33327),Oe===5121&&(ft=33323)),ne===6408&&(Oe===5126&&(ft=34836),Oe===5131&&(ft=34842),Oe===5121&&(ft=st===ai&&Je===!1?35907:32856),Oe===32819&&(ft=32854),Oe===32820&&(ft=32855)),(ft===33325||ft===33326||ft===33327||ft===33328||ft===34842||ft===34836)&&e.get("EXT_color_buffer_float"),ft}function O(oe,ne,Oe){return R(oe,Oe)===!0||oe.isFramebufferTexture&&oe.minFilter!==ts&&oe.minFilter!==li?Math.log2(Math.max(ne.width,ne.height))+1:oe.mipmaps!==void 0&&oe.mipmaps.length>0?oe.mipmaps.length:oe.isCompressedTexture&&Array.isArray(oe.image)?ne.mipmaps.length:1}function P(oe){return oe===ts||oe===oS||oe===aS?9728:9729}function z(oe){const ne=oe.target;ne.removeEventListener("dispose",z),$(ne),ne.isVideoTexture&&m.delete(ne)}function V(oe){const ne=oe.target;ne.removeEventListener("dispose",V),q(ne)}function $(oe){const ne=r.get(oe);if(ne.__webglInit===void 0)return;const Oe=oe.source,st=v.get(Oe);if(st){const Je=st[ne.__cacheKey];Je.usedTimes--,Je.usedTimes===0&&B(oe),Object.keys(st).length===0&&v.delete(Oe)}r.remove(oe)}function B(oe){const ne=r.get(oe);n.deleteTexture(ne.__webglTexture);const Oe=oe.source,st=v.get(Oe);delete st[ne.__cacheKey],o.memory.textures--}function q(oe){const ne=oe.texture,Oe=r.get(oe),st=r.get(ne);if(st.__webglTexture!==void 0&&(n.deleteTexture(st.__webglTexture),o.memory.textures--),oe.depthTexture&&oe.depthTexture.dispose(),oe.isWebGLCubeRenderTarget)for(let Je=0;Je<6;Je++)n.deleteFramebuffer(Oe.__webglFramebuffer[Je]),Oe.__webglDepthbuffer&&n.deleteRenderbuffer(Oe.__webglDepthbuffer[Je]);else{if(n.deleteFramebuffer(Oe.__webglFramebuffer),Oe.__webglDepthbuffer&&n.deleteRenderbuffer(Oe.__webglDepthbuffer),Oe.__webglMultisampledFramebuffer&&n.deleteFramebuffer(Oe.__webglMultisampledFramebuffer),Oe.__webglColorRenderbuffer)for(let Je=0;Je<Oe.__webglColorRenderbuffer.length;Je++)Oe.__webglColorRenderbuffer[Je]&&n.deleteRenderbuffer(Oe.__webglColorRenderbuffer[Je]);Oe.__webglDepthRenderbuffer&&n.deleteRenderbuffer(Oe.__webglDepthRenderbuffer)}if(oe.isWebGLMultipleRenderTargets)for(let Je=0,ft=ne.length;Je<ft;Je++){const zt=r.get(ne[Je]);zt.__webglTexture&&(n.deleteTexture(zt.__webglTexture),o.memory.textures--),r.remove(ne[Je])}r.remove(ne),r.remove(oe)}let K=0;function se(){K=0}function W(){const oe=K;return oe>=l&&console.warn("THREE.WebGLTextures: Trying to use "+oe+" texture units while this GPU supports only "+l),K+=1,oe}function ee(oe){const ne=[];return ne.push(oe.wrapS),ne.push(oe.wrapT),ne.push(oe.magFilter),ne.push(oe.minFilter),ne.push(oe.anisotropy),ne.push(oe.internalFormat),ne.push(oe.format),ne.push(oe.type),ne.push(oe.generateMipmaps),ne.push(oe.premultiplyAlpha),ne.push(oe.flipY),ne.push(oe.unpackAlignment),ne.push(oe.encoding),ne.join()}function Q(oe,ne){const Oe=r.get(oe);if(oe.isVideoTexture&&ke(oe),oe.isRenderTargetTexture===!1&&oe.version>0&&Oe.__version!==oe.version){const st=oe.image;if(st===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(st.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{xe(Oe,oe,ne);return}}t.activeTexture(33984+ne),t.bindTexture(3553,Oe.__webglTexture)}function Y(oe,ne){const Oe=r.get(oe);if(oe.version>0&&Oe.__version!==oe.version){xe(Oe,oe,ne);return}t.activeTexture(33984+ne),t.bindTexture(35866,Oe.__webglTexture)}function ae(oe,ne){const Oe=r.get(oe);if(oe.version>0&&Oe.__version!==oe.version){xe(Oe,oe,ne);return}t.activeTexture(33984+ne),t.bindTexture(32879,Oe.__webglTexture)}function fe(oe,ne){const Oe=r.get(oe);if(oe.version>0&&Oe.__version!==oe.version){Qe(Oe,oe,ne);return}t.activeTexture(33984+ne),t.bindTexture(34067,Oe.__webglTexture)}const we={[kf]:10497,[Ro]:33071,[qg]:33648},ge={[ts]:9728,[oS]:9984,[aS]:9986,[li]:9729,[O2]:9985,[uh]:9987};function Se(oe,ne,Oe){if(Oe?(n.texParameteri(oe,10242,we[ne.wrapS]),n.texParameteri(oe,10243,we[ne.wrapT]),(oe===32879||oe===35866)&&n.texParameteri(oe,32882,we[ne.wrapR]),n.texParameteri(oe,10240,ge[ne.magFilter]),n.texParameteri(oe,10241,ge[ne.minFilter])):(n.texParameteri(oe,10242,33071),n.texParameteri(oe,10243,33071),(oe===32879||oe===35866)&&n.texParameteri(oe,32882,33071),(ne.wrapS!==Ro||ne.wrapT!==Ro)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(oe,10240,P(ne.magFilter)),n.texParameteri(oe,10241,P(ne.minFilter)),ne.minFilter!==ts&&ne.minFilter!==li&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const st=e.get("EXT_texture_filter_anisotropic");if(ne.type===nl&&e.has("OES_texture_float_linear")===!1||a===!1&&ne.type===kc&&e.has("OES_texture_half_float_linear")===!1)return;(ne.anisotropy>1||r.get(ne).__currentAnisotropy)&&(n.texParameterf(oe,st.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ne.anisotropy,i.getMaxAnisotropy())),r.get(ne).__currentAnisotropy=ne.anisotropy)}}function Ke(oe,ne){let Oe=!1;oe.__webglInit===void 0&&(oe.__webglInit=!0,ne.addEventListener("dispose",z));const st=ne.source;let Je=v.get(st);Je===void 0&&(Je={},v.set(st,Je));const ft=ee(ne);if(ft!==oe.__cacheKey){Je[ft]===void 0&&(Je[ft]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,Oe=!0),Je[ft].usedTimes++;const zt=Je[oe.__cacheKey];zt!==void 0&&(Je[oe.__cacheKey].usedTimes--,zt.usedTimes===0&&B(ne)),oe.__cacheKey=ft,oe.__webglTexture=Je[ft].texture}return Oe}function xe(oe,ne,Oe){let st=3553;ne.isDataArrayTexture&&(st=35866),ne.isData3DTexture&&(st=32879);const Je=Ke(oe,ne),ft=ne.source;if(t.activeTexture(33984+Oe),t.bindTexture(st,oe.__webglTexture),ft.version!==ft.__currentVersion||Je===!0){n.pixelStorei(37440,ne.flipY),n.pixelStorei(37441,ne.premultiplyAlpha),n.pixelStorei(3317,ne.unpackAlignment),n.pixelStorei(37443,0);const zt=x(ne)&&T(ne.image)===!1;let je=C(ne.image,zt,!1,u);je=ct(ne,je);const Bt=T(je)||a,Ct=s.convert(ne.format,ne.encoding);let wt=s.convert(ne.type),xt=M(ne.internalFormat,Ct,wt,ne.encoding,ne.isVideoTexture);Se(st,ne,Bt);let qt;const cn=ne.mipmaps,Ae=a&&ne.isVideoTexture!==!0,ue=ft.__currentVersion===void 0||Je===!0,et=O(ne,je,Bt);if(ne.isDepthTexture)xt=6402,a?ne.type===nl?xt=36012:ne.type===pf?xt=33190:ne.type===gm?xt=35056:xt=33189:ne.type===nl&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),ne.format===bf&&xt===6402&&ne.type!==F6&&ne.type!==pf&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),ne.type=pf,wt=s.convert(ne.type)),ne.format===Rm&&xt===6402&&(xt=34041,ne.type!==gm&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),ne.type=gm,wt=s.convert(ne.type))),ue&&(Ae?t.texStorage2D(3553,1,xt,je.width,je.height):t.texImage2D(3553,0,xt,je.width,je.height,0,Ct,wt,null));else if(ne.isDataTexture)if(cn.length>0&&Bt){Ae&&ue&&t.texStorage2D(3553,et,xt,cn[0].width,cn[0].height);for(let Be=0,lt=cn.length;Be<lt;Be++)qt=cn[Be],Ae?t.texSubImage2D(3553,Be,0,0,qt.width,qt.height,Ct,wt,qt.data):t.texImage2D(3553,Be,xt,qt.width,qt.height,0,Ct,wt,qt.data);ne.generateMipmaps=!1}else Ae?(ue&&t.texStorage2D(3553,et,xt,je.width,je.height),t.texSubImage2D(3553,0,0,0,je.width,je.height,Ct,wt,je.data)):t.texImage2D(3553,0,xt,je.width,je.height,0,Ct,wt,je.data);else if(ne.isCompressedTexture){Ae&&ue&&t.texStorage2D(3553,et,xt,cn[0].width,cn[0].height);for(let Be=0,lt=cn.length;Be<lt;Be++)qt=cn[Be],ne.format!==Wl?Ct!==null?Ae?t.compressedTexSubImage2D(3553,Be,0,0,qt.width,qt.height,Ct,qt.data):t.compressedTexImage2D(3553,Be,xt,qt.width,qt.height,0,qt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ae?t.texSubImage2D(3553,Be,0,0,qt.width,qt.height,Ct,wt,qt.data):t.texImage2D(3553,Be,xt,qt.width,qt.height,0,Ct,wt,qt.data)}else if(ne.isDataArrayTexture)Ae?(ue&&t.texStorage3D(35866,et,xt,je.width,je.height,je.depth),t.texSubImage3D(35866,0,0,0,0,je.width,je.height,je.depth,Ct,wt,je.data)):t.texImage3D(35866,0,xt,je.width,je.height,je.depth,0,Ct,wt,je.data);else if(ne.isData3DTexture)Ae?(ue&&t.texStorage3D(32879,et,xt,je.width,je.height,je.depth),t.texSubImage3D(32879,0,0,0,0,je.width,je.height,je.depth,Ct,wt,je.data)):t.texImage3D(32879,0,xt,je.width,je.height,je.depth,0,Ct,wt,je.data);else if(ne.isFramebufferTexture){if(ue)if(Ae)t.texStorage2D(3553,et,xt,je.width,je.height);else{let Be=je.width,lt=je.height;for(let St=0;St<et;St++)t.texImage2D(3553,St,xt,Be,lt,0,Ct,wt,null),Be>>=1,lt>>=1}}else if(cn.length>0&&Bt){Ae&&ue&&t.texStorage2D(3553,et,xt,cn[0].width,cn[0].height);for(let Be=0,lt=cn.length;Be<lt;Be++)qt=cn[Be],Ae?t.texSubImage2D(3553,Be,0,0,Ct,wt,qt):t.texImage2D(3553,Be,xt,Ct,wt,qt);ne.generateMipmaps=!1}else Ae?(ue&&t.texStorage2D(3553,et,xt,je.width,je.height),t.texSubImage2D(3553,0,0,0,Ct,wt,je)):t.texImage2D(3553,0,xt,Ct,wt,je);R(ne,Bt)&&N(st),ft.__currentVersion=ft.version,ne.onUpdate&&ne.onUpdate(ne)}oe.__version=ne.version}function Qe(oe,ne,Oe){if(ne.image.length!==6)return;const st=Ke(oe,ne),Je=ne.source;if(t.activeTexture(33984+Oe),t.bindTexture(34067,oe.__webglTexture),Je.version!==Je.__currentVersion||st===!0){n.pixelStorei(37440,ne.flipY),n.pixelStorei(37441,ne.premultiplyAlpha),n.pixelStorei(3317,ne.unpackAlignment),n.pixelStorei(37443,0);const ft=ne.isCompressedTexture||ne.image[0].isCompressedTexture,zt=ne.image[0]&&ne.image[0].isDataTexture,je=[];for(let Be=0;Be<6;Be++)!ft&&!zt?je[Be]=C(ne.image[Be],!1,!0,c):je[Be]=zt?ne.image[Be].image:ne.image[Be],je[Be]=ct(ne,je[Be]);const Bt=je[0],Ct=T(Bt)||a,wt=s.convert(ne.format,ne.encoding),xt=s.convert(ne.type),qt=M(ne.internalFormat,wt,xt,ne.encoding),cn=a&&ne.isVideoTexture!==!0,Ae=Je.__currentVersion===void 0||st===!0;let ue=O(ne,Bt,Ct);Se(34067,ne,Ct);let et;if(ft){cn&&Ae&&t.texStorage2D(34067,ue,qt,Bt.width,Bt.height);for(let Be=0;Be<6;Be++){et=je[Be].mipmaps;for(let lt=0;lt<et.length;lt++){const St=et[lt];ne.format!==Wl?wt!==null?cn?t.compressedTexSubImage2D(34069+Be,lt,0,0,St.width,St.height,wt,St.data):t.compressedTexImage2D(34069+Be,lt,qt,St.width,St.height,0,St.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):cn?t.texSubImage2D(34069+Be,lt,0,0,St.width,St.height,wt,xt,St.data):t.texImage2D(34069+Be,lt,qt,St.width,St.height,0,wt,xt,St.data)}}}else{et=ne.mipmaps,cn&&Ae&&(et.length>0&&ue++,t.texStorage2D(34067,ue,qt,je[0].width,je[0].height));for(let Be=0;Be<6;Be++)if(zt){cn?t.texSubImage2D(34069+Be,0,0,0,je[Be].width,je[Be].height,wt,xt,je[Be].data):t.texImage2D(34069+Be,0,qt,je[Be].width,je[Be].height,0,wt,xt,je[Be].data);for(let lt=0;lt<et.length;lt++){const nn=et[lt].image[Be].image;cn?t.texSubImage2D(34069+Be,lt+1,0,0,nn.width,nn.height,wt,xt,nn.data):t.texImage2D(34069+Be,lt+1,qt,nn.width,nn.height,0,wt,xt,nn.data)}}else{cn?t.texSubImage2D(34069+Be,0,0,0,wt,xt,je[Be]):t.texImage2D(34069+Be,0,qt,wt,xt,je[Be]);for(let lt=0;lt<et.length;lt++){const St=et[lt];cn?t.texSubImage2D(34069+Be,lt+1,0,0,wt,xt,St.image[Be]):t.texImage2D(34069+Be,lt+1,qt,wt,xt,St.image[Be])}}}R(ne,Ct)&&N(34067),Je.__currentVersion=Je.version,ne.onUpdate&&ne.onUpdate(ne)}oe.__version=ne.version}function We(oe,ne,Oe,st,Je){const ft=s.convert(Oe.format,Oe.encoding),zt=s.convert(Oe.type),je=M(Oe.internalFormat,ft,zt,Oe.encoding);r.get(ne).__hasExternalTextures||(Je===32879||Je===35866?t.texImage3D(Je,0,je,ne.width,ne.height,ne.depth,0,ft,zt,null):t.texImage2D(Je,0,je,ne.width,ne.height,0,ft,zt,null)),t.bindFramebuffer(36160,oe),it(ne)?h.framebufferTexture2DMultisampleEXT(36160,st,Je,r.get(Oe).__webglTexture,0,Ge(ne)):n.framebufferTexture2D(36160,st,Je,r.get(Oe).__webglTexture,0),t.bindFramebuffer(36160,null)}function Ve(oe,ne,Oe){if(n.bindRenderbuffer(36161,oe),ne.depthBuffer&&!ne.stencilBuffer){let st=33189;if(Oe||it(ne)){const Je=ne.depthTexture;Je&&Je.isDepthTexture&&(Je.type===nl?st=36012:Je.type===pf&&(st=33190));const ft=Ge(ne);it(ne)?h.renderbufferStorageMultisampleEXT(36161,ft,st,ne.width,ne.height):n.renderbufferStorageMultisample(36161,ft,st,ne.width,ne.height)}else n.renderbufferStorage(36161,st,ne.width,ne.height);n.framebufferRenderbuffer(36160,36096,36161,oe)}else if(ne.depthBuffer&&ne.stencilBuffer){const st=Ge(ne);Oe&&it(ne)===!1?n.renderbufferStorageMultisample(36161,st,35056,ne.width,ne.height):it(ne)?h.renderbufferStorageMultisampleEXT(36161,st,35056,ne.width,ne.height):n.renderbufferStorage(36161,34041,ne.width,ne.height),n.framebufferRenderbuffer(36160,33306,36161,oe)}else{const st=ne.isWebGLMultipleRenderTargets===!0?ne.texture:[ne.texture];for(let Je=0;Je<st.length;Je++){const ft=st[Je],zt=s.convert(ft.format,ft.encoding),je=s.convert(ft.type),Bt=M(ft.internalFormat,zt,je,ft.encoding),Ct=Ge(ne);Oe&&it(ne)===!1?n.renderbufferStorageMultisample(36161,Ct,Bt,ne.width,ne.height):it(ne)?h.renderbufferStorageMultisampleEXT(36161,Ct,Bt,ne.width,ne.height):n.renderbufferStorage(36161,Bt,ne.width,ne.height)}}n.bindRenderbuffer(36161,null)}function te(oe,ne){if(ne&&ne.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,oe),!(ne.depthTexture&&ne.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(ne.depthTexture).__webglTexture||ne.depthTexture.image.width!==ne.width||ne.depthTexture.image.height!==ne.height)&&(ne.depthTexture.image.width=ne.width,ne.depthTexture.image.height=ne.height,ne.depthTexture.needsUpdate=!0),Q(ne.depthTexture,0);const st=r.get(ne.depthTexture).__webglTexture,Je=Ge(ne);if(ne.depthTexture.format===bf)it(ne)?h.framebufferTexture2DMultisampleEXT(36160,36096,3553,st,0,Je):n.framebufferTexture2D(36160,36096,3553,st,0);else if(ne.depthTexture.format===Rm)it(ne)?h.framebufferTexture2DMultisampleEXT(36160,33306,3553,st,0,Je):n.framebufferTexture2D(36160,33306,3553,st,0);else throw new Error("Unknown depthTexture format")}function ce(oe){const ne=r.get(oe),Oe=oe.isWebGLCubeRenderTarget===!0;if(oe.depthTexture&&!ne.__autoAllocateDepthBuffer){if(Oe)throw new Error("target.depthTexture not supported in Cube render targets");te(ne.__webglFramebuffer,oe)}else if(Oe){ne.__webglDepthbuffer=[];for(let st=0;st<6;st++)t.bindFramebuffer(36160,ne.__webglFramebuffer[st]),ne.__webglDepthbuffer[st]=n.createRenderbuffer(),Ve(ne.__webglDepthbuffer[st],oe,!1)}else t.bindFramebuffer(36160,ne.__webglFramebuffer),ne.__webglDepthbuffer=n.createRenderbuffer(),Ve(ne.__webglDepthbuffer,oe,!1);t.bindFramebuffer(36160,null)}function de(oe,ne,Oe){const st=r.get(oe);ne!==void 0&&We(st.__webglFramebuffer,oe,oe.texture,36064,3553),Oe!==void 0&&ce(oe)}function Pe(oe){const ne=oe.texture,Oe=r.get(oe),st=r.get(ne);oe.addEventListener("dispose",V),oe.isWebGLMultipleRenderTargets!==!0&&(st.__webglTexture===void 0&&(st.__webglTexture=n.createTexture()),st.__version=ne.version,o.memory.textures++);const Je=oe.isWebGLCubeRenderTarget===!0,ft=oe.isWebGLMultipleRenderTargets===!0,zt=T(oe)||a;if(Je){Oe.__webglFramebuffer=[];for(let je=0;je<6;je++)Oe.__webglFramebuffer[je]=n.createFramebuffer()}else{if(Oe.__webglFramebuffer=n.createFramebuffer(),ft)if(i.drawBuffers){const je=oe.texture;for(let Bt=0,Ct=je.length;Bt<Ct;Bt++){const wt=r.get(je[Bt]);wt.__webglTexture===void 0&&(wt.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&oe.samples>0&&it(oe)===!1){const je=ft?ne:[ne];Oe.__webglMultisampledFramebuffer=n.createFramebuffer(),Oe.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,Oe.__webglMultisampledFramebuffer);for(let Bt=0;Bt<je.length;Bt++){const Ct=je[Bt];Oe.__webglColorRenderbuffer[Bt]=n.createRenderbuffer(),n.bindRenderbuffer(36161,Oe.__webglColorRenderbuffer[Bt]);const wt=s.convert(Ct.format,Ct.encoding),xt=s.convert(Ct.type),qt=M(Ct.internalFormat,wt,xt,Ct.encoding),cn=Ge(oe);n.renderbufferStorageMultisample(36161,cn,qt,oe.width,oe.height),n.framebufferRenderbuffer(36160,36064+Bt,36161,Oe.__webglColorRenderbuffer[Bt])}n.bindRenderbuffer(36161,null),oe.depthBuffer&&(Oe.__webglDepthRenderbuffer=n.createRenderbuffer(),Ve(Oe.__webglDepthRenderbuffer,oe,!0)),t.bindFramebuffer(36160,null)}}if(Je){t.bindTexture(34067,st.__webglTexture),Se(34067,ne,zt);for(let je=0;je<6;je++)We(Oe.__webglFramebuffer[je],oe,ne,36064,34069+je);R(ne,zt)&&N(34067),t.unbindTexture()}else if(ft){const je=oe.texture;for(let Bt=0,Ct=je.length;Bt<Ct;Bt++){const wt=je[Bt],xt=r.get(wt);t.bindTexture(3553,xt.__webglTexture),Se(3553,wt,zt),We(Oe.__webglFramebuffer,oe,wt,36064+Bt,3553),R(wt,zt)&&N(3553)}t.unbindTexture()}else{let je=3553;(oe.isWebGL3DRenderTarget||oe.isWebGLArrayRenderTarget)&&(a?je=oe.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(je,st.__webglTexture),Se(je,ne,zt),We(Oe.__webglFramebuffer,oe,ne,36064,je),R(ne,zt)&&N(je),t.unbindTexture()}oe.depthBuffer&&ce(oe)}function Te(oe){const ne=T(oe)||a,Oe=oe.isWebGLMultipleRenderTargets===!0?oe.texture:[oe.texture];for(let st=0,Je=Oe.length;st<Je;st++){const ft=Oe[st];if(R(ft,ne)){const zt=oe.isWebGLCubeRenderTarget?34067:3553,je=r.get(ft).__webglTexture;t.bindTexture(zt,je),N(zt),t.unbindTexture()}}}function De(oe){if(a&&oe.samples>0&&it(oe)===!1){const ne=oe.isWebGLMultipleRenderTargets?oe.texture:[oe.texture],Oe=oe.width,st=oe.height;let Je=16384;const ft=[],zt=oe.stencilBuffer?33306:36096,je=r.get(oe),Bt=oe.isWebGLMultipleRenderTargets===!0;if(Bt)for(let Ct=0;Ct<ne.length;Ct++)t.bindFramebuffer(36160,je.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+Ct,36161,null),t.bindFramebuffer(36160,je.__webglFramebuffer),n.framebufferTexture2D(36009,36064+Ct,3553,null,0);t.bindFramebuffer(36008,je.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,je.__webglFramebuffer);for(let Ct=0;Ct<ne.length;Ct++){ft.push(36064+Ct),oe.depthBuffer&&ft.push(zt);const wt=je.__ignoreDepthValues!==void 0?je.__ignoreDepthValues:!1;if(wt===!1&&(oe.depthBuffer&&(Je|=256),oe.stencilBuffer&&(Je|=1024)),Bt&&n.framebufferRenderbuffer(36008,36064,36161,je.__webglColorRenderbuffer[Ct]),wt===!0&&(n.invalidateFramebuffer(36008,[zt]),n.invalidateFramebuffer(36009,[zt])),Bt){const xt=r.get(ne[Ct]).__webglTexture;n.framebufferTexture2D(36009,36064,3553,xt,0)}n.blitFramebuffer(0,0,Oe,st,0,0,Oe,st,Je,9728),f&&n.invalidateFramebuffer(36008,ft)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),Bt)for(let Ct=0;Ct<ne.length;Ct++){t.bindFramebuffer(36160,je.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+Ct,36161,je.__webglColorRenderbuffer[Ct]);const wt=r.get(ne[Ct]).__webglTexture;t.bindFramebuffer(36160,je.__webglFramebuffer),n.framebufferTexture2D(36009,36064+Ct,3553,wt,0)}t.bindFramebuffer(36009,je.__webglMultisampledFramebuffer)}}function Ge(oe){return Math.min(d,oe.samples)}function it(oe){const ne=r.get(oe);return a&&oe.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&ne.__useRenderToTexture!==!1}function ke(oe){const ne=o.render.frame;m.get(oe)!==ne&&(m.set(oe,ne),oe.update())}function ct(oe,ne){const Oe=oe.encoding,st=oe.format,Je=oe.type;return oe.isCompressedTexture===!0||oe.isVideoTexture===!0||oe.format===cx||Oe!==Bu&&(Oe===ai?a===!1?e.has("EXT_sRGB")===!0&&st===Wl?(oe.format=cx,oe.minFilter=li,oe.generateMipmaps=!1):ne=H6.sRGBToLinear(ne):(st!==Wl||Je!==Bf)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",Oe)),ne}this.allocateTextureUnit=W,this.resetTextureUnits=se,this.setTexture2D=Q,this.setTexture2DArray=Y,this.setTexture3D=ae,this.setTextureCube=fe,this.rebindTextures=de,this.setupRenderTarget=Pe,this.updateRenderTargetMipmap=Te,this.updateMultisampleRenderTarget=De,this.setupDepthRenderbuffer=ce,this.setupFrameBufferTexture=We,this.useMultisampledRTT=it}function hJ(n,e,t){const r=t.isWebGL2;function i(s,o=null){let a;if(s===Bf)return 5121;if(s===BQ)return 32819;if(s===FQ)return 32820;if(s===DQ)return 5120;if(s===LQ)return 5122;if(s===F6)return 5123;if(s===kQ)return 5124;if(s===pf)return 5125;if(s===nl)return 5126;if(s===kc)return r?5131:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===zQ)return 6406;if(s===Wl)return 6408;if(s===jQ)return 6409;if(s===GQ)return 6410;if(s===bf)return 6402;if(s===Rm)return 34041;if(s===HQ)return 6403;if(s===UQ)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(s===cx)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===VQ)return 36244;if(s===$Q)return 33319;if(s===WQ)return 33320;if(s===qQ)return 36249;if(s===lT||s===cT||s===uT||s===dT)if(o===ai)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===lT)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===cT)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===uT)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===dT)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===lT)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===cT)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===uT)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===dT)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===iN||s===sN||s===oN||s===aN)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===iN)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===sN)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===oN)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===aN)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===QQ)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===lN||s===cN)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===lN)return o===ai?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===cN)return o===ai?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===uN||s===dN||s===hN||s===fN||s===pN||s===mN||s===gN||s===vN||s===yN||s===_N||s===SN||s===AN||s===EN||s===CN)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===uN)return o===ai?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===dN)return o===ai?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===hN)return o===ai?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===fN)return o===ai?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===pN)return o===ai?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===mN)return o===ai?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===gN)return o===ai?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===vN)return o===ai?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===yN)return o===ai?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===_N)return o===ai?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===SN)return o===ai?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===AN)return o===ai?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===EN)return o===ai?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===CN)return o===ai?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===wN)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===wN)return o===ai?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return s===gm?r?34042:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:i}}class fJ extends gi{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}let Bd=class extends pr{constructor(){super(),this.isGroup=!0,this.type="Group"}};const $Ee={type:"move"};class S3{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Bd,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Bd,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new le,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new le),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Bd,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new le,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new le),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const g of e.hand.values()){const v=t.getJointPose(g,r);if(c.joints[g.jointName]===void 0){const A=new Bd;A.matrixAutoUpdate=!1,A.visible=!1,c.joints[g.jointName]=A,c.add(A)}const y=c.joints[g.jointName];v!==null&&(y.matrix.fromArray(v.transform.matrix),y.matrix.decompose(y.position,y.rotation,y.scale),y.jointRadius=v.radius),y.visible=v!==null}const u=c.joints["index-finger-tip"],d=c.joints["thumb-tip"],h=u.position.distanceTo(d.position),f=.02,m=.005;c.inputState.pinching&&h>f+m?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&h<=f-m&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent($Ee)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}}class pJ extends Vi{constructor(e,t,r,i,s,o,a,l,c,u){if(u=u!==void 0?u:bf,u!==bf&&u!==Rm)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&u===bf&&(r=pf),r===void 0&&u===Rm&&(r=gm),super(null,i,s,o,a,l,u,r,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:ts,this.minFilter=l!==void 0?l:ts,this.flipY=!1,this.generateMipmaps=!1}}class WEe extends dh{constructor(e,t){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=null,c=null,u=null,d=null,h=null,f=null;const m=t.getContextAttributes();let g=null,v=null;const y=[],A=[],C=new gi;C.layers.enable(1),C.viewport=new Br;const T=new gi;T.layers.enable(2),T.viewport=new Br;const x=[C,T],R=new fJ;R.layers.enable(1),R.layers.enable(2);let N=null,M=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ee){let Q=y[ee];return Q===void 0&&(Q=new S3,y[ee]=Q),Q.getTargetRaySpace()},this.getControllerGrip=function(ee){let Q=y[ee];return Q===void 0&&(Q=new S3,y[ee]=Q),Q.getGripSpace()},this.getHand=function(ee){let Q=y[ee];return Q===void 0&&(Q=new S3,y[ee]=Q),Q.getHandSpace()};function O(ee){const Q=A.indexOf(ee.inputSource);if(Q===-1)return;const Y=y[Q];Y!==void 0&&Y.dispatchEvent({type:ee.type,data:ee.inputSource})}function P(){i.removeEventListener("select",O),i.removeEventListener("selectstart",O),i.removeEventListener("selectend",O),i.removeEventListener("squeeze",O),i.removeEventListener("squeezestart",O),i.removeEventListener("squeezeend",O),i.removeEventListener("end",P),i.removeEventListener("inputsourceschange",z);for(let ee=0;ee<y.length;ee++){const Q=A[ee];Q!==null&&(A[ee]=null,y[ee].disconnect(Q))}N=null,M=null,e.setRenderTarget(g),h=null,d=null,u=null,i=null,v=null,W.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ee){s=ee,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ee){a=ee,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(ee){l=ee},this.getBaseLayer=function(){return d!==null?d:h},this.getBinding=function(){return u},this.getFrame=function(){return f},this.getSession=function(){return i},this.setSession=async function(ee){if(i=ee,i!==null){if(g=e.getRenderTarget(),i.addEventListener("select",O),i.addEventListener("selectstart",O),i.addEventListener("selectend",O),i.addEventListener("squeeze",O),i.addEventListener("squeezestart",O),i.addEventListener("squeezeend",O),i.addEventListener("end",P),i.addEventListener("inputsourceschange",z),m.xrCompatible!==!0&&await t.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const Q={antialias:i.renderState.layers===void 0?m.antialias:!0,alpha:m.alpha,depth:m.depth,stencil:m.stencil,framebufferScaleFactor:s};h=new XRWebGLLayer(i,t,Q),i.updateRenderState({baseLayer:h}),v=new nc(h.framebufferWidth,h.framebufferHeight,{format:Wl,type:Bf,encoding:e.outputEncoding,stencilBuffer:m.stencil})}else{let Q=null,Y=null,ae=null;m.depth&&(ae=m.stencil?35056:33190,Q=m.stencil?Rm:bf,Y=m.stencil?gm:pf);const fe={colorFormat:32856,depthFormat:ae,scaleFactor:s};u=new XRWebGLBinding(i,t),d=u.createProjectionLayer(fe),i.updateRenderState({layers:[d]}),v=new nc(d.textureWidth,d.textureHeight,{format:Wl,type:Bf,depthTexture:new pJ(d.textureWidth,d.textureHeight,Y,void 0,void 0,void 0,void 0,void 0,void 0,Q),stencilBuffer:m.stencil,encoding:e.outputEncoding,samples:m.antialias?4:0});const we=e.properties.get(v);we.__ignoreDepthValues=d.ignoreDepthValues}v.isXRRenderTarget=!0,this.setFoveation(1),l=null,o=await i.requestReferenceSpace(a),W.setContext(i),W.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}};function z(ee){for(let Q=0;Q<ee.removed.length;Q++){const Y=ee.removed[Q],ae=A.indexOf(Y);ae>=0&&(A[ae]=null,y[ae].dispatchEvent({type:"disconnected",data:Y}))}for(let Q=0;Q<ee.added.length;Q++){const Y=ee.added[Q];let ae=A.indexOf(Y);if(ae===-1){for(let we=0;we<y.length;we++)if(we>=A.length){A.push(Y),ae=we;break}else if(A[we]===null){A[we]=Y,ae=we;break}if(ae===-1)break}const fe=y[ae];fe&&fe.dispatchEvent({type:"connected",data:Y})}}const V=new le,$=new le;function B(ee,Q,Y){V.setFromMatrixPosition(Q.matrixWorld),$.setFromMatrixPosition(Y.matrixWorld);const ae=V.distanceTo($),fe=Q.projectionMatrix.elements,we=Y.projectionMatrix.elements,ge=fe[14]/(fe[10]-1),Se=fe[14]/(fe[10]+1),Ke=(fe[9]+1)/fe[5],xe=(fe[9]-1)/fe[5],Qe=(fe[8]-1)/fe[0],We=(we[8]+1)/we[0],Ve=ge*Qe,te=ge*We,ce=ae/(-Qe+We),de=ce*-Qe;Q.matrixWorld.decompose(ee.position,ee.quaternion,ee.scale),ee.translateX(de),ee.translateZ(ce),ee.matrixWorld.compose(ee.position,ee.quaternion,ee.scale),ee.matrixWorldInverse.copy(ee.matrixWorld).invert();const Pe=ge+ce,Te=Se+ce,De=Ve-de,Ge=te+(ae-de),it=Ke*Se/Te*Pe,ke=xe*Se/Te*Pe;ee.projectionMatrix.makePerspective(De,Ge,it,ke,Pe,Te)}function q(ee,Q){Q===null?ee.matrixWorld.copy(ee.matrix):ee.matrixWorld.multiplyMatrices(Q.matrixWorld,ee.matrix),ee.matrixWorldInverse.copy(ee.matrixWorld).invert()}this.updateCamera=function(ee){if(i===null)return;R.near=T.near=C.near=ee.near,R.far=T.far=C.far=ee.far,(N!==R.near||M!==R.far)&&(i.updateRenderState({depthNear:R.near,depthFar:R.far}),N=R.near,M=R.far);const Q=ee.parent,Y=R.cameras;q(R,Q);for(let fe=0;fe<Y.length;fe++)q(Y[fe],Q);R.matrixWorld.decompose(R.position,R.quaternion,R.scale),ee.matrix.copy(R.matrix),ee.matrix.decompose(ee.position,ee.quaternion,ee.scale);const ae=ee.children;for(let fe=0,we=ae.length;fe<we;fe++)ae[fe].updateMatrixWorld(!0);Y.length===2?B(R,C,T):R.projectionMatrix.copy(C.projectionMatrix)},this.getCamera=function(){return R},this.getFoveation=function(){if(d!==null)return d.fixedFoveation;if(h!==null)return h.fixedFoveation},this.setFoveation=function(ee){d!==null&&(d.fixedFoveation=ee),h!==null&&h.fixedFoveation!==void 0&&(h.fixedFoveation=ee)};let K=null;function se(ee,Q){if(c=Q.getViewerPose(l||o),f=Q,c!==null){const Y=c.views;h!==null&&(e.setRenderTargetFramebuffer(v,h.framebuffer),e.setRenderTarget(v));let ae=!1;Y.length!==R.cameras.length&&(R.cameras.length=0,ae=!0);for(let fe=0;fe<Y.length;fe++){const we=Y[fe];let ge=null;if(h!==null)ge=h.getViewport(we);else{const Ke=u.getViewSubImage(d,we);ge=Ke.viewport,fe===0&&(e.setRenderTargetTextures(v,Ke.colorTexture,d.ignoreDepthValues?void 0:Ke.depthStencilTexture),e.setRenderTarget(v))}let Se=x[fe];Se===void 0&&(Se=new gi,Se.layers.enable(fe),Se.viewport=new Br,x[fe]=Se),Se.matrix.fromArray(we.transform.matrix),Se.projectionMatrix.fromArray(we.projectionMatrix),Se.viewport.set(ge.x,ge.y,ge.width,ge.height),fe===0&&R.matrix.copy(Se.matrix),ae===!0&&R.cameras.push(Se)}}for(let Y=0;Y<y.length;Y++){const ae=A[Y],fe=y[Y];ae!==null&&fe!==void 0&&fe.update(ae,Q,l||o)}K&&K(ee,Q),f=null}const W=new aJ;W.setAnimationLoop(se),this.setAnimationLoop=function(ee){K=ee},this.dispose=function(){}}}function qEe(n,e){function t(g,v){g.fogColor.value.copy(v.color),v.isFog?(g.fogNear.value=v.near,g.fogFar.value=v.far):v.isFogExp2&&(g.fogDensity.value=v.density)}function r(g,v,y,A,C){v.isMeshBasicMaterial||v.isMeshLambertMaterial?i(g,v):v.isMeshToonMaterial?(i(g,v),u(g,v)):v.isMeshPhongMaterial?(i(g,v),c(g,v)):v.isMeshStandardMaterial?(i(g,v),d(g,v),v.isMeshPhysicalMaterial&&h(g,v,C)):v.isMeshMatcapMaterial?(i(g,v),f(g,v)):v.isMeshDepthMaterial?i(g,v):v.isMeshDistanceMaterial?(i(g,v),m(g,v)):v.isMeshNormalMaterial?i(g,v):v.isLineBasicMaterial?(s(g,v),v.isLineDashedMaterial&&o(g,v)):v.isPointsMaterial?a(g,v,y,A):v.isSpriteMaterial?l(g,v):v.isShadowMaterial?(g.color.value.copy(v.color),g.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}function i(g,v){g.opacity.value=v.opacity,v.color&&g.diffuse.value.copy(v.color),v.emissive&&g.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(g.map.value=v.map),v.alphaMap&&(g.alphaMap.value=v.alphaMap),v.bumpMap&&(g.bumpMap.value=v.bumpMap,g.bumpScale.value=v.bumpScale,v.side===ll&&(g.bumpScale.value*=-1)),v.displacementMap&&(g.displacementMap.value=v.displacementMap,g.displacementScale.value=v.displacementScale,g.displacementBias.value=v.displacementBias),v.emissiveMap&&(g.emissiveMap.value=v.emissiveMap),v.normalMap&&(g.normalMap.value=v.normalMap,g.normalScale.value.copy(v.normalScale),v.side===ll&&g.normalScale.value.negate()),v.specularMap&&(g.specularMap.value=v.specularMap),v.alphaTest>0&&(g.alphaTest.value=v.alphaTest);const y=e.get(v).envMap;if(y&&(g.envMap.value=y,g.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,g.reflectivity.value=v.reflectivity,g.ior.value=v.ior,g.refractionRatio.value=v.refractionRatio),v.lightMap){g.lightMap.value=v.lightMap;const T=n.physicallyCorrectLights!==!0?Math.PI:1;g.lightMapIntensity.value=v.lightMapIntensity*T}v.aoMap&&(g.aoMap.value=v.aoMap,g.aoMapIntensity.value=v.aoMapIntensity);let A;v.map?A=v.map:v.specularMap?A=v.specularMap:v.displacementMap?A=v.displacementMap:v.normalMap?A=v.normalMap:v.bumpMap?A=v.bumpMap:v.roughnessMap?A=v.roughnessMap:v.metalnessMap?A=v.metalnessMap:v.alphaMap?A=v.alphaMap:v.emissiveMap?A=v.emissiveMap:v.clearcoatMap?A=v.clearcoatMap:v.clearcoatNormalMap?A=v.clearcoatNormalMap:v.clearcoatRoughnessMap?A=v.clearcoatRoughnessMap:v.iridescenceMap?A=v.iridescenceMap:v.iridescenceThicknessMap?A=v.iridescenceThicknessMap:v.specularIntensityMap?A=v.specularIntensityMap:v.specularColorMap?A=v.specularColorMap:v.transmissionMap?A=v.transmissionMap:v.thicknessMap?A=v.thicknessMap:v.sheenColorMap?A=v.sheenColorMap:v.sheenRoughnessMap&&(A=v.sheenRoughnessMap),A!==void 0&&(A.isWebGLRenderTarget&&(A=A.texture),A.matrixAutoUpdate===!0&&A.updateMatrix(),g.uvTransform.value.copy(A.matrix));let C;v.aoMap?C=v.aoMap:v.lightMap&&(C=v.lightMap),C!==void 0&&(C.isWebGLRenderTarget&&(C=C.texture),C.matrixAutoUpdate===!0&&C.updateMatrix(),g.uv2Transform.value.copy(C.matrix))}function s(g,v){g.diffuse.value.copy(v.color),g.opacity.value=v.opacity}function o(g,v){g.dashSize.value=v.dashSize,g.totalSize.value=v.dashSize+v.gapSize,g.scale.value=v.scale}function a(g,v,y,A){g.diffuse.value.copy(v.color),g.opacity.value=v.opacity,g.size.value=v.size*y,g.scale.value=A*.5,v.map&&(g.map.value=v.map),v.alphaMap&&(g.alphaMap.value=v.alphaMap),v.alphaTest>0&&(g.alphaTest.value=v.alphaTest);let C;v.map?C=v.map:v.alphaMap&&(C=v.alphaMap),C!==void 0&&(C.matrixAutoUpdate===!0&&C.updateMatrix(),g.uvTransform.value.copy(C.matrix))}function l(g,v){g.diffuse.value.copy(v.color),g.opacity.value=v.opacity,g.rotation.value=v.rotation,v.map&&(g.map.value=v.map),v.alphaMap&&(g.alphaMap.value=v.alphaMap),v.alphaTest>0&&(g.alphaTest.value=v.alphaTest);let y;v.map?y=v.map:v.alphaMap&&(y=v.alphaMap),y!==void 0&&(y.matrixAutoUpdate===!0&&y.updateMatrix(),g.uvTransform.value.copy(y.matrix))}function c(g,v){g.specular.value.copy(v.specular),g.shininess.value=Math.max(v.shininess,1e-4)}function u(g,v){v.gradientMap&&(g.gradientMap.value=v.gradientMap)}function d(g,v){g.roughness.value=v.roughness,g.metalness.value=v.metalness,v.roughnessMap&&(g.roughnessMap.value=v.roughnessMap),v.metalnessMap&&(g.metalnessMap.value=v.metalnessMap),e.get(v).envMap&&(g.envMapIntensity.value=v.envMapIntensity)}function h(g,v,y){g.ior.value=v.ior,v.sheen>0&&(g.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),g.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&&(g.sheenColorMap.value=v.sheenColorMap),v.sheenRoughnessMap&&(g.sheenRoughnessMap.value=v.sheenRoughnessMap)),v.clearcoat>0&&(g.clearcoat.value=v.clearcoat,g.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&&(g.clearcoatMap.value=v.clearcoatMap),v.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap),v.clearcoatNormalMap&&(g.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),g.clearcoatNormalMap.value=v.clearcoatNormalMap,v.side===ll&&g.clearcoatNormalScale.value.negate())),v.iridescence>0&&(g.iridescence.value=v.iridescence,g.iridescenceIOR.value=v.iridescenceIOR,g.iridescenceThicknessMinimum.value=v.iridescenceThicknessRange[0],g.iridescenceThicknessMaximum.value=v.iridescenceThicknessRange[1],v.iridescenceMap&&(g.iridescenceMap.value=v.iridescenceMap),v.iridescenceThicknessMap&&(g.iridescenceThicknessMap.value=v.iridescenceThicknessMap)),v.transmission>0&&(g.transmission.value=v.transmission,g.transmissionSamplerMap.value=y.texture,g.transmissionSamplerSize.value.set(y.width,y.height),v.transmissionMap&&(g.transmissionMap.value=v.transmissionMap),g.thickness.value=v.thickness,v.thicknessMap&&(g.thicknessMap.value=v.thicknessMap),g.attenuationDistance.value=v.attenuationDistance,g.attenuationColor.value.copy(v.attenuationColor)),g.specularIntensity.value=v.specularIntensity,g.specularColor.value.copy(v.specularColor),v.specularIntensityMap&&(g.specularIntensityMap.value=v.specularIntensityMap),v.specularColorMap&&(g.specularColorMap.value=v.specularColorMap)}function f(g,v){v.matcap&&(g.matcap.value=v.matcap)}function m(g,v){g.referencePosition.value.copy(v.referencePosition),g.nearDistance.value=v.nearDistance,g.farDistance.value=v.farDistance}return{refreshFogUniforms:t,refreshMaterialUniforms:r}}function QEe(n,e,t,r){let i={},s={},o=[];const a=t.isWebGL2?n.getParameter(35375):0;function l(A,C){const T=C.program;r.uniformBlockBinding(A,T)}function c(A,C){let T=i[A.id];T===void 0&&(m(A),T=u(A),i[A.id]=T,A.addEventListener("dispose",v));const x=C.program;r.updateUBOMapping(A,x);const R=e.render.frame;s[A.id]!==R&&(h(A),s[A.id]=R)}function u(A){const C=d();A.__bindingPointIndex=C;const T=n.createBuffer(),x=A.__size,R=A.usage;return n.bindBuffer(35345,T),n.bufferData(35345,x,R),n.bindBuffer(35345,null),n.bindBufferBase(35345,C,T),T}function d(){for(let A=0;A<a;A++)if(o.indexOf(A)===-1)return o.push(A),A;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(A){const C=i[A.id],T=A.uniforms,x=A.__cache;n.bindBuffer(35345,C);for(let R=0,N=T.length;R<N;R++){const M=T[R];if(f(M,R,x)===!0){const O=M.value,P=M.__offset;typeof O=="number"?(M.__data[0]=O,n.bufferSubData(35345,P,M.__data)):(M.value.isMatrix3?(M.__data[0]=M.value.elements[0],M.__data[1]=M.value.elements[1],M.__data[2]=M.value.elements[2],M.__data[3]=M.value.elements[0],M.__data[4]=M.value.elements[3],M.__data[5]=M.value.elements[4],M.__data[6]=M.value.elements[5],M.__data[7]=M.value.elements[0],M.__data[8]=M.value.elements[6],M.__data[9]=M.value.elements[7],M.__data[10]=M.value.elements[8],M.__data[11]=M.value.elements[0]):O.toArray(M.__data),n.bufferSubData(35345,P,M.__data))}}n.bindBuffer(35345,null)}function f(A,C,T){const x=A.value;if(T[C]===void 0)return typeof x=="number"?T[C]=x:T[C]=x.clone(),!0;if(typeof x=="number"){if(T[C]!==x)return T[C]=x,!0}else{const R=T[C];if(R.equals(x)===!1)return R.copy(x),!0}return!1}function m(A){const C=A.uniforms;let T=0;const x=16;let R=0;for(let N=0,M=C.length;N<M;N++){const O=C[N],P=g(O);if(O.__data=new Float32Array(P.storage/Float32Array.BYTES_PER_ELEMENT),O.__offset=T,N>0){R=T%x;const z=x-R;R!==0&&z-P.boundary<0&&(T+=x-R,O.__offset=T)}T+=P.storage}return R=T%x,R>0&&(T+=x-R),A.__size=T,A.__cache={},this}function g(A){const C=A.value,T={boundary:0,storage:0};return typeof C=="number"?(T.boundary=4,T.storage=4):C.isVector2?(T.boundary=8,T.storage=8):C.isVector3||C.isColor?(T.boundary=16,T.storage=12):C.isVector4?(T.boundary=16,T.storage=16):C.isMatrix3?(T.boundary=48,T.storage=48):C.isMatrix4?(T.boundary=64,T.storage=64):C.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",C),T}function v(A){const C=A.target;C.removeEventListener("dispose",v);const T=o.indexOf(C.__bindingPointIndex);o.splice(T,1),n.deleteBuffer(i[C.id]),delete i[C.id],delete s[C.id]}function y(){for(const A in i)n.deleteBuffer(i[A]);o=[],i={},s={}}return{bind:l,update:c,dispose:y}}function JEe(){const n=dS("canvas");return n.style.display="block",n}function K6(n={}){this.isWebGLRenderer=!0;const e=n.canvas!==void 0?n.canvas:JEe(),t=n.context!==void 0?n.context:null,r=n.depth!==void 0?n.depth:!0,i=n.stencil!==void 0?n.stencil:!0,s=n.antialias!==void 0?n.antialias:!1,o=n.premultipliedAlpha!==void 0?n.premultipliedAlpha:!0,a=n.preserveDrawingBuffer!==void 0?n.preserveDrawingBuffer:!1,l=n.powerPreference!==void 0?n.powerPreference:"default",c=n.failIfMajorPerformanceCaveat!==void 0?n.failIfMajorPerformanceCaveat:!1;let u;t!==null?u=t.getContextAttributes().alpha:u=n.alpha!==void 0?n.alpha:!1;let d=null,h=null;const f=[],m=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Bu,this.physicallyCorrectLights=!1,this.toneMapping=zc,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const g=this;let v=!1,y=0,A=0,C=null,T=-1,x=null;const R=new Br,N=new Br;let M=null,O=e.width,P=e.height,z=1,V=null,$=null;const B=new Br(0,0,O,P),q=new Br(0,0,O,P);let K=!1;const se=new k2;let W=!1,ee=!1,Q=null;const Y=new xn,ae=new tt,fe=new le,we={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ge(){return C===null?z:1}let Se=t;function Ke(re,Re){for(let qe=0;qe<re.length;qe++){const Le=re[qe],$e=e.getContext(Le,Re);if($e!==null)return $e}return null}try{const re={alpha:!0,depth:r,stencil:i,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${gA}`),e.addEventListener("webglcontextlost",qt,!1),e.addEventListener("webglcontextrestored",cn,!1),e.addEventListener("webglcontextcreationerror",Ae,!1),Se===null){const Re=["webgl2","webgl","experimental-webgl"];if(g.isWebGL1Renderer===!0&&Re.shift(),Se=Ke(Re,re),Se===null)throw Ke(Re)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}Se.getShaderPrecisionFormat===void 0&&(Se.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(re){throw console.error("THREE.WebGLRenderer: "+re.message),re}let xe,Qe,We,Ve,te,ce,de,Pe,Te,De,Ge,it,ke,ct,oe,ne,Oe,st,Je,ft,zt,je,Bt,Ct;function wt(){xe=new dAe(Se),Qe=new sAe(Se,xe,n),xe.init(Qe),je=new hJ(Se,xe,Qe),We=new HEe(Se,xe,Qe),Ve=new pAe,te=new NEe,ce=new VEe(Se,xe,We,te,Qe,je,Ve),de=new aAe(g),Pe=new uAe(g),Te=new Tye(Se,Qe),Bt=new rAe(Se,xe,Te,Qe),De=new hAe(Se,Te,Ve,Bt),Ge=new yAe(Se,De,Te,Ve),Je=new vAe(Se,Qe,ce),ne=new oAe(te),it=new REe(g,de,Pe,xe,Qe,Bt,ne),ke=new qEe(g,te),ct=new OEe,oe=new zEe(xe,Qe),st=new nAe(g,de,We,Ge,u,o),Oe=new GEe(g,Ge,Qe),Ct=new QEe(Se,Ve,Qe,We),ft=new iAe(Se,xe,Ve,Qe),zt=new fAe(Se,xe,Ve,Qe),Ve.programs=it.programs,g.capabilities=Qe,g.extensions=xe,g.properties=te,g.renderLists=ct,g.shadowMap=Oe,g.state=We,g.info=Ve}wt();const xt=new WEe(g,Se);this.xr=xt,this.getContext=function(){return Se},this.getContextAttributes=function(){return Se.getContextAttributes()},this.forceContextLoss=function(){const re=xe.get("WEBGL_lose_context");re&&re.loseContext()},this.forceContextRestore=function(){const re=xe.get("WEBGL_lose_context");re&&re.restoreContext()},this.getPixelRatio=function(){return z},this.setPixelRatio=function(re){re!==void 0&&(z=re,this.setSize(O,P,!1))},this.getSize=function(re){return re.set(O,P)},this.setSize=function(re,Re,qe){if(xt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}O=re,P=Re,e.width=Math.floor(re*z),e.height=Math.floor(Re*z),qe!==!1&&(e.style.width=re+"px",e.style.height=Re+"px"),this.setViewport(0,0,re,Re)},this.getDrawingBufferSize=function(re){return re.set(O*z,P*z).floor()},this.setDrawingBufferSize=function(re,Re,qe){O=re,P=Re,z=qe,e.width=Math.floor(re*qe),e.height=Math.floor(Re*qe),this.setViewport(0,0,re,Re)},this.getCurrentViewport=function(re){return re.copy(R)},this.getViewport=function(re){return re.copy(B)},this.setViewport=function(re,Re,qe,Le){re.isVector4?B.set(re.x,re.y,re.z,re.w):B.set(re,Re,qe,Le),We.viewport(R.copy(B).multiplyScalar(z).floor())},this.getScissor=function(re){return re.copy(q)},this.setScissor=function(re,Re,qe,Le){re.isVector4?q.set(re.x,re.y,re.z,re.w):q.set(re,Re,qe,Le),We.scissor(N.copy(q).multiplyScalar(z).floor())},this.getScissorTest=function(){return K},this.setScissorTest=function(re){We.setScissorTest(K=re)},this.setOpaqueSort=function(re){V=re},this.setTransparentSort=function(re){$=re},this.getClearColor=function(re){return re.copy(st.getClearColor())},this.setClearColor=function(){st.setClearColor.apply(st,arguments)},this.getClearAlpha=function(){return st.getClearAlpha()},this.setClearAlpha=function(){st.setClearAlpha.apply(st,arguments)},this.clear=function(re=!0,Re=!0,qe=!0){let Le=0;re&&(Le|=16384),Re&&(Le|=256),qe&&(Le|=1024),Se.clear(Le)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",qt,!1),e.removeEventListener("webglcontextrestored",cn,!1),e.removeEventListener("webglcontextcreationerror",Ae,!1),ct.dispose(),oe.dispose(),te.dispose(),de.dispose(),Pe.dispose(),Ge.dispose(),Bt.dispose(),Ct.dispose(),it.dispose(),xt.dispose(),xt.removeEventListener("sessionstart",nn),xt.removeEventListener("sessionend",Dr),Q&&(Q.dispose(),Q=null),mr.stop()};function qt(re){re.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),v=!0}function cn(){console.log("THREE.WebGLRenderer: Context Restored."),v=!1;const re=Ve.autoReset,Re=Oe.enabled,qe=Oe.autoUpdate,Le=Oe.needsUpdate,$e=Oe.type;wt(),Ve.autoReset=re,Oe.enabled=Re,Oe.autoUpdate=qe,Oe.needsUpdate=Le,Oe.type=$e}function Ae(re){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",re.statusMessage)}function ue(re){const Re=re.target;Re.removeEventListener("dispose",ue),et(Re)}function et(re){Be(re),te.remove(re)}function Be(re){const Re=te.get(re).programs;Re!==void 0&&(Re.forEach(function(qe){it.releaseProgram(qe)}),re.isShaderMaterial&&it.releaseShaderCache(re))}this.renderBufferDirect=function(re,Re,qe,Le,$e,Qt){Re===null&&(Re=we);const Jt=$e.isMesh&&$e.matrixWorld.determinant()<0,ln=_l(re,Re,qe,Le,$e);We.setMaterial(Le,Jt);let Xt=qe.index;const Sn=qe.attributes.position;if(Xt===null){if(Sn===void 0||Sn.count===0)return}else if(Xt.count===0)return;let Ie=1;Le.wireframe===!0&&(Xt=De.getWireframeAttribute(qe),Ie=2),Bt.setup($e,Le,ln,qe,Xt);let ye,rt=ft;Xt!==null&&(ye=Te.get(Xt),rt=zt,rt.setIndex(ye));const at=Xt!==null?Xt.count:Sn.count,$n=qe.drawRange.start*Ie,qn=qe.drawRange.count*Ie,rn=Qt!==null?Qt.start*Ie:0,Rt=Qt!==null?Qt.count*Ie:1/0,rr=Math.max($n,rn),mn=Math.min(at,$n+qn,rn+Rt)-1,Tn=Math.max(0,mn-rr+1);if(Tn!==0){if($e.isMesh)Le.wireframe===!0?(We.setLineWidth(Le.wireframeLinewidth*ge()),rt.setMode(1)):rt.setMode(4);else if($e.isLine){let Gr=Le.linewidth;Gr===void 0&&(Gr=1),We.setLineWidth(Gr*ge()),$e.isLineSegments?rt.setMode(1):$e.isLineLoop?rt.setMode(2):rt.setMode(3)}else $e.isPoints?rt.setMode(0):$e.isSprite&&rt.setMode(4);if($e.isInstancedMesh)rt.renderInstances(rr,Tn,$e.count);else if(qe.isInstancedBufferGeometry){const Gr=Math.min(qe.instanceCount,qe._maxInstanceCount);rt.renderInstances(rr,Tn,Gr)}else rt.render(rr,Tn)}},this.compile=function(re,Re){function qe(Le,$e,Qt){Le.transparent===!0&&Le.side===xu?(Le.side=ll,Le.needsUpdate=!0,nr(Le,$e,Qt),Le.side=Df,Le.needsUpdate=!0,nr(Le,$e,Qt),Le.side=xu):nr(Le,$e,Qt)}h=oe.get(re),h.init(),m.push(h),re.traverseVisible(function(Le){Le.isLight&&Le.layers.test(Re.layers)&&(h.pushLight(Le),Le.castShadow&&h.pushShadow(Le))}),h.setupLights(g.physicallyCorrectLights),re.traverse(function(Le){const $e=Le.material;if($e)if(Array.isArray($e))for(let Qt=0;Qt<$e.length;Qt++){const Jt=$e[Qt];qe(Jt,re,Le)}else qe($e,re,Le)}),m.pop(),h=null};let lt=null;function St(re){lt&&lt(re)}function nn(){mr.stop()}function Dr(){mr.start()}const mr=new aJ;mr.setAnimationLoop(St),typeof self<"u"&&mr.setContext(self),this.setAnimationLoop=function(re){lt=re,xt.setAnimationLoop(re),re===null?mr.stop():mr.start()},xt.addEventListener("sessionstart",nn),xt.addEventListener("sessionend",Dr),this.render=function(re,Re){if(Re!==void 0&&Re.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(v===!0)return;re.matrixWorldAutoUpdate===!0&&re.updateMatrixWorld(),Re.parent===null&&Re.matrixWorldAutoUpdate===!0&&Re.updateMatrixWorld(),xt.enabled===!0&&xt.isPresenting===!0&&(xt.cameraAutoUpdate===!0&&xt.updateCamera(Re),Re=xt.getCamera()),re.isScene===!0&&re.onBeforeRender(g,re,Re,C),h=oe.get(re,m.length),h.init(),m.push(h),Y.multiplyMatrices(Re.projectionMatrix,Re.matrixWorldInverse),se.setFromProjectionMatrix(Y),ee=this.localClippingEnabled,W=ne.init(this.clippingPlanes,ee,Re),d=ct.get(re,f.length),d.init(),f.push(d),wn(re,Re,0,g.sortObjects),d.finish(),g.sortObjects===!0&&d.sort(V,$),W===!0&&ne.beginShadows();const qe=h.state.shadowsArray;if(Oe.render(qe,re,Re),W===!0&&ne.endShadows(),this.info.autoReset===!0&&this.info.reset(),st.render(d,re),h.setupLights(g.physicallyCorrectLights),Re.isArrayCamera){const Le=Re.cameras;for(let $e=0,Qt=Le.length;$e<Qt;$e++){const Jt=Le[$e];yn(d,re,Jt,Jt.viewport)}}else yn(d,re,Re);C!==null&&(ce.updateMultisampleRenderTarget(C),ce.updateRenderTargetMipmap(C)),re.isScene===!0&&re.onAfterRender(g,re,Re),Bt.resetDefaultState(),T=-1,x=null,m.pop(),m.length>0?h=m[m.length-1]:h=null,f.pop(),f.length>0?d=f[f.length-1]:d=null};function wn(re,Re,qe,Le){if(re.visible===!1)return;if(re.layers.test(Re.layers)){if(re.isGroup)qe=re.renderOrder;else if(re.isLOD)re.autoUpdate===!0&&re.update(Re);else if(re.isLight)h.pushLight(re),re.castShadow&&h.pushShadow(re);else if(re.isSprite){if(!re.frustumCulled||se.intersectsSprite(re)){Le&&fe.setFromMatrixPosition(re.matrixWorld).applyMatrix4(Y);const Jt=Ge.update(re),ln=re.material;ln.visible&&d.push(re,Jt,ln,qe,fe.z,null)}}else if((re.isMesh||re.isLine||re.isPoints)&&(re.isSkinnedMesh&&re.skeleton.frame!==Ve.render.frame&&(re.skeleton.update(),re.skeleton.frame=Ve.render.frame),!re.frustumCulled||se.intersectsObject(re))){Le&&fe.setFromMatrixPosition(re.matrixWorld).applyMatrix4(Y);const Jt=Ge.update(re),ln=re.material;if(Array.isArray(ln)){const Xt=Jt.groups;for(let Sn=0,Ie=Xt.length;Sn<Ie;Sn++){const ye=Xt[Sn],rt=ln[ye.materialIndex];rt&&rt.visible&&d.push(re,Jt,rt,qe,fe.z,ye)}}else ln.visible&&d.push(re,Jt,ln,qe,fe.z,null)}}const Qt=re.children;for(let Jt=0,ln=Qt.length;Jt<ln;Jt++)wn(Qt[Jt],Re,qe,Le)}function yn(re,Re,qe,Le){const $e=re.opaque,Qt=re.transmissive,Jt=re.transparent;h.setupLightsView(qe),Qt.length>0&&jr($e,Re,qe),Le&&We.viewport(R.copy(Le)),$e.length>0&&Mr($e,Re,qe),Qt.length>0&&Mr(Qt,Re,qe),Jt.length>0&&Mr(Jt,Re,qe),We.buffers.depth.setTest(!0),We.buffers.depth.setMask(!0),We.buffers.color.setMask(!0),We.setPolygonOffset(!1)}function jr(re,Re,qe){const Le=Qe.isWebGL2;Q===null&&(Q=new nc(1,1,{generateMipmaps:!0,type:xe.has("EXT_color_buffer_half_float")?kc:Bf,minFilter:uh,samples:Le&&s===!0?4:0})),g.getDrawingBufferSize(ae),Le?Q.setSize(ae.x,ae.y):Q.setSize(ux(ae.x),ux(ae.y));const $e=g.getRenderTarget();g.setRenderTarget(Q),g.clear();const Qt=g.toneMapping;g.toneMapping=zc,Mr(re,Re,qe),g.toneMapping=Qt,ce.updateMultisampleRenderTarget(Q),ce.updateRenderTargetMipmap(Q),g.setRenderTarget($e)}function Mr(re,Re,qe){const Le=Re.isScene===!0?Re.overrideMaterial:null;for(let $e=0,Qt=re.length;$e<Qt;$e++){const Jt=re[$e],ln=Jt.object,Xt=Jt.geometry,Sn=Le===null?Jt.material:Le,Ie=Jt.group;ln.layers.test(qe.layers)&&Wi(ln,Re,qe,Xt,Sn,Ie)}}function Wi(re,Re,qe,Le,$e,Qt){re.onBeforeRender(g,Re,qe,Le,$e,Qt),re.modelViewMatrix.multiplyMatrices(qe.matrixWorldInverse,re.matrixWorld),re.normalMatrix.getNormalMatrix(re.modelViewMatrix),$e.onBeforeRender(g,Re,qe,Le,re,Qt),$e.transparent===!0&&$e.side===xu?($e.side=ll,$e.needsUpdate=!0,g.renderBufferDirect(qe,Re,Le,$e,re,Qt),$e.side=Df,$e.needsUpdate=!0,g.renderBufferDirect(qe,Re,Le,$e,re,Qt),$e.side=xu):g.renderBufferDirect(qe,Re,Le,$e,re,Qt),re.onAfterRender(g,Re,qe,Le,$e,Qt)}function nr(re,Re,qe){Re.isScene!==!0&&(Re=we);const Le=te.get(re),$e=h.state.lights,Qt=h.state.shadowsArray,Jt=$e.state.version,ln=it.getParameters(re,$e.state,Qt,Re,qe),Xt=it.getProgramCacheKey(ln);let Sn=Le.programs;Le.environment=re.isMeshStandardMaterial?Re.environment:null,Le.fog=Re.fog,Le.envMap=(re.isMeshStandardMaterial?Pe:de).get(re.envMap||Le.environment),Sn===void 0&&(re.addEventListener("dispose",ue),Sn=new Map,Le.programs=Sn);let Ie=Sn.get(Xt);if(Ie!==void 0){if(Le.currentProgram===Ie&&Le.lightsStateVersion===Jt)return ma(re,ln),Ie}else ln.uniforms=it.getUniforms(re),re.onBuild(qe,ln,g),re.onBeforeCompile(ln,g),Ie=it.acquireProgram(ln,Xt),Sn.set(Xt,Ie),Le.uniforms=ln.uniforms;const ye=Le.uniforms;(!re.isShaderMaterial&&!re.isRawShaderMaterial||re.clipping===!0)&&(ye.clippingPlanes=ne.uniform),ma(re,ln),Le.needsLights=Yn(re),Le.lightsStateVersion=Jt,Le.needsLights&&(ye.ambientLightColor.value=$e.state.ambient,ye.lightProbe.value=$e.state.probe,ye.directionalLights.value=$e.state.directional,ye.directionalLightShadows.value=$e.state.directionalShadow,ye.spotLights.value=$e.state.spot,ye.spotLightShadows.value=$e.state.spotShadow,ye.rectAreaLights.value=$e.state.rectArea,ye.ltc_1.value=$e.state.rectAreaLTC1,ye.ltc_2.value=$e.state.rectAreaLTC2,ye.pointLights.value=$e.state.point,ye.pointLightShadows.value=$e.state.pointShadow,ye.hemisphereLights.value=$e.state.hemi,ye.directionalShadowMap.value=$e.state.directionalShadowMap,ye.directionalShadowMatrix.value=$e.state.directionalShadowMatrix,ye.spotShadowMap.value=$e.state.spotShadowMap,ye.spotLightMatrix.value=$e.state.spotLightMatrix,ye.spotLightMap.value=$e.state.spotLightMap,ye.pointShadowMap.value=$e.state.pointShadowMap,ye.pointShadowMatrix.value=$e.state.pointShadowMatrix);const rt=Ie.getUniforms(),at=mT.seqWithValue(rt.seq,ye);return Le.currentProgram=Ie,Le.uniformsList=at,Ie}function ma(re,Re){const qe=te.get(re);qe.outputEncoding=Re.outputEncoding,qe.instancing=Re.instancing,qe.skinning=Re.skinning,qe.morphTargets=Re.morphTargets,qe.morphNormals=Re.morphNormals,qe.morphColors=Re.morphColors,qe.morphTargetsCount=Re.morphTargetsCount,qe.numClippingPlanes=Re.numClippingPlanes,qe.numIntersection=Re.numClipIntersection,qe.vertexAlphas=Re.vertexAlphas,qe.vertexTangents=Re.vertexTangents,qe.toneMapping=Re.toneMapping}function _l(re,Re,qe,Le,$e){Re.isScene!==!0&&(Re=we),ce.resetTextureUnits();const Qt=Re.fog,Jt=Le.isMeshStandardMaterial?Re.environment:null,ln=C===null?g.outputEncoding:C.isXRRenderTarget===!0?C.texture.encoding:Bu,Xt=(Le.isMeshStandardMaterial?Pe:de).get(Le.envMap||Jt),Sn=Le.vertexColors===!0&&!!qe.attributes.color&&qe.attributes.color.itemSize===4,Ie=!!Le.normalMap&&!!qe.attributes.tangent,ye=!!qe.morphAttributes.position,rt=!!qe.morphAttributes.normal,at=!!qe.morphAttributes.color,$n=Le.toneMapped?g.toneMapping:zc,qn=qe.morphAttributes.position||qe.morphAttributes.normal||qe.morphAttributes.color,rn=qn!==void 0?qn.length:0,Rt=te.get(Le),rr=h.state.lights;if(W===!0&&(ee===!0||re!==x)){const Dn=re===x&&Le.id===T;ne.setState(Le,re,Dn)}let mn=!1;Le.version===Rt.__version?(Rt.needsLights&&Rt.lightsStateVersion!==rr.state.version||Rt.outputEncoding!==ln||$e.isInstancedMesh&&Rt.instancing===!1||!$e.isInstancedMesh&&Rt.instancing===!0||$e.isSkinnedMesh&&Rt.skinning===!1||!$e.isSkinnedMesh&&Rt.skinning===!0||Rt.envMap!==Xt||Le.fog===!0&&Rt.fog!==Qt||Rt.numClippingPlanes!==void 0&&(Rt.numClippingPlanes!==ne.numPlanes||Rt.numIntersection!==ne.numIntersection)||Rt.vertexAlphas!==Sn||Rt.vertexTangents!==Ie||Rt.morphTargets!==ye||Rt.morphNormals!==rt||Rt.morphColors!==at||Rt.toneMapping!==$n||Qe.isWebGL2===!0&&Rt.morphTargetsCount!==rn)&&(mn=!0):(mn=!0,Rt.__version=Le.version);let Tn=Rt.currentProgram;mn===!0&&(Tn=nr(Le,Re,$e));let Gr=!1,gr=!1,ri=!1;const xr=Tn.getUniforms(),zr=Rt.uniforms;if(We.useProgram(Tn.program)&&(Gr=!0,gr=!0,ri=!0),Le.id!==T&&(T=Le.id,gr=!0),Gr||x!==re){if(xr.setValue(Se,"projectionMatrix",re.projectionMatrix),Qe.logarithmicDepthBuffer&&xr.setValue(Se,"logDepthBufFC",2/(Math.log(re.far+1)/Math.LN2)),x!==re&&(x=re,gr=!0,ri=!0),Le.isShaderMaterial||Le.isMeshPhongMaterial||Le.isMeshToonMaterial||Le.isMeshStandardMaterial||Le.envMap){const Dn=xr.map.cameraPosition;Dn!==void 0&&Dn.setValue(Se,fe.setFromMatrixPosition(re.matrixWorld))}(Le.isMeshPhongMaterial||Le.isMeshToonMaterial||Le.isMeshLambertMaterial||Le.isMeshBasicMaterial||Le.isMeshStandardMaterial||Le.isShaderMaterial)&&xr.setValue(Se,"isOrthographic",re.isOrthographicCamera===!0),(Le.isMeshPhongMaterial||Le.isMeshToonMaterial||Le.isMeshLambertMaterial||Le.isMeshBasicMaterial||Le.isMeshStandardMaterial||Le.isShaderMaterial||Le.isShadowMaterial||$e.isSkinnedMesh)&&xr.setValue(Se,"viewMatrix",re.matrixWorldInverse)}if($e.isSkinnedMesh){xr.setOptional(Se,$e,"bindMatrix"),xr.setOptional(Se,$e,"bindMatrixInverse");const Dn=$e.skeleton;Dn&&(Qe.floatVertexTextures?(Dn.boneTexture===null&&Dn.computeBoneTexture(),xr.setValue(Se,"boneTexture",Dn.boneTexture,ce),xr.setValue(Se,"boneTextureSize",Dn.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const jn=qe.morphAttributes;if((jn.position!==void 0||jn.normal!==void 0||jn.color!==void 0&&Qe.isWebGL2===!0)&&Je.update($e,qe,Le,Tn),(gr||Rt.receiveShadow!==$e.receiveShadow)&&(Rt.receiveShadow=$e.receiveShadow,xr.setValue(Se,"receiveShadow",$e.receiveShadow)),Le.isMeshGouraudMaterial&&Le.envMap!==null&&(zr.envMap.value=Xt,zr.flipEnvMap.value=Xt.isCubeTexture&&Xt.isRenderTargetTexture===!1?-1:1),gr&&(xr.setValue(Se,"toneMappingExposure",g.toneMappingExposure),Rt.needsLights&&qi(zr,ri),Qt&&Le.fog===!0&&ke.refreshFogUniforms(zr,Qt),ke.refreshMaterialUniforms(zr,Le,z,P,Q),mT.upload(Se,Rt.uniformsList,zr,ce)),Le.isShaderMaterial&&Le.uniformsNeedUpdate===!0&&(mT.upload(Se,Rt.uniformsList,zr,ce),Le.uniformsNeedUpdate=!1),Le.isSpriteMaterial&&xr.setValue(Se,"center",$e.center),xr.setValue(Se,"modelViewMatrix",$e.modelViewMatrix),xr.setValue(Se,"normalMatrix",$e.normalMatrix),xr.setValue(Se,"modelMatrix",$e.matrixWorld),Le.isShaderMaterial||Le.isRawShaderMaterial){const Dn=Le.uniformsGroups;for(let ga=0,co=Dn.length;ga<co;ga++)if(Qe.isWebGL2){const is=Dn[ga];Ct.update(is,Tn),Ct.bind(is,Tn)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Tn}function qi(re,Re){re.ambientLightColor.needsUpdate=Re,re.lightProbe.needsUpdate=Re,re.directionalLights.needsUpdate=Re,re.directionalLightShadows.needsUpdate=Re,re.pointLights.needsUpdate=Re,re.pointLightShadows.needsUpdate=Re,re.spotLights.needsUpdate=Re,re.spotLightShadows.needsUpdate=Re,re.rectAreaLights.needsUpdate=Re,re.hemisphereLights.needsUpdate=Re}function Yn(re){return re.isMeshLambertMaterial||re.isMeshToonMaterial||re.isMeshPhongMaterial||re.isMeshStandardMaterial||re.isShadowMaterial||re.isShaderMaterial&&re.lights===!0}this.getActiveCubeFace=function(){return y},this.getActiveMipmapLevel=function(){return A},this.getRenderTarget=function(){return C},this.setRenderTargetTextures=function(re,Re,qe){te.get(re.texture).__webglTexture=Re,te.get(re.depthTexture).__webglTexture=qe;const Le=te.get(re);Le.__hasExternalTextures=!0,Le.__hasExternalTextures&&(Le.__autoAllocateDepthBuffer=qe===void 0,Le.__autoAllocateDepthBuffer||xe.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Le.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(re,Re){const qe=te.get(re);qe.__webglFramebuffer=Re,qe.__useDefaultFramebuffer=Re===void 0},this.setRenderTarget=function(re,Re=0,qe=0){C=re,y=Re,A=qe;let Le=!0;if(re){const Xt=te.get(re);Xt.__useDefaultFramebuffer!==void 0?(We.bindFramebuffer(36160,null),Le=!1):Xt.__webglFramebuffer===void 0?ce.setupRenderTarget(re):Xt.__hasExternalTextures&&ce.rebindTextures(re,te.get(re.texture).__webglTexture,te.get(re.depthTexture).__webglTexture)}let $e=null,Qt=!1,Jt=!1;if(re){const Xt=re.texture;(Xt.isData3DTexture||Xt.isDataArrayTexture)&&(Jt=!0);const Sn=te.get(re).__webglFramebuffer;re.isWebGLCubeRenderTarget?($e=Sn[Re],Qt=!0):Qe.isWebGL2&&re.samples>0&&ce.useMultisampledRTT(re)===!1?$e=te.get(re).__webglMultisampledFramebuffer:$e=Sn,R.copy(re.viewport),N.copy(re.scissor),M=re.scissorTest}else R.copy(B).multiplyScalar(z).floor(),N.copy(q).multiplyScalar(z).floor(),M=K;if(We.bindFramebuffer(36160,$e)&&Qe.drawBuffers&&Le&&We.drawBuffers(re,$e),We.viewport(R),We.scissor(N),We.setScissorTest(M),Qt){const Xt=te.get(re.texture);Se.framebufferTexture2D(36160,36064,34069+Re,Xt.__webglTexture,qe)}else if(Jt){const Xt=te.get(re.texture),Sn=Re||0;Se.framebufferTextureLayer(36160,36064,Xt.__webglTexture,qe||0,Sn)}T=-1},this.readRenderTargetPixels=function(re,Re,qe,Le,$e,Qt,Jt){if(!(re&&re.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ln=te.get(re).__webglFramebuffer;if(re.isWebGLCubeRenderTarget&&Jt!==void 0&&(ln=ln[Jt]),ln){We.bindFramebuffer(36160,ln);try{const Xt=re.texture,Sn=Xt.format,Ie=Xt.type;if(Sn!==Wl&&je.convert(Sn)!==Se.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const ye=Ie===kc&&(xe.has("EXT_color_buffer_half_float")||Qe.isWebGL2&&xe.has("EXT_color_buffer_float"));if(Ie!==Bf&&je.convert(Ie)!==Se.getParameter(35738)&&!(Ie===nl&&(Qe.isWebGL2||xe.has("OES_texture_float")||xe.has("WEBGL_color_buffer_float")))&&!ye){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Re>=0&&Re<=re.width-Le&&qe>=0&&qe<=re.height-$e&&Se.readPixels(Re,qe,Le,$e,je.convert(Sn),je.convert(Ie),Qt)}finally{const Xt=C!==null?te.get(C).__webglFramebuffer:null;We.bindFramebuffer(36160,Xt)}}},this.copyFramebufferToTexture=function(re,Re,qe=0){const Le=Math.pow(2,-qe),$e=Math.floor(Re.image.width*Le),Qt=Math.floor(Re.image.height*Le);ce.setTexture2D(Re,0),Se.copyTexSubImage2D(3553,qe,0,0,re.x,re.y,$e,Qt),We.unbindTexture()},this.copyTextureToTexture=function(re,Re,qe,Le=0){const $e=Re.image.width,Qt=Re.image.height,Jt=je.convert(qe.format),ln=je.convert(qe.type);ce.setTexture2D(qe,0),Se.pixelStorei(37440,qe.flipY),Se.pixelStorei(37441,qe.premultiplyAlpha),Se.pixelStorei(3317,qe.unpackAlignment),Re.isDataTexture?Se.texSubImage2D(3553,Le,re.x,re.y,$e,Qt,Jt,ln,Re.image.data):Re.isCompressedTexture?Se.compressedTexSubImage2D(3553,Le,re.x,re.y,Re.mipmaps[0].width,Re.mipmaps[0].height,Jt,Re.mipmaps[0].data):Se.texSubImage2D(3553,Le,re.x,re.y,Jt,ln,Re.image),Le===0&&qe.generateMipmaps&&Se.generateMipmap(3553),We.unbindTexture()},this.copyTextureToTexture3D=function(re,Re,qe,Le,$e=0){if(g.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Qt=re.max.x-re.min.x+1,Jt=re.max.y-re.min.y+1,ln=re.max.z-re.min.z+1,Xt=je.convert(Le.format),Sn=je.convert(Le.type);let Ie;if(Le.isData3DTexture)ce.setTexture3D(Le,0),Ie=32879;else if(Le.isDataArrayTexture)ce.setTexture2DArray(Le,0),Ie=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Se.pixelStorei(37440,Le.flipY),Se.pixelStorei(37441,Le.premultiplyAlpha),Se.pixelStorei(3317,Le.unpackAlignment);const ye=Se.getParameter(3314),rt=Se.getParameter(32878),at=Se.getParameter(3316),$n=Se.getParameter(3315),qn=Se.getParameter(32877),rn=qe.isCompressedTexture?qe.mipmaps[0]:qe.image;Se.pixelStorei(3314,rn.width),Se.pixelStorei(32878,rn.height),Se.pixelStorei(3316,re.min.x),Se.pixelStorei(3315,re.min.y),Se.pixelStorei(32877,re.min.z),qe.isDataTexture||qe.isData3DTexture?Se.texSubImage3D(Ie,$e,Re.x,Re.y,Re.z,Qt,Jt,ln,Xt,Sn,rn.data):qe.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Se.compressedTexSubImage3D(Ie,$e,Re.x,Re.y,Re.z,Qt,Jt,ln,Xt,rn.data)):Se.texSubImage3D(Ie,$e,Re.x,Re.y,Re.z,Qt,Jt,ln,Xt,Sn,rn),Se.pixelStorei(3314,ye),Se.pixelStorei(32878,rt),Se.pixelStorei(3316,at),Se.pixelStorei(3315,$n),Se.pixelStorei(32877,qn),$e===0&&Le.generateMipmaps&&Se.generateMipmap(Ie),We.unbindTexture()},this.initTexture=function(re){re.isCubeTexture?ce.setTextureCube(re,0):re.isData3DTexture?ce.setTexture3D(re,0):re.isDataArrayTexture?ce.setTexture2DArray(re,0):ce.setTexture2D(re,0),We.unbindTexture()},this.resetState=function(){y=0,A=0,C=null,We.reset(),Bt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class mJ extends K6{}mJ.prototype.isWebGL1Renderer=!0;class F2{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Dt(e),this.density=t}clone(){return new F2(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class z2{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new Dt(e),this.near=t,this.far=r}clone(){return new z2(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class U2 extends pr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class SA{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=cS,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=cl()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=cl()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=cl()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Wo=new le;class Ff{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)Wo.fromBufferAttribute(this,t),Wo.applyMatrix4(e),this.setXYZ(t,Wo.x,Wo.y,Wo.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Wo.fromBufferAttribute(this,t),Wo.applyNormalMatrix(e),this.setXYZ(t,Wo.x,Wo.y,Wo.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Wo.fromBufferAttribute(this,t),Wo.transformDirection(e),this.setXYZ(t,Wo.x,Wo.y,Wo.z);return this}setX(e,t){return this.normalized&&(t=Qr(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Qr(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Qr(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Qr(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Ld(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Ld(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Ld(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Ld(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Qr(t,this.array),r=Qr(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Qr(t,this.array),r=Qr(r,this.array),i=Qr(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Qr(t,this.array),r=Qr(r,this.array),i=Qr(i,this.array),s=Qr(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new wr(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Ff(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Y6 extends Rs{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Dt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let k0;const Fy=new le,B0=new le,F0=new le,z0=new tt,zy=new tt,gJ=new xn,pC=new le,Uy=new le,mC=new le,UB=new tt,A3=new tt,jB=new tt;class vJ extends pr{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",k0===void 0){k0=new Jn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new SA(t,5);k0.setIndex([0,1,2,0,2,3]),k0.setAttribute("position",new Ff(r,3,0,!1)),k0.setAttribute("uv",new Ff(r,2,3,!1))}this.geometry=k0,this.material=e!==void 0?e:new Y6,this.center=new tt(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),B0.setFromMatrixScale(this.matrixWorld),gJ.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),F0.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&B0.multiplyScalar(-F0.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;gC(pC.set(-.5,-.5,0),F0,o,B0,i,s),gC(Uy.set(.5,-.5,0),F0,o,B0,i,s),gC(mC.set(.5,.5,0),F0,o,B0,i,s),UB.set(0,0),A3.set(1,0),jB.set(1,1);let a=e.ray.intersectTriangle(pC,Uy,mC,!1,Fy);if(a===null&&(gC(Uy.set(-.5,.5,0),F0,o,B0,i,s),A3.set(0,1),a=e.ray.intersectTriangle(pC,mC,Uy,!1,Fy),a===null))return;const l=e.ray.origin.distanceTo(Fy);l<e.near||l>e.far||t.push({distance:l,point:Fy.clone(),uv:Gl.getUV(Fy,pC,Uy,mC,UB,A3,jB,new tt),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function gC(n,e,t,r,i,s){z0.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(zy.x=s*z0.x-i*z0.y,zy.y=i*z0.x+s*z0.y):zy.copy(z0),n.copy(e),n.x+=zy.x,n.y+=zy.y,n.applyMatrix4(gJ)}const vC=new le,GB=new le;class yJ extends pr{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,i=t.length;r<i;r++){const s=t[r];this.addLevel(s.object.clone(),s.distance)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0){t=Math.abs(t);const r=this.levels;let i;for(i=0;i<r.length&&!(t<r[i].distance);i++);return r.splice(i,0,{distance:t,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i&&!(e<t[r].distance);r++);return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){vC.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(vC);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){vC.setFromMatrixPosition(e.matrixWorld),GB.setFromMatrixPosition(this.matrixWorld);const r=vC.distanceTo(GB)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s&&r>=t[i].distance;i++)t[i-1].object.visible=!1,t[i].object.visible=!0;for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}const HB=new le,VB=new Br,$B=new Br,KEe=new le,WB=new xn;class AA extends js{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new xn,this.bindMatrixInverse=new xn}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Br,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const r=this.skeleton,i=this.geometry;VB.fromBufferAttribute(i.attributes.skinIndex,e),$B.fromBufferAttribute(i.attributes.skinWeight,e),HB.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=$B.getComponent(s);if(o!==0){const a=VB.getComponent(s);WB.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(KEe.copy(HB).applyMatrix4(WB),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class j2 extends pr{constructor(){super(),this.isBone=!0,this.type="Bone"}}class wg extends Vi{constructor(e=null,t=1,r=1,i,s,o,a,l,c=ts,u=ts,d,h){super(null,o,a,l,c,u,i,s,d,h),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const qB=new xn,YEe=new xn;class EA{constructor(e=[],t=[]){this.uuid=cl(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new xn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new xn;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:YEe;qB.multiplyMatrices(a,t[s]),qB.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new EA(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=nJ(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new wg(t,e,e,Wl,nl);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new j2),this.bones.push(o),this.boneInverses.push(new xn().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const o=t[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class Pm extends wr{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const QB=new xn,JB=new xn,yC=[],jy=new js;class X6 extends js{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Pm(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.frustumCulled=!1}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const r=this.matrixWorld,i=this.count;if(jy.geometry=this.geometry,jy.material=this.material,jy.material!==void 0)for(let s=0;s<i;s++){this.getMatrixAt(s,QB),JB.multiplyMatrices(r,QB),jy.matrixWorld=JB,jy.raycast(e,yC);for(let o=0,a=yC.length;o<a;o++){const l=yC[o];l.instanceId=s,l.object=this,t.push(l)}yC.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Pm(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Do extends Rs{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Dt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const KB=new le,YB=new le,XB=new xn,E3=new Ev,_C=new rp;class Zd extends pr{constructor(e=new Jn,t=new Do){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,s=t.count;i<s;i++)KB.fromBufferAttribute(t,i-1),YB.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=KB.distanceTo(YB);e.setAttribute("lineDistance",new Kt(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),_C.copy(r.boundingSphere),_C.applyMatrix4(i),_C.radius+=s,e.ray.intersectsSphere(_C)===!1)return;XB.copy(i).invert(),E3.copy(e.ray).applyMatrix4(XB);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new le,u=new le,d=new le,h=new le,f=this.isLineSegments?2:1,m=r.index,v=r.attributes.position;if(m!==null){const y=Math.max(0,o.start),A=Math.min(m.count,o.start+o.count);for(let C=y,T=A-1;C<T;C+=f){const x=m.getX(C),R=m.getX(C+1);if(c.fromBufferAttribute(v,x),u.fromBufferAttribute(v,R),E3.distanceSqToSegment(c,u,h,d)>l)continue;h.applyMatrix4(this.matrixWorld);const M=e.ray.origin.distanceTo(h);M<e.near||M>e.far||t.push({distance:M,point:d.clone().applyMatrix4(this.matrixWorld),index:C,face:null,faceIndex:null,object:this})}}else{const y=Math.max(0,o.start),A=Math.min(v.count,o.start+o.count);for(let C=y,T=A-1;C<T;C+=f){if(c.fromBufferAttribute(v,C),u.fromBufferAttribute(v,C+1),E3.distanceSqToSegment(c,u,h,d)>l)continue;h.applyMatrix4(this.matrixWorld);const R=e.ray.origin.distanceTo(h);R<e.near||R>e.far||t.push({distance:R,point:d.clone().applyMatrix4(this.matrixWorld),index:C,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const ZB=new le,eF=new le;class Yc extends Zd{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,s=t.count;i<s;i+=2)ZB.fromBufferAttribute(t,i),eF.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+ZB.distanceTo(eF);e.setAttribute("lineDistance",new Kt(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Z6 extends Zd{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class G2 extends Rs{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Dt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const tF=new xn,MN=new Ev,SC=new rp,AC=new le;class eD extends pr{constructor(e=new Jn,t=new G2){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),SC.copy(r.boundingSphere),SC.applyMatrix4(i),SC.radius+=s,e.ray.intersectsSphere(SC)===!1)return;tF.copy(i).invert(),MN.copy(e.ray).applyMatrix4(tF);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=r.index,d=r.attributes.position;if(c!==null){const h=Math.max(0,o.start),f=Math.min(c.count,o.start+o.count);for(let m=h,g=f;m<g;m++){const v=c.getX(m);AC.fromBufferAttribute(d,v),nF(AC,v,l,i,e,t,this)}}else{const h=Math.max(0,o.start),f=Math.min(d.count,o.start+o.count);for(let m=h,g=f;m<g;m++)AC.fromBufferAttribute(d,m),nF(AC,m,l,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function nF(n,e,t,r,i,s,o){const a=MN.distanceSqToPoint(n);if(a<t){const l=new le;MN.closestPointToPoint(n,l),l.applyMatrix4(r);const c=i.ray.origin.distanceTo(l);if(c<i.near||c>i.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class XEe extends Vi{constructor(e,t,r,i,s,o,a,l,c){super(e,t,r,i,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:li,this.magFilter=s!==void 0?s:li,this.generateMipmaps=!1;const u=this;function d(){u.needsUpdate=!0,e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(d)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class ZEe extends Vi{constructor(e,t,r){super({width:e,height:t}),this.isFramebufferTexture=!0,this.format=r,this.magFilter=ts,this.minFilter=ts,this.generateMipmaps=!1,this.needsUpdate=!0}}class _J extends Vi{constructor(e,t,r,i,s,o,a,l,c,u,d,h){super(null,o,a,l,c,u,i,s,d,h),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class eCe extends Vi{constructor(e,t,r,i,s,o,a,l,c){super(e,t,r,i,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Xc{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),t.push(s),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const s=r.length;let o;t?o=t:o=e*r[s-1];let a=0,l=s-1,c;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),c=r[i]-o,c<0)a=i+1;else if(c>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const u=r[i],h=r[i+1]-u,f=(o-u)/h;return(i+f)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=t||(o.isVector2?new tt:new le);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new le,i=[],s=[],o=[],a=new le,l=new xn;for(let f=0;f<=e;f++){const m=f/e;i[f]=this.getTangentAt(m,new le)}s[0]=new le,o[0]=new le;let c=Number.MAX_VALUE;const u=Math.abs(i[0].x),d=Math.abs(i[0].y),h=Math.abs(i[0].z);u<=c&&(c=u,r.set(1,0,0)),d<=c&&(c=d,r.set(0,1,0)),h<=c&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let f=1;f<=e;f++){if(s[f]=s[f-1].clone(),o[f]=o[f-1].clone(),a.crossVectors(i[f-1],i[f]),a.length()>Number.EPSILON){a.normalize();const m=Math.acos(ns(i[f-1].dot(i[f]),-1,1));s[f].applyMatrix4(l.makeRotationAxis(a,m))}o[f].crossVectors(i[f],s[f])}if(t===!0){let f=Math.acos(ns(s[0].dot(s[e]),-1,1));f/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(f=-f);for(let m=1;m<=e;m++)s[m].applyMatrix4(l.makeRotationAxis(i[m],f*m)),o[m].crossVectors(i[m],s[m])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class H2 extends Xc{constructor(e=0,t=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const r=t||new tt,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),d=Math.sin(this.aRotation),h=l-this.aX,f=c-this.aY;l=h*u-f*d+this.aX,c=h*d+f*u+this.aY}return r.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class SJ extends H2{constructor(e,t,r,i,s,o){super(e,t,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function tD(){let n=0,e=0,t=0,r=0;function i(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){i(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,d){let h=(o-s)/c-(a-s)/(c+u)+(a-o)/u,f=(a-o)/u-(l-o)/(u+d)+(l-a)/d;h*=u,f*=u,i(o,a,h,f)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+r*a}}}const EC=new le,C3=new tD,w3=new tD,T3=new tD;class AJ extends Xc{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new le){const r=t,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,u;this.closed||a>0?c=i[(a-1)%s]:(EC.subVectors(i[0],i[1]).add(i[0]),c=EC);const d=i[a%s],h=i[(a+1)%s];if(this.closed||a+2<s?u=i[(a+2)%s]:(EC.subVectors(i[s-1],i[s-2]).add(i[s-1]),u=EC),this.curveType==="centripetal"||this.curveType==="chordal"){const f=this.curveType==="chordal"?.5:.25;let m=Math.pow(c.distanceToSquared(d),f),g=Math.pow(d.distanceToSquared(h),f),v=Math.pow(h.distanceToSquared(u),f);g<1e-4&&(g=1),m<1e-4&&(m=g),v<1e-4&&(v=g),C3.initNonuniformCatmullRom(c.x,d.x,h.x,u.x,m,g,v),w3.initNonuniformCatmullRom(c.y,d.y,h.y,u.y,m,g,v),T3.initNonuniformCatmullRom(c.z,d.z,h.z,u.z,m,g,v)}else this.curveType==="catmullrom"&&(C3.initCatmullRom(c.x,d.x,h.x,u.x,this.tension),w3.initCatmullRom(c.y,d.y,h.y,u.y,this.tension),T3.initCatmullRom(c.z,d.z,h.z,u.z,this.tension));return r.set(C3.calc(l),w3.calc(l),T3.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new le().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function rF(n,e,t,r,i){const s=(r-e)*.5,o=(i-t)*.5,a=n*n,l=n*a;return(2*t-2*r+s+o)*l+(-3*t+3*r-2*s-o)*a+s*n+t}function tCe(n,e){const t=1-n;return t*t*e}function nCe(n,e){return 2*(1-n)*n*e}function rCe(n,e){return n*n*e}function N_(n,e,t,r){return tCe(n,e)+nCe(n,t)+rCe(n,r)}function iCe(n,e){const t=1-n;return t*t*t*e}function sCe(n,e){const t=1-n;return 3*t*t*n*e}function oCe(n,e){return 3*(1-n)*n*n*e}function aCe(n,e){return n*n*n*e}function P_(n,e,t,r,i){return iCe(n,e)+sCe(n,t)+oCe(n,r)+aCe(n,i)}class nD extends Xc{constructor(e=new tt,t=new tt,r=new tt,i=new tt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new tt){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(P_(e,i.x,s.x,o.x,a.x),P_(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class EJ extends Xc{constructor(e=new le,t=new le,r=new le,i=new le){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new le){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(P_(e,i.x,s.x,o.x,a.x),P_(e,i.y,s.y,o.y,a.y),P_(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class V2 extends Xc{constructor(e=new tt,t=new tt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new tt){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const r=t||new tt;return r.copy(this.v2).sub(this.v1).normalize(),r}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class CJ extends Xc{constructor(e=new le,t=new le){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new le){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class rD extends Xc{constructor(e=new tt,t=new tt,r=new tt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new tt){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(N_(e,i.x,s.x,o.x),N_(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class iD extends Xc{constructor(e=new le,t=new le,r=new le){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new le){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(N_(e,i.x,s.x,o.x),N_(e,i.y,s.y,o.y),N_(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class sD extends Xc{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new tt){const r=t,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[o===0?o:o-1],c=i[o],u=i[o>i.length-2?i.length-1:o+1],d=i[o>i.length-3?i.length-1:o+2];return r.set(rF(a,l.x,c.x,u.x,d.x),rF(a,l.y,c.y,u.y,d.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new tt().fromArray(i))}return this}}var oD=Object.freeze({__proto__:null,ArcCurve:SJ,CatmullRomCurve3:AJ,CubicBezierCurve:nD,CubicBezierCurve3:EJ,EllipseCurve:H2,LineCurve:V2,LineCurve3:CJ,QuadraticBezierCurve:rD,QuadraticBezierCurve3:iD,SplineCurve:sD});class wJ extends Xc{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new V2(t,e))}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const u=l[c];r&&r.equals(u)||(t.push(u),r=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new oD[i.type]().fromJSON(i))}return this}}class hS extends wJ{constructor(e){super(),this.type="Path",this.currentPoint=new tt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new V2(this.currentPoint.clone(),new tt(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const s=new rD(this.currentPoint.clone(),new tt(e,t),new tt(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,s,o){const a=new nD(this.currentPoint.clone(),new tt(e,t),new tt(r,i),new tt(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new sD(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,r,i,s,o),this}absarc(e,t,r,i,s,o){return this.absellipse(e,t,r,r,i,s,o),this}ellipse(e,t,r,i,s,o,a,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,t+u,r,i,s,o,a,l),this}absellipse(e,t,r,i,s,o,a,l){const c=new H2(e,t,r,i,s,o,a,l);if(this.curves.length>0){const d=c.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Tv extends Jn{constructor(e=[new tt(0,-.5),new tt(.5,0),new tt(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=ns(i,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],u=1/t,d=new le,h=new tt,f=new le,m=new le,g=new le;let v=0,y=0;for(let A=0;A<=e.length-1;A++)switch(A){case 0:v=e[A+1].x-e[A].x,y=e[A+1].y-e[A].y,f.x=y*1,f.y=-v,f.z=y*0,g.copy(f),f.normalize(),l.push(f.x,f.y,f.z);break;case e.length-1:l.push(g.x,g.y,g.z);break;default:v=e[A+1].x-e[A].x,y=e[A+1].y-e[A].y,f.x=y*1,f.y=-v,f.z=y*0,m.copy(f),f.x+=g.x,f.y+=g.y,f.z+=g.z,f.normalize(),l.push(f.x,f.y,f.z),g.copy(m)}for(let A=0;A<=t;A++){const C=r+A*u*i,T=Math.sin(C),x=Math.cos(C);for(let R=0;R<=e.length-1;R++){d.x=e[R].x*T,d.y=e[R].y,d.z=e[R].x*x,o.push(d.x,d.y,d.z),h.x=A/t,h.y=R/(e.length-1),a.push(h.x,h.y);const N=l[3*R+0]*T,M=l[3*R+1],O=l[3*R+0]*x;c.push(N,M,O)}}for(let A=0;A<t;A++)for(let C=0;C<e.length-1;C++){const T=C+A*e.length,x=T,R=T+e.length,N=T+e.length+1,M=T+1;s.push(x,R,M),s.push(N,M,R)}this.setIndex(s),this.setAttribute("position",new Kt(o,3)),this.setAttribute("uv",new Kt(a,2)),this.setAttribute("normal",new Kt(c,3))}static fromJSON(e){return new Tv(e.points,e.segments,e.phiStart,e.phiLength)}}class CA extends Tv{constructor(e=1,t=1,r=4,i=8){const s=new hS;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:r,radialSegments:i}}static fromJSON(e){return new CA(e.radius,e.length,e.capSegments,e.radialSegments)}}class wA extends Jn{constructor(e=1,t=8,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const s=[],o=[],a=[],l=[],c=new le,u=new tt;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let d=0,h=3;d<=t;d++,h+=3){const f=r+d/t*i;c.x=e*Math.cos(f),c.y=e*Math.sin(f),o.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(o[h]/e+1)/2,u.y=(o[h+1]/e+1)/2,l.push(u.x,u.y)}for(let d=1;d<=t;d++)s.push(d,d+1,0);this.setIndex(s),this.setAttribute("position",new Kt(o,3)),this.setAttribute("normal",new Kt(a,3)),this.setAttribute("uv",new Kt(l,2))}static fromJSON(e){return new wA(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class sp extends Jn{constructor(e=1,t=1,r=1,i=8,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;i=Math.floor(i),s=Math.floor(s);const u=[],d=[],h=[],f=[];let m=0;const g=[],v=r/2;let y=0;A(),o===!1&&(e>0&&C(!0),t>0&&C(!1)),this.setIndex(u),this.setAttribute("position",new Kt(d,3)),this.setAttribute("normal",new Kt(h,3)),this.setAttribute("uv",new Kt(f,2));function A(){const T=new le,x=new le;let R=0;const N=(t-e)/r;for(let M=0;M<=s;M++){const O=[],P=M/s,z=P*(t-e)+e;for(let V=0;V<=i;V++){const $=V/i,B=$*l+a,q=Math.sin(B),K=Math.cos(B);x.x=z*q,x.y=-P*r+v,x.z=z*K,d.push(x.x,x.y,x.z),T.set(q,N,K).normalize(),h.push(T.x,T.y,T.z),f.push($,1-P),O.push(m++)}g.push(O)}for(let M=0;M<i;M++)for(let O=0;O<s;O++){const P=g[O][M],z=g[O+1][M],V=g[O+1][M+1],$=g[O][M+1];u.push(P,z,$),u.push(z,V,$),R+=6}c.addGroup(y,R,0),y+=R}function C(T){const x=m,R=new tt,N=new le;let M=0;const O=T===!0?e:t,P=T===!0?1:-1;for(let V=1;V<=i;V++)d.push(0,v*P,0),h.push(0,P,0),f.push(.5,.5),m++;const z=m;for(let V=0;V<=i;V++){const B=V/i*l+a,q=Math.cos(B),K=Math.sin(B);N.x=O*K,N.y=v*P,N.z=O*q,d.push(N.x,N.y,N.z),h.push(0,P,0),R.x=q*.5+.5,R.y=K*.5*P+.5,f.push(R.x,R.y),m++}for(let V=0;V<i;V++){const $=x+V,B=z+V;T===!0?u.push(B,B+1,$):u.push(B+1,B,$),M+=3}c.addGroup(y,M,T===!0?1:2),y+=M}}static fromJSON(e){return new sp(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class TA extends sp{constructor(e=1,t=1,r=8,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,r,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new TA(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class hh extends Jn{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const s=[],o=[];a(i),c(r),u(),this.setAttribute("position",new Kt(s,3)),this.setAttribute("normal",new Kt(s.slice(),3)),this.setAttribute("uv",new Kt(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(A){const C=new le,T=new le,x=new le;for(let R=0;R<t.length;R+=3)f(t[R+0],C),f(t[R+1],T),f(t[R+2],x),l(C,T,x,A)}function l(A,C,T,x){const R=x+1,N=[];for(let M=0;M<=R;M++){N[M]=[];const O=A.clone().lerp(T,M/R),P=C.clone().lerp(T,M/R),z=R-M;for(let V=0;V<=z;V++)V===0&&M===R?N[M][V]=O:N[M][V]=O.clone().lerp(P,V/z)}for(let M=0;M<R;M++)for(let O=0;O<2*(R-M)-1;O++){const P=Math.floor(O/2);O%2===0?(h(N[M][P+1]),h(N[M+1][P]),h(N[M][P])):(h(N[M][P+1]),h(N[M+1][P+1]),h(N[M+1][P]))}}function c(A){const C=new le;for(let T=0;T<s.length;T+=3)C.x=s[T+0],C.y=s[T+1],C.z=s[T+2],C.normalize().multiplyScalar(A),s[T+0]=C.x,s[T+1]=C.y,s[T+2]=C.z}function u(){const A=new le;for(let C=0;C<s.length;C+=3){A.x=s[C+0],A.y=s[C+1],A.z=s[C+2];const T=v(A)/2/Math.PI+.5,x=y(A)/Math.PI+.5;o.push(T,1-x)}m(),d()}function d(){for(let A=0;A<o.length;A+=6){const C=o[A+0],T=o[A+2],x=o[A+4],R=Math.max(C,T,x),N=Math.min(C,T,x);R>.9&&N<.1&&(C<.2&&(o[A+0]+=1),T<.2&&(o[A+2]+=1),x<.2&&(o[A+4]+=1))}}function h(A){s.push(A.x,A.y,A.z)}function f(A,C){const T=A*3;C.x=e[T+0],C.y=e[T+1],C.z=e[T+2]}function m(){const A=new le,C=new le,T=new le,x=new le,R=new tt,N=new tt,M=new tt;for(let O=0,P=0;O<s.length;O+=9,P+=6){A.set(s[O+0],s[O+1],s[O+2]),C.set(s[O+3],s[O+4],s[O+5]),T.set(s[O+6],s[O+7],s[O+8]),R.set(o[P+0],o[P+1]),N.set(o[P+2],o[P+3]),M.set(o[P+4],o[P+5]),x.copy(A).add(C).add(T).divideScalar(3);const z=v(x);g(R,P+0,A,z),g(N,P+2,C,z),g(M,P+4,T,z)}}function g(A,C,T,x){x<0&&A.x===1&&(o[C]=A.x-1),T.x===0&&T.z===0&&(o[C]=x/2/Math.PI+.5)}function v(A){return Math.atan2(A.z,-A.x)}function y(A){return Math.atan2(-A.y,Math.sqrt(A.x*A.x+A.z*A.z))}}static fromJSON(e){return new hh(e.vertices,e.indices,e.radius,e.details)}}class xA extends hh{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new xA(e.radius,e.detail)}}const CC=new le,wC=new le,x3=new le,TC=new Gl;class TJ extends Jn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(vm*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],u=["a","b","c"],d=new Array(3),h={},f=[];for(let m=0;m<l;m+=3){o?(c[0]=o.getX(m),c[1]=o.getX(m+1),c[2]=o.getX(m+2)):(c[0]=m,c[1]=m+1,c[2]=m+2);const{a:g,b:v,c:y}=TC;if(g.fromBufferAttribute(a,c[0]),v.fromBufferAttribute(a,c[1]),y.fromBufferAttribute(a,c[2]),TC.getNormal(x3),d[0]=`${Math.round(g.x*i)},${Math.round(g.y*i)},${Math.round(g.z*i)}`,d[1]=`${Math.round(v.x*i)},${Math.round(v.y*i)},${Math.round(v.z*i)}`,d[2]=`${Math.round(y.x*i)},${Math.round(y.y*i)},${Math.round(y.z*i)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let A=0;A<3;A++){const C=(A+1)%3,T=d[A],x=d[C],R=TC[u[A]],N=TC[u[C]],M=`${T}_${x}`,O=`${x}_${T}`;O in h&&h[O]?(x3.dot(h[O].normal)<=s&&(f.push(R.x,R.y,R.z),f.push(N.x,N.y,N.z)),h[O]=null):M in h||(h[M]={index0:c[A],index1:c[C],normal:x3.clone()})}}for(const m in h)if(h[m]){const{index0:g,index1:v}=h[m];CC.fromBufferAttribute(a,g),wC.fromBufferAttribute(a,v),f.push(CC.x,CC.y,CC.z),f.push(wC.x,wC.y,wC.z)}this.setAttribute("position",new Kt(f,3))}}}class Sm extends hS{constructor(e){super(e),this.uuid=cl(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new hS().fromJSON(i))}return this}}const lCe={triangulate:function(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let s=xJ(n,0,i,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,u,d,h,f;if(r&&(s=fCe(n,e,s,t)),n.length>80*t){a=c=n[0],l=u=n[1];for(let m=t;m<i;m+=t)d=n[m],h=n[m+1],d<a&&(a=d),h<l&&(l=h),d>c&&(c=d),h>u&&(u=h);f=Math.max(c-a,u-l),f=f!==0?1/f:0}return fS(s,o,t,a,l,f),o}};function xJ(n,e,t,r,i){let s,o;if(i===wCe(n,e,t,r)>0)for(s=e;s<t;s+=r)o=iF(s,n[s],n[s+1],o);else for(s=t-r;s>=e;s-=r)o=iF(s,n[s],n[s+1],o);return o&&$2(o,o.next)&&(mS(o),o=o.next),o}function zf(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&($2(t,t.next)||Ti(t.prev,t,t.next)===0)){if(mS(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function fS(n,e,t,r,i,s,o){if(!n)return;!o&&s&&yCe(n,r,i,s);let a=n,l,c;for(;n.prev!==n.next;){if(l=n.prev,c=n.next,s?uCe(n,r,i,s):cCe(n)){e.push(l.i/t),e.push(n.i/t),e.push(c.i/t),mS(n),n=c.next,a=c.next;continue}if(n=c,n===a){o?o===1?(n=dCe(zf(n),e,t),fS(n,e,t,r,i,s,2)):o===2&&hCe(n,e,t,r,i,s):fS(zf(n),e,t,r,i,s,1);break}}}function cCe(n){const e=n.prev,t=n,r=n.next;if(Ti(e,t,r)>=0)return!1;let i=n.next.next;for(;i!==n.prev;){if(ug(e.x,e.y,t.x,t.y,r.x,r.y,i.x,i.y)&&Ti(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function uCe(n,e,t,r){const i=n.prev,s=n,o=n.next;if(Ti(i,s,o)>=0)return!1;const a=i.x<s.x?i.x<o.x?i.x:o.x:s.x<o.x?s.x:o.x,l=i.y<s.y?i.y<o.y?i.y:o.y:s.y<o.y?s.y:o.y,c=i.x>s.x?i.x>o.x?i.x:o.x:s.x>o.x?s.x:o.x,u=i.y>s.y?i.y>o.y?i.y:o.y:s.y>o.y?s.y:o.y,d=RN(a,l,e,t,r),h=RN(c,u,e,t,r);let f=n.prevZ,m=n.nextZ;for(;f&&f.z>=d&&m&&m.z<=h;){if(f!==n.prev&&f!==n.next&&ug(i.x,i.y,s.x,s.y,o.x,o.y,f.x,f.y)&&Ti(f.prev,f,f.next)>=0||(f=f.prevZ,m!==n.prev&&m!==n.next&&ug(i.x,i.y,s.x,s.y,o.x,o.y,m.x,m.y)&&Ti(m.prev,m,m.next)>=0))return!1;m=m.nextZ}for(;f&&f.z>=d;){if(f!==n.prev&&f!==n.next&&ug(i.x,i.y,s.x,s.y,o.x,o.y,f.x,f.y)&&Ti(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;m&&m.z<=h;){if(m!==n.prev&&m!==n.next&&ug(i.x,i.y,s.x,s.y,o.x,o.y,m.x,m.y)&&Ti(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function dCe(n,e,t){let r=n;do{const i=r.prev,s=r.next.next;!$2(i,s)&&IJ(i,r,r.next,s)&&pS(i,s)&&pS(s,i)&&(e.push(i.i/t),e.push(r.i/t),e.push(s.i/t),mS(r),mS(r.next),r=n=s),r=r.next}while(r!==n);return zf(r)}function hCe(n,e,t,r,i,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&ACe(o,a)){let l=bJ(o,a);o=zf(o,o.next),l=zf(l,l.next),fS(o,e,t,r,i,s),fS(l,e,t,r,i,s);return}a=a.next}o=o.next}while(o!==n)}function fCe(n,e,t,r){const i=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:n.length,c=xJ(n,a,l,r,!1),c===c.next&&(c.steiner=!0),i.push(SCe(c));for(i.sort(pCe),s=0;s<i.length;s++)mCe(i[s],t),t=zf(t,t.next);return t}function pCe(n,e){return n.x-e.x}function mCe(n,e){if(e=gCe(n,e),e){const t=bJ(e,n);zf(e,e.next),zf(t,t.next)}}function gCe(n,e){let t=e;const r=n.x,i=n.y;let s=-1/0,o;do{if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){const h=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(h<=r&&h>s){if(s=h,h===r){if(i===t.y)return t;if(i===t.next.y)return t.next}o=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!o)return null;if(r===s)return o;const a=o,l=o.x,c=o.y;let u=1/0,d;t=o;do r>=t.x&&t.x>=l&&r!==t.x&&ug(i<c?r:s,i,l,c,i<c?s:r,i,t.x,t.y)&&(d=Math.abs(i-t.y)/(r-t.x),pS(t,n)&&(d<u||d===u&&(t.x>o.x||t.x===o.x&&vCe(o,t)))&&(o=t,u=d)),t=t.next;while(t!==a);return o}function vCe(n,e){return Ti(n.prev,n,e.prev)<0&&Ti(e.next,n,n.next)<0}function yCe(n,e,t,r){let i=n;do i.z===null&&(i.z=RN(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,_Ce(i)}function _Ce(n){let e,t,r,i,s,o,a,l,c=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,r=t,a=0,e=0;e<c&&(a++,r=r.nextZ,!!r);e++);for(l=c;a>0||l>0&&r;)a!==0&&(l===0||!r||t.z<=r.z)?(i=t,t=t.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:n=i,i.prevZ=s,s=i;t=r}s.nextZ=null,c*=2}while(o>1);return n}function RN(n,e,t,r,i){return n=32767*(n-t)*i,e=32767*(e-r)*i,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function SCe(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function ug(n,e,t,r,i,s,o,a){return(i-o)*(e-a)-(n-o)*(s-a)>=0&&(n-o)*(r-a)-(t-o)*(e-a)>=0&&(t-o)*(s-a)-(i-o)*(r-a)>=0}function ACe(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!ECe(n,e)&&(pS(n,e)&&pS(e,n)&&CCe(n,e)&&(Ti(n.prev,n,e.prev)||Ti(n,e.prev,e))||$2(n,e)&&Ti(n.prev,n,n.next)>0&&Ti(e.prev,e,e.next)>0)}function Ti(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function $2(n,e){return n.x===e.x&&n.y===e.y}function IJ(n,e,t,r){const i=IC(Ti(n,e,t)),s=IC(Ti(n,e,r)),o=IC(Ti(t,r,n)),a=IC(Ti(t,r,e));return!!(i!==s&&o!==a||i===0&&xC(n,t,e)||s===0&&xC(n,r,e)||o===0&&xC(t,n,r)||a===0&&xC(t,e,r))}function xC(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function IC(n){return n>0?1:n<0?-1:0}function ECe(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&IJ(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function pS(n,e){return Ti(n.prev,n,n.next)<0?Ti(n,e,n.next)>=0&&Ti(n,n.prev,e)>=0:Ti(n,e,n.prev)<0||Ti(n,n.next,e)<0}function CCe(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function bJ(n,e){const t=new NN(n.i,n.x,n.y),r=new NN(e.i,e.x,e.y),i=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,s.next=r,r.prev=s,r}function iF(n,e,t,r){const i=new NN(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function mS(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function NN(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function wCe(n,e,t,r){let i=0;for(let s=e,o=t-r;s<t;s+=r)i+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return i}class Ou{static area(e){const t=e.length;let r=0;for(let i=t-1,s=0;s<t;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return Ou.area(e)<0}static triangulateShape(e,t){const r=[],i=[],s=[];sF(e),oF(r,e);let o=e.length;t.forEach(sF);for(let l=0;l<t.length;l++)i.push(o),o+=t[l].length,oF(r,t[l]);const a=lCe.triangulate(r,i);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function sF(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function oF(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class IA extends Jn{constructor(e=new Sm([new tt(.5,.5),new tt(-.5,.5),new tt(-.5,-.5),new tt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new Kt(i,3)),this.setAttribute("uv",new Kt(s,2)),this.computeVertexNormals();function o(a){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1,d=t.depth!==void 0?t.depth:1;let h=t.bevelEnabled!==void 0?t.bevelEnabled:!0,f=t.bevelThickness!==void 0?t.bevelThickness:.2,m=t.bevelSize!==void 0?t.bevelSize:f-.1,g=t.bevelOffset!==void 0?t.bevelOffset:0,v=t.bevelSegments!==void 0?t.bevelSegments:3;const y=t.extrudePath,A=t.UVGenerator!==void 0?t.UVGenerator:TCe;let C,T=!1,x,R,N,M;y&&(C=y.getSpacedPoints(u),T=!0,h=!1,x=y.computeFrenetFrames(u,!1),R=new le,N=new le,M=new le),h||(v=0,f=0,m=0,g=0);const O=a.extractPoints(c);let P=O.shape;const z=O.holes;if(!Ou.isClockWise(P)){P=P.reverse();for(let te=0,ce=z.length;te<ce;te++){const de=z[te];Ou.isClockWise(de)&&(z[te]=de.reverse())}}const $=Ou.triangulateShape(P,z),B=P;for(let te=0,ce=z.length;te<ce;te++){const de=z[te];P=P.concat(de)}function q(te,ce,de){return ce||console.error("THREE.ExtrudeGeometry: vec does not exist"),ce.clone().multiplyScalar(de).add(te)}const K=P.length,se=$.length;function W(te,ce,de){let Pe,Te,De;const Ge=te.x-ce.x,it=te.y-ce.y,ke=de.x-te.x,ct=de.y-te.y,oe=Ge*Ge+it*it,ne=Ge*ct-it*ke;if(Math.abs(ne)>Number.EPSILON){const Oe=Math.sqrt(oe),st=Math.sqrt(ke*ke+ct*ct),Je=ce.x-it/Oe,ft=ce.y+Ge/Oe,zt=de.x-ct/st,je=de.y+ke/st,Bt=((zt-Je)*ct-(je-ft)*ke)/(Ge*ct-it*ke);Pe=Je+Ge*Bt-te.x,Te=ft+it*Bt-te.y;const Ct=Pe*Pe+Te*Te;if(Ct<=2)return new tt(Pe,Te);De=Math.sqrt(Ct/2)}else{let Oe=!1;Ge>Number.EPSILON?ke>Number.EPSILON&&(Oe=!0):Ge<-Number.EPSILON?ke<-Number.EPSILON&&(Oe=!0):Math.sign(it)===Math.sign(ct)&&(Oe=!0),Oe?(Pe=-it,Te=Ge,De=Math.sqrt(oe)):(Pe=Ge,Te=it,De=Math.sqrt(oe/2))}return new tt(Pe/De,Te/De)}const ee=[];for(let te=0,ce=B.length,de=ce-1,Pe=te+1;te<ce;te++,de++,Pe++)de===ce&&(de=0),Pe===ce&&(Pe=0),ee[te]=W(B[te],B[de],B[Pe]);const Q=[];let Y,ae=ee.concat();for(let te=0,ce=z.length;te<ce;te++){const de=z[te];Y=[];for(let Pe=0,Te=de.length,De=Te-1,Ge=Pe+1;Pe<Te;Pe++,De++,Ge++)De===Te&&(De=0),Ge===Te&&(Ge=0),Y[Pe]=W(de[Pe],de[De],de[Ge]);Q.push(Y),ae=ae.concat(Y)}for(let te=0;te<v;te++){const ce=te/v,de=f*Math.cos(ce*Math.PI/2),Pe=m*Math.sin(ce*Math.PI/2)+g;for(let Te=0,De=B.length;Te<De;Te++){const Ge=q(B[Te],ee[Te],Pe);Ke(Ge.x,Ge.y,-de)}for(let Te=0,De=z.length;Te<De;Te++){const Ge=z[Te];Y=Q[Te];for(let it=0,ke=Ge.length;it<ke;it++){const ct=q(Ge[it],Y[it],Pe);Ke(ct.x,ct.y,-de)}}}const fe=m+g;for(let te=0;te<K;te++){const ce=h?q(P[te],ae[te],fe):P[te];T?(N.copy(x.normals[0]).multiplyScalar(ce.x),R.copy(x.binormals[0]).multiplyScalar(ce.y),M.copy(C[0]).add(N).add(R),Ke(M.x,M.y,M.z)):Ke(ce.x,ce.y,0)}for(let te=1;te<=u;te++)for(let ce=0;ce<K;ce++){const de=h?q(P[ce],ae[ce],fe):P[ce];T?(N.copy(x.normals[te]).multiplyScalar(de.x),R.copy(x.binormals[te]).multiplyScalar(de.y),M.copy(C[te]).add(N).add(R),Ke(M.x,M.y,M.z)):Ke(de.x,de.y,d/u*te)}for(let te=v-1;te>=0;te--){const ce=te/v,de=f*Math.cos(ce*Math.PI/2),Pe=m*Math.sin(ce*Math.PI/2)+g;for(let Te=0,De=B.length;Te<De;Te++){const Ge=q(B[Te],ee[Te],Pe);Ke(Ge.x,Ge.y,d+de)}for(let Te=0,De=z.length;Te<De;Te++){const Ge=z[Te];Y=Q[Te];for(let it=0,ke=Ge.length;it<ke;it++){const ct=q(Ge[it],Y[it],Pe);T?Ke(ct.x,ct.y+C[u-1].y,C[u-1].x+de):Ke(ct.x,ct.y,d+de)}}}we(),ge();function we(){const te=i.length/3;if(h){let ce=0,de=K*ce;for(let Pe=0;Pe<se;Pe++){const Te=$[Pe];xe(Te[2]+de,Te[1]+de,Te[0]+de)}ce=u+v*2,de=K*ce;for(let Pe=0;Pe<se;Pe++){const Te=$[Pe];xe(Te[0]+de,Te[1]+de,Te[2]+de)}}else{for(let ce=0;ce<se;ce++){const de=$[ce];xe(de[2],de[1],de[0])}for(let ce=0;ce<se;ce++){const de=$[ce];xe(de[0]+K*u,de[1]+K*u,de[2]+K*u)}}r.addGroup(te,i.length/3-te,0)}function ge(){const te=i.length/3;let ce=0;Se(B,ce),ce+=B.length;for(let de=0,Pe=z.length;de<Pe;de++){const Te=z[de];Se(Te,ce),ce+=Te.length}r.addGroup(te,i.length/3-te,1)}function Se(te,ce){let de=te.length;for(;--de>=0;){const Pe=de;let Te=de-1;Te<0&&(Te=te.length-1);for(let De=0,Ge=u+v*2;De<Ge;De++){const it=K*De,ke=K*(De+1),ct=ce+Pe+it,oe=ce+Te+it,ne=ce+Te+ke,Oe=ce+Pe+ke;Qe(ct,oe,ne,Oe)}}}function Ke(te,ce,de){l.push(te),l.push(ce),l.push(de)}function xe(te,ce,de){We(te),We(ce),We(de);const Pe=i.length/3,Te=A.generateTopUV(r,i,Pe-3,Pe-2,Pe-1);Ve(Te[0]),Ve(Te[1]),Ve(Te[2])}function Qe(te,ce,de,Pe){We(te),We(ce),We(Pe),We(ce),We(de),We(Pe);const Te=i.length/3,De=A.generateSideWallUV(r,i,Te-6,Te-3,Te-2,Te-1);Ve(De[0]),Ve(De[1]),Ve(De[3]),Ve(De[1]),Ve(De[2]),Ve(De[3])}function We(te){i.push(l[te*3+0]),i.push(l[te*3+1]),i.push(l[te*3+2])}function Ve(te){s.push(te.x),s.push(te.y)}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return xCe(t,r,e)}static fromJSON(e,t){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new oD[i.type]().fromJSON(i)),new IA(r,e.options)}}const TCe={generateTopUV:function(n,e,t,r,i){const s=e[t*3],o=e[t*3+1],a=e[r*3],l=e[r*3+1],c=e[i*3],u=e[i*3+1];return[new tt(s,o),new tt(a,l),new tt(c,u)]},generateSideWallUV:function(n,e,t,r,i,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[r*3],u=e[r*3+1],d=e[r*3+2],h=e[i*3],f=e[i*3+1],m=e[i*3+2],g=e[s*3],v=e[s*3+1],y=e[s*3+2];return Math.abs(a-u)<Math.abs(o-c)?[new tt(o,1-l),new tt(c,1-d),new tt(h,1-m),new tt(g,1-y)]:[new tt(a,1-l),new tt(u,1-d),new tt(f,1-m),new tt(v,1-y)]}};function xCe(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const s=n[r];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class bA extends hh{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new bA(e.radius,e.detail)}}class xv extends hh{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new xv(e.radius,e.detail)}}class MA extends Jn{constructor(e=.5,t=1,r=8,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],c=[],u=[];let d=e;const h=(t-e)/i,f=new le,m=new tt;for(let g=0;g<=i;g++){for(let v=0;v<=r;v++){const y=s+v/r*o;f.x=d*Math.cos(y),f.y=d*Math.sin(y),l.push(f.x,f.y,f.z),c.push(0,0,1),m.x=(f.x/t+1)/2,m.y=(f.y/t+1)/2,u.push(m.x,m.y)}d+=h}for(let g=0;g<i;g++){const v=g*(r+1);for(let y=0;y<r;y++){const A=y+v,C=A,T=A+r+1,x=A+r+2,R=A+1;a.push(C,T,R),a.push(T,x,R)}}this.setIndex(a),this.setAttribute("position",new Kt(l,3)),this.setAttribute("normal",new Kt(c,3)),this.setAttribute("uv",new Kt(u,2))}static fromJSON(e){return new MA(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class RA extends Jn{constructor(e=new Sm([new tt(0,.5),new tt(-.5,-.5),new tt(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new Kt(i,3)),this.setAttribute("normal",new Kt(s,3)),this.setAttribute("uv",new Kt(o,2));function c(u){const d=i.length/3,h=u.extractPoints(t);let f=h.shape;const m=h.holes;Ou.isClockWise(f)===!1&&(f=f.reverse());for(let v=0,y=m.length;v<y;v++){const A=m[v];Ou.isClockWise(A)===!0&&(m[v]=A.reverse())}const g=Ou.triangulateShape(f,m);for(let v=0,y=m.length;v<y;v++){const A=m[v];f=f.concat(A)}for(let v=0,y=f.length;v<y;v++){const A=f[v];i.push(A.x,A.y,0),s.push(0,0,1),o.push(A.x,A.y)}for(let v=0,y=g.length;v<y;v++){const A=g[v],C=A[0]+d,T=A[1]+d,x=A[2]+d;r.push(C,T,x),l+=3}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return ICe(t,e)}static fromJSON(e,t){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=t[e.shapes[i]];r.push(o)}return new RA(r,e.curveSegments)}}function ICe(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}class Iv extends Jn{constructor(e=1,t=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let c=0;const u=[],d=new le,h=new le,f=[],m=[],g=[],v=[];for(let y=0;y<=r;y++){const A=[],C=y/r;let T=0;y==0&&o==0?T=.5/t:y==r&&l==Math.PI&&(T=-.5/t);for(let x=0;x<=t;x++){const R=x/t;d.x=-e*Math.cos(i+R*s)*Math.sin(o+C*a),d.y=e*Math.cos(o+C*a),d.z=e*Math.sin(i+R*s)*Math.sin(o+C*a),m.push(d.x,d.y,d.z),h.copy(d).normalize(),g.push(h.x,h.y,h.z),v.push(R+T,1-C),A.push(c++)}u.push(A)}for(let y=0;y<r;y++)for(let A=0;A<t;A++){const C=u[y][A+1],T=u[y][A],x=u[y+1][A],R=u[y+1][A+1];(y!==0||o>0)&&f.push(C,T,R),(y!==r-1||l<Math.PI)&&f.push(T,x,R)}this.setIndex(f),this.setAttribute("position",new Kt(m,3)),this.setAttribute("normal",new Kt(g,3)),this.setAttribute("uv",new Kt(v,2))}static fromJSON(e){return new Iv(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class NA extends hh{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new NA(e.radius,e.detail)}}class PA extends Jn{constructor(e=1,t=.4,r=8,i=6,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],l=[],c=[],u=new le,d=new le,h=new le;for(let f=0;f<=r;f++)for(let m=0;m<=i;m++){const g=m/i*s,v=f/r*Math.PI*2;d.x=(e+t*Math.cos(v))*Math.cos(g),d.y=(e+t*Math.cos(v))*Math.sin(g),d.z=t*Math.sin(v),a.push(d.x,d.y,d.z),u.x=e*Math.cos(g),u.y=e*Math.sin(g),h.subVectors(d,u).normalize(),l.push(h.x,h.y,h.z),c.push(m/i),c.push(f/r)}for(let f=1;f<=r;f++)for(let m=1;m<=i;m++){const g=(i+1)*f+m-1,v=(i+1)*(f-1)+m-1,y=(i+1)*(f-1)+m,A=(i+1)*f+m;o.push(g,v,A),o.push(v,y,A)}this.setIndex(o),this.setAttribute("position",new Kt(a,3)),this.setAttribute("normal",new Kt(l,3)),this.setAttribute("uv",new Kt(c,2))}static fromJSON(e){return new PA(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class OA extends Jn{constructor(e=1,t=.4,r=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],c=[],u=[],d=new le,h=new le,f=new le,m=new le,g=new le,v=new le,y=new le;for(let C=0;C<=r;++C){const T=C/r*s*Math.PI*2;A(T,s,o,e,f),A(T+.01,s,o,e,m),v.subVectors(m,f),y.addVectors(m,f),g.crossVectors(v,y),y.crossVectors(g,v),g.normalize(),y.normalize();for(let x=0;x<=i;++x){const R=x/i*Math.PI*2,N=-t*Math.cos(R),M=t*Math.sin(R);d.x=f.x+(N*y.x+M*g.x),d.y=f.y+(N*y.y+M*g.y),d.z=f.z+(N*y.z+M*g.z),l.push(d.x,d.y,d.z),h.subVectors(d,f).normalize(),c.push(h.x,h.y,h.z),u.push(C/r),u.push(x/i)}}for(let C=1;C<=r;C++)for(let T=1;T<=i;T++){const x=(i+1)*(C-1)+(T-1),R=(i+1)*C+(T-1),N=(i+1)*C+T,M=(i+1)*(C-1)+T;a.push(x,R,M),a.push(R,N,M)}this.setIndex(a),this.setAttribute("position",new Kt(l,3)),this.setAttribute("normal",new Kt(c,3)),this.setAttribute("uv",new Kt(u,2));function A(C,T,x,R,N){const M=Math.cos(C),O=Math.sin(C),P=x/T*C,z=Math.cos(P);N.x=R*(2+z)*.5*M,N.y=R*(2+z)*O*.5,N.z=R*Math.sin(P)*.5}}static fromJSON(e){return new OA(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class DA extends Jn{constructor(e=new iD(new le(-1,-1,0),new le(-1,1,0),new le(1,1,0)),t=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new le,l=new le,c=new tt;let u=new le;const d=[],h=[],f=[],m=[];g(),this.setIndex(m),this.setAttribute("position",new Kt(d,3)),this.setAttribute("normal",new Kt(h,3)),this.setAttribute("uv",new Kt(f,2));function g(){for(let C=0;C<t;C++)v(C);v(s===!1?t:0),A(),y()}function v(C){u=e.getPointAt(C/t,u);const T=o.normals[C],x=o.binormals[C];for(let R=0;R<=i;R++){const N=R/i*Math.PI*2,M=Math.sin(N),O=-Math.cos(N);l.x=O*T.x+M*x.x,l.y=O*T.y+M*x.y,l.z=O*T.z+M*x.z,l.normalize(),h.push(l.x,l.y,l.z),a.x=u.x+r*l.x,a.y=u.y+r*l.y,a.z=u.z+r*l.z,d.push(a.x,a.y,a.z)}}function y(){for(let C=1;C<=t;C++)for(let T=1;T<=i;T++){const x=(i+1)*(C-1)+(T-1),R=(i+1)*C+(T-1),N=(i+1)*C+T,M=(i+1)*(C-1)+T;m.push(x,R,M),m.push(R,N,M)}}function A(){for(let C=0;C<=t;C++)for(let T=0;T<=i;T++)c.x=C/t,c.y=T/i,f.push(c.x,c.y)}}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new DA(new oD[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class MJ extends Jn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,i=new le,s=new le;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const d=l[c],h=d.start,f=d.count;for(let m=h,g=h+f;m<g;m+=3)for(let v=0;v<3;v++){const y=a.getX(m+v),A=a.getX(m+(v+1)%3);i.fromBufferAttribute(o,y),s.fromBufferAttribute(o,A),aF(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const u=3*a+c,d=3*a+(c+1)%3;i.fromBufferAttribute(o,u),s.fromBufferAttribute(o,d),aF(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Kt(t,3))}}}function aF(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(i)===!0?!1:(t.add(r),t.add(i),!0)}var lF=Object.freeze({__proto__:null,BoxGeometry:ip,CapsuleGeometry:CA,CircleGeometry:wA,ConeGeometry:TA,CylinderGeometry:sp,DodecahedronGeometry:xA,EdgesGeometry:TJ,ExtrudeGeometry:IA,IcosahedronGeometry:bA,LatheGeometry:Tv,OctahedronGeometry:xv,PlaneGeometry:Cv,PolyhedronGeometry:hh,RingGeometry:MA,ShapeGeometry:RA,SphereGeometry:Iv,TetrahedronGeometry:NA,TorusGeometry:PA,TorusKnotGeometry:OA,TubeGeometry:DA,WireframeGeometry:MJ});class RJ extends Rs{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Dt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class NJ extends Vc{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class bv extends Rs{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Dt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Dt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tp,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ac extends bv{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new tt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return ns(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Dt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Dt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Dt(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class PJ extends Rs{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Dt(16777215),this.specular=new Dt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Dt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tp,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=vA,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class OJ extends Rs{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Dt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Dt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tp,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class DJ extends Rs{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tp,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class LJ extends Rs{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Dt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Dt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tp,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=vA,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class kJ extends Rs{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Dt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tp,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class BJ extends Do{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function kl(n,e,t){return aD(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)}function um(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function aD(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function FJ(n){function e(i,s){return n[i]-n[s]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function PN(n,e,t){const r=n.length,i=new n.constructor(r);for(let s=0,o=0;o!==r;++s){const a=t[s]*e;for(let l=0;l!==e;++l)i[o++]=n[a+l]}return i}function lD(n,e,t,r){let i=1,s=n[0];for(;s!==void 0&&s[r]===void 0;)s=n[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),t.push(o)),s=n[i++];while(s!==void 0)}function bCe(n,e,t,r,i=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),d=[],h=[];for(let f=0;f<c.times.length;++f){const m=c.times[f]*i;if(!(m<t||m>=r)){d.push(c.times[f]);for(let g=0;g<u;++g)h.push(c.values[f*u+g])}}d.length!==0&&(c.times=um(d,c.times.constructor),c.values=um(h,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function MCe(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=n.tracks.find(function(y){return y.name===a.name&&y.ValueTypeName===l});if(c===void 0)continue;let u=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=d/3);let h=0;const f=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=f/3);const m=a.times.length-1;let g;if(s<=a.times[0]){const y=u,A=d-u;g=kl(a.values,y,A)}else if(s>=a.times[m]){const y=m*d+u,A=y+d-u;g=kl(a.values,y,A)}else{const y=a.createInterpolant(),A=u,C=d-u;y.evaluate(s),g=kl(y.resultBuffer,A,C)}l==="quaternion"&&new Hs().fromArray(g).normalize().conjugate().toArray(g);const v=c.times.length;for(let y=0;y<v;++y){const A=y*f+h;if(l==="quaternion")Hs.multiplyQuaternionsFlat(c.values,A,g,0,c.values,A);else{const C=f-h*2;for(let T=0;T<C;++T)c.values[A+T]-=g[T]}}}return n.blendMode=U6,n}var RCe=Object.freeze({__proto__:null,arraySlice:kl,convertArray:um,isTypedArray:aD,getKeyframeOrder:FJ,sortedArray:PN,flattenJSON:lD,subclip:bCe,makeClipAdditive:MCe});class Mv{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],s=t[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=t[++r],e<i)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=t[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<t[a]?o=a:r=a+1}if(i=t[r],s=t[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)t[o]=r[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class zJ extends Mv{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:am,endingEnd:am}}intervalChanged_(e,t,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case lm:s=e,a=2*t-r;break;case lS:s=i.length-2,a=t+i[s]-i[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case lm:o=e,l=2*r-t;break;case lS:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=t}const c=(r-t)*.5,u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-r),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,d=this._offsetNext,h=this._weightPrev,f=this._weightNext,m=(r-t)/(i-t),g=m*m,v=g*m,y=-h*v+2*h*g-h*m,A=(1+h)*v+(-1.5-2*h)*g+(-.5+h)*m+1,C=(-1-f)*v+(1.5+f)*g+.5*m,T=f*v-f*g;for(let x=0;x!==a;++x)s[x]=y*o[u+x]+A*o[c+x]+C*o[l+x]+T*o[d+x];return s}}class cD extends Mv{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(r-t)/(i-t),d=1-u;for(let h=0;h!==a;++h)s[h]=o[c+h]*d+o[l+h]*u;return s}}class UJ extends Mv{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Zc{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=um(t,this.TimeBufferType),this.values=um(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:um(e.times,Array),values:um(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new UJ(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new cD(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new zJ(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Qg:t=this.InterpolantFactoryMethodDiscrete;break;case Nm:t=this.InterpolantFactoryMethodLinear;break;case hT:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Qg;case this.InterpolantFactoryMethodLinear:return Nm;case this.InterpolantFactoryMethodSmooth:return hT}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>t;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=kl(r,s,o),this.values=kl(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&aD(i))for(let a=0,l=i.length;a!==l;++a){const c=i[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=kl(this.times),t=kl(this.values),r=this.getValueSize(),i=this.getInterpolation()===hT,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(i)l=!0;else{const d=a*r,h=d-r,f=d+r;for(let m=0;m!==r;++m){const g=t[d+m];if(g!==t[h+m]||g!==t[f+m]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const d=a*r,h=o*r;for(let f=0;f!==r;++f)t[h+f]=t[d+f]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,c=0;c!==r;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=kl(e,0,o),this.values=kl(t,0,o*r)):(this.times=e,this.values=t),this}clone(){const e=kl(this.times,0),t=kl(this.values,0),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}Zc.prototype.TimeBufferType=Float32Array;Zc.prototype.ValueBufferType=Float32Array;Zc.prototype.DefaultInterpolation=Nm;class Km extends Zc{}Km.prototype.ValueTypeName="bool";Km.prototype.ValueBufferType=Array;Km.prototype.DefaultInterpolation=Qg;Km.prototype.InterpolantFactoryMethodLinear=void 0;Km.prototype.InterpolantFactoryMethodSmooth=void 0;class uD extends Zc{}uD.prototype.ValueTypeName="color";class Om extends Zc{}Om.prototype.ValueTypeName="number";class jJ extends Mv{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-t)/(i-t);let c=e*a;for(let u=c+a;c!==u;c+=4)Hs.slerpFlat(s,0,o,c-a,o,c,l);return s}}class Uf extends Zc{InterpolantFactoryMethodLinear(e){return new jJ(this.times,this.values,this.getValueSize(),e)}}Uf.prototype.ValueTypeName="quaternion";Uf.prototype.DefaultInterpolation=Nm;Uf.prototype.InterpolantFactoryMethodSmooth=void 0;class Ym extends Zc{}Ym.prototype.ValueTypeName="string";Ym.prototype.ValueBufferType=Array;Ym.prototype.DefaultInterpolation=Qg;Ym.prototype.InterpolantFactoryMethodLinear=void 0;Ym.prototype.InterpolantFactoryMethodSmooth=void 0;class Dm extends Zc{}Dm.prototype.ValueTypeName="vector";class Yg{constructor(e,t=-1,r,i=D2){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=cl(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)t.push(PCe(r[o]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)t.push(Zc.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=FJ(l);l=PN(l,1,u),c=PN(c,1,u),!i&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new Om(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const d=u[1];let h=i[d];h||(i[d]=h=[]),h.push(c)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],t,r));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(d,h,f,m,g){if(f.length!==0){const v=[],y=[];lD(f,v,y,m),v.length!==0&&g.push(new d(h,v,y))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let d=0;d<c.length;d++){const h=c[d].keys;if(!(!h||h.length===0))if(h[0].morphTargets){const f={};let m;for(m=0;m<h.length;m++)if(h[m].morphTargets)for(let g=0;g<h[m].morphTargets.length;g++)f[h[m].morphTargets[g]]=-1;for(const g in f){const v=[],y=[];for(let A=0;A!==h[m].morphTargets.length;++A){const C=h[m];v.push(C.time),y.push(C.morphTarget===g?1:0)}i.push(new Om(".morphTargetInfluence["+g+"]",v,y))}l=f.length*o}else{const f=".bones["+t[d].name+"]";r(Dm,f+".position",h,"pos",i),r(Uf,f+".quaternion",h,"rot",i),r(Dm,f+".scale",h,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function NCe(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Om;case"vector":case"vector2":case"vector3":case"vector4":return Dm;case"color":return uD;case"quaternion":return Uf;case"bool":case"boolean":return Km;case"string":return Ym}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function PCe(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=NCe(n.type);if(n.times===void 0){const t=[],r=[];lD(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Lm={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class dD{constructor(e,t,r){const i=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(u){a++,s===!1&&i.onStart!==void 0&&i.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,i.onProgress!==void 0&&i.onProgress(u,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(u){i.onError!==void 0&&i.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,d){return c.push(u,d),this},this.removeHandler=function(u){const d=c.indexOf(u);return d!==-1&&c.splice(d,2),this},this.getHandler=function(u){for(let d=0,h=c.length;d<h;d+=2){const f=c[d],m=c[d+1];if(f.global&&(f.lastIndex=0),f.test(u))return m}return null}}}const dg=new dD;let fa=class{constructor(e){this.manager=e!==void 0?e:dg,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,s){r.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}};const vd={};class OCe extends Error{constructor(e,t){super(e),this.response=t}}class dl extends fa{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Lm.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(vd[e]!==void 0){vd[e].push({onLoad:t,onProgress:r,onError:i});return}vd[e]=[],vd[e].push({onLoad:t,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=vd[e],d=c.body.getReader(),h=c.headers.get("Content-Length"),f=h?parseInt(h):0,m=f!==0;let g=0;const v=new ReadableStream({start(y){A();function A(){d.read().then(({done:C,value:T})=>{if(C)y.close();else{g+=T.byteLength;const x=new ProgressEvent("progress",{lengthComputable:m,loaded:g,total:f});for(let R=0,N=u.length;R<N;R++){const M=u[R];M.onProgress&&M.onProgress(x)}y.enqueue(T),A()}})}}});return new Response(v)}else throw new OCe(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return c.json();default:if(a===void 0)return c.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),h=d&&d[1]?d[1].toLowerCase():void 0,f=new TextDecoder(h);return c.arrayBuffer().then(m=>f.decode(m))}}}).then(c=>{Lm.add(e,c);const u=vd[e];delete vd[e];for(let d=0,h=u.length;d<h;d++){const f=u[d];f.onLoad&&f.onLoad(c)}}).catch(c=>{const u=vd[e];if(u===void 0)throw this.manager.itemError(e),c;delete vd[e];for(let d=0,h=u.length;d<h;d++){const f=u[d];f.onError&&f.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class DCe extends fa{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new dl(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=[];for(let r=0;r<e.length;r++){const i=Yg.parse(e[r]);t.push(i)}return t}}class LCe extends fa{constructor(e){super(e)}load(e,t,r,i){const s=this,o=[],a=new _J,l=new dl(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function u(d){l.load(e[d],function(h){const f=s.parse(h,!0);o[d]={width:f.width,height:f.height,format:f.format,mipmaps:f.mipmaps},c+=1,c===6&&(f.mipmapCount===1&&(a.minFilter=li),a.image=o,a.format=f.format,a.needsUpdate=!0,t&&t(a))},r,i)}if(Array.isArray(e))for(let d=0,h=e.length;d<h;++d)u(d);else l.load(e,function(d){const h=s.parse(d,!0);if(h.isCubemap){const f=h.mipmaps.length/h.mipmapCount;for(let m=0;m<f;m++){o[m]={mipmaps:[]};for(let g=0;g<h.mipmapCount;g++)o[m].mipmaps.push(h.mipmaps[m*h.mipmapCount+g]),o[m].format=h.format,o[m].width=h.width,o[m].height=h.height}a.image=o}else a.image.width=h.width,a.image.height=h.height,a.mipmaps=h.mipmaps;h.mipmapCount===1&&(a.minFilter=li),a.format=h.format,a.needsUpdate=!0,t&&t(a)},r,i);return a}}class gS extends fa{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Lm.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=dS("img");function l(){u(),Lm.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(d){u(),i&&i(d),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class GJ extends fa{constructor(e){super(e)}load(e,t,r,i){const s=new _A,o=new gS(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(u){s.images[c]=u,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let c=0;c<e.length;++c)l(c);return s}}class HJ extends fa{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new wg,a=new dl(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){const c=s.parse(l);c&&(c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:Ro,o.wrapT=c.wrapT!==void 0?c.wrapT:Ro,o.magFilter=c.magFilter!==void 0?c.magFilter:li,o.minFilter=c.minFilter!==void 0?c.minFilter:li,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.encoding!==void 0&&(o.encoding=c.encoding),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=uh),c.mipmapCount===1&&(o.minFilter=li),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c))},r,i),o}}class VJ extends fa{constructor(e){super(e)}load(e,t,r,i){const s=new Vi,o=new gS(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},r,i),s}}class op extends pr{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Dt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class $J extends op{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(pr.DefaultUp),this.updateMatrix(),this.groundColor=new Dt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const cF=new xn,uF=new le,dF=new le;class hD{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new tt(512,512),this.map=null,this.mapPass=null,this.matrix=new xn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new k2,this._frameExtents=new tt(1,1),this._viewportCount=1,this._viewports=[new Br(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;uF.setFromMatrixPosition(e.matrixWorld),t.position.copy(uF),dF.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(dF),t.updateMatrixWorld(),cF.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(cF),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(t.projectionMatrix),r.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class kCe extends hD{constructor(){super(new gi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=uS*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(r!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}let fD=class extends op{constructor(e,t,r=0,i=Math.PI/3,s=0,o=1){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(pr.DefaultUp),this.updateMatrix(),this.target=new pr,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new kCe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}};const hF=new xn,Gy=new le,I3=new le;class BCe extends hD{constructor(){super(new gi(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new tt(4,2),this._viewportCount=6,this._viewports=[new Br(2,1,1,1),new Br(0,1,1,1),new Br(3,1,1,1),new Br(1,1,1,1),new Br(3,0,1,1),new Br(1,0,1,1)],this._cubeDirections=[new le(1,0,0),new le(-1,0,0),new le(0,0,1),new le(0,0,-1),new le(0,1,0),new le(0,-1,0)],this._cubeUps=[new le(0,1,0),new le(0,1,0),new le(0,1,0),new le(0,1,0),new le(0,0,1),new le(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),Gy.setFromMatrixPosition(e.matrixWorld),r.position.copy(Gy),I3.copy(r.position),I3.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(I3),r.updateMatrixWorld(),i.makeTranslation(-Gy.x,-Gy.y,-Gy.z),hF.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(hF)}}class pD extends op{constructor(e,t,r=0,i=1){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new BCe}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class FCe extends hD{constructor(){super(new Uc(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class mD extends op{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(pr.DefaultUp),this.updateMatrix(),this.target=new pr,this.shadow=new FCe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class WJ extends op{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class qJ extends op{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class QJ{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new le)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*r),t.addScaledVector(o[4],1.092548*(r*i)),t.addScaledVector(o[5],1.092548*(i*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(r*s)),t.addScaledVector(o[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*i),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*r),t.addScaledVector(o[4],2*.429043*r*i),t.addScaledVector(o[5],2*.429043*i*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*r*s),t.addScaledVector(o[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*r*s,t[8]=.546274*(r*r-i*i)}}class W2 extends op{constructor(e=new QJ,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class q2 extends fa{constructor(e){super(e),this.textures={}}load(e,t,r,i){const s=this,o=new dl(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=this.textures;function r(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=q2.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new Dt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==1&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new Dt().setHex(o.value);break;case"v2":i.uniforms[s].value=new tt().fromArray(o.value);break;case"v3":i.uniforms[s].value=new le().fromArray(o.value);break;case"v4":i.uniforms[s].value=new Br().fromArray(o.value);break;case"m3":i.uniforms[s].value=new La().fromArray(o.value);break;case"m4":i.uniforms[s].value=new xn().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new tt().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new tt().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:RJ,SpriteMaterial:Y6,RawShaderMaterial:NJ,ShaderMaterial:Vc,PointsMaterial:G2,MeshPhysicalMaterial:ac,MeshStandardMaterial:bv,MeshPhongMaterial:PJ,MeshToonMaterial:OJ,MeshNormalMaterial:DJ,MeshLambertMaterial:LJ,MeshDepthMaterial:Q6,MeshDistanceMaterial:J6,MeshBasicMaterial:rl,MeshMatcapMaterial:kJ,LineDashedMaterial:BJ,LineBasicMaterial:Do,Material:Rs};return new t[e]}}class Mf{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class JJ extends Jn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class KJ extends fa{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new dl(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t={},r={};function i(f,m){if(t[m]!==void 0)return t[m];const v=f.interleavedBuffers[m],y=s(f,v.buffer),A=lg(v.type,y),C=new SA(A,v.stride);return C.uuid=v.uuid,t[m]=C,C}function s(f,m){if(r[m]!==void 0)return r[m];const v=f.arrayBuffers[m],y=new Uint32Array(v).buffer;return r[m]=y,y}const o=e.isInstancedBufferGeometry?new JJ:new Jn,a=e.data.index;if(a!==void 0){const f=lg(a.type,a.array);o.setIndex(new wr(f,1))}const l=e.data.attributes;for(const f in l){const m=l[f];let g;if(m.isInterleavedBufferAttribute){const v=i(e.data,m.data);g=new Ff(v,m.itemSize,m.offset,m.normalized)}else{const v=lg(m.type,m.array),y=m.isInstancedBufferAttribute?Pm:wr;g=new y(v,m.itemSize,m.normalized)}m.name!==void 0&&(g.name=m.name),m.usage!==void 0&&g.setUsage(m.usage),m.updateRange!==void 0&&(g.updateRange.offset=m.updateRange.offset,g.updateRange.count=m.updateRange.count),o.setAttribute(f,g)}const c=e.data.morphAttributes;if(c)for(const f in c){const m=c[f],g=[];for(let v=0,y=m.length;v<y;v++){const A=m[v];let C;if(A.isInterleavedBufferAttribute){const T=i(e.data,A.data);C=new Ff(T,A.itemSize,A.offset,A.normalized)}else{const T=lg(A.type,A.array);C=new wr(T,A.itemSize,A.normalized)}A.name!==void 0&&(C.name=A.name),g.push(C)}o.morphAttributes[f]=g}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let f=0,m=d.length;f!==m;++f){const g=d[f];o.addGroup(g.start,g.count,g.materialIndex)}const h=e.data.boundingSphere;if(h!==void 0){const f=new le;h.center!==void 0&&f.fromArray(h.center),o.boundingSphere=new rp(f,h.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class zCe extends fa{constructor(e){super(e)}load(e,t,r,i){const s=this,o=this.path===""?Mf.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new dl(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(d){i!==void 0&&i(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},r,i)}async loadAsync(e,t){const r=this,i=this.path===""?Mf.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new dl(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,t){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){t!==void 0&&t(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,r),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),t!==void 0){let d=!1;for(const h in o)if(o[h].data instanceof HTMLImageElement){d=!0;break}d===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,a,o,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const t={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new Sm().fromJSON(e[r]);t[s.uuid]=s}return t}parseSkeletons(e,t){const r={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new EA().fromJSON(e[s],i);r[a.uuid]=a}return r}parseGeometries(e,t){const r={};if(e!==void 0){const i=new KJ;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in lF?a=lF[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),a.isBufferGeometry===!0&&l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,t){const r={},i={};if(e!==void 0){const s=new q2;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=Yg.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const r=this,i={};let s;function o(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:r.resourcePath+c;return o(u)}else return l.data?{data:lg(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new dD(t);s=new gS(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const d=e[c],h=d.url;if(Array.isArray(h)){const f=[];for(let m=0,g=h.length;m<g;m++){const v=h[m],y=a(v);y!==null&&(y instanceof HTMLImageElement?f.push(y):f.push(new wg(y.data,y.width,y.height)))}i[d.uuid]=new cm(f)}else{const f=a(d.url);i[d.uuid]=new cm(f)}}}return i}async parseImagesAsync(e){const t=this,r={};let i;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await i.loadAsync(l)}else return o.data?{data:lg(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new gS(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const u=[];for(let d=0,h=c.length;d<h;d++){const f=c[d],m=await s(f);m!==null&&(m instanceof HTMLImageElement?u.push(m):u.push(new wg(m.data,m.width,m.height)))}r[l.uuid]=new cm(u)}else{const u=await s(l.url);r[l.uuid]=new cm(u)}}}return r}parseTextures(e,t){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],c=l.data;let u;Array.isArray(c)?(u=new _A,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new wg:u=new Vi,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=a.uuid,a.name!==void 0&&(u.name=a.name),a.mapping!==void 0&&(u.mapping=r(a.mapping,UCe)),a.offset!==void 0&&u.offset.fromArray(a.offset),a.repeat!==void 0&&u.repeat.fromArray(a.repeat),a.center!==void 0&&u.center.fromArray(a.center),a.rotation!==void 0&&(u.rotation=a.rotation),a.wrap!==void 0&&(u.wrapS=r(a.wrap[0],fF),u.wrapT=r(a.wrap[1],fF)),a.format!==void 0&&(u.format=a.format),a.type!==void 0&&(u.type=a.type),a.encoding!==void 0&&(u.encoding=a.encoding),a.minFilter!==void 0&&(u.minFilter=r(a.minFilter,pF)),a.magFilter!==void 0&&(u.magFilter=r(a.magFilter,pF)),a.anisotropy!==void 0&&(u.anisotropy=a.anisotropy),a.flipY!==void 0&&(u.flipY=a.flipY),a.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(u.unpackAlignment=a.unpackAlignment),a.userData!==void 0&&(u.userData=a.userData),i[a.uuid]=u}return i}parseObject(e,t,r,i,s){let o;function a(h){return t[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",h),t[h]}function l(h){if(h!==void 0){if(Array.isArray(h)){const f=[];for(let m=0,g=h.length;m<g;m++){const v=h[m];r[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",v),f.push(r[v])}return f}return r[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",h),r[h]}}function c(h){return i[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",h),i[h]}let u,d;switch(e.type){case"Scene":o=new U2,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Dt(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new z2(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new F2(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":o=new gi(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Uc(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new WJ(e.color,e.intensity);break;case"DirectionalLight":o=new mD(e.color,e.intensity);break;case"PointLight":o=new pD(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new qJ(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new fD(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new $J(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new W2().fromJSON(e);break;case"SkinnedMesh":u=a(e.geometry),d=l(e.material),o=new AA(u,d),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":u=a(e.geometry),d=l(e.material),o=new js(u,d);break;case"InstancedMesh":u=a(e.geometry),d=l(e.material);const h=e.count,f=e.instanceMatrix,m=e.instanceColor;o=new X6(u,d,h),o.instanceMatrix=new Pm(new Float32Array(f.array),16),m!==void 0&&(o.instanceColor=new Pm(new Float32Array(m.array),m.itemSize));break;case"LOD":o=new yJ;break;case"Line":o=new Zd(a(e.geometry),l(e.material));break;case"LineLoop":o=new Z6(a(e.geometry),l(e.material));break;case"LineSegments":o=new Yc(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new eD(a(e.geometry),l(e.material));break;case"Sprite":o=new vJ(l(e.material));break;case"Group":o=new Bd;break;case"Bone":o=new j2;break;default:o=new pr}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const h=e.children;for(let f=0;f<h.length;f++)o.add(this.parseObject(h[f],t,r,i,s))}if(e.animations!==void 0){const h=e.animations;for(let f=0;f<h.length;f++){const m=h[f];o.animations.push(s[m])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const h=e.levels;for(let f=0;f<h.length;f++){const m=h[f],g=o.getObjectByProperty("uuid",m.object);g!==void 0&&o.addLevel(g,m.distance)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=t[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const UCe={UVMapping:P2,CubeReflectionMapping:Xd,CubeRefractionMapping:Lf,EquirectangularReflectionMapping:Wg,EquirectangularRefractionMapping:sS,CubeUVReflectionMapping:Av},fF={RepeatWrapping:kf,ClampToEdgeWrapping:Ro,MirroredRepeatWrapping:qg},pF={NearestFilter:ts,NearestMipmapNearestFilter:oS,NearestMipmapLinearFilter:aS,LinearFilter:li,LinearMipmapNearestFilter:O2,LinearMipmapLinearFilter:uh};class YJ extends fa{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Lm.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){Lm.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){i&&i(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let bC;const gD={getContext:function(){return bC===void 0&&(bC=new(window.AudioContext||window.webkitAudioContext)),bC},setContext:function(n){bC=n}};class jCe extends fa{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new dl(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{const l=a.slice(0);gD.getContext().decodeAudioData(l,function(u){t(u)})}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}}class GCe extends W2{constructor(e,t,r=1){super(void 0,r),this.isHemisphereLightProbe=!0;const i=new Dt().set(e),s=new Dt().set(t),o=new le(i.r,i.g,i.b),a=new le(s.r,s.g,s.b),l=Math.sqrt(Math.PI),c=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(c)}}class HCe extends W2{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const r=new Dt().set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const mF=new xn,gF=new xn,zp=new xn;class VCe{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new gi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new gi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,zp.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,o=t.near*Math.tan(vm*t.fov*.5)/t.zoom;let a,l;gF.elements[12]=-i,mF.elements[12]=i,a=-o*t.aspect+s,l=o*t.aspect+s,zp.elements[0]=2*t.near/(l-a),zp.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(zp),a=-o*t.aspect-s,l=o*t.aspect-s,zp.elements[0]=2*t.near/(l-a),zp.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(zp)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(gF),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(mF)}}class vD{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=vF(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=vF();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function vF(){return(typeof performance>"u"?Date:performance).now()}const Up=new le,yF=new Hs,$Ce=new le,jp=new le;class WCe extends pr{constructor(){super(),this.type="AudioListener",this.context=gD.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new vD}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Up,yF,$Ce),jp.set(0,0,-1).applyQuaternion(yF),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Up.x,i),t.positionY.linearRampToValueAtTime(Up.y,i),t.positionZ.linearRampToValueAtTime(Up.z,i),t.forwardX.linearRampToValueAtTime(jp.x,i),t.forwardY.linearRampToValueAtTime(jp.y,i),t.forwardZ.linearRampToValueAtTime(jp.z,i),t.upX.linearRampToValueAtTime(r.x,i),t.upY.linearRampToValueAtTime(r.y,i),t.upZ.linearRampToValueAtTime(r.z,i)}else t.setPosition(Up.x,Up.y,Up.z),t.setOrientation(jp.x,jp.y,jp.z,r.x,r.y,r.z)}}let XJ=class extends pr{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}};const Gp=new le,_F=new Hs,qCe=new le,Hp=new le;class QCe extends XJ{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Gp,_F,qCe),Hp.set(0,0,1).applyQuaternion(_F);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Gp.x,r),t.positionY.linearRampToValueAtTime(Gp.y,r),t.positionZ.linearRampToValueAtTime(Gp.z,r),t.orientationX.linearRampToValueAtTime(Hp.x,r),t.orientationY.linearRampToValueAtTime(Hp.y,r),t.orientationZ.linearRampToValueAtTime(Hp.z,r)}else t.setPosition(Gp.x,Gp.y,Gp.z),t.setOrientation(Hp.x,Hp.y,Hp.z)}}class JCe{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class ZJ{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,s,o;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(r,i,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(r[l]!==r[l+t]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let s=r,o=i;s!==o;++s)t[s]=t[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[t+o]=e[r+o]}_slerp(e,t,r,i){Hs.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,s){const o=this._workIndex*s;Hs.multiplyQuaternionsFlat(e,o,e,t,e,r),Hs.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,t,r,i,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[r+o]*i}}}const yD="\\[\\]\\.:\\/",KCe=new RegExp("["+yD+"]","g"),_D="[^"+yD+"]",YCe="[^"+yD.replace("\\.","")+"]",XCe=/((?:WC+[\/:])*)/.source.replace("WC",_D),ZCe=/(WCOD+)?/.source.replace("WCOD",YCe),ewe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_D),twe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_D),nwe=new RegExp("^"+XCe+ZCe+ewe+twe+"$"),rwe=["material","materials","bones","map"];class iwe{constructor(e,t,r){const i=r||yr.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class yr{constructor(e,t,r){this.path=t,this.parsedPath=r||yr.parseTrackName(t),this.node=yr.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new yr.Composite(e,t,r):new yr(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(KCe,"")}static parseTrackName(e){const t=nwe.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);rwe.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=yr.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){let c=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[i];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}yr.Composite=iwe;yr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};yr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};yr.prototype.GetterByBindingType=[yr.prototype._getValue_direct,yr.prototype._getValue_array,yr.prototype._getValue_arrayElement,yr.prototype._getValue_toArray];yr.prototype.SetterByBindingTypeAndVersioning=[[yr.prototype._setValue_direct,yr.prototype._setValue_direct_setNeedsUpdate,yr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[yr.prototype._setValue_array,yr.prototype._setValue_array_setNeedsUpdate,yr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[yr.prototype._setValue_arrayElement,yr.prototype._setValue_arrayElement_setNeedsUpdate,yr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[yr.prototype._setValue_fromArray,yr.prototype._setValue_fromArray_setNeedsUpdate,yr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class swe{constructor(){this.isAnimationObjectGroup=!0,this.uuid=cl(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let u=0,d=arguments.length;u!==d;++u){const h=arguments[u],f=h.uuid;let m=t[f];if(m===void 0){m=l++,t[f]=m,e.push(h);for(let g=0,v=o;g!==v;++g)s[g].push(new yr(h,r[g],i[g]))}else if(m<c){a=e[m];const g=--c,v=e[g];t[v.uuid]=m,e[m]=v,t[f]=g,e[g]=h;for(let y=0,A=o;y!==A;++y){const C=s[y],T=C[g];let x=C[m];C[m]=T,x===void 0&&(x=new yr(h,r[y],i[y])),C[g]=x}}else e[m]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,u=t[c];if(u!==void 0&&u>=s){const d=s++,h=e[d];t[h.uuid]=u,e[u]=h,t[c]=d,e[d]=l;for(let f=0,m=i;f!==m;++f){const g=r[f],v=g[d],y=g[u];g[u]=v,g[d]=y}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],u=c.uuid,d=t[u];if(d!==void 0)if(delete t[u],d<s){const h=--s,f=e[h],m=--o,g=e[m];t[f.uuid]=d,e[d]=f,t[g.uuid]=h,e[h]=g,e.pop();for(let v=0,y=i;v!==y;++v){const A=r[v],C=A[h],T=A[m];A[d]=C,A[h]=T,A.pop()}}else{const h=--o,f=e[h];h>0&&(t[f.uuid]=d),e[d]=f,e.pop();for(let m=0,g=i;m!==g;++m){const v=r[m];v[d]=v[h],v.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,d=new Array(c);i=s.length,r[e]=i,o.push(e),a.push(t),s.push(d);for(let h=u,f=l.length;h!==f;++h){const m=l[h];d[h]=new yr(m,e,t)}return d}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];t[c]=r,o[r]=l,o.pop(),s[r]=s[a],s.pop(),i[r]=i[a],i.pop()}}}class owe{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:am,endingEnd:am};for(let c=0;c!==o;++c){const u=s[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=JQ,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+r,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?t=0:(this._startTime=null,t=r*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case U6:for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);break;case D2:default:for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(o),c[u].accumulate(i,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===KQ;if(e===0)return s===-1?i:o&&(s&1)===1?t-i:i;if(r===z6){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const a=Math.floor(i/t);i-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=lm,i.endingEnd=lm):(e?i.endingStart=this.zeroSlopeAtStart?lm:am:i.endingStart=lS,t?i.endingEnd=this.zeroSlopeAtEnd?lm:am:i.endingEnd=lS)}_scheduleFading(e,t,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=r,this}}const awe=new Float32Array(1);class dx extends dh{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let d=0;d!==s;++d){const h=i[d],f=h.name;let m=u[f];if(m!==void 0)++m.referenceCount,o[d]=m;else{if(m=o[d],m!==void 0){m._cacheIndex===null&&(++m.referenceCount,this._addInactiveBinding(m,l,f));continue}const g=t&&t._propertyBindings[d].binding.parsedPath;m=new ZJ(yr.create(r,f,g),h.ValueTypeName,h.getValueSize()),++m.referenceCount,this._addInactiveBinding(m,l,f),o[d]=m}a[d].resultBuffer=m.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const d=a.actionByRoot,h=(e._localRoot||this._root).uuid;delete d[h],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new cD(new Float32Array(2),new Float32Array(2),1,awe),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=r,t[r]=s}clipAction(e,t,r){const i=t||this._root,s=i.uuid;let o=typeof e=="string"?Yg.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(r===void 0&&(o!==null?r=o.blendMode:r=D2),l!==void 0){const d=l.actionByRoot[s];if(d!==void 0&&d.blendMode===r)return d;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const u=new owe(this,o,t,r);return this._bindAction(u,c),this._addInactiveAction(u,a,s),u}existingAction(e,t){const r=t||this._root,i=r.uuid,s=typeof e=="string"?Yg.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==r;++c)t[c]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,d=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,d._cacheIndex=u,t[u]=d,t.pop(),this._removeInactiveBindingsForAction(c)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class SD{constructor(e){this.value=e}clone(){return new SD(this.value.clone===void 0?this.value:this.value.clone())}}let lwe=0;class cwe extends dh{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:lwe++}),this.name="",this.usage=cS,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let r=0,i=t.length;r<i;r++)this.uniforms.push(t[r].clone());return this}clone(){return new this.constructor().copy(this)}}class uwe extends SA{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class dwe{constructor(e,t,r,i,s){this.isGLBufferAttribute=!0,this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class eK{constructor(e,t,r=0,i=1/0){this.ray=new Ev(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new _m,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return ON(e,this,r,t),r.sort(SF),r}intersectObjects(e,t=!0,r=[]){for(let i=0,s=e.length;i<s;i++)ON(e[i],this,r,t);return r.sort(SF),r}}function SF(n,e){return n.distance-e.distance}function ON(n,e,t,r){if(n.layers.test(e.layers)&&n.raycast(e,t),r===!0){const i=n.children;for(let s=0,o=i.length;s<o;s++)ON(i[s],e,t,!0)}}class DN{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(ns(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class hwe{constructor(e=1,t=0,r=0){return this.radius=e,this.theta=t,this.y=r,this}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}const AF=new tt;class fwe{constructor(e=new tt(1/0,1/0),t=new tt(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=AF.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return AF.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const EF=new le,MC=new le;class pwe{constructor(e=new le,t=new le){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){EF.subVectors(e,this.start),MC.subVectors(this.end,this.start);const r=MC.dot(MC);let s=MC.dot(EF)/r;return t&&(s=ns(s,0,1)),s}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const CF=new le;class mwe extends pr{constructor(e,t){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;const r=new Jn,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,u=a/l*Math.PI*2;i.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}r.setAttribute("position",new Kt(i,3));const s=new Do({fog:!1,toneMapped:!1});this.cone=new Yc(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),CF.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(CF),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Wh=new le,RC=new xn,b3=new xn;class gwe extends Yc{constructor(e){const t=tK(e),r=new Jn,i=[],s=[],o=new Dt(0,0,1),a=new Dt(0,1,0);for(let c=0;c<t.length;c++){const u=t[c];u.parent&&u.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new Kt(i,3)),r.setAttribute("color",new Kt(s,3));const l=new Do({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");b3.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(RC.multiplyMatrices(b3,a.matrixWorld),Wh.setFromMatrixPosition(RC),i.setXYZ(o,Wh.x,Wh.y,Wh.z),RC.multiplyMatrices(b3,a.parent.matrixWorld),Wh.setFromMatrixPosition(RC),i.setXYZ(o+1,Wh.x,Wh.y,Wh.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function tK(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,tK(n.children[t]));return e}class vwe extends js{constructor(e,t,r){const i=new Iv(t,4,2),s=new rl({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.light.updateMatrixWorld(),this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const ywe=new le,wF=new Dt,TF=new Dt;class _we extends pr{constructor(e,t,r){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r;const i=new xv(t);i.rotateY(Math.PI*.5),this.material=new rl({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new wr(o,3)),this.add(new js(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");wF.copy(this.light.color),TF.copy(this.light.groundColor);for(let r=0,i=t.count;r<i;r++){const s=r<i/2?wF:TF;t.setXYZ(r,s.r,s.g,s.b)}t.needsUpdate=!0}e.lookAt(ywe.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Swe extends Yc{constructor(e=10,t=10,r=4473924,i=8947848){r=new Dt(r),i=new Dt(i);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let h=0,f=0,m=-a;h<=t;h++,m+=o){l.push(-a,0,m,a,0,m),l.push(m,0,-a,m,0,a);const g=h===s?r:i;g.toArray(c,f),f+=3,g.toArray(c,f),f+=3,g.toArray(c,f),f+=3,g.toArray(c,f),f+=3}const u=new Jn;u.setAttribute("position",new Kt(l,3)),u.setAttribute("color",new Kt(c,3));const d=new Do({vertexColors:!0,toneMapped:!1});super(u,d),this.type="GridHelper"}}class Awe extends Yc{constructor(e=10,t=16,r=8,i=64,s=4473924,o=8947848){s=new Dt(s),o=new Dt(o);const a=[],l=[];if(t>1)for(let d=0;d<t;d++){const h=d/t*(Math.PI*2),f=Math.sin(h)*e,m=Math.cos(h)*e;a.push(0,0,0),a.push(f,0,m);const g=d&1?s:o;l.push(g.r,g.g,g.b),l.push(g.r,g.g,g.b)}for(let d=0;d<r;d++){const h=d&1?s:o,f=e-e/r*d;for(let m=0;m<i;m++){let g=m/i*(Math.PI*2),v=Math.sin(g)*f,y=Math.cos(g)*f;a.push(v,0,y),l.push(h.r,h.g,h.b),g=(m+1)/i*(Math.PI*2),v=Math.sin(g)*f,y=Math.cos(g)*f,a.push(v,0,y),l.push(h.r,h.g,h.b)}}const c=new Jn;c.setAttribute("position",new Kt(a,3)),c.setAttribute("color",new Kt(l,3));const u=new Do({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}}const xF=new le,NC=new le,IF=new le;class Ewe extends pr{constructor(e,t,r){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,t===void 0&&(t=1);let i=new Jn;i.setAttribute("position",new Kt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Do({fog:!1,toneMapped:!1});this.lightPlane=new Zd(i,s),this.add(this.lightPlane),i=new Jn,i.setAttribute("position",new Kt([0,0,0,0,0,1],3)),this.targetLine=new Zd(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){xF.setFromMatrixPosition(this.light.matrixWorld),NC.setFromMatrixPosition(this.light.target.matrixWorld),IF.subVectors(NC,xF),this.lightPlane.lookAt(NC),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(NC),this.targetLine.scale.z=IF.length()}}const PC=new le,Li=new Kg;class Cwe extends Yc{constructor(e){const t=new Jn,r=new Do({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(m,g){l(m),l(g)}function l(m){i.push(0,0,0),s.push(0,0,0),o[m]===void 0&&(o[m]=[]),o[m].push(i.length/3-1)}t.setAttribute("position",new Kt(i,3)),t.setAttribute("color",new Kt(s,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new Dt(16755200),u=new Dt(16711680),d=new Dt(43775),h=new Dt(16777215),f=new Dt(3355443);this.setColors(c,u,d,h,f)}setColors(e,t,r,i,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,r=1,i=1;Li.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Zi("c",t,e,Li,0,0,-1),Zi("t",t,e,Li,0,0,1),Zi("n1",t,e,Li,-r,-i,-1),Zi("n2",t,e,Li,r,-i,-1),Zi("n3",t,e,Li,-r,i,-1),Zi("n4",t,e,Li,r,i,-1),Zi("f1",t,e,Li,-r,-i,1),Zi("f2",t,e,Li,r,-i,1),Zi("f3",t,e,Li,-r,i,1),Zi("f4",t,e,Li,r,i,1),Zi("u1",t,e,Li,r*.7,i*1.1,-1),Zi("u2",t,e,Li,-r*.7,i*1.1,-1),Zi("u3",t,e,Li,0,i*2,-1),Zi("cf1",t,e,Li,-r,0,1),Zi("cf2",t,e,Li,r,0,1),Zi("cf3",t,e,Li,0,-i,1),Zi("cf4",t,e,Li,0,i,1),Zi("cn1",t,e,Li,-r,0,-1),Zi("cn2",t,e,Li,r,0,-1),Zi("cn3",t,e,Li,0,-i,-1),Zi("cn4",t,e,Li,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Zi(n,e,t,r,i,s,o){PC.set(i,s,o).unproject(r);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let c=0,u=a.length;c<u;c++)l.setXYZ(a[c],PC.x,PC.y,PC.z)}}const OC=new np;class wwe extends Yc{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new Jn;s.setIndex(new wr(r,1)),s.setAttribute("position",new wr(i,3)),super(s,new Do({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&OC.setFromObject(this.object),OC.isEmpty())return;const t=OC.min,r=OC.max,i=this.geometry.attributes.position,s=i.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=t.x,s[4]=r.y,s[5]=r.z,s[6]=t.x,s[7]=t.y,s[8]=r.z,s[9]=r.x,s[10]=t.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=t.z,s[15]=t.x,s[16]=r.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=r.x,s[22]=t.y,s[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}}class Twe extends Yc{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Jn;s.setIndex(new wr(r,1)),s.setAttribute("position",new Kt(i,3)),super(s,new Do({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}}class xwe extends Zd{constructor(e,t=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Jn;o.setAttribute("position",new Kt(s,3)),o.computeBoundingSphere(),super(o,new Do({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Jn;l.setAttribute("position",new Kt(a,3)),l.computeBoundingSphere(),this.add(new js(l,new rl({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}}const bF=new le;let DC,M3;class Iwe extends pr{constructor(e=new le(0,0,1),t=new le(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",DC===void 0&&(DC=new Jn,DC.setAttribute("position",new Kt([0,0,0,0,1,0],3)),M3=new sp(0,.5,1,5,1),M3.translate(0,-.5,0)),this.position.copy(t),this.line=new Zd(DC,new Do({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new js(M3,new rl({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{bF.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(bF,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}}class bwe extends Yc{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Jn;i.setAttribute("position",new Kt(t,3)),i.setAttribute("color",new Kt(r,3));const s=new Do({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,r){const i=new Dt,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Mwe{constructor(){this.type="ShapePath",this.color=new Dt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new hS,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,s,o){return this.currentPath.bezierCurveTo(e,t,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(y){const A=[];for(let C=0,T=y.length;C<T;C++){const x=y[C],R=new Sm;R.curves=x.curves,A.push(R)}return A}function r(y,A){const C=A.length;let T=!1;for(let x=C-1,R=0;R<C;x=R++){let N=A[x],M=A[R],O=M.x-N.x,P=M.y-N.y;if(Math.abs(P)>Number.EPSILON){if(P<0&&(N=A[R],O=-O,M=A[x],P=-P),y.y<N.y||y.y>M.y)continue;if(y.y===N.y){if(y.x===N.x)return!0}else{const z=P*(y.x-N.x)-O*(y.y-N.y);if(z===0)return!0;if(z<0)continue;T=!T}}else{if(y.y!==N.y)continue;if(M.x<=y.x&&y.x<=N.x||N.x<=y.x&&y.x<=M.x)return!0}}return T}const i=Ou.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new Sm,l.curves=a.curves,c.push(l),c;let u=!i(s[0].getPoints());u=e?!u:u;const d=[],h=[];let f=[],m=0,g;h[m]=void 0,f[m]=[];for(let y=0,A=s.length;y<A;y++)a=s[y],g=a.getPoints(),o=i(g),o=e?!o:o,o?(!u&&h[m]&&m++,h[m]={s:new Sm,p:g},h[m].s.curves=a.curves,u&&m++,f[m]=[]):f[m].push({h:a,p:g[0]});if(!h[0])return t(s);if(h.length>1){let y=!1,A=0;for(let C=0,T=h.length;C<T;C++)d[C]=[];for(let C=0,T=h.length;C<T;C++){const x=f[C];for(let R=0;R<x.length;R++){const N=x[R];let M=!0;for(let O=0;O<h.length;O++)r(N.p,h[O].p)&&(C!==O&&A++,M?(M=!1,d[O].push(N)):y=!0);M&&d[C].push(N)}}A>0&&y===!1&&(f=d)}let v;for(let y=0,A=h.length;y<A;y++){l=h[y].s,c.push(l),v=f[y];for(let C=0,T=v.length;C<T;C++)l.holes.push(v[C].h)}return c}}const Md=Rwe();function Rwe(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):c<-14?(r[l]=1024>>-c-14,r[l|256]=1024>>-c-14|32768,i[l]=-c-1,i[l|256]=-c-1):c<=15?(r[l]=c+15<<10,r[l|256]=c+15<<10|32768,i[l]=13,i[l|256]=13):c<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function Nwe(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=ns(n,-65504,65504),Md.floatView[0]=n;const e=Md.uint32View[0],t=e>>23&511;return Md.baseTable[t]+((e&8388607)>>Md.shiftTable[t])}function Pwe(n){const e=n>>10;return Md.uint32View[0]=Md.mantissaTable[Md.offsetTable[e]+(n&1023)]+Md.exponentTable[e],Md.floatView[0]}var g_=Object.freeze({__proto__:null,toHalfFloat:Nwe,fromHalfFloat:Pwe});function Owe(){console.error("THREE.ImmediateRenderObject has been removed.")}class Dwe extends nc{constructor(e,t,r){console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'),super(e,t,r),this.samples=4}}class Lwe extends yA{constructor(e,t,r,i){console.warn("THREE.DataTexture2DArray has been renamed to DataArrayTexture."),super(e,t,r,i)}}class kwe extends L2{constructor(e,t,r,i){console.warn("THREE.DataTexture3D has been renamed to Data3DTexture."),super(e,t,r,i)}}class Bwe extends ip{constructor(e,t,r,i,s,o){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,t,r,i,s,o)}}class Fwe extends CA{constructor(e,t,r,i){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,t,r,i)}}class zwe extends wA{constructor(e,t,r,i){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,t,r,i)}}class Uwe extends TA{constructor(e,t,r,i,s,o,a){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,t,r,i,s,o,a)}}class jwe extends sp{constructor(e,t,r,i,s,o,a,l){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,t,r,i,s,o,a,l)}}class Gwe extends xA{constructor(e,t){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,t)}}class Hwe extends IA{constructor(e,t){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,t)}}class Vwe extends bA{constructor(e,t){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,t)}}class $we extends Tv{constructor(e,t,r,i){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,t,r,i)}}class Wwe extends xv{constructor(e,t){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,t)}}class qwe extends Cv{constructor(e,t,r,i){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,t,r,i)}}class Qwe extends hh{constructor(e,t,r,i){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,t,r,i)}}class Jwe extends MA{constructor(e,t,r,i,s,o){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,t,r,i,s,o)}}class Kwe extends RA{constructor(e,t){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,t)}}class Ywe extends Iv{constructor(e,t,r,i,s,o,a){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,t,r,i,s,o,a)}}class Xwe extends NA{constructor(e,t){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,t)}}class Zwe extends PA{constructor(e,t,r,i,s){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,t,r,i,s)}}class eTe extends OA{constructor(e,t,r,i,s,o){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,t,r,i,s,o)}}class tTe extends DA{constructor(e,t,r,i,s){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,t,r,i,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:gA}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=gA);const nK=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:B6,AddEquation:tm,AddOperation:MQ,AdditiveAnimationBlendMode:U6,AdditiveBlending:Z4,AlphaFormat:zQ,AlwaysDepth:EQ,AlwaysStencilFunc:tJ,AmbientLight:WJ,AmbientLightProbe:HCe,AnimationClip:Yg,AnimationLoader:DCe,AnimationMixer:dx,AnimationObjectGroup:swe,AnimationUtils:RCe,ArcCurve:SJ,ArrayCamera:fJ,ArrowHelper:Iwe,Audio:XJ,AudioAnalyser:JCe,AudioContext:gD,AudioListener:WCe,AudioLoader:jCe,AxesHelper:bwe,BackSide:ll,BasicDepthPacking:XQ,BasicShadowMap:u1e,Bone:j2,BooleanKeyframeTrack:Km,Box2:fwe,Box3:np,Box3Helper:Twe,BoxBufferGeometry:Bwe,BoxGeometry:ip,BoxHelper:wwe,BufferAttribute:wr,BufferGeometry:Jn,BufferGeometryLoader:KJ,ByteType:DQ,Cache:Lm,Camera:Kg,CameraHelper:Cwe,CanvasTexture:eCe,CapsuleBufferGeometry:Fwe,CapsuleGeometry:CA,CatmullRomCurve3:AJ,CineonToneMapping:PQ,CircleBufferGeometry:zwe,CircleGeometry:wA,ClampToEdgeWrapping:Ro,Clock:vD,Color:Dt,ColorKeyframeTrack:uD,ColorManagement:Dl,CompressedTexture:_J,CompressedTextureLoader:LCe,ConeBufferGeometry:Uwe,ConeGeometry:TA,CubeCamera:oJ,CubeReflectionMapping:Xd,CubeRefractionMapping:Lf,CubeTexture:_A,CubeTextureLoader:GJ,CubeUVReflectionMapping:Av,CubicBezierCurve:nD,CubicBezierCurve3:EJ,CubicInterpolant:zJ,CullFaceBack:X4,CullFaceFront:lQ,CullFaceFrontBack:c1e,CullFaceNone:aQ,Curve:Xc,CurvePath:wJ,CustomBlending:cQ,CustomToneMapping:OQ,CylinderBufferGeometry:jwe,CylinderGeometry:sp,Cylindrical:hwe,Data3DTexture:L2,DataArrayTexture:yA,DataTexture:wg,DataTexture2DArray:Lwe,DataTexture3D:kwe,DataTextureLoader:HJ,DataUtils:g_,DecrementStencilOp:_1e,DecrementWrapStencilOp:A1e,DefaultLoadingManager:dg,DepthFormat:bf,DepthStencilFormat:Rm,DepthTexture:pJ,DirectionalLight:mD,DirectionalLightHelper:Ewe,DiscreteInterpolant:UJ,DodecahedronBufferGeometry:Gwe,DodecahedronGeometry:xA,DoubleSide:xu,DstAlphaFactor:gQ,DstColorFactor:yQ,DynamicCopyUsage:k1e,DynamicDrawUsage:R1e,DynamicReadUsage:O1e,EdgesGeometry:TJ,EllipseCurve:H2,EqualDepth:wQ,EqualStencilFunc:T1e,EquirectangularReflectionMapping:Wg,EquirectangularRefractionMapping:sS,Euler:Jm,EventDispatcher:dh,ExtrudeBufferGeometry:Hwe,ExtrudeGeometry:IA,FileLoader:dl,Float16BufferAttribute:gye,Float32BufferAttribute:Kt,Float64BufferAttribute:vye,FloatType:nl,Fog:z2,FogExp2:F2,FramebufferTexture:ZEe,FrontSide:Df,Frustum:k2,GLBufferAttribute:dwe,GLSL1:F1e,GLSL3:TN,GreaterDepth:xQ,GreaterEqualDepth:TQ,GreaterEqualStencilFunc:M1e,GreaterStencilFunc:I1e,GridHelper:Swe,Group:Bd,HalfFloatType:kc,HemisphereLight:$J,HemisphereLightHelper:_we,HemisphereLightProbe:GCe,IcosahedronBufferGeometry:Vwe,IcosahedronGeometry:bA,ImageBitmapLoader:YJ,ImageLoader:gS,ImageUtils:H6,ImmediateRenderObject:Owe,IncrementStencilOp:y1e,IncrementWrapStencilOp:S1e,InstancedBufferAttribute:Pm,InstancedBufferGeometry:JJ,InstancedInterleavedBuffer:uwe,InstancedMesh:X6,Int16BufferAttribute:pye,Int32BufferAttribute:mye,Int8BufferAttribute:dye,IntType:kQ,InterleavedBuffer:SA,InterleavedBufferAttribute:Ff,Interpolant:Mv,InterpolateDiscrete:Qg,InterpolateLinear:Nm,InterpolateSmooth:hT,InvertStencilOp:E1e,KeepStencilOp:fT,KeyframeTrack:Zc,LOD:yJ,LatheBufferGeometry:$we,LatheGeometry:Tv,Layers:_m,LessDepth:CQ,LessEqualDepth:ax,LessEqualStencilFunc:x1e,LessStencilFunc:w1e,Light:op,LightProbe:W2,Line:Zd,Line3:pwe,LineBasicMaterial:Do,LineCurve:V2,LineCurve3:CJ,LineDashedMaterial:BJ,LineLoop:Z6,LineSegments:Yc,LinearEncoding:Bu,LinearFilter:li,LinearInterpolant:cD,LinearMipMapLinearFilter:p1e,LinearMipMapNearestFilter:f1e,LinearMipmapLinearFilter:uh,LinearMipmapNearestFilter:O2,LinearSRGBColorSpace:mf,LinearToneMapping:RQ,Loader:fa,LoaderUtils:Mf,LoadingManager:dD,LoopOnce:z6,LoopPingPong:KQ,LoopRepeat:JQ,LuminanceAlphaFormat:GQ,LuminanceFormat:jQ,MOUSE:Kp,Material:Rs,MaterialLoader:q2,MathUtils:kd,Matrix3:La,Matrix4:xn,MaxEquation:rN,Mesh:js,MeshBasicMaterial:rl,MeshDepthMaterial:Q6,MeshDistanceMaterial:J6,MeshLambertMaterial:LJ,MeshMatcapMaterial:kJ,MeshNormalMaterial:DJ,MeshPhongMaterial:PJ,MeshPhysicalMaterial:ac,MeshStandardMaterial:bv,MeshToonMaterial:OJ,MinEquation:nN,MirroredRepeatWrapping:qg,MixOperation:bQ,MultiplyBlending:tN,MultiplyOperation:vA,NearestFilter:ts,NearestMipMapLinearFilter:h1e,NearestMipMapNearestFilter:d1e,NearestMipmapLinearFilter:aS,NearestMipmapNearestFilter:oS,NeverDepth:AQ,NeverStencilFunc:C1e,NoBlending:jd,NoColorSpace:m1e,NoToneMapping:zc,NormalAnimationBlendMode:D2,NormalBlending:mm,NotEqualDepth:IQ,NotEqualStencilFunc:b1e,NumberKeyframeTrack:Om,Object3D:pr,ObjectLoader:zCe,ObjectSpaceNormalMap:eJ,OctahedronBufferGeometry:Wwe,OctahedronGeometry:xv,OneFactor:fQ,OneMinusDstAlphaFactor:vQ,OneMinusDstColorFactor:_Q,OneMinusSrcAlphaFactor:k6,OneMinusSrcColorFactor:mQ,OrthographicCamera:Uc,PCFShadowMap:O6,PCFSoftShadowMap:D6,PMREMGenerator:IN,Path:hS,PerspectiveCamera:gi,Plane:Id,PlaneBufferGeometry:qwe,PlaneGeometry:Cv,PlaneHelper:xwe,PointLight:pD,PointLightHelper:vwe,Points:eD,PointsMaterial:G2,PolarGridHelper:Awe,PolyhedronBufferGeometry:Qwe,PolyhedronGeometry:hh,PositionalAudio:QCe,PropertyBinding:yr,PropertyMixer:ZJ,QuadraticBezierCurve:rD,QuadraticBezierCurve3:iD,Quaternion:Hs,QuaternionKeyframeTrack:Uf,QuaternionLinearInterpolant:jJ,REVISION:gA,RGBADepthPacking:ZQ,RGBAFormat:Wl,RGBAIntegerFormat:qQ,RGBA_ASTC_10x10_Format:AN,RGBA_ASTC_10x5_Format:yN,RGBA_ASTC_10x6_Format:_N,RGBA_ASTC_10x8_Format:SN,RGBA_ASTC_12x10_Format:EN,RGBA_ASTC_12x12_Format:CN,RGBA_ASTC_4x4_Format:uN,RGBA_ASTC_5x4_Format:dN,RGBA_ASTC_5x5_Format:hN,RGBA_ASTC_6x5_Format:fN,RGBA_ASTC_6x6_Format:pN,RGBA_ASTC_8x5_Format:mN,RGBA_ASTC_8x6_Format:gN,RGBA_ASTC_8x8_Format:vN,RGBA_BPTC_Format:wN,RGBA_ETC2_EAC_Format:cN,RGBA_PVRTC_2BPPV1_Format:aN,RGBA_PVRTC_4BPPV1_Format:oN,RGBA_S3TC_DXT1_Format:cT,RGBA_S3TC_DXT3_Format:uT,RGBA_S3TC_DXT5_Format:dT,RGBFormat:UQ,RGB_ETC1_Format:QQ,RGB_ETC2_Format:lN,RGB_PVRTC_2BPPV1_Format:sN,RGB_PVRTC_4BPPV1_Format:iN,RGB_S3TC_DXT1_Format:lT,RGFormat:$Q,RGIntegerFormat:WQ,RawShaderMaterial:NJ,Ray:Ev,Raycaster:eK,RectAreaLight:qJ,RedFormat:HQ,RedIntegerFormat:VQ,ReinhardToneMapping:NQ,RepeatWrapping:kf,ReplaceStencilOp:v1e,ReverseSubtractEquation:dQ,RingBufferGeometry:Jwe,RingGeometry:MA,SRGBColorSpace:Eu,Scene:U2,ShaderChunk:tr,ShaderLib:Pc,ShaderMaterial:Vc,ShadowMaterial:RJ,Shape:Sm,ShapeBufferGeometry:Kwe,ShapeGeometry:RA,ShapePath:Mwe,ShapeUtils:Ou,ShortType:LQ,Skeleton:EA,SkeletonHelper:gwe,SkinnedMesh:AA,Source:cm,Sphere:rp,SphereBufferGeometry:Ywe,SphereGeometry:Iv,Spherical:DN,SphericalHarmonics3:QJ,SplineCurve:sD,SpotLight:fD,SpotLightHelper:mwe,Sprite:vJ,SpriteMaterial:Y6,SrcAlphaFactor:L6,SrcAlphaSaturateFactor:SQ,SrcColorFactor:pQ,StaticCopyUsage:L1e,StaticDrawUsage:cS,StaticReadUsage:P1e,StereoCamera:VCe,StreamCopyUsage:B1e,StreamDrawUsage:N1e,StreamReadUsage:D1e,StringKeyframeTrack:Ym,SubtractEquation:uQ,SubtractiveBlending:eN,TOUCH:Yp,TangentSpaceNormalMap:tp,TetrahedronBufferGeometry:Xwe,TetrahedronGeometry:NA,Texture:Vi,TextureLoader:VJ,TorusBufferGeometry:Zwe,TorusGeometry:PA,TorusKnotBufferGeometry:eTe,TorusKnotGeometry:OA,Triangle:Gl,TriangleFanDrawMode:lx,TriangleStripDrawMode:j6,TrianglesDrawMode:YQ,TubeBufferGeometry:tTe,TubeGeometry:DA,UVMapping:P2,Uint16BufferAttribute:V6,Uint32BufferAttribute:$6,Uint8BufferAttribute:hye,Uint8ClampedBufferAttribute:fye,Uniform:SD,UniformsGroup:cwe,UniformsLib:It,UniformsUtils:sJ,UnsignedByteType:Bf,UnsignedInt248Type:gm,UnsignedIntType:pf,UnsignedShort4444Type:BQ,UnsignedShort5551Type:FQ,UnsignedShortType:F6,VSMShadowMap:ag,Vector2:tt,Vector3:le,Vector4:Br,VectorKeyframeTrack:Dm,VideoTexture:XEe,WebGL1Renderer:mJ,WebGL3DRenderTarget:tye,WebGLArrayRenderTarget:eye,WebGLCubeRenderTarget:W6,WebGLMultipleRenderTargets:nye,WebGLMultisampleRenderTarget:Dwe,WebGLRenderTarget:nc,WebGLRenderer:K6,WebGLUtils:hJ,WireframeGeometry:MJ,WrapAroundEnding:lS,ZeroCurvatureEnding:am,ZeroFactor:hQ,ZeroSlopeEnding:lm,ZeroStencilOp:g1e,_SRGBAFormat:cx,sRGBEncoding:ai},Symbol.toStringTag,{value:"Module"})),Tg=()=>{let n=!1;if("maxTouchPoints"in navigator)n=navigator.maxTouchPoints>0;else if("msMaxTouchPoints"in navigator)n=navigator.msMaxTouchPoints>0;else{const t=window&&"matchMedia"in window&&matchMedia("(pointer:coarse)");if(t&&t.media==="(pointer:coarse)")n=!!t.matches;else if("orientation"in window)n=!0;else{var e=navigator==null?void 0:navigator.userAgent;n=/\b(BlackBerry|webOS|iPhone|IEMobile)\b/i.test(e)||/\b(Android|Windows Phone|iPad|iPod)\b/i.test(e)}}return n},nTe=()=>{var n;let e=((n=navigator==null?void 0:navigator.userAgentData)===null||n===void 0?void 0:n.platform)||(navigator==null?void 0:navigator.platform)||"unknown",t=(navigator==null?void 0:navigator.userAgent)||"unknown";return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(e)||t.includes("Mac")&&"ontouchend"in document},rTe=()=>{var n;return(((n=navigator==null?void 0:navigator.userAgentData)===null||n===void 0?void 0:n.platform)||(navigator==null?void 0:navigator.platform)||"unknown").toLowerCase()==="android"||navigator.userAgent.includes("Android")},AD=/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$_:;|,~+=\{\}\[\]%^&*-]).{8,}$/,vS=/^\w+([.-]?[+]?\w+)*@\w+([.-]?\w+)*(\.\w{2,})+$/,MF=/^(?!.*\.\.)(?!.*\.$)[^\W][\w.+-]{2,32}$/;function iTe(n,e){const t=D.useRef(),r=D.useRef(null);return D.useEffect(()=>(r.current=n,()=>{r.current=null}),[n]),D.useEffect(()=>()=>{clearTimeout(t.current)},[]),D.useMemo(()=>(...i)=>{clearTimeout(t.current),t.current=window.setTimeout(()=>{r.current&&r.current(...i)},e)},[e])}const RF=n=>n.slice(0,n.length/2).trim().toLowerCase()===n.slice(n.length/2+1).trim().toLowerCase()?n.slice(0,n.length/2):n,sTe=n=>n.replaceAll(/[^\p{L}\p{N}\p{P}\p{Z}^$\n]/gu,"").trim(),oTe=n=>(n=n.replaceAll(/```*?```/g,""),n=n.replaceAll(/```[\s\S]*?```/g,""),n=n.replaceAll(/`[^`]*`/g,""),n=n.replaceAll(/!\[[^\]]*\]\([^)]*\)/g,""),n=n.replaceAll(/\[([^\]]*)\]\([^)]*\)/g,"$1"),n=n.replaceAll(/^> /gm,""),n=n.replaceAll(/^#+ /gm,""),n=n.replaceAll(/[*_]/g,""),n=n.replaceAll(/---/g,""),n=n.replaceAll(/~~/g,""),n=n.replaceAll(/^\s*[-*+] /gm,""),n=n.replaceAll(/^\s*\d+\.\s+/gm,""),n=n.replaceAll(/^\|.*\|$/gm,""),n=n.replaceAll(/\$\$[\s\S]*?\$\$/g,""),n=n.replaceAll(/\$[\s\S]*?\$/g,""),n=n.replaceAll(/\\\([\s\S]*?\\\)/g,""),n=n.replaceAll(/\\\[[\s\S]*?\\\]/g,""),n=n.replaceAll(/\s+/g," ").trim(),n),ED=n=>{const e=/<output.*?<\/output>/gs;if(!e.test(n))return n;const t=n.replace(e,"");return ED(t)},rK=n=>{const e=document.createElement("div");return e.innerHTML=n,e.textContent||""},aTe=n=>{const e=document.createElement("textarea");return e.textContent=n,e.innerHTML};function lTe(n){try{n=encodeURI(n).replace(/%25/g,"%")}catch{return null}return n}const cTe={startup:{elements:[".memori-chat--bubble-content"]},options:{processHtmlClass:"memori-chat--bubble-content"},tex:{inlineMath:[["$","$"],["\\$","\\$"]],displayMath:[["$$","$$"]],processEscapes:!0},asciimath:{fixphi:!0,displaystyle:!0,decimalsign:"."},skipStartupTypeset:!0,chtml:{displayAlign:"left"},svg:{fontCache:"global"}},uTe=()=>{const n=document.createElement("script");n.src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js",n.async=!0,n.id="mathjax-script",document.head.appendChild(n)},dTe=()=>{window.MathJax=cTe,uTe()};function hTe(n){Object.values(n).forEach(e=>{e instanceof bv&&(e.roughness=.8,e.metalness=.1,e.shadowSide=2,e.map&&(e.map.anisotropy=16))})}function fTe(n){return n.isSkinnedMesh===!0}const pTe=({center:n,size:e})=>{const t=l1e();return D.useEffect(()=>{const r=new R6.Circle(n,e),i=t.layerContainer||t.map;return i.addLayer(r),()=>{i.removeLayer(r)}}),null},mTe=({center:n,uncertainty:e})=>{const[t,r]=D.useState(!1),i=t1e(),s=D.useCallback(()=>{let o=e!==void 0?Math.round(Math.log2(1e7/e)):i.getZoom();i.setView(n,o)},[n,e,i]);return D.useEffect(()=>{t||(s(),r(!0))},[]),D.useEffect(()=>{s()},[n,e,s]),null};let iK=R6.icon({iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12.5,20.5],shadowAnchor:[12.5,20.5]});R6.Marker.prototype.options.icon=iK;const R3=n=>{let e="Position";return n!=null&&n.address?e=[n.address.village||n.address.suburb,n.address.town||n.address.city||n.address.county||n.address.state,n.address.country].filter(Boolean).filter((t,r,i)=>i.indexOf(t)===r).join(", "):n!=null&&n.display_name&&(e=n.display_name),e},gTe=({venue:n,setVenue:e,showUncertainty:t=!1,showGpsButton:r=!0,saveAndClose:i})=>{var s,o,a;const{t:l}=ur(),[c,u]=D.useState(!1),[d,h]=D.useState(!1),[f,m]=D.useState(!1),[g,v]=D.useState(""),[y,A]=D.useState([]),C=async()=>{h(!0),navigator.geolocation.getCurrentPosition(async N=>{let M={latitude:N.coords.latitude,longitude:N.coords.longitude,placeName:"Position",uncertainty:N.coords.accuracy/1e3};try{const P=await(await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${N.coords.latitude}&lon=${N.coords.longitude}&format=jsonv2&addressdetails=1`)).json(),z=R3(P);M={latitude:N.coords.latitude,longitude:N.coords.longitude,placeName:z,uncertainty:N.coords.accuracy/1e3},e(M)}catch(O){let P=O;console.error("[POSITION ERROR]",P),P!=null&&P.message&&kn.error(P.message),e(M)}finally{i&&i(M)}h(!1)},N=>{console.error("[POSITION ERROR]",N),kn.error(N.message),h(!1)})},T=iTe(async N=>{m(!0);try{let O=await(await fetch(`https://nominatim.openstreetmap.org/search?q=${N}&format=jsonv2&limit=5&addressdetails=1`)).json();A(O)}catch(M){console.error(M)}finally{m(!1)}},1e3),x=N=>{console.log(N);const M=R3(N);e({latitude:N.lat,longitude:N.lon,placeName:M,uncertainty:N!=null&&N.boundingbox?Gve(N.boundingbox):2})},R=N=>{v(N),T(N)};return D.useEffect(()=>{u(!0)},[]),D.useEffect(()=>{const N=document.createElement("link");return N.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",N.rel="stylesheet",N.integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=",N.crossOrigin="",document.head.appendChild(N),()=>{document.head.removeChild(N)}},[]),w.jsxs("fieldset",{className:"memori--venue-widget",children:[w.jsx("legend",{className:"sr-only",children:"Venue"}),w.jsxs("div",{className:"memori--venue-widget__form-item",children:[w.jsx("div",{className:"memori--venue-widget__geosuggest",children:d?w.jsx("p",{children:l("write_and_speak.updatingPosition")}):w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"memori--venue-widget-search",children:w.jsxs(p_,{value:n!=null&&n.latitude&&(n!=null&&n.longitude)?{place_id:0,lat:n==null?void 0:n.latitude,lon:n==null?void 0:n.longitude,display_name:n==null?void 0:n.placeName}:void 0,onChange:x,children:[w.jsx(p_.Input,{className:"memori--venue-widget-search--input",displayValue:N=>N?R3(N):"",placeholder:l("searchVenue"),onChange:N=>R(N.target.value)}),(f||y.length>0||y.length===0&&g!=="")&&w.jsx(Zr,{as:D.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:w.jsx(p_.Options,{className:"memori--venue-widget-search--options",children:f?w.jsx(vl,{spinning:!0,children:w.jsxs("center",{className:"memori--venue-widget-search--option",children:[l("loading"),"..."]})}):y.length===0&&g!==""?w.jsx("center",{className:"memori--venue-widget-search--option",children:l("nothingFound")}):y==null?void 0:y.map(N=>w.jsx(p_.Option,{as:D.Fragment,value:N,children:({active:M,selected:O})=>w.jsx("li",{className:er("memori--venue-widget-search--option",{"memori--venue-widget-search--option-active":M,"memori--venue-widget-search--option-selected":O}),children:N.display_name})},N.place_id))})})]})}),r&&w.jsx(Pt,{className:"memori--venue-widget__gps-button",primary:!0,loading:d,onClick:()=>{h(!0),C()},children:l("write_and_speak.useMyPosition")})]})}),w.jsx("div",{children:w.jsx(Pt,{outlined:!0,className:"memori--venue-widget__no-location-button",onClick:()=>{let N={latitude:0,longitude:0,placeName:"Position",uncertainty:0};e(N),i&&i(N)},children:l("write_and_speak.dontWantToProvidePosition")})}),t&&w.jsxs("label",{className:"memori--venue-widget__select-label",children:[w.jsxs("span",{children:[l("uncertain"),": "]}),w.jsxs("select",{className:"memori-select--button memori--venue-widget__uncertainty",value:parseFloat(((s=n==null?void 0:n.uncertainty)!==null&&s!==void 0?s:0).toFixed(2)),disabled:!n||!n.placeName||!n.latitude||!n.longitude,onChange:N=>{e({...n,uncertainty:parseFloat(N.target.value)})},children:[(n==null?void 0:n.uncertainty)&&![0,1,2,5,10,20,50,100].includes(n.uncertainty)&&w.jsxs("option",{value:n.uncertainty,children:[n.uncertainty," Km"]}),w.jsx("option",{value:0,children:l("exactPosition")}),w.jsx("option",{value:1,children:"1 km"}),w.jsx("option",{value:2,children:"2 km"}),w.jsx("option",{value:5,children:"5 km"}),w.jsx("option",{value:10,children:"10 km"}),w.jsx("option",{value:20,children:"20 km"}),w.jsx("option",{value:50,children:"50 km"}),w.jsx("option",{value:100,children:"100 km"})]})]})]}),w.jsxs("div",{className:"memori--venue-widget__form-item",children:[(n==null?void 0:n.placeName)&&n.placeName!=="Position"&&w.jsxs("p",{className:"memori--venue--widget__place-name",children:[w.jsx("strong",{children:l("venue")}),": ",n.placeName]}),w.jsx("div",{className:"memori--venue-widget__map",children:c&&w.jsxs(r1e,{className:"memori--venue-widget__map",center:n!=null&&n.latitude&&(n!=null&&n.longitude)?[n.latitude,n.longitude]:[44.66579,11.48823],zoom:13,scrollWheelZoom:!0,children:[w.jsx(o1e,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),w.jsx(mTe,{center:n!=null&&n.latitude&&(n!=null&&n.longitude)?[n.latitude,n.longitude]:[44.66579,11.48823],uncertainty:((o=n==null?void 0:n.uncertainty)!==null&&o!==void 0?o:0)*1e3}),(n==null?void 0:n.latitude)&&(n==null?void 0:n.longitude)&&w.jsx(i1e,{position:[n.latitude,n.longitude],icon:iK,children:w.jsx(s1e,{children:(a=n.placeName)!==null&&a!==void 0?a:""})}),(n==null?void 0:n.latitude)&&(n==null?void 0:n.longitude)&&(n==null?void 0:n.uncertainty)!==void 0&&w.jsx(pTe,{center:[n.latitude,n.longitude],size:n.uncertainty*1e3})]})})]})]})},vTe=({memori:n,open:e,onClose:t,venue:r,setVenue:i})=>{const{t:s}=ur();return w.jsxs(Sv,{className:"memori-position-drawer",open:e,onClose:()=>t(r),title:s("widget.position")||"Position",animated:!1,children:[w.jsx("p",{children:s("write_and_speak.requirePositionHelp",{name:n.name})}),w.jsx(gTe,{venue:r,setVenue:i,showUncertainty:!1,saveAndClose:o=>{i(o),t(o)}})]})},yS=({open:n=!1,onClose:e,className:t,title:r,description:i,children:s,footer:o,loading:a=!1,closable:l=!0,width:c="100%",widthMd:u="100%"})=>{const{t:d}=ur();return w.jsx(Zr,{appear:!0,show:n,as:ht.Fragment,children:w.jsxs(Dd,{open:n,onClose:e,className:er("memori-modal",t),children:[w.jsx(Zr.Child,{as:ht.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:w.jsx("div",{className:"memori-modal--backdrop"})}),w.jsx("div",{className:"memori-modal--container",children:w.jsx("div",{className:"memori-modal--container-scrollable",children:w.jsx(Zr.Child,{as:ht.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:w.jsxs(Dd.Panel,{className:"memori-modal--panel",children:[w.jsx("style",{dangerouslySetInnerHTML:{__html:`
                    .memori-modal--panel {
                      --memori-modal--width: ${c};
                      --memori-modal--width-md: ${u};
                    }
                  `}}),l&&w.jsx("div",{className:"memori-modal--close",children:w.jsx(Pt,{ghost:!0,padded:!0,shape:"circle",icon:w.jsx(pA,{}),title:d("close")||"Close",onClick:()=>e(!1)})}),w.jsxs(vl,{spinning:a,children:[r&&w.jsx(Dd.Title,{className:"memori-modal--title",children:r}),i&&w.jsx(Dd.Description,{className:"memori-modal--description",children:i}),s,o&&w.jsx("div",{className:"memori-modal--footer",children:o})]})]})})})})]})})};var LA=n=>n.type==="checkbox",hg=n=>n instanceof Date,ta=n=>n==null;const sK=n=>typeof n=="object";var so=n=>!ta(n)&&!Array.isArray(n)&&sK(n)&&!hg(n),yTe=n=>so(n)&&n.target?LA(n.target)?n.target.checked:n.target.value:n,_Te=n=>n.substring(0,n.search(/\.\d+(\.|$)/))||n,STe=(n,e)=>n.has(_Te(e)),kA=n=>Array.isArray(n)?n.filter(Boolean):[],zs=n=>n===void 0,Yt=(n,e,t)=>{if(!e||!so(n))return t;const r=kA(e.split(/[,[\].]+?/)).reduce((i,s)=>ta(i)?i:i[s],n);return zs(r)||r===n?zs(n[e])?t:n[e]:r};const NF={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Dc={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},yd={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};ht.createContext(null);var ATe=(n,e,t,r=!0)=>{const i={defaultValues:e._defaultValues};for(const s in n)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==Dc.all&&(e._proxyFormState[o]=!r||Dc.all),t&&(t[o]=!0),n[o]}});return i},Bl=n=>so(n)&&!Object.keys(n).length,ETe=(n,e,t)=>{const{name:r,...i}=n;return Bl(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(s=>e[s]===(!t||Dc.all))},N3=n=>Array.isArray(n)?n:[n];function CTe(n){const e=ht.useRef(n);e.current=n,ht.useEffect(()=>{const t=!n.disabled&&e.current.subject.subscribe({next:e.current.callback});return()=>{t&&t.unsubscribe()}},[n.disabled])}var Iu=n=>typeof n=="string",wTe=(n,e,t,r)=>Iu(n)?(r&&e.watch.add(n),Yt(t,n)):Array.isArray(n)?n.map(i=>(r&&e.watch.add(i),Yt(t,i))):(e.watchAll=!!r,t),TTe=n=>{const e=n.constructor&&n.constructor.prototype;return so(e)&&e.hasOwnProperty("isPrototypeOf")},LN=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Zp(n){let e;const t=Array.isArray(n);if(n instanceof Date)e=new Date(n);else if(n instanceof Set)e=new Set(n);else if(!(LN&&(n instanceof Blob||n instanceof FileList))&&(t||so(n)))if(e=t?[]:{},!Array.isArray(n)&&!TTe(n))e=n;else for(const r in n)e[r]=Zp(n[r]);else return n;return e}var xTe=(n,e,t,r,i)=>e?{...t[n],types:{...t[n]&&t[n].types?t[n].types:{},[r]:i||!0}}:{},CD=n=>/^\w*$/.test(n),oK=n=>kA(n.replace(/["|']|\]/g,"").split(/\.|\[/));function hi(n,e,t){let r=-1;const i=CD(e)?[e]:oK(e),s=i.length,o=s-1;for(;++r<s;){const a=i[r];let l=t;if(r!==o){const c=n[a];l=so(c)||Array.isArray(c)?c:isNaN(+i[r+1])?{}:[]}n[a]=l,n=n[a]}return n}const kN=(n,e,t)=>{for(const r of t||Object.keys(n)){const i=Yt(n,r);if(i){const{_f:s,...o}=i;if(s&&e(s.name)){if(s.ref.focus){s.ref.focus();break}else if(s.refs&&s.refs[0].focus){s.refs[0].focus();break}}else so(o)&&kN(o,e)}}};var PF=(n,e,t)=>!t&&(e.watchAll||e.watch.has(n)||[...e.watch].some(r=>n.startsWith(r)&&/^\.\w+/.test(n.slice(r.length)))),ITe=(n,e,t)=>{const r=kA(Yt(n,t));return hi(r,"root",e[t]),hi(n,t,r),n},xg=n=>typeof n=="boolean",wD=n=>n.type==="file",hx=n=>typeof n=="function",gT=n=>Iu(n)||ht.isValidElement(n),TD=n=>n.type==="radio",fx=n=>n instanceof RegExp;const OF={value:!1,isValid:!1},DF={value:!0,isValid:!0};var aK=n=>{if(Array.isArray(n)){if(n.length>1){const e=n.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:e,isValid:!!e.length}}return n[0].checked&&!n[0].disabled?n[0].attributes&&!zs(n[0].attributes.value)?zs(n[0].value)||n[0].value===""?DF:{value:n[0].value,isValid:!0}:DF:OF}return OF};const LF={isValid:!1,value:null};var lK=n=>Array.isArray(n)?n.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,LF):LF;function kF(n,e,t="validate"){if(gT(n)||Array.isArray(n)&&n.every(gT)||xg(n)&&!n)return{type:t,message:gT(n)?n:"",ref:e}}var U0=n=>so(n)&&!fx(n)?n:{value:n,message:""},BF=async(n,e,t,r,i)=>{const{ref:s,refs:o,required:a,maxLength:l,minLength:c,min:u,max:d,pattern:h,validate:f,name:m,valueAsNumber:g,mount:v,disabled:y}=n._f;if(!v||y)return{};const A=o?o[0]:s,C=z=>{r&&A.reportValidity&&(A.setCustomValidity(xg(z)?"":z||""),A.reportValidity())},T={},x=TD(s),R=LA(s),N=x||R,M=(g||wD(s))&&!s.value||e===""||Array.isArray(e)&&!e.length,O=xTe.bind(null,m,t,T),P=(z,V,$,B=yd.maxLength,q=yd.minLength)=>{const K=z?V:$;T[m]={type:z?B:q,message:K,ref:s,...O(z?B:q,K)}};if(i?!Array.isArray(e)||!e.length:a&&(!N&&(M||ta(e))||xg(e)&&!e||R&&!aK(o).isValid||x&&!lK(o).isValid)){const{value:z,message:V}=gT(a)?{value:!!a,message:a}:U0(a);if(z&&(T[m]={type:yd.required,message:V,ref:A,...O(yd.required,V)},!t))return C(V),T}if(!M&&(!ta(u)||!ta(d))){let z,V;const $=U0(d),B=U0(u);if(!ta(e)&&!isNaN(e)){const q=s.valueAsNumber||e&&+e;ta($.value)||(z=q>$.value),ta(B.value)||(V=q<B.value)}else{const q=s.valueAsDate||new Date(e),K=ee=>new Date(new Date().toDateString()+" "+ee),se=s.type=="time",W=s.type=="week";Iu($.value)&&e&&(z=se?K(e)>K($.value):W?e>$.value:q>new Date($.value)),Iu(B.value)&&e&&(V=se?K(e)<K(B.value):W?e<B.value:q<new Date(B.value))}if((z||V)&&(P(!!z,$.message,B.message,yd.max,yd.min),!t))return C(T[m].message),T}if((l||c)&&!M&&(Iu(e)||i&&Array.isArray(e))){const z=U0(l),V=U0(c),$=!ta(z.value)&&e.length>z.value,B=!ta(V.value)&&e.length<V.value;if(($||B)&&(P($,z.message,V.message),!t))return C(T[m].message),T}if(h&&!M&&Iu(e)){const{value:z,message:V}=U0(h);if(fx(z)&&!e.match(z)&&(T[m]={type:yd.pattern,message:V,ref:s,...O(yd.pattern,V)},!t))return C(V),T}if(f){if(hx(f)){const z=await f(e),V=kF(z,A);if(V&&(T[m]={...V,...O(yd.validate,V.message)},!t))return C(V.message),T}else if(so(f)){let z={};for(const V in f){if(!Bl(z)&&!t)break;const $=kF(await f[V](e),A,V);$&&(z={...$,...O(V,$.message)},C($.message),t&&(T[m]=z))}if(!Bl(z)&&(T[m]={ref:A,...z},!t))return T}}return C(!0),T},FF=n=>({isOnSubmit:!n||n===Dc.onSubmit,isOnBlur:n===Dc.onBlur,isOnChange:n===Dc.onChange,isOnAll:n===Dc.all,isOnTouch:n===Dc.onTouched});function bTe(n,e){const t=e.slice(0,-1).length;let r=0;for(;r<t;)n=zs(n)?r++:n[e[r++]];return n}function MTe(n){for(const e in n)if(!zs(n[e]))return!1;return!0}function Xo(n,e){const t=CD(e)?[e]:oK(e),r=t.length==1?n:bTe(n,t),i=t[t.length-1];let s;r&&delete r[i];for(let o=0;o<t.slice(0,-1).length;o++){let a=-1,l;const c=t.slice(0,-(o+1)),u=c.length-1;for(o>0&&(s=n);++a<c.length;){const d=c[a];l=l?l[d]:n[d],u===a&&(so(l)&&Bl(l)||Array.isArray(l)&&MTe(l))&&(s?delete s[d]:delete n[d]),s=l}}return n}function P3(){let n=[];return{get observers(){return n},next:i=>{for(const s of n)s.next(i)},subscribe:i=>(n.push(i),{unsubscribe:()=>{n=n.filter(s=>s!==i)}}),unsubscribe:()=>{n=[]}}}var px=n=>ta(n)||!sK(n);function fg(n,e){if(px(n)||px(e))return n===e;if(hg(n)&&hg(e))return n.getTime()===e.getTime();const t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(const i of t){const s=n[i];if(!r.includes(i))return!1;if(i!=="ref"){const o=e[i];if(hg(s)&&hg(o)||so(s)&&so(o)||Array.isArray(s)&&Array.isArray(o)?!fg(s,o):s!==o)return!1}}return!0}var BN=n=>{const e=n?n.ownerDocument:0,t=e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement;return n instanceof t},cK=n=>n.type==="select-multiple",RTe=n=>TD(n)||LA(n),O3=n=>BN(n)&&n.isConnected,uK=n=>{for(const e in n)if(hx(n[e]))return!0;return!1};function mx(n,e={}){const t=Array.isArray(n);if(so(n)||t)for(const r in n)Array.isArray(n[r])||so(n[r])&&!uK(n[r])?(e[r]=Array.isArray(n[r])?[]:{},mx(n[r],e[r])):ta(n[r])||(e[r]=!0);return e}function dK(n,e,t){const r=Array.isArray(n);if(so(n)||r)for(const i in n)Array.isArray(n[i])||so(n[i])&&!uK(n[i])?zs(e)||px(t[i])?t[i]=Array.isArray(n[i])?mx(n[i],[]):{...mx(n[i])}:dK(n[i],ta(e)?{}:e[i],t[i]):fg(n[i],e[i])?delete t[i]:t[i]=!0;return t}var D3=(n,e)=>dK(n,e,mx(e)),hK=(n,{valueAsNumber:e,valueAsDate:t,setValueAs:r})=>zs(n)?n:e?n===""?NaN:n&&+n:t&&Iu(n)?new Date(n):r?r(n):n;function L3(n){const e=n.ref;if(!(n.refs?n.refs.every(t=>t.disabled):e.disabled))return wD(e)?e.files:TD(e)?lK(n.refs).value:cK(e)?[...e.selectedOptions].map(({value:t})=>t):LA(e)?aK(n.refs).value:hK(zs(e.value)?n.ref.value:e.value,n)}var NTe=(n,e,t,r)=>{const i={};for(const s of n){const o=Yt(e,s);o&&hi(i,s,o._f)}return{criteriaMode:t,names:[...n],fields:i,shouldUseNativeValidation:r}},Hy=n=>zs(n)?n:fx(n)?n.source:so(n)?fx(n.value)?n.value.source:n.value:n,PTe=n=>n.mount&&(n.required||n.min||n.max||n.maxLength||n.minLength||n.pattern||n.validate);function zF(n,e,t){const r=Yt(n,t);if(r||CD(t))return{error:r,name:t};const i=t.split(".");for(;i.length;){const s=i.join("."),o=Yt(e,s),a=Yt(n,s);if(o&&!Array.isArray(o)&&t!==s)return{name:t};if(a&&a.type)return{name:s,error:a};i.pop()}return{name:t}}var OTe=(n,e,t,r,i)=>i.isOnAll?!1:!t&&i.isOnTouch?!(e||n):(t?r.isOnBlur:i.isOnBlur)?!n:(t?r.isOnChange:i.isOnChange)?n:!0,DTe=(n,e)=>!kA(Yt(n,e)).length&&Xo(n,e);const LTe={mode:Dc.onSubmit,reValidateMode:Dc.onChange,shouldFocusError:!0};function kTe(n={}){let e={...LTe,...n},t={submitCount:0,isDirty:!1,isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},r={},i=Zp(e.defaultValues)||{},s=e.shouldUnregister?{}:Zp(i),o={action:!1,mount:!1,watch:!1},a={mount:new Set,unMount:new Set,array:new Set,watch:new Set},l,c=0,u={};const d={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={watch:P3(),array:P3(),state:P3()},f=FF(e.mode),m=FF(e.reValidateMode),g=e.criteriaMode===Dc.all,v=te=>ce=>{clearTimeout(c),c=window.setTimeout(te,ce)},y=async()=>{let te=!1;return d.isValid&&(te=e.resolver?Bl((await N()).errors):await O(r,!0),te!==t.isValid&&(t.isValid=te,h.state.next({isValid:te}))),te},A=(te,ce=[],de,Pe,Te=!0,De=!0)=>{if(Pe&&de){if(o.action=!0,De&&Array.isArray(Yt(r,te))){const Ge=de(Yt(r,te),Pe.argA,Pe.argB);Te&&hi(r,te,Ge)}if(De&&Array.isArray(Yt(t.errors,te))){const Ge=de(Yt(t.errors,te),Pe.argA,Pe.argB);Te&&hi(t.errors,te,Ge),DTe(t.errors,te)}if(d.touchedFields&&De&&Array.isArray(Yt(t.touchedFields,te))){const Ge=de(Yt(t.touchedFields,te),Pe.argA,Pe.argB);Te&&hi(t.touchedFields,te,Ge)}d.dirtyFields&&(t.dirtyFields=D3(i,s)),h.state.next({isDirty:z(te,ce),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else hi(s,te,ce)},C=(te,ce)=>{hi(t.errors,te,ce),h.state.next({errors:t.errors})},T=(te,ce,de,Pe)=>{const Te=Yt(r,te);if(Te){const De=Yt(s,te,zs(de)?Yt(i,te):de);zs(De)||Pe&&Pe.defaultChecked||ce?hi(s,te,ce?De:L3(Te._f)):B(te,De),o.mount&&y()}},x=(te,ce,de,Pe,Te)=>{let De=!1,Ge=!1;const it={name:te};if(d.isDirty&&(Ge=t.isDirty,t.isDirty=it.isDirty=z(),De=Ge!==it.isDirty),d.dirtyFields&&(!de||Pe)){Ge=Yt(t.dirtyFields,te);const ke=fg(Yt(i,te),ce);ke?Xo(t.dirtyFields,te):hi(t.dirtyFields,te,!0),it.dirtyFields=t.dirtyFields,De=De||Ge!==!ke}if(de){const ke=Yt(t.touchedFields,te);ke||(hi(t.touchedFields,te,de),it.touchedFields=t.touchedFields,De=De||d.touchedFields&&ke!==de)}return De&&Te&&h.state.next(it),De?it:{}},R=(te,ce,de,Pe)=>{const Te=Yt(t.errors,te),De=d.isValid&&xg(ce)&&t.isValid!==ce;if(n.delayError&&de?(l=v(()=>C(te,de)),l(n.delayError)):(clearTimeout(c),l=null,de?hi(t.errors,te,de):Xo(t.errors,te)),(de?!fg(Te,de):Te)||!Bl(Pe)||De){const Ge={...Pe,...De&&xg(ce)?{isValid:ce}:{},errors:t.errors,name:te};t={...t,...Ge},h.state.next(Ge)}u[te]--,d.isValidating&&!Object.values(u).some(Ge=>Ge)&&(h.state.next({isValidating:!1}),u={})},N=async te=>e.resolver?await e.resolver({...s},e.context,NTe(te||a.mount,r,e.criteriaMode,e.shouldUseNativeValidation)):{},M=async te=>{const{errors:ce}=await N();if(te)for(const de of te){const Pe=Yt(ce,de);Pe?hi(t.errors,de,Pe):Xo(t.errors,de)}else t.errors=ce;return ce},O=async(te,ce,de={valid:!0})=>{for(const Pe in te){const Te=te[Pe];if(Te){const{_f:De,...Ge}=Te;if(De){const it=a.array.has(De.name),ke=await BF(Te,Yt(s,De.name),g,e.shouldUseNativeValidation,it);if(ke[De.name]&&(de.valid=!1,ce))break;!ce&&(Yt(ke,De.name)?it?ITe(t.errors,ke,De.name):hi(t.errors,De.name,ke[De.name]):Xo(t.errors,De.name))}Ge&&await O(Ge,ce,de)}}return de.valid},P=()=>{for(const te of a.unMount){const ce=Yt(r,te);ce&&(ce._f.refs?ce._f.refs.every(de=>!O3(de)):!O3(ce._f.ref))&&we(te)}a.unMount=new Set},z=(te,ce)=>(te&&ce&&hi(s,te,ce),!fg(ee(),i)),V=(te,ce,de)=>wTe(te,a,{...o.mount?s:zs(ce)?i:Iu(te)?{[te]:ce}:ce},de),$=te=>kA(Yt(o.mount?s:i,te,n.shouldUnregister?Yt(i,te,[]):[])),B=(te,ce,de={})=>{const Pe=Yt(r,te);let Te=ce;if(Pe){const De=Pe._f;De&&(!De.disabled&&hi(s,te,hK(ce,De)),Te=LN&&BN(De.ref)&&ta(ce)?"":ce,cK(De.ref)?[...De.ref.options].forEach(Ge=>Ge.selected=Te.includes(Ge.value)):De.refs?LA(De.ref)?De.refs.length>1?De.refs.forEach(Ge=>(!Ge.defaultChecked||!Ge.disabled)&&(Ge.checked=Array.isArray(Te)?!!Te.find(it=>it===Ge.value):Te===Ge.value)):De.refs[0]&&(De.refs[0].checked=!!Te):De.refs.forEach(Ge=>Ge.checked=Ge.value===Te):wD(De.ref)?De.ref.value="":(De.ref.value=Te,De.ref.type||h.watch.next({name:te})))}(de.shouldDirty||de.shouldTouch)&&x(te,Te,de.shouldTouch,de.shouldDirty,!0),de.shouldValidate&&W(te)},q=(te,ce,de)=>{for(const Pe in ce){const Te=ce[Pe],De=`${te}.${Pe}`,Ge=Yt(r,De);(a.array.has(te)||!px(Te)||Ge&&!Ge._f)&&!hg(Te)?q(De,Te,de):B(De,Te,de)}},K=(te,ce,de={})=>{const Pe=Yt(r,te),Te=a.array.has(te),De=Zp(ce);hi(s,te,De),Te?(h.array.next({name:te,values:s}),(d.isDirty||d.dirtyFields)&&de.shouldDirty&&(t.dirtyFields=D3(i,s),h.state.next({name:te,dirtyFields:t.dirtyFields,isDirty:z(te,De)}))):Pe&&!Pe._f&&!ta(De)?q(te,De,de):B(te,De,de),PF(te,a)&&h.state.next({}),h.watch.next({name:te})},se=async te=>{const ce=te.target;let de=ce.name;const Pe=Yt(r,de);if(Pe){let Te,De;const Ge=ce.type?L3(Pe._f):yTe(te),it=te.type===NF.BLUR||te.type===NF.FOCUS_OUT,ke=!PTe(Pe._f)&&!e.resolver&&!Yt(t.errors,de)&&!Pe._f.deps||OTe(it,Yt(t.touchedFields,de),t.isSubmitted,m,f),ct=PF(de,a,it);hi(s,de,Ge),it?(Pe._f.onBlur&&Pe._f.onBlur(te),l&&l(0)):Pe._f.onChange&&Pe._f.onChange(te);const oe=x(de,Ge,it,!1),ne=!Bl(oe)||ct;if(!it&&h.watch.next({name:de,type:te.type}),ke)return d.isValid&&y(),ne&&h.state.next({name:de,...ct?{}:oe});if(!it&&ct&&h.state.next({}),u[de]=u[de]?u[de]+1:1,h.state.next({isValidating:!0}),e.resolver){const{errors:Oe}=await N([de]),st=zF(t.errors,r,de),Je=zF(Oe,r,st.name||de);Te=Je.error,de=Je.name,De=Bl(Oe)}else Te=(await BF(Pe,Yt(s,de),g,e.shouldUseNativeValidation))[de],y();Pe._f.deps&&W(Pe._f.deps),R(de,De,Te,oe)}},W=async(te,ce={})=>{let de,Pe;const Te=N3(te);if(h.state.next({isValidating:!0}),e.resolver){const De=await M(zs(te)?te:Te);de=Bl(De),Pe=te?!Te.some(Ge=>Yt(De,Ge)):de}else te?(Pe=(await Promise.all(Te.map(async De=>{const Ge=Yt(r,De);return await O(Ge&&Ge._f?{[De]:Ge}:Ge)}))).every(Boolean),!(!Pe&&!t.isValid)&&y()):Pe=de=await O(r);return h.state.next({...!Iu(te)||d.isValid&&de!==t.isValid?{}:{name:te},...e.resolver||!te?{isValid:de}:{},errors:t.errors,isValidating:!1}),ce.shouldFocus&&!Pe&&kN(r,De=>De&&Yt(t.errors,De),te?Te:a.mount),Pe},ee=te=>{const ce={...i,...o.mount?s:{}};return zs(te)?ce:Iu(te)?Yt(ce,te):te.map(de=>Yt(ce,de))},Q=(te,ce)=>({invalid:!!Yt((ce||t).errors,te),isDirty:!!Yt((ce||t).dirtyFields,te),isTouched:!!Yt((ce||t).touchedFields,te),error:Yt((ce||t).errors,te)}),Y=te=>{te?N3(te).forEach(ce=>Xo(t.errors,ce)):t.errors={},h.state.next({errors:t.errors})},ae=(te,ce,de)=>{const Pe=(Yt(r,te,{_f:{}})._f||{}).ref;hi(t.errors,te,{...ce,ref:Pe}),h.state.next({name:te,errors:t.errors,isValid:!1}),de&&de.shouldFocus&&Pe&&Pe.focus&&Pe.focus()},fe=(te,ce)=>hx(te)?h.watch.subscribe({next:de=>te(V(void 0,ce),de)}):V(te,ce,!0),we=(te,ce={})=>{for(const de of te?N3(te):a.mount)a.mount.delete(de),a.array.delete(de),Yt(r,de)&&(ce.keepValue||(Xo(r,de),Xo(s,de)),!ce.keepError&&Xo(t.errors,de),!ce.keepDirty&&Xo(t.dirtyFields,de),!ce.keepTouched&&Xo(t.touchedFields,de),!e.shouldUnregister&&!ce.keepDefaultValue&&Xo(i,de));h.watch.next({}),h.state.next({...t,...ce.keepDirty?{isDirty:z()}:{}}),!ce.keepIsValid&&y()},ge=(te,ce={})=>{let de=Yt(r,te);const Pe=xg(ce.disabled);return hi(r,te,{...de||{},_f:{...de&&de._f?de._f:{ref:{name:te}},name:te,mount:!0,...ce}}),a.mount.add(te),de?Pe&&hi(s,te,ce.disabled?void 0:Yt(s,te,L3(de._f))):T(te,!0,ce.value),{...Pe?{disabled:ce.disabled}:{},...e.shouldUseNativeValidation?{required:!!ce.required,min:Hy(ce.min),max:Hy(ce.max),minLength:Hy(ce.minLength),maxLength:Hy(ce.maxLength),pattern:Hy(ce.pattern)}:{},name:te,onChange:se,onBlur:se,ref:Te=>{if(Te){ge(te,ce),de=Yt(r,te);const De=zs(Te.value)&&Te.querySelectorAll&&Te.querySelectorAll("input,select,textarea")[0]||Te,Ge=RTe(De),it=de._f.refs||[];if(Ge?it.find(ke=>ke===De):De===de._f.ref)return;hi(r,te,{_f:{...de._f,...Ge?{refs:[...it.filter(O3),De,...Array.isArray(Yt(i,te))?[{}]:[]],ref:{type:De.type,name:te}}:{ref:De}}}),T(te,!1,void 0,De)}else de=Yt(r,te,{}),de._f&&(de._f.mount=!1),(e.shouldUnregister||ce.shouldUnregister)&&!(STe(a.array,te)&&o.action)&&a.unMount.add(te)}}},Se=()=>e.shouldFocusError&&kN(r,te=>te&&Yt(t.errors,te),a.mount),Ke=(te,ce)=>async de=>{de&&(de.preventDefault&&de.preventDefault(),de.persist&&de.persist());let Pe=!0,Te=Zp(s);h.state.next({isSubmitting:!0});try{if(e.resolver){const{errors:De,values:Ge}=await N();t.errors=De,Te=Ge}else await O(r);Bl(t.errors)?(h.state.next({errors:{},isSubmitting:!0}),await te(Te,de)):(ce&&await ce({...t.errors},de),Se())}catch(De){throw Pe=!1,De}finally{t.isSubmitted=!0,h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Bl(t.errors)&&Pe,submitCount:t.submitCount+1,errors:t.errors})}},xe=(te,ce={})=>{Yt(r,te)&&(zs(ce.defaultValue)?K(te,Yt(i,te)):(K(te,ce.defaultValue),hi(i,te,ce.defaultValue)),ce.keepTouched||Xo(t.touchedFields,te),ce.keepDirty||(Xo(t.dirtyFields,te),t.isDirty=ce.defaultValue?z(te,Yt(i,te)):z()),ce.keepError||(Xo(t.errors,te),d.isValid&&y()),h.state.next({...t}))},Qe=(te,ce={})=>{const de=te||i,Pe=Zp(de),Te=te&&!Bl(te)?Pe:i;if(ce.keepDefaultValues||(i=de),!ce.keepValues){if(ce.keepDirtyValues)for(const De of a.mount)Yt(t.dirtyFields,De)?hi(Te,De,Yt(s,De)):K(De,Yt(Te,De));else{if(LN&&zs(te))for(const De of a.mount){const Ge=Yt(r,De);if(Ge&&Ge._f){const it=Array.isArray(Ge._f.refs)?Ge._f.refs[0]:Ge._f.ref;if(BN(it)){const ke=it.closest("form");if(ke){ke.reset();break}}}}r={}}s=n.shouldUnregister?ce.keepDefaultValues?Zp(i):{}:Pe,h.array.next({values:Te}),h.watch.next({values:Te})}a={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!ce.keepIsValid,o.watch=!!n.shouldUnregister,h.state.next({submitCount:ce.keepSubmitCount?t.submitCount:0,isDirty:ce.keepDirty||ce.keepDirtyValues?t.isDirty:!!(ce.keepDefaultValues&&!fg(te,i)),isSubmitted:ce.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:ce.keepDirty||ce.keepDirtyValues?t.dirtyFields:ce.keepDefaultValues&&te?D3(i,te):{},touchedFields:ce.keepTouched?t.touchedFields:{},errors:ce.keepErrors?t.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})};return{control:{register:ge,unregister:we,getFieldState:Q,_executeSchema:N,_focusError:Se,_getWatch:V,_getDirty:z,_updateValid:y,_removeUnmounted:P,_updateFieldArray:A,_getFieldArray:$,_subjects:h,_proxyFormState:d,get _fields(){return r},get _formValues(){return s},get _stateFlags(){return o},set _stateFlags(te){o=te},get _defaultValues(){return i},get _names(){return a},set _names(te){a=te},get _formState(){return t},set _formState(te){t=te},get _options(){return e},set _options(te){e={...e,...te}}},trigger:W,register:ge,handleSubmit:Ke,watch:fe,setValue:K,getValues:ee,reset:(te,ce)=>Qe(hx(te)?te(s):te,ce),resetField:xe,clearErrors:Y,unregister:we,setError:ae,setFocus:(te,ce={})=>{const de=Yt(r,te),Pe=de&&de._f;if(Pe){const Te=Pe.refs?Pe.refs[0]:Pe.ref;Te.focus&&(Te.focus(),ce.shouldSelect&&Te.select())}},getFieldState:Q}}function BTe(n={}){const e=ht.useRef(),[t,r]=ht.useState({isDirty:!1,isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:n.defaultValues});e.current||(e.current={...kTe(n),formState:t});const i=e.current.control;return i._options=n,CTe({subject:i._subjects.state,callback:ht.useCallback(s=>{ETe(s,i._proxyFormState,!0)&&(i._formState={...i._formState,...s},r({...i._formState}))},[i])}),ht.useEffect(()=>{i._stateFlags.mount||(i._proxyFormState.isValid&&i._updateValid(),i._stateFlags.mount=!0),i._stateFlags.watch&&(i._stateFlags.watch=!1,i._subjects.state.next({})),i._removeUnmounted()}),ht.useEffect(()=>{t.submitCount&&i._focusError()},[i,t.submitCount]),e.current.formState=ATe(t,i),e.current}const FTe=({className:n,title:e})=>w.jsxs("svg",{...e?{}:{"aria-hidden":"true"},focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",className:n,"aria-label":e,children:[w.jsx("path",{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}),w.jsx("path",{d:"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z"})]});function zTe(n){return Array.from({length:n},(e,t)=>t)}const UTe=({pwdOrTokens:n,setPwdOrTokens:e,onFinish:t,minimumNumberOfRecoveryTokens:r=1,showTokens:i=!0,openModal:s=!1,withModal:o=!1})=>{var a;const{t:l}=ur(),{register:c,handleSubmit:u,formState:{errors:d},setError:h}=BTe(),[f,m]=D.useState(1),[g,v]=D.useState(!!n),y=C=>{var T,x,R;if(n==="password"&&!(!((T=C.password)===null||T===void 0)&&T.length)||n==="tokens"&&((((x=C==null?void 0:C.tokens)===null||x===void 0?void 0:x.length)||0)<r||!(!((R=C==null?void 0:C.tokens)===null||R===void 0)&&R.every(N=>N.length)))){h("tokens",{type:"minLength",message:"Tokens"});return}t&&t(C).then(()=>{v(!1)})},A=w.jsxs("form",{name:"memoriAuth",onSubmit:u(y),className:"memori-auth-widget--form",children:[(n==="password"||!i)&&w.jsxs("fieldset",{className:"memori-auth-widget--password-fieldset",children:[w.jsxs("label",{children:["Password:"," ",w.jsx("input",{className:"memori-auth-widget--input",required:!0,type:"password",placeholder:"Password",...c("password",{required:!0})})]}),i&&w.jsxs(w.Fragment,{children:[w.jsx("hr",{}),w.jsx(Pt,{outlined:!0,onClick:()=>e("tokens"),children:l("auth.useRecoveryTokens")||"Recovery tokens"})]})]}),n==="tokens"&&i&&w.jsxs("fieldset",{className:"memori-auth-widget--tokens-fieldset",name:"tokens",children:[w.jsxs("legend",{children:[l("auth.tokens"),": "]}),zTe(f).map(C=>w.jsx("label",{className:"memori-auth-widget--token",children:w.jsx("input",{type:"password",className:"memori-auth-widget--input",placeholder:"Recovery token",required:!0,autoComplete:"off",...c(`tokens.${C}`,{required:!0})})},C)),w.jsx(Pt,{onClick:()=>m(C=>C+1),className:"memori-auth-widget--token-add",icon:w.jsx(FTe,{}),children:l("auth.addToken")||"Add token"}),w.jsx("hr",{}),w.jsx(Pt,{outlined:!0,onClick:()=>e("password"),children:l("auth.usePassword")||"Password"})]}),((a=d.tokens)===null||a===void 0?void 0:a.type)==="minLength"&&w.jsxs("div",{className:"memori-auth-widget--error",children:[l("auth.atLeast")||"At least"," ",r]}),w.jsx(Pt,{htmlType:"submit",primary:!0,className:"memori-auth-widget--submit",children:l("confirm")||"Submit"})]});return o?w.jsx(yS,{open:s||g,title:l("auth.title")||"Authentication",onClose:()=>e(null),closable:!1,children:A}):A},Pa=({type:n,resourceURI:e,sessionID:t,baseURL:r="",apiURL:i=""})=>{let s=n==="cover"?`${r}/images/memoriCover.png`:`${r}/images/memoriAvatar.png?v=20231208`;try{return!e||e.length===0?s:e.includes("memoriai/memory")&&!e.includes("memori-ai-session-id")&&t?`${e}?memori-ai-session-id=${t}`:(e.startsWith("https://")||e.startsWith("http://"))&&(new URL(e).hostname.includes("memori.ai")||new URL(e).hostname.includes("aclambda.online")||new URL(e).hostname.includes("localhost"))?`${e}${e.endsWith("/")||!t?"":"/"}${t||""}`:e.startsWith("cloud://")?`${(i==null?void 0:i.replace(/v2/,"v1"))||""}/CloudAsset/${e.replace("cloud://","")}`:e.startsWith("guid://")?`${(i==null?void 0:i.replace(/v2/,"v1"))||""}/GuidAsset/${e.replace("guid://","")}`:e||s}catch{return e||s}},fK=({className:n,title:e})=>w.jsx("svg",{...e?{}:{"aria-hidden":"true"},focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",className:n,"aria-label":e,children:w.jsx("path",{d:"M858.5 763.6a374 374 0 0 0-80.6-119.5 375.63 375.63 0 0 0-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 0 0-80.6 119.5A371.7 371.7 0 0 0 136 901.8a8 8 0 0 0 8 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 0 0 8-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"})}),pK=({className:n,title:e})=>w.jsx("svg",{...e?{}:{"aria-hidden":"true"},focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",className:n,"aria-label":e,children:w.jsxs("g",{fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd",children:[w.jsx("path",{fillRule:"evenodd",d:"M0 4a4 4 0 014-4h16a4 4 0 014 4v16a4 4 0 01-4 4H4a4 4 0 01-4-4zm4-2.4A2.4 2.4 0 001.6 4v16A2.4 2.4 0 004 22.4h16a2.4 2.4 0 002.4-2.4V4A2.4 2.4 0 0020 1.6z",clipRule:"evenodd"}),w.jsx("path",{fillRule:"evenodd",d:"M9.715 8.442a.798.798 0 00-1.43 0l-3.2 6.4a.799.799 0 101.431.716l.579-1.158h3.811l.578 1.158a.8.8 0 001.431-.716zm.391 4.358L9 10.589 7.894 12.8z",clipRule:"evenodd"}),w.jsx("path",{fillRule:"evenodd",d:"M17 8c.552 0 1 .358 1 .8v6.4c0 .442-.448.8-1 .8s-1-.358-1-.8V8.8c0-.442.448-.8 1-.8z",clipRule:"evenodd"})]})}),mK=({className:n,title:e})=>w.jsxs("svg",{...e?{}:{"aria-hidden":"true"},focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",className:n,"aria-label":e,children:[w.jsx("path",{d:"M140 188h584v164h76V144c0-17.7-14.3-32-32-32H96c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h544v-76H140V188z"}),w.jsx("path",{d:"M414.3 256h-60.6c-3.4 0-6.4 2.2-7.6 5.4L219 629.4c-.3.8-.4 1.7-.4 2.6 0 4.4 3.6 8 8 8h55.1c3.4 0 6.4-2.2 7.6-5.4L322 540h196.2L422 261.4c-1.3-3.2-4.3-5.4-7.7-5.4zm12.4 228h-85.5L384 360.2 426.7 484zM936 528H800v-93c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v93H592c-13.3 0-24 10.7-24 24v176c0 13.3 10.7 24 24 24h136v152c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V752h136c13.3 0 24-10.7 24-24V552c0-13.3-10.7-24-24-24zM728 680h-88v-80h88v80zm160 0h-88v-80h88v80z"})]}),ql=({content:n,className:e,align:t="right",disabled:r=!1,visible:i=!1,children:s})=>w.jsxs("div",{className:er("memori-tooltip",`memori-tooltip--align-${t}`,e,{"memori-tooltip--disabled":r,"memori-tooltip--visible":i}),children:[w.jsx("div",{className:"memori-tooltip--content",children:n}),w.jsx("div",{className:"memori-tooltip--trigger",children:s})]}),UF=({className:n,title:e})=>w.jsxs("svg",{...e?{}:{"aria-hidden":"true"},focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:n,"aria-label":e,children:[w.jsx("path",{fill:"none",d:"M0 0h24v24H0V0z"}),w.jsx("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H5.17l-.59.59-.58.58V4h16v12zm-9-4h2v2h-2zm0-6h2v4h-2z"})]}),jTe={"it-IT":"Non è quello che ti ho chiesto","fr-FR":"Ce n'est pas ce que je t'ai demandé","en-GB":"It's not what I asked"},GTe={"it-IT":"La risposta non era corretta","fr-FR":"La réponse n'était pas correcte","en-GB":"The answer was not correct"},HTe={"it-IT":"Non mi è piaciuta la risposta","fr-FR":"Je n'ai pas aimé la réponse","en-GB":"I didn't like the answer"},VTe=({memori:n,className:e,onNegativeClick:t,toggle:r=!1,dropdown:i=!1})=>{const[s,o]=D.useState(),a=n.culture==="it-IT"?"it-IT":n.culture==="fr-FR"?"fr-FR":"en-GB",l=jTe[a],c=GTe[a],u=HTe[a];return w.jsx("div",{className:`memori-chat--feedback${e?` ${e}`:""}`,children:i?w.jsxs(jl,{as:"div",className:"memori-chat--feedback-menu",children:[w.jsx(jl.Button,{as:ht.Fragment,children:w.jsx(Pt,{ghost:!0,shape:"circle",title:"Feedback",className:"memori-chat--feedback-menu-button",disabled:!!s,icon:w.jsx(UF,{className:s?"memori-chat--feedback-clicked":void 0})})}),w.jsx(Zr,{as:ht.Fragment,enter:"transition ease-out duration-200",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:w.jsx(jl.Items,{className:"memori-chat--feedback-menu-items",children:w.jsxs("div",{className:"memori-chat--feedback-menu-items-container",children:[w.jsx(jl.Item,{children:({active:d})=>w.jsx("button",{className:`memori-chat--feedback-menu-item${d?" memori-chat--feedback-menu-item-active":""}`,onClick:()=>{o(s==="up"&&r?void 0:"up")},children:u})},"ok"),w.jsx(jl.Item,{children:({active:d})=>w.jsx("button",{className:`memori-chat--feedback-menu-item${d?" memori-chat--feedback-menu-item-active":""}`,onClick:()=>{o(s==="down"&&r?void 0:"down"),t(l)},children:c})},"no")]})})})]}):w.jsx(ql,{align:"left",content:"Feedback",children:w.jsx(Pt,{title:"Feedback",onClick:()=>{o(s==="down"&&r?void 0:"down"),t(l)},ghost:!0,shape:"circle",icon:w.jsx(UF,{className:s?"memori-chat--feedback-clicked":void 0})})})})};function Q2(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let ap=Q2();function gK(n){ap=n}const O_={exec:()=>null};function Ur(n,e=""){let t=typeof n=="string"?n:n.source;const r={replace:(i,s)=>{let o=typeof s=="string"?s:s.source;return o=o.replace(ra.caret,"$1"),t=t.replace(i,o),r},getRegex:()=>new RegExp(t,e)};return r}const ra={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:n=>new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}#`),htmlBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}<(?:[a-z].*>|!--)`,"i")},$Te=/^(?:[ \t]*(?:\n|$))+/,WTe=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,qTe=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,BA=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,QTe=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,vK=/(?:[*+-]|\d{1,9}[.)])/,yK=Ur(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,vK).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),xD=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,JTe=/^[^\n]+/,ID=/(?!\s*\])(?:\\.|[^\[\]\\])+/,KTe=Ur(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",ID).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),YTe=Ur(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,vK).getRegex(),J2="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",bD=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,XTe=Ur("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",bD).replace("tag",J2).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),_K=Ur(xD).replace("hr",BA).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",J2).getRegex(),ZTe=Ur(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",_K).getRegex(),MD={blockquote:ZTe,code:WTe,def:KTe,fences:qTe,heading:QTe,hr:BA,html:XTe,lheading:yK,list:YTe,newline:$Te,paragraph:_K,table:O_,text:JTe},jF=Ur("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",BA).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",J2).getRegex(),exe={...MD,table:jF,paragraph:Ur(xD).replace("hr",BA).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",jF).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",J2).getRegex()},txe={...MD,html:Ur(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",bD).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:O_,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Ur(xD).replace("hr",BA).replace("heading",` *#{1,6} *[^
]`).replace("lheading",yK).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},SK=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,nxe=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,AK=/^( {2,}|\\)\n(?!\s*$)/,rxe=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,K2=/[\p{P}\p{S}]/u,RD=/[\s\p{P}\p{S}]/u,EK=/[^\s\p{P}\p{S}]/u,ixe=Ur(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,RD).getRegex(),sxe=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,oxe=Ur(/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,"u").replace(/punct/g,K2).getRegex(),axe=Ur("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)","gu").replace(/notPunctSpace/g,EK).replace(/punctSpace/g,RD).replace(/punct/g,K2).getRegex(),lxe=Ur("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,EK).replace(/punctSpace/g,RD).replace(/punct/g,K2).getRegex(),cxe=Ur(/\\(punct)/,"gu").replace(/punct/g,K2).getRegex(),uxe=Ur(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),dxe=Ur(bD).replace("(?:-->|$)","-->").getRegex(),hxe=Ur("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",dxe).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),gx=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,fxe=Ur(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",gx).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),CK=Ur(/^!?\[(label)\]\[(ref)\]/).replace("label",gx).replace("ref",ID).getRegex(),wK=Ur(/^!?\[(ref)\](?:\[\])?/).replace("ref",ID).getRegex(),pxe=Ur("reflink|nolink(?!\\()","g").replace("reflink",CK).replace("nolink",wK).getRegex(),ND={_backpedal:O_,anyPunctuation:cxe,autolink:uxe,blockSkip:sxe,br:AK,code:nxe,del:O_,emStrongLDelim:oxe,emStrongRDelimAst:axe,emStrongRDelimUnd:lxe,escape:SK,link:fxe,nolink:wK,punctuation:ixe,reflink:CK,reflinkSearch:pxe,tag:hxe,text:rxe,url:O_},mxe={...ND,link:Ur(/^!?\[(label)\]\((.*?)\)/).replace("label",gx).getRegex(),reflink:Ur(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",gx).getRegex()},FN={...ND,escape:Ur(SK).replace("])","~|])").getRegex(),url:Ur(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},gxe={...FN,br:Ur(AK).replace("{2,}","*").getRegex(),text:Ur(FN.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},LC={normal:MD,gfm:exe,pedantic:txe},Vy={normal:ND,gfm:FN,breaks:gxe,pedantic:mxe},vxe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},GF=n=>vxe[n];function Su(n,e){if(e){if(ra.escapeTest.test(n))return n.replace(ra.escapeReplace,GF)}else if(ra.escapeTestNoEncode.test(n))return n.replace(ra.escapeReplaceNoEncode,GF);return n}function HF(n){try{n=encodeURI(n).replace(ra.percentDecode,"%")}catch{return null}return n}function VF(n,e){var s;const t=n.replace(ra.findPipe,(o,a,l)=>{let c=!1,u=a;for(;--u>=0&&l[u]==="\\";)c=!c;return c?"|":" |"}),r=t.split(ra.splitPipe);let i=0;if(r[0].trim()||r.shift(),r.length>0&&!((s=r.at(-1))!=null&&s.trim())&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(ra.slashPipe,"|");return r}function $y(n,e,t){const r=n.length;if(r===0)return"";let i=0;for(;i<r;){const s=n.charAt(r-i-1);if(s===e&&!t)i++;else if(s!==e&&t)i++;else break}return n.slice(0,r-i)}function yxe(n,e){if(n.indexOf(e[1])===-1)return-1;let t=0;for(let r=0;r<n.length;r++)if(n[r]==="\\")r++;else if(n[r]===e[0])t++;else if(n[r]===e[1]&&(t--,t<0))return r;return-1}function $F(n,e,t,r,i){const s=e.href,o=e.title||null,a=n[1].replace(i.other.outputLinkReplace,"$1");if(n[0].charAt(0)!=="!"){r.state.inLink=!0;const l={type:"link",raw:t,href:s,title:o,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,l}return{type:"image",raw:t,href:s,title:o,text:a}}function _xe(n,e,t){const r=n.match(t.other.indentCodeCompensation);if(r===null)return e;const i=r[1];return e.split(`
`).map(s=>{const o=s.match(t.other.beginningSpace);if(o===null)return s;const[a]=o;return a.length>=i.length?s.slice(i.length):s}).join(`
`)}class _S{constructor(e){Wr(this,"options");Wr(this,"rules");Wr(this,"lexer");this.options=e||ap}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const r=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:$y(r,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const r=t[0],i=_xe(r,t[3]||"",this.rules);return{type:"code",raw:r,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:i}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let r=t[2].trim();if(this.rules.other.endingHash.test(r)){const i=$y(r,"#");(this.options.pedantic||!i||this.rules.other.endingSpaceChar.test(i))&&(r=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:$y(t[0],`
`)}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let r=$y(t[0],`
`).split(`
`),i="",s="";const o=[];for(;r.length>0;){let a=!1;const l=[];let c;for(c=0;c<r.length;c++)if(this.rules.other.blockquoteStart.test(r[c]))l.push(r[c]),a=!0;else if(!a)l.push(r[c]);else break;r=r.slice(c);const u=l.join(`
`),d=u.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}
${u}`:u,s=s?`${s}
${d}`:d;const h=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(d,o,!0),this.lexer.state.top=h,r.length===0)break;const f=o.at(-1);if((f==null?void 0:f.type)==="code")break;if((f==null?void 0:f.type)==="blockquote"){const m=f,g=m.raw+`
`+r.join(`
`),v=this.blockquote(g);o[o.length-1]=v,i=i.substring(0,i.length-m.raw.length)+v.raw,s=s.substring(0,s.length-m.text.length)+v.text;break}else if((f==null?void 0:f.type)==="list"){const m=f,g=m.raw+`
`+r.join(`
`),v=this.list(g);o[o.length-1]=v,i=i.substring(0,i.length-f.raw.length)+v.raw,s=s.substring(0,s.length-m.raw.length)+v.raw,r=g.substring(o.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:o,text:s}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r=t[1].trim();const i=r.length>1,s={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");const o=this.rules.other.listItemRegex(r);let a=!1;for(;e;){let c=!1,u="",d="";if(!(t=o.exec(e))||this.rules.block.hr.test(e))break;u=t[0],e=e.substring(u.length);let h=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,A=>" ".repeat(3*A.length)),f=e.split(`
`,1)[0],m=!h.trim(),g=0;if(this.options.pedantic?(g=2,d=h.trimStart()):m?g=t[1].length+1:(g=t[2].search(this.rules.other.nonSpaceChar),g=g>4?1:g,d=h.slice(g),g+=t[1].length),m&&this.rules.other.blankLine.test(f)&&(u+=f+`
`,e=e.substring(f.length+1),c=!0),!c){const A=this.rules.other.nextBulletRegex(g),C=this.rules.other.hrRegex(g),T=this.rules.other.fencesBeginRegex(g),x=this.rules.other.headingBeginRegex(g),R=this.rules.other.htmlBeginRegex(g);for(;e;){const N=e.split(`
`,1)[0];let M;if(f=N,this.options.pedantic?(f=f.replace(this.rules.other.listReplaceNesting,"  "),M=f):M=f.replace(this.rules.other.tabCharGlobal,"    "),T.test(f)||x.test(f)||R.test(f)||A.test(f)||C.test(f))break;if(M.search(this.rules.other.nonSpaceChar)>=g||!f.trim())d+=`
`+M.slice(g);else{if(m||h.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||T.test(h)||x.test(h)||C.test(h))break;d+=`
`+f}!m&&!f.trim()&&(m=!0),u+=N+`
`,e=e.substring(N.length+1),h=M.slice(g)}}s.loose||(a?s.loose=!0:this.rules.other.doubleBlankLine.test(u)&&(a=!0));let v=null,y;this.options.gfm&&(v=this.rules.other.listIsTask.exec(d),v&&(y=v[0]!=="[ ] ",d=d.replace(this.rules.other.listReplaceTask,""))),s.items.push({type:"list_item",raw:u,task:!!v,checked:y,loose:!1,text:d,tokens:[]}),s.raw+=u}const l=s.items.at(-1);if(l)l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd();else return;s.raw=s.raw.trimEnd();for(let c=0;c<s.items.length;c++)if(this.lexer.state.top=!1,s.items[c].tokens=this.lexer.blockTokens(s.items[c].text,[]),!s.loose){const u=s.items[c].tokens.filter(h=>h.type==="space"),d=u.length>0&&u.some(h=>this.rules.other.anyLine.test(h.raw));s.loose=d}if(s.loose)for(let c=0;c<s.items.length;c++)s.items[c].loose=!0;return s}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const r=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:r,raw:t[0],href:i,title:s}}}table(e){var a;const t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;const r=VF(t[1]),i=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),s=(a=t[3])!=null&&a.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],o={type:"table",raw:t[0],header:[],align:[],rows:[]};if(r.length===i.length){for(const l of i)this.rules.other.tableAlignRight.test(l)?o.align.push("right"):this.rules.other.tableAlignCenter.test(l)?o.align.push("center"):this.rules.other.tableAlignLeft.test(l)?o.align.push("left"):o.align.push(null);for(let l=0;l<r.length;l++)o.header.push({text:r[l],tokens:this.lexer.inline(r[l]),header:!0,align:o.align[l]});for(const l of s)o.rows.push(VF(l,o.header.length).map((c,u)=>({text:c,tokens:this.lexer.inline(c),header:!1,align:o.align[u]})));return o}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const r=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:r,tokens:this.lexer.inline(r)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const r=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(r)){if(!this.rules.other.endAngleBracket.test(r))return;const o=$y(r.slice(0,-1),"\\");if((r.length-o.length)%2===0)return}else{const o=yxe(t[2],"()");if(o>-1){const l=(t[0].indexOf("!")===0?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,l).trim(),t[3]=""}}let i=t[2],s="";if(this.options.pedantic){const o=this.rules.other.pedanticHrefTitle.exec(i);o&&(i=o[1],s=o[3])}else s=t[3]?t[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(r)?i=i.slice(1):i=i.slice(1,-1)),$F(t,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){const i=(r[2]||r[1]).replace(this.rules.other.multipleSpaceGlobal," "),s=t[i.toLowerCase()];if(!s){const o=r[0].charAt(0);return{type:"text",raw:o,text:o}}return $F(r,s,r[0],this.lexer,this.rules)}}emStrong(e,t,r=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!i||i[3]&&r.match(this.rules.other.unicodeAlphaNumeric))return;if(!(i[1]||i[2]||"")||!r||this.rules.inline.punctuation.exec(r)){const o=[...i[0]].length-1;let a,l,c=o,u=0;const d=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(d.lastIndex=0,t=t.slice(-1*e.length+o);(i=d.exec(t))!=null;){if(a=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!a)continue;if(l=[...a].length,i[3]||i[4]){c+=l;continue}else if((i[5]||i[6])&&o%3&&!((o+l)%3)){u+=l;continue}if(c-=l,c>0)continue;l=Math.min(l,l+c+u);const h=[...i[0]][0].length,f=e.slice(0,o+i.index+h+l);if(Math.min(o,l)%2){const g=f.slice(1,-1);return{type:"em",raw:f,text:g,tokens:this.lexer.inlineTokens(g)}}const m=f.slice(2,-2);return{type:"strong",raw:f,text:m,tokens:this.lexer.inlineTokens(m)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let r=t[2].replace(this.rules.other.newLineCharGlobal," ");const i=this.rules.other.nonSpaceChar.test(r),s=this.rules.other.startingSpaceChar.test(r)&&this.rules.other.endingSpaceChar.test(r);return i&&s&&(r=r.substring(1,r.length-1)),{type:"codespan",raw:t[0],text:r}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let r,i;return t[2]==="@"?(r=t[1],i="mailto:"+r):(r=t[1],i=r),{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}url(e){var r;let t;if(t=this.rules.inline.url.exec(e)){let i,s;if(t[2]==="@")i=t[0],s="mailto:"+i;else{let o;do o=t[0],t[0]=((r=this.rules.inline._backpedal.exec(t[0]))==null?void 0:r[0])??"";while(o!==t[0]);i=t[0],t[1]==="www."?s="http://"+t[0]:s=t[0]}return{type:"link",raw:t[0],text:i,href:s,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){const r=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:r}}}}class il{constructor(e){Wr(this,"tokens");Wr(this,"options");Wr(this,"state");Wr(this,"tokenizer");Wr(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||ap,this.options.tokenizer=this.options.tokenizer||new _S,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={other:ra,block:LC.normal,inline:Vy.normal};this.options.pedantic?(t.block=LC.pedantic,t.inline=Vy.pedantic):this.options.gfm&&(t.block=LC.gfm,this.options.breaks?t.inline=Vy.breaks:t.inline=Vy.gfm),this.tokenizer.rules=t}static get rules(){return{block:LC,inline:Vy}}static lex(e,t){return new il(t).lex(e)}static lexInline(e,t){return new il(t).inlineTokens(e)}lex(e){e=e.replace(ra.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const r=this.inlineQueue[t];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],r=!1){var i,s,o;for(this.options.pedantic&&(e=e.replace(ra.tabCharGlobal,"    ").replace(ra.spaceLine,""));e;){let a;if((s=(i=this.options.extensions)==null?void 0:i.block)!=null&&s.some(c=>(a=c.call({lexer:this},e,t))?(e=e.substring(a.raw.length),t.push(a),!0):!1))continue;if(a=this.tokenizer.space(e)){e=e.substring(a.raw.length);const c=t.at(-1);a.raw.length===1&&c!==void 0?c.raw+=`
`:t.push(a);continue}if(a=this.tokenizer.code(e)){e=e.substring(a.raw.length);const c=t.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=`
`+a.raw,c.text+=`
`+a.text,this.inlineQueue.at(-1).src=c.text):t.push(a);continue}if(a=this.tokenizer.fences(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.heading(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.hr(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.blockquote(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.list(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.html(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.def(e)){e=e.substring(a.raw.length);const c=t.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=`
`+a.raw,c.text+=`
`+a.raw,this.inlineQueue.at(-1).src=c.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title});continue}if(a=this.tokenizer.table(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.lheading(e)){e=e.substring(a.raw.length),t.push(a);continue}let l=e;if((o=this.options.extensions)!=null&&o.startBlock){let c=1/0;const u=e.slice(1);let d;this.options.extensions.startBlock.forEach(h=>{d=h.call({lexer:this},u),typeof d=="number"&&d>=0&&(c=Math.min(c,d))}),c<1/0&&c>=0&&(l=e.substring(0,c+1))}if(this.state.top&&(a=this.tokenizer.paragraph(l))){const c=t.at(-1);r&&(c==null?void 0:c.type)==="paragraph"?(c.raw+=`
`+a.raw,c.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):t.push(a),r=l.length!==e.length,e=e.substring(a.raw.length);continue}if(a=this.tokenizer.text(e)){e=e.substring(a.raw.length);const c=t.at(-1);(c==null?void 0:c.type)==="text"?(c.raw+=`
`+a.raw,c.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):t.push(a);continue}if(e){const c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){var a,l,c;let r=e,i=null;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)u.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,i.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let s=!1,o="";for(;e;){s||(o=""),s=!1;let u;if((l=(a=this.options.extensions)==null?void 0:a.inline)!=null&&l.some(h=>(u=h.call({lexer:this},e,t))?(e=e.substring(u.raw.length),t.push(u),!0):!1))continue;if(u=this.tokenizer.escape(e)){e=e.substring(u.raw.length),t.push(u);continue}if(u=this.tokenizer.tag(e)){e=e.substring(u.raw.length),t.push(u);continue}if(u=this.tokenizer.link(e)){e=e.substring(u.raw.length),t.push(u);continue}if(u=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(u.raw.length);const h=t.at(-1);u.type==="text"&&(h==null?void 0:h.type)==="text"?(h.raw+=u.raw,h.text+=u.text):t.push(u);continue}if(u=this.tokenizer.emStrong(e,r,o)){e=e.substring(u.raw.length),t.push(u);continue}if(u=this.tokenizer.codespan(e)){e=e.substring(u.raw.length),t.push(u);continue}if(u=this.tokenizer.br(e)){e=e.substring(u.raw.length),t.push(u);continue}if(u=this.tokenizer.del(e)){e=e.substring(u.raw.length),t.push(u);continue}if(u=this.tokenizer.autolink(e)){e=e.substring(u.raw.length),t.push(u);continue}if(!this.state.inLink&&(u=this.tokenizer.url(e))){e=e.substring(u.raw.length),t.push(u);continue}let d=e;if((c=this.options.extensions)!=null&&c.startInline){let h=1/0;const f=e.slice(1);let m;this.options.extensions.startInline.forEach(g=>{m=g.call({lexer:this},f),typeof m=="number"&&m>=0&&(h=Math.min(h,m))}),h<1/0&&h>=0&&(d=e.substring(0,h+1))}if(u=this.tokenizer.inlineText(d)){e=e.substring(u.raw.length),u.raw.slice(-1)!=="_"&&(o=u.raw.slice(-1)),s=!0;const h=t.at(-1);(h==null?void 0:h.type)==="text"?(h.raw+=u.raw,h.text+=u.text):t.push(u);continue}if(e){const h="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(h);break}else throw new Error(h)}}return t}}class SS{constructor(e){Wr(this,"options");Wr(this,"parser");this.options=e||ap}space(e){return""}code({text:e,lang:t,escaped:r}){var o;const i=(o=(t||"").match(ra.notSpaceStart))==null?void 0:o[0],s=e.replace(ra.endingNewline,"")+`
`;return i?'<pre><code class="language-'+Su(i)+'">'+(r?s:Su(s,!0))+`</code></pre>
`:"<pre><code>"+(r?s:Su(s,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){const t=e.ordered,r=e.start;let i="";for(let a=0;a<e.items.length;a++){const l=e.items[a];i+=this.listitem(l)}const s=t?"ol":"ul",o=t&&r!==1?' start="'+r+'"':"";return"<"+s+o+`>
`+i+"</"+s+`>
`}listitem(e){var r;let t="";if(e.task){const i=this.checkbox({checked:!!e.checked});e.loose?((r=e.tokens[0])==null?void 0:r.type)==="paragraph"?(e.tokens[0].text=i+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=i+" "+Su(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:i+" ",text:i+" ",escaped:!0}):t+=i+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",r="";for(let s=0;s<e.header.length;s++)r+=this.tablecell(e.header[s]);t+=this.tablerow({text:r});let i="";for(let s=0;s<e.rows.length;s++){const o=e.rows[s];r="";for(let a=0;a<o.length;a++)r+=this.tablecell(o[a]);i+=this.tablerow({text:r})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+i+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const t=this.parser.parseInline(e.tokens),r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+t+`</${r}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${Su(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:r}){const i=this.parser.parseInline(r),s=HF(e);if(s===null)return i;e=s;let o='<a href="'+e+'"';return t&&(o+=' title="'+Su(t)+'"'),o+=">"+i+"</a>",o}image({href:e,title:t,text:r}){const i=HF(e);if(i===null)return Su(r);e=i;let s=`<img src="${e}" alt="${r}"`;return t&&(s+=` title="${Su(t)}"`),s+=">",s}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:Su(e.text)}}class Y2{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}}class sl{constructor(e){Wr(this,"options");Wr(this,"renderer");Wr(this,"textRenderer");this.options=e||ap,this.options.renderer=this.options.renderer||new SS,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Y2}static parse(e,t){return new sl(t).parse(e)}static parseInline(e,t){return new sl(t).parseInline(e)}parse(e,t=!0){var i,s;let r="";for(let o=0;o<e.length;o++){const a=e[o];if((s=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&s[a.type]){const c=a,u=this.options.extensions.renderers[c.type].call({parser:this},c);if(u!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(c.type)){r+=u||"";continue}}const l=a;switch(l.type){case"space":{r+=this.renderer.space(l);continue}case"hr":{r+=this.renderer.hr(l);continue}case"heading":{r+=this.renderer.heading(l);continue}case"code":{r+=this.renderer.code(l);continue}case"table":{r+=this.renderer.table(l);continue}case"blockquote":{r+=this.renderer.blockquote(l);continue}case"list":{r+=this.renderer.list(l);continue}case"html":{r+=this.renderer.html(l);continue}case"paragraph":{r+=this.renderer.paragraph(l);continue}case"text":{let c=l,u=this.renderer.text(c);for(;o+1<e.length&&e[o+1].type==="text";)c=e[++o],u+=`
`+this.renderer.text(c);t?r+=this.renderer.paragraph({type:"paragraph",raw:u,text:u,tokens:[{type:"text",raw:u,text:u,escaped:!0}]}):r+=u;continue}default:{const c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return r}parseInline(e,t=this.renderer){var i,s;let r="";for(let o=0;o<e.length;o++){const a=e[o];if((s=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&s[a.type]){const c=this.options.extensions.renderers[a.type].call({parser:this},a);if(c!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){r+=c||"";continue}}const l=a;switch(l.type){case"escape":{r+=t.text(l);break}case"html":{r+=t.html(l);break}case"link":{r+=t.link(l);break}case"image":{r+=t.image(l);break}case"strong":{r+=t.strong(l);break}case"em":{r+=t.em(l);break}case"codespan":{r+=t.codespan(l);break}case"br":{r+=t.br(l);break}case"del":{r+=t.del(l);break}case"text":{r+=t.text(l);break}default:{const c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return r}}class Ig{constructor(e){Wr(this,"options");Wr(this,"block");this.options=e||ap}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?il.lex:il.lexInline}provideParser(){return this.block?sl.parse:sl.parseInline}}Wr(Ig,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));class TK{constructor(...e){Wr(this,"defaults",Q2());Wr(this,"options",this.setOptions);Wr(this,"parse",this.parseMarkdown(!0));Wr(this,"parseInline",this.parseMarkdown(!1));Wr(this,"Parser",sl);Wr(this,"Renderer",SS);Wr(this,"TextRenderer",Y2);Wr(this,"Lexer",il);Wr(this,"Tokenizer",_S);Wr(this,"Hooks",Ig);this.use(...e)}walkTokens(e,t){var i,s;let r=[];for(const o of e)switch(r=r.concat(t.call(this,o)),o.type){case"table":{const a=o;for(const l of a.header)r=r.concat(this.walkTokens(l.tokens,t));for(const l of a.rows)for(const c of l)r=r.concat(this.walkTokens(c.tokens,t));break}case"list":{const a=o;r=r.concat(this.walkTokens(a.items,t));break}default:{const a=o;(s=(i=this.defaults.extensions)==null?void 0:i.childTokens)!=null&&s[a.type]?this.defaults.extensions.childTokens[a.type].forEach(l=>{const c=a[l].flat(1/0);r=r.concat(this.walkTokens(c,t))}):a.tokens&&(r=r.concat(this.walkTokens(a.tokens,t)))}}return r}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{const i={...r};if(i.async=this.defaults.async||i.async||!1,r.extensions&&(r.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){const o=t.renderers[s.name];o?t.renderers[s.name]=function(...a){let l=s.renderer.apply(this,a);return l===!1&&(l=o.apply(this,a)),l}:t.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const o=t[s.level];o?o.unshift(s.tokenizer):t[s.level]=[s.tokenizer],s.start&&(s.level==="block"?t.startBlock?t.startBlock.push(s.start):t.startBlock=[s.start]:s.level==="inline"&&(t.startInline?t.startInline.push(s.start):t.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(t.childTokens[s.name]=s.childTokens)}),i.extensions=t),r.renderer){const s=this.defaults.renderer||new SS(this.defaults);for(const o in r.renderer){if(!(o in s))throw new Error(`renderer '${o}' does not exist`);if(["options","parser"].includes(o))continue;const a=o,l=r.renderer[a],c=s[a];s[a]=(...u)=>{let d=l.apply(s,u);return d===!1&&(d=c.apply(s,u)),d||""}}i.renderer=s}if(r.tokenizer){const s=this.defaults.tokenizer||new _S(this.defaults);for(const o in r.tokenizer){if(!(o in s))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;const a=o,l=r.tokenizer[a],c=s[a];s[a]=(...u)=>{let d=l.apply(s,u);return d===!1&&(d=c.apply(s,u)),d}}i.tokenizer=s}if(r.hooks){const s=this.defaults.hooks||new Ig;for(const o in r.hooks){if(!(o in s))throw new Error(`hook '${o}' does not exist`);if(["options","block"].includes(o))continue;const a=o,l=r.hooks[a],c=s[a];Ig.passThroughHooks.has(o)?s[a]=u=>{if(this.defaults.async)return Promise.resolve(l.call(s,u)).then(h=>c.call(s,h));const d=l.call(s,u);return c.call(s,d)}:s[a]=(...u)=>{let d=l.apply(s,u);return d===!1&&(d=c.apply(s,u)),d}}i.hooks=s}if(r.walkTokens){const s=this.defaults.walkTokens,o=r.walkTokens;i.walkTokens=function(a){let l=[];return l.push(o.call(this,a)),s&&(l=l.concat(s.call(this,a))),l}}this.defaults={...this.defaults,...i}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return il.lex(e,t??this.defaults)}parser(e,t){return sl.parse(e,t??this.defaults)}parseMarkdown(e){return(r,i)=>{const s={...i},o={...this.defaults,...s},a=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&s.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof r>"u"||r===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));o.hooks&&(o.hooks.options=o,o.hooks.block=e);const l=o.hooks?o.hooks.provideLexer():e?il.lex:il.lexInline,c=o.hooks?o.hooks.provideParser():e?sl.parse:sl.parseInline;if(o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(r):r).then(u=>l(u,o)).then(u=>o.hooks?o.hooks.processAllTokens(u):u).then(u=>o.walkTokens?Promise.all(this.walkTokens(u,o.walkTokens)).then(()=>u):u).then(u=>c(u,o)).then(u=>o.hooks?o.hooks.postprocess(u):u).catch(a);try{o.hooks&&(r=o.hooks.preprocess(r));let u=l(r,o);o.hooks&&(u=o.hooks.processAllTokens(u)),o.walkTokens&&this.walkTokens(u,o.walkTokens);let d=c(u,o);return o.hooks&&(d=o.hooks.postprocess(d)),d}catch(u){return a(u)}}}onError(e,t){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const i="<p>An error occurred:</p><pre>"+Su(r.message+"",!0)+"</pre>";return t?Promise.resolve(i):i}if(t)return Promise.reject(r);throw r}}}const km=new TK;function fr(n,e){return km.parse(n,e)}fr.options=fr.setOptions=function(n){return km.setOptions(n),fr.defaults=km.defaults,gK(fr.defaults),fr};fr.getDefaults=Q2;fr.defaults=ap;fr.use=function(...n){return km.use(...n),fr.defaults=km.defaults,gK(fr.defaults),fr};fr.walkTokens=function(n,e){return km.walkTokens(n,e)};fr.parseInline=km.parseInline;fr.Parser=sl;fr.parser=sl.parse;fr.Renderer=SS;fr.TextRenderer=Y2;fr.Lexer=il;fr.lexer=il.lex;fr.Tokenizer=_S;fr.Hooks=Ig;fr.parse=fr;const Sxe=fr.options,Axe=fr.setOptions,Exe=fr.use,Cxe=fr.walkTokens,wxe=fr.parseInline,Txe=fr,xxe=sl.parse,Ixe=il.lex,bxe=Object.freeze(Object.defineProperty({__proto__:null,Hooks:Ig,Lexer:il,Marked:TK,Parser:sl,Renderer:SS,TextRenderer:Y2,Tokenizer:_S,get defaults(){return ap},getDefaults:Q2,lexer:Ixe,marked:fr,options:Sxe,parse:Txe,parseInline:wxe,parser:xxe,setOptions:Axe,use:Exe,walkTokens:Cxe},Symbol.toStringTag,{value:"Module"}));/*! @license DOMPurify 3.2.3 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.3/LICENSE */const{entries:xK,setPrototypeOf:WF,isFrozen:Mxe,getPrototypeOf:Rxe,getOwnPropertyDescriptor:Nxe}=Object;let{freeze:ca,seal:rc,create:IK}=Object,{apply:zN,construct:UN}=typeof Reflect<"u"&&Reflect;ca||(ca=function(e){return e});rc||(rc=function(e){return e});zN||(zN=function(e,t,r){return e.apply(t,r)});UN||(UN=function(e,t){return new e(...t)});const kC=hl(Array.prototype.forEach),qF=hl(Array.prototype.pop),Wy=hl(Array.prototype.push),vT=hl(String.prototype.toLowerCase),k3=hl(String.prototype.toString),QF=hl(String.prototype.match),qy=hl(String.prototype.replace),Pxe=hl(String.prototype.indexOf),Oxe=hl(String.prototype.trim),Ic=hl(Object.prototype.hasOwnProperty),qo=hl(RegExp.prototype.test),Qy=Dxe(TypeError);function hl(n){return function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return zN(n,e,r)}}function Dxe(n){return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return UN(n,t)}}function sr(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:vT;WF&&WF(n,null);let r=e.length;for(;r--;){let i=e[r];if(typeof i=="string"){const s=t(i);s!==i&&(Mxe(e)||(e[r]=s),i=s)}n[i]=!0}return n}function Lxe(n){for(let e=0;e<n.length;e++)Ic(n,e)||(n[e]=null);return n}function em(n){const e=IK(null);for(const[t,r]of xK(n))Ic(n,t)&&(Array.isArray(r)?e[t]=Lxe(r):r&&typeof r=="object"&&r.constructor===Object?e[t]=em(r):e[t]=r);return e}function Jy(n,e){for(;n!==null;){const r=Nxe(n,e);if(r){if(r.get)return hl(r.get);if(typeof r.value=="function")return hl(r.value)}n=Rxe(n)}function t(){return null}return t}const JF=ca(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),B3=ca(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),F3=ca(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),kxe=ca(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),z3=ca(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Bxe=ca(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),KF=ca(["#text"]),YF=ca(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),U3=ca(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),XF=ca(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),BC=ca(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Fxe=rc(/\{\{[\w\W]*|[\w\W]*\}\}/gm),zxe=rc(/<%[\w\W]*|[\w\W]*%>/gm),Uxe=rc(/\$\{[\w\W]*}/gm),jxe=rc(/^data-[\-\w.\u00B7-\uFFFF]+$/),Gxe=rc(/^aria-[\-\w]+$/),bK=rc(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Hxe=rc(/^(?:\w+script|data):/i),Vxe=rc(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),MK=rc(/^html$/i),$xe=rc(/^[a-z][.\w]*(-[.\w]+)+$/i);var ZF=Object.freeze({__proto__:null,ARIA_ATTR:Gxe,ATTR_WHITESPACE:Vxe,CUSTOM_ELEMENT:$xe,DATA_ATTR:jxe,DOCTYPE_NAME:MK,ERB_EXPR:zxe,IS_ALLOWED_URI:bK,IS_SCRIPT_OR_DATA:Hxe,MUSTACHE_EXPR:Fxe,TMPLIT_EXPR:Uxe});const Ky={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},Wxe=function(){return typeof window>"u"?null:window},qxe=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";t&&t.hasAttribute(i)&&(r=t.getAttribute(i));const s="dompurify"+(r?"#"+r:"");try{return e.createPolicy(s,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}},ez=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function RK(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Wxe();const e=Ie=>RK(Ie);if(e.version="3.2.3",e.removed=[],!n||!n.document||n.document.nodeType!==Ky.document)return e.isSupported=!1,e;let{document:t}=n;const r=t,i=r.currentScript,{DocumentFragment:s,HTMLTemplateElement:o,Node:a,Element:l,NodeFilter:c,NamedNodeMap:u=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:d,DOMParser:h,trustedTypes:f}=n,m=l.prototype,g=Jy(m,"cloneNode"),v=Jy(m,"remove"),y=Jy(m,"nextSibling"),A=Jy(m,"childNodes"),C=Jy(m,"parentNode");if(typeof o=="function"){const Ie=t.createElement("template");Ie.content&&Ie.content.ownerDocument&&(t=Ie.content.ownerDocument)}let T,x="";const{implementation:R,createNodeIterator:N,createDocumentFragment:M,getElementsByTagName:O}=t,{importNode:P}=r;let z=ez();e.isSupported=typeof xK=="function"&&typeof C=="function"&&R&&R.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:V,ERB_EXPR:$,TMPLIT_EXPR:B,DATA_ATTR:q,ARIA_ATTR:K,IS_SCRIPT_OR_DATA:se,ATTR_WHITESPACE:W,CUSTOM_ELEMENT:ee}=ZF;let{IS_ALLOWED_URI:Q}=ZF,Y=null;const ae=sr({},[...JF,...B3,...F3,...z3,...KF]);let fe=null;const we=sr({},[...YF,...U3,...XF,...BC]);let ge=Object.seal(IK(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Se=null,Ke=null,xe=!0,Qe=!0,We=!1,Ve=!0,te=!1,ce=!0,de=!1,Pe=!1,Te=!1,De=!1,Ge=!1,it=!1,ke=!0,ct=!1;const oe="user-content-";let ne=!0,Oe=!1,st={},Je=null;const ft=sr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let zt=null;const je=sr({},["audio","video","img","source","image","track"]);let Bt=null;const Ct=sr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),wt="http://www.w3.org/1998/Math/MathML",xt="http://www.w3.org/2000/svg",qt="http://www.w3.org/1999/xhtml";let cn=qt,Ae=!1,ue=null;const et=sr({},[wt,xt,qt],k3);let Be=sr({},["mi","mo","mn","ms","mtext"]),lt=sr({},["annotation-xml"]);const St=sr({},["title","style","font","a","script"]);let nn=null;const Dr=["application/xhtml+xml","text/html"],mr="text/html";let wn=null,yn=null;const jr=t.createElement("form"),Mr=function(ye){return ye instanceof RegExp||ye instanceof Function},Wi=function(){let ye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(yn&&yn===ye)){if((!ye||typeof ye!="object")&&(ye={}),ye=em(ye),nn=Dr.indexOf(ye.PARSER_MEDIA_TYPE)===-1?mr:ye.PARSER_MEDIA_TYPE,wn=nn==="application/xhtml+xml"?k3:vT,Y=Ic(ye,"ALLOWED_TAGS")?sr({},ye.ALLOWED_TAGS,wn):ae,fe=Ic(ye,"ALLOWED_ATTR")?sr({},ye.ALLOWED_ATTR,wn):we,ue=Ic(ye,"ALLOWED_NAMESPACES")?sr({},ye.ALLOWED_NAMESPACES,k3):et,Bt=Ic(ye,"ADD_URI_SAFE_ATTR")?sr(em(Ct),ye.ADD_URI_SAFE_ATTR,wn):Ct,zt=Ic(ye,"ADD_DATA_URI_TAGS")?sr(em(je),ye.ADD_DATA_URI_TAGS,wn):je,Je=Ic(ye,"FORBID_CONTENTS")?sr({},ye.FORBID_CONTENTS,wn):ft,Se=Ic(ye,"FORBID_TAGS")?sr({},ye.FORBID_TAGS,wn):{},Ke=Ic(ye,"FORBID_ATTR")?sr({},ye.FORBID_ATTR,wn):{},st=Ic(ye,"USE_PROFILES")?ye.USE_PROFILES:!1,xe=ye.ALLOW_ARIA_ATTR!==!1,Qe=ye.ALLOW_DATA_ATTR!==!1,We=ye.ALLOW_UNKNOWN_PROTOCOLS||!1,Ve=ye.ALLOW_SELF_CLOSE_IN_ATTR!==!1,te=ye.SAFE_FOR_TEMPLATES||!1,ce=ye.SAFE_FOR_XML!==!1,de=ye.WHOLE_DOCUMENT||!1,De=ye.RETURN_DOM||!1,Ge=ye.RETURN_DOM_FRAGMENT||!1,it=ye.RETURN_TRUSTED_TYPE||!1,Te=ye.FORCE_BODY||!1,ke=ye.SANITIZE_DOM!==!1,ct=ye.SANITIZE_NAMED_PROPS||!1,ne=ye.KEEP_CONTENT!==!1,Oe=ye.IN_PLACE||!1,Q=ye.ALLOWED_URI_REGEXP||bK,cn=ye.NAMESPACE||qt,Be=ye.MATHML_TEXT_INTEGRATION_POINTS||Be,lt=ye.HTML_INTEGRATION_POINTS||lt,ge=ye.CUSTOM_ELEMENT_HANDLING||{},ye.CUSTOM_ELEMENT_HANDLING&&Mr(ye.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ge.tagNameCheck=ye.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ye.CUSTOM_ELEMENT_HANDLING&&Mr(ye.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ge.attributeNameCheck=ye.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ye.CUSTOM_ELEMENT_HANDLING&&typeof ye.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ge.allowCustomizedBuiltInElements=ye.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),te&&(Qe=!1),Ge&&(De=!0),st&&(Y=sr({},KF),fe=[],st.html===!0&&(sr(Y,JF),sr(fe,YF)),st.svg===!0&&(sr(Y,B3),sr(fe,U3),sr(fe,BC)),st.svgFilters===!0&&(sr(Y,F3),sr(fe,U3),sr(fe,BC)),st.mathMl===!0&&(sr(Y,z3),sr(fe,XF),sr(fe,BC))),ye.ADD_TAGS&&(Y===ae&&(Y=em(Y)),sr(Y,ye.ADD_TAGS,wn)),ye.ADD_ATTR&&(fe===we&&(fe=em(fe)),sr(fe,ye.ADD_ATTR,wn)),ye.ADD_URI_SAFE_ATTR&&sr(Bt,ye.ADD_URI_SAFE_ATTR,wn),ye.FORBID_CONTENTS&&(Je===ft&&(Je=em(Je)),sr(Je,ye.FORBID_CONTENTS,wn)),ne&&(Y["#text"]=!0),de&&sr(Y,["html","head","body"]),Y.table&&(sr(Y,["tbody"]),delete Se.tbody),ye.TRUSTED_TYPES_POLICY){if(typeof ye.TRUSTED_TYPES_POLICY.createHTML!="function")throw Qy('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof ye.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Qy('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');T=ye.TRUSTED_TYPES_POLICY,x=T.createHTML("")}else T===void 0&&(T=qxe(f,i)),T!==null&&typeof x=="string"&&(x=T.createHTML(""));ca&&ca(ye),yn=ye}},nr=sr({},[...B3,...F3,...kxe]),ma=sr({},[...z3,...Bxe]),_l=function(ye){let rt=C(ye);(!rt||!rt.tagName)&&(rt={namespaceURI:cn,tagName:"template"});const at=vT(ye.tagName),$n=vT(rt.tagName);return ue[ye.namespaceURI]?ye.namespaceURI===xt?rt.namespaceURI===qt?at==="svg":rt.namespaceURI===wt?at==="svg"&&($n==="annotation-xml"||Be[$n]):!!nr[at]:ye.namespaceURI===wt?rt.namespaceURI===qt?at==="math":rt.namespaceURI===xt?at==="math"&&lt[$n]:!!ma[at]:ye.namespaceURI===qt?rt.namespaceURI===xt&&!lt[$n]||rt.namespaceURI===wt&&!Be[$n]?!1:!ma[at]&&(St[at]||!nr[at]):!!(nn==="application/xhtml+xml"&&ue[ye.namespaceURI]):!1},qi=function(ye){Wy(e.removed,{element:ye});try{C(ye).removeChild(ye)}catch{v(ye)}},Yn=function(ye,rt){try{Wy(e.removed,{attribute:rt.getAttributeNode(ye),from:rt})}catch{Wy(e.removed,{attribute:null,from:rt})}if(rt.removeAttribute(ye),ye==="is")if(De||Ge)try{qi(rt)}catch{}else try{rt.setAttribute(ye,"")}catch{}},re=function(ye){let rt=null,at=null;if(Te)ye="<remove></remove>"+ye;else{const rn=QF(ye,/^[\r\n\t ]+/);at=rn&&rn[0]}nn==="application/xhtml+xml"&&cn===qt&&(ye='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ye+"</body></html>");const $n=T?T.createHTML(ye):ye;if(cn===qt)try{rt=new h().parseFromString($n,nn)}catch{}if(!rt||!rt.documentElement){rt=R.createDocument(cn,"template",null);try{rt.documentElement.innerHTML=Ae?x:$n}catch{}}const qn=rt.body||rt.documentElement;return ye&&at&&qn.insertBefore(t.createTextNode(at),qn.childNodes[0]||null),cn===qt?O.call(rt,de?"html":"body")[0]:de?rt.documentElement:qn},Re=function(ye){return N.call(ye.ownerDocument||ye,ye,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},qe=function(ye){return ye instanceof d&&(typeof ye.nodeName!="string"||typeof ye.textContent!="string"||typeof ye.removeChild!="function"||!(ye.attributes instanceof u)||typeof ye.removeAttribute!="function"||typeof ye.setAttribute!="function"||typeof ye.namespaceURI!="string"||typeof ye.insertBefore!="function"||typeof ye.hasChildNodes!="function")},Le=function(ye){return typeof a=="function"&&ye instanceof a};function $e(Ie,ye,rt){kC(Ie,at=>{at.call(e,ye,rt,yn)})}const Qt=function(ye){let rt=null;if($e(z.beforeSanitizeElements,ye,null),qe(ye))return qi(ye),!0;const at=wn(ye.nodeName);if($e(z.uponSanitizeElement,ye,{tagName:at,allowedTags:Y}),ye.hasChildNodes()&&!Le(ye.firstElementChild)&&qo(/<[/\w]/g,ye.innerHTML)&&qo(/<[/\w]/g,ye.textContent)||ye.nodeType===Ky.progressingInstruction||ce&&ye.nodeType===Ky.comment&&qo(/<[/\w]/g,ye.data))return qi(ye),!0;if(!Y[at]||Se[at]){if(!Se[at]&&ln(at)&&(ge.tagNameCheck instanceof RegExp&&qo(ge.tagNameCheck,at)||ge.tagNameCheck instanceof Function&&ge.tagNameCheck(at)))return!1;if(ne&&!Je[at]){const $n=C(ye)||ye.parentNode,qn=A(ye)||ye.childNodes;if(qn&&$n){const rn=qn.length;for(let Rt=rn-1;Rt>=0;--Rt){const rr=g(qn[Rt],!0);rr.__removalCount=(ye.__removalCount||0)+1,$n.insertBefore(rr,y(ye))}}}return qi(ye),!0}return ye instanceof l&&!_l(ye)||(at==="noscript"||at==="noembed"||at==="noframes")&&qo(/<\/no(script|embed|frames)/i,ye.innerHTML)?(qi(ye),!0):(te&&ye.nodeType===Ky.text&&(rt=ye.textContent,kC([V,$,B],$n=>{rt=qy(rt,$n," ")}),ye.textContent!==rt&&(Wy(e.removed,{element:ye.cloneNode()}),ye.textContent=rt)),$e(z.afterSanitizeElements,ye,null),!1)},Jt=function(ye,rt,at){if(ke&&(rt==="id"||rt==="name")&&(at in t||at in jr))return!1;if(!(Qe&&!Ke[rt]&&qo(q,rt))){if(!(xe&&qo(K,rt))){if(!fe[rt]||Ke[rt]){if(!(ln(ye)&&(ge.tagNameCheck instanceof RegExp&&qo(ge.tagNameCheck,ye)||ge.tagNameCheck instanceof Function&&ge.tagNameCheck(ye))&&(ge.attributeNameCheck instanceof RegExp&&qo(ge.attributeNameCheck,rt)||ge.attributeNameCheck instanceof Function&&ge.attributeNameCheck(rt))||rt==="is"&&ge.allowCustomizedBuiltInElements&&(ge.tagNameCheck instanceof RegExp&&qo(ge.tagNameCheck,at)||ge.tagNameCheck instanceof Function&&ge.tagNameCheck(at))))return!1}else if(!Bt[rt]){if(!qo(Q,qy(at,W,""))){if(!((rt==="src"||rt==="xlink:href"||rt==="href")&&ye!=="script"&&Pxe(at,"data:")===0&&zt[ye])){if(!(We&&!qo(se,qy(at,W,"")))){if(at)return!1}}}}}}return!0},ln=function(ye){return ye!=="annotation-xml"&&QF(ye,ee)},Xt=function(ye){$e(z.beforeSanitizeAttributes,ye,null);const{attributes:rt}=ye;if(!rt||qe(ye))return;const at={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:fe,forceKeepAttr:void 0};let $n=rt.length;for(;$n--;){const qn=rt[$n],{name:rn,namespaceURI:Rt,value:rr}=qn,mn=wn(rn);let Tn=rn==="value"?rr:Oxe(rr);if(at.attrName=mn,at.attrValue=Tn,at.keepAttr=!0,at.forceKeepAttr=void 0,$e(z.uponSanitizeAttribute,ye,at),Tn=at.attrValue,ct&&(mn==="id"||mn==="name")&&(Yn(rn,ye),Tn=oe+Tn),ce&&qo(/((--!?|])>)|<\/(style|title)/i,Tn)){Yn(rn,ye);continue}if(at.forceKeepAttr||(Yn(rn,ye),!at.keepAttr))continue;if(!Ve&&qo(/\/>/i,Tn)){Yn(rn,ye);continue}te&&kC([V,$,B],gr=>{Tn=qy(Tn,gr," ")});const Gr=wn(ye.nodeName);if(Jt(Gr,mn,Tn)){if(T&&typeof f=="object"&&typeof f.getAttributeType=="function"&&!Rt)switch(f.getAttributeType(Gr,mn)){case"TrustedHTML":{Tn=T.createHTML(Tn);break}case"TrustedScriptURL":{Tn=T.createScriptURL(Tn);break}}try{Rt?ye.setAttributeNS(Rt,rn,Tn):ye.setAttribute(rn,Tn),qe(ye)?qi(ye):qF(e.removed)}catch{}}}$e(z.afterSanitizeAttributes,ye,null)},Sn=function Ie(ye){let rt=null;const at=Re(ye);for($e(z.beforeSanitizeShadowDOM,ye,null);rt=at.nextNode();)$e(z.uponSanitizeShadowNode,rt,null),Qt(rt),Xt(rt),rt.content instanceof s&&Ie(rt.content);$e(z.afterSanitizeShadowDOM,ye,null)};return e.sanitize=function(Ie){let ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},rt=null,at=null,$n=null,qn=null;if(Ae=!Ie,Ae&&(Ie="<!-->"),typeof Ie!="string"&&!Le(Ie))if(typeof Ie.toString=="function"){if(Ie=Ie.toString(),typeof Ie!="string")throw Qy("dirty is not a string, aborting")}else throw Qy("toString is not a function");if(!e.isSupported)return Ie;if(Pe||Wi(ye),e.removed=[],typeof Ie=="string"&&(Oe=!1),Oe){if(Ie.nodeName){const rr=wn(Ie.nodeName);if(!Y[rr]||Se[rr])throw Qy("root node is forbidden and cannot be sanitized in-place")}}else if(Ie instanceof a)rt=re("<!---->"),at=rt.ownerDocument.importNode(Ie,!0),at.nodeType===Ky.element&&at.nodeName==="BODY"||at.nodeName==="HTML"?rt=at:rt.appendChild(at);else{if(!De&&!te&&!de&&Ie.indexOf("<")===-1)return T&&it?T.createHTML(Ie):Ie;if(rt=re(Ie),!rt)return De?null:it?x:""}rt&&Te&&qi(rt.firstChild);const rn=Re(Oe?Ie:rt);for(;$n=rn.nextNode();)Qt($n),Xt($n),$n.content instanceof s&&Sn($n.content);if(Oe)return Ie;if(De){if(Ge)for(qn=M.call(rt.ownerDocument);rt.firstChild;)qn.appendChild(rt.firstChild);else qn=rt;return(fe.shadowroot||fe.shadowrootmode)&&(qn=P.call(r,qn,!0)),qn}let Rt=de?rt.outerHTML:rt.innerHTML;return de&&Y["!doctype"]&&rt.ownerDocument&&rt.ownerDocument.doctype&&rt.ownerDocument.doctype.name&&qo(MK,rt.ownerDocument.doctype.name)&&(Rt="<!DOCTYPE "+rt.ownerDocument.doctype.name+`>
`+Rt),te&&kC([V,$,B],rr=>{Rt=qy(Rt,rr," ")}),T&&it?T.createHTML(Rt):Rt},e.setConfig=function(){let Ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Wi(Ie),Pe=!0},e.clearConfig=function(){yn=null,Pe=!1},e.isValidAttribute=function(Ie,ye,rt){yn||Wi({});const at=wn(Ie),$n=wn(ye);return Jt(at,$n,rt)},e.addHook=function(Ie,ye){typeof ye=="function"&&Wy(z[Ie],ye)},e.removeHook=function(Ie){return qF(z[Ie])},e.removeHooks=function(Ie){z[Ie]=[]},e.removeAllHooks=function(){z=ez()},e}var NK=RK();const Qxe=Object.freeze(Object.defineProperty({__proto__:null,default:NK},Symbol.toStringTag,{value:"Module"})),PK=({className:n,title:e})=>w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",...e?{}:{"aria-hidden":"true"},focusable:"false",role:"img",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",viewBox:"0 0 24 24",className:n,"aria-label":e,children:[w.jsx("circle",{cx:"12",cy:"12",r:"10"}),w.jsx("path",{d:"M9.09 9a3 3 0 015.83 1c0 2-3 3-3 3"}),w.jsx("path",{d:"M12 17L12.01 17"})]}),OK=({className:n,title:e})=>w.jsxs("svg",{...e?{}:{"aria-hidden":"true"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",focusable:"false",role:"img",className:n,"aria-label":e,children:[w.jsx("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),w.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]}),Jxe=({className:n,title:e})=>w.jsxs("svg",{...e?{}:{"aria-hidden":"true"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",focusable:"false",role:"img",className:n,"aria-label":e,children:[w.jsx("path",{d:"M10 9.5 8 12l2 2.5"}),w.jsx("path",{d:"m14 9.5 2 2.5-2 2.5"}),w.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"})]}),tz=({rows:n,className:e,innerClassName:t,btnClassName:r,lineHeightMultiplier:i=1.2,defaultExpanded:s=!1,expandSymbol:o=()=>"...",collapseSymbol:a=c=>c==="it"?"Mostra meno":"Show less",children:l})=>{const{i18n:c}=ur(),u=c.language,d=a(u),h=o(u),[f,m]=D.useState(s),[g,v]=D.useState(!1),[y,A]=D.useState(16),C=D.useRef(null);return D.useEffect(()=>{if(C.current){let T=C.current.getBoundingClientRect().height,x=getComputedStyle(C.current),R=x.lineHeight,N=R==="normal"||!(R!=null&&R.length)?i*parseInt(x.fontSize,10):parseInt(R,10);console.table({rows:n,lineHeight:N,height:T,maxHeight:n*N,needsExpanding:T>n*N}),A(N),T&&T>n*N&&v(!0)}},[n,C.current]),w.jsxs("div",{className:er("memori-expandable",e),children:[w.jsx("div",{ref:C,className:er("memori-expandable--inner",t),style:{maxHeight:f||!g?"9999px":`${y*n}px`},children:l}),g&&!f&&w.jsx(Pt,{ghost:!0,padded:!1,className:r,onClick:()=>m(!0),children:h}),g&&f&&w.jsx(Pt,{ghost:!0,padded:!1,className:r,onClick:()=>m(!1),children:d})]})},Kxe={TENANT_NOT_FOUND:-1,TENANT_REGISTRATION_DISABLED:-2,TENANT_MISSING_NAME:-3,TENANT_MAX_USERS_REACHED:-4,TENANT_MAX_ADMINS_REACHED:-5,TENANT_ALREADY_EXISTS:-6,TENANT_MISSING_DESCRIPTION:-7,TENANT_CANT_SET_COMPLETION_PROVIDER:-8,USER_NOT_CONFIRMED:-11,USER_NOT_FOUND:-12,USER_OR_PASSWORD_INVALID:-13,USER_MUST_CHANGE_PASSWORD:-14,USER_MUST_ENTER_VERIFICATION_CODE:-15,USER_MISSING_TENANT:-21,USER_MISSING_NAME:-22,USER_MISSING_PASSWORD:-23,USER_MISSING_EMAIL:-24,USER_MISSING_VERIFICATION_CODE:-25,USER_NAME_ALREADY_USED:-26,USER_PASSWORD_NOT_CONFORMING_TO_POLICY:-27,USER_EMAIL_ALREADY_USED:-28,USER_EMAIL_INVALID:-29,USER_VERIFICATION_CODE_INVALID:-30,USER_MISSING_NAME_OR_EMAIL:-31,USER_NAME_INVALID:-32,USER_HAS_ONE_OR_MORE_MEMORI:-33,USER_MISSING_NEW_PASSWORD:-34,USER_CANT_CREATE_MEMORI:-35,USER_MAX_MEMORI_REACHED:-36,USER_TOO_MANY_ATTEMPTS:-38,USER_MUST_ACCEPT_TNC_AND_PP:-39,USER_BIRTH_DATE_CANT_BE_CHANGED:-40,USER_CANT_SET_COMPLETION_PROVIDER:-41,USER_CANT_ENABLE_DEEP_THOUGHT:-42,USER_CANT_ENABLE_DCM_INTEGRATION:-43,USER_CANT_ENABLE_CHAINING_OR_BOARD_OF_EXPERTS:-44,USER_CREATION_BILLING_DENIED_PERMISSION:-46,USER_HAS_ONE_OR_MORE_COMPLETION_CONFIGS:-47,USER_CANT_BE_DELETED:-48,MEMORI_NOT_FOUND:-51,MEMORI_NOT_ACCESSIBLE:-52,MEMORI_ONLY_OWNER_CAN_CHANGE_GIVER_TAG_AND_PIN:-53,SESSION_NOT_FOUND:-101,SESSION_IS_NOT_ADMINISTRATIVE:-102,SESSION_EXPIRED:-103,MEMORI_MISSING_CONFIGURATION:-201,MEMORI_CONFIGURATION_NOT_FOUND:-202,MEMORI_INVALID_PRIVACY_TYPE:-203,MEMORI_MISSING_PASSWORD:-204,MEMORI_INVALID_TOTAL_NUMBER_OF_RECOVERY_TOKENS:-205,MEMORI_INVALID_MINIMUM_NUMBER_OF_RECOVERY_TOKENS:-206,MEMORI_INVALID_VOICE_TYPE:-207,MEMORI_MISSING_NAME:-208,MEMORI_MISSING_PASSWORD_OR_RECOVERY_TOKENS:-209,MEMORI_INVALID_ID:-210,MEMORI_NAME_ALREADY_USED:-211,MEMORI_INVALID_PIN:-212,MEMORI_GIVER_TAG_PIN_CHANGE_REQUIRES_SEPARATE_OPERATION:-213,MEMORI_NO_PASSWORD_WHEN_PUBLIC:-214,MEMORI_DEEP_THOUGHT_REQUIRES_COMPLETIONS:-215,MEMORI_BOARD_OF_EXPERTS_REQUIRES_COMPLETIONS:-216,MEMORI_INVALID_COMPLETION_CONFIG:-217,MEMORI_TRANSFER_MISSING_DESTINATION_USER:-231,MEMORI_TRANSFER_INVALID_DESTINATION_USER_ID:-232,MEMORI_TRANSFER_DESTINATION_USER_DATA_INCONSISTENT:-233,MEMORI_TRANSFER_NOTHING_TO_DO:-234,MEMORI_CONFIGURATION_CANT_BE_CHANGED:-251,MEMORI_MISSING_NEW_PASSWORD:-252,MEMORI_SESSIONS_INVALID_DATE_FROM_FORMAT:-261,MEMORI_SESSIONS_INVALID_DATE_TO_FORMAT:-262,MEMORI_FEATURE_REQUIRES_SUBSCRIPTION:-271,INTEGRATION_NOT_FOUND:-301,INTEGRATION_INVALID_TYPE:-401,INTEGRATION_ALREADY_EXISTS:-402,INTEGRATION_MEMORI_IS_NOT_PUBLIC:-403,INTEGRATION_MISSING_INVOCATION_TEXT:-404,INTEGRATION_MISSING_DEVICE_EMAILS:-405,INTEGRATION_MEMORI_IS_EMPTY:-406,INTEGRATION_MISSING_PRIVACY_POLICY:-407,INTEGRATION_MISSING_CATEGORY:-408,INTEGRATION_MISSING_DESCRIPTION:-409,INTEGRATION_INVALID_INVOCATION_TEXT:-410,INTEGRATION_GOOGLE_NO_MORE_AVAILABLE:-411,UPLOAD_REQUIRES_MULTIPART_ENCODING:-501,UPLOAD_MISSING_CONTENT_TYPE_BOUNDARY:-502,UPLOAD_MAX_LENGTH_EXCEEDED:-503,UPLOAD_FILE_IS_EMPTY:-504,UPLOAD_INVALID_FILE_TYPE_OR_SIGNATURE:-505,UPLOAD_MISSING_FILE_NAME:-506,UPLOAD_INVALID_MEMORY_ID:-507,UPLOAD_MISSING_FILE_CONTENT:-508,ASSET_NOT_FOUND:-601,ASSET_NOT_ACCESSIBLE:-602,ASSET_MISSING_SESSION_ID:-603,ASSET_INVALID_FILE_NAME:-604,INVITATION_NOT_FOUND:-701,INVITATION_NOT_ACCESSIBLE:-702,INVITATION_ALREADY_ACCEPTED:-703,INVITATION_ALREADY_REJECTED:-704,INVITATION_MISSING_DESTINATION_EMAIL:-705,INVITATION_DESTINATION_EMAIL_INVALID:-706,INVITATION_MISSING_TAG:-707,INVITATION_MISSING_PIN:-708,INVITATION_INVALID_PIN:-709,INVITATION_INVALID_TYPE:-710,INVITATION_MISSING_DESTINATION_NAME:-711,INVITATION_TAG_PIN_CANT_BE_CHANGED:-712,INVITATION_CANT_BE_CHANGED:-713,ACTIONLOG_INVALID_USER_ID:-801,ACTIONLOG_INVALID_DATE_FROM_FORMAT:-802,ACTIONLOG_INVALID_DATE_TO_FORMAT:-803,ACTIONLOG_INVALID_MEMORI_ID:-804,CONSUMPTIONLOG_INVALID_TYPE:-901,CONSUMPTIONLOG_INVALID_DATE_FROM_FORMAT:-902,CONSUMPTIONLOG_INVALID_DATE_TO_FORMAT:-903,CONSUMPTIONLOG_INVALID_USER_ID:-904,CONSUMPTIONLOG_INVALID_MEMORI_ID:-905,NOTIFICATIONPREFS_INVALID_CHATLOG_EXTRACTION_PERIOD:-1001,PROCESS_INVALID_TYPE:-1401,PROCESS_ALREADY_RUNNING:-1401,PROCESS_NOT_FOUND:-1402,IMPORTCSV_MISSING_ROWS:-1501,IMPORTCSV_MISSING_CSV:-1502,IMPORTCSV_MISSING_SEPARATOR:-1503,IMPORTCSV_INVALID_SEPARATOR:-1504,IMPORTCSV_MISSING_HEADERS:-1505,IMPORTCSV_MISSING_TITLE_VARIANT_SEPARATOR:-1506,IMPORTCSV_INVALID_RECEIVER_ID:-1507,IMPORTCSV_INVALID_MEDIA_LINK:-1508,IMPORTCSV_INVALID_LINK_TITLE_HANDLING:-1509,IMPORTCSV_UNDETECTABLE_CHAR_ENCODING:-1521,IMPORTCSV_CANT_IMPORT_TO_SECRET_MEMORI:-1531,IMPORTTXT_MISSING_ROWS:-1601,IMPORTTXT_INVALID_GRANULARITY:-1602,IMPORTTXT_INVALID_RECEIVER_ID:-1603,IMPORTTXT_INVALID_MEDIA_LINK:-1604,IMPORTTXT_INVALID_LINK_TITLE_HANDLING:-1605,IMPORTTXT_UNDETECTABLE_CHAR_ENCODING:-1621,IMPORTTXT_CANT_IMPORT_TO_SECRET_MEMORI:-1631,IMPORTTXT_IMPORT_LIMIT_EXCEEDED:-1632,IMPORTTXT_IMPORT_ON_GPT4_REQUIRES_API_KEY:-1633,IMPORTTXT_IMPORT_REQUIRES_PAYING:-1634,IMPORTTXT_BILLING_DENIED_PERMISSION:-1635,EXPORTCSV_MISSING_CSV_SPECS:-1801,EXPORTCSV_MISSING_SEPARATOR:-1802,EXPORTCSV_INVALID_SEPARATOR:-1803,EXPORTCSV_MISSING_TITLE_VARIANT_SEPARATOR:-1804,EXPORTCSV_MISSING_NEW_LINE_CHAR:-1805,EXPORTCSV_INVALID_NEW_LINE_CHAR:-1806,EXPORTCSV_MISSING_PASSWORD:-1811,EXPORTJSONL_MISSING_JSONL_SPECS:-1821,EXPORTJSONL_MISSING_PLATFORM:-1822,EXPORTJSONL_INVALID_PLATFORM:-1823,EXPORTJSONL_MISSING_PASSWORD:-1831,EXPORTJSONL_EXPORT_REQUIRES_PAYING:-1832,ANALYSIS_MISSING_QUERY:-1901,ANALYSIS_CANT_ANALYZE_SECRET_MEMORI:-1902,ANALYSIS_USER_QUERY_MATCH_REQUIRES_DEEP_THOUGHT:-1903,BADGE_ASSIGNMENT_WRONG_OR_MISSING_CREDENTIALS:-2001,BADGE_ASSIGNMENT_MISSING_REF_ID:-2002,BADGE_ASSIGNMENT_OUTCOME_NOT_FOUND:-2003,BADGE_ASSIGNMENT_MISSING_ASSERTION_URL:-2004,BADGE_ASSIGNMENT_MISSING_BADGE_URL:-2005,BADGE_ASSIGNMENT_MISSING_ISSUER_URL:-2006,BADGE_ASSIGNMENT_INVALID_URL:-2007,BADGE_ASSIGNMENT_MISSING_RECIPIENT:-2021,BADGE_ASSIGNMENT_UNKNOWN_RECIPIENT_TYPE:-2022,BADGE_ASSIGNMENT_MISSING_RECIPIENT_IDENTITY:-2023,BADGE_ASSIGNMENT_MISSING_RECIPIENT_HASH_TYPE:-2024,BADGE_ASSIGNMENT_UNKNOWN_RECIPIENT_HASH_TYPE:-2025,BADGE_ASSIGNMENT_WRONG_RECIPIENT_IDENTITY:-2026,BADGE_NOT_FOUND:-2051,OUTCOME_NO_DCM_CONFIGURED:-2071,OUTCOME_USER_BADGES_DISABLED:-2072,COMPLETION_CONFIG_MISSING_NAME:-2401,COMPLETION_CONFIG_MISSING_PROVIDER:-2402,COMPLETION_CONFIG_MISSING_ENDPOINT:-2403,COMPLETION_CONFIG_MISSING_API_KEY:-2404,COMPLETION_CONFIG_MISSING_MODEL:-2405,COMPLETION_CONFIG_NO_PURPOSE_SPECIFIED:-2406,COMPLETION_CONFIG_INVALID_NAME:-2407,COMPLETION_CONFIG_INVALID_PURPOSE:-2411,COMPLETION_CONFIG_INVALID_ENDPOINT:-2412,COMPLETION_CONFIG_INCONSISTENT_ENDPOINT:-2413,COMPLETION_CONFIG_INVALID_PROVIDER:-2414,COMPLETION_CONFIG_NOT_FOUND:-2421,COMPLETION_CONFIG_NOT_ACCESSIBLE:-2422,COMPLETION_CONFIG_NAME_RESERVED:-2441,COMPLETION_CONFIG_NAME_ALREADY_EXISTS:-2442,COMPLETION_CONFIG_VISIBILITY_CHANGE_NOT_ALLOWED:-2443},Yxe=new Map(Object.entries(Kxe).map(([n,e])=>[e,n])),bs=n=>{if(!n)return"error.generic";if(n===401||n===403)return"error.unauthorized";if(n===404)return"error.notFound";if(n===422)return"error.unprocessableEntity";if(n===500)return"internal server error";let e=Yxe.get(n);return e?`errors.${e}`:"error.generic"},Xxe=[{value:"IT",label:"Italiano"},{value:"EN",label:"English"},{value:"DE",label:"Deutsch"},{value:"ES",label:"Español"},{value:"FR",label:"Français"},{value:"PT",label:"Português"},{value:"UK",label:"Українська"},{value:"RU",label:"Русский"},{value:"PL",label:"Polski"},{value:"FI",label:"Suomi"},{value:"EL",label:"Ελληνικά"},{value:"AR",label:"العربية"},{value:"ZH",label:"中文"},{value:"JA",label:"日本語"}],Zxe=["en","it","fr","es","de"],eIe=["image/jpeg","image/png","image/jpg","image/gif","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/pdf","video/mp4","video/avi","audio/mpeg3","audio/wav","audio/mpeg","video/mpeg","model/gltf-binary"],FC="👤",jN=[{name:"text",lang:"text",mimeType:"text/plain",monacoLang:"plaintext",executable:!0},{name:"javascript/jsx",lang:"jsx",mimeType:"text/javascript",monacoLang:"javascript",executable:!0},{name:"typescript/tsx",lang:"tsx",mimeType:"text/ecmascript",monacoLang:"typescript",executable:!0},{name:"json",lang:"json",mimeType:"application/json",monacoLang:"json",executable:!0},{name:"css",lang:"scss",mimeType:"text/css",monacoLang:"css",executable:!0},{name:"html/xml",lang:"tsx",mimeType:"application/xml",monacoLang:"xml"},{name:"bash",lang:"bash",mimeType:"application/x-sh",monacoLang:"shell"},{name:"python",lang:"python",mimeType:"text/x-python",monacoLang:"python"},{name:"cpp/csharp",lang:"cpp",mimeType:"text/x-c++src",monacoLang:"cpp"},{name:"php",lang:"php",mimeType:"application/x-php",monacoLang:"php"},{name:"ruby",lang:"ruby",mimeType:"text/x-ruby",monacoLang:"ruby"},{name:"sql",lang:"sql",mimeType:"text/x-sql",monacoLang:"sql"}],tIe={it:[{text:"",delayAfter:10},{text:"Cerco l'esperto più adatto",delayAfter:5},{text:"Contatto l'esperto",delayAfter:3},{text:"Spiego all'esperto la domanda",delayAfter:2},{text:"L'esperto sta preparando una risposta",delayAfter:6},{text:"Genero una risposta adatta",delayAfter:3}],en:[{text:"",delayAfter:10},{text:"I'm looking for the most suitable expert",delayAfter:5},{text:"I'm contacting the expert",delayAfter:3},{text:"I'm explaining the question to the expert",delayAfter:2},{text:"The expert is preparing an answer",delayAfter:6},{text:"I am generating a suitable answer",delayAfter:3}]},nIe=()=>{if(document.getElementById("memori-prism-script"))return;const e=document.createElement("script");e.src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js",e.async=!0,e.id="memori-prism-script";const t=document.createElement("script");t.src="https://cdn.jsdelivr.net/npm/prismjs@v1.29.0/plugins/autoloader/prism-autoloader.min.js",t.async=!0,t.id="memori-prism-autoloader-script";const r=document.createElement("link");r.rel="stylesheet",r.href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.min.css",document.head.appendChild(r),document.head.appendChild(e),document.head.appendChild(t)},DK=({medium:n,className:e,preview:t=!1,showCopyButton:r=!0})=>{var i,s,o,a,l;const{t:c}=ur();return D.useEffect(()=>{nIe()},[]),D.useEffect(()=>{"Prism"in window&&window.Prism.highlightAll&&Prism.highlightAll()},[n.content]),w.jsxs("div",{className:"memori-snippet",children:[w.jsxs("div",{className:"memori-snippet--content",children:[w.jsx("pre",{className:er("line-numbers",e),"aria-labelledby":!((i=n.title)===null||i===void 0)&&i.length?`#snippet-${n.mediumID}`:void 0,children:w.jsx("code",{className:`language-${(o=(s=jN.find(u=>n.mimeType===u.mimeType))===null||s===void 0?void 0:s.lang)!==null&&o!==void 0?o:"text"}`,children:!((a=n.content)===null||a===void 0)&&a.length&&n.content.length>200&&t?`${n.content.slice(0,200)}
...`:`${n.content}`})}),r&&w.jsx(Pt,{padded:!1,ghost:!0,className:"memori-snippet--copy-button",title:c("copy")||"Copy",icon:w.jsx(OK,{}),onClick:()=>{var u;return navigator.clipboard.writeText((u=n.content)!==null&&u!==void 0?u:"")}})]}),!!(!((l=n.title)===null||l===void 0)&&l.length)&&w.jsx("p",{id:`snippet-${n.mediumID}`,className:"memori-snippet--caption",children:n.title})]})},LK=({className:n,title:e})=>w.jsx("svg",{...e?{}:{"aria-hidden":"true"},focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",className:n,"aria-label":e,children:w.jsx("path",{d:"M574 665.4a8.03 8.03 0 0 0-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8a8.03 8.03 0 0 0-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zm258.6-474c-84.6-84.6-221.5-84.6-306 0L410.3 307.6a8.03 8.03 0 0 0 0 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6a8.03 8.03 0 0 0 0 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3a8.03 8.03 0 0 0-11.3 0L372.3 598.7a8.03 8.03 0 0 0 0 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z"})});var j3={},nz;function kK(){return nz||(nz=1,function(n){(function(e,t){t(n)})(Ze,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Object.assign||function(o){for(var a=1;a<arguments.length;a++){var l=arguments[a];for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(o[c]=l[c])}return o};function r(o,a){var l=o.el,c=o.elStyle,u=o.elHeight,d=o.rowsLimit,h=o.rowsWrapped,f=o.options,m=o.buffer,g=m;if(h===d+1)return t({},o);var v=m,y=h,A=u;return l.innerHTML=g=m.length?""+m+f.delimiter+a+f.replaceStr:""+a+f.replaceStr,parseFloat(c.height)>parseFloat(u)&&(y++,A=c.height,y===d+1)?(l.innerHTML=g=v[v.length-1]==="."&&f.replaceStr==="..."?v+"..":""+v+f.replaceStr,t({},o,{elHeight:A,rowsWrapped:y})):(l.innerHTML=g=v.length?""+v+f.delimiter+a:""+a,t({},o,{buffer:g,elHeight:A,rowsWrapped:y}))}function i(){for(var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},c={replaceStr:"...",responsive:!1,debounceDelay:250,delimiter:" "},u=t({},c,l),d=o&&(o instanceof NodeList?o:o.nodeType===1?[o]:document.querySelectorAll(o)),h=[],f=0;f<d.length;f++){var m=d[f];h[f]=m.innerHTML;var g=m.innerHTML.split(u.delimiter);m.innerHTML="";var v=window.getComputedStyle(m);g.reduce(r,{el:m,buffer:m.innerHTML,elStyle:v,elHeight:0,rowsLimit:a,rowsWrapped:0,options:u})}if(u.responsive){var y=!1,A=window.innerWidth,C=function(){if(window.innerWidth!==A){A=window.innerWidth;for(var R=0;R<d.length;R++)d[R].innerHTML=h[R];i(o,a,t({},l,{responsive:!1}))}},T=function(){clearTimeout(y),y=setTimeout(C,u.debounceDelay)};return window.addEventListener("resize",T),T}}function s(o){window.removeEventListener("resize",o)}e.disableResponsive=s,e.ellipsis=i})}(j3)),j3}var rIe=kK();const Ed=({loading:n=!1,className:e,title:t,description:r,cover:i,hoverable:s=!1,children:o})=>w.jsx("div",{className:er("memori-card",e,{"memori-card--loading":n,"memori-card--with-cover":i,"memori-card--hoverable":s}),children:w.jsxs(vl,{spinning:n,children:[i&&w.jsx("div",{className:"memori-card--cover",children:i}),w.jsxs("div",{className:"memori-card--content",children:[t&&w.jsx("h3",{className:"memori-card--title",children:t}),r&&w.jsx("p",{className:"memori-card--description",children:r}),w.jsx("div",{className:"memori-card--children",children:o})]})]})}),iIe=async(n,e)=>{try{return await(await fetch(`${e||"https://aisuru.com"}/api/linkpreview/${encodeURIComponent(n)}`)).json()}catch(t){return console.error("getSiteInfo",t),null}},sIe=({isChild:n=!1,item:e,baseUrl:t,onLinkPreviewInfo:r,descriptionOneLine:i=!1})=>{var s,o,a,l;const[c,u]=D.useState(null),d=!((s=e.url)===null||s===void 0)&&s.startsWith("http")||!e.url||((o=e.url)===null||o===void 0?void 0:o.length)===0?e.url:`https://${e.url}`;D.useEffect(()=>{var v,y;let A=!((v=e.url)===null||v===void 0)&&v.startsWith("http")||!e.url||((y=e.url)===null||y===void 0?void 0:y.length)===0?e.url:`https://${e.url}`;A&&A!==(c==null?void 0:c.urlKey)&&iIe(A,t).then(C=>{u(C?{...C,urlKey:A}:null),r&&C&&r(C)})},[e==null?void 0:e.url,t,r]);const h=e.title&&e.title.length>0?e.title:c==null?void 0:c.title,f=c==null?void 0:c.description,m=c==null?void 0:c.video,g=(a=c==null?void 0:c.image)!==null&&a!==void 0?a:(l=c==null?void 0:c.images)===null||l===void 0?void 0:l[0];return D.useEffect(()=>{setTimeout(()=>{rIe.ellipsis(".memori-link-item--card .memori-card--description",3,{responsive:!0})},300)},[f,e.mediumID]),w.jsx("a",{href:d,target:"_blank",rel:"noopener noreferrer",className:er("memori-link-item--link",{"memori-link-item--link--child":n}),onClick:v=>{n||(v.preventDefault(),v.stopPropagation(),window.open(d,"_blank",`toolbar=yes,top=${window.innerHeight*.1},left=${window.innerWidth*.1},width=${window.innerWidth*.8},height=${window.innerHeight*.8}`))},children:w.jsx(Ed,{hoverable:!0,className:er("memori-link-item--card",{"memori-link-item--card-description-oneline":i,"memori-link-item--card-has-image":g,"memori-link-item--card-has-video":m}),cover:m?w.jsx("iframe",{width:"100%",height:"100%",src:m,title:"Video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}):g?w.jsx("img",{className:"memori-link-item--card-cover-img",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8LAwSDCIMogwMCcmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsis7PPOq3QdDFcvjV3jOD1boQVTPQrgSkktTgbSf4A4LbmgqISBgTEFyFYuLykAsTuAbJEioKOA7DkgdjqEvQHEToKwj4DVhAQ5A9k3gGyB5IxEoBmML4BsnSQk8XQkNtReEOBxcfXxUQg1Mjc0dyHgXNJBSWpFCYh2zi+oLMpMzyhRcASGUqqCZ16yno6CkYGRAQMDKMwhqj/fAIcloxgHQqxAjIHBEugw5sUIsSQpBobtQPdLciLEVJYzMPBHMDBsayhILEqEO4DxG0txmrERhM29nYGBddr//5/DGRjYNRkY/l7////39v///y4Dmn+LgeHANwDrkl1AuO+pmgAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAwqADAAQAAAABAAAAwwAAAAD9b/HnAAAHlklEQVR4Ae3dP3PTWBSGcbGzM6GCKqlIBRV0dHRJFarQ0eUT8LH4BnRU0NHR0UEFVdIlFRV7TzRksomPY8uykTk/zewQfKw/9znv4yvJynLv4uLiV2dBoDiBf4qP3/ARuCRABEFAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghgg0Aj8i0JO4OzsrPv69Wv+hi2qPHr0qNvf39+iI97soRIh4f3z58/u7du3SXX7Xt7Z2enevHmzfQe+oSN2apSAPj09TSrb+XKI/f379+08+A0cNRE2ANkupk+ACNPvkSPcAAEibACyXUyfABGm3yNHuAECRNgAZLuYPgEirKlHu7u7XdyytGwHAd8jjNyng4OD7vnz51dbPT8/7z58+NB9+/bt6jU/TI+AGWHEnrx48eJ/EsSmHzx40L18+fLyzxF3ZVMjEyDCiEDjMYZZS5wiPXnyZFbJaxMhQIQRGzHvWR7XCyOCXsOmiDAi1HmPMMQjDpbpEiDCiL358eNHurW/5SnWdIBbXiDCiA38/Pnzrce2YyZ4//59F3ePLNMl4PbpiL2J0L979+7yDtHDhw8vtzzvdGnEXdvUigSIsCLAWavHp/+qM0BcXMd/q25n1vF57TYBp0a3mUzilePj4+7k5KSLb6gt6ydAhPUzXnoPR0dHl79WGTNCfBnn1uvSCJdegQhLI1vvCk+fPu2ePXt2tZOYEV6/fn31dz+shwAR1sP1cqvLntbEN9MxA9xcYjsxS1jWR4AIa2Ibzx0tc44fYX/16lV6NDFLXH+YL32jwiACRBiEbf5KcXoTIsQSpzXx4N28Ja4BQoK7rgXiydbHjx/P25TaQAJEGAguWy0+2Q8PD6/Ki4R8EVl+bzBOnZY95fq9rj9zAkTI2SxdidBHqG9+skdw43borCXO/ZcJdraPWdv22uIEiLA4q7nvvCug8WTqzQveOH26fodo7g6uFe/a17W3+nFBAkRYENRdb1vkkz1CH9cPsVy/jrhr27PqMYvENYNlHAIesRiBYwRy0V+8iXP8+/fvX11Mr7L7ECueb/r48eMqm7FuI2BGWDEG8cm+7G3NEOfmdcTQw4h9/55lhm7DekRYKQPZF2ArbXTAyu4kDYB2YxUzwg0gi/41ztHnfQG26HbGel/crVrm7tNY+/1btkOEAZ2M05r4FB7r9GbAIdxaZYrHdOsgJ/wCEQY0J74TmOKnbxxT9n3FgGGWWsVdowHtjt9Nnvf7yQM2aZU/TIAIAxrw6dOnAWtZZcoEnBpNuTuObWMEiLAx1HY0ZQJEmHJ3HNvGCBBhY6jtaMoEiJB0Z29vL6ls58vxPcO8/zfrdo5qvKO+d3Fx8Wu8zf1dW4p/cPzLly/dtv9Ts/EbcvGAHhHyfBIhZ6NSiIBTo0LNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiEC/wGgKKC4YMA4TAAAAABJRU5ErkJggg==",srcSet:g.includes("data:image")?void 0:g.startsWith("https")?g:`https://${g.replace("http://","")}`,alt:e.title}):w.jsx("div",{className:"memori-link-item--card-cover-icon",children:w.jsx(LK,{className:"memori-link-item--icon"})}),title:h,description:f})})},oIe=({items:n,baseUrl:e,descriptionOneLine:t=!1,onLinkPreviewInfo:r})=>w.jsx(Zr,{appear:!0,show:!0,as:"div",className:"memori-link-items",children:w.jsx("div",{className:"memori-link-items--grid",children:n.map((i,s)=>w.jsx(Zr.Child,{as:"div",className:"memori-link-item",enter:`ease-out duration-500 delay-${s*100}`,enterFrom:"opacity-0 scale-95",enterTo:"opacity-1 scale-100",leave:"ease-in duration-300",leaveFrom:"opacity-1 scale-100",leaveTo:"opacity-0 scale-95",children:w.jsx(sIe,{item:i,baseUrl:e,descriptionOneLine:t,onLinkPreviewInfo:r})},i.mediumID))})}),aIe=["va bene","no grazie","si","no","sì","arrivederci","non c'entrava","non mi è piaciuto"],lIe=n=>n.replaceAll(/<output.*?>(.*?)<\/output>/g,""),pg=async(n,e,t,r)=>{var i;let s=lIe(n);const a=aIe.indexOf(n.toLowerCase())>-1?"IT":t==null?void 0:t.toUpperCase(),l=e.toUpperCase(),u=await(await fetch(`${r||"https://www.aisuru.com"}/api/translate`,{cache:"no-cache",method:"POST",body:JSON.stringify({text:s,target_lang:l,source_lang:a}),headers:{Accept:"*/*","Content-Type":"application/json"}})).json();return(i=u==null?void 0:u.translations)===null||i===void 0?void 0:i[0]},BK=({src:n,poster:e,alt:t=""})=>(D.useEffect(()=>{const r=document.createElement("script");return r.src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js",r.type="module",document.head.appendChild(r),()=>{document.head.removeChild(r)}},[]),w.jsx("div",{className:"model-viewer",children:w.jsx("model-viewer",{src:n,"ios-src":"",poster:e,alt:t,"shadow-intensity":"1","disable-zoom":!0,"camera-controls":!0,autoplay:!0})})),cIe=({className:n,title:e})=>w.jsx("svg",{...e?{}:{"aria-hidden":"true"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",focusable:"false",role:"img",className:n,"aria-label":e,children:w.jsx("path",{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0 0 42 42h216v494z"})}),uIe=({className:n,title:e})=>w.jsx("svg",{...e?{}:{"aria-hidden":"true"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",focusable:"false",role:"img",className:n,"aria-label":e,children:w.jsx("path",{d:"M531.3 574.4l.3-1.4c5.8-23.9 13.1-53.7 7.4-80.7-3.8-21.3-19.5-29.6-32.9-30.2-15.8-.7-29.9 8.3-33.4 21.4-6.6 24-.7 56.8 10.1 98.6-13.6 32.4-35.3 79.5-51.2 107.5-29.6 15.3-69.3 38.9-75.2 68.7-1.2 5.5.2 12.5 3.5 18.8 3.7 7 9.6 12.4 16.5 15 3 1.1 6.6 2 10.8 2 17.6 0 46.1-14.2 84.1-79.4 5.8-1.9 11.8-3.9 17.6-5.9 27.2-9.2 55.4-18.8 80.9-23.1 28.2 15.1 60.3 24.8 82.1 24.8 21.6 0 30.1-12.8 33.3-20.5 5.6-13.5 2.9-30.5-6.2-39.6-13.2-13-45.3-16.4-95.3-10.2-24.6-15-40.7-35.4-52.4-65.8zM421.6 726.3c-13.9 20.2-24.4 30.3-30.1 34.7 6.7-12.3 19.8-25.3 30.1-34.7zm87.6-235.5c5.2 8.9 4.5 35.8.5 49.4-4.9-19.9-5.6-48.1-2.7-51.4.8.1 1.5.7 2.2 2zm-1.6 120.5c10.7 18.5 24.2 34.4 39.1 46.2-21.6 4.9-41.3 13-58.9 20.2-4.2 1.7-8.3 3.4-12.3 5 13.3-24.1 24.4-51.4 32.1-71.4zm155.6 65.5c.1.2.2.5-.4.9h-.2l-.2.3c-.8.5-9 5.3-44.3-8.6 40.6-1.9 45 7.3 45.1 7.4zm191.4-388.2L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0 0 42 42h216v494z"})}),dIe=({className:n,title:e})=>w.jsx("svg",{...e?{}:{"aria-hidden":"true"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",focusable:"false",role:"img",className:n,"aria-label":e,children:w.jsx("path",{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0 0 42 42h216v494zM514.1 580.1l-61.8-102.4c-2.2-3.6-6.1-5.8-10.3-5.8h-38.4c-2.3 0-4.5.6-6.4 1.9-5.6 3.5-7.3 10.9-3.7 16.6l82.3 130.4-83.4 132.8a12.04 12.04 0 0 0 10.2 18.4h34.5c4.2 0 8-2.2 10.2-5.7L510 664.8l62.3 101.4c2.2 3.6 6.1 5.7 10.2 5.7H620c2.3 0 4.5-.7 6.5-1.9 5.6-3.6 7.2-11 3.6-16.6l-84-130.4 85.3-132.5a12.04 12.04 0 0 0-10.1-18.5h-35.7c-4.2 0-8.1 2.2-10.3 5.8l-61.2 102.3z"})}),hIe=({className:n,title:e})=>w.jsx("svg",{...e?{}:{"aria-hidden":"true"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",focusable:"false",role:"img",className:n,"aria-label":e,children:w.jsx("path",{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0 0 42 42h216v494zM528.1 472h-32.2c-5.5 0-10.3 3.7-11.6 9.1L434.6 680l-46.1-198.7c-1.3-5.4-6.1-9.3-11.7-9.3h-35.4a12.02 12.02 0 0 0-11.6 15.1l74.2 276c1.4 5.2 6.2 8.9 11.6 8.9h32c5.4 0 10.2-3.6 11.6-8.9l52.8-197 52.8 197c1.4 5.2 6.2 8.9 11.6 8.9h31.8c5.4 0 10.2-3.6 11.6-8.9l74.4-276a12.04 12.04 0 0 0-11.6-15.1H647c-5.6 0-10.4 3.9-11.7 9.3l-45.8 199.1-49.8-199.3c-1.3-5.4-6.1-9.1-11.6-9.1z"})}),rz=({isChild:n=!1,item:e,sessionID:t,tenantID:r,preview:i=!1,baseURL:s,apiURL:o,onClick:a,customMediaRenderer:l})=>{var c,u;const d=Pa({resourceURI:e.url,sessionID:t,tenantID:r,baseURL:s,apiURL:o}),h=l==null?void 0:l(e.mimeType);if(h)return h;const f=((c=e.url)===null||c===void 0?void 0:c.startsWith("rgb("))||((u=e.url)===null||u===void 0?void 0:u.startsWith("rgba("));switch(e.mimeType){case"image/jpeg":case"image/png":case"image/jpg":case"image/gif":return f?w.jsx(Ed,{hoverable:!0,className:"memori-media-item--card memori-media-item--image",cover:w.jsxs("picture",{className:"memori-media-item--figure",children:[w.jsx("div",{className:"memori-media-item--rgb-item",style:{backgroundColor:e.url}}),e.title&&w.jsx("figcaption",{className:"memori-media-item--figure-caption",children:e.title})]})}):w.jsx("a",{className:"memori-media-item--link",href:e.url,onClick:m=>{n&&m.preventDefault(),a&&(m.preventDefault(),a(e.mediumID))},target:"_blank",rel:"noopener noreferrer",title:e.title,children:w.jsx(Ed,{hoverable:!0,className:"memori-media-item--card memori-media-item--image",cover:w.jsxs("picture",{className:"memori-media-item--figure",children:[!i&&w.jsx("source",{srcSet:[d,e.url,e.content].join(", "),type:e.mimeType}),w.jsx("img",{alt:e.title,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8LAwSDCIMogwMCcmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsis7PPOq3QdDFcvjV3jOD1boQVTPQrgSkktTgbSf4A4LbmgqISBgTEFyFYuLykAsTuAbJEioKOA7DkgdjqEvQHEToKwj4DVhAQ5A9k3gGyB5IxEoBmML4BsnSQk8XQkNtReEOBxcfXxUQg1Mjc0dyHgXNJBSWpFCYh2zi+oLMpMzyhRcASGUqqCZ16yno6CkYGRAQMDKMwhqj/fAIcloxgHQqxAjIHBEugw5sUIsSQpBobtQPdLciLEVJYzMPBHMDBsayhILEqEO4DxG0txmrERhM29nYGBddr//5/DGRjYNRkY/l7////39v///y4Dmn+LgeHANwDrkl1AuO+pmgAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAwqADAAQAAAABAAAAwwAAAAD9b/HnAAAHlklEQVR4Ae3dP3PTWBSGcbGzM6GCKqlIBRV0dHRJFarQ0eUT8LH4BnRU0NHR0UEFVdIlFRV7TzRksomPY8uykTk/zewQfKw/9znv4yvJynLv4uLiV2dBoDiBf4qP3/ARuCRABEFAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghgg0Aj8i0JO4OzsrPv69Wv+hi2qPHr0qNvf39+iI97soRIh4f3z58/u7du3SXX7Xt7Z2enevHmzfQe+oSN2apSAPj09TSrb+XKI/f379+08+A0cNRE2ANkupk+ACNPvkSPcAAEibACyXUyfABGm3yNHuAECRNgAZLuYPgEirKlHu7u7XdyytGwHAd8jjNyng4OD7vnz51dbPT8/7z58+NB9+/bt6jU/TI+AGWHEnrx48eJ/EsSmHzx40L18+fLyzxF3ZVMjEyDCiEDjMYZZS5wiPXnyZFbJaxMhQIQRGzHvWR7XCyOCXsOmiDAi1HmPMMQjDpbpEiDCiL358eNHurW/5SnWdIBbXiDCiA38/Pnzrce2YyZ4//59F3ePLNMl4PbpiL2J0L979+7yDtHDhw8vtzzvdGnEXdvUigSIsCLAWavHp/+qM0BcXMd/q25n1vF57TYBp0a3mUzilePj4+7k5KSLb6gt6ydAhPUzXnoPR0dHl79WGTNCfBnn1uvSCJdegQhLI1vvCk+fPu2ePXt2tZOYEV6/fn31dz+shwAR1sP1cqvLntbEN9MxA9xcYjsxS1jWR4AIa2Ibzx0tc44fYX/16lV6NDFLXH+YL32jwiACRBiEbf5KcXoTIsQSpzXx4N28Ja4BQoK7rgXiydbHjx/P25TaQAJEGAguWy0+2Q8PD6/Ki4R8EVl+bzBOnZY95fq9rj9zAkTI2SxdidBHqG9+skdw43borCXO/ZcJdraPWdv22uIEiLA4q7nvvCug8WTqzQveOH26fodo7g6uFe/a17W3+nFBAkRYENRdb1vkkz1CH9cPsVy/jrhr27PqMYvENYNlHAIesRiBYwRy0V+8iXP8+/fvX11Mr7L7ECueb/r48eMqm7FuI2BGWDEG8cm+7G3NEOfmdcTQw4h9/55lhm7DekRYKQPZF2ArbXTAyu4kDYB2YxUzwg0gi/41ztHnfQG26HbGel/crVrm7tNY+/1btkOEAZ2M05r4FB7r9GbAIdxaZYrHdOsgJ/wCEQY0J74TmOKnbxxT9n3FgGGWWsVdowHtjt9Nnvf7yQM2aZU/TIAIAxrw6dOnAWtZZcoEnBpNuTuObWMEiLAx1HY0ZQJEmHJ3HNvGCBBhY6jtaMoEiJB0Z29vL6ls58vxPcO8/zfrdo5qvKO+d3Fx8Wu8zf1dW4p/cPzLly/dtv9Ts/EbcvGAHhHyfBIhZ6NSiIBTo0LNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiEC/wGgKKC4YMA4TAAAAABJRU5ErkJggg=="}),e.title&&w.jsx("figcaption",{className:"memori-media-item--figure-caption",children:e.title})]})})});case"application/msword":case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":return w.jsx("a",{className:"memori-media-item--link",href:d,target:"_blank",rel:"noopener noreferrer",title:e.title,children:w.jsx(Ed,{hoverable:!0,cover:w.jsx(hIe,{className:"memori-media-item--icon"}),title:e.title})});case"application/vnd.ms-excel":case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":return w.jsx("a",{className:"memori-media-item--link",href:d,target:"_blank",rel:"noopener noreferrer",title:e.title,children:w.jsx(Ed,{hoverable:!0,cover:w.jsx(dIe,{className:"memori-media-item--icon"}),title:e.title})});case"application/pdf":return w.jsx("a",{className:"memori-media-item--link",href:d,target:"_blank",rel:"noopener noreferrer",title:e.title,children:w.jsx(Ed,{hoverable:!0,cover:w.jsx(uIe,{className:"memori-media-item--icon"}),title:e.title})});case"video/mp4":case"video/quicktime":case"video/avi":case"video/mpeg":return w.jsx("a",{className:"memori-media-item--link",href:d,onClick:m=>{n&&m.preventDefault(),a&&(m.preventDefault(),a(e.mediumID))},target:"_blank",rel:"noopener noreferrer",title:e.title,children:w.jsx(Ed,{hoverable:!0,cover:w.jsxs("video",{style:{width:"100%",height:"100%"},controls:!0,src:d,title:e.title,children:[e.mimeType==="video/quicktime"&&w.jsx("source",{src:e.url,type:"video/mp4"}),w.jsx("source",{src:e.url,type:e.mimeType}),"Your browser does not support this video format.",w.jsx("br",{}),w.jsx("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",children:"Download the video"})]}),title:e.title})});case"audio/mpeg3":case"audio/wav":case"audio/mpeg":return w.jsx("a",{className:"memori-media-item--link",href:d,target:"_blank",rel:"noopener noreferrer",title:e.title,children:w.jsx(Ed,{hoverable:!0,cover:w.jsx("audio",{style:{width:"100%",height:"100%"},controls:!0,src:d}),title:e.title})});case"model/gltf-binary":return w.jsx(BK,{src:d,alt:"",poster:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8LAwSDCIMogwMCcmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsis7PPOq3QdDFcvjV3jOD1boQVTPQrgSkktTgbSf4A4LbmgqISBgTEFyFYuLykAsTuAbJEioKOA7DkgdjqEvQHEToKwj4DVhAQ5A9k3gGyB5IxEoBmML4BsnSQk8XQkNtReEOBxcfXxUQg1Mjc0dyHgXNJBSWpFCYh2zi+oLMpMzyhRcASGUqqCZ16yno6CkYGRAQMDKMwhqj/fAIcloxgHQqxAjIHBEugw5sUIsSQpBobtQPdLciLEVJYzMPBHMDBsayhILEqEO4DxG0txmrERhM29nYGBddr//5/DGRjYNRkY/l7////39v///y4Dmn+LgeHANwDrkl1AuO+pmgAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAwqADAAQAAAABAAAAwwAAAAD9b/HnAAAHlklEQVR4Ae3dP3PTWBSGcbGzM6GCKqlIBRV0dHRJFarQ0eUT8LH4BnRU0NHR0UEFVdIlFRV7TzRksomPY8uykTk/zewQfKw/9znv4yvJynLv4uLiV2dBoDiBf4qP3/ARuCRABEFAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghgg0Aj8i0JO4OzsrPv69Wv+hi2qPHr0qNvf39+iI97soRIh4f3z58/u7du3SXX7Xt7Z2enevHmzfQe+oSN2apSAPj09TSrb+XKI/f379+08+A0cNRE2ANkupk+ACNPvkSPcAAEibACyXUyfABGm3yNHuAECRNgAZLuYPgEirKlHu7u7XdyytGwHAd8jjNyng4OD7vnz51dbPT8/7z58+NB9+/bt6jU/TI+AGWHEnrx48eJ/EsSmHzx40L18+fLyzxF3ZVMjEyDCiEDjMYZZS5wiPXnyZFbJaxMhQIQRGzHvWR7XCyOCXsOmiDAi1HmPMMQjDpbpEiDCiL358eNHurW/5SnWdIBbXiDCiA38/Pnzrce2YyZ4//59F3ePLNMl4PbpiL2J0L979+7yDtHDhw8vtzzvdGnEXdvUigSIsCLAWavHp/+qM0BcXMd/q25n1vF57TYBp0a3mUzilePj4+7k5KSLb6gt6ydAhPUzXnoPR0dHl79WGTNCfBnn1uvSCJdegQhLI1vvCk+fPu2ePXt2tZOYEV6/fn31dz+shwAR1sP1cqvLntbEN9MxA9xcYjsxS1jWR4AIa2Ibzx0tc44fYX/16lV6NDFLXH+YL32jwiACRBiEbf5KcXoTIsQSpzXx4N28Ja4BQoK7rgXiydbHjx/P25TaQAJEGAguWy0+2Q8PD6/Ki4R8EVl+bzBOnZY95fq9rj9zAkTI2SxdidBHqG9+skdw43borCXO/ZcJdraPWdv22uIEiLA4q7nvvCug8WTqzQveOH26fodo7g6uFe/a17W3+nFBAkRYENRdb1vkkz1CH9cPsVy/jrhr27PqMYvENYNlHAIesRiBYwRy0V+8iXP8+/fvX11Mr7L7ECueb/r48eMqm7FuI2BGWDEG8cm+7G3NEOfmdcTQw4h9/55lhm7DekRYKQPZF2ArbXTAyu4kDYB2YxUzwg0gi/41ztHnfQG26HbGel/crVrm7tNY+/1btkOEAZ2M05r4FB7r9GbAIdxaZYrHdOsgJ/wCEQY0J74TmOKnbxxT9n3FgGGWWsVdowHtjt9Nnvf7yQM2aZU/TIAIAxrw6dOnAWtZZcoEnBpNuTuObWMEiLAx1HY0ZQJEmHJ3HNvGCBBhY6jtaMoEiJB0Z29vL6ls58vxPcO8/zfrdo5qvKO+d3Fx8Wu8zf1dW4p/cPzLly/dtv9Ts/EbcvGAHhHyfBIhZ6NSiIBTo0LNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiEC/wGgKKC4YMA4TAAAAABJRU5ErkJggg=="});default:return w.jsx("a",{className:"memori-media-item--link",href:d,target:"_blank",rel:"noopener noreferrer",title:e.title,children:w.jsx(Ed,{hoverable:!0,cover:w.jsx(cIe,{className:"memori-media-item--icon"}),title:e.title})})}},fIe=({items:n,sessionID:e,tenantID:t,translateTo:r,baseURL:i,apiURL:s,customMediaRenderer:o})=>{const[a,l]=D.useState(n),[c,u]=D.useState(),d=D.useCallback(async()=>{if(!r)return;const g=await Promise.all((n??[]).map(async v=>{var y;if(v.title)try{const A=await pg(v.title,r);return{...v,title:(y=A.text)!==null&&y!==void 0?y:v.title}}catch(A){return console.error(A),v}else return v}));l(g)},[r,n]);D.useEffect(()=>{r&&d()},[r,d]);const h=a.filter(g=>{var v;return!(!((v=g.properties)===null||v===void 0)&&v.executable)&&!jN.map(y=>y.mimeType).includes(g.mimeType)}).sort((g,v)=>g.creationTimestamp>v.creationTimestamp?1:g.creationTimestamp<v.creationTimestamp?-1:0),f=a.filter(g=>{var v;return!(!((v=g.properties)===null||v===void 0)&&v.executable)&&jN.map(y=>y.mimeType).includes(g.mimeType)}),m=a.filter(g=>{var v;return g.mimeType==="text/css"&&!!(!((v=g.properties)===null||v===void 0)&&v.executable)});return w.jsxs(Zr,{appear:!0,show:!0,as:"div",className:"memori-media-items",children:[!!h.length&&w.jsx("div",{className:"memori-media-items--grid",children:h.map((g,v)=>w.jsx(Zr.Child,{as:"div",className:"memori-media-item",enter:`ease-out duration-500 delay-${v*100}`,enterFrom:"opacity-0 scale-95",enterTo:"opacity-1 scale-100",leave:"ease-in duration-300",leaveFrom:"opacity-1 scale-100",leaveTo:"opacity-0 scale-95",children:w.jsx(rz,{isChild:!0,sessionID:e,tenantID:t,baseURL:i,apiURL:s,onClick:y=>{u(a.find(A=>A.mediumID===y))},item:{...g,title:g.title,url:g.url,content:g.content},customMediaRenderer:o})},g.url+"&index="+v))}),f.map(g=>w.jsx(Zr.Child,{as:"div",className:"memori-media-item--snippet",enter:"ease-out duration-500",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-1 translate-y-0",leave:"ease-in duration-300",leaveFrom:"opacity-1",leaveTo:"opacity-0",children:w.jsx(DK,{medium:g},g.mediumID)},g.mediumID)),m.map(g=>w.jsx("style",{dangerouslySetInnerHTML:{__html:g.content||""}},g.mediumID)),(c==null?void 0:c.mediumID)&&w.jsx(yS,{width:"100%",widthMd:"100%",className:"memori-media-item--modal",open:!!c,onClose:()=>u(void 0),footer:null,children:w.jsx(rz,{isChild:!0,sessionID:e,tenantID:t,baseURL:i,apiURL:s,item:{...c,title:c.title,url:c.url,content:c.content},customMediaRenderer:o})})]})},pIe=D.memo(fIe),mIe=({hints:n=[],links:e=[],media:t=[],simulateUserPrompt:r=()=>{},sessionID:i,baseUrl:s,apiUrl:o,translateTo:a,customMediaRenderer:l})=>{const{t:c}=ur(),[u,d]=D.useState(!0),[h,f]=D.useState(6);return D.useEffect(()=>{d(!0)},[n]),w.jsxs("div",{className:"memori-media-widget",children:[(t==null?void 0:t.length)>0&&w.jsx(pIe,{items:t,sessionID:i,translateTo:a,baseURL:s,apiURL:o,customMediaRenderer:l}),(e==null?void 0:e.length)>0&&w.jsx(oIe,{items:e,baseUrl:s}),(n==null?void 0:n.length)>0&&u&&w.jsxs(w.Fragment,{children:[w.jsx(Zr,{appear:!0,show:!0,as:"ul",className:"memori-media--hints",children:n.slice(0,h).map((m,g)=>w.jsx(Zr.Child,{as:"li",enter:"ease-out duration-500",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-1 translate-y-0",leave:"ease-in duration-300",leaveFrom:"opacity-1",leaveTo:"opacity-0",children:w.jsx(Pt,{className:er("memori-media--hint"),primary:!0,onClick:()=>{r(m.originalText,m.text),d(!1)},onTouchEnd:()=>{r(m.originalText,m.text),d(!1)},children:m.text},m.text+g)},m.text+g))}),n.length>h&&w.jsx("div",{className:"memori-hints--show-more",children:w.jsx(Pt,{className:"memori-hints--show-more-button",id:"showMoreHints",onClick:()=>f(h+6),children:c("expand")||"Expand"})})]})]})},GN=D.memo(mIe),iz=n=>n.endsWith("?")?n:`${n}?`,gIe=({message:n,apiURL:e,sessionID:t,visible:r=!0,initialMatches:i=[],closeDrawer:s,_TEST_loading:o=!1})=>{const{t:a}=ur(),c=qx(e).search.searchMemory,[u,d]=D.useState(i),[h,f]=D.useState(o),m=D.useCallback(async()=>{if(f(!0),!o){try{const{matches:g,...v}=await c(t,{searchType:"Semantic",numberOfResults:3,text:n.questionAnswered,date:n.date,placeName:n.placeName,placeLatitude:n.placeLatitude,placeLongitude:n.placeLongitude,placeUncertaintyKm:n.placeUncertaintyKm,contextVars:n.contextVars,tag:n.tag,memoryTags:n.memoryTags});v.resultCode!==0?(console.error(v),kn.error(a(bs(v.resultCode)))):d(g??[])}catch(g){console.error("WHYTHISANSWER/FETCH",g),d(i??[])}f(!1)}},[n,t]);return D.useEffect(()=>{m()},[m,n,t]),w.jsxs(Sv,{open:r,width:"80%",animated:!1,className:"memori-whythisanswer-drawer",onClose:()=>s(),title:a("whyThisAnswer"),children:[w.jsx("p",{children:a("whyThisAnswerHelper")}),n.questionAnswered&&w.jsxs("p",{className:"memori--whythisanswer-question-answered",children:[w.jsxs("strong",{children:[a("question")||"Question",":"]})," ",n.questionAnswered]}),w.jsxs(vl,{primary:!0,spinning:h,children:[!h&&u.length===0&&w.jsx("p",{role:"info",className:"memori--whythisanswer-no-results",children:a("nothingFound")}),h&&u.length===0&&w.jsxs("ul",{className:"memori--whythisanswer-list memori--whythisanswer-skeleton",children:[w.jsxs("li",{children:[w.jsxs("div",{className:"memori--whythisanswer-title",children:[w.jsx("span",{className:"memori--whythisanswer-confidence",children:w.jsx("span",{className:"memori--whythisanswer-skeleton-text"})}),w.jsx("div",{className:"memori--whythisanswer-title-text",children:w.jsx("p",{className:"memori--whythisanswer-skeleton-text"})})]}),w.jsxs("p",{children:[w.jsx("div",{className:"memori--whythisanswer-skeleton-text"}),w.jsx("div",{className:"memori--whythisanswer-skeleton-text"}),w.jsx("div",{className:"memori--whythisanswer-skeleton-text"})]}),w.jsx("div",{className:"memori--whythisanswer-skeleton-block"})]}),w.jsxs("li",{children:[w.jsxs("div",{className:"memori--whythisanswer-title",children:[w.jsx("span",{className:"memori--whythisanswer-confidence",children:w.jsx("span",{className:"memori--whythisanswer-skeleton-text"})}),w.jsxs("div",{className:"memori--whythisanswer-title-text",children:[w.jsx("p",{className:"memori--whythisanswer-skeleton-text"}),w.jsx("p",{className:"memori--whythisanswer-skeleton-text"})]})]}),w.jsxs("p",{children:[w.jsx("div",{className:"memori--whythisanswer-skeleton-text"}),w.jsx("div",{className:"memori--whythisanswer-skeleton-text"})]}),w.jsx("div",{className:"memori--whythisanswer-skeleton-block"})]})]}),u.length>0&&w.jsx("ul",{className:"memori--whythisanswer-list",children:u.map(g=>{var v,y,A,C,T,x,R;return w.jsxs("li",{children:[w.jsxs("div",{className:"memori--whythisanswer-title",children:[w.jsx("span",{className:"memori--whythisanswer-confidence",children:g.confidenceLevel}),w.jsxs("div",{className:"memori--whythisanswer-title-text",children:[w.jsx("p",{children:w.jsx("strong",{children:iz((v=g.memory.title)!==null&&v!==void 0?v:"")})}),w.jsx("p",{children:(A=(y=g.memory.titleVariants)===null||y===void 0?void 0:y.map(N=>iz(N)))===null||A===void 0?void 0:A.join(" | ")})]})]}),(C=g.memory.answers)===null||C===void 0?void 0:C.map((N,M)=>w.jsx("p",{className:"memori--whythisanswer-answer",children:w.jsx(tz,{rows:3,children:N.text})},M)),w.jsx(GN,{links:(T=g.memory.media)===null||T===void 0?void 0:T.filter(N=>N.mimeType==="text/html")}),(R=(x=g.memory.media)===null||x===void 0?void 0:x.filter(N=>N.mimeType==="text/plain"))===null||R===void 0?void 0:R.map(N=>w.jsx(tz,{rows:2,lineHeightMultiplier:2,innerClassName:"memori--whythisanswer-snippet-expandable",children:w.jsx(DK,{medium:N,showCopyButton:!1},N.mediumID)},N.mediumID))]},g.memory.memoryID)})})]})]})},vIe=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,yIe=/[\0-\x1F\x7F-\x9F]/,_Ie=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,SIe=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/;function AIe(n){const e={};n=n||{},e.src_Any=vIe.source,e.src_Cc=yIe.source,e.src_Z=SIe.source,e.src_P=_Ie.source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");const t="[><｜]";return e.src_pseudo_letter="(?:(?!"+t+"|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|"+t+"|"+e.src_ZPCc+")(?!"+(n["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|"+t+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+e.src_ZCc+"|[.]|$)|"+(n["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+e.src_ZCc+"|$)|;(?!"+e.src_ZCc+"|$)|\\!+(?!"+e.src_ZCc+"|[!]|$)|\\?(?!"+e.src_ZCc+"|[?]|$))+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy="(^|"+t+'|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+e.src_ZPCc+"))((?![$+<=>^`|｜])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+e.src_ZPCc+"))((?![$+<=>^`|｜])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}function HN(n){return Array.prototype.slice.call(arguments,1).forEach(function(t){t&&Object.keys(t).forEach(function(r){n[r]=t[r]})}),n}function X2(n){return Object.prototype.toString.call(n)}function EIe(n){return X2(n)==="[object String]"}function CIe(n){return X2(n)==="[object Object]"}function wIe(n){return X2(n)==="[object RegExp]"}function sz(n){return X2(n)==="[object Function]"}function TIe(n){return n.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const FK={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function xIe(n){return Object.keys(n||{}).reduce(function(e,t){return e||FK.hasOwnProperty(t)},!1)}const IIe={"http:":{validate:function(n,e,t){const r=n.slice(e);return t.re.http||(t.re.http=new RegExp("^\\/\\/"+t.re.src_auth+t.re.src_host_port_strict+t.re.src_path,"i")),t.re.http.test(r)?r.match(t.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(n,e,t){const r=n.slice(e);return t.re.no_http||(t.re.no_http=new RegExp("^"+t.re.src_auth+"(?:localhost|(?:(?:"+t.re.src_domain+")\\.)+"+t.re.src_domain_root+")"+t.re.src_port+t.re.src_host_terminator+t.re.src_path,"i")),t.re.no_http.test(r)?e>=3&&n[e-3]===":"||e>=3&&n[e-3]==="/"?0:r.match(t.re.no_http)[0].length:0}},"mailto:":{validate:function(n,e,t){const r=n.slice(e);return t.re.mailto||(t.re.mailto=new RegExp("^"+t.re.src_email_name+"@"+t.re.src_host_strict,"i")),t.re.mailto.test(r)?r.match(t.re.mailto)[0].length:0}}},bIe="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",MIe="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|рф".split("|");function RIe(n){n.__index__=-1,n.__text_cache__=""}function NIe(n){return function(e,t){const r=e.slice(t);return n.test(r)?r.match(n)[0].length:0}}function oz(){return function(n,e){e.normalize(n)}}function vx(n){const e=n.re=AIe(n.__opts__),t=n.__tlds__.slice();n.onCompile(),n.__tlds_replaced__||t.push(bIe),t.push(e.src_xn),e.src_tlds=t.join("|");function r(a){return a.replace("%TLDS%",e.src_tlds)}e.email_fuzzy=RegExp(r(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(r(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(r(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(r(e.tpl_host_fuzzy_test),"i");const i=[];n.__compiled__={};function s(a,l){throw new Error('(LinkifyIt) Invalid schema "'+a+'": '+l)}Object.keys(n.__schemas__).forEach(function(a){const l=n.__schemas__[a];if(l===null)return;const c={validate:null,link:null};if(n.__compiled__[a]=c,CIe(l)){wIe(l.validate)?c.validate=NIe(l.validate):sz(l.validate)?c.validate=l.validate:s(a,l),sz(l.normalize)?c.normalize=l.normalize:l.normalize?s(a,l):c.normalize=oz();return}if(EIe(l)){i.push(a);return}s(a,l)}),i.forEach(function(a){n.__compiled__[n.__schemas__[a]]&&(n.__compiled__[a].validate=n.__compiled__[n.__schemas__[a]].validate,n.__compiled__[a].normalize=n.__compiled__[n.__schemas__[a]].normalize)}),n.__compiled__[""]={validate:null,normalize:oz()};const o=Object.keys(n.__compiled__).filter(function(a){return a.length>0&&n.__compiled__[a]}).map(TIe).join("|");n.re.schema_test=RegExp("(^|(?!_)(?:[><｜]|"+e.src_ZPCc+"))("+o+")","i"),n.re.schema_search=RegExp("(^|(?!_)(?:[><｜]|"+e.src_ZPCc+"))("+o+")","ig"),n.re.schema_at_start=RegExp("^"+n.re.schema_search.source,"i"),n.re.pretest=RegExp("("+n.re.schema_test.source+")|("+n.re.host_fuzzy_test.source+")|@","i"),RIe(n)}function PIe(n,e){const t=n.__index__,r=n.__last_index__,i=n.__text_cache__.slice(t,r);this.schema=n.__schema__.toLowerCase(),this.index=t+e,this.lastIndex=r+e,this.raw=i,this.text=i,this.url=i}function VN(n,e){const t=new PIe(n,e);return n.__compiled__[t.schema].normalize(t,n),t}function fl(n,e){if(!(this instanceof fl))return new fl(n,e);e||xIe(n)&&(e=n,n={}),this.__opts__=HN({},FK,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=HN({},IIe,n),this.__compiled__={},this.__tlds__=MIe,this.__tlds_replaced__=!1,this.re={},vx(this)}fl.prototype.add=function(e,t){return this.__schemas__[e]=t,vx(this),this};fl.prototype.set=function(e){return this.__opts__=HN(this.__opts__,e),this};fl.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;let t,r,i,s,o,a,l,c,u;if(this.re.schema_test.test(e)){for(l=this.re.schema_search,l.lastIndex=0;(t=l.exec(e))!==null;)if(s=this.testSchemaAt(e,t[2],l.lastIndex),s){this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+s;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(c=e.search(this.re.host_fuzzy_test),c>=0&&(this.__index__<0||c<this.__index__)&&(r=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(o=r.index+r[1].length,(this.__index__<0||o<this.__index__)&&(this.__schema__="",this.__index__=o,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(u=e.indexOf("@"),u>=0&&(i=e.match(this.re.email_fuzzy))!==null&&(o=i.index+i[1].length,a=i.index+i[0].length,(this.__index__<0||o<this.__index__||o===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=o,this.__last_index__=a))),this.__index__>=0};fl.prototype.pretest=function(e){return this.re.pretest.test(e)};fl.prototype.testSchemaAt=function(e,t,r){return this.__compiled__[t.toLowerCase()]?this.__compiled__[t.toLowerCase()].validate(e,r,this):0};fl.prototype.match=function(e){const t=[];let r=0;this.__index__>=0&&this.__text_cache__===e&&(t.push(VN(this,r)),r=this.__last_index__);let i=r?e.slice(r):e;for(;this.test(i);)t.push(VN(this,r)),i=i.slice(this.__last_index__),r+=this.__last_index__;return t.length?t:null};fl.prototype.matchAtStart=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return null;const t=this.re.schema_at_start.exec(e);if(!t)return null;const r=this.testSchemaAt(e,t[2],t[0].length);return r?(this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+r,VN(this,0)):null};fl.prototype.tlds=function(e,t){return e=Array.isArray(e)?e:[e],t?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(r,i,s){return r!==s[i-1]}).reverse(),vx(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,vx(this),this)};fl.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),e.schema==="mailto:"&&!/^mailto:/i.test(e.url)&&(e.url="mailto:"+e.url)};fl.prototype.onCompile=function(){};function zK(n={},e={}){const t=new fl(n,e);return OIe(t,e),{extensions:[{name:"autolink",level:"inline",start:r=>{const i=az(t,r);if(i)return i.index},tokenizer(r){if(this.lexer.state.inLink)return;const i=az(t,r);if(!i)return;let s;if(i.index===0?s=i.raw:i.index===1&&r.charAt(0)==="<"&&r.charAt(i.lastIndex)===">"&&(s=`<${i.raw}>`),!!s)return{type:"link",raw:s,text:i.text,href:i.url,tokens:[{type:"text",raw:i.text,text:i.text}]}}}]}}function az(n,e){const t=n.match(e);if(!(!t||!t.length))return t[0]}function OIe(n,e){const t=e.tlds;delete e.tlds;const r=e.tldsKeepOld;delete e.tldsKeepOld,t&&n.tlds(t,r)}const DIe=Object.freeze(Object.defineProperty({__proto__:null,default:zK},Symbol.toStringTag,{value:"Module"}));class Ya{constructor(e,t,r){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=t,this.end=r}static range(e,t){return t?!e||!e.loc||!t.loc||e.loc.lexer!==t.loc.lexer?null:new Ya(e.loc.lexer,e.loc.start,t.loc.end):e&&e.loc}}class Kl{constructor(e,t){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=t}range(e,t){return new Kl(t,Ya.range(this,e))}}class _t{constructor(e,t){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var r="KaTeX parse error: "+e,i,s,o=t&&t.loc;if(o&&o.start<=o.end){var a=o.lexer.input;i=o.start,s=o.end,i===a.length?r+=" at end of input: ":r+=" at position "+(i+1)+": ";var l=a.slice(i,s).replace(/[^]/g,"$&̲"),c;i>15?c="…"+a.slice(i-15,i):c=a.slice(0,i);var u;s+15<a.length?u=a.slice(s,s+15)+"…":u=a.slice(s),r+=c+l+u}var d=new Error(r);return d.name="ParseError",d.__proto__=_t.prototype,d.position=i,i!=null&&s!=null&&(d.length=s-i),d.rawMessage=e,d}}_t.prototype.__proto__=Error.prototype;var LIe=function(e,t){return e.indexOf(t)!==-1},kIe=function(e,t){return e===void 0?t:e},BIe=/([A-Z])/g,FIe=function(e){return e.replace(BIe,"-$1").toLowerCase()},zIe={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},UIe=/[&><"']/g;function jIe(n){return String(n).replace(UIe,e=>zIe[e])}var UK=function n(e){return e.type==="ordgroup"||e.type==="color"?e.body.length===1?n(e.body[0]):e:e.type==="font"?n(e.body):e},GIe=function(e){var t=UK(e);return t.type==="mathord"||t.type==="textord"||t.type==="atom"},HIe=function(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e},VIe=function(e){var t=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(e);return t?t[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(t[1])?null:t[1].toLowerCase():"_relative"},an={contains:LIe,deflt:kIe,escape:jIe,hyphenate:FIe,getBaseElem:UK,isCharacterBox:GIe,protocolFromUrl:VIe},yT={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:n=>"#"+n},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(n,e)=>(e.push(n),e)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:n=>Math.max(0,n),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:n=>Math.max(0,n),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:n=>Math.max(0,n),cli:"-e, --max-expand <n>",cliProcessor:n=>n==="Infinity"?1/0:parseInt(n)},globalGroup:{type:"boolean",cli:!1}};function $Ie(n){if(n.default)return n.default;var e=n.type,t=Array.isArray(e)?e[0]:e;if(typeof t!="string")return t.enum[0];switch(t){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class PD{constructor(e){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{};for(var t in yT)if(yT.hasOwnProperty(t)){var r=yT[t];this[t]=e[t]!==void 0?r.processor?r.processor(e[t]):e[t]:$Ie(r)}}reportNonstrict(e,t,r){var i=this.strict;if(typeof i=="function"&&(i=i(e,t,r)),!(!i||i==="ignore")){if(i===!0||i==="error")throw new _t("LaTeX-incompatible input and strict mode is set to 'error': "+(t+" ["+e+"]"),r);i==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(t+" ["+e+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+i+"': "+t+" ["+e+"]"))}}useStrictBehavior(e,t,r){var i=this.strict;if(typeof i=="function")try{i=i(e,t,r)}catch{i="error"}return!i||i==="ignore"?!1:i===!0||i==="error"?!0:i==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(t+" ["+e+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+i+"': "+t+" ["+e+"]")),!1)}isTrusted(e){if(e.url&&!e.protocol){var t=an.protocolFromUrl(e.url);if(t==null)return!1;e.protocol=t}var r=typeof this.trust=="function"?this.trust(e):this.trust;return!!r}}class qh{constructor(e,t,r){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=t,this.cramped=r}sup(){return Cu[WIe[this.id]]}sub(){return Cu[qIe[this.id]]}fracNum(){return Cu[QIe[this.id]]}fracDen(){return Cu[JIe[this.id]]}cramp(){return Cu[KIe[this.id]]}text(){return Cu[YIe[this.id]]}isTight(){return this.size>=2}}var OD=0,yx=1,bg=2,Gd=3,AS=4,Ql=5,Xg=6,ia=7,Cu=[new qh(OD,0,!1),new qh(yx,0,!0),new qh(bg,1,!1),new qh(Gd,1,!0),new qh(AS,2,!1),new qh(Ql,2,!0),new qh(Xg,3,!1),new qh(ia,3,!0)],WIe=[AS,Ql,AS,Ql,Xg,ia,Xg,ia],qIe=[Ql,Ql,Ql,Ql,ia,ia,ia,ia],QIe=[bg,Gd,AS,Ql,Xg,ia,Xg,ia],JIe=[Gd,Gd,Ql,Ql,ia,ia,ia,ia],KIe=[yx,yx,Gd,Gd,Ql,Ql,ia,ia],YIe=[OD,yx,bg,Gd,bg,Gd,bg,Gd],fn={DISPLAY:Cu[OD],TEXT:Cu[bg],SCRIPT:Cu[AS],SCRIPTSCRIPT:Cu[Xg]},$N=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function XIe(n){for(var e=0;e<$N.length;e++)for(var t=$N[e],r=0;r<t.blocks.length;r++){var i=t.blocks[r];if(n>=i[0]&&n<=i[1])return t.name}return null}var _T=[];$N.forEach(n=>n.blocks.forEach(e=>_T.push(...e)));function jK(n){for(var e=0;e<_T.length;e+=2)if(n>=_T[e]&&n<=_T[e+1])return!0;return!1}var j0=80,ZIe=function(e,t){return"M95,"+(622+e+t)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+e/2.075+" -"+e+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+e)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+e)+" "+t+"h400000v"+(40+e)+"h-400000z"},e2e=function(e,t){return"M263,"+(601+e+t)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+e/2.084+" -"+e+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+e)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+e)+" "+t+"h400000v"+(40+e)+"h-400000z"},t2e=function(e,t){return"M983 "+(10+e+t)+`
l`+e/3.13+" -"+e+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+e)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+e)+" "+t+"h400000v"+(40+e)+"h-400000z"},n2e=function(e,t){return"M424,"+(2398+e+t)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+e/4.223+" -"+e+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+e)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+e)+" "+t+`
h400000v`+(40+e)+"h-400000z"},r2e=function(e,t){return"M473,"+(2713+e+t)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+e/5.298+" -"+e+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+e)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+e)+" "+t+"h400000v"+(40+e)+"H1017.7z"},i2e=function(e){var t=e/2;return"M400000 "+e+" H0 L"+t+" 0 l65 45 L145 "+(e-80)+" H400000z"},s2e=function(e,t,r){var i=r-54-t-e;return"M702 "+(e+t)+"H400000"+(40+e)+`
H742v`+i+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+t+"H400000v"+(40+e)+"H742z"},o2e=function(e,t,r){t=1e3*t;var i="";switch(e){case"sqrtMain":i=ZIe(t,j0);break;case"sqrtSize1":i=e2e(t,j0);break;case"sqrtSize2":i=t2e(t,j0);break;case"sqrtSize3":i=n2e(t,j0);break;case"sqrtSize4":i=r2e(t,j0);break;case"sqrtTall":i=s2e(t,j0,r)}return i},a2e=function(e,t){switch(e){case"⎜":return"M291 0 H417 V"+t+" H291z M291 0 H417 V"+t+" H291z";case"∣":return"M145 0 H188 V"+t+" H145z M145 0 H188 V"+t+" H145z";case"∥":return"M145 0 H188 V"+t+" H145z M145 0 H188 V"+t+" H145z"+("M367 0 H410 V"+t+" H367z M367 0 H410 V"+t+" H367z");case"⎟":return"M457 0 H583 V"+t+" H457z M457 0 H583 V"+t+" H457z";case"⎢":return"M319 0 H403 V"+t+" H319z M319 0 H403 V"+t+" H319z";case"⎥":return"M263 0 H347 V"+t+" H263z M263 0 H347 V"+t+" H263z";case"⎪":return"M384 0 H504 V"+t+" H384z M384 0 H504 V"+t+" H384z";case"⏐":return"M312 0 H355 V"+t+" H312z M312 0 H355 V"+t+" H312z";case"‖":return"M257 0 H300 V"+t+" H257z M257 0 H300 V"+t+" H257z"+("M478 0 H521 V"+t+" H478z M478 0 H521 V"+t+" H478z");default:return""}},lz={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},l2e=function(e,t){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+t+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+t+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+t+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+t+" v1759 h84z";case"vert":return"M145 15 v585 v"+t+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-t+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+t+" v585 h43z";case"doublevert":return"M145 15 v585 v"+t+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-t+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+t+` v585 h43z
M367 15 v585 v`+t+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-t+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+t+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+t+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+t+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+t+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+t+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+t+` v602 h84z
M403 1759 V0 H319 V1759 v`+t+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+t+` v602 h84z
M347 1759 V0 h-84 V1759 v`+t+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(t+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(t+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(t+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(t+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class FA{constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return an.contains(this.classes,e)}toNode(){for(var e=document.createDocumentFragment(),t=0;t<this.children.length;t++)e.appendChild(this.children[t].toNode());return e}toMarkup(){for(var e="",t=0;t<this.children.length;t++)e+=this.children[t].toMarkup();return e}toText(){var e=t=>t.toText();return this.children.map(e).join("")}}var bu={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},zC={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},cz={Å:"A",Ð:"D",Þ:"o",å:"a",ð:"d",þ:"o",А:"A",Б:"B",В:"B",Г:"F",Д:"A",Е:"E",Ж:"K",З:"3",И:"N",Й:"N",К:"K",Л:"N",М:"M",Н:"H",О:"O",П:"N",Р:"P",С:"C",Т:"T",У:"y",Ф:"O",Х:"X",Ц:"U",Ч:"h",Ш:"W",Щ:"W",Ъ:"B",Ы:"X",Ь:"B",Э:"3",Ю:"X",Я:"R",а:"a",б:"b",в:"a",г:"r",д:"y",е:"e",ж:"m",з:"e",и:"n",й:"n",к:"n",л:"n",м:"m",н:"n",о:"o",п:"n",р:"p",с:"c",т:"o",у:"y",ф:"b",х:"x",ц:"n",ч:"n",ш:"w",щ:"w",ъ:"a",ы:"m",ь:"a",э:"e",ю:"m",я:"r"};function c2e(n,e){bu[n]=e}function DD(n,e,t){if(!bu[e])throw new Error("Font metrics not found for font: "+e+".");var r=n.charCodeAt(0),i=bu[e][r];if(!i&&n[0]in cz&&(r=cz[n[0]].charCodeAt(0),i=bu[e][r]),!i&&t==="text"&&jK(r)&&(i=bu[e][77]),i)return{depth:i[0],height:i[1],italic:i[2],skew:i[3],width:i[4]}}var G3={};function u2e(n){var e;if(n>=5?e=0:n>=3?e=1:e=2,!G3[e]){var t=G3[e]={cssEmPerMu:zC.quad[e]/18};for(var r in zC)zC.hasOwnProperty(r)&&(t[r]=zC[r][e])}return G3[e]}var d2e=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],uz=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],dz=function(e,t){return t.size<2?e:d2e[e-1][t.size-1]};class bd{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||bd.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=uz[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var t={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return new bd(t)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:dz(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:uz[e-1]})}havingBaseStyle(e){e=e||this.style.text();var t=dz(bd.BASESIZE,e);return this.size===t&&this.textSize===bd.BASESIZE&&this.style===e?this:this.extend({style:e,size:t})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==bd.BASESIZE?["sizing","reset-size"+this.size,"size"+bd.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=u2e(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}bd.BASESIZE=6;var WN={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},h2e={ex:!0,em:!0,mu:!0},GK=function(e){return typeof e!="string"&&(e=e.unit),e in WN||e in h2e||e==="ex"},wi=function(e,t){var r;if(e.unit in WN)r=WN[e.unit]/t.fontMetrics().ptPerEm/t.sizeMultiplier;else if(e.unit==="mu")r=t.fontMetrics().cssEmPerMu;else{var i;if(t.style.isTight()?i=t.havingStyle(t.style.text()):i=t,e.unit==="ex")r=i.fontMetrics().xHeight;else if(e.unit==="em")r=i.fontMetrics().quad;else throw new _t("Invalid unit: '"+e.unit+"'");i!==t&&(r*=i.sizeMultiplier/t.sizeMultiplier)}return Math.min(e.number*r,t.maxSize)},Tt=function(e){return+e.toFixed(4)+"em"},jf=function(e){return e.filter(t=>t).join(" ")},HK=function(e,t,r){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=r||{},t){t.style.isTight()&&this.classes.push("mtight");var i=t.getColor();i&&(this.style.color=i)}},VK=function(e){var t=document.createElement(e);t.className=jf(this.classes);for(var r in this.style)this.style.hasOwnProperty(r)&&(t.style[r]=this.style[r]);for(var i in this.attributes)this.attributes.hasOwnProperty(i)&&t.setAttribute(i,this.attributes[i]);for(var s=0;s<this.children.length;s++)t.appendChild(this.children[s].toNode());return t},$K=function(e){var t="<"+e;this.classes.length&&(t+=' class="'+an.escape(jf(this.classes))+'"');var r="";for(var i in this.style)this.style.hasOwnProperty(i)&&(r+=an.hyphenate(i)+":"+this.style[i]+";");r&&(t+=' style="'+an.escape(r)+'"');for(var s in this.attributes)this.attributes.hasOwnProperty(s)&&(t+=" "+s+'="'+an.escape(this.attributes[s])+'"');t+=">";for(var o=0;o<this.children.length;o++)t+=this.children[o].toMarkup();return t+="</"+e+">",t};class zA{constructor(e,t,r,i){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,HK.call(this,e,r,i),this.children=t||[]}setAttribute(e,t){this.attributes[e]=t}hasClass(e){return an.contains(this.classes,e)}toNode(){return VK.call(this,"span")}toMarkup(){return $K.call(this,"span")}}class LD{constructor(e,t,r,i){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,HK.call(this,t,i),this.children=r||[],this.setAttribute("href",e)}setAttribute(e,t){this.attributes[e]=t}hasClass(e){return an.contains(this.classes,e)}toNode(){return VK.call(this,"a")}toMarkup(){return $K.call(this,"a")}}class f2e{constructor(e,t,r){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=t,this.src=e,this.classes=["mord"],this.style=r}hasClass(e){return an.contains(this.classes,e)}toNode(){var e=document.createElement("img");e.src=this.src,e.alt=this.alt,e.className="mord";for(var t in this.style)this.style.hasOwnProperty(t)&&(e.style[t]=this.style[t]);return e}toMarkup(){var e='<img src="'+an.escape(this.src)+'"'+(' alt="'+an.escape(this.alt)+'"'),t="";for(var r in this.style)this.style.hasOwnProperty(r)&&(t+=an.hyphenate(r)+":"+this.style[r]+";");return t&&(e+=' style="'+an.escape(t)+'"'),e+="'/>",e}}var p2e={î:"ı̂",ï:"ı̈",í:"ı́",ì:"ı̀"};class ic{constructor(e,t,r,i,s,o,a,l){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=t||0,this.depth=r||0,this.italic=i||0,this.skew=s||0,this.width=o||0,this.classes=a||[],this.style=l||{},this.maxFontSize=0;var c=XIe(this.text.charCodeAt(0));c&&this.classes.push(c+"_fallback"),/[îïíì]/.test(this.text)&&(this.text=p2e[this.text])}hasClass(e){return an.contains(this.classes,e)}toNode(){var e=document.createTextNode(this.text),t=null;this.italic>0&&(t=document.createElement("span"),t.style.marginRight=Tt(this.italic)),this.classes.length>0&&(t=t||document.createElement("span"),t.className=jf(this.classes));for(var r in this.style)this.style.hasOwnProperty(r)&&(t=t||document.createElement("span"),t.style[r]=this.style[r]);return t?(t.appendChild(e),t):e}toMarkup(){var e=!1,t="<span";this.classes.length&&(e=!0,t+=' class="',t+=an.escape(jf(this.classes)),t+='"');var r="";this.italic>0&&(r+="margin-right:"+this.italic+"em;");for(var i in this.style)this.style.hasOwnProperty(i)&&(r+=an.hyphenate(i)+":"+this.style[i]+";");r&&(e=!0,t+=' style="'+an.escape(r)+'"');var s=an.escape(this.text);return e?(t+=">",t+=s,t+="</span>",t):s}}class eh{constructor(e,t){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=t||{}}toNode(){var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"svg");for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&t.setAttribute(r,this.attributes[r]);for(var i=0;i<this.children.length;i++)t.appendChild(this.children[i].toNode());return t}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="'+an.escape(this.attributes[t])+'"');e+=">";for(var r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e+="</svg>",e}}class Gf{constructor(e,t){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=t}toNode(){var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"path");return this.alternate?t.setAttribute("d",this.alternate):t.setAttribute("d",lz[this.pathName]),t}toMarkup(){return this.alternate?'<path d="'+an.escape(this.alternate)+'"/>':'<path d="'+an.escape(lz[this.pathName])+'"/>'}}class qN{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"line");for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&t.setAttribute(r,this.attributes[r]);return t}toMarkup(){var e="<line";for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="'+an.escape(this.attributes[t])+'"');return e+="/>",e}}function hz(n){if(n instanceof ic)return n;throw new Error("Expected symbolNode but got "+String(n)+".")}function m2e(n){if(n instanceof zA)return n;throw new Error("Expected span<HtmlDomNode> but got "+String(n)+".")}var g2e={bin:1,close:1,inner:1,open:1,punct:1,rel:1},v2e={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},ti={math:{},text:{}};function F(n,e,t,r,i,s){ti[n][i]={font:e,group:t,replace:r},s&&r&&(ti[n][r]=ti[n][i])}var H="math",dt="text",X="main",pe="ams",vi="accent-token",jt="bin",pa="close",Rv="inner",hn="mathord",vs="op-token",yl="open",Z2="punct",ve="rel",fh="spacing",Ee="textord";F(H,X,ve,"≡","\\equiv",!0);F(H,X,ve,"≺","\\prec",!0);F(H,X,ve,"≻","\\succ",!0);F(H,X,ve,"∼","\\sim",!0);F(H,X,ve,"⊥","\\perp");F(H,X,ve,"⪯","\\preceq",!0);F(H,X,ve,"⪰","\\succeq",!0);F(H,X,ve,"≃","\\simeq",!0);F(H,X,ve,"∣","\\mid",!0);F(H,X,ve,"≪","\\ll",!0);F(H,X,ve,"≫","\\gg",!0);F(H,X,ve,"≍","\\asymp",!0);F(H,X,ve,"∥","\\parallel");F(H,X,ve,"⋈","\\bowtie",!0);F(H,X,ve,"⌣","\\smile",!0);F(H,X,ve,"⊑","\\sqsubseteq",!0);F(H,X,ve,"⊒","\\sqsupseteq",!0);F(H,X,ve,"≐","\\doteq",!0);F(H,X,ve,"⌢","\\frown",!0);F(H,X,ve,"∋","\\ni",!0);F(H,X,ve,"∝","\\propto",!0);F(H,X,ve,"⊢","\\vdash",!0);F(H,X,ve,"⊣","\\dashv",!0);F(H,X,ve,"∋","\\owns");F(H,X,Z2,".","\\ldotp");F(H,X,Z2,"⋅","\\cdotp");F(H,X,Ee,"#","\\#");F(dt,X,Ee,"#","\\#");F(H,X,Ee,"&","\\&");F(dt,X,Ee,"&","\\&");F(H,X,Ee,"ℵ","\\aleph",!0);F(H,X,Ee,"∀","\\forall",!0);F(H,X,Ee,"ℏ","\\hbar",!0);F(H,X,Ee,"∃","\\exists",!0);F(H,X,Ee,"∇","\\nabla",!0);F(H,X,Ee,"♭","\\flat",!0);F(H,X,Ee,"ℓ","\\ell",!0);F(H,X,Ee,"♮","\\natural",!0);F(H,X,Ee,"♣","\\clubsuit",!0);F(H,X,Ee,"℘","\\wp",!0);F(H,X,Ee,"♯","\\sharp",!0);F(H,X,Ee,"♢","\\diamondsuit",!0);F(H,X,Ee,"ℜ","\\Re",!0);F(H,X,Ee,"♡","\\heartsuit",!0);F(H,X,Ee,"ℑ","\\Im",!0);F(H,X,Ee,"♠","\\spadesuit",!0);F(H,X,Ee,"§","\\S",!0);F(dt,X,Ee,"§","\\S");F(H,X,Ee,"¶","\\P",!0);F(dt,X,Ee,"¶","\\P");F(H,X,Ee,"†","\\dag");F(dt,X,Ee,"†","\\dag");F(dt,X,Ee,"†","\\textdagger");F(H,X,Ee,"‡","\\ddag");F(dt,X,Ee,"‡","\\ddag");F(dt,X,Ee,"‡","\\textdaggerdbl");F(H,X,pa,"⎱","\\rmoustache",!0);F(H,X,yl,"⎰","\\lmoustache",!0);F(H,X,pa,"⟯","\\rgroup",!0);F(H,X,yl,"⟮","\\lgroup",!0);F(H,X,jt,"∓","\\mp",!0);F(H,X,jt,"⊖","\\ominus",!0);F(H,X,jt,"⊎","\\uplus",!0);F(H,X,jt,"⊓","\\sqcap",!0);F(H,X,jt,"∗","\\ast");F(H,X,jt,"⊔","\\sqcup",!0);F(H,X,jt,"◯","\\bigcirc",!0);F(H,X,jt,"∙","\\bullet",!0);F(H,X,jt,"‡","\\ddagger");F(H,X,jt,"≀","\\wr",!0);F(H,X,jt,"⨿","\\amalg");F(H,X,jt,"&","\\And");F(H,X,ve,"⟵","\\longleftarrow",!0);F(H,X,ve,"⇐","\\Leftarrow",!0);F(H,X,ve,"⟸","\\Longleftarrow",!0);F(H,X,ve,"⟶","\\longrightarrow",!0);F(H,X,ve,"⇒","\\Rightarrow",!0);F(H,X,ve,"⟹","\\Longrightarrow",!0);F(H,X,ve,"↔","\\leftrightarrow",!0);F(H,X,ve,"⟷","\\longleftrightarrow",!0);F(H,X,ve,"⇔","\\Leftrightarrow",!0);F(H,X,ve,"⟺","\\Longleftrightarrow",!0);F(H,X,ve,"↦","\\mapsto",!0);F(H,X,ve,"⟼","\\longmapsto",!0);F(H,X,ve,"↗","\\nearrow",!0);F(H,X,ve,"↩","\\hookleftarrow",!0);F(H,X,ve,"↪","\\hookrightarrow",!0);F(H,X,ve,"↘","\\searrow",!0);F(H,X,ve,"↼","\\leftharpoonup",!0);F(H,X,ve,"⇀","\\rightharpoonup",!0);F(H,X,ve,"↙","\\swarrow",!0);F(H,X,ve,"↽","\\leftharpoondown",!0);F(H,X,ve,"⇁","\\rightharpoondown",!0);F(H,X,ve,"↖","\\nwarrow",!0);F(H,X,ve,"⇌","\\rightleftharpoons",!0);F(H,pe,ve,"≮","\\nless",!0);F(H,pe,ve,"","\\@nleqslant");F(H,pe,ve,"","\\@nleqq");F(H,pe,ve,"⪇","\\lneq",!0);F(H,pe,ve,"≨","\\lneqq",!0);F(H,pe,ve,"","\\@lvertneqq");F(H,pe,ve,"⋦","\\lnsim",!0);F(H,pe,ve,"⪉","\\lnapprox",!0);F(H,pe,ve,"⊀","\\nprec",!0);F(H,pe,ve,"⋠","\\npreceq",!0);F(H,pe,ve,"⋨","\\precnsim",!0);F(H,pe,ve,"⪹","\\precnapprox",!0);F(H,pe,ve,"≁","\\nsim",!0);F(H,pe,ve,"","\\@nshortmid");F(H,pe,ve,"∤","\\nmid",!0);F(H,pe,ve,"⊬","\\nvdash",!0);F(H,pe,ve,"⊭","\\nvDash",!0);F(H,pe,ve,"⋪","\\ntriangleleft");F(H,pe,ve,"⋬","\\ntrianglelefteq",!0);F(H,pe,ve,"⊊","\\subsetneq",!0);F(H,pe,ve,"","\\@varsubsetneq");F(H,pe,ve,"⫋","\\subsetneqq",!0);F(H,pe,ve,"","\\@varsubsetneqq");F(H,pe,ve,"≯","\\ngtr",!0);F(H,pe,ve,"","\\@ngeqslant");F(H,pe,ve,"","\\@ngeqq");F(H,pe,ve,"⪈","\\gneq",!0);F(H,pe,ve,"≩","\\gneqq",!0);F(H,pe,ve,"","\\@gvertneqq");F(H,pe,ve,"⋧","\\gnsim",!0);F(H,pe,ve,"⪊","\\gnapprox",!0);F(H,pe,ve,"⊁","\\nsucc",!0);F(H,pe,ve,"⋡","\\nsucceq",!0);F(H,pe,ve,"⋩","\\succnsim",!0);F(H,pe,ve,"⪺","\\succnapprox",!0);F(H,pe,ve,"≆","\\ncong",!0);F(H,pe,ve,"","\\@nshortparallel");F(H,pe,ve,"∦","\\nparallel",!0);F(H,pe,ve,"⊯","\\nVDash",!0);F(H,pe,ve,"⋫","\\ntriangleright");F(H,pe,ve,"⋭","\\ntrianglerighteq",!0);F(H,pe,ve,"","\\@nsupseteqq");F(H,pe,ve,"⊋","\\supsetneq",!0);F(H,pe,ve,"","\\@varsupsetneq");F(H,pe,ve,"⫌","\\supsetneqq",!0);F(H,pe,ve,"","\\@varsupsetneqq");F(H,pe,ve,"⊮","\\nVdash",!0);F(H,pe,ve,"⪵","\\precneqq",!0);F(H,pe,ve,"⪶","\\succneqq",!0);F(H,pe,ve,"","\\@nsubseteqq");F(H,pe,jt,"⊴","\\unlhd");F(H,pe,jt,"⊵","\\unrhd");F(H,pe,ve,"↚","\\nleftarrow",!0);F(H,pe,ve,"↛","\\nrightarrow",!0);F(H,pe,ve,"⇍","\\nLeftarrow",!0);F(H,pe,ve,"⇏","\\nRightarrow",!0);F(H,pe,ve,"↮","\\nleftrightarrow",!0);F(H,pe,ve,"⇎","\\nLeftrightarrow",!0);F(H,pe,ve,"△","\\vartriangle");F(H,pe,Ee,"ℏ","\\hslash");F(H,pe,Ee,"▽","\\triangledown");F(H,pe,Ee,"◊","\\lozenge");F(H,pe,Ee,"Ⓢ","\\circledS");F(H,pe,Ee,"®","\\circledR");F(dt,pe,Ee,"®","\\circledR");F(H,pe,Ee,"∡","\\measuredangle",!0);F(H,pe,Ee,"∄","\\nexists");F(H,pe,Ee,"℧","\\mho");F(H,pe,Ee,"Ⅎ","\\Finv",!0);F(H,pe,Ee,"⅁","\\Game",!0);F(H,pe,Ee,"‵","\\backprime");F(H,pe,Ee,"▲","\\blacktriangle");F(H,pe,Ee,"▼","\\blacktriangledown");F(H,pe,Ee,"■","\\blacksquare");F(H,pe,Ee,"⧫","\\blacklozenge");F(H,pe,Ee,"★","\\bigstar");F(H,pe,Ee,"∢","\\sphericalangle",!0);F(H,pe,Ee,"∁","\\complement",!0);F(H,pe,Ee,"ð","\\eth",!0);F(dt,X,Ee,"ð","ð");F(H,pe,Ee,"╱","\\diagup");F(H,pe,Ee,"╲","\\diagdown");F(H,pe,Ee,"□","\\square");F(H,pe,Ee,"□","\\Box");F(H,pe,Ee,"◊","\\Diamond");F(H,pe,Ee,"¥","\\yen",!0);F(dt,pe,Ee,"¥","\\yen",!0);F(H,pe,Ee,"✓","\\checkmark",!0);F(dt,pe,Ee,"✓","\\checkmark");F(H,pe,Ee,"ℶ","\\beth",!0);F(H,pe,Ee,"ℸ","\\daleth",!0);F(H,pe,Ee,"ℷ","\\gimel",!0);F(H,pe,Ee,"ϝ","\\digamma",!0);F(H,pe,Ee,"ϰ","\\varkappa");F(H,pe,yl,"┌","\\@ulcorner",!0);F(H,pe,pa,"┐","\\@urcorner",!0);F(H,pe,yl,"└","\\@llcorner",!0);F(H,pe,pa,"┘","\\@lrcorner",!0);F(H,pe,ve,"≦","\\leqq",!0);F(H,pe,ve,"⩽","\\leqslant",!0);F(H,pe,ve,"⪕","\\eqslantless",!0);F(H,pe,ve,"≲","\\lesssim",!0);F(H,pe,ve,"⪅","\\lessapprox",!0);F(H,pe,ve,"≊","\\approxeq",!0);F(H,pe,jt,"⋖","\\lessdot");F(H,pe,ve,"⋘","\\lll",!0);F(H,pe,ve,"≶","\\lessgtr",!0);F(H,pe,ve,"⋚","\\lesseqgtr",!0);F(H,pe,ve,"⪋","\\lesseqqgtr",!0);F(H,pe,ve,"≑","\\doteqdot");F(H,pe,ve,"≓","\\risingdotseq",!0);F(H,pe,ve,"≒","\\fallingdotseq",!0);F(H,pe,ve,"∽","\\backsim",!0);F(H,pe,ve,"⋍","\\backsimeq",!0);F(H,pe,ve,"⫅","\\subseteqq",!0);F(H,pe,ve,"⋐","\\Subset",!0);F(H,pe,ve,"⊏","\\sqsubset",!0);F(H,pe,ve,"≼","\\preccurlyeq",!0);F(H,pe,ve,"⋞","\\curlyeqprec",!0);F(H,pe,ve,"≾","\\precsim",!0);F(H,pe,ve,"⪷","\\precapprox",!0);F(H,pe,ve,"⊲","\\vartriangleleft");F(H,pe,ve,"⊴","\\trianglelefteq");F(H,pe,ve,"⊨","\\vDash",!0);F(H,pe,ve,"⊪","\\Vvdash",!0);F(H,pe,ve,"⌣","\\smallsmile");F(H,pe,ve,"⌢","\\smallfrown");F(H,pe,ve,"≏","\\bumpeq",!0);F(H,pe,ve,"≎","\\Bumpeq",!0);F(H,pe,ve,"≧","\\geqq",!0);F(H,pe,ve,"⩾","\\geqslant",!0);F(H,pe,ve,"⪖","\\eqslantgtr",!0);F(H,pe,ve,"≳","\\gtrsim",!0);F(H,pe,ve,"⪆","\\gtrapprox",!0);F(H,pe,jt,"⋗","\\gtrdot");F(H,pe,ve,"⋙","\\ggg",!0);F(H,pe,ve,"≷","\\gtrless",!0);F(H,pe,ve,"⋛","\\gtreqless",!0);F(H,pe,ve,"⪌","\\gtreqqless",!0);F(H,pe,ve,"≖","\\eqcirc",!0);F(H,pe,ve,"≗","\\circeq",!0);F(H,pe,ve,"≜","\\triangleq",!0);F(H,pe,ve,"∼","\\thicksim");F(H,pe,ve,"≈","\\thickapprox");F(H,pe,ve,"⫆","\\supseteqq",!0);F(H,pe,ve,"⋑","\\Supset",!0);F(H,pe,ve,"⊐","\\sqsupset",!0);F(H,pe,ve,"≽","\\succcurlyeq",!0);F(H,pe,ve,"⋟","\\curlyeqsucc",!0);F(H,pe,ve,"≿","\\succsim",!0);F(H,pe,ve,"⪸","\\succapprox",!0);F(H,pe,ve,"⊳","\\vartriangleright");F(H,pe,ve,"⊵","\\trianglerighteq");F(H,pe,ve,"⊩","\\Vdash",!0);F(H,pe,ve,"∣","\\shortmid");F(H,pe,ve,"∥","\\shortparallel");F(H,pe,ve,"≬","\\between",!0);F(H,pe,ve,"⋔","\\pitchfork",!0);F(H,pe,ve,"∝","\\varpropto");F(H,pe,ve,"◀","\\blacktriangleleft");F(H,pe,ve,"∴","\\therefore",!0);F(H,pe,ve,"∍","\\backepsilon");F(H,pe,ve,"▶","\\blacktriangleright");F(H,pe,ve,"∵","\\because",!0);F(H,pe,ve,"⋘","\\llless");F(H,pe,ve,"⋙","\\gggtr");F(H,pe,jt,"⊲","\\lhd");F(H,pe,jt,"⊳","\\rhd");F(H,pe,ve,"≂","\\eqsim",!0);F(H,X,ve,"⋈","\\Join");F(H,pe,ve,"≑","\\Doteq",!0);F(H,pe,jt,"∔","\\dotplus",!0);F(H,pe,jt,"∖","\\smallsetminus");F(H,pe,jt,"⋒","\\Cap",!0);F(H,pe,jt,"⋓","\\Cup",!0);F(H,pe,jt,"⩞","\\doublebarwedge",!0);F(H,pe,jt,"⊟","\\boxminus",!0);F(H,pe,jt,"⊞","\\boxplus",!0);F(H,pe,jt,"⋇","\\divideontimes",!0);F(H,pe,jt,"⋉","\\ltimes",!0);F(H,pe,jt,"⋊","\\rtimes",!0);F(H,pe,jt,"⋋","\\leftthreetimes",!0);F(H,pe,jt,"⋌","\\rightthreetimes",!0);F(H,pe,jt,"⋏","\\curlywedge",!0);F(H,pe,jt,"⋎","\\curlyvee",!0);F(H,pe,jt,"⊝","\\circleddash",!0);F(H,pe,jt,"⊛","\\circledast",!0);F(H,pe,jt,"⋅","\\centerdot");F(H,pe,jt,"⊺","\\intercal",!0);F(H,pe,jt,"⋒","\\doublecap");F(H,pe,jt,"⋓","\\doublecup");F(H,pe,jt,"⊠","\\boxtimes",!0);F(H,pe,ve,"⇢","\\dashrightarrow",!0);F(H,pe,ve,"⇠","\\dashleftarrow",!0);F(H,pe,ve,"⇇","\\leftleftarrows",!0);F(H,pe,ve,"⇆","\\leftrightarrows",!0);F(H,pe,ve,"⇚","\\Lleftarrow",!0);F(H,pe,ve,"↞","\\twoheadleftarrow",!0);F(H,pe,ve,"↢","\\leftarrowtail",!0);F(H,pe,ve,"↫","\\looparrowleft",!0);F(H,pe,ve,"⇋","\\leftrightharpoons",!0);F(H,pe,ve,"↶","\\curvearrowleft",!0);F(H,pe,ve,"↺","\\circlearrowleft",!0);F(H,pe,ve,"↰","\\Lsh",!0);F(H,pe,ve,"⇈","\\upuparrows",!0);F(H,pe,ve,"↿","\\upharpoonleft",!0);F(H,pe,ve,"⇃","\\downharpoonleft",!0);F(H,X,ve,"⊶","\\origof",!0);F(H,X,ve,"⊷","\\imageof",!0);F(H,pe,ve,"⊸","\\multimap",!0);F(H,pe,ve,"↭","\\leftrightsquigarrow",!0);F(H,pe,ve,"⇉","\\rightrightarrows",!0);F(H,pe,ve,"⇄","\\rightleftarrows",!0);F(H,pe,ve,"↠","\\twoheadrightarrow",!0);F(H,pe,ve,"↣","\\rightarrowtail",!0);F(H,pe,ve,"↬","\\looparrowright",!0);F(H,pe,ve,"↷","\\curvearrowright",!0);F(H,pe,ve,"↻","\\circlearrowright",!0);F(H,pe,ve,"↱","\\Rsh",!0);F(H,pe,ve,"⇊","\\downdownarrows",!0);F(H,pe,ve,"↾","\\upharpoonright",!0);F(H,pe,ve,"⇂","\\downharpoonright",!0);F(H,pe,ve,"⇝","\\rightsquigarrow",!0);F(H,pe,ve,"⇝","\\leadsto");F(H,pe,ve,"⇛","\\Rrightarrow",!0);F(H,pe,ve,"↾","\\restriction");F(H,X,Ee,"‘","`");F(H,X,Ee,"$","\\$");F(dt,X,Ee,"$","\\$");F(dt,X,Ee,"$","\\textdollar");F(H,X,Ee,"%","\\%");F(dt,X,Ee,"%","\\%");F(H,X,Ee,"_","\\_");F(dt,X,Ee,"_","\\_");F(dt,X,Ee,"_","\\textunderscore");F(H,X,Ee,"∠","\\angle",!0);F(H,X,Ee,"∞","\\infty",!0);F(H,X,Ee,"′","\\prime");F(H,X,Ee,"△","\\triangle");F(H,X,Ee,"Γ","\\Gamma",!0);F(H,X,Ee,"Δ","\\Delta",!0);F(H,X,Ee,"Θ","\\Theta",!0);F(H,X,Ee,"Λ","\\Lambda",!0);F(H,X,Ee,"Ξ","\\Xi",!0);F(H,X,Ee,"Π","\\Pi",!0);F(H,X,Ee,"Σ","\\Sigma",!0);F(H,X,Ee,"Υ","\\Upsilon",!0);F(H,X,Ee,"Φ","\\Phi",!0);F(H,X,Ee,"Ψ","\\Psi",!0);F(H,X,Ee,"Ω","\\Omega",!0);F(H,X,Ee,"A","Α");F(H,X,Ee,"B","Β");F(H,X,Ee,"E","Ε");F(H,X,Ee,"Z","Ζ");F(H,X,Ee,"H","Η");F(H,X,Ee,"I","Ι");F(H,X,Ee,"K","Κ");F(H,X,Ee,"M","Μ");F(H,X,Ee,"N","Ν");F(H,X,Ee,"O","Ο");F(H,X,Ee,"P","Ρ");F(H,X,Ee,"T","Τ");F(H,X,Ee,"X","Χ");F(H,X,Ee,"¬","\\neg",!0);F(H,X,Ee,"¬","\\lnot");F(H,X,Ee,"⊤","\\top");F(H,X,Ee,"⊥","\\bot");F(H,X,Ee,"∅","\\emptyset");F(H,pe,Ee,"∅","\\varnothing");F(H,X,hn,"α","\\alpha",!0);F(H,X,hn,"β","\\beta",!0);F(H,X,hn,"γ","\\gamma",!0);F(H,X,hn,"δ","\\delta",!0);F(H,X,hn,"ϵ","\\epsilon",!0);F(H,X,hn,"ζ","\\zeta",!0);F(H,X,hn,"η","\\eta",!0);F(H,X,hn,"θ","\\theta",!0);F(H,X,hn,"ι","\\iota",!0);F(H,X,hn,"κ","\\kappa",!0);F(H,X,hn,"λ","\\lambda",!0);F(H,X,hn,"μ","\\mu",!0);F(H,X,hn,"ν","\\nu",!0);F(H,X,hn,"ξ","\\xi",!0);F(H,X,hn,"ο","\\omicron",!0);F(H,X,hn,"π","\\pi",!0);F(H,X,hn,"ρ","\\rho",!0);F(H,X,hn,"σ","\\sigma",!0);F(H,X,hn,"τ","\\tau",!0);F(H,X,hn,"υ","\\upsilon",!0);F(H,X,hn,"ϕ","\\phi",!0);F(H,X,hn,"χ","\\chi",!0);F(H,X,hn,"ψ","\\psi",!0);F(H,X,hn,"ω","\\omega",!0);F(H,X,hn,"ε","\\varepsilon",!0);F(H,X,hn,"ϑ","\\vartheta",!0);F(H,X,hn,"ϖ","\\varpi",!0);F(H,X,hn,"ϱ","\\varrho",!0);F(H,X,hn,"ς","\\varsigma",!0);F(H,X,hn,"φ","\\varphi",!0);F(H,X,jt,"∗","*",!0);F(H,X,jt,"+","+");F(H,X,jt,"−","-",!0);F(H,X,jt,"⋅","\\cdot",!0);F(H,X,jt,"∘","\\circ",!0);F(H,X,jt,"÷","\\div",!0);F(H,X,jt,"±","\\pm",!0);F(H,X,jt,"×","\\times",!0);F(H,X,jt,"∩","\\cap",!0);F(H,X,jt,"∪","\\cup",!0);F(H,X,jt,"∖","\\setminus",!0);F(H,X,jt,"∧","\\land");F(H,X,jt,"∨","\\lor");F(H,X,jt,"∧","\\wedge",!0);F(H,X,jt,"∨","\\vee",!0);F(H,X,Ee,"√","\\surd");F(H,X,yl,"⟨","\\langle",!0);F(H,X,yl,"∣","\\lvert");F(H,X,yl,"∥","\\lVert");F(H,X,pa,"?","?");F(H,X,pa,"!","!");F(H,X,pa,"⟩","\\rangle",!0);F(H,X,pa,"∣","\\rvert");F(H,X,pa,"∥","\\rVert");F(H,X,ve,"=","=");F(H,X,ve,":",":");F(H,X,ve,"≈","\\approx",!0);F(H,X,ve,"≅","\\cong",!0);F(H,X,ve,"≥","\\ge");F(H,X,ve,"≥","\\geq",!0);F(H,X,ve,"←","\\gets");F(H,X,ve,">","\\gt",!0);F(H,X,ve,"∈","\\in",!0);F(H,X,ve,"","\\@not");F(H,X,ve,"⊂","\\subset",!0);F(H,X,ve,"⊃","\\supset",!0);F(H,X,ve,"⊆","\\subseteq",!0);F(H,X,ve,"⊇","\\supseteq",!0);F(H,pe,ve,"⊈","\\nsubseteq",!0);F(H,pe,ve,"⊉","\\nsupseteq",!0);F(H,X,ve,"⊨","\\models");F(H,X,ve,"←","\\leftarrow",!0);F(H,X,ve,"≤","\\le");F(H,X,ve,"≤","\\leq",!0);F(H,X,ve,"<","\\lt",!0);F(H,X,ve,"→","\\rightarrow",!0);F(H,X,ve,"→","\\to");F(H,pe,ve,"≱","\\ngeq",!0);F(H,pe,ve,"≰","\\nleq",!0);F(H,X,fh," ","\\ ");F(H,X,fh," ","\\space");F(H,X,fh," ","\\nobreakspace");F(dt,X,fh," ","\\ ");F(dt,X,fh," "," ");F(dt,X,fh," ","\\space");F(dt,X,fh," ","\\nobreakspace");F(H,X,fh,null,"\\nobreak");F(H,X,fh,null,"\\allowbreak");F(H,X,Z2,",",",");F(H,X,Z2,";",";");F(H,pe,jt,"⊼","\\barwedge",!0);F(H,pe,jt,"⊻","\\veebar",!0);F(H,X,jt,"⊙","\\odot",!0);F(H,X,jt,"⊕","\\oplus",!0);F(H,X,jt,"⊗","\\otimes",!0);F(H,X,Ee,"∂","\\partial",!0);F(H,X,jt,"⊘","\\oslash",!0);F(H,pe,jt,"⊚","\\circledcirc",!0);F(H,pe,jt,"⊡","\\boxdot",!0);F(H,X,jt,"△","\\bigtriangleup");F(H,X,jt,"▽","\\bigtriangledown");F(H,X,jt,"†","\\dagger");F(H,X,jt,"⋄","\\diamond");F(H,X,jt,"⋆","\\star");F(H,X,jt,"◃","\\triangleleft");F(H,X,jt,"▹","\\triangleright");F(H,X,yl,"{","\\{");F(dt,X,Ee,"{","\\{");F(dt,X,Ee,"{","\\textbraceleft");F(H,X,pa,"}","\\}");F(dt,X,Ee,"}","\\}");F(dt,X,Ee,"}","\\textbraceright");F(H,X,yl,"{","\\lbrace");F(H,X,pa,"}","\\rbrace");F(H,X,yl,"[","\\lbrack",!0);F(dt,X,Ee,"[","\\lbrack",!0);F(H,X,pa,"]","\\rbrack",!0);F(dt,X,Ee,"]","\\rbrack",!0);F(H,X,yl,"(","\\lparen",!0);F(H,X,pa,")","\\rparen",!0);F(dt,X,Ee,"<","\\textless",!0);F(dt,X,Ee,">","\\textgreater",!0);F(H,X,yl,"⌊","\\lfloor",!0);F(H,X,pa,"⌋","\\rfloor",!0);F(H,X,yl,"⌈","\\lceil",!0);F(H,X,pa,"⌉","\\rceil",!0);F(H,X,Ee,"\\","\\backslash");F(H,X,Ee,"∣","|");F(H,X,Ee,"∣","\\vert");F(dt,X,Ee,"|","\\textbar",!0);F(H,X,Ee,"∥","\\|");F(H,X,Ee,"∥","\\Vert");F(dt,X,Ee,"∥","\\textbardbl");F(dt,X,Ee,"~","\\textasciitilde");F(dt,X,Ee,"\\","\\textbackslash");F(dt,X,Ee,"^","\\textasciicircum");F(H,X,ve,"↑","\\uparrow",!0);F(H,X,ve,"⇑","\\Uparrow",!0);F(H,X,ve,"↓","\\downarrow",!0);F(H,X,ve,"⇓","\\Downarrow",!0);F(H,X,ve,"↕","\\updownarrow",!0);F(H,X,ve,"⇕","\\Updownarrow",!0);F(H,X,vs,"∐","\\coprod");F(H,X,vs,"⋁","\\bigvee");F(H,X,vs,"⋀","\\bigwedge");F(H,X,vs,"⨄","\\biguplus");F(H,X,vs,"⋂","\\bigcap");F(H,X,vs,"⋃","\\bigcup");F(H,X,vs,"∫","\\int");F(H,X,vs,"∫","\\intop");F(H,X,vs,"∬","\\iint");F(H,X,vs,"∭","\\iiint");F(H,X,vs,"∏","\\prod");F(H,X,vs,"∑","\\sum");F(H,X,vs,"⨂","\\bigotimes");F(H,X,vs,"⨁","\\bigoplus");F(H,X,vs,"⨀","\\bigodot");F(H,X,vs,"∮","\\oint");F(H,X,vs,"∯","\\oiint");F(H,X,vs,"∰","\\oiiint");F(H,X,vs,"⨆","\\bigsqcup");F(H,X,vs,"∫","\\smallint");F(dt,X,Rv,"…","\\textellipsis");F(H,X,Rv,"…","\\mathellipsis");F(dt,X,Rv,"…","\\ldots",!0);F(H,X,Rv,"…","\\ldots",!0);F(H,X,Rv,"⋯","\\@cdots",!0);F(H,X,Rv,"⋱","\\ddots",!0);F(H,X,Ee,"⋮","\\varvdots");F(dt,X,Ee,"⋮","\\varvdots");F(H,X,vi,"ˊ","\\acute");F(H,X,vi,"ˋ","\\grave");F(H,X,vi,"¨","\\ddot");F(H,X,vi,"~","\\tilde");F(H,X,vi,"ˉ","\\bar");F(H,X,vi,"˘","\\breve");F(H,X,vi,"ˇ","\\check");F(H,X,vi,"^","\\hat");F(H,X,vi,"⃗","\\vec");F(H,X,vi,"˙","\\dot");F(H,X,vi,"˚","\\mathring");F(H,X,hn,"","\\@imath");F(H,X,hn,"","\\@jmath");F(H,X,Ee,"ı","ı");F(H,X,Ee,"ȷ","ȷ");F(dt,X,Ee,"ı","\\i",!0);F(dt,X,Ee,"ȷ","\\j",!0);F(dt,X,Ee,"ß","\\ss",!0);F(dt,X,Ee,"æ","\\ae",!0);F(dt,X,Ee,"œ","\\oe",!0);F(dt,X,Ee,"ø","\\o",!0);F(dt,X,Ee,"Æ","\\AE",!0);F(dt,X,Ee,"Œ","\\OE",!0);F(dt,X,Ee,"Ø","\\O",!0);F(dt,X,vi,"ˊ","\\'");F(dt,X,vi,"ˋ","\\`");F(dt,X,vi,"ˆ","\\^");F(dt,X,vi,"˜","\\~");F(dt,X,vi,"ˉ","\\=");F(dt,X,vi,"˘","\\u");F(dt,X,vi,"˙","\\.");F(dt,X,vi,"¸","\\c");F(dt,X,vi,"˚","\\r");F(dt,X,vi,"ˇ","\\v");F(dt,X,vi,"¨",'\\"');F(dt,X,vi,"˝","\\H");F(dt,X,vi,"◯","\\textcircled");var WK={"--":!0,"---":!0,"``":!0,"''":!0};F(dt,X,Ee,"–","--",!0);F(dt,X,Ee,"–","\\textendash");F(dt,X,Ee,"—","---",!0);F(dt,X,Ee,"—","\\textemdash");F(dt,X,Ee,"‘","`",!0);F(dt,X,Ee,"‘","\\textquoteleft");F(dt,X,Ee,"’","'",!0);F(dt,X,Ee,"’","\\textquoteright");F(dt,X,Ee,"“","``",!0);F(dt,X,Ee,"“","\\textquotedblleft");F(dt,X,Ee,"”","''",!0);F(dt,X,Ee,"”","\\textquotedblright");F(H,X,Ee,"°","\\degree",!0);F(dt,X,Ee,"°","\\degree");F(dt,X,Ee,"°","\\textdegree",!0);F(H,X,Ee,"£","\\pounds");F(H,X,Ee,"£","\\mathsterling",!0);F(dt,X,Ee,"£","\\pounds");F(dt,X,Ee,"£","\\textsterling",!0);F(H,pe,Ee,"✠","\\maltese");F(dt,pe,Ee,"✠","\\maltese");var fz='0123456789/@."';for(var H3=0;H3<fz.length;H3++){var pz=fz.charAt(H3);F(H,X,Ee,pz,pz)}var mz='0123456789!@*()-=+";:?/.,';for(var V3=0;V3<mz.length;V3++){var gz=mz.charAt(V3);F(dt,X,Ee,gz,gz)}var _x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var $3=0;$3<_x.length;$3++){var UC=_x.charAt($3);F(H,X,hn,UC,UC),F(dt,X,Ee,UC,UC)}F(H,pe,Ee,"C","ℂ");F(dt,pe,Ee,"C","ℂ");F(H,pe,Ee,"H","ℍ");F(dt,pe,Ee,"H","ℍ");F(H,pe,Ee,"N","ℕ");F(dt,pe,Ee,"N","ℕ");F(H,pe,Ee,"P","ℙ");F(dt,pe,Ee,"P","ℙ");F(H,pe,Ee,"Q","ℚ");F(dt,pe,Ee,"Q","ℚ");F(H,pe,Ee,"R","ℝ");F(dt,pe,Ee,"R","ℝ");F(H,pe,Ee,"Z","ℤ");F(dt,pe,Ee,"Z","ℤ");F(H,X,hn,"h","ℎ");F(dt,X,hn,"h","ℎ");var Cn="";for(var Qo=0;Qo<_x.length;Qo++){var ki=_x.charAt(Qo);Cn=String.fromCharCode(55349,56320+Qo),F(H,X,hn,ki,Cn),F(dt,X,Ee,ki,Cn),Cn=String.fromCharCode(55349,56372+Qo),F(H,X,hn,ki,Cn),F(dt,X,Ee,ki,Cn),Cn=String.fromCharCode(55349,56424+Qo),F(H,X,hn,ki,Cn),F(dt,X,Ee,ki,Cn),Cn=String.fromCharCode(55349,56580+Qo),F(H,X,hn,ki,Cn),F(dt,X,Ee,ki,Cn),Cn=String.fromCharCode(55349,56684+Qo),F(H,X,hn,ki,Cn),F(dt,X,Ee,ki,Cn),Cn=String.fromCharCode(55349,56736+Qo),F(H,X,hn,ki,Cn),F(dt,X,Ee,ki,Cn),Cn=String.fromCharCode(55349,56788+Qo),F(H,X,hn,ki,Cn),F(dt,X,Ee,ki,Cn),Cn=String.fromCharCode(55349,56840+Qo),F(H,X,hn,ki,Cn),F(dt,X,Ee,ki,Cn),Cn=String.fromCharCode(55349,56944+Qo),F(H,X,hn,ki,Cn),F(dt,X,Ee,ki,Cn),Qo<26&&(Cn=String.fromCharCode(55349,56632+Qo),F(H,X,hn,ki,Cn),F(dt,X,Ee,ki,Cn),Cn=String.fromCharCode(55349,56476+Qo),F(H,X,hn,ki,Cn),F(dt,X,Ee,ki,Cn))}Cn=String.fromCharCode(55349,56668);F(H,X,hn,"k",Cn);F(dt,X,Ee,"k",Cn);for(var Vp=0;Vp<10;Vp++){var Qh=Vp.toString();Cn=String.fromCharCode(55349,57294+Vp),F(H,X,hn,Qh,Cn),F(dt,X,Ee,Qh,Cn),Cn=String.fromCharCode(55349,57314+Vp),F(H,X,hn,Qh,Cn),F(dt,X,Ee,Qh,Cn),Cn=String.fromCharCode(55349,57324+Vp),F(H,X,hn,Qh,Cn),F(dt,X,Ee,Qh,Cn),Cn=String.fromCharCode(55349,57334+Vp),F(H,X,hn,Qh,Cn),F(dt,X,Ee,Qh,Cn)}var QN="ÐÞþ";for(var W3=0;W3<QN.length;W3++){var jC=QN.charAt(W3);F(H,X,hn,jC,jC),F(dt,X,Ee,jC,jC)}var GC=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],vz=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],y2e=function(e,t){var r=e.charCodeAt(0),i=e.charCodeAt(1),s=(r-55296)*1024+(i-56320)+65536,o=t==="math"?0:1;if(119808<=s&&s<120484){var a=Math.floor((s-119808)/26);return[GC[a][2],GC[a][o]]}else if(120782<=s&&s<=120831){var l=Math.floor((s-120782)/10);return[vz[l][2],vz[l][o]]}else{if(s===120485||s===120486)return[GC[0][2],GC[0][o]];if(120486<s&&s<120782)return["",""];throw new _t("Unsupported character: "+e)}},eb=function(e,t,r){return ti[r][e]&&ti[r][e].replace&&(e=ti[r][e].replace),{value:e,metrics:DD(e,t,r)}},Rc=function(e,t,r,i,s){var o=eb(e,t,r),a=o.metrics;e=o.value;var l;if(a){var c=a.italic;(r==="text"||i&&i.font==="mathit")&&(c=0),l=new ic(e,a.height,a.depth,c,a.skew,a.width,s)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+e+"' in style '"+t+"' and mode '"+r+"'")),l=new ic(e,0,0,0,0,0,s);if(i){l.maxFontSize=i.sizeMultiplier,i.style.isTight()&&l.classes.push("mtight");var u=i.getColor();u&&(l.style.color=u)}return l},_2e=function(e,t,r,i){return i===void 0&&(i=[]),r.font==="boldsymbol"&&eb(e,"Main-Bold",t).metrics?Rc(e,"Main-Bold",t,r,i.concat(["mathbf"])):e==="\\"||ti[t][e].font==="main"?Rc(e,"Main-Regular",t,r,i):Rc(e,"AMS-Regular",t,r,i.concat(["amsrm"]))},S2e=function(e,t,r,i,s){return s!=="textord"&&eb(e,"Math-BoldItalic",t).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},A2e=function(e,t,r){var i=e.mode,s=e.text,o=["mord"],a=i==="math"||i==="text"&&t.font,l=a?t.font:t.fontFamily,c="",u="";if(s.charCodeAt(0)===55349&&([c,u]=y2e(s,i)),c.length>0)return Rc(s,c,i,t,o.concat(u));if(l){var d,h;if(l==="boldsymbol"){var f=S2e(s,i,t,o,r);d=f.fontName,h=[f.fontClass]}else a?(d=JK[l].fontName,h=[l]):(d=HC(l,t.fontWeight,t.fontShape),h=[l,t.fontWeight,t.fontShape]);if(eb(s,d,i).metrics)return Rc(s,d,i,t,o.concat(h));if(WK.hasOwnProperty(s)&&d.slice(0,10)==="Typewriter"){for(var m=[],g=0;g<s.length;g++)m.push(Rc(s[g],d,i,t,o.concat(h)));return QK(m)}}if(r==="mathord")return Rc(s,"Math-Italic",i,t,o.concat(["mathnormal"]));if(r==="textord"){var v=ti[i][s]&&ti[i][s].font;if(v==="ams"){var y=HC("amsrm",t.fontWeight,t.fontShape);return Rc(s,y,i,t,o.concat("amsrm",t.fontWeight,t.fontShape))}else if(v==="main"||!v){var A=HC("textrm",t.fontWeight,t.fontShape);return Rc(s,A,i,t,o.concat(t.fontWeight,t.fontShape))}else{var C=HC(v,t.fontWeight,t.fontShape);return Rc(s,C,i,t,o.concat(C,t.fontWeight,t.fontShape))}}else throw new Error("unexpected type: "+r+" in makeOrd")},E2e=(n,e)=>{if(jf(n.classes)!==jf(e.classes)||n.skew!==e.skew||n.maxFontSize!==e.maxFontSize)return!1;if(n.classes.length===1){var t=n.classes[0];if(t==="mbin"||t==="mord")return!1}for(var r in n.style)if(n.style.hasOwnProperty(r)&&n.style[r]!==e.style[r])return!1;for(var i in e.style)if(e.style.hasOwnProperty(i)&&n.style[i]!==e.style[i])return!1;return!0},C2e=n=>{for(var e=0;e<n.length-1;e++){var t=n[e],r=n[e+1];t instanceof ic&&r instanceof ic&&E2e(t,r)&&(t.text+=r.text,t.height=Math.max(t.height,r.height),t.depth=Math.max(t.depth,r.depth),t.italic=r.italic,n.splice(e+1,1),e--)}return n},kD=function(e){for(var t=0,r=0,i=0,s=0;s<e.children.length;s++){var o=e.children[s];o.height>t&&(t=o.height),o.depth>r&&(r=o.depth),o.maxFontSize>i&&(i=o.maxFontSize)}e.height=t,e.depth=r,e.maxFontSize=i},Ma=function(e,t,r,i){var s=new zA(e,t,r,i);return kD(s),s},qK=(n,e,t,r)=>new zA(n,e,t,r),w2e=function(e,t,r){var i=Ma([e],[],t);return i.height=Math.max(r||t.fontMetrics().defaultRuleThickness,t.minRuleThickness),i.style.borderBottomWidth=Tt(i.height),i.maxFontSize=1,i},T2e=function(e,t,r,i){var s=new LD(e,t,r,i);return kD(s),s},QK=function(e){var t=new FA(e);return kD(t),t},x2e=function(e,t){return e instanceof FA?Ma([],[e],t):e},I2e=function(e){if(e.positionType==="individualShift"){for(var t=e.children,r=[t[0]],i=-t[0].shift-t[0].elem.depth,s=i,o=1;o<t.length;o++){var a=-t[o].shift-s-t[o].elem.depth,l=a-(t[o-1].elem.height+t[o-1].elem.depth);s=s+a,r.push({type:"kern",size:l}),r.push(t[o])}return{children:r,depth:i}}var c;if(e.positionType==="top"){for(var u=e.positionData,d=0;d<e.children.length;d++){var h=e.children[d];u-=h.type==="kern"?h.size:h.elem.height+h.elem.depth}c=u}else if(e.positionType==="bottom")c=-e.positionData;else{var f=e.children[0];if(f.type!=="elem")throw new Error('First child must have type "elem".');if(e.positionType==="shift")c=-f.elem.depth-e.positionData;else if(e.positionType==="firstBaseline")c=-f.elem.depth;else throw new Error("Invalid positionType "+e.positionType+".")}return{children:e.children,depth:c}},b2e=function(e,t){for(var{children:r,depth:i}=I2e(e),s=0,o=0;o<r.length;o++){var a=r[o];if(a.type==="elem"){var l=a.elem;s=Math.max(s,l.maxFontSize,l.height)}}s+=2;var c=Ma(["pstrut"],[]);c.style.height=Tt(s);for(var u=[],d=i,h=i,f=i,m=0;m<r.length;m++){var g=r[m];if(g.type==="kern")f+=g.size;else{var v=g.elem,y=g.wrapperClasses||[],A=g.wrapperStyle||{},C=Ma(y,[c,v],void 0,A);C.style.top=Tt(-s-f-v.depth),g.marginLeft&&(C.style.marginLeft=g.marginLeft),g.marginRight&&(C.style.marginRight=g.marginRight),u.push(C),f+=v.height+v.depth}d=Math.min(d,f),h=Math.max(h,f)}var T=Ma(["vlist"],u);T.style.height=Tt(h);var x;if(d<0){var R=Ma([],[]),N=Ma(["vlist"],[R]);N.style.height=Tt(-d);var M=Ma(["vlist-s"],[new ic("​")]);x=[Ma(["vlist-r"],[T,M]),Ma(["vlist-r"],[N])]}else x=[Ma(["vlist-r"],[T])];var O=Ma(["vlist-t"],x);return x.length===2&&O.classes.push("vlist-t2"),O.height=h,O.depth=-d,O},M2e=(n,e)=>{var t=Ma(["mspace"],[],e),r=wi(n,e);return t.style.marginRight=Tt(r),t},HC=function(e,t,r){var i="";switch(e){case"amsrm":i="AMS";break;case"textrm":i="Main";break;case"textsf":i="SansSerif";break;case"texttt":i="Typewriter";break;default:i=e}var s;return t==="textbf"&&r==="textit"?s="BoldItalic":t==="textbf"?s="Bold":t==="textit"?s="Italic":s="Regular",i+"-"+s},JK={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},KK={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},R2e=function(e,t){var[r,i,s]=KK[e],o=new Gf(r),a=new eh([o],{width:Tt(i),height:Tt(s),style:"width:"+Tt(i),viewBox:"0 0 "+1e3*i+" "+1e3*s,preserveAspectRatio:"xMinYMin"}),l=qK(["overlay"],[a],t);return l.height=s,l.style.height=Tt(s),l.style.width=Tt(i),l},Fe={fontMap:JK,makeSymbol:Rc,mathsym:_2e,makeSpan:Ma,makeSvgSpan:qK,makeLineSpan:w2e,makeAnchor:T2e,makeFragment:QK,wrapFragment:x2e,makeVList:b2e,makeOrd:A2e,makeGlue:M2e,staticSvg:R2e,svgData:KK,tryCombineChars:C2e},Ai={number:3,unit:"mu"},$p={number:4,unit:"mu"},_d={number:5,unit:"mu"},N2e={mord:{mop:Ai,mbin:$p,mrel:_d,minner:Ai},mop:{mord:Ai,mop:Ai,mrel:_d,minner:Ai},mbin:{mord:$p,mop:$p,mopen:$p,minner:$p},mrel:{mord:_d,mop:_d,mopen:_d,minner:_d},mopen:{},mclose:{mop:Ai,mbin:$p,mrel:_d,minner:Ai},mpunct:{mord:Ai,mop:Ai,mrel:_d,mopen:Ai,mclose:Ai,mpunct:Ai,minner:Ai},minner:{mord:Ai,mop:Ai,mbin:$p,mrel:_d,mopen:Ai,mpunct:Ai,minner:Ai}},P2e={mord:{mop:Ai},mop:{mord:Ai,mop:Ai},mbin:{},mrel:{},mopen:{},mclose:{mop:Ai},mpunct:{},minner:{mop:Ai}},YK={},Sx={},Ax={};function kt(n){for(var{type:e,names:t,props:r,handler:i,htmlBuilder:s,mathmlBuilder:o}=n,a={type:e,numArgs:r.numArgs,argTypes:r.argTypes,allowedInArgument:!!r.allowedInArgument,allowedInText:!!r.allowedInText,allowedInMath:r.allowedInMath===void 0?!0:r.allowedInMath,numOptionalArgs:r.numOptionalArgs||0,infix:!!r.infix,primitive:!!r.primitive,handler:i},l=0;l<t.length;++l)YK[t[l]]=a;e&&(s&&(Sx[e]=s),o&&(Ax[e]=o))}function Xm(n){var{type:e,htmlBuilder:t,mathmlBuilder:r}=n;kt({type:e,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:t,mathmlBuilder:r})}var Ex=function(e){return e.type==="ordgroup"&&e.body.length===1?e.body[0]:e},rs=function(e){return e.type==="ordgroup"?e.body:[e]},th=Fe.makeSpan,O2e=["leftmost","mbin","mopen","mrel","mop","mpunct"],D2e=["rightmost","mrel","mclose","mpunct"],L2e={display:fn.DISPLAY,text:fn.TEXT,script:fn.SCRIPT,scriptscript:fn.SCRIPTSCRIPT},k2e={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},Ps=function(e,t,r,i){i===void 0&&(i=[null,null]);for(var s=[],o=0;o<e.length;o++){var a=Er(e[o],t);if(a instanceof FA){var l=a.children;s.push(...l)}else s.push(a)}if(Fe.tryCombineChars(s),!r)return s;var c=t;if(e.length===1){var u=e[0];u.type==="sizing"?c=t.havingSize(u.size):u.type==="styling"&&(c=t.havingStyle(L2e[u.style]))}var d=th([i[0]||"leftmost"],[],t),h=th([i[1]||"rightmost"],[],t),f=r==="root";return yz(s,(m,g)=>{var v=g.classes[0],y=m.classes[0];v==="mbin"&&an.contains(D2e,y)?g.classes[0]="mord":y==="mbin"&&an.contains(O2e,v)&&(m.classes[0]="mord")},{node:d},h,f),yz(s,(m,g)=>{var v=JN(g),y=JN(m),A=v&&y?m.hasClass("mtight")?P2e[v][y]:N2e[v][y]:null;if(A)return Fe.makeGlue(A,c)},{node:d},h,f),s},yz=function n(e,t,r,i,s){i&&e.push(i);for(var o=0;o<e.length;o++){var a=e[o],l=XK(a);if(l){n(l.children,t,r,null,s);continue}var c=!a.hasClass("mspace");if(c){var u=t(a,r.node);u&&(r.insertAfter?r.insertAfter(u):(e.unshift(u),o++))}c?r.node=a:s&&a.hasClass("newline")&&(r.node=th(["leftmost"])),r.insertAfter=(d=>h=>{e.splice(d+1,0,h),o++})(o)}i&&e.pop()},XK=function(e){return e instanceof FA||e instanceof LD||e instanceof zA&&e.hasClass("enclosing")?e:null},B2e=function n(e,t){var r=XK(e);if(r){var i=r.children;if(i.length){if(t==="right")return n(i[i.length-1],"right");if(t==="left")return n(i[0],"left")}}return e},JN=function(e,t){return e?(t&&(e=B2e(e,t)),k2e[e.classes[0]]||null):null},ES=function(e,t){var r=["nulldelimiter"].concat(e.baseSizingClasses());return th(t.concat(r))},Er=function(e,t,r){if(!e)return th();if(Sx[e.type]){var i=Sx[e.type](e,t);if(r&&t.size!==r.size){i=th(t.sizingClasses(r),[i],t);var s=t.sizeMultiplier/r.sizeMultiplier;i.height*=s,i.depth*=s}return i}else throw new _t("Got group of unknown type: '"+e.type+"'")};function VC(n,e){var t=th(["base"],n,e),r=th(["strut"]);return r.style.height=Tt(t.height+t.depth),t.depth&&(r.style.verticalAlign=Tt(-t.depth)),t.children.unshift(r),t}function KN(n,e){var t=null;n.length===1&&n[0].type==="tag"&&(t=n[0].tag,n=n[0].body);var r=Ps(n,e,"root"),i;r.length===2&&r[1].hasClass("tag")&&(i=r.pop());for(var s=[],o=[],a=0;a<r.length;a++)if(o.push(r[a]),r[a].hasClass("mbin")||r[a].hasClass("mrel")||r[a].hasClass("allowbreak")){for(var l=!1;a<r.length-1&&r[a+1].hasClass("mspace")&&!r[a+1].hasClass("newline");)a++,o.push(r[a]),r[a].hasClass("nobreak")&&(l=!0);l||(s.push(VC(o,e)),o=[])}else r[a].hasClass("newline")&&(o.pop(),o.length>0&&(s.push(VC(o,e)),o=[]),s.push(r[a]));o.length>0&&s.push(VC(o,e));var c;t?(c=VC(Ps(t,e,!0)),c.classes=["tag"],s.push(c)):i&&s.push(i);var u=th(["katex-html"],s);if(u.setAttribute("aria-hidden","true"),c){var d=c.children[0];d.style.height=Tt(u.height+u.depth),u.depth&&(d.style.verticalAlign=Tt(-u.depth))}return u}function ZK(n){return new FA(n)}class Za{constructor(e,t,r){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=t||[],this.classes=r||[]}setAttribute(e,t){this.attributes[e]=t}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&e.setAttribute(t,this.attributes[t]);this.classes.length>0&&(e.className=jf(this.classes));for(var r=0;r<this.children.length;r++)if(this.children[r]instanceof Mu&&this.children[r+1]instanceof Mu){for(var i=this.children[r].toText()+this.children[++r].toText();this.children[r+1]instanceof Mu;)i+=this.children[++r].toText();e.appendChild(new Mu(i).toNode())}else e.appendChild(this.children[r].toNode());return e}toMarkup(){var e="<"+this.type;for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="',e+=an.escape(this.attributes[t]),e+='"');this.classes.length>0&&(e+=' class ="'+an.escape(jf(this.classes))+'"'),e+=">";for(var r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e+="</"+this.type+">",e}toText(){return this.children.map(e=>e.toText()).join("")}}class Mu{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return an.escape(this.toText())}toText(){return this.text}}class F2e{constructor(e){this.width=void 0,this.character=void 0,this.width=e,e>=.05555&&e<=.05556?this.character=" ":e>=.1666&&e<=.1667?this.character=" ":e>=.2222&&e<=.2223?this.character=" ":e>=.2777&&e<=.2778?this.character="  ":e>=-.05556&&e<=-.05555?this.character=" ⁣":e>=-.1667&&e<=-.1666?this.character=" ⁣":e>=-.2223&&e<=-.2222?this.character=" ⁣":e>=-.2778&&e<=-.2777?this.character=" ⁣":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",Tt(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+Tt(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var mt={MathNode:Za,TextNode:Mu,SpaceNode:F2e,newDocumentFragment:ZK},sc=function(e,t,r){return ti[t][e]&&ti[t][e].replace&&e.charCodeAt(0)!==55349&&!(WK.hasOwnProperty(e)&&r&&(r.fontFamily&&r.fontFamily.slice(4,6)==="tt"||r.font&&r.font.slice(4,6)==="tt"))&&(e=ti[t][e].replace),new mt.TextNode(e)},BD=function(e){return e.length===1?e[0]:new mt.MathNode("mrow",e)},FD=function(e,t){if(t.fontFamily==="texttt")return"monospace";if(t.fontFamily==="textsf")return t.fontShape==="textit"&&t.fontWeight==="textbf"?"sans-serif-bold-italic":t.fontShape==="textit"?"sans-serif-italic":t.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(t.fontShape==="textit"&&t.fontWeight==="textbf")return"bold-italic";if(t.fontShape==="textit")return"italic";if(t.fontWeight==="textbf")return"bold";var r=t.font;if(!r||r==="mathnormal")return null;var i=e.mode;if(r==="mathit")return"italic";if(r==="boldsymbol")return e.type==="textord"?"bold":"bold-italic";if(r==="mathbf")return"bold";if(r==="mathbb")return"double-struck";if(r==="mathsfit")return"sans-serif-italic";if(r==="mathfrak")return"fraktur";if(r==="mathscr"||r==="mathcal")return"script";if(r==="mathsf")return"sans-serif";if(r==="mathtt")return"monospace";var s=e.text;if(an.contains(["\\imath","\\jmath"],s))return null;ti[i][s]&&ti[i][s].replace&&(s=ti[i][s].replace);var o=Fe.fontMap[r].fontName;return DD(s,o,i)?Fe.fontMap[r].variant:null};function q3(n){if(!n)return!1;if(n.type==="mi"&&n.children.length===1){var e=n.children[0];return e instanceof Mu&&e.text==="."}else if(n.type==="mo"&&n.children.length===1&&n.getAttribute("separator")==="true"&&n.getAttribute("lspace")==="0em"&&n.getAttribute("rspace")==="0em"){var t=n.children[0];return t instanceof Mu&&t.text===","}else return!1}var ja=function(e,t,r){if(e.length===1){var i=Jr(e[0],t);return r&&i instanceof Za&&i.type==="mo"&&(i.setAttribute("lspace","0em"),i.setAttribute("rspace","0em")),[i]}for(var s=[],o,a=0;a<e.length;a++){var l=Jr(e[a],t);if(l instanceof Za&&o instanceof Za){if(l.type==="mtext"&&o.type==="mtext"&&l.getAttribute("mathvariant")===o.getAttribute("mathvariant")){o.children.push(...l.children);continue}else if(l.type==="mn"&&o.type==="mn"){o.children.push(...l.children);continue}else if(q3(l)&&o.type==="mn"){o.children.push(...l.children);continue}else if(l.type==="mn"&&q3(o))l.children=[...o.children,...l.children],s.pop();else if((l.type==="msup"||l.type==="msub")&&l.children.length>=1&&(o.type==="mn"||q3(o))){var c=l.children[0];c instanceof Za&&c.type==="mn"&&(c.children=[...o.children,...c.children],s.pop())}else if(o.type==="mi"&&o.children.length===1){var u=o.children[0];if(u instanceof Mu&&u.text==="̸"&&(l.type==="mo"||l.type==="mi"||l.type==="mn")){var d=l.children[0];d instanceof Mu&&d.text.length>0&&(d.text=d.text.slice(0,1)+"̸"+d.text.slice(1),s.pop())}}}s.push(l),o=l}return s},Hf=function(e,t,r){return BD(ja(e,t,r))},Jr=function(e,t){if(!e)return new mt.MathNode("mrow");if(Ax[e.type]){var r=Ax[e.type](e,t);return r}else throw new _t("Got group of unknown type: '"+e.type+"'")};function _z(n,e,t,r,i){var s=ja(n,t),o;s.length===1&&s[0]instanceof Za&&an.contains(["mrow","mtable"],s[0].type)?o=s[0]:o=new mt.MathNode("mrow",s);var a=new mt.MathNode("annotation",[new mt.TextNode(e)]);a.setAttribute("encoding","application/x-tex");var l=new mt.MathNode("semantics",[o,a]),c=new mt.MathNode("math",[l]);c.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),r&&c.setAttribute("display","block");var u=i?"katex":"katex-mathml";return Fe.makeSpan([u],[c])}var eY=function(e){return new bd({style:e.displayMode?fn.DISPLAY:fn.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},tY=function(e,t){if(t.displayMode){var r=["katex-display"];t.leqno&&r.push("leqno"),t.fleqn&&r.push("fleqn"),e=Fe.makeSpan(r,[e])}return e},z2e=function(e,t,r){var i=eY(r),s;if(r.output==="mathml")return _z(e,t,i,r.displayMode,!0);if(r.output==="html"){var o=KN(e,i);s=Fe.makeSpan(["katex"],[o])}else{var a=_z(e,t,i,r.displayMode,!1),l=KN(e,i);s=Fe.makeSpan(["katex"],[a,l])}return tY(s,r)},U2e=function(e,t,r){var i=eY(r),s=KN(e,i),o=Fe.makeSpan(["katex"],[s]);return tY(o,r)},j2e={widehat:"^",widecheck:"ˇ",widetilde:"~",utilde:"~",overleftarrow:"←",underleftarrow:"←",xleftarrow:"←",overrightarrow:"→",underrightarrow:"→",xrightarrow:"→",underbrace:"⏟",overbrace:"⏞",overgroup:"⏠",undergroup:"⏡",overleftrightarrow:"↔",underleftrightarrow:"↔",xleftrightarrow:"↔",Overrightarrow:"⇒",xRightarrow:"⇒",overleftharpoon:"↼",xleftharpoonup:"↼",overrightharpoon:"⇀",xrightharpoonup:"⇀",xLeftarrow:"⇐",xLeftrightarrow:"⇔",xhookleftarrow:"↩",xhookrightarrow:"↪",xmapsto:"↦",xrightharpoondown:"⇁",xleftharpoondown:"↽",xrightleftharpoons:"⇌",xleftrightharpoons:"⇋",xtwoheadleftarrow:"↞",xtwoheadrightarrow:"↠",xlongequal:"=",xtofrom:"⇄",xrightleftarrows:"⇄",xrightequilibrium:"⇌",xleftequilibrium:"⇋","\\cdrightarrow":"→","\\cdleftarrow":"←","\\cdlongequal":"="},G2e=function(e){var t=new mt.MathNode("mo",[new mt.TextNode(j2e[e.replace(/^\\/,"")])]);return t.setAttribute("stretchy","true"),t},H2e={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},V2e=function(e){return e.type==="ordgroup"?e.body.length:1},$2e=function(e,t){function r(){var a=4e5,l=e.label.slice(1);if(an.contains(["widehat","widecheck","widetilde","utilde"],l)){var c=e,u=V2e(c.base),d,h,f;if(u>5)l==="widehat"||l==="widecheck"?(d=420,a=2364,f=.42,h=l+"4"):(d=312,a=2340,f=.34,h="tilde4");else{var m=[1,1,2,2,3,3][u];l==="widehat"||l==="widecheck"?(a=[0,1062,2364,2364,2364][m],d=[0,239,300,360,420][m],f=[0,.24,.3,.3,.36,.42][m],h=l+m):(a=[0,600,1033,2339,2340][m],d=[0,260,286,306,312][m],f=[0,.26,.286,.3,.306,.34][m],h="tilde"+m)}var g=new Gf(h),v=new eh([g],{width:"100%",height:Tt(f),viewBox:"0 0 "+a+" "+d,preserveAspectRatio:"none"});return{span:Fe.makeSvgSpan([],[v],t),minWidth:0,height:f}}else{var y=[],A=H2e[l],[C,T,x]=A,R=x/1e3,N=C.length,M,O;if(N===1){var P=A[3];M=["hide-tail"],O=[P]}else if(N===2)M=["halfarrow-left","halfarrow-right"],O=["xMinYMin","xMaxYMin"];else if(N===3)M=["brace-left","brace-center","brace-right"],O=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+N+" children.");for(var z=0;z<N;z++){var V=new Gf(C[z]),$=new eh([V],{width:"400em",height:Tt(R),viewBox:"0 0 "+a+" "+x,preserveAspectRatio:O[z]+" slice"}),B=Fe.makeSvgSpan([M[z]],[$],t);if(N===1)return{span:B,minWidth:T,height:R};B.style.height=Tt(R),y.push(B)}return{span:Fe.makeSpan(["stretchy"],y,t),minWidth:T,height:R}}}var{span:i,minWidth:s,height:o}=r();return i.height=o,i.style.height=Tt(o),s>0&&(i.style.minWidth=Tt(s)),i},W2e=function(e,t,r,i,s){var o,a=e.height+e.depth+r+i;if(/fbox|color|angl/.test(t)){if(o=Fe.makeSpan(["stretchy",t],[],s),t==="fbox"){var l=s.color&&s.getColor();l&&(o.style.borderColor=l)}}else{var c=[];/^[bx]cancel$/.test(t)&&c.push(new qN({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(t)&&c.push(new qN({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var u=new eh(c,{width:"100%",height:Tt(a)});o=Fe.makeSvgSpan([],[u],s)}return o.height=a,o.style.height=Tt(a),o},nh={encloseSpan:W2e,mathMLnode:G2e,svgSpan:$2e};function Qn(n,e){if(!n||n.type!==e)throw new Error("Expected node of type "+e+", but got "+(n?"node of type "+n.type:String(n)));return n}function zD(n){var e=tb(n);if(!e)throw new Error("Expected node of symbol group type, but got "+(n?"node of type "+n.type:String(n)));return e}function tb(n){return n&&(n.type==="atom"||v2e.hasOwnProperty(n.type))?n:null}var UD=(n,e)=>{var t,r,i;n&&n.type==="supsub"?(r=Qn(n.base,"accent"),t=r.base,n.base=t,i=m2e(Er(n,e)),n.base=r):(r=Qn(n,"accent"),t=r.base);var s=Er(t,e.havingCrampedStyle()),o=r.isShifty&&an.isCharacterBox(t),a=0;if(o){var l=an.getBaseElem(t),c=Er(l,e.havingCrampedStyle());a=hz(c).skew}var u=r.label==="\\c",d=u?s.height+s.depth:Math.min(s.height,e.fontMetrics().xHeight),h;if(r.isStretchy)h=nh.svgSpan(r,e),h=Fe.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"elem",elem:h,wrapperClasses:["svg-align"],wrapperStyle:a>0?{width:"calc(100% - "+Tt(2*a)+")",marginLeft:Tt(2*a)}:void 0}]},e);else{var f,m;r.label==="\\vec"?(f=Fe.staticSvg("vec",e),m=Fe.svgData.vec[1]):(f=Fe.makeOrd({mode:r.mode,text:r.label},e,"textord"),f=hz(f),f.italic=0,m=f.width,u&&(d+=f.depth)),h=Fe.makeSpan(["accent-body"],[f]);var g=r.label==="\\textcircled";g&&(h.classes.push("accent-full"),d=s.height);var v=a;g||(v-=m/2),h.style.left=Tt(v),r.label==="\\textcircled"&&(h.style.top=".2em"),h=Fe.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"kern",size:-d},{type:"elem",elem:h}]},e)}var y=Fe.makeSpan(["mord","accent"],[h],e);return i?(i.children[0]=y,i.height=Math.max(y.height,i.height),i.classes[0]="mord",i):y},nY=(n,e)=>{var t=n.isStretchy?nh.mathMLnode(n.label):new mt.MathNode("mo",[sc(n.label,n.mode)]),r=new mt.MathNode("mover",[Jr(n.base,e),t]);return r.setAttribute("accent","true"),r},q2e=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(n=>"\\"+n).join("|"));kt({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(n,e)=>{var t=Ex(e[0]),r=!q2e.test(n.funcName),i=!r||n.funcName==="\\widehat"||n.funcName==="\\widetilde"||n.funcName==="\\widecheck";return{type:"accent",mode:n.parser.mode,label:n.funcName,isStretchy:r,isShifty:i,base:t}},htmlBuilder:UD,mathmlBuilder:nY});kt({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(n,e)=>{var t=e[0],r=n.parser.mode;return r==="math"&&(n.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+n.funcName+" works only in text mode"),r="text"),{type:"accent",mode:r,label:n.funcName,isStretchy:!1,isShifty:!0,base:t}},htmlBuilder:UD,mathmlBuilder:nY});kt({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(n,e)=>{var{parser:t,funcName:r}=n,i=e[0];return{type:"accentUnder",mode:t.mode,label:r,base:i}},htmlBuilder:(n,e)=>{var t=Er(n.base,e),r=nh.svgSpan(n,e),i=n.label==="\\utilde"?.12:0,s=Fe.makeVList({positionType:"top",positionData:t.height,children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:i},{type:"elem",elem:t}]},e);return Fe.makeSpan(["mord","accentunder"],[s],e)},mathmlBuilder:(n,e)=>{var t=nh.mathMLnode(n.label),r=new mt.MathNode("munder",[Jr(n.base,e),t]);return r.setAttribute("accentunder","true"),r}});var $C=n=>{var e=new mt.MathNode("mpadded",n?[n]:[]);return e.setAttribute("width","+0.6em"),e.setAttribute("lspace","0.3em"),e};kt({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(n,e,t){var{parser:r,funcName:i}=n;return{type:"xArrow",mode:r.mode,label:i,body:e[0],below:t[0]}},htmlBuilder(n,e){var t=e.style,r=e.havingStyle(t.sup()),i=Fe.wrapFragment(Er(n.body,r,e),e),s=n.label.slice(0,2)==="\\x"?"x":"cd";i.classes.push(s+"-arrow-pad");var o;n.below&&(r=e.havingStyle(t.sub()),o=Fe.wrapFragment(Er(n.below,r,e),e),o.classes.push(s+"-arrow-pad"));var a=nh.svgSpan(n,e),l=-e.fontMetrics().axisHeight+.5*a.height,c=-e.fontMetrics().axisHeight-.5*a.height-.111;(i.depth>.25||n.label==="\\xleftequilibrium")&&(c-=i.depth);var u;if(o){var d=-e.fontMetrics().axisHeight+o.height+.5*a.height+.111;u=Fe.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:c},{type:"elem",elem:a,shift:l},{type:"elem",elem:o,shift:d}]},e)}else u=Fe.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:c},{type:"elem",elem:a,shift:l}]},e);return u.children[0].children[0].children[1].classes.push("svg-align"),Fe.makeSpan(["mrel","x-arrow"],[u],e)},mathmlBuilder(n,e){var t=nh.mathMLnode(n.label);t.setAttribute("minsize",n.label.charAt(0)==="x"?"1.75em":"3.0em");var r;if(n.body){var i=$C(Jr(n.body,e));if(n.below){var s=$C(Jr(n.below,e));r=new mt.MathNode("munderover",[t,s,i])}else r=new mt.MathNode("mover",[t,i])}else if(n.below){var o=$C(Jr(n.below,e));r=new mt.MathNode("munder",[t,o])}else r=$C(),r=new mt.MathNode("mover",[t,r]);return r}});var Q2e=Fe.makeSpan;function rY(n,e){var t=Ps(n.body,e,!0);return Q2e([n.mclass],t,e)}function iY(n,e){var t,r=ja(n.body,e);return n.mclass==="minner"?t=new mt.MathNode("mpadded",r):n.mclass==="mord"?n.isCharacterBox?(t=r[0],t.type="mi"):t=new mt.MathNode("mi",r):(n.isCharacterBox?(t=r[0],t.type="mo"):t=new mt.MathNode("mo",r),n.mclass==="mbin"?(t.attributes.lspace="0.22em",t.attributes.rspace="0.22em"):n.mclass==="mpunct"?(t.attributes.lspace="0em",t.attributes.rspace="0.17em"):n.mclass==="mopen"||n.mclass==="mclose"?(t.attributes.lspace="0em",t.attributes.rspace="0em"):n.mclass==="minner"&&(t.attributes.lspace="0.0556em",t.attributes.width="+0.1111em")),t}kt({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(n,e){var{parser:t,funcName:r}=n,i=e[0];return{type:"mclass",mode:t.mode,mclass:"m"+r.slice(5),body:rs(i),isCharacterBox:an.isCharacterBox(i)}},htmlBuilder:rY,mathmlBuilder:iY});var nb=n=>{var e=n.type==="ordgroup"&&n.body.length?n.body[0]:n;return e.type==="atom"&&(e.family==="bin"||e.family==="rel")?"m"+e.family:"mord"};kt({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(n,e){var{parser:t}=n;return{type:"mclass",mode:t.mode,mclass:nb(e[0]),body:rs(e[1]),isCharacterBox:an.isCharacterBox(e[1])}}});kt({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(n,e){var{parser:t,funcName:r}=n,i=e[1],s=e[0],o;r!=="\\stackrel"?o=nb(i):o="mrel";var a={type:"op",mode:i.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:r!=="\\stackrel",body:rs(i)},l={type:"supsub",mode:s.mode,base:a,sup:r==="\\underset"?null:s,sub:r==="\\underset"?s:null};return{type:"mclass",mode:t.mode,mclass:o,body:[l],isCharacterBox:an.isCharacterBox(l)}},htmlBuilder:rY,mathmlBuilder:iY});kt({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(n,e){var{parser:t}=n;return{type:"pmb",mode:t.mode,mclass:nb(e[0]),body:rs(e[0])}},htmlBuilder(n,e){var t=Ps(n.body,e,!0),r=Fe.makeSpan([n.mclass],t,e);return r.style.textShadow="0.02em 0.01em 0.04px",r},mathmlBuilder(n,e){var t=ja(n.body,e),r=new mt.MathNode("mstyle",t);return r.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),r}});var J2e={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},Sz=()=>({type:"styling",body:[],mode:"math",style:"display"}),Az=n=>n.type==="textord"&&n.text==="@",K2e=(n,e)=>(n.type==="mathord"||n.type==="atom")&&n.text===e;function Y2e(n,e,t){var r=J2e[n];switch(r){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return t.callFunction(r,[e[0]],[e[1]]);case"\\uparrow":case"\\downarrow":{var i=t.callFunction("\\\\cdleft",[e[0]],[]),s={type:"atom",text:r,mode:"math",family:"rel"},o=t.callFunction("\\Big",[s],[]),a=t.callFunction("\\\\cdright",[e[1]],[]),l={type:"ordgroup",mode:"math",body:[i,o,a]};return t.callFunction("\\\\cdparent",[l],[])}case"\\\\cdlongequal":return t.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var c={type:"textord",text:"\\Vert",mode:"math"};return t.callFunction("\\Big",[c],[])}default:return{type:"textord",text:" ",mode:"math"}}}function X2e(n){var e=[];for(n.gullet.beginGroup(),n.gullet.macros.set("\\cr","\\\\\\relax"),n.gullet.beginGroup();;){e.push(n.parseExpression(!1,"\\\\")),n.gullet.endGroup(),n.gullet.beginGroup();var t=n.fetch().text;if(t==="&"||t==="\\\\")n.consume();else if(t==="\\end"){e[e.length-1].length===0&&e.pop();break}else throw new _t("Expected \\\\ or \\cr or \\end",n.nextToken)}for(var r=[],i=[r],s=0;s<e.length;s++){for(var o=e[s],a=Sz(),l=0;l<o.length;l++)if(!Az(o[l]))a.body.push(o[l]);else{r.push(a),l+=1;var c=zD(o[l]).text,u=new Array(2);if(u[0]={type:"ordgroup",mode:"math",body:[]},u[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(c)>-1))if("<>AV".indexOf(c)>-1)for(var d=0;d<2;d++){for(var h=!0,f=l+1;f<o.length;f++){if(K2e(o[f],c)){h=!1,l=f;break}if(Az(o[f]))throw new _t("Missing a "+c+" character to complete a CD arrow.",o[f]);u[d].body.push(o[f])}if(h)throw new _t("Missing a "+c+" character to complete a CD arrow.",o[l])}else throw new _t('Expected one of "<>AV=|." after @',o[l]);var m=Y2e(c,u,n),g={type:"styling",body:[m],mode:"math",style:"display"};r.push(g),a=Sz()}s%2===0?r.push(a):r.shift(),r=[],i.push(r)}n.gullet.endGroup(),n.gullet.endGroup();var v=new Array(i[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:i,arraystretch:1,addJot:!0,rowGaps:[null],cols:v,colSeparationType:"CD",hLinesBeforeRow:new Array(i.length+1).fill([])}}kt({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(n,e){var{parser:t,funcName:r}=n;return{type:"cdlabel",mode:t.mode,side:r.slice(4),label:e[0]}},htmlBuilder(n,e){var t=e.havingStyle(e.style.sup()),r=Fe.wrapFragment(Er(n.label,t,e),e);return r.classes.push("cd-label-"+n.side),r.style.bottom=Tt(.8-r.depth),r.height=0,r.depth=0,r},mathmlBuilder(n,e){var t=new mt.MathNode("mrow",[Jr(n.label,e)]);return t=new mt.MathNode("mpadded",[t]),t.setAttribute("width","0"),n.side==="left"&&t.setAttribute("lspace","-1width"),t.setAttribute("voffset","0.7em"),t=new mt.MathNode("mstyle",[t]),t.setAttribute("displaystyle","false"),t.setAttribute("scriptlevel","1"),t}});kt({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(n,e){var{parser:t}=n;return{type:"cdlabelparent",mode:t.mode,fragment:e[0]}},htmlBuilder(n,e){var t=Fe.wrapFragment(Er(n.fragment,e),e);return t.classes.push("cd-vert-arrow"),t},mathmlBuilder(n,e){return new mt.MathNode("mrow",[Jr(n.fragment,e)])}});kt({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(n,e){for(var{parser:t}=n,r=Qn(e[0],"ordgroup"),i=r.body,s="",o=0;o<i.length;o++){var a=Qn(i[o],"textord");s+=a.text}var l=parseInt(s),c;if(isNaN(l))throw new _t("\\@char has non-numeric argument "+s);if(l<0||l>=1114111)throw new _t("\\@char with invalid code point "+s);return l<=65535?c=String.fromCharCode(l):(l-=65536,c=String.fromCharCode((l>>10)+55296,(l&1023)+56320)),{type:"textord",mode:t.mode,text:c}}});var sY=(n,e)=>{var t=Ps(n.body,e.withColor(n.color),!1);return Fe.makeFragment(t)},oY=(n,e)=>{var t=ja(n.body,e.withColor(n.color)),r=new mt.MathNode("mstyle",t);return r.setAttribute("mathcolor",n.color),r};kt({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(n,e){var{parser:t}=n,r=Qn(e[0],"color-token").color,i=e[1];return{type:"color",mode:t.mode,color:r,body:rs(i)}},htmlBuilder:sY,mathmlBuilder:oY});kt({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(n,e){var{parser:t,breakOnTokenText:r}=n,i=Qn(e[0],"color-token").color;t.gullet.macros.set("\\current@color",i);var s=t.parseExpression(!0,r);return{type:"color",mode:t.mode,color:i,body:s}},htmlBuilder:sY,mathmlBuilder:oY});kt({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(n,e,t){var{parser:r}=n,i=r.gullet.future().text==="["?r.parseSizeGroup(!0):null,s=!r.settings.displayMode||!r.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:r.mode,newLine:s,size:i&&Qn(i,"size").value}},htmlBuilder(n,e){var t=Fe.makeSpan(["mspace"],[],e);return n.newLine&&(t.classes.push("newline"),n.size&&(t.style.marginTop=Tt(wi(n.size,e)))),t},mathmlBuilder(n,e){var t=new mt.MathNode("mspace");return n.newLine&&(t.setAttribute("linebreak","newline"),n.size&&t.setAttribute("height",Tt(wi(n.size,e)))),t}});var YN={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},aY=n=>{var e=n.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(e))throw new _t("Expected a control sequence",n);return e},Z2e=n=>{var e=n.gullet.popToken();return e.text==="="&&(e=n.gullet.popToken(),e.text===" "&&(e=n.gullet.popToken())),e},lY=(n,e,t,r)=>{var i=n.gullet.macros.get(t.text);i==null&&(t.noexpand=!0,i={tokens:[t],numArgs:0,unexpandable:!n.gullet.isExpandable(t.text)}),n.gullet.macros.set(e,i,r)};kt({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(n){var{parser:e,funcName:t}=n;e.consumeSpaces();var r=e.fetch();if(YN[r.text])return(t==="\\global"||t==="\\\\globallong")&&(r.text=YN[r.text]),Qn(e.parseFunction(),"internal");throw new _t("Invalid token after macro prefix",r)}});kt({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(n){var{parser:e,funcName:t}=n,r=e.gullet.popToken(),i=r.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(i))throw new _t("Expected a control sequence",r);for(var s=0,o,a=[[]];e.gullet.future().text!=="{";)if(r=e.gullet.popToken(),r.text==="#"){if(e.gullet.future().text==="{"){o=e.gullet.future(),a[s].push("{");break}if(r=e.gullet.popToken(),!/^[1-9]$/.test(r.text))throw new _t('Invalid argument number "'+r.text+'"');if(parseInt(r.text)!==s+1)throw new _t('Argument number "'+r.text+'" out of order');s++,a.push([])}else{if(r.text==="EOF")throw new _t("Expected a macro definition");a[s].push(r.text)}var{tokens:l}=e.gullet.consumeArg();return o&&l.unshift(o),(t==="\\edef"||t==="\\xdef")&&(l=e.gullet.expandTokens(l),l.reverse()),e.gullet.macros.set(i,{tokens:l,numArgs:s,delimiters:a},t===YN[t]),{type:"internal",mode:e.mode}}});kt({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(n){var{parser:e,funcName:t}=n,r=aY(e.gullet.popToken());e.gullet.consumeSpaces();var i=Z2e(e);return lY(e,r,i,t==="\\\\globallet"),{type:"internal",mode:e.mode}}});kt({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(n){var{parser:e,funcName:t}=n,r=aY(e.gullet.popToken()),i=e.gullet.popToken(),s=e.gullet.popToken();return lY(e,r,s,t==="\\\\globalfuture"),e.gullet.pushToken(s),e.gullet.pushToken(i),{type:"internal",mode:e.mode}}});var v_=function(e,t,r){var i=ti.math[e]&&ti.math[e].replace,s=DD(i||e,t,r);if(!s)throw new Error("Unsupported symbol "+e+" and font size "+t+".");return s},jD=function(e,t,r,i){var s=r.havingBaseStyle(t),o=Fe.makeSpan(i.concat(s.sizingClasses(r)),[e],r),a=s.sizeMultiplier/r.sizeMultiplier;return o.height*=a,o.depth*=a,o.maxFontSize=s.sizeMultiplier,o},cY=function(e,t,r){var i=t.havingBaseStyle(r),s=(1-t.sizeMultiplier/i.sizeMultiplier)*t.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=Tt(s),e.height-=s,e.depth+=s},ebe=function(e,t,r,i,s,o){var a=Fe.makeSymbol(e,"Main-Regular",s,i),l=jD(a,t,i,o);return r&&cY(l,i,t),l},tbe=function(e,t,r,i){return Fe.makeSymbol(e,"Size"+t+"-Regular",r,i)},uY=function(e,t,r,i,s,o){var a=tbe(e,t,s,i),l=jD(Fe.makeSpan(["delimsizing","size"+t],[a],i),fn.TEXT,i,o);return r&&cY(l,i,fn.TEXT),l},Q3=function(e,t,r){var i;t==="Size1-Regular"?i="delim-size1":i="delim-size4";var s=Fe.makeSpan(["delimsizinginner",i],[Fe.makeSpan([],[Fe.makeSymbol(e,t,r)])]);return{type:"elem",elem:s}},J3=function(e,t,r){var i=bu["Size4-Regular"][e.charCodeAt(0)]?bu["Size4-Regular"][e.charCodeAt(0)][4]:bu["Size1-Regular"][e.charCodeAt(0)][4],s=new Gf("inner",a2e(e,Math.round(1e3*t))),o=new eh([s],{width:Tt(i),height:Tt(t),style:"width:"+Tt(i),viewBox:"0 0 "+1e3*i+" "+Math.round(1e3*t),preserveAspectRatio:"xMinYMin"}),a=Fe.makeSvgSpan([],[o],r);return a.height=t,a.style.height=Tt(t),a.style.width=Tt(i),{type:"elem",elem:a}},XN=.008,WC={type:"kern",size:-1*XN},nbe=["|","\\lvert","\\rvert","\\vert"],rbe=["\\|","\\lVert","\\rVert","\\Vert"],dY=function(e,t,r,i,s,o){var a,l,c,u,d="",h=0;a=c=u=e,l=null;var f="Size1-Regular";e==="\\uparrow"?c=u="⏐":e==="\\Uparrow"?c=u="‖":e==="\\downarrow"?a=c="⏐":e==="\\Downarrow"?a=c="‖":e==="\\updownarrow"?(a="\\uparrow",c="⏐",u="\\downarrow"):e==="\\Updownarrow"?(a="\\Uparrow",c="‖",u="\\Downarrow"):an.contains(nbe,e)?(c="∣",d="vert",h=333):an.contains(rbe,e)?(c="∥",d="doublevert",h=556):e==="["||e==="\\lbrack"?(a="⎡",c="⎢",u="⎣",f="Size4-Regular",d="lbrack",h=667):e==="]"||e==="\\rbrack"?(a="⎤",c="⎥",u="⎦",f="Size4-Regular",d="rbrack",h=667):e==="\\lfloor"||e==="⌊"?(c=a="⎢",u="⎣",f="Size4-Regular",d="lfloor",h=667):e==="\\lceil"||e==="⌈"?(a="⎡",c=u="⎢",f="Size4-Regular",d="lceil",h=667):e==="\\rfloor"||e==="⌋"?(c=a="⎥",u="⎦",f="Size4-Regular",d="rfloor",h=667):e==="\\rceil"||e==="⌉"?(a="⎤",c=u="⎥",f="Size4-Regular",d="rceil",h=667):e==="("||e==="\\lparen"?(a="⎛",c="⎜",u="⎝",f="Size4-Regular",d="lparen",h=875):e===")"||e==="\\rparen"?(a="⎞",c="⎟",u="⎠",f="Size4-Regular",d="rparen",h=875):e==="\\{"||e==="\\lbrace"?(a="⎧",l="⎨",u="⎩",c="⎪",f="Size4-Regular"):e==="\\}"||e==="\\rbrace"?(a="⎫",l="⎬",u="⎭",c="⎪",f="Size4-Regular"):e==="\\lgroup"||e==="⟮"?(a="⎧",u="⎩",c="⎪",f="Size4-Regular"):e==="\\rgroup"||e==="⟯"?(a="⎫",u="⎭",c="⎪",f="Size4-Regular"):e==="\\lmoustache"||e==="⎰"?(a="⎧",u="⎭",c="⎪",f="Size4-Regular"):(e==="\\rmoustache"||e==="⎱")&&(a="⎫",u="⎩",c="⎪",f="Size4-Regular");var m=v_(a,f,s),g=m.height+m.depth,v=v_(c,f,s),y=v.height+v.depth,A=v_(u,f,s),C=A.height+A.depth,T=0,x=1;if(l!==null){var R=v_(l,f,s);T=R.height+R.depth,x=2}var N=g+C+T,M=Math.max(0,Math.ceil((t-N)/(x*y))),O=N+M*x*y,P=i.fontMetrics().axisHeight;r&&(P*=i.sizeMultiplier);var z=O/2-P,V=[];if(d.length>0){var $=O-g-C,B=Math.round(O*1e3),q=l2e(d,Math.round($*1e3)),K=new Gf(d,q),se=(h/1e3).toFixed(3)+"em",W=(B/1e3).toFixed(3)+"em",ee=new eh([K],{width:se,height:W,viewBox:"0 0 "+h+" "+B}),Q=Fe.makeSvgSpan([],[ee],i);Q.height=B/1e3,Q.style.width=se,Q.style.height=W,V.push({type:"elem",elem:Q})}else{if(V.push(Q3(u,f,s)),V.push(WC),l===null){var Y=O-g-C+2*XN;V.push(J3(c,Y,i))}else{var ae=(O-g-C-T)/2+2*XN;V.push(J3(c,ae,i)),V.push(WC),V.push(Q3(l,f,s)),V.push(WC),V.push(J3(c,ae,i))}V.push(WC),V.push(Q3(a,f,s))}var fe=i.havingBaseStyle(fn.TEXT),we=Fe.makeVList({positionType:"bottom",positionData:z,children:V},fe);return jD(Fe.makeSpan(["delimsizing","mult"],[we],fe),fn.TEXT,i,o)},K3=80,Y3=.08,X3=function(e,t,r,i,s){var o=o2e(e,i,r),a=new Gf(e,o),l=new eh([a],{width:"400em",height:Tt(t),viewBox:"0 0 400000 "+r,preserveAspectRatio:"xMinYMin slice"});return Fe.makeSvgSpan(["hide-tail"],[l],s)},ibe=function(e,t){var r=t.havingBaseSizing(),i=mY("\\surd",e*r.sizeMultiplier,pY,r),s=r.sizeMultiplier,o=Math.max(0,t.minRuleThickness-t.fontMetrics().sqrtRuleThickness),a,l=0,c=0,u=0,d;return i.type==="small"?(u=1e3+1e3*o+K3,e<1?s=1:e<1.4&&(s=.7),l=(1+o+Y3)/s,c=(1+o)/s,a=X3("sqrtMain",l,u,o,t),a.style.minWidth="0.853em",d=.833/s):i.type==="large"?(u=(1e3+K3)*D_[i.size],c=(D_[i.size]+o)/s,l=(D_[i.size]+o+Y3)/s,a=X3("sqrtSize"+i.size,l,u,o,t),a.style.minWidth="1.02em",d=1/s):(l=e+o+Y3,c=e+o,u=Math.floor(1e3*e+o)+K3,a=X3("sqrtTall",l,u,o,t),a.style.minWidth="0.742em",d=1.056),a.height=c,a.style.height=Tt(l),{span:a,advanceWidth:d,ruleWidth:(t.fontMetrics().sqrtRuleThickness+o)*s}},hY=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","\\surd"],sbe=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱"],fY=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],D_=[0,1.2,1.8,2.4,3],obe=function(e,t,r,i,s){if(e==="<"||e==="\\lt"||e==="⟨"?e="\\langle":(e===">"||e==="\\gt"||e==="⟩")&&(e="\\rangle"),an.contains(hY,e)||an.contains(fY,e))return uY(e,t,!1,r,i,s);if(an.contains(sbe,e))return dY(e,D_[t],!1,r,i,s);throw new _t("Illegal delimiter: '"+e+"'")},abe=[{type:"small",style:fn.SCRIPTSCRIPT},{type:"small",style:fn.SCRIPT},{type:"small",style:fn.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],lbe=[{type:"small",style:fn.SCRIPTSCRIPT},{type:"small",style:fn.SCRIPT},{type:"small",style:fn.TEXT},{type:"stack"}],pY=[{type:"small",style:fn.SCRIPTSCRIPT},{type:"small",style:fn.SCRIPT},{type:"small",style:fn.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],cbe=function(e){if(e.type==="small")return"Main-Regular";if(e.type==="large")return"Size"+e.size+"-Regular";if(e.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},mY=function(e,t,r,i){for(var s=Math.min(2,3-i.style.size),o=s;o<r.length&&r[o].type!=="stack";o++){var a=v_(e,cbe(r[o]),"math"),l=a.height+a.depth;if(r[o].type==="small"){var c=i.havingBaseStyle(r[o].style);l*=c.sizeMultiplier}if(l>t)return r[o]}return r[r.length-1]},gY=function(e,t,r,i,s,o){e==="<"||e==="\\lt"||e==="⟨"?e="\\langle":(e===">"||e==="\\gt"||e==="⟩")&&(e="\\rangle");var a;an.contains(fY,e)?a=abe:an.contains(hY,e)?a=pY:a=lbe;var l=mY(e,t,a,i);return l.type==="small"?ebe(e,l.style,r,i,s,o):l.type==="large"?uY(e,l.size,r,i,s,o):dY(e,t,r,i,s,o)},ube=function(e,t,r,i,s,o){var a=i.fontMetrics().axisHeight*i.sizeMultiplier,l=901,c=5/i.fontMetrics().ptPerEm,u=Math.max(t-a,r+a),d=Math.max(u/500*l,2*u-c);return gY(e,d,!0,i,s,o)},Hd={sqrtImage:ibe,sizedDelim:obe,sizeToMaxHeight:D_,customSizedDelim:gY,leftRightDelim:ube},Ez={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},dbe=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","<",">","\\langle","⟨","\\rangle","⟩","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function rb(n,e){var t=tb(n);if(t&&an.contains(dbe,t.text))return t;throw t?new _t("Invalid delimiter '"+t.text+"' after '"+e.funcName+"'",n):new _t("Invalid delimiter type '"+n.type+"'",n)}kt({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(n,e)=>{var t=rb(e[0],n);return{type:"delimsizing",mode:n.parser.mode,size:Ez[n.funcName].size,mclass:Ez[n.funcName].mclass,delim:t.text}},htmlBuilder:(n,e)=>n.delim==="."?Fe.makeSpan([n.mclass]):Hd.sizedDelim(n.delim,n.size,e,n.mode,[n.mclass]),mathmlBuilder:n=>{var e=[];n.delim!=="."&&e.push(sc(n.delim,n.mode));var t=new mt.MathNode("mo",e);n.mclass==="mopen"||n.mclass==="mclose"?t.setAttribute("fence","true"):t.setAttribute("fence","false"),t.setAttribute("stretchy","true");var r=Tt(Hd.sizeToMaxHeight[n.size]);return t.setAttribute("minsize",r),t.setAttribute("maxsize",r),t}});function Cz(n){if(!n.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}kt({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(n,e)=>{var t=n.parser.gullet.macros.get("\\current@color");if(t&&typeof t!="string")throw new _t("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:n.parser.mode,delim:rb(e[0],n).text,color:t}}});kt({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(n,e)=>{var t=rb(e[0],n),r=n.parser;++r.leftrightDepth;var i=r.parseExpression(!1);--r.leftrightDepth,r.expect("\\right",!1);var s=Qn(r.parseFunction(),"leftright-right");return{type:"leftright",mode:r.mode,body:i,left:t.text,right:s.delim,rightColor:s.color}},htmlBuilder:(n,e)=>{Cz(n);for(var t=Ps(n.body,e,!0,["mopen","mclose"]),r=0,i=0,s=!1,o=0;o<t.length;o++)t[o].isMiddle?s=!0:(r=Math.max(t[o].height,r),i=Math.max(t[o].depth,i));r*=e.sizeMultiplier,i*=e.sizeMultiplier;var a;if(n.left==="."?a=ES(e,["mopen"]):a=Hd.leftRightDelim(n.left,r,i,e,n.mode,["mopen"]),t.unshift(a),s)for(var l=1;l<t.length;l++){var c=t[l],u=c.isMiddle;u&&(t[l]=Hd.leftRightDelim(u.delim,r,i,u.options,n.mode,[]))}var d;if(n.right===".")d=ES(e,["mclose"]);else{var h=n.rightColor?e.withColor(n.rightColor):e;d=Hd.leftRightDelim(n.right,r,i,h,n.mode,["mclose"])}return t.push(d),Fe.makeSpan(["minner"],t,e)},mathmlBuilder:(n,e)=>{Cz(n);var t=ja(n.body,e);if(n.left!=="."){var r=new mt.MathNode("mo",[sc(n.left,n.mode)]);r.setAttribute("fence","true"),t.unshift(r)}if(n.right!=="."){var i=new mt.MathNode("mo",[sc(n.right,n.mode)]);i.setAttribute("fence","true"),n.rightColor&&i.setAttribute("mathcolor",n.rightColor),t.push(i)}return BD(t)}});kt({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(n,e)=>{var t=rb(e[0],n);if(!n.parser.leftrightDepth)throw new _t("\\middle without preceding \\left",t);return{type:"middle",mode:n.parser.mode,delim:t.text}},htmlBuilder:(n,e)=>{var t;if(n.delim===".")t=ES(e,[]);else{t=Hd.sizedDelim(n.delim,1,e,n.mode,[]);var r={delim:n.delim,options:e};t.isMiddle=r}return t},mathmlBuilder:(n,e)=>{var t=n.delim==="\\vert"||n.delim==="|"?sc("|","text"):sc(n.delim,n.mode),r=new mt.MathNode("mo",[t]);return r.setAttribute("fence","true"),r.setAttribute("lspace","0.05em"),r.setAttribute("rspace","0.05em"),r}});var GD=(n,e)=>{var t=Fe.wrapFragment(Er(n.body,e),e),r=n.label.slice(1),i=e.sizeMultiplier,s,o=0,a=an.isCharacterBox(n.body);if(r==="sout")s=Fe.makeSpan(["stretchy","sout"]),s.height=e.fontMetrics().defaultRuleThickness/i,o=-.5*e.fontMetrics().xHeight;else if(r==="phase"){var l=wi({number:.6,unit:"pt"},e),c=wi({number:.35,unit:"ex"},e),u=e.havingBaseSizing();i=i/u.sizeMultiplier;var d=t.height+t.depth+l+c;t.style.paddingLeft=Tt(d/2+l);var h=Math.floor(1e3*d*i),f=i2e(h),m=new eh([new Gf("phase",f)],{width:"400em",height:Tt(h/1e3),viewBox:"0 0 400000 "+h,preserveAspectRatio:"xMinYMin slice"});s=Fe.makeSvgSpan(["hide-tail"],[m],e),s.style.height=Tt(d),o=t.depth+l+c}else{/cancel/.test(r)?a||t.classes.push("cancel-pad"):r==="angl"?t.classes.push("anglpad"):t.classes.push("boxpad");var g=0,v=0,y=0;/box/.test(r)?(y=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness),g=e.fontMetrics().fboxsep+(r==="colorbox"?0:y),v=g):r==="angl"?(y=Math.max(e.fontMetrics().defaultRuleThickness,e.minRuleThickness),g=4*y,v=Math.max(0,.25-t.depth)):(g=a?.2:0,v=g),s=nh.encloseSpan(t,r,g,v,e),/fbox|boxed|fcolorbox/.test(r)?(s.style.borderStyle="solid",s.style.borderWidth=Tt(y)):r==="angl"&&y!==.049&&(s.style.borderTopWidth=Tt(y),s.style.borderRightWidth=Tt(y)),o=t.depth+v,n.backgroundColor&&(s.style.backgroundColor=n.backgroundColor,n.borderColor&&(s.style.borderColor=n.borderColor))}var A;if(n.backgroundColor)A=Fe.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:o},{type:"elem",elem:t,shift:0}]},e);else{var C=/cancel|phase/.test(r)?["svg-align"]:[];A=Fe.makeVList({positionType:"individualShift",children:[{type:"elem",elem:t,shift:0},{type:"elem",elem:s,shift:o,wrapperClasses:C}]},e)}return/cancel/.test(r)&&(A.height=t.height,A.depth=t.depth),/cancel/.test(r)&&!a?Fe.makeSpan(["mord","cancel-lap"],[A],e):Fe.makeSpan(["mord"],[A],e)},HD=(n,e)=>{var t=0,r=new mt.MathNode(n.label.indexOf("colorbox")>-1?"mpadded":"menclose",[Jr(n.body,e)]);switch(n.label){case"\\cancel":r.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":r.setAttribute("notation","downdiagonalstrike");break;case"\\phase":r.setAttribute("notation","phasorangle");break;case"\\sout":r.setAttribute("notation","horizontalstrike");break;case"\\fbox":r.setAttribute("notation","box");break;case"\\angl":r.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(t=e.fontMetrics().fboxsep*e.fontMetrics().ptPerEm,r.setAttribute("width","+"+2*t+"pt"),r.setAttribute("height","+"+2*t+"pt"),r.setAttribute("lspace",t+"pt"),r.setAttribute("voffset",t+"pt"),n.label==="\\fcolorbox"){var i=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness);r.setAttribute("style","border: "+i+"em solid "+String(n.borderColor))}break;case"\\xcancel":r.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return n.backgroundColor&&r.setAttribute("mathbackground",n.backgroundColor),r};kt({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(n,e,t){var{parser:r,funcName:i}=n,s=Qn(e[0],"color-token").color,o=e[1];return{type:"enclose",mode:r.mode,label:i,backgroundColor:s,body:o}},htmlBuilder:GD,mathmlBuilder:HD});kt({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(n,e,t){var{parser:r,funcName:i}=n,s=Qn(e[0],"color-token").color,o=Qn(e[1],"color-token").color,a=e[2];return{type:"enclose",mode:r.mode,label:i,backgroundColor:o,borderColor:s,body:a}},htmlBuilder:GD,mathmlBuilder:HD});kt({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(n,e){var{parser:t}=n;return{type:"enclose",mode:t.mode,label:"\\fbox",body:e[0]}}});kt({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(n,e){var{parser:t,funcName:r}=n,i=e[0];return{type:"enclose",mode:t.mode,label:r,body:i}},htmlBuilder:GD,mathmlBuilder:HD});kt({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(n,e){var{parser:t}=n;return{type:"enclose",mode:t.mode,label:"\\angl",body:e[0]}}});var vY={};function Gu(n){for(var{type:e,names:t,props:r,handler:i,htmlBuilder:s,mathmlBuilder:o}=n,a={type:e,numArgs:r.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:i},l=0;l<t.length;++l)vY[t[l]]=a;s&&(Sx[e]=s),o&&(Ax[e]=o)}var yY={};function ie(n,e){yY[n]=e}function wz(n){var e=[];n.consumeSpaces();var t=n.fetch().text;for(t==="\\relax"&&(n.consume(),n.consumeSpaces(),t=n.fetch().text);t==="\\hline"||t==="\\hdashline";)n.consume(),e.push(t==="\\hdashline"),n.consumeSpaces(),t=n.fetch().text;return e}var ib=n=>{var e=n.parser.settings;if(!e.displayMode)throw new _t("{"+n.envName+"} can be used only in display mode.")};function VD(n){if(n.indexOf("ed")===-1)return n.indexOf("*")===-1}function lp(n,e,t){var{hskipBeforeAndAfter:r,addJot:i,cols:s,arraystretch:o,colSeparationType:a,autoTag:l,singleRow:c,emptySingleRow:u,maxNumCols:d,leqno:h}=e;if(n.gullet.beginGroup(),c||n.gullet.macros.set("\\cr","\\\\\\relax"),!o){var f=n.gullet.expandMacroAsText("\\arraystretch");if(f==null)o=1;else if(o=parseFloat(f),!o||o<0)throw new _t("Invalid \\arraystretch: "+f)}n.gullet.beginGroup();var m=[],g=[m],v=[],y=[],A=l!=null?[]:void 0;function C(){l&&n.gullet.macros.set("\\@eqnsw","1",!0)}function T(){A&&(n.gullet.macros.get("\\df@tag")?(A.push(n.subparse([new Kl("\\df@tag")])),n.gullet.macros.set("\\df@tag",void 0,!0)):A.push(!!l&&n.gullet.macros.get("\\@eqnsw")==="1"))}for(C(),y.push(wz(n));;){var x=n.parseExpression(!1,c?"\\end":"\\\\");n.gullet.endGroup(),n.gullet.beginGroup(),x={type:"ordgroup",mode:n.mode,body:x},t&&(x={type:"styling",mode:n.mode,style:t,body:[x]}),m.push(x);var R=n.fetch().text;if(R==="&"){if(d&&m.length===d){if(c||a)throw new _t("Too many tab characters: &",n.nextToken);n.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}n.consume()}else if(R==="\\end"){T(),m.length===1&&x.type==="styling"&&x.body[0].body.length===0&&(g.length>1||!u)&&g.pop(),y.length<g.length+1&&y.push([]);break}else if(R==="\\\\"){n.consume();var N=void 0;n.gullet.future().text!==" "&&(N=n.parseSizeGroup(!0)),v.push(N?N.value:null),T(),y.push(wz(n)),m=[],g.push(m),C()}else throw new _t("Expected & or \\\\ or \\cr or \\end",n.nextToken)}return n.gullet.endGroup(),n.gullet.endGroup(),{type:"array",mode:n.mode,addJot:i,arraystretch:o,body:g,cols:s,rowGaps:v,hskipBeforeAndAfter:r,hLinesBeforeRow:y,colSeparationType:a,tags:A,leqno:h}}function $D(n){return n.slice(0,1)==="d"?"display":"text"}var Hu=function(e,t){var r,i,s=e.body.length,o=e.hLinesBeforeRow,a=0,l=new Array(s),c=[],u=Math.max(t.fontMetrics().arrayRuleWidth,t.minRuleThickness),d=1/t.fontMetrics().ptPerEm,h=5*d;if(e.colSeparationType&&e.colSeparationType==="small"){var f=t.havingStyle(fn.SCRIPT).sizeMultiplier;h=.2778*(f/t.sizeMultiplier)}var m=e.colSeparationType==="CD"?wi({number:3,unit:"ex"},t):12*d,g=3*d,v=e.arraystretch*m,y=.7*v,A=.3*v,C=0;function T(Ge){for(var it=0;it<Ge.length;++it)it>0&&(C+=.25),c.push({pos:C,isDashed:Ge[it]})}for(T(o[0]),r=0;r<e.body.length;++r){var x=e.body[r],R=y,N=A;a<x.length&&(a=x.length);var M=new Array(x.length);for(i=0;i<x.length;++i){var O=Er(x[i],t);N<O.depth&&(N=O.depth),R<O.height&&(R=O.height),M[i]=O}var P=e.rowGaps[r],z=0;P&&(z=wi(P,t),z>0&&(z+=A,N<z&&(N=z),z=0)),e.addJot&&(N+=g),M.height=R,M.depth=N,C+=R,M.pos=C,C+=N+z,l[r]=M,T(o[r+1])}var V=C/2+t.fontMetrics().axisHeight,$=e.cols||[],B=[],q,K,se=[];if(e.tags&&e.tags.some(Ge=>Ge))for(r=0;r<s;++r){var W=l[r],ee=W.pos-V,Q=e.tags[r],Y=void 0;Q===!0?Y=Fe.makeSpan(["eqn-num"],[],t):Q===!1?Y=Fe.makeSpan([],[],t):Y=Fe.makeSpan([],Ps(Q,t,!0),t),Y.depth=W.depth,Y.height=W.height,se.push({type:"elem",elem:Y,shift:ee})}for(i=0,K=0;i<a||K<$.length;++i,++K){for(var ae=$[K]||{},fe=!0;ae.type==="separator";){if(fe||(q=Fe.makeSpan(["arraycolsep"],[]),q.style.width=Tt(t.fontMetrics().doubleRuleSep),B.push(q)),ae.separator==="|"||ae.separator===":"){var we=ae.separator==="|"?"solid":"dashed",ge=Fe.makeSpan(["vertical-separator"],[],t);ge.style.height=Tt(C),ge.style.borderRightWidth=Tt(u),ge.style.borderRightStyle=we,ge.style.margin="0 "+Tt(-u/2);var Se=C-V;Se&&(ge.style.verticalAlign=Tt(-Se)),B.push(ge)}else throw new _t("Invalid separator type: "+ae.separator);K++,ae=$[K]||{},fe=!1}if(!(i>=a)){var Ke=void 0;(i>0||e.hskipBeforeAndAfter)&&(Ke=an.deflt(ae.pregap,h),Ke!==0&&(q=Fe.makeSpan(["arraycolsep"],[]),q.style.width=Tt(Ke),B.push(q)));var xe=[];for(r=0;r<s;++r){var Qe=l[r],We=Qe[i];if(We){var Ve=Qe.pos-V;We.depth=Qe.depth,We.height=Qe.height,xe.push({type:"elem",elem:We,shift:Ve})}}xe=Fe.makeVList({positionType:"individualShift",children:xe},t),xe=Fe.makeSpan(["col-align-"+(ae.align||"c")],[xe]),B.push(xe),(i<a-1||e.hskipBeforeAndAfter)&&(Ke=an.deflt(ae.postgap,h),Ke!==0&&(q=Fe.makeSpan(["arraycolsep"],[]),q.style.width=Tt(Ke),B.push(q)))}}if(l=Fe.makeSpan(["mtable"],B),c.length>0){for(var te=Fe.makeLineSpan("hline",t,u),ce=Fe.makeLineSpan("hdashline",t,u),de=[{type:"elem",elem:l,shift:0}];c.length>0;){var Pe=c.pop(),Te=Pe.pos-V;Pe.isDashed?de.push({type:"elem",elem:ce,shift:Te}):de.push({type:"elem",elem:te,shift:Te})}l=Fe.makeVList({positionType:"individualShift",children:de},t)}if(se.length===0)return Fe.makeSpan(["mord"],[l],t);var De=Fe.makeVList({positionType:"individualShift",children:se},t);return De=Fe.makeSpan(["tag"],[De],t),Fe.makeFragment([l,De])},hbe={c:"center ",l:"left ",r:"right "},Vu=function(e,t){for(var r=[],i=new mt.MathNode("mtd",[],["mtr-glue"]),s=new mt.MathNode("mtd",[],["mml-eqn-num"]),o=0;o<e.body.length;o++){for(var a=e.body[o],l=[],c=0;c<a.length;c++)l.push(new mt.MathNode("mtd",[Jr(a[c],t)]));e.tags&&e.tags[o]&&(l.unshift(i),l.push(i),e.leqno?l.unshift(s):l.push(s)),r.push(new mt.MathNode("mtr",l))}var u=new mt.MathNode("mtable",r),d=e.arraystretch===.5?.1:.16+e.arraystretch-1+(e.addJot?.09:0);u.setAttribute("rowspacing",Tt(d));var h="",f="";if(e.cols&&e.cols.length>0){var m=e.cols,g="",v=!1,y=0,A=m.length;m[0].type==="separator"&&(h+="top ",y=1),m[m.length-1].type==="separator"&&(h+="bottom ",A-=1);for(var C=y;C<A;C++)m[C].type==="align"?(f+=hbe[m[C].align],v&&(g+="none "),v=!0):m[C].type==="separator"&&v&&(g+=m[C].separator==="|"?"solid ":"dashed ",v=!1);u.setAttribute("columnalign",f.trim()),/[sd]/.test(g)&&u.setAttribute("columnlines",g.trim())}if(e.colSeparationType==="align"){for(var T=e.cols||[],x="",R=1;R<T.length;R++)x+=R%2?"0em ":"1em ";u.setAttribute("columnspacing",x.trim())}else e.colSeparationType==="alignat"||e.colSeparationType==="gather"?u.setAttribute("columnspacing","0em"):e.colSeparationType==="small"?u.setAttribute("columnspacing","0.2778em"):e.colSeparationType==="CD"?u.setAttribute("columnspacing","0.5em"):u.setAttribute("columnspacing","1em");var N="",M=e.hLinesBeforeRow;h+=M[0].length>0?"left ":"",h+=M[M.length-1].length>0?"right ":"";for(var O=1;O<M.length-1;O++)N+=M[O].length===0?"none ":M[O][0]?"dashed ":"solid ";return/[sd]/.test(N)&&u.setAttribute("rowlines",N.trim()),h!==""&&(u=new mt.MathNode("menclose",[u]),u.setAttribute("notation",h.trim())),e.arraystretch&&e.arraystretch<1&&(u=new mt.MathNode("mstyle",[u]),u.setAttribute("scriptlevel","1")),u},_Y=function(e,t){e.envName.indexOf("ed")===-1&&ib(e);var r=[],i=e.envName.indexOf("at")>-1?"alignat":"align",s=e.envName==="split",o=lp(e.parser,{cols:r,addJot:!0,autoTag:s?void 0:VD(e.envName),emptySingleRow:!0,colSeparationType:i,maxNumCols:s?2:void 0,leqno:e.parser.settings.leqno},"display"),a,l=0,c={type:"ordgroup",mode:e.mode,body:[]};if(t[0]&&t[0].type==="ordgroup"){for(var u="",d=0;d<t[0].body.length;d++){var h=Qn(t[0].body[d],"textord");u+=h.text}a=Number(u),l=a*2}var f=!l;o.body.forEach(function(y){for(var A=1;A<y.length;A+=2){var C=Qn(y[A],"styling"),T=Qn(C.body[0],"ordgroup");T.body.unshift(c)}if(f)l<y.length&&(l=y.length);else{var x=y.length/2;if(a<x)throw new _t("Too many math in a row: "+("expected "+a+", but got "+x),y[0])}});for(var m=0;m<l;++m){var g="r",v=0;m%2===1?g="l":m>0&&f&&(v=1),r[m]={type:"align",align:g,pregap:v,postgap:0}}return o.colSeparationType=f?"align":"alignat",o};Gu({type:"array",names:["array","darray"],props:{numArgs:1},handler(n,e){var t=tb(e[0]),r=t?[e[0]]:Qn(e[0],"ordgroup").body,i=r.map(function(o){var a=zD(o),l=a.text;if("lcr".indexOf(l)!==-1)return{type:"align",align:l};if(l==="|")return{type:"separator",separator:"|"};if(l===":")return{type:"separator",separator:":"};throw new _t("Unknown column alignment: "+l,o)}),s={cols:i,hskipBeforeAndAfter:!0,maxNumCols:i.length};return lp(n.parser,s,$D(n.envName))},htmlBuilder:Hu,mathmlBuilder:Vu});Gu({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(n){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[n.envName.replace("*","")],t="c",r={hskipBeforeAndAfter:!1,cols:[{type:"align",align:t}]};if(n.envName.charAt(n.envName.length-1)==="*"){var i=n.parser;if(i.consumeSpaces(),i.fetch().text==="["){if(i.consume(),i.consumeSpaces(),t=i.fetch().text,"lcr".indexOf(t)===-1)throw new _t("Expected l or c or r",i.nextToken);i.consume(),i.consumeSpaces(),i.expect("]"),i.consume(),r.cols=[{type:"align",align:t}]}}var s=lp(n.parser,r,$D(n.envName)),o=Math.max(0,...s.body.map(a=>a.length));return s.cols=new Array(o).fill({type:"align",align:t}),e?{type:"leftright",mode:n.mode,body:[s],left:e[0],right:e[1],rightColor:void 0}:s},htmlBuilder:Hu,mathmlBuilder:Vu});Gu({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(n){var e={arraystretch:.5},t=lp(n.parser,e,"script");return t.colSeparationType="small",t},htmlBuilder:Hu,mathmlBuilder:Vu});Gu({type:"array",names:["subarray"],props:{numArgs:1},handler(n,e){var t=tb(e[0]),r=t?[e[0]]:Qn(e[0],"ordgroup").body,i=r.map(function(o){var a=zD(o),l=a.text;if("lc".indexOf(l)!==-1)return{type:"align",align:l};throw new _t("Unknown column alignment: "+l,o)});if(i.length>1)throw new _t("{subarray} can contain only one column");var s={cols:i,hskipBeforeAndAfter:!1,arraystretch:.5};if(s=lp(n.parser,s,"script"),s.body.length>0&&s.body[0].length>1)throw new _t("{subarray} can contain only one column");return s},htmlBuilder:Hu,mathmlBuilder:Vu});Gu({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(n){var e={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},t=lp(n.parser,e,$D(n.envName));return{type:"leftright",mode:n.mode,body:[t],left:n.envName.indexOf("r")>-1?".":"\\{",right:n.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:Hu,mathmlBuilder:Vu});Gu({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:_Y,htmlBuilder:Hu,mathmlBuilder:Vu});Gu({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(n){an.contains(["gather","gather*"],n.envName)&&ib(n);var e={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:VD(n.envName),emptySingleRow:!0,leqno:n.parser.settings.leqno};return lp(n.parser,e,"display")},htmlBuilder:Hu,mathmlBuilder:Vu});Gu({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:_Y,htmlBuilder:Hu,mathmlBuilder:Vu});Gu({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(n){ib(n);var e={autoTag:VD(n.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:n.parser.settings.leqno};return lp(n.parser,e,"display")},htmlBuilder:Hu,mathmlBuilder:Vu});Gu({type:"array",names:["CD"],props:{numArgs:0},handler(n){return ib(n),X2e(n.parser)},htmlBuilder:Hu,mathmlBuilder:Vu});ie("\\nonumber","\\gdef\\@eqnsw{0}");ie("\\notag","\\nonumber");kt({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(n,e){throw new _t(n.funcName+" valid only within array environment")}});var Tz=vY;kt({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(n,e){var{parser:t,funcName:r}=n,i=e[0];if(i.type!=="ordgroup")throw new _t("Invalid environment name",i);for(var s="",o=0;o<i.body.length;++o)s+=Qn(i.body[o],"textord").text;if(r==="\\begin"){if(!Tz.hasOwnProperty(s))throw new _t("No such environment: "+s,i);var a=Tz[s],{args:l,optArgs:c}=t.parseArguments("\\begin{"+s+"}",a),u={mode:t.mode,envName:s,parser:t},d=a.handler(u,l,c);t.expect("\\end",!1);var h=t.nextToken,f=Qn(t.parseFunction(),"environment");if(f.name!==s)throw new _t("Mismatch: \\begin{"+s+"} matched by \\end{"+f.name+"}",h);return d}return{type:"environment",mode:t.mode,name:s,nameGroup:i}}});var SY=(n,e)=>{var t=n.font,r=e.withFont(t);return Er(n.body,r)},AY=(n,e)=>{var t=n.font,r=e.withFont(t);return Jr(n.body,r)},xz={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};kt({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(n,e)=>{var{parser:t,funcName:r}=n,i=Ex(e[0]),s=r;return s in xz&&(s=xz[s]),{type:"font",mode:t.mode,font:s.slice(1),body:i}},htmlBuilder:SY,mathmlBuilder:AY});kt({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(n,e)=>{var{parser:t}=n,r=e[0],i=an.isCharacterBox(r);return{type:"mclass",mode:t.mode,mclass:nb(r),body:[{type:"font",mode:t.mode,font:"boldsymbol",body:r}],isCharacterBox:i}}});kt({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(n,e)=>{var{parser:t,funcName:r,breakOnTokenText:i}=n,{mode:s}=t,o=t.parseExpression(!0,i),a="math"+r.slice(1);return{type:"font",mode:s,font:a,body:{type:"ordgroup",mode:t.mode,body:o}}},htmlBuilder:SY,mathmlBuilder:AY});var EY=(n,e)=>{var t=e;return n==="display"?t=t.id>=fn.SCRIPT.id?t.text():fn.DISPLAY:n==="text"&&t.size===fn.DISPLAY.size?t=fn.TEXT:n==="script"?t=fn.SCRIPT:n==="scriptscript"&&(t=fn.SCRIPTSCRIPT),t},WD=(n,e)=>{var t=EY(n.size,e.style),r=t.fracNum(),i=t.fracDen(),s;s=e.havingStyle(r);var o=Er(n.numer,s,e);if(n.continued){var a=8.5/e.fontMetrics().ptPerEm,l=3.5/e.fontMetrics().ptPerEm;o.height=o.height<a?a:o.height,o.depth=o.depth<l?l:o.depth}s=e.havingStyle(i);var c=Er(n.denom,s,e),u,d,h;n.hasBarLine?(n.barSize?(d=wi(n.barSize,e),u=Fe.makeLineSpan("frac-line",e,d)):u=Fe.makeLineSpan("frac-line",e),d=u.height,h=u.height):(u=null,d=0,h=e.fontMetrics().defaultRuleThickness);var f,m,g;t.size===fn.DISPLAY.size||n.size==="display"?(f=e.fontMetrics().num1,d>0?m=3*h:m=7*h,g=e.fontMetrics().denom1):(d>0?(f=e.fontMetrics().num2,m=h):(f=e.fontMetrics().num3,m=3*h),g=e.fontMetrics().denom2);var v;if(u){var A=e.fontMetrics().axisHeight;f-o.depth-(A+.5*d)<m&&(f+=m-(f-o.depth-(A+.5*d))),A-.5*d-(c.height-g)<m&&(g+=m-(A-.5*d-(c.height-g)));var C=-(A-.5*d);v=Fe.makeVList({positionType:"individualShift",children:[{type:"elem",elem:c,shift:g},{type:"elem",elem:u,shift:C},{type:"elem",elem:o,shift:-f}]},e)}else{var y=f-o.depth-(c.height-g);y<m&&(f+=.5*(m-y),g+=.5*(m-y)),v=Fe.makeVList({positionType:"individualShift",children:[{type:"elem",elem:c,shift:g},{type:"elem",elem:o,shift:-f}]},e)}s=e.havingStyle(t),v.height*=s.sizeMultiplier/e.sizeMultiplier,v.depth*=s.sizeMultiplier/e.sizeMultiplier;var T;t.size===fn.DISPLAY.size?T=e.fontMetrics().delim1:t.size===fn.SCRIPTSCRIPT.size?T=e.havingStyle(fn.SCRIPT).fontMetrics().delim2:T=e.fontMetrics().delim2;var x,R;return n.leftDelim==null?x=ES(e,["mopen"]):x=Hd.customSizedDelim(n.leftDelim,T,!0,e.havingStyle(t),n.mode,["mopen"]),n.continued?R=Fe.makeSpan([]):n.rightDelim==null?R=ES(e,["mclose"]):R=Hd.customSizedDelim(n.rightDelim,T,!0,e.havingStyle(t),n.mode,["mclose"]),Fe.makeSpan(["mord"].concat(s.sizingClasses(e)),[x,Fe.makeSpan(["mfrac"],[v]),R],e)},qD=(n,e)=>{var t=new mt.MathNode("mfrac",[Jr(n.numer,e),Jr(n.denom,e)]);if(!n.hasBarLine)t.setAttribute("linethickness","0px");else if(n.barSize){var r=wi(n.barSize,e);t.setAttribute("linethickness",Tt(r))}var i=EY(n.size,e.style);if(i.size!==e.style.size){t=new mt.MathNode("mstyle",[t]);var s=i.size===fn.DISPLAY.size?"true":"false";t.setAttribute("displaystyle",s),t.setAttribute("scriptlevel","0")}if(n.leftDelim!=null||n.rightDelim!=null){var o=[];if(n.leftDelim!=null){var a=new mt.MathNode("mo",[new mt.TextNode(n.leftDelim.replace("\\",""))]);a.setAttribute("fence","true"),o.push(a)}if(o.push(t),n.rightDelim!=null){var l=new mt.MathNode("mo",[new mt.TextNode(n.rightDelim.replace("\\",""))]);l.setAttribute("fence","true"),o.push(l)}return BD(o)}return t};kt({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(n,e)=>{var{parser:t,funcName:r}=n,i=e[0],s=e[1],o,a=null,l=null,c="auto";switch(r){case"\\dfrac":case"\\frac":case"\\tfrac":o=!0;break;case"\\\\atopfrac":o=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":o=!1,a="(",l=")";break;case"\\\\bracefrac":o=!1,a="\\{",l="\\}";break;case"\\\\brackfrac":o=!1,a="[",l="]";break;default:throw new Error("Unrecognized genfrac command")}switch(r){case"\\dfrac":case"\\dbinom":c="display";break;case"\\tfrac":case"\\tbinom":c="text";break}return{type:"genfrac",mode:t.mode,continued:!1,numer:i,denom:s,hasBarLine:o,leftDelim:a,rightDelim:l,size:c,barSize:null}},htmlBuilder:WD,mathmlBuilder:qD});kt({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(n,e)=>{var{parser:t,funcName:r}=n,i=e[0],s=e[1];return{type:"genfrac",mode:t.mode,continued:!0,numer:i,denom:s,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});kt({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(n){var{parser:e,funcName:t,token:r}=n,i;switch(t){case"\\over":i="\\frac";break;case"\\choose":i="\\binom";break;case"\\atop":i="\\\\atopfrac";break;case"\\brace":i="\\\\bracefrac";break;case"\\brack":i="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:e.mode,replaceWith:i,token:r}}});var Iz=["display","text","script","scriptscript"],bz=function(e){var t=null;return e.length>0&&(t=e,t=t==="."?null:t),t};kt({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(n,e){var{parser:t}=n,r=e[4],i=e[5],s=Ex(e[0]),o=s.type==="atom"&&s.family==="open"?bz(s.text):null,a=Ex(e[1]),l=a.type==="atom"&&a.family==="close"?bz(a.text):null,c=Qn(e[2],"size"),u,d=null;c.isBlank?u=!0:(d=c.value,u=d.number>0);var h="auto",f=e[3];if(f.type==="ordgroup"){if(f.body.length>0){var m=Qn(f.body[0],"textord");h=Iz[Number(m.text)]}}else f=Qn(f,"textord"),h=Iz[Number(f.text)];return{type:"genfrac",mode:t.mode,numer:r,denom:i,continued:!1,hasBarLine:u,barSize:d,leftDelim:o,rightDelim:l,size:h}},htmlBuilder:WD,mathmlBuilder:qD});kt({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(n,e){var{parser:t,funcName:r,token:i}=n;return{type:"infix",mode:t.mode,replaceWith:"\\\\abovefrac",size:Qn(e[0],"size").value,token:i}}});kt({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(n,e)=>{var{parser:t,funcName:r}=n,i=e[0],s=HIe(Qn(e[1],"infix").size),o=e[2],a=s.number>0;return{type:"genfrac",mode:t.mode,numer:i,denom:o,continued:!1,hasBarLine:a,barSize:s,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:WD,mathmlBuilder:qD});var CY=(n,e)=>{var t=e.style,r,i;n.type==="supsub"?(r=n.sup?Er(n.sup,e.havingStyle(t.sup()),e):Er(n.sub,e.havingStyle(t.sub()),e),i=Qn(n.base,"horizBrace")):i=Qn(n,"horizBrace");var s=Er(i.base,e.havingBaseStyle(fn.DISPLAY)),o=nh.svgSpan(i,e),a;if(i.isOver?(a=Fe.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"kern",size:.1},{type:"elem",elem:o}]},e),a.children[0].children[0].children[1].classes.push("svg-align")):(a=Fe.makeVList({positionType:"bottom",positionData:s.depth+.1+o.height,children:[{type:"elem",elem:o},{type:"kern",size:.1},{type:"elem",elem:s}]},e),a.children[0].children[0].children[0].classes.push("svg-align")),r){var l=Fe.makeSpan(["mord",i.isOver?"mover":"munder"],[a],e);i.isOver?a=Fe.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:l},{type:"kern",size:.2},{type:"elem",elem:r}]},e):a=Fe.makeVList({positionType:"bottom",positionData:l.depth+.2+r.height+r.depth,children:[{type:"elem",elem:r},{type:"kern",size:.2},{type:"elem",elem:l}]},e)}return Fe.makeSpan(["mord",i.isOver?"mover":"munder"],[a],e)},fbe=(n,e)=>{var t=nh.mathMLnode(n.label);return new mt.MathNode(n.isOver?"mover":"munder",[Jr(n.base,e),t])};kt({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(n,e){var{parser:t,funcName:r}=n;return{type:"horizBrace",mode:t.mode,label:r,isOver:/^\\over/.test(r),base:e[0]}},htmlBuilder:CY,mathmlBuilder:fbe});kt({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(n,e)=>{var{parser:t}=n,r=e[1],i=Qn(e[0],"url").url;return t.settings.isTrusted({command:"\\href",url:i})?{type:"href",mode:t.mode,href:i,body:rs(r)}:t.formatUnsupportedCmd("\\href")},htmlBuilder:(n,e)=>{var t=Ps(n.body,e,!1);return Fe.makeAnchor(n.href,[],t,e)},mathmlBuilder:(n,e)=>{var t=Hf(n.body,e);return t instanceof Za||(t=new Za("mrow",[t])),t.setAttribute("href",n.href),t}});kt({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(n,e)=>{var{parser:t}=n,r=Qn(e[0],"url").url;if(!t.settings.isTrusted({command:"\\url",url:r}))return t.formatUnsupportedCmd("\\url");for(var i=[],s=0;s<r.length;s++){var o=r[s];o==="~"&&(o="\\textasciitilde"),i.push({type:"textord",mode:"text",text:o})}var a={type:"text",mode:t.mode,font:"\\texttt",body:i};return{type:"href",mode:t.mode,href:r,body:rs(a)}}});kt({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(n,e){var{parser:t}=n;return{type:"hbox",mode:t.mode,body:rs(e[0])}},htmlBuilder(n,e){var t=Ps(n.body,e,!1);return Fe.makeFragment(t)},mathmlBuilder(n,e){return new mt.MathNode("mrow",ja(n.body,e))}});kt({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(n,e)=>{var{parser:t,funcName:r,token:i}=n,s=Qn(e[0],"raw").string,o=e[1];t.settings.strict&&t.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var a,l={};switch(r){case"\\htmlClass":l.class=s,a={command:"\\htmlClass",class:s};break;case"\\htmlId":l.id=s,a={command:"\\htmlId",id:s};break;case"\\htmlStyle":l.style=s,a={command:"\\htmlStyle",style:s};break;case"\\htmlData":{for(var c=s.split(","),u=0;u<c.length;u++){var d=c[u].split("=");if(d.length!==2)throw new _t("Error parsing key-value for \\htmlData");l["data-"+d[0].trim()]=d[1].trim()}a={command:"\\htmlData",attributes:l};break}default:throw new Error("Unrecognized html command")}return t.settings.isTrusted(a)?{type:"html",mode:t.mode,attributes:l,body:rs(o)}:t.formatUnsupportedCmd(r)},htmlBuilder:(n,e)=>{var t=Ps(n.body,e,!1),r=["enclosing"];n.attributes.class&&r.push(...n.attributes.class.trim().split(/\s+/));var i=Fe.makeSpan(r,t,e);for(var s in n.attributes)s!=="class"&&n.attributes.hasOwnProperty(s)&&i.setAttribute(s,n.attributes[s]);return i},mathmlBuilder:(n,e)=>Hf(n.body,e)});kt({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(n,e)=>{var{parser:t}=n;return{type:"htmlmathml",mode:t.mode,html:rs(e[0]),mathml:rs(e[1])}},htmlBuilder:(n,e)=>{var t=Ps(n.html,e,!1);return Fe.makeFragment(t)},mathmlBuilder:(n,e)=>Hf(n.mathml,e)});var Z3=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var t=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!t)throw new _t("Invalid size: '"+e+"' in \\includegraphics");var r={number:+(t[1]+t[2]),unit:t[3]};if(!GK(r))throw new _t("Invalid unit: '"+r.unit+"' in \\includegraphics.");return r};kt({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(n,e,t)=>{var{parser:r}=n,i={number:0,unit:"em"},s={number:.9,unit:"em"},o={number:0,unit:"em"},a="";if(t[0])for(var l=Qn(t[0],"raw").string,c=l.split(","),u=0;u<c.length;u++){var d=c[u].split("=");if(d.length===2){var h=d[1].trim();switch(d[0].trim()){case"alt":a=h;break;case"width":i=Z3(h);break;case"height":s=Z3(h);break;case"totalheight":o=Z3(h);break;default:throw new _t("Invalid key: '"+d[0]+"' in \\includegraphics.")}}}var f=Qn(e[0],"url").url;return a===""&&(a=f,a=a.replace(/^.*[\\/]/,""),a=a.substring(0,a.lastIndexOf("."))),r.settings.isTrusted({command:"\\includegraphics",url:f})?{type:"includegraphics",mode:r.mode,alt:a,width:i,height:s,totalheight:o,src:f}:r.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(n,e)=>{var t=wi(n.height,e),r=0;n.totalheight.number>0&&(r=wi(n.totalheight,e)-t);var i=0;n.width.number>0&&(i=wi(n.width,e));var s={height:Tt(t+r)};i>0&&(s.width=Tt(i)),r>0&&(s.verticalAlign=Tt(-r));var o=new f2e(n.src,n.alt,s);return o.height=t,o.depth=r,o},mathmlBuilder:(n,e)=>{var t=new mt.MathNode("mglyph",[]);t.setAttribute("alt",n.alt);var r=wi(n.height,e),i=0;if(n.totalheight.number>0&&(i=wi(n.totalheight,e)-r,t.setAttribute("valign",Tt(-i))),t.setAttribute("height",Tt(r+i)),n.width.number>0){var s=wi(n.width,e);t.setAttribute("width",Tt(s))}return t.setAttribute("src",n.src),t}});kt({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(n,e){var{parser:t,funcName:r}=n,i=Qn(e[0],"size");if(t.settings.strict){var s=r[1]==="m",o=i.value.unit==="mu";s?(o||t.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" supports only mu units, "+("not "+i.value.unit+" units")),t.mode!=="math"&&t.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" works only in math mode")):o&&t.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" doesn't support mu units")}return{type:"kern",mode:t.mode,dimension:i.value}},htmlBuilder(n,e){return Fe.makeGlue(n.dimension,e)},mathmlBuilder(n,e){var t=wi(n.dimension,e);return new mt.SpaceNode(t)}});kt({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(n,e)=>{var{parser:t,funcName:r}=n,i=e[0];return{type:"lap",mode:t.mode,alignment:r.slice(5),body:i}},htmlBuilder:(n,e)=>{var t;n.alignment==="clap"?(t=Fe.makeSpan([],[Er(n.body,e)]),t=Fe.makeSpan(["inner"],[t],e)):t=Fe.makeSpan(["inner"],[Er(n.body,e)]);var r=Fe.makeSpan(["fix"],[]),i=Fe.makeSpan([n.alignment],[t,r],e),s=Fe.makeSpan(["strut"]);return s.style.height=Tt(i.height+i.depth),i.depth&&(s.style.verticalAlign=Tt(-i.depth)),i.children.unshift(s),i=Fe.makeSpan(["thinbox"],[i],e),Fe.makeSpan(["mord","vbox"],[i],e)},mathmlBuilder:(n,e)=>{var t=new mt.MathNode("mpadded",[Jr(n.body,e)]);if(n.alignment!=="rlap"){var r=n.alignment==="llap"?"-1":"-0.5";t.setAttribute("lspace",r+"width")}return t.setAttribute("width","0px"),t}});kt({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(n,e){var{funcName:t,parser:r}=n,i=r.mode;r.switchMode("math");var s=t==="\\("?"\\)":"$",o=r.parseExpression(!1,s);return r.expect(s),r.switchMode(i),{type:"styling",mode:r.mode,style:"text",body:o}}});kt({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(n,e){throw new _t("Mismatched "+n.funcName)}});var Mz=(n,e)=>{switch(e.style.size){case fn.DISPLAY.size:return n.display;case fn.TEXT.size:return n.text;case fn.SCRIPT.size:return n.script;case fn.SCRIPTSCRIPT.size:return n.scriptscript;default:return n.text}};kt({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(n,e)=>{var{parser:t}=n;return{type:"mathchoice",mode:t.mode,display:rs(e[0]),text:rs(e[1]),script:rs(e[2]),scriptscript:rs(e[3])}},htmlBuilder:(n,e)=>{var t=Mz(n,e),r=Ps(t,e,!1);return Fe.makeFragment(r)},mathmlBuilder:(n,e)=>{var t=Mz(n,e);return Hf(t,e)}});var wY=(n,e,t,r,i,s,o)=>{n=Fe.makeSpan([],[n]);var a=t&&an.isCharacterBox(t),l,c;if(e){var u=Er(e,r.havingStyle(i.sup()),r);c={elem:u,kern:Math.max(r.fontMetrics().bigOpSpacing1,r.fontMetrics().bigOpSpacing3-u.depth)}}if(t){var d=Er(t,r.havingStyle(i.sub()),r);l={elem:d,kern:Math.max(r.fontMetrics().bigOpSpacing2,r.fontMetrics().bigOpSpacing4-d.height)}}var h;if(c&&l){var f=r.fontMetrics().bigOpSpacing5+l.elem.height+l.elem.depth+l.kern+n.depth+o;h=Fe.makeVList({positionType:"bottom",positionData:f,children:[{type:"kern",size:r.fontMetrics().bigOpSpacing5},{type:"elem",elem:l.elem,marginLeft:Tt(-s)},{type:"kern",size:l.kern},{type:"elem",elem:n},{type:"kern",size:c.kern},{type:"elem",elem:c.elem,marginLeft:Tt(s)},{type:"kern",size:r.fontMetrics().bigOpSpacing5}]},r)}else if(l){var m=n.height-o;h=Fe.makeVList({positionType:"top",positionData:m,children:[{type:"kern",size:r.fontMetrics().bigOpSpacing5},{type:"elem",elem:l.elem,marginLeft:Tt(-s)},{type:"kern",size:l.kern},{type:"elem",elem:n}]},r)}else if(c){var g=n.depth+o;h=Fe.makeVList({positionType:"bottom",positionData:g,children:[{type:"elem",elem:n},{type:"kern",size:c.kern},{type:"elem",elem:c.elem,marginLeft:Tt(s)},{type:"kern",size:r.fontMetrics().bigOpSpacing5}]},r)}else return n;var v=[h];if(l&&s!==0&&!a){var y=Fe.makeSpan(["mspace"],[],r);y.style.marginRight=Tt(s),v.unshift(y)}return Fe.makeSpan(["mop","op-limits"],v,r)},TY=["\\smallint"],Nv=(n,e)=>{var t,r,i=!1,s;n.type==="supsub"?(t=n.sup,r=n.sub,s=Qn(n.base,"op"),i=!0):s=Qn(n,"op");var o=e.style,a=!1;o.size===fn.DISPLAY.size&&s.symbol&&!an.contains(TY,s.name)&&(a=!0);var l;if(s.symbol){var c=a?"Size2-Regular":"Size1-Regular",u="";if((s.name==="\\oiint"||s.name==="\\oiiint")&&(u=s.name.slice(1),s.name=u==="oiint"?"\\iint":"\\iiint"),l=Fe.makeSymbol(s.name,c,"math",e,["mop","op-symbol",a?"large-op":"small-op"]),u.length>0){var d=l.italic,h=Fe.staticSvg(u+"Size"+(a?"2":"1"),e);l=Fe.makeVList({positionType:"individualShift",children:[{type:"elem",elem:l,shift:0},{type:"elem",elem:h,shift:a?.08:0}]},e),s.name="\\"+u,l.classes.unshift("mop"),l.italic=d}}else if(s.body){var f=Ps(s.body,e,!0);f.length===1&&f[0]instanceof ic?(l=f[0],l.classes[0]="mop"):l=Fe.makeSpan(["mop"],f,e)}else{for(var m=[],g=1;g<s.name.length;g++)m.push(Fe.mathsym(s.name[g],s.mode,e));l=Fe.makeSpan(["mop"],m,e)}var v=0,y=0;return(l instanceof ic||s.name==="\\oiint"||s.name==="\\oiiint")&&!s.suppressBaseShift&&(v=(l.height-l.depth)/2-e.fontMetrics().axisHeight,y=l.italic),i?wY(l,t,r,e,o,y,v):(v&&(l.style.position="relative",l.style.top=Tt(v)),l)},UA=(n,e)=>{var t;if(n.symbol)t=new Za("mo",[sc(n.name,n.mode)]),an.contains(TY,n.name)&&t.setAttribute("largeop","false");else if(n.body)t=new Za("mo",ja(n.body,e));else{t=new Za("mi",[new Mu(n.name.slice(1))]);var r=new Za("mo",[sc("⁡","text")]);n.parentIsSupSub?t=new Za("mrow",[t,r]):t=ZK([t,r])}return t},pbe={"∏":"\\prod","∐":"\\coprod","∑":"\\sum","⋀":"\\bigwedge","⋁":"\\bigvee","⋂":"\\bigcap","⋃":"\\bigcup","⨀":"\\bigodot","⨁":"\\bigoplus","⨂":"\\bigotimes","⨄":"\\biguplus","⨆":"\\bigsqcup"};kt({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","∏","∐","∑","⋀","⋁","⋂","⋃","⨀","⨁","⨂","⨄","⨆"],props:{numArgs:0},handler:(n,e)=>{var{parser:t,funcName:r}=n,i=r;return i.length===1&&(i=pbe[i]),{type:"op",mode:t.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:i}},htmlBuilder:Nv,mathmlBuilder:UA});kt({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(n,e)=>{var{parser:t}=n,r=e[0];return{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:rs(r)}},htmlBuilder:Nv,mathmlBuilder:UA});var mbe={"∫":"\\int","∬":"\\iint","∭":"\\iiint","∮":"\\oint","∯":"\\oiint","∰":"\\oiiint"};kt({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(n){var{parser:e,funcName:t}=n;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:t}},htmlBuilder:Nv,mathmlBuilder:UA});kt({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(n){var{parser:e,funcName:t}=n;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:t}},htmlBuilder:Nv,mathmlBuilder:UA});kt({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","∫","∬","∭","∮","∯","∰"],props:{numArgs:0},handler(n){var{parser:e,funcName:t}=n,r=t;return r.length===1&&(r=mbe[r]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:r}},htmlBuilder:Nv,mathmlBuilder:UA});var xY=(n,e)=>{var t,r,i=!1,s;n.type==="supsub"?(t=n.sup,r=n.sub,s=Qn(n.base,"operatorname"),i=!0):s=Qn(n,"operatorname");var o;if(s.body.length>0){for(var a=s.body.map(d=>{var h=d.text;return typeof h=="string"?{type:"textord",mode:d.mode,text:h}:d}),l=Ps(a,e.withFont("mathrm"),!0),c=0;c<l.length;c++){var u=l[c];u instanceof ic&&(u.text=u.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}o=Fe.makeSpan(["mop"],l,e)}else o=Fe.makeSpan(["mop"],[],e);return i?wY(o,t,r,e,e.style,0,0):o},gbe=(n,e)=>{for(var t=ja(n.body,e.withFont("mathrm")),r=!0,i=0;i<t.length;i++){var s=t[i];if(!(s instanceof mt.SpaceNode))if(s instanceof mt.MathNode)switch(s.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var o=s.children[0];s.children.length===1&&o instanceof mt.TextNode?o.text=o.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):r=!1;break}default:r=!1}else r=!1}if(r){var a=t.map(u=>u.toText()).join("");t=[new mt.TextNode(a)]}var l=new mt.MathNode("mi",t);l.setAttribute("mathvariant","normal");var c=new mt.MathNode("mo",[sc("⁡","text")]);return n.parentIsSupSub?new mt.MathNode("mrow",[l,c]):mt.newDocumentFragment([l,c])};kt({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(n,e)=>{var{parser:t,funcName:r}=n,i=e[0];return{type:"operatorname",mode:t.mode,body:rs(i),alwaysHandleSupSub:r==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:xY,mathmlBuilder:gbe});ie("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");Xm({type:"ordgroup",htmlBuilder(n,e){return n.semisimple?Fe.makeFragment(Ps(n.body,e,!1)):Fe.makeSpan(["mord"],Ps(n.body,e,!0),e)},mathmlBuilder(n,e){return Hf(n.body,e,!0)}});kt({type:"overline",names:["\\overline"],props:{numArgs:1},handler(n,e){var{parser:t}=n,r=e[0];return{type:"overline",mode:t.mode,body:r}},htmlBuilder(n,e){var t=Er(n.body,e.havingCrampedStyle()),r=Fe.makeLineSpan("overline-line",e),i=e.fontMetrics().defaultRuleThickness,s=Fe.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:t},{type:"kern",size:3*i},{type:"elem",elem:r},{type:"kern",size:i}]},e);return Fe.makeSpan(["mord","overline"],[s],e)},mathmlBuilder(n,e){var t=new mt.MathNode("mo",[new mt.TextNode("‾")]);t.setAttribute("stretchy","true");var r=new mt.MathNode("mover",[Jr(n.body,e),t]);return r.setAttribute("accent","true"),r}});kt({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(n,e)=>{var{parser:t}=n,r=e[0];return{type:"phantom",mode:t.mode,body:rs(r)}},htmlBuilder:(n,e)=>{var t=Ps(n.body,e.withPhantom(),!1);return Fe.makeFragment(t)},mathmlBuilder:(n,e)=>{var t=ja(n.body,e);return new mt.MathNode("mphantom",t)}});kt({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(n,e)=>{var{parser:t}=n,r=e[0];return{type:"hphantom",mode:t.mode,body:r}},htmlBuilder:(n,e)=>{var t=Fe.makeSpan([],[Er(n.body,e.withPhantom())]);if(t.height=0,t.depth=0,t.children)for(var r=0;r<t.children.length;r++)t.children[r].height=0,t.children[r].depth=0;return t=Fe.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:t}]},e),Fe.makeSpan(["mord"],[t],e)},mathmlBuilder:(n,e)=>{var t=ja(rs(n.body),e),r=new mt.MathNode("mphantom",t),i=new mt.MathNode("mpadded",[r]);return i.setAttribute("height","0px"),i.setAttribute("depth","0px"),i}});kt({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(n,e)=>{var{parser:t}=n,r=e[0];return{type:"vphantom",mode:t.mode,body:r}},htmlBuilder:(n,e)=>{var t=Fe.makeSpan(["inner"],[Er(n.body,e.withPhantom())]),r=Fe.makeSpan(["fix"],[]);return Fe.makeSpan(["mord","rlap"],[t,r],e)},mathmlBuilder:(n,e)=>{var t=ja(rs(n.body),e),r=new mt.MathNode("mphantom",t),i=new mt.MathNode("mpadded",[r]);return i.setAttribute("width","0px"),i}});kt({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(n,e){var{parser:t}=n,r=Qn(e[0],"size").value,i=e[1];return{type:"raisebox",mode:t.mode,dy:r,body:i}},htmlBuilder(n,e){var t=Er(n.body,e),r=wi(n.dy,e);return Fe.makeVList({positionType:"shift",positionData:-r,children:[{type:"elem",elem:t}]},e)},mathmlBuilder(n,e){var t=new mt.MathNode("mpadded",[Jr(n.body,e)]),r=n.dy.number+n.dy.unit;return t.setAttribute("voffset",r),t}});kt({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0},handler(n){var{parser:e}=n;return{type:"internal",mode:e.mode}}});kt({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(n,e,t){var{parser:r}=n,i=t[0],s=Qn(e[0],"size"),o=Qn(e[1],"size");return{type:"rule",mode:r.mode,shift:i&&Qn(i,"size").value,width:s.value,height:o.value}},htmlBuilder(n,e){var t=Fe.makeSpan(["mord","rule"],[],e),r=wi(n.width,e),i=wi(n.height,e),s=n.shift?wi(n.shift,e):0;return t.style.borderRightWidth=Tt(r),t.style.borderTopWidth=Tt(i),t.style.bottom=Tt(s),t.width=r,t.height=i+s,t.depth=-s,t.maxFontSize=i*1.125*e.sizeMultiplier,t},mathmlBuilder(n,e){var t=wi(n.width,e),r=wi(n.height,e),i=n.shift?wi(n.shift,e):0,s=e.color&&e.getColor()||"black",o=new mt.MathNode("mspace");o.setAttribute("mathbackground",s),o.setAttribute("width",Tt(t)),o.setAttribute("height",Tt(r));var a=new mt.MathNode("mpadded",[o]);return i>=0?a.setAttribute("height",Tt(i)):(a.setAttribute("height",Tt(i)),a.setAttribute("depth",Tt(-i))),a.setAttribute("voffset",Tt(i)),a}});function IY(n,e,t){for(var r=Ps(n,e,!1),i=e.sizeMultiplier/t.sizeMultiplier,s=0;s<r.length;s++){var o=r[s].classes.indexOf("sizing");o<0?Array.prototype.push.apply(r[s].classes,e.sizingClasses(t)):r[s].classes[o+1]==="reset-size"+e.size&&(r[s].classes[o+1]="reset-size"+t.size),r[s].height*=i,r[s].depth*=i}return Fe.makeFragment(r)}var Rz=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],vbe=(n,e)=>{var t=e.havingSize(n.size);return IY(n.body,t,e)};kt({type:"sizing",names:Rz,props:{numArgs:0,allowedInText:!0},handler:(n,e)=>{var{breakOnTokenText:t,funcName:r,parser:i}=n,s=i.parseExpression(!1,t);return{type:"sizing",mode:i.mode,size:Rz.indexOf(r)+1,body:s}},htmlBuilder:vbe,mathmlBuilder:(n,e)=>{var t=e.havingSize(n.size),r=ja(n.body,t),i=new mt.MathNode("mstyle",r);return i.setAttribute("mathsize",Tt(t.sizeMultiplier)),i}});kt({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(n,e,t)=>{var{parser:r}=n,i=!1,s=!1,o=t[0]&&Qn(t[0],"ordgroup");if(o)for(var a="",l=0;l<o.body.length;++l){var c=o.body[l];if(a=c.text,a==="t")i=!0;else if(a==="b")s=!0;else{i=!1,s=!1;break}}else i=!0,s=!0;var u=e[0];return{type:"smash",mode:r.mode,body:u,smashHeight:i,smashDepth:s}},htmlBuilder:(n,e)=>{var t=Fe.makeSpan([],[Er(n.body,e)]);if(!n.smashHeight&&!n.smashDepth)return t;if(n.smashHeight&&(t.height=0,t.children))for(var r=0;r<t.children.length;r++)t.children[r].height=0;if(n.smashDepth&&(t.depth=0,t.children))for(var i=0;i<t.children.length;i++)t.children[i].depth=0;var s=Fe.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:t}]},e);return Fe.makeSpan(["mord"],[s],e)},mathmlBuilder:(n,e)=>{var t=new mt.MathNode("mpadded",[Jr(n.body,e)]);return n.smashHeight&&t.setAttribute("height","0px"),n.smashDepth&&t.setAttribute("depth","0px"),t}});kt({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(n,e,t){var{parser:r}=n,i=t[0],s=e[0];return{type:"sqrt",mode:r.mode,body:s,index:i}},htmlBuilder(n,e){var t=Er(n.body,e.havingCrampedStyle());t.height===0&&(t.height=e.fontMetrics().xHeight),t=Fe.wrapFragment(t,e);var r=e.fontMetrics(),i=r.defaultRuleThickness,s=i;e.style.id<fn.TEXT.id&&(s=e.fontMetrics().xHeight);var o=i+s/4,a=t.height+t.depth+o+i,{span:l,ruleWidth:c,advanceWidth:u}=Hd.sqrtImage(a,e),d=l.height-c;d>t.height+t.depth+o&&(o=(o+d-t.height-t.depth)/2);var h=l.height-t.height-o-c;t.style.paddingLeft=Tt(u);var f=Fe.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:t,wrapperClasses:["svg-align"]},{type:"kern",size:-(t.height+h)},{type:"elem",elem:l},{type:"kern",size:c}]},e);if(n.index){var m=e.havingStyle(fn.SCRIPTSCRIPT),g=Er(n.index,m,e),v=.6*(f.height-f.depth),y=Fe.makeVList({positionType:"shift",positionData:-v,children:[{type:"elem",elem:g}]},e),A=Fe.makeSpan(["root"],[y]);return Fe.makeSpan(["mord","sqrt"],[A,f],e)}else return Fe.makeSpan(["mord","sqrt"],[f],e)},mathmlBuilder(n,e){var{body:t,index:r}=n;return r?new mt.MathNode("mroot",[Jr(t,e),Jr(r,e)]):new mt.MathNode("msqrt",[Jr(t,e)])}});var Nz={display:fn.DISPLAY,text:fn.TEXT,script:fn.SCRIPT,scriptscript:fn.SCRIPTSCRIPT};kt({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(n,e){var{breakOnTokenText:t,funcName:r,parser:i}=n,s=i.parseExpression(!0,t),o=r.slice(1,r.length-5);return{type:"styling",mode:i.mode,style:o,body:s}},htmlBuilder(n,e){var t=Nz[n.style],r=e.havingStyle(t).withFont("");return IY(n.body,r,e)},mathmlBuilder(n,e){var t=Nz[n.style],r=e.havingStyle(t),i=ja(n.body,r),s=new mt.MathNode("mstyle",i),o={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},a=o[n.style];return s.setAttribute("scriptlevel",a[0]),s.setAttribute("displaystyle",a[1]),s}});var ybe=function(e,t){var r=e.base;if(r)if(r.type==="op"){var i=r.limits&&(t.style.size===fn.DISPLAY.size||r.alwaysHandleSupSub);return i?Nv:null}else if(r.type==="operatorname"){var s=r.alwaysHandleSupSub&&(t.style.size===fn.DISPLAY.size||r.limits);return s?xY:null}else{if(r.type==="accent")return an.isCharacterBox(r.base)?UD:null;if(r.type==="horizBrace"){var o=!e.sub;return o===r.isOver?CY:null}else return null}else return null};Xm({type:"supsub",htmlBuilder(n,e){var t=ybe(n,e);if(t)return t(n,e);var{base:r,sup:i,sub:s}=n,o=Er(r,e),a,l,c=e.fontMetrics(),u=0,d=0,h=r&&an.isCharacterBox(r);if(i){var f=e.havingStyle(e.style.sup());a=Er(i,f,e),h||(u=o.height-f.fontMetrics().supDrop*f.sizeMultiplier/e.sizeMultiplier)}if(s){var m=e.havingStyle(e.style.sub());l=Er(s,m,e),h||(d=o.depth+m.fontMetrics().subDrop*m.sizeMultiplier/e.sizeMultiplier)}var g;e.style===fn.DISPLAY?g=c.sup1:e.style.cramped?g=c.sup3:g=c.sup2;var v=e.sizeMultiplier,y=Tt(.5/c.ptPerEm/v),A=null;if(l){var C=n.base&&n.base.type==="op"&&n.base.name&&(n.base.name==="\\oiint"||n.base.name==="\\oiiint");(o instanceof ic||C)&&(A=Tt(-o.italic))}var T;if(a&&l){u=Math.max(u,g,a.depth+.25*c.xHeight),d=Math.max(d,c.sub2);var x=c.defaultRuleThickness,R=4*x;if(u-a.depth-(l.height-d)<R){d=R-(u-a.depth)+l.height;var N=.8*c.xHeight-(u-a.depth);N>0&&(u+=N,d-=N)}var M=[{type:"elem",elem:l,shift:d,marginRight:y,marginLeft:A},{type:"elem",elem:a,shift:-u,marginRight:y}];T=Fe.makeVList({positionType:"individualShift",children:M},e)}else if(l){d=Math.max(d,c.sub1,l.height-.8*c.xHeight);var O=[{type:"elem",elem:l,marginLeft:A,marginRight:y}];T=Fe.makeVList({positionType:"shift",positionData:d,children:O},e)}else if(a)u=Math.max(u,g,a.depth+.25*c.xHeight),T=Fe.makeVList({positionType:"shift",positionData:-u,children:[{type:"elem",elem:a,marginRight:y}]},e);else throw new Error("supsub must have either sup or sub.");var P=JN(o,"right")||"mord";return Fe.makeSpan([P],[o,Fe.makeSpan(["msupsub"],[T])],e)},mathmlBuilder(n,e){var t=!1,r,i;n.base&&n.base.type==="horizBrace"&&(i=!!n.sup,i===n.base.isOver&&(t=!0,r=n.base.isOver)),n.base&&(n.base.type==="op"||n.base.type==="operatorname")&&(n.base.parentIsSupSub=!0);var s=[Jr(n.base,e)];n.sub&&s.push(Jr(n.sub,e)),n.sup&&s.push(Jr(n.sup,e));var o;if(t)o=r?"mover":"munder";else if(n.sub)if(n.sup){var c=n.base;c&&c.type==="op"&&c.limits&&e.style===fn.DISPLAY||c&&c.type==="operatorname"&&c.alwaysHandleSupSub&&(e.style===fn.DISPLAY||c.limits)?o="munderover":o="msubsup"}else{var l=n.base;l&&l.type==="op"&&l.limits&&(e.style===fn.DISPLAY||l.alwaysHandleSupSub)||l&&l.type==="operatorname"&&l.alwaysHandleSupSub&&(l.limits||e.style===fn.DISPLAY)?o="munder":o="msub"}else{var a=n.base;a&&a.type==="op"&&a.limits&&(e.style===fn.DISPLAY||a.alwaysHandleSupSub)||a&&a.type==="operatorname"&&a.alwaysHandleSupSub&&(a.limits||e.style===fn.DISPLAY)?o="mover":o="msup"}return new mt.MathNode(o,s)}});Xm({type:"atom",htmlBuilder(n,e){return Fe.mathsym(n.text,n.mode,e,["m"+n.family])},mathmlBuilder(n,e){var t=new mt.MathNode("mo",[sc(n.text,n.mode)]);if(n.family==="bin"){var r=FD(n,e);r==="bold-italic"&&t.setAttribute("mathvariant",r)}else n.family==="punct"?t.setAttribute("separator","true"):(n.family==="open"||n.family==="close")&&t.setAttribute("stretchy","false");return t}});var bY={mi:"italic",mn:"normal",mtext:"normal"};Xm({type:"mathord",htmlBuilder(n,e){return Fe.makeOrd(n,e,"mathord")},mathmlBuilder(n,e){var t=new mt.MathNode("mi",[sc(n.text,n.mode,e)]),r=FD(n,e)||"italic";return r!==bY[t.type]&&t.setAttribute("mathvariant",r),t}});Xm({type:"textord",htmlBuilder(n,e){return Fe.makeOrd(n,e,"textord")},mathmlBuilder(n,e){var t=sc(n.text,n.mode,e),r=FD(n,e)||"normal",i;return n.mode==="text"?i=new mt.MathNode("mtext",[t]):/[0-9]/.test(n.text)?i=new mt.MathNode("mn",[t]):n.text==="\\prime"?i=new mt.MathNode("mo",[t]):i=new mt.MathNode("mi",[t]),r!==bY[i.type]&&i.setAttribute("mathvariant",r),i}});var eR={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},tR={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};Xm({type:"spacing",htmlBuilder(n,e){if(tR.hasOwnProperty(n.text)){var t=tR[n.text].className||"";if(n.mode==="text"){var r=Fe.makeOrd(n,e,"textord");return r.classes.push(t),r}else return Fe.makeSpan(["mspace",t],[Fe.mathsym(n.text,n.mode,e)],e)}else{if(eR.hasOwnProperty(n.text))return Fe.makeSpan(["mspace",eR[n.text]],[],e);throw new _t('Unknown type of space "'+n.text+'"')}},mathmlBuilder(n,e){var t;if(tR.hasOwnProperty(n.text))t=new mt.MathNode("mtext",[new mt.TextNode(" ")]);else{if(eR.hasOwnProperty(n.text))return new mt.MathNode("mspace");throw new _t('Unknown type of space "'+n.text+'"')}return t}});var Pz=()=>{var n=new mt.MathNode("mtd",[]);return n.setAttribute("width","50%"),n};Xm({type:"tag",mathmlBuilder(n,e){var t=new mt.MathNode("mtable",[new mt.MathNode("mtr",[Pz(),new mt.MathNode("mtd",[Hf(n.body,e)]),Pz(),new mt.MathNode("mtd",[Hf(n.tag,e)])])]);return t.setAttribute("width","100%"),t}});var Oz={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},Dz={"\\textbf":"textbf","\\textmd":"textmd"},_be={"\\textit":"textit","\\textup":"textup"},Lz=(n,e)=>{var t=n.font;if(t){if(Oz[t])return e.withTextFontFamily(Oz[t]);if(Dz[t])return e.withTextFontWeight(Dz[t]);if(t==="\\emph")return e.fontShape==="textit"?e.withTextFontShape("textup"):e.withTextFontShape("textit")}else return e;return e.withTextFontShape(_be[t])};kt({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(n,e){var{parser:t,funcName:r}=n,i=e[0];return{type:"text",mode:t.mode,body:rs(i),font:r}},htmlBuilder(n,e){var t=Lz(n,e),r=Ps(n.body,t,!0);return Fe.makeSpan(["mord","text"],r,t)},mathmlBuilder(n,e){var t=Lz(n,e);return Hf(n.body,t)}});kt({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(n,e){var{parser:t}=n;return{type:"underline",mode:t.mode,body:e[0]}},htmlBuilder(n,e){var t=Er(n.body,e),r=Fe.makeLineSpan("underline-line",e),i=e.fontMetrics().defaultRuleThickness,s=Fe.makeVList({positionType:"top",positionData:t.height,children:[{type:"kern",size:i},{type:"elem",elem:r},{type:"kern",size:3*i},{type:"elem",elem:t}]},e);return Fe.makeSpan(["mord","underline"],[s],e)},mathmlBuilder(n,e){var t=new mt.MathNode("mo",[new mt.TextNode("‾")]);t.setAttribute("stretchy","true");var r=new mt.MathNode("munder",[Jr(n.body,e),t]);return r.setAttribute("accentunder","true"),r}});kt({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(n,e){var{parser:t}=n;return{type:"vcenter",mode:t.mode,body:e[0]}},htmlBuilder(n,e){var t=Er(n.body,e),r=e.fontMetrics().axisHeight,i=.5*(t.height-r-(t.depth+r));return Fe.makeVList({positionType:"shift",positionData:i,children:[{type:"elem",elem:t}]},e)},mathmlBuilder(n,e){return new mt.MathNode("mpadded",[Jr(n.body,e)],["vcenter"])}});kt({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(n,e,t){throw new _t("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(n,e){for(var t=kz(n),r=[],i=e.havingStyle(e.style.text()),s=0;s<t.length;s++){var o=t[s];o==="~"&&(o="\\textasciitilde"),r.push(Fe.makeSymbol(o,"Typewriter-Regular",n.mode,i,["mord","texttt"]))}return Fe.makeSpan(["mord","text"].concat(i.sizingClasses(e)),Fe.tryCombineChars(r),i)},mathmlBuilder(n,e){var t=new mt.TextNode(kz(n)),r=new mt.MathNode("mtext",[t]);return r.setAttribute("mathvariant","monospace"),r}});var kz=n=>n.body.replace(/ /g,n.star?"␣":" "),gf=YK,MY=`[ \r
	]`,Sbe="\\\\[a-zA-Z@]+",Abe="\\\\[^\uD800-\uDFFF]",Ebe="("+Sbe+")"+MY+"*",Cbe=`\\\\(
|[ \r	]+
?)[ \r	]*`,ZN="[̀-ͯ]",wbe=new RegExp(ZN+"+$"),Tbe="("+MY+"+)|"+(Cbe+"|")+"([!-\\[\\]-‧‪-퟿豈-￿]"+(ZN+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(ZN+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+Ebe)+("|"+Abe+")");class Bz{constructor(e,t){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=t,this.tokenRegex=new RegExp(Tbe,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,t){this.catcodes[e]=t}lex(){var e=this.input,t=this.tokenRegex.lastIndex;if(t===e.length)return new Kl("EOF",new Ya(this,t,t));var r=this.tokenRegex.exec(e);if(r===null||r.index!==t)throw new _t("Unexpected character: '"+e[t]+"'",new Kl(e[t],new Ya(this,t,t+1)));var i=r[6]||r[3]||(r[2]?"\\ ":" ");if(this.catcodes[i]===14){var s=e.indexOf(`
`,this.tokenRegex.lastIndex);return s===-1?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=s+1,this.lex()}return new Kl(i,new Ya(this,t,this.tokenRegex.lastIndex))}}class xbe{constructor(e,t){e===void 0&&(e={}),t===void 0&&(t={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=t,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new _t("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var t in e)e.hasOwnProperty(t)&&(e[t]==null?delete this.current[t]:this.current[t]=e[t])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,t,r){if(r===void 0&&(r=!1),r){for(var i=0;i<this.undefStack.length;i++)delete this.undefStack[i][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=t)}else{var s=this.undefStack[this.undefStack.length-1];s&&!s.hasOwnProperty(e)&&(s[e]=this.current[e])}t==null?delete this.current[e]:this.current[e]=t}}var Ibe=yY;ie("\\noexpand",function(n){var e=n.popToken();return n.isExpandable(e.text)&&(e.noexpand=!0,e.treatAsRelax=!0),{tokens:[e],numArgs:0}});ie("\\expandafter",function(n){var e=n.popToken();return n.expandOnce(!0),{tokens:[e],numArgs:0}});ie("\\@firstoftwo",function(n){var e=n.consumeArgs(2);return{tokens:e[0],numArgs:0}});ie("\\@secondoftwo",function(n){var e=n.consumeArgs(2);return{tokens:e[1],numArgs:0}});ie("\\@ifnextchar",function(n){var e=n.consumeArgs(3);n.consumeSpaces();var t=n.future();return e[0].length===1&&e[0][0].text===t.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}});ie("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");ie("\\TextOrMath",function(n){var e=n.consumeArgs(2);return n.mode==="text"?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}});var Fz={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};ie("\\char",function(n){var e=n.popToken(),t,r="";if(e.text==="'")t=8,e=n.popToken();else if(e.text==='"')t=16,e=n.popToken();else if(e.text==="`")if(e=n.popToken(),e.text[0]==="\\")r=e.text.charCodeAt(1);else{if(e.text==="EOF")throw new _t("\\char` missing argument");r=e.text.charCodeAt(0)}else t=10;if(t){if(r=Fz[e.text],r==null||r>=t)throw new _t("Invalid base-"+t+" digit "+e.text);for(var i;(i=Fz[n.future().text])!=null&&i<t;)r*=t,r+=i,n.popToken()}return"\\@char{"+r+"}"});var QD=(n,e,t)=>{var r=n.consumeArg().tokens;if(r.length!==1)throw new _t("\\newcommand's first argument must be a macro name");var i=r[0].text,s=n.isDefined(i);if(s&&!e)throw new _t("\\newcommand{"+i+"} attempting to redefine "+(i+"; use \\renewcommand"));if(!s&&!t)throw new _t("\\renewcommand{"+i+"} when command "+i+" does not yet exist; use \\newcommand");var o=0;if(r=n.consumeArg().tokens,r.length===1&&r[0].text==="["){for(var a="",l=n.expandNextToken();l.text!=="]"&&l.text!=="EOF";)a+=l.text,l=n.expandNextToken();if(!a.match(/^\s*[0-9]+\s*$/))throw new _t("Invalid number of arguments: "+a);o=parseInt(a),r=n.consumeArg().tokens}return n.macros.set(i,{tokens:r,numArgs:o}),""};ie("\\newcommand",n=>QD(n,!1,!0));ie("\\renewcommand",n=>QD(n,!0,!1));ie("\\providecommand",n=>QD(n,!0,!0));ie("\\message",n=>{var e=n.consumeArgs(1)[0];return console.log(e.reverse().map(t=>t.text).join("")),""});ie("\\errmessage",n=>{var e=n.consumeArgs(1)[0];return console.error(e.reverse().map(t=>t.text).join("")),""});ie("\\show",n=>{var e=n.popToken(),t=e.text;return console.log(e,n.macros.get(t),gf[t],ti.math[t],ti.text[t]),""});ie("\\bgroup","{");ie("\\egroup","}");ie("~","\\nobreakspace");ie("\\lq","`");ie("\\rq","'");ie("\\aa","\\r a");ie("\\AA","\\r A");ie("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`©}");ie("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");ie("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`®}");ie("ℬ","\\mathscr{B}");ie("ℰ","\\mathscr{E}");ie("ℱ","\\mathscr{F}");ie("ℋ","\\mathscr{H}");ie("ℐ","\\mathscr{I}");ie("ℒ","\\mathscr{L}");ie("ℳ","\\mathscr{M}");ie("ℛ","\\mathscr{R}");ie("ℭ","\\mathfrak{C}");ie("ℌ","\\mathfrak{H}");ie("ℨ","\\mathfrak{Z}");ie("\\Bbbk","\\Bbb{k}");ie("·","\\cdotp");ie("\\llap","\\mathllap{\\textrm{#1}}");ie("\\rlap","\\mathrlap{\\textrm{#1}}");ie("\\clap","\\mathclap{\\textrm{#1}}");ie("\\mathstrut","\\vphantom{(}");ie("\\underbar","\\underline{\\text{#1}}");ie("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');ie("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`≠}}");ie("\\ne","\\neq");ie("≠","\\neq");ie("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`∉}}");ie("∉","\\notin");ie("≘","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`≘}}");ie("≙","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`≘}}");ie("≚","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`≚}}");ie("≛","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`≛}}");ie("≝","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`≝}}");ie("≞","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`≞}}");ie("≟","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`≟}}");ie("⟂","\\perp");ie("‼","\\mathclose{!\\mkern-0.8mu!}");ie("∌","\\notni");ie("⌜","\\ulcorner");ie("⌝","\\urcorner");ie("⌞","\\llcorner");ie("⌟","\\lrcorner");ie("©","\\copyright");ie("®","\\textregistered");ie("️","\\textregistered");ie("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');ie("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');ie("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');ie("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');ie("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");ie("⋮","\\vdots");ie("\\varGamma","\\mathit{\\Gamma}");ie("\\varDelta","\\mathit{\\Delta}");ie("\\varTheta","\\mathit{\\Theta}");ie("\\varLambda","\\mathit{\\Lambda}");ie("\\varXi","\\mathit{\\Xi}");ie("\\varPi","\\mathit{\\Pi}");ie("\\varSigma","\\mathit{\\Sigma}");ie("\\varUpsilon","\\mathit{\\Upsilon}");ie("\\varPhi","\\mathit{\\Phi}");ie("\\varPsi","\\mathit{\\Psi}");ie("\\varOmega","\\mathit{\\Omega}");ie("\\substack","\\begin{subarray}{c}#1\\end{subarray}");ie("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");ie("\\boxed","\\fbox{$\\displaystyle{#1}$}");ie("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");ie("\\implies","\\DOTSB\\;\\Longrightarrow\\;");ie("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");ie("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");ie("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var zz={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};ie("\\dots",function(n){var e="\\dotso",t=n.expandAfterFuture().text;return t in zz?e=zz[t]:(t.slice(0,4)==="\\not"||t in ti.math&&an.contains(["bin","rel"],ti.math[t].group))&&(e="\\dotsb"),e});var JD={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};ie("\\dotso",function(n){var e=n.future().text;return e in JD?"\\ldots\\,":"\\ldots"});ie("\\dotsc",function(n){var e=n.future().text;return e in JD&&e!==","?"\\ldots\\,":"\\ldots"});ie("\\cdots",function(n){var e=n.future().text;return e in JD?"\\@cdots\\,":"\\@cdots"});ie("\\dotsb","\\cdots");ie("\\dotsm","\\cdots");ie("\\dotsi","\\!\\cdots");ie("\\dotsx","\\ldots\\,");ie("\\DOTSI","\\relax");ie("\\DOTSB","\\relax");ie("\\DOTSX","\\relax");ie("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");ie("\\,","\\tmspace+{3mu}{.1667em}");ie("\\thinspace","\\,");ie("\\>","\\mskip{4mu}");ie("\\:","\\tmspace+{4mu}{.2222em}");ie("\\medspace","\\:");ie("\\;","\\tmspace+{5mu}{.2777em}");ie("\\thickspace","\\;");ie("\\!","\\tmspace-{3mu}{.1667em}");ie("\\negthinspace","\\!");ie("\\negmedspace","\\tmspace-{4mu}{.2222em}");ie("\\negthickspace","\\tmspace-{5mu}{.277em}");ie("\\enspace","\\kern.5em ");ie("\\enskip","\\hskip.5em\\relax");ie("\\quad","\\hskip1em\\relax");ie("\\qquad","\\hskip2em\\relax");ie("\\tag","\\@ifstar\\tag@literal\\tag@paren");ie("\\tag@paren","\\tag@literal{({#1})}");ie("\\tag@literal",n=>{if(n.macros.get("\\df@tag"))throw new _t("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});ie("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");ie("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");ie("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");ie("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");ie("\\newline","\\\\\\relax");ie("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var RY=Tt(bu["Main-Regular"]["T".charCodeAt(0)][1]-.7*bu["Main-Regular"]["A".charCodeAt(0)][1]);ie("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+RY+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");ie("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+RY+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");ie("\\hspace","\\@ifstar\\@hspacer\\@hspace");ie("\\@hspace","\\hskip #1\\relax");ie("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");ie("\\ordinarycolon",":");ie("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");ie("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');ie("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');ie("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');ie("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');ie("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');ie("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');ie("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');ie("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');ie("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');ie("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');ie("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');ie("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');ie("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');ie("∷","\\dblcolon");ie("∹","\\eqcolon");ie("≔","\\coloneqq");ie("≕","\\eqqcolon");ie("⩴","\\Coloneqq");ie("\\ratio","\\vcentcolon");ie("\\coloncolon","\\dblcolon");ie("\\colonequals","\\coloneqq");ie("\\coloncolonequals","\\Coloneqq");ie("\\equalscolon","\\eqqcolon");ie("\\equalscoloncolon","\\Eqqcolon");ie("\\colonminus","\\coloneq");ie("\\coloncolonminus","\\Coloneq");ie("\\minuscolon","\\eqcolon");ie("\\minuscoloncolon","\\Eqcolon");ie("\\coloncolonapprox","\\Colonapprox");ie("\\coloncolonsim","\\Colonsim");ie("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");ie("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");ie("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");ie("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");ie("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`∌}}");ie("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");ie("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");ie("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");ie("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");ie("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");ie("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");ie("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");ie("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");ie("\\gvertneqq","\\html@mathml{\\@gvertneqq}{≩}");ie("\\lvertneqq","\\html@mathml{\\@lvertneqq}{≨}");ie("\\ngeqq","\\html@mathml{\\@ngeqq}{≱}");ie("\\ngeqslant","\\html@mathml{\\@ngeqslant}{≱}");ie("\\nleqq","\\html@mathml{\\@nleqq}{≰}");ie("\\nleqslant","\\html@mathml{\\@nleqslant}{≰}");ie("\\nshortmid","\\html@mathml{\\@nshortmid}{∤}");ie("\\nshortparallel","\\html@mathml{\\@nshortparallel}{∦}");ie("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{⊈}");ie("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{⊉}");ie("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{⊊}");ie("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{⫋}");ie("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{⊋}");ie("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{⫌}");ie("\\imath","\\html@mathml{\\@imath}{ı}");ie("\\jmath","\\html@mathml{\\@jmath}{ȷ}");ie("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`⟦}}");ie("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`⟧}}");ie("⟦","\\llbracket");ie("⟧","\\rrbracket");ie("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`⦃}}");ie("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`⦄}}");ie("⦃","\\lBrace");ie("⦄","\\rBrace");ie("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`⦵}}");ie("⦵","\\minuso");ie("\\darr","\\downarrow");ie("\\dArr","\\Downarrow");ie("\\Darr","\\Downarrow");ie("\\lang","\\langle");ie("\\rang","\\rangle");ie("\\uarr","\\uparrow");ie("\\uArr","\\Uparrow");ie("\\Uarr","\\Uparrow");ie("\\N","\\mathbb{N}");ie("\\R","\\mathbb{R}");ie("\\Z","\\mathbb{Z}");ie("\\alef","\\aleph");ie("\\alefsym","\\aleph");ie("\\Alpha","\\mathrm{A}");ie("\\Beta","\\mathrm{B}");ie("\\bull","\\bullet");ie("\\Chi","\\mathrm{X}");ie("\\clubs","\\clubsuit");ie("\\cnums","\\mathbb{C}");ie("\\Complex","\\mathbb{C}");ie("\\Dagger","\\ddagger");ie("\\diamonds","\\diamondsuit");ie("\\empty","\\emptyset");ie("\\Epsilon","\\mathrm{E}");ie("\\Eta","\\mathrm{H}");ie("\\exist","\\exists");ie("\\harr","\\leftrightarrow");ie("\\hArr","\\Leftrightarrow");ie("\\Harr","\\Leftrightarrow");ie("\\hearts","\\heartsuit");ie("\\image","\\Im");ie("\\infin","\\infty");ie("\\Iota","\\mathrm{I}");ie("\\isin","\\in");ie("\\Kappa","\\mathrm{K}");ie("\\larr","\\leftarrow");ie("\\lArr","\\Leftarrow");ie("\\Larr","\\Leftarrow");ie("\\lrarr","\\leftrightarrow");ie("\\lrArr","\\Leftrightarrow");ie("\\Lrarr","\\Leftrightarrow");ie("\\Mu","\\mathrm{M}");ie("\\natnums","\\mathbb{N}");ie("\\Nu","\\mathrm{N}");ie("\\Omicron","\\mathrm{O}");ie("\\plusmn","\\pm");ie("\\rarr","\\rightarrow");ie("\\rArr","\\Rightarrow");ie("\\Rarr","\\Rightarrow");ie("\\real","\\Re");ie("\\reals","\\mathbb{R}");ie("\\Reals","\\mathbb{R}");ie("\\Rho","\\mathrm{P}");ie("\\sdot","\\cdot");ie("\\sect","\\S");ie("\\spades","\\spadesuit");ie("\\sub","\\subset");ie("\\sube","\\subseteq");ie("\\supe","\\supseteq");ie("\\Tau","\\mathrm{T}");ie("\\thetasym","\\vartheta");ie("\\weierp","\\wp");ie("\\Zeta","\\mathrm{Z}");ie("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");ie("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");ie("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");ie("\\bra","\\mathinner{\\langle{#1}|}");ie("\\ket","\\mathinner{|{#1}\\rangle}");ie("\\braket","\\mathinner{\\langle{#1}\\rangle}");ie("\\Bra","\\left\\langle#1\\right|");ie("\\Ket","\\left|#1\\right\\rangle");var NY=n=>e=>{var t=e.consumeArg().tokens,r=e.consumeArg().tokens,i=e.consumeArg().tokens,s=e.consumeArg().tokens,o=e.macros.get("|"),a=e.macros.get("\\|");e.macros.beginGroup();var l=d=>h=>{n&&(h.macros.set("|",o),i.length&&h.macros.set("\\|",a));var f=d;if(!d&&i.length){var m=h.future();m.text==="|"&&(h.popToken(),f=!0)}return{tokens:f?i:r,numArgs:0}};e.macros.set("|",l(!1)),i.length&&e.macros.set("\\|",l(!0));var c=e.consumeArg().tokens,u=e.expandTokens([...s,...c,...t]);return e.macros.endGroup(),{tokens:u.reverse(),numArgs:0}};ie("\\bra@ket",NY(!1));ie("\\bra@set",NY(!0));ie("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");ie("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");ie("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");ie("\\angln","{\\angl n}");ie("\\blue","\\textcolor{##6495ed}{#1}");ie("\\orange","\\textcolor{##ffa500}{#1}");ie("\\pink","\\textcolor{##ff00af}{#1}");ie("\\red","\\textcolor{##df0030}{#1}");ie("\\green","\\textcolor{##28ae7b}{#1}");ie("\\gray","\\textcolor{gray}{#1}");ie("\\purple","\\textcolor{##9d38bd}{#1}");ie("\\blueA","\\textcolor{##ccfaff}{#1}");ie("\\blueB","\\textcolor{##80f6ff}{#1}");ie("\\blueC","\\textcolor{##63d9ea}{#1}");ie("\\blueD","\\textcolor{##11accd}{#1}");ie("\\blueE","\\textcolor{##0c7f99}{#1}");ie("\\tealA","\\textcolor{##94fff5}{#1}");ie("\\tealB","\\textcolor{##26edd5}{#1}");ie("\\tealC","\\textcolor{##01d1c1}{#1}");ie("\\tealD","\\textcolor{##01a995}{#1}");ie("\\tealE","\\textcolor{##208170}{#1}");ie("\\greenA","\\textcolor{##b6ffb0}{#1}");ie("\\greenB","\\textcolor{##8af281}{#1}");ie("\\greenC","\\textcolor{##74cf70}{#1}");ie("\\greenD","\\textcolor{##1fab54}{#1}");ie("\\greenE","\\textcolor{##0d923f}{#1}");ie("\\goldA","\\textcolor{##ffd0a9}{#1}");ie("\\goldB","\\textcolor{##ffbb71}{#1}");ie("\\goldC","\\textcolor{##ff9c39}{#1}");ie("\\goldD","\\textcolor{##e07d10}{#1}");ie("\\goldE","\\textcolor{##a75a05}{#1}");ie("\\redA","\\textcolor{##fca9a9}{#1}");ie("\\redB","\\textcolor{##ff8482}{#1}");ie("\\redC","\\textcolor{##f9685d}{#1}");ie("\\redD","\\textcolor{##e84d39}{#1}");ie("\\redE","\\textcolor{##bc2612}{#1}");ie("\\maroonA","\\textcolor{##ffbde0}{#1}");ie("\\maroonB","\\textcolor{##ff92c6}{#1}");ie("\\maroonC","\\textcolor{##ed5fa6}{#1}");ie("\\maroonD","\\textcolor{##ca337c}{#1}");ie("\\maroonE","\\textcolor{##9e034e}{#1}");ie("\\purpleA","\\textcolor{##ddd7ff}{#1}");ie("\\purpleB","\\textcolor{##c6b9fc}{#1}");ie("\\purpleC","\\textcolor{##aa87ff}{#1}");ie("\\purpleD","\\textcolor{##7854ab}{#1}");ie("\\purpleE","\\textcolor{##543b78}{#1}");ie("\\mintA","\\textcolor{##f5f9e8}{#1}");ie("\\mintB","\\textcolor{##edf2df}{#1}");ie("\\mintC","\\textcolor{##e0e5cc}{#1}");ie("\\grayA","\\textcolor{##f6f7f7}{#1}");ie("\\grayB","\\textcolor{##f0f1f2}{#1}");ie("\\grayC","\\textcolor{##e3e5e6}{#1}");ie("\\grayD","\\textcolor{##d6d8da}{#1}");ie("\\grayE","\\textcolor{##babec2}{#1}");ie("\\grayF","\\textcolor{##888d93}{#1}");ie("\\grayG","\\textcolor{##626569}{#1}");ie("\\grayH","\\textcolor{##3b3e40}{#1}");ie("\\grayI","\\textcolor{##21242c}{#1}");ie("\\kaBlue","\\textcolor{##314453}{#1}");ie("\\kaGreen","\\textcolor{##71B307}{#1}");var PY={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class bbe{constructor(e,t,r){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=t,this.expansionCount=0,this.feed(e),this.macros=new xbe(Ibe,t.macros),this.mode=r,this.stack=[]}feed(e){this.lexer=new Bz(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var t,r,i;if(e){if(this.consumeSpaces(),this.future().text!=="[")return null;t=this.popToken(),{tokens:i,end:r}=this.consumeArg(["]"])}else({tokens:i,start:t,end:r}=this.consumeArg());return this.pushToken(new Kl("EOF",r.loc)),this.pushTokens(i),t.range(r,"")}consumeSpaces(){for(;;){var e=this.future();if(e.text===" ")this.stack.pop();else break}}consumeArg(e){var t=[],r=e&&e.length>0;r||this.consumeSpaces();var i=this.future(),s,o=0,a=0;do{if(s=this.popToken(),t.push(s),s.text==="{")++o;else if(s.text==="}"){if(--o,o===-1)throw new _t("Extra }",s)}else if(s.text==="EOF")throw new _t("Unexpected end of input in a macro argument, expected '"+(e&&r?e[a]:"}")+"'",s);if(e&&r)if((o===0||o===1&&e[a]==="{")&&s.text===e[a]){if(++a,a===e.length){t.splice(-a,a);break}}else a=0}while(o!==0||r);return i.text==="{"&&t[t.length-1].text==="}"&&(t.pop(),t.shift()),t.reverse(),{tokens:t,start:i,end:s}}consumeArgs(e,t){if(t){if(t.length!==e+1)throw new _t("The length of delimiters doesn't match the number of args!");for(var r=t[0],i=0;i<r.length;i++){var s=this.popToken();if(r[i]!==s.text)throw new _t("Use of the macro doesn't match its definition",s)}}for(var o=[],a=0;a<e;a++)o.push(this.consumeArg(t&&t[a+1]).tokens);return o}countExpansion(e){if(this.expansionCount+=e,this.expansionCount>this.settings.maxExpand)throw new _t("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(e){var t=this.popToken(),r=t.text,i=t.noexpand?null:this._getExpansion(r);if(i==null||e&&i.unexpandable){if(e&&i==null&&r[0]==="\\"&&!this.isDefined(r))throw new _t("Undefined control sequence: "+r);return this.pushToken(t),!1}this.countExpansion(1);var s=i.tokens,o=this.consumeArgs(i.numArgs,i.delimiters);if(i.numArgs){s=s.slice();for(var a=s.length-1;a>=0;--a){var l=s[a];if(l.text==="#"){if(a===0)throw new _t("Incomplete placeholder at end of macro body",l);if(l=s[--a],l.text==="#")s.splice(a+1,1);else if(/^[1-9]$/.test(l.text))s.splice(a,2,...o[+l.text-1]);else throw new _t("Not a valid argument number",l)}}}return this.pushTokens(s),s.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new Kl(e)]):void 0}expandTokens(e){var t=[],r=this.stack.length;for(this.pushTokens(e);this.stack.length>r;)if(this.expandOnce(!0)===!1){var i=this.stack.pop();i.treatAsRelax&&(i.noexpand=!1,i.treatAsRelax=!1),t.push(i)}return this.countExpansion(t.length),t}expandMacroAsText(e){var t=this.expandMacro(e);return t&&t.map(r=>r.text).join("")}_getExpansion(e){var t=this.macros.get(e);if(t==null)return t;if(e.length===1){var r=this.lexer.catcodes[e];if(r!=null&&r!==13)return}var i=typeof t=="function"?t(this):t;if(typeof i=="string"){var s=0;if(i.indexOf("#")!==-1)for(var o=i.replace(/##/g,"");o.indexOf("#"+(s+1))!==-1;)++s;for(var a=new Bz(i,this.settings),l=[],c=a.lex();c.text!=="EOF";)l.push(c),c=a.lex();l.reverse();var u={tokens:l,numArgs:s};return u}return i}isDefined(e){return this.macros.has(e)||gf.hasOwnProperty(e)||ti.math.hasOwnProperty(e)||ti.text.hasOwnProperty(e)||PY.hasOwnProperty(e)}isExpandable(e){var t=this.macros.get(e);return t!=null?typeof t=="string"||typeof t=="function"||!t.unexpandable:gf.hasOwnProperty(e)&&!gf[e].primitive}}var Uz=/^[₊₋₌₍₎₀₁₂₃₄₅₆₇₈₉ₐₑₕᵢⱼₖₗₘₙₒₚᵣₛₜᵤᵥₓᵦᵧᵨᵩᵪ]/,qC=Object.freeze({"₊":"+","₋":"-","₌":"=","₍":"(","₎":")","₀":"0","₁":"1","₂":"2","₃":"3","₄":"4","₅":"5","₆":"6","₇":"7","₈":"8","₉":"9","ₐ":"a","ₑ":"e","ₕ":"h","ᵢ":"i","ⱼ":"j","ₖ":"k","ₗ":"l","ₘ":"m","ₙ":"n","ₒ":"o","ₚ":"p","ᵣ":"r","ₛ":"s","ₜ":"t","ᵤ":"u","ᵥ":"v","ₓ":"x","ᵦ":"β","ᵧ":"γ","ᵨ":"ρ","ᵩ":"ϕ","ᵪ":"χ","⁺":"+","⁻":"-","⁼":"=","⁽":"(","⁾":")","⁰":"0","¹":"1","²":"2","³":"3","⁴":"4","⁵":"5","⁶":"6","⁷":"7","⁸":"8","⁹":"9","ᴬ":"A","ᴮ":"B","ᴰ":"D","ᴱ":"E","ᴳ":"G","ᴴ":"H","ᴵ":"I","ᴶ":"J","ᴷ":"K","ᴸ":"L","ᴹ":"M","ᴺ":"N","ᴼ":"O","ᴾ":"P","ᴿ":"R","ᵀ":"T","ᵁ":"U","ⱽ":"V","ᵂ":"W","ᵃ":"a","ᵇ":"b","ᶜ":"c","ᵈ":"d","ᵉ":"e","ᶠ":"f","ᵍ":"g",ʰ:"h","ⁱ":"i",ʲ:"j","ᵏ":"k",ˡ:"l","ᵐ":"m",ⁿ:"n","ᵒ":"o","ᵖ":"p",ʳ:"r",ˢ:"s","ᵗ":"t","ᵘ":"u","ᵛ":"v",ʷ:"w",ˣ:"x",ʸ:"y","ᶻ":"z","ᵝ":"β","ᵞ":"γ","ᵟ":"δ","ᵠ":"ϕ","ᵡ":"χ","ᶿ":"θ"}),nR={"́":{text:"\\'",math:"\\acute"},"̀":{text:"\\`",math:"\\grave"},"̈":{text:'\\"',math:"\\ddot"},"̃":{text:"\\~",math:"\\tilde"},"̄":{text:"\\=",math:"\\bar"},"̆":{text:"\\u",math:"\\breve"},"̌":{text:"\\v",math:"\\check"},"̂":{text:"\\^",math:"\\hat"},"̇":{text:"\\.",math:"\\dot"},"̊":{text:"\\r",math:"\\mathring"},"̋":{text:"\\H"},"̧":{text:"\\c"}},jz={á:"á",à:"à",ä:"ä",ǟ:"ǟ",ã:"ã",ā:"ā",ă:"ă",ắ:"ắ",ằ:"ằ",ẵ:"ẵ",ǎ:"ǎ",â:"â",ấ:"ấ",ầ:"ầ",ẫ:"ẫ",ȧ:"ȧ",ǡ:"ǡ",å:"å",ǻ:"ǻ",ḃ:"ḃ",ć:"ć",ḉ:"ḉ",č:"č",ĉ:"ĉ",ċ:"ċ",ç:"ç",ď:"ď",ḋ:"ḋ",ḑ:"ḑ",é:"é",è:"è",ë:"ë",ẽ:"ẽ",ē:"ē",ḗ:"ḗ",ḕ:"ḕ",ĕ:"ĕ",ḝ:"ḝ",ě:"ě",ê:"ê",ế:"ế",ề:"ề",ễ:"ễ",ė:"ė",ȩ:"ȩ",ḟ:"ḟ",ǵ:"ǵ",ḡ:"ḡ",ğ:"ğ",ǧ:"ǧ",ĝ:"ĝ",ġ:"ġ",ģ:"ģ",ḧ:"ḧ",ȟ:"ȟ",ĥ:"ĥ",ḣ:"ḣ",ḩ:"ḩ",í:"í",ì:"ì",ï:"ï",ḯ:"ḯ",ĩ:"ĩ",ī:"ī",ĭ:"ĭ",ǐ:"ǐ",î:"î",ǰ:"ǰ",ĵ:"ĵ",ḱ:"ḱ",ǩ:"ǩ",ķ:"ķ",ĺ:"ĺ",ľ:"ľ",ļ:"ļ",ḿ:"ḿ",ṁ:"ṁ",ń:"ń",ǹ:"ǹ",ñ:"ñ",ň:"ň",ṅ:"ṅ",ņ:"ņ",ó:"ó",ò:"ò",ö:"ö",ȫ:"ȫ",õ:"õ",ṍ:"ṍ",ṏ:"ṏ",ȭ:"ȭ",ō:"ō",ṓ:"ṓ",ṑ:"ṑ",ŏ:"ŏ",ǒ:"ǒ",ô:"ô",ố:"ố",ồ:"ồ",ỗ:"ỗ",ȯ:"ȯ",ȱ:"ȱ",ő:"ő",ṕ:"ṕ",ṗ:"ṗ",ŕ:"ŕ",ř:"ř",ṙ:"ṙ",ŗ:"ŗ",ś:"ś",ṥ:"ṥ",š:"š",ṧ:"ṧ",ŝ:"ŝ",ṡ:"ṡ",ş:"ş",ẗ:"ẗ",ť:"ť",ṫ:"ṫ",ţ:"ţ",ú:"ú",ù:"ù",ü:"ü",ǘ:"ǘ",ǜ:"ǜ",ǖ:"ǖ",ǚ:"ǚ",ũ:"ũ",ṹ:"ṹ",ū:"ū",ṻ:"ṻ",ŭ:"ŭ",ǔ:"ǔ",û:"û",ů:"ů",ű:"ű",ṽ:"ṽ",ẃ:"ẃ",ẁ:"ẁ",ẅ:"ẅ",ŵ:"ŵ",ẇ:"ẇ",ẘ:"ẘ",ẍ:"ẍ",ẋ:"ẋ",ý:"ý",ỳ:"ỳ",ÿ:"ÿ",ỹ:"ỹ",ȳ:"ȳ",ŷ:"ŷ",ẏ:"ẏ",ẙ:"ẙ",ź:"ź",ž:"ž",ẑ:"ẑ",ż:"ż",Á:"Á",À:"À",Ä:"Ä",Ǟ:"Ǟ",Ã:"Ã",Ā:"Ā",Ă:"Ă",Ắ:"Ắ",Ằ:"Ằ",Ẵ:"Ẵ",Ǎ:"Ǎ",Â:"Â",Ấ:"Ấ",Ầ:"Ầ",Ẫ:"Ẫ",Ȧ:"Ȧ",Ǡ:"Ǡ",Å:"Å",Ǻ:"Ǻ",Ḃ:"Ḃ",Ć:"Ć",Ḉ:"Ḉ",Č:"Č",Ĉ:"Ĉ",Ċ:"Ċ",Ç:"Ç",Ď:"Ď",Ḋ:"Ḋ",Ḑ:"Ḑ",É:"É",È:"È",Ë:"Ë",Ẽ:"Ẽ",Ē:"Ē",Ḗ:"Ḗ",Ḕ:"Ḕ",Ĕ:"Ĕ",Ḝ:"Ḝ",Ě:"Ě",Ê:"Ê",Ế:"Ế",Ề:"Ề",Ễ:"Ễ",Ė:"Ė",Ȩ:"Ȩ",Ḟ:"Ḟ",Ǵ:"Ǵ",Ḡ:"Ḡ",Ğ:"Ğ",Ǧ:"Ǧ",Ĝ:"Ĝ",Ġ:"Ġ",Ģ:"Ģ",Ḧ:"Ḧ",Ȟ:"Ȟ",Ĥ:"Ĥ",Ḣ:"Ḣ",Ḩ:"Ḩ",Í:"Í",Ì:"Ì",Ï:"Ï",Ḯ:"Ḯ",Ĩ:"Ĩ",Ī:"Ī",Ĭ:"Ĭ",Ǐ:"Ǐ",Î:"Î",İ:"İ",Ĵ:"Ĵ",Ḱ:"Ḱ",Ǩ:"Ǩ",Ķ:"Ķ",Ĺ:"Ĺ",Ľ:"Ľ",Ļ:"Ļ",Ḿ:"Ḿ",Ṁ:"Ṁ",Ń:"Ń",Ǹ:"Ǹ",Ñ:"Ñ",Ň:"Ň",Ṅ:"Ṅ",Ņ:"Ņ",Ó:"Ó",Ò:"Ò",Ö:"Ö",Ȫ:"Ȫ",Õ:"Õ",Ṍ:"Ṍ",Ṏ:"Ṏ",Ȭ:"Ȭ",Ō:"Ō",Ṓ:"Ṓ",Ṑ:"Ṑ",Ŏ:"Ŏ",Ǒ:"Ǒ",Ô:"Ô",Ố:"Ố",Ồ:"Ồ",Ỗ:"Ỗ",Ȯ:"Ȯ",Ȱ:"Ȱ",Ő:"Ő",Ṕ:"Ṕ",Ṗ:"Ṗ",Ŕ:"Ŕ",Ř:"Ř",Ṙ:"Ṙ",Ŗ:"Ŗ",Ś:"Ś",Ṥ:"Ṥ",Š:"Š",Ṧ:"Ṧ",Ŝ:"Ŝ",Ṡ:"Ṡ",Ş:"Ş",Ť:"Ť",Ṫ:"Ṫ",Ţ:"Ţ",Ú:"Ú",Ù:"Ù",Ü:"Ü",Ǘ:"Ǘ",Ǜ:"Ǜ",Ǖ:"Ǖ",Ǚ:"Ǚ",Ũ:"Ũ",Ṹ:"Ṹ",Ū:"Ū",Ṻ:"Ṻ",Ŭ:"Ŭ",Ǔ:"Ǔ",Û:"Û",Ů:"Ů",Ű:"Ű",Ṽ:"Ṽ",Ẃ:"Ẃ",Ẁ:"Ẁ",Ẅ:"Ẅ",Ŵ:"Ŵ",Ẇ:"Ẇ",Ẍ:"Ẍ",Ẋ:"Ẋ",Ý:"Ý",Ỳ:"Ỳ",Ÿ:"Ÿ",Ỹ:"Ỹ",Ȳ:"Ȳ",Ŷ:"Ŷ",Ẏ:"Ẏ",Ź:"Ź",Ž:"Ž",Ẑ:"Ẑ",Ż:"Ż",ά:"ά",ὰ:"ὰ",ᾱ:"ᾱ",ᾰ:"ᾰ",έ:"έ",ὲ:"ὲ",ή:"ή",ὴ:"ὴ",ί:"ί",ὶ:"ὶ",ϊ:"ϊ",ΐ:"ΐ",ῒ:"ῒ",ῑ:"ῑ",ῐ:"ῐ",ό:"ό",ὸ:"ὸ",ύ:"ύ",ὺ:"ὺ",ϋ:"ϋ",ΰ:"ΰ",ῢ:"ῢ",ῡ:"ῡ",ῠ:"ῠ",ώ:"ώ",ὼ:"ὼ",Ύ:"Ύ",Ὺ:"Ὺ",Ϋ:"Ϋ",Ῡ:"Ῡ",Ῠ:"Ῠ",Ώ:"Ώ",Ὼ:"Ὼ"};class sb{constructor(e,t){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new bbe(e,t,this.mode),this.settings=t,this.leftrightDepth=0}expect(e,t){if(t===void 0&&(t=!0),this.fetch().text!==e)throw new _t("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());t&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var t=this.nextToken;this.consume(),this.gullet.pushToken(new Kl("}")),this.gullet.pushTokens(e);var r=this.parseExpression(!1);return this.expect("}"),this.nextToken=t,r}parseExpression(e,t){for(var r=[];;){this.mode==="math"&&this.consumeSpaces();var i=this.fetch();if(sb.endOfExpression.indexOf(i.text)!==-1||t&&i.text===t||e&&gf[i.text]&&gf[i.text].infix)break;var s=this.parseAtom(t);if(s){if(s.type==="internal")continue}else break;r.push(s)}return this.mode==="text"&&this.formLigatures(r),this.handleInfixNodes(r)}handleInfixNodes(e){for(var t=-1,r,i=0;i<e.length;i++)if(e[i].type==="infix"){if(t!==-1)throw new _t("only one infix operator per group",e[i].token);t=i,r=e[i].replaceWith}if(t!==-1&&r){var s,o,a=e.slice(0,t),l=e.slice(t+1);a.length===1&&a[0].type==="ordgroup"?s=a[0]:s={type:"ordgroup",mode:this.mode,body:a},l.length===1&&l[0].type==="ordgroup"?o=l[0]:o={type:"ordgroup",mode:this.mode,body:l};var c;return r==="\\\\abovefrac"?c=this.callFunction(r,[s,e[t],o],[]):c=this.callFunction(r,[s,o],[]),[c]}else return e}handleSupSubscript(e){var t=this.fetch(),r=t.text;this.consume(),this.consumeSpaces();var i=this.parseGroup(e);if(!i)throw new _t("Expected group after '"+r+"'",t);return i}formatUnsupportedCmd(e){for(var t=[],r=0;r<e.length;r++)t.push({type:"textord",mode:"text",text:e[r]});var i={type:"text",mode:this.mode,body:t},s={type:"color",mode:this.mode,color:this.settings.errorColor,body:[i]};return s}parseAtom(e){var t=this.parseGroup("atom",e);if(this.mode==="text")return t;for(var r,i;;){this.consumeSpaces();var s=this.fetch();if(s.text==="\\limits"||s.text==="\\nolimits"){if(t&&t.type==="op"){var o=s.text==="\\limits";t.limits=o,t.alwaysHandleSupSub=!0}else if(t&&t.type==="operatorname")t.alwaysHandleSupSub&&(t.limits=s.text==="\\limits");else throw new _t("Limit controls must follow a math operator",s);this.consume()}else if(s.text==="^"){if(r)throw new _t("Double superscript",s);r=this.handleSupSubscript("superscript")}else if(s.text==="_"){if(i)throw new _t("Double subscript",s);i=this.handleSupSubscript("subscript")}else if(s.text==="'"){if(r)throw new _t("Double superscript",s);var a={type:"textord",mode:this.mode,text:"\\prime"},l=[a];for(this.consume();this.fetch().text==="'";)l.push(a),this.consume();this.fetch().text==="^"&&l.push(this.handleSupSubscript("superscript")),r={type:"ordgroup",mode:this.mode,body:l}}else if(qC[s.text]){var c=Uz.test(s.text),u=[];for(u.push(new Kl(qC[s.text])),this.consume();;){var d=this.fetch().text;if(!qC[d]||Uz.test(d)!==c)break;u.unshift(new Kl(qC[d])),this.consume()}var h=this.subparse(u);c?i={type:"ordgroup",mode:"math",body:h}:r={type:"ordgroup",mode:"math",body:h}}else break}return r||i?{type:"supsub",mode:this.mode,base:t,sup:r,sub:i}:t}parseFunction(e,t){var r=this.fetch(),i=r.text,s=gf[i];if(!s)return null;if(this.consume(),t&&t!=="atom"&&!s.allowedInArgument)throw new _t("Got function '"+i+"' with no arguments"+(t?" as "+t:""),r);if(this.mode==="text"&&!s.allowedInText)throw new _t("Can't use function '"+i+"' in text mode",r);if(this.mode==="math"&&s.allowedInMath===!1)throw new _t("Can't use function '"+i+"' in math mode",r);var{args:o,optArgs:a}=this.parseArguments(i,s);return this.callFunction(i,o,a,r,e)}callFunction(e,t,r,i,s){var o={funcName:e,parser:this,token:i,breakOnTokenText:s},a=gf[e];if(a&&a.handler)return a.handler(o,t,r);throw new _t("No function handler for "+e)}parseArguments(e,t){var r=t.numArgs+t.numOptionalArgs;if(r===0)return{args:[],optArgs:[]};for(var i=[],s=[],o=0;o<r;o++){var a=t.argTypes&&t.argTypes[o],l=o<t.numOptionalArgs;(t.primitive&&a==null||t.type==="sqrt"&&o===1&&s[0]==null)&&(a="primitive");var c=this.parseGroupOfType("argument to '"+e+"'",a,l);if(l)s.push(c);else if(c!=null)i.push(c);else throw new _t("Null argument, please report this as a bug")}return{args:i,optArgs:s}}parseGroupOfType(e,t,r){switch(t){case"color":return this.parseColorGroup(r);case"size":return this.parseSizeGroup(r);case"url":return this.parseUrlGroup(r);case"math":case"text":return this.parseArgumentGroup(r,t);case"hbox":{var i=this.parseArgumentGroup(r,"text");return i!=null?{type:"styling",mode:i.mode,body:[i],style:"text"}:null}case"raw":{var s=this.parseStringGroup("raw",r);return s!=null?{type:"raw",mode:"text",string:s.text}:null}case"primitive":{if(r)throw new _t("A primitive argument cannot be optional");var o=this.parseGroup(e);if(o==null)throw new _t("Expected group as "+e,this.fetch());return o}case"original":case null:case void 0:return this.parseArgumentGroup(r);default:throw new _t("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(e,t){var r=this.gullet.scanArgument(t);if(r==null)return null;for(var i="",s;(s=this.fetch()).text!=="EOF";)i+=s.text,this.consume();return this.consume(),r.text=i,r}parseRegexGroup(e,t){for(var r=this.fetch(),i=r,s="",o;(o=this.fetch()).text!=="EOF"&&e.test(s+o.text);)i=o,s+=i.text,this.consume();if(s==="")throw new _t("Invalid "+t+": '"+r.text+"'",r);return r.range(i,s)}parseColorGroup(e){var t=this.parseStringGroup("color",e);if(t==null)return null;var r=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(t.text);if(!r)throw new _t("Invalid color: '"+t.text+"'",t);var i=r[0];return/^[0-9a-f]{6}$/i.test(i)&&(i="#"+i),{type:"color-token",mode:this.mode,color:i}}parseSizeGroup(e){var t,r=!1;if(this.gullet.consumeSpaces(),!e&&this.gullet.future().text!=="{"?t=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):t=this.parseStringGroup("size",e),!t)return null;!e&&t.text.length===0&&(t.text="0pt",r=!0);var i=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(t.text);if(!i)throw new _t("Invalid size: '"+t.text+"'",t);var s={number:+(i[1]+i[2]),unit:i[3]};if(!GK(s))throw new _t("Invalid unit: '"+s.unit+"'",t);return{type:"size",mode:this.mode,value:s,isBlank:r}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var t=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),t==null)return null;var r=t.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:r}}parseArgumentGroup(e,t){var r=this.gullet.scanArgument(e);if(r==null)return null;var i=this.mode;t&&this.switchMode(t),this.gullet.beginGroup();var s=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var o={type:"ordgroup",mode:this.mode,loc:r.loc,body:s};return t&&this.switchMode(i),o}parseGroup(e,t){var r=this.fetch(),i=r.text,s;if(i==="{"||i==="\\begingroup"){this.consume();var o=i==="{"?"}":"\\endgroup";this.gullet.beginGroup();var a=this.parseExpression(!1,o),l=this.fetch();this.expect(o),this.gullet.endGroup(),s={type:"ordgroup",mode:this.mode,loc:Ya.range(r,l),body:a,semisimple:i==="\\begingroup"||void 0}}else if(s=this.parseFunction(t,e)||this.parseSymbol(),s==null&&i[0]==="\\"&&!PY.hasOwnProperty(i)){if(this.settings.throwOnError)throw new _t("Undefined control sequence: "+i,r);s=this.formatUnsupportedCmd(i),this.consume()}return s}formLigatures(e){for(var t=e.length-1,r=0;r<t;++r){var i=e[r],s=i.text;s==="-"&&e[r+1].text==="-"&&(r+1<t&&e[r+2].text==="-"?(e.splice(r,3,{type:"textord",mode:"text",loc:Ya.range(i,e[r+2]),text:"---"}),t-=2):(e.splice(r,2,{type:"textord",mode:"text",loc:Ya.range(i,e[r+1]),text:"--"}),t-=1)),(s==="'"||s==="`")&&e[r+1].text===s&&(e.splice(r,2,{type:"textord",mode:"text",loc:Ya.range(i,e[r+1]),text:s+s}),t-=1)}}parseSymbol(){var e=this.fetch(),t=e.text;if(/^\\verb[^a-zA-Z]/.test(t)){this.consume();var r=t.slice(5),i=r.charAt(0)==="*";if(i&&(r=r.slice(1)),r.length<2||r.charAt(0)!==r.slice(-1))throw new _t(`\\verb assertion failed --
                    please report what input caused this bug`);return r=r.slice(1,-1),{type:"verb",mode:"text",body:r,star:i}}jz.hasOwnProperty(t[0])&&!ti[this.mode][t[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+t[0]+'" used in math mode',e),t=jz[t[0]]+t.slice(1));var s=wbe.exec(t);s&&(t=t.substring(0,s.index),t==="i"?t="ı":t==="j"&&(t="ȷ"));var o;if(ti[this.mode][t]){this.settings.strict&&this.mode==="math"&&QN.indexOf(t)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+t[0]+'" used in math mode',e);var a=ti[this.mode][t].group,l=Ya.range(e),c;if(g2e.hasOwnProperty(a)){var u=a;c={type:"atom",mode:this.mode,family:u,loc:l,text:t}}else c={type:a,mode:this.mode,loc:l,text:t};o=c}else if(t.charCodeAt(0)>=128)this.settings.strict&&(jK(t.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+t[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+t[0]+'"'+(" ("+t.charCodeAt(0)+")"),e)),o={type:"textord",mode:"text",loc:Ya.range(e),text:t};else return null;if(this.consume(),s)for(var d=0;d<s[0].length;d++){var h=s[0][d];if(!nR[h])throw new _t("Unknown accent ' "+h+"'",e);var f=nR[h][this.mode]||nR[h].text;if(!f)throw new _t("Accent "+h+" unsupported in "+this.mode+" mode",e);o={type:"accent",mode:this.mode,loc:Ya.range(e),label:f,isStretchy:!1,isShifty:!0,base:o}}return o}}sb.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var KD=function(e,t){if(!(typeof e=="string"||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var r=new sb(e,t);delete r.gullet.macros.current["\\df@tag"];var i=r.parse();if(delete r.gullet.macros.current["\\current@color"],delete r.gullet.macros.current["\\color"],r.gullet.macros.get("\\df@tag")){if(!t.displayMode)throw new _t("\\tag works only in display equations");i=[{type:"tag",mode:"text",body:i,tag:r.subparse([new Kl("\\df@tag")])}]}return i},OY=function(e,t,r){t.textContent="";var i=YD(e,r).toNode();t.appendChild(i)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),OY=function(){throw new _t("KaTeX doesn't work in quirks mode.")});var Mbe=function(e,t){var r=YD(e,t).toMarkup();return r},Rbe=function(e,t){var r=new PD(t);return KD(e,r)},DY=function(e,t,r){if(r.throwOnError||!(e instanceof _t))throw e;var i=Fe.makeSpan(["katex-error"],[new ic(t)]);return i.setAttribute("title",e.toString()),i.setAttribute("style","color:"+r.errorColor),i},YD=function(e,t){var r=new PD(t);try{var i=KD(e,r);return z2e(i,e,r)}catch(s){return DY(s,e,r)}},Nbe=function(e,t){var r=new PD(t);try{var i=KD(e,r);return U2e(i,e,r)}catch(s){return DY(s,e,r)}},Pbe="0.16.18",Obe={Span:zA,Anchor:LD,SymbolNode:ic,SvgNode:eh,PathNode:Gf,LineNode:qN},Dbe={version:Pbe,render:OY,renderToString:Mbe,ParseError:_t,SETTINGS_SCHEMA:yT,__parse:Rbe,__renderToDomTree:YD,__renderToHTMLTree:Nbe,__setFontMetrics:c2e,__defineSymbol:F,__defineFunction:kt,__defineMacro:ie,__domTree:Obe};const Lbe=/^(\${1,2})(?!\$)((?:\\.|[^\\\n])*?(?:\\.|[^\\\n\$]))\1(?=[\s?!\.,:？！。，：]|$)/,kbe=/^(\${1,2})(?!\$)((?:\\.|[^\\\n])*?(?:\\.|[^\\\n\$]))\1/,Bbe=/^(\${1,2})\n((?:\\[^]|[^\\])+?)\n\1(?:\n|$)/;function LY(n={}){return{extensions:[Fbe(n,Gz(n,!1)),zbe(n,Gz(n,!0))]}}function Gz(n,e){return t=>Dbe.renderToString(t.text,{...n,displayMode:t.displayMode})+(e?`
`:"")}function Fbe(n,e){const t=n&&n.nonStandard,r=t?kbe:Lbe;return{name:"inlineKatex",level:"inline",start(i){let s,o=i;for(;o;){if(s=o.indexOf("$"),s===-1)return;if((t?s>-1:s===0||o.charAt(s-1)===" ")&&o.substring(s).match(r))return s;o=o.substring(s+1).replace(/^\$+/,"")}},tokenizer(i,s){const o=i.match(r);if(o)return{type:"inlineKatex",raw:o[0],text:o[2].trim(),displayMode:o[1].length===2}},renderer:e}}function zbe(n,e){return{name:"blockKatex",level:"block",tokenizer(t,r){const i=t.match(Bbe);if(i)return{type:"blockKatex",raw:i[0],text:i[2].trim(),displayMode:i[1].length===2}},renderer:e}}const Ube=Object.freeze(Object.defineProperty({__proto__:null,default:LY},Symbol.toStringTag,{value:"Module"}));function jbe(){return{extensions:[{name:"spanTable",level:"block",start(n){var e;return(e=n.match(/^\n *([^\n ].*\|.*)\n/))===null||e===void 0?void 0:e.index},tokenizer(n,e){const r=new RegExp("^ *([^\\n ].*\\|.*\\n(?: *[^\\s].*\\n)*?) {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n| {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)| {0,3}#{1,6} | {0,3}>| {4}[^\\n]| {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n| {0,3}(?:[*+-]|1[.)]) |<\\/?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?: +|\\n|\\/?>)|<(?:script|pre|style|textarea|!--)).*(?:\\n|$))*)\\n*|$)").exec(n);if(r){const i={type:"spanTable",header:r[1].replace(/\n$/,"").split(`
`),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:r[3]?r[3].replace(/\n$/,"").split(`
`):[]};i.header[0]=rR(i.header[0]);const s=i.header[0].reduce((o,a)=>o+a.colspan,0);if(s===i.align.length){i.raw=r[0];let o,a,l,c,u=i.align.length;for(o=0;o<u;o++)/^ *-+: *$/.test(i.align[o])?i.align[o]="right":/^ *:-+: *$/.test(i.align[o])?i.align[o]="center":/^ *:-+ *$/.test(i.align[o])?i.align[o]="left":i.align[o]=null;for(u=i.header.length,o=1;o<u;o++)i.header[o]=rR(i.header[o],s,i.header[o-1]);for(u=i.rows.length,o=0;o<u;o++)i.rows[o]=rR(i.rows[o],s,i.rows[o-1]);for(u=i.header.length,a=0;a<u;a++)for(c=i.header[a],l=0;l<c.length;l++)c[l].tokens=[],this.lexer.inline(c[l].text,c[l].tokens);for(u=i.rows.length,a=0;a<u;a++)for(c=i.rows[a],l=0;l<c.length;l++)c[l].tokens=[],this.lexer.inline(c[l].text,c[l].tokens);return i}}},renderer(n){let e,t,r,i,s,o,a='<div class="memori--responsive-table-wrapper"><table class="memori--table memori--table--compact">';for(a+="<thead>",e=0;e<n.header.length;e++){r=n.header[e];let l=0;for(a+="<tr>",t=0;t<r.length;t++)i=r[t],o=this.parser.parseInline(i.tokens),a+=Hz(o,i,"th",n.align[l]),l+=i.colspan;a+="</tr>"}if(a+="</thead>",n.rows.length){for(a+="<tbody>",e=0;e<n.rows.length;e++){for(r=n.rows[e],s=0,a+="<tr>",t=0;t<r.length;t++)i=r[t],o=this.parser.parseInline(i.tokens),a+=Hz(o,i,"td",n.align[s]),s+=i.colspan;a+="</tr>"}a+="</tbody>"}return a+="</table></div>",a}}]}}const Hz=(n,e,t,r)=>e.rowspan?`${`<${t}${e.colspan>1?` colspan=${e.colspan}`:""}${e.rowspan>1?` rowspan=${e.rowspan}`:""}${r?` align=${r}`:""}>`+n}</${t}>
`:"",rR=(n,e,t=[])=>{var r,i,s;const o=[...n.matchAll(/(?:[^|\\]|\\.?)+(?:\|+|$)/g)].map(f=>f[0]);!((r=o[0])===null||r===void 0)&&r.trim()||o.shift(),!((i=o[o.length-1])===null||i===void 0)&&i.trim()||o.pop();let a=0,l,c,u,d,h;for(l=0;l<o.length;l++){if(u=o[l].split(/\|+$/)[0],o[l]={rowspan:1,colspan:Math.max(o[l].length-u.length,1),text:u.trim().replace(/\\\|/g,"|")},u.slice(-1)==="^"&&t.length)for(h=0,c=0;c<t.length;c++){if(d=t[c],h===a&&d.colspan===o[l].colspan){o[l].rowSpanTarget=(s=d.rowSpanTarget)!==null&&s!==void 0?s:d,o[l].rowSpanTarget.text+=` ${o[l].text.slice(0,-1)}`,o[l].rowSpanTarget.rowspan+=1,o[l].rowspan=0;break}if(h+=d.colspan,h>a)break}a+=o[l].colspan}if(a>e)o.splice(e);else for(;a<e;)o.push({colspan:1,text:""}),a+=1;return o};fr.use({async:!1,gfm:!0,pedantic:!1,renderer:{link:({href:n,title:e,text:t})=>{const r=lTe(n);if(r===null)return t;n=r;let i='<a href="'+n+'"';return e&&(i+=' title="'+e+'"'),i+=' target="_blank" rel="noopener noreferrer">'+t+"</a>",i}}});fr.use(zK());fr.use(jbe());const Gbe=n=>n.split(`
`).reduce((t,r)=>{if(r.includes("=")){let i="",s=!1;for(let o=0;o<r.length;o++)r[o]==="["&&!s?i+="\\[":r[o]==="]"&&!s?i+="\\]":i+=r[o],s=r[o]==="\\"&&!s;return t!=null&&t.length?`${t}
${i}`:i}else return t!=null&&t.length?`${t}
${r}`:r},""),Hbe=(n,e=!1)=>{try{let t=fr.parse(n.trim().replaceAll(/\[([^\]]+)\]\(([^\)]+)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer">$1</a>').replaceAll(/```markdown([^```]+)```/g,"$1").replaceAll("($","( $").replaceAll(":$",": $").replaceAll("\frac","\\frac").replaceAll("\beta","\\beta").replaceAll("cdot","\\cdot")).trim();return e&&(t=Gbe(t.replace(/\n/g,"<br>"))),t=NK.sanitize(t,{ADD_ATTR:["target"]}),t.replace(/(<br>)+/g,"<br>").replace(/<p><\/p>/g,"<br>").replace(/<p><br><\/p>/g,"<br>")}catch(t){return console.error(t),n}},Vbe=({message:n,memori:e,tenant:t,baseUrl:r,apiUrl:i,sessionID:s,showFeedback:o,showWhyThisAnswer:a=!0,showCopyButton:l=!0,showTranslationOriginal:c=!1,simulateUserPrompt:u,showAIicon:d=!0,isFirst:h=!1,useMathFormatting:f=!1,user:m,userAvatar:g,experts:v})=>{var y,A,C,T,x,R;const{t:N,i18n:M}=ur(),O=M.language||"en",[P,z]=D.useState(!1);f&&fr.use(LY({throwOnError:!1,output:"htmlAndMathml"}));const V=n.translatedText||n.text,$=Hbe(V,f),B=n.fromUser?V:rK(ED($));return D.useLayoutEffect(()=>{typeof window<"u"&&!n.fromUser&&f&&"MathJax"in window&&window.MathJax.typesetPromise&&window.MathJax.typesetPromise([".memori-chat--bubble-content"])},[n.text,n.fromUser,f]),w.jsxs(w.Fragment,{children:[(n.initial||h)&&w.jsx("div",{className:"memori-chat--bubble-initial"}),w.jsxs(Zr,{show:!0,appear:!0,as:"div",className:er("memori-chat--bubble-container",{"memori-chat--bubble-from-user":!!n.fromUser,"memori-chat--with-addon":n.generatedByAI&&d||o&&u}),children:[!n.fromUser&&w.jsx(Zr.Child,{as:"picture",className:"memori-chat--bubble-avatar",enter:"transition ease-in-out duration-300",enterFrom:`opacity-0 scale-075 ${n.fromUser?"translate-x-15":"translate-x--15"}`,enterTo:"opacity-1 scale-1 translate-x-0",leave:"transition ease-in-out duration-300",leaveFrom:"opacity-1 scale-1 translate-x-0",leaveTo:`opacity-0 scale-075 ${n.fromUser?"translate-x-15":"translate-x--15"}`,title:!((y=n.emitter)===null||y===void 0)&&y.length&&e.enableBoardOfExperts?n.emitter:e.name,children:w.jsx("img",{className:"memori-chat--bubble-avatar-img",alt:!((A=n.emitter)===null||A===void 0)&&A.length&&e.enableBoardOfExperts?n.emitter:e.name,src:!((C=n.emitter)===null||C===void 0)&&C.length&&e.enableBoardOfExperts&&(v!=null&&v.find(q=>q.name===n.emitter))?`${i}/api/v1/memoriai/memori/avatar/${(T=v.find(q=>q.name===n.emitter))===null||T===void 0?void 0:T.expertMemoriID}`:e.avatarURL&&e.avatarURL.length>0?Pa({type:"avatar",tenantID:t==null?void 0:t.id,resourceURI:e.avatarURL,baseURL:r,apiURL:i}):Pa({tenantID:t==null?void 0:t.id,type:"avatar",baseURL:r||"https://www.aisuru.com",apiURL:i}),onError:q=>{q.currentTarget.src=e.avatarURL&&e.avatarURL.length>0?Pa({type:"avatar",tenantID:t==null?void 0:t.id,resourceURI:e.avatarURL,baseURL:r}):Pa({tenantID:t==null?void 0:t.id,type:"avatar",baseURL:r}),q.currentTarget.onerror=null}})}),w.jsxs(Zr.Child,{as:"div",className:er("memori-chat--bubble",{"memori-chat--user-bubble":!!n.fromUser,"memori-chat--with-addon":!n.fromUser&&l||n.generatedByAI&&d||o&&u,"memori-chat--ai-generated":n.generatedByAI&&d,"memori-chat--with-feedback":o}),enter:"transition ease-in-out duration-300",enterFrom:`opacity-0 scale-09 translate-x-${n.fromUser?"30":"-30"}`,enterTo:"opacity-1 scale-1 translate-x-0",leave:"transition ease-in-out duration-300",leaveFrom:"opacity-1 scale-1 translate-x-0",leaveTo:`opacity-0 scale-09  translate-x-${n.fromUser?"30":"-30"}`,children:[w.jsx("div",{dir:"auto",className:"memori-chat--bubble-content",dangerouslySetInnerHTML:{__html:$}}),(!n.fromUser&&l||n.generatedByAI&&d||o&&u)&&w.jsxs("div",{className:"memori-chat--bubble-addon",children:[!n.fromUser&&l&&w.jsx(Pt,{ghost:!0,shape:"circle",title:N("copy")||"Copy",className:"memori-chat--bubble-action-icon",icon:w.jsx(OK,{"aria-label":N("copy")||"Copy"}),onClick:()=>navigator.clipboard.writeText(B)}),!n.fromUser&&l&&B!==n.text&&w.jsx(Pt,{ghost:!0,shape:"circle",title:N("copyRawCode")||"Copy raw code",className:"memori-chat--bubble-action-icon",icon:w.jsx(Jxe,{"aria-label":N("copyRawCode")||"Copy raw code"}),onClick:()=>navigator.clipboard.writeText(n.text)}),o&&!!u&&w.jsx(VTe,{memori:e,className:"memori-chat--bubble-feedback",dropdown:!0,onNegativeClick:q=>{q&&u(q)}}),n.generatedByAI&&d&&w.jsx(ql,{align:"left",content:N("generatedByAI"),className:"memori-chat--bubble-action-icon memori-chat--bubble-action-icon--ai",children:w.jsx("span",{children:w.jsx(pK,{title:N("generatedByAI")||void 0})})}),c&&n.translatedText&&n.translatedText!==n.text&&w.jsx(ql,{align:"left",content:`${O==="it"?"Testo originale":"Original text"}: ${n.text}`,className:"memori-chat--bubble-action-icon memori-chat--bubble-action-icon--ai",children:w.jsx("span",{children:w.jsx(mK,{"aria-label":O==="it"?"Testo originale":"Original text"})})}),!n.fromUser&&n.questionAnswered&&i&&a&&w.jsx(Pt,{ghost:!0,shape:"circle",title:N("whyThisAnswer")||void 0,className:"memori-chat--bubble-action-icon",onClick:()=>z(!0),disabled:P,icon:w.jsx(PK,{title:N("whyThisAnswer")||void 0})})]})]}),n.fromUser&&w.jsx(w.Fragment,{children:g&&typeof g=="string"||!g&&(!((x=m==null?void 0:m.avatarURL)===null||x===void 0)&&x.length)?w.jsx(Zr.Child,{as:"picture",className:"memori-chat--bubble-avatar",enter:"transition ease-in-out duration-300",enterFrom:`opacity-0 scale-075 ${n.fromUser?"translate-x-15":"translate-x--15"}`,enterTo:"opacity-1 scale-1 translate-x-0",leave:"transition ease-in-out duration-300",leaveFrom:"opacity-1 scale-1 translate-x-0",leaveTo:`opacity-0 scale-075 ${n.fromUser?"translate-x-15":"translate-x--15"}`,children:w.jsx("img",{className:"memori-chat--bubble-avatar-img",alt:(R=m==null?void 0:m.userName)!==null&&R!==void 0?R:"User",src:g??(m==null?void 0:m.avatarURL)})}):g?w.jsx(Zr.Child,{as:"div",className:"memori-chat--bubble-avatar",enter:"transition ease-in-out duration-300",enterFrom:`opacity-0 scale-075 ${n.fromUser?"translate-x-15":"translate-x--15"}`,enterTo:"opacity-1 scale-1 translate-x-0",leave:"transition ease-in-out duration-300",leaveFrom:"opacity-1 scale-1 translate-x-0",leaveTo:`opacity-0 scale-075 ${n.fromUser?"translate-x-15":"translate-x--15"}`,children:g}):w.jsx(Zr.Child,{as:"div",className:"memori-chat--bubble-avatar",enter:"transition ease-in-out duration-300",enterFrom:`opacity-0 scale-075 ${n.fromUser?"translate-x-15":"translate-x--15"}`,enterTo:"opacity-1 scale-1 translate-x-0",leave:"transition ease-in-out duration-300",leaveFrom:"opacity-1 scale-1 translate-x-0",leaveTo:`opacity-0 scale-075 ${n.fromUser?"translate-x-15":"translate-x--15"}`,children:w.jsx(fK,{})})})]}),P&&i&&w.jsx(gIe,{visible:P,message:n,closeDrawer:()=>z(!1),apiURL:i,sessionID:s})]})},$be=({className:n,title:e})=>w.jsx("svg",{...e?{}:{"aria-hidden":"true"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",focusable:"false",role:"img",className:n,"aria-label":e,children:w.jsx("path",{d:"M855 160.1l-189.2 23.5c-6.6.8-9.3 8.8-4.7 13.5l54.7 54.7-153.5 153.5a8.03 8.03 0 0 0 0 11.3l45.1 45.1c3.1 3.1 8.2 3.1 11.3 0l153.6-153.6 54.7 54.7a7.94 7.94 0 0 0 13.5-4.7L863.9 169a7.9 7.9 0 0 0-8.9-8.9zM416.6 562.3a8.03 8.03 0 0 0-11.3 0L251.8 715.9l-54.7-54.7a7.94 7.94 0 0 0-13.5 4.7L160.1 855c-.6 5.2 3.7 9.5 8.9 8.9l189.2-23.5c6.6-.8 9.3-8.8 4.7-13.5l-54.7-54.7 153.6-153.6c3.1-3.1 3.1-8.2 0-11.3l-45.2-45z"})}),kY=({className:n,title:e})=>w.jsx("svg",{...e?{}:{"aria-hidden":"true"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",focusable:"false",role:"img",className:n,"aria-label":e,children:w.jsx("path",{d:"M391 240.9c-.8-6.6-8.9-9.4-13.6-4.7l-43.7 43.7L200 146.3a8.03 8.03 0 0 0-11.3 0l-42.4 42.3a8.03 8.03 0 0 0 0 11.3L280 333.6l-43.9 43.9a8.01 8.01 0 0 0 4.7 13.6L401 410c5.1.6 9.5-3.7 8.9-8.9L391 240.9zm10.1 373.2L240.8 633c-6.6.8-9.4 8.9-4.7 13.6l43.9 43.9L146.3 824a8.03 8.03 0 0 0 0 11.3l42.4 42.3c3.1 3.1 8.2 3.1 11.3 0L333.7 744l43.7 43.7A8.01 8.01 0 0 0 391 783l18.9-160.1c.6-5.1-3.7-9.4-8.8-8.8zm221.8-204.2L783.2 391c6.6-.8 9.4-8.9 4.7-13.6L744 333.6 877.7 200c3.1-3.1 3.1-8.2 0-11.3l-42.4-42.3a8.03 8.03 0 0 0-11.3 0L690.3 279.9l-43.7-43.7a8.01 8.01 0 0 0-13.6 4.7L614.1 401c-.6 5.2 3.7 9.5 8.8 8.9zM744 690.4l43.9-43.9a8.01 8.01 0 0 0-4.7-13.6L623 614c-5.1-.6-9.5 3.7-8.9 8.9L633 783.1c.8 6.6 8.9 9.4 13.6 4.7l43.7-43.7L824 877.7c3.1 3.1 8.2 3.1 11.3 0l42.4-42.3c3.1-3.1 3.1-8.2 0-11.3L744 690.4z"})}),Wbe=({disabled:n=!1,value:e,onChange:t,onPressEnter:r,onFocus:i,onBlur:s})=>{const{t:o}=ur(),[a,l]=D.useState(!1);return w.jsx("div",{"data-testid":"chat-textarea",className:er("memori-chat-textarea",{"memori-chat-textarea--expanded":a,"memori-chat-textarea--disabled":n}),children:w.jsxs("div",{className:"memori-chat-textarea--inner",children:[w.jsx("textarea",{className:"memori-chat-textarea--input",disabled:n,value:e,onChange:c=>{t(c.target.value)},onKeyDownCapture:c=>{c.key==="Enter"&&!c.shiftKey&&r&&r(c)},onFocus:i,onBlur:s}),w.jsx("div",{className:"memori-chat-textarea--expand",children:w.jsx(Pt,{className:er("memori-chat-textarea--expand-button"),onClick:()=>l(!a),padded:!1,ghost:!0,title:a?o("collapse")||"Collapse":o("expand")||"Expand",icon:a?w.jsx(kY,{}):w.jsx($be,{})})})]})})},qbe=({className:n,title:e})=>w.jsx("svg",{...e?{}:{"aria-hidden":"true"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",focusable:"false",role:"img",className:n,"aria-label":e,children:w.jsx("path",{d:"M931.4 498.9L94.9 79.5c-3.4-1.7-7.3-2.1-11-1.2-8.5 2.1-13.8 10.7-11.7 19.3l86.2 352.2c1.3 5.3 5.2 9.6 10.4 11.3l147.7 50.7-147.6 50.7c-5.2 1.8-9.1 6-10.3 11.3L72.2 926.5c-.9 3.7-.5 7.6 1.2 10.9 3.9 7.9 13.5 11.1 21.5 7.2l836.5-417c3.1-1.5 5.6-4.1 7.2-7.1 3.9-8 .7-17.6-7.2-21.6zM170.8 826.3l50.3-205.6 295.2-101.3c2.3-.8 4.2-2.6 5-5 1.4-4.2-.8-8.7-5-10.2L221.1 403 171 198.2l628 314.9-628.2 313.2z"})}),BY=({className:n,title:e})=>w.jsx("svg",{...e?{}:{"aria-hidden":"true"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",focusable:"false",role:"img",className:n,"aria-label":e,children:w.jsx("path",{d:"M842 454c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8 0 140.3-113.7 254-254 254S258 594.3 258 454c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8 0 168.7 126.6 307.9 290 327.6V884H326.7c-13.7 0-24.7 14.3-24.7 32v36c0 4.4 2.8 8 6.2 8h407.6c3.4 0 6.2-3.6 6.2-8v-36c0-17.7-11-32-24.7-32H548V782.1c165.3-18 294-158 294-328.1zM512 624c93.9 0 170-75.2 170-168V232c0-92.8-76.1-168-170-168s-170 75.2-170 168v224c0 92.8 76.1 168 170 168zm-94-392c0-50.6 41.9-92 94-92s94 41.4 94 92v224c0 50.6-41.9 92-94 92s-94-41.4-94-92V232z"})}),Qbe=({listening:n,stopAudio:e,startListening:t,stopListening:r})=>{const{t:i}=ur(),[s,o]=D.useState(),a=D.useRef(null),l=u=>{u.preventDefault(),o(i("write_and_speak.holdToSpeak")||"Hold to record"),!a.current&&(a.current=setTimeout(()=>{e(),o(i("write_and_speak.releaseToEndListening")||"Release to end listening"),t()},300))},c=()=>{a.current&&(clearTimeout(a.current),a.current=null),r(),o(void 0)};return D.useEffect(()=>()=>c(),[]),w.jsx(ql,{visible:!!s,content:w.jsx("span",{children:s||i("write_and_speak.pressAndHoldToSpeak")||"Press and hold to speak"}),align:"topLeft",className:"memori-mic-btn-tooltip",children:w.jsx(Pt,{primary:!0,className:er("memori-chat-inputs--mic",{"memori-chat-inputs--mic--listening":n}),title:n?i("write_and_speak.micButtonPopoverListening")||"Listening":i("write_and_speak.micButtonPopover")||"Start listening",onMouseDown:l,onTouchStart:l,onMouseUp:c,onTouchEnd:c,shape:"circle",icon:w.jsx(BY,{})})})},Jbe=({dialogState:n,userMessage:e="",onChangeUserMessage:t,sendMessage:r,onTextareaFocus:i,onTextareaBlur:s,onTextareaPressEnter:o,showMicrophone:a=!1,microphoneMode:l="HOLD_TO_TALK",listening:c=!1,stopAudio:u,startListening:d,stopListening:h})=>{const{t:f}=ur();return w.jsxs("fieldset",{id:"chat-fieldset",className:"memori-chat-inputs",disabled:(n==null?void 0:n.state)==="X2a"||(n==null?void 0:n.state)==="X3",children:[w.jsx(Wbe,{value:e,onChange:t,onPressEnter:o,onFocus:i,onBlur:s,disabled:["R2","R3","R4","R5","G3","X3"].includes((n==null?void 0:n.state)||"")}),w.jsx(Pt,{shape:"circle",primary:!!(e!=null&&e.length),disabled:!e||e.length===0,className:"memori-chat-inputs--send",onClick:()=>{r(e),u(),speechSynthesis.speak(new SpeechSynthesisUtterance(""))},title:f("send")||"Send",icon:w.jsx(qbe,{})}),a&&l==="HOLD_TO_TALK"&&w.jsx(Qbe,{listening:c,startListening:d,stopListening:()=>{h(),e!=null&&e.length&&r(e)},stopAudio:u}),a&&l==="CONTINUOUS"&&w.jsx(Pt,{primary:!0,className:er("memori-chat-inputs--mic",{"memori-chat-inputs--mic--listening":c}),title:c?f("write_and_speak.micButtonPopoverListening")||"Listening":f("write_and_speak.micButtonPopover")||"Start listening",onClick:()=>{c?h():(u(),d())},shape:"circle",icon:w.jsx(BY,{})})]})},Kbe=" ",Zo=3,Vz={en:[{delayAfter:Zo,text:"Generating an accurate and fancy response..."},{delayAfter:Zo,text:"Generating a response that will blow your mind..."},{delayAfter:Zo,text:"Generating a response that will make you smile..."},{delayAfter:Zo,text:"Thinking of a response..."},{delayAfter:Zo,text:"Thinking of a response that will make you smile..."},{delayAfter:Zo,text:"Gathering my thoughts..."},{delayAfter:Zo,text:"Gathering my thoughts to give you a response..."}],it:[{delayAfter:Zo,text:"Sto generando una risposta accurata e fantasiosa..."},{delayAfter:Zo,text:"Sto generando una risposta che ti farà impazzire..."},{delayAfter:Zo,text:"Sto generando una risposta che ti farà sorridere..."},{delayAfter:Zo,text:"Sto pensando ad una risposta..."},{delayAfter:Zo,text:"Sto pensando ad una risposta che ti farà sorridere..."},{delayAfter:Zo,text:"Sto raccogliendo i miei pensieri..."},{delayAfter:Zo,text:"Sto raccogliendo i miei pensieri per darti una risposta..."}]},QC=(n=Zo)=>new Array(n*20).fill(Kbe).join(""),Ybe=({useDefaultSentences:n=!1,lang:e="en",sentence:t,sentences:r})=>{var i;const[s,o]=D.useState(0),[a,l]=D.useState(!((i=r==null?void 0:r[e])===null||i===void 0)&&i.length?`${r[e][0].text.endsWith("...")||!r[e][0].text.length?r[e][0].text:`${r[e][0].text}...`}${QC(r[e][0].delayAfter)}`:t?`${t.endsWith("...")||!t.length?t:`${t}...`}${QC()}`:""),[c,u]=D.useState("");return D.useEffect(()=>{const d=setInterval(()=>{var h;const f=a[c.length];if(f!==void 0&&a.length>0)u(m=>m+f);else if(!((h=r==null?void 0:r[e])===null||h===void 0)&&h.length&&s<r[e].length-1){const m=s+1,g=r[e][m];l(`${g.text.endsWith("...")||!g.text.length?g.text:`${g.text}...`}${QC(g.delayAfter)}`),u(""),o(m)}else if(!r&&!t&&n){const m=Vz[e][Math.floor(Math.random()*Vz[e].length)];l(`${m.text}${QC(m.delayAfter)}`),u("")}},50);return()=>clearInterval(d)}),w.jsx("div",{className:"memori-chat--bubble",children:w.jsxs("div",{className:"memori-chat--bubble-typing",children:[w.jsxs("div",{id:"wave",children:[w.jsx("span",{className:"dot"}),w.jsx("span",{className:"dot"}),w.jsx("span",{className:"dot"})]}),a.length>0&&w.jsx("p",{children:c})]})})},Xbe=({memori:n,tenant:e,sessionID:t,baseUrl:r,apiUrl:i,translateTo:s,memoriTyping:o,typingText:a,showTypingText:l=!1,history:c=[],authToken:u,dialogState:d,simulateUserPrompt:h,showDates:f=!1,showContextPerLine:m=!1,showAIicon:g=!0,showWhyThisAnswer:v=!0,showCopyButton:y=!0,showTranslationOriginal:A=!1,selectReceiverTag:C,preview:T=!1,instruct:x=!1,showInputs:R=!0,showMicrophone:N=!1,microphoneMode:M="HOLD_TO_TALK",sendOnEnter:O,setSendOnEnter:P,attachmentsMenuOpen:z,setAttachmentsMenuOpen:V,userMessage:$="",onChangeUserMessage:B,sendMessage:q,listening:K,setEnableFocusChatInput:se,isPlayingAudio:W,stopAudio:ee,startListening:Q,stopListening:Y,resetTranscript:ae,customMediaRenderer:fe,user:we,userAvatar:ge,experts:Se,useMathFormatting:Ke=!1})=>{var xe,Qe,We,Ve,te,ce,de,Pe;const Te=()=>{setTimeout(()=>{var ke,ct,oe;(ke=document.querySelector(".memori-chat--content"))===null||ke===void 0||ke.scrollTo(0,(oe=(ct=document.querySelector(".memori-chat--content"))===null||ct===void 0?void 0:ct.scrollHeight)!==null&&oe!==void 0?oe:0)},200)};D.useEffect(()=>{!T&&Te()},[c,T]);const De=()=>{var ke,ct,oe,ne;Y();const Oe=Tg();Oe&&se(!0),Oe&&window.innerWidth<=768&&((ct=(ke=document.getElementById("chat-wrapper"))===null||ke===void 0?void 0:ke.classList)===null||ct===void 0||ct.add("chat-focused"),(ne=(oe=document.querySelector(".memori.memori-widget"))===null||oe===void 0?void 0:oe.classList)===null||ne===void 0||ne.add("chat-focused"),setTimeout(()=>{Te()},300))},Ge=()=>{var ke,ct,oe,ne,Oe;!((ct=(ke=document.getElementById("chat-wrapper"))===null||ke===void 0?void 0:ke.classList)===null||ct===void 0)&&ct.contains("chat-focused")&&((oe=document.getElementById("chat-wrapper"))===null||oe===void 0||oe.classList.remove("chat-focused"),(Oe=(ne=document.querySelector(".memori.memori-widget"))===null||ne===void 0?void 0:ne.classList)===null||Oe===void 0||Oe.remove("chat-focused"),Te())},it=()=>{O==="keypress"&&($==null?void 0:$.length)>0&&(Y(),q($),B(""),ae())};return w.jsxs("div",{className:er("memori-chat--wrapper",{"memori-chat-wrapper--translate":s}),id:"chat-wrapper",lang:s==null?void 0:s.toUpperCase(),"data-memori-lang":(Ve=(We=(Qe=(xe=n.culture)===null||xe===void 0?void 0:xe.split("-"))===null||Qe===void 0?void 0:Qe[0])===null||We===void 0?void 0:We.toUpperCase())!==null&&Ve!==void 0?Ve:"EN",children:[w.jsx("div",{className:er("memori-chat--history",{"memori-chat--history-touch":Tg()}),children:w.jsxs("div",{className:er("memori-chat--content",{"memori-chat--content-touch":Tg()}),children:[w.jsx("div",{className:er("memori-chat--cover"),style:{backgroundImage:`url("${Pa({type:"cover",tenantID:e==null?void 0:e.id,resourceURI:n.coverURL,baseURL:r,apiURL:i})}"), url("${Pa({type:"cover",tenantID:e==null?void 0:e.id,baseURL:r||"https://www.aisuru.com",apiURL:i})}")`}}),c.map((ke,ct)=>{var oe,ne,Oe,st;return w.jsxs(ht.Fragment,{children:[w.jsx(Vbe,{isFirst:ct===0,message:ke,memori:n,tenant:e,baseUrl:r,apiUrl:i,sessionID:t,simulateUserPrompt:h,showAIicon:g,showWhyThisAnswer:v,showTranslationOriginal:A,showFeedback:ct===c.length-1&&!ke.fromUser&&(d==null?void 0:d.acceptsFeedback),user:we,userAvatar:ge,experts:Se,showCopyButton:y,useMathFormatting:Ke}),f&&!!ke.timestamp&&w.jsx("small",{className:`memori-chat--timestamp ${ke.fromUser?"text-right":"text-left"}`,children:new Intl.DateTimeFormat("it",{hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date(ke.timestamp.endsWith("Z")?ke.timestamp:`${ke.timestamp}Z`))}),m&&!!Object.keys((oe=ke.contextVars)!==null&&oe!==void 0?oe:{}).length&&w.jsx("div",{className:"memori-chat--context-vars",children:Object.keys((ne=ke.contextVars)!==null&&ne!==void 0?ne:{}).map(Je=>{var ft,zt,je;return((ft=ke.contextVars)===null||ft===void 0?void 0:ft[Je])==="-"?w.jsx("div",{className:"memori-chat--context-tag memori-chat--context-tag-canceled",children:w.jsx("span",{className:"memori-chat--context-tag-text",children:Je})},Je):((zt=ke.contextVars)===null||zt===void 0?void 0:zt[Je])==="✔️"?w.jsx("div",{className:"memori-chat--context-tag",children:w.jsx("span",{className:"memori-chat--context-tag-text",children:Je})},Je):w.jsx("div",{className:"memori-chat--context-tag",children:w.jsxs("span",{className:"memori-chat--context-tag-text",children:[Je,": ",(je=ke.contextVars)===null||je===void 0?void 0:je[Je]]})},Je)})}),w.jsx(GN,{simulateUserPrompt:h,media:(Oe=ke==null?void 0:ke.media)===null||Oe===void 0?void 0:Oe.filter(Je=>Je.mimeType!=="text/html"&&Je.mimeType!=="text/plain"),links:(st=ke==null?void 0:ke.media)===null||st===void 0?void 0:st.filter(Je=>Je.mimeType==="text/html"),sessionID:t,baseUrl:r,apiUrl:i,translateTo:s,customMediaRenderer:fe})]},ct)}),(d==null?void 0:d.hints)&&d.hints.length>0&&!o&&w.jsx(GN,{simulateUserPrompt:h,hints:d.translatedHints?d.translatedHints:d.hints.map(ke=>({text:ke,originalText:ke}))}),!!o&&w.jsx(Ybe,{useDefaultSentences:l,lang:s?s.toLowerCase()==="it"?"it":"en":((de=(ce=(te=n.culture)===null||te===void 0?void 0:te.split("-"))===null||ce===void 0?void 0:ce[0])===null||de===void 0?void 0:de.toLowerCase())==="it"?"it":"en",sentence:a,sentences:n.enableBoardOfExperts?tIe:void 0},a),w.jsx("div",{id:"end-messages-ref"})]})}),(d==null?void 0:d.state)==="X3"&&t&&w.jsx("div",{className:"memori-chat--known-tags",children:Object.keys((Pe=d.knownTags)!==null&&Pe!==void 0?Pe:{}).filter(ke=>ke!==n.giverTag).map(ke=>{var ct;return w.jsx(Pt,{icon:w.jsx("span",{className:"memori-chat--known-tag-icon",children:ke}),className:"memori-chat--known-tag",onClick:()=>C(ke),children:(ct=d.knownTags)===null||ct===void 0?void 0:ct[ke]},ke)})}),R&&w.jsx(Jbe,{userMessage:$,onChangeUserMessage:B,dialogState:d,instruct:x,authToken:u,sendMessage:q,microphoneMode:M,sendOnEnter:O,setSendOnEnter:P,attachmentsMenuOpen:z,setAttachmentsMenuOpen:V,onTextareaPressEnter:it,onTextareaFocus:De,onTextareaBlur:Ge,startListening:Q,stopListening:Y,stopAudio:ee,listening:K,isPlayingAudio:W,showMicrophone:N})]})},Zbe=D.memo(Xbe),FY=({className:n,title:e})=>w.jsx("svg",{...e?{}:{"aria-hidden":"true"},focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",className:n,"aria-label":e,children:w.jsx("path",{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"})}),eMe=({memoriName:n,blockedUntil:e,notEnoughCredits:t=!1,showGiverInfo:r=!1,showTitle:i=!1,marginLeft:s=!1})=>{const{t:o}=ur(),a=new Date(e||Date.now());return t||a>new Date(Date.now())?w.jsx(ql,{className:"blocked-memori-badge--tooltip",content:t?w.jsx(w.Fragment,{children:o("notEnoughCredits")}):w.jsxs(w.Fragment,{children:[!r&&o("memoriBlockedAnon",{name:n,date:new Intl.DateTimeFormat("it",{day:"numeric",month:"long",year:"numeric"}).format(a)}),r&&o("memoriBlockedUntil",{date:new Intl.DateTimeFormat("it",{day:"numeric",month:"long",year:"numeric"}).format(a)}),r&&` ${o("memoriBlockedReasonExceedChats")}`,r&&w.jsx("br",{}),r&&`
${o("memoriBlockedGiverHelper")}`]}),children:w.jsxs("div",{className:"blocked-memori-badge--wrapper",children:[w.jsx("div",{className:`blocked-memori-badge ${s?" margin-left":""}`,children:w.jsx(FY,{className:"blocked-memori-badge--icon"})}),i&&w.jsx("span",{className:"blocked-memori-badge--title",children:o("memoriBlockedTitle")})]})}):null},zY=({className:n,title:e})=>w.jsx("svg",{...e?{}:{"aria-hidden":"true"},focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",width:"20",height:"16",viewBox:"0 0 640 512",className:n,"aria-label":e,children:w.jsx("path",{d:"M211.2 96a64 64 0 10-128 0 64 64 0 10128 0zM32 256c0 17.7 14.3 32 32 32h85.6c10.1-39.4 38.6-71.5 75.8-86.6-9.7-6-21.2-9.4-33.4-9.4H96c-35.3 0-64 28.7-64 64zm461.6 32H576c17.7 0 32-14.3 32-32 0-35.3-28.7-64-64-64h-96c-11.7 0-22.7 3.1-32.1 8.6 38.1 14.8 67.4 47.3 77.7 87.4zm-102.4-61.6c-6.9-1.6-14.2-2.4-21.6-2.4h-96c-8.5 0-16.7 1.1-24.5 3.1-30.8 8.1-55.6 31.1-66.1 60.9-3.5 10-5.5 20.8-5.5 32 0 17.7 14.3 32 32 32h224c17.7 0 32-14.3 32-32 0-11.2-1.9-22-5.5-32-10.8-30.7-36.8-54.2-68.9-61.6zM563.2 96a64 64 0 10-128 0 64 64 0 10128 0zm-241.6 96a80 80 0 100-160 80 80 0 100 160zM32 416c-17.7 0-32 14.3-32 32s14.3 32 32 32h576c17.7 0 32-14.3 32-32s-14.3-32-32-32H32z"})}),UY=({className:n,title:e})=>w.jsxs("svg",{...e?{}:{"aria-hidden":"true"},focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",width:"20",height:"20",viewBox:"0 0 48 48",className:n,"aria-label":e,children:[w.jsx("path",{d:"M30.106 48v-2.745a2.213 2.213 0 012.213-2.212h6.11a2.392 2.392 0 002.326-2.466v-3.223a1.834 1.834 0 01.459-1.145 2.912 2.912 0 00.712-1.926l-.007-.667a1.016 1.016 0 01.651-.952h1.067a1.363 1.363 0 001.051-.456 1.304 1.304 0 00.19-1.395 67.032 67.032 0 01-3.037-7.51 4.767 4.767 0 01-.217-1.507l-.002-4.994a14.513 14.513 0 00-.552-3.963l-.006-.022a13.959 13.959 0 00-3.137-5.702q-.479-.516-1.006-1.003a17.67 17.67 0 00-.677-.623A18.303 18.303 0 0024.194 1a19.617 19.617 0 00-12.539 4.489 17.555 17.555 0 00-3.945 21.69C9.945 31.507 11.694 38.622 12.14 46v2",strokeMiterlimit:10}),w.jsx("path",{d:"M27.917 12L31.417 12"}),w.jsx("path",{d:"M27.917 26L31.417 26"}),w.jsx("path",{d:"M29.667 12L29.667 26"}),w.jsx("path",{d:"M23.992 26L19.904 12 19.226 12 15.159 26"}),w.jsx("path",{d:"M16.854 21.133L22.276 21.133"})]}),tMe=n=>{switch(n){case"OpenAI":return{getStatus:async()=>{var e;const i=(e=(await(await fetch("https://status.openai.com/api/v2/summary.json")).json()).components.find(s=>s.name==="API"))===null||e===void 0?void 0:e.status;return i??"operational"},statusPage:"https://status.openai.com/"};case"Mistral":return{getStatus:async()=>{var e;const i=(e=(await(await fetch("https://status.mistral-data.com/api/v2/summary.json")).json()).components.find(s=>s.name==="API"))===null||e===void 0?void 0:e.status;return i??"operational"},statusPage:"https://status.mistral-data.com/"};case"Anthropic":return{getStatus:async()=>{var e;const i=(e=(await(await fetch("https://status.anthropic.com/api/v2/summary.json")).json()).components.find(s=>s.name==="API"))===null||e===void 0?void 0:e.status;return i??"operational"},statusPage:"https://status.anthropic.com/"};default:return{getStatus:async()=>"operational",statusPage:""}}},nMe=({forceStatus:n,provider:e="OpenAI"})=>{var t;const{t:r}=ur(),[i,s]=D.useState(n??"operational"),o=tMe(e);return D.useEffect(()=>{n||o.getStatus().then(a=>s(a)).catch(console.log)},[n,o]),i!=="operational"?w.jsx(ql,{className:"memori--completion-provider-status--tooltip",align:"topLeft",content:w.jsxs("div",{children:[w.jsx("p",{children:r("completionProviderDown",{provider:e??r("completionProviderFallbackName")})}),!!(!((t=o.statusPage)===null||t===void 0)&&t.length)&&w.jsx("p",{children:w.jsx("a",{href:o.statusPage,rel:"noopener noreferrer",target:"_blank",children:r("completionProviderCheckStatusPage")})})]}),children:w.jsx(FY,{className:"memori--completion-provider-status--icon"})}):null},jY=({className:n,title:e})=>w.jsx("svg",{...e?{}:{"aria-hidden":"true"},focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",className:n,"aria-label":e,children:w.jsx("path",{fill:"currentColor",d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"})}),rMe=({memori:n,tenant:e,language:t,userLang:r,setUserLang:i,baseUrl:s,apiUrl:o,position:a,openPositionDrawer:l,instruct:c=!1,hasInitialSession:u=!1,clickedStart:d,onClickStart:h,initializeTTS:f,_TEST_forceProviderStatus:m,isUserLoggedIn:g=!1,user:v,showLogin:y=!1,setShowLoginDrawer:A,notEnoughCredits:C=!1,isMultilanguageEnabled:T})=>{var x,R;const{t:N,i18n:M}=ur(),[O,P]=D.useState(n.description),[z,V]=D.useState(!0),$=()=>{V(B=>!B)};return D.useEffect(()=>{var B,q,K,se,W,ee;(((q=(B=M.language)===null||B===void 0?void 0:B.toUpperCase())!==null&&q!==void 0?q:"IT")!==((K=t==null?void 0:t.toUpperCase())!==null&&K!==void 0?K:"IT")||O!==n.description)&&(!((se=n.description)===null||se===void 0)&&se.length)&&pg(n.description,(ee=(W=M.language)===null||W===void 0?void 0:W.toUpperCase())!==null&&ee!==void 0?ee:"IT",t,s).then(Q=>{P(Q.text)}).catch(console.error)},[M.language,t,n.description,s]),w.jsxs("div",{className:"memori--start-panel",children:[w.jsxs("div",{className:"memori--cover",style:{backgroundImage:`url("${Pa({type:"cover",tenantID:e==null?void 0:e.id,resourceURI:n.coverURL,baseURL:s,apiURL:o})}"), url("${Pa({type:"cover",tenantID:e==null?void 0:e.id,baseURL:s,apiURL:o})}")`},children:[!!n.enableCompletions&&!n.enableBoardOfExperts&&w.jsx("div",{className:"memori--completions-enabled",children:w.jsx(ql,{align:"left",content:N("completionsEnabled"),children:w.jsx("span",{"aria-label":N("completionsEnabled")||"Completions",children:w.jsx(pK,{})})})}),!!n.enableBoardOfExperts&&w.jsx("div",{className:"memori--board-of-experts",children:w.jsx(ql,{align:"left",content:N("boardOfExperts"),children:w.jsx("span",{"aria-label":N("boardOfExperts")||"Board of Experts",children:w.jsx(zY,{})})})}),!!n.nsfw&&w.jsx("div",{className:"memori--nsfw",children:w.jsx(ql,{align:"left",content:N("nsfw"),children:w.jsx("span",{title:N("nsfw")||"NSFW",children:"🔞"})})})]}),w.jsxs("picture",{className:"memori--avatar",children:[w.jsx("source",{src:(x=n.avatarURL)!==null&&x!==void 0?x:Pa({type:"avatar",tenantID:e==null?void 0:e.id,resourceURI:n.avatarURL,baseURL:s,apiURL:o})}),w.jsx("img",{alt:n.name,src:n.avatarURL&&n.avatarURL.length>0?Pa({type:"avatar",tenantID:e==null?void 0:e.id,resourceURI:n.avatarURL,baseURL:s,apiURL:o}):Pa({type:"avatar",tenantID:e==null?void 0:e.id,baseURL:s,apiURL:o})})]}),w.jsx("h2",{className:"memori--title",children:n.name}),n.needsPosition&&!a&&w.jsxs("div",{className:"memori--needsPosition",children:[w.jsx("p",{children:N("write_and_speak.requirePositionHelp",{name:n.name})}),w.jsx(Pt,{primary:!0,onClick:()=>l(),className:"memori--start-button",icon:w.jsx(jY,{}),children:N("widget.position")})]}),(n.needsPosition&&a||!n.needsPosition)&&w.jsxs("div",{className:"memori--description",children:[w.jsxs("p",{children:[w.jsx("span",{className:"memori--description-text",children:O&&z?O:n.description}),O!==n.description&&w.jsx(Pt,{ghost:!0,className:"memori--translation-toggle",icon:w.jsx(mK,{}),onClick:()=>$(),children:N(z?"showOriginalText":"showTranslatedText")})]}),T&&!c&&w.jsxs("div",{className:"memori--language-chooser",children:[w.jsx("label",{id:"user-lang-pref-label",htmlFor:"user-lang-pref",children:N("write_and_speak.iWantToTalkToIn",{name:n.name})}),w.jsx("select",{id:"user-lang-pref",className:"memori-select--button",value:(r??M.language).toUpperCase(),"aria-labelledby":"user-lang-pref-label",onChange:B=>{i(B.target.value)},children:Xxe.map(B=>w.jsx("option",{value:B.value,"aria-label":B.label,children:B.label},B.value))})]}),w.jsx(Pt,{primary:!0,disabled:!!n.blockedUntil&&!n.isGiver||C,loading:d,onClick:B=>{try{window.speechSynthesis.speak(new SpeechSynthesisUtterance(""))}catch(q){console.error(q)}f&&f(),h&&h()},className:"memori--start-button",children:N(`write_and_speak.${c?"instructButton":u?"resumeButton":"tryMeButton"}`)}),w.jsx(nMe,{provider:(R=n==null?void 0:n.completionConfigForQuestionAnswering)===null||R===void 0?void 0:R.provider,forceStatus:m}),w.jsx("p",{className:"memori--start-description",children:N(c?"write_and_speak.pageInstructExplanation":"write_and_speak.pageTryMeExplanation")}),(n.blockedUntil||C)&&w.jsx(eMe,{memoriName:n.name,blockedUntil:n.blockedUntil,notEnoughCredits:C,showGiverInfo:n.isGiver,showTitle:!0,marginLeft:!0}),!!n.enableDeepThought&&!c&&w.jsxs("div",{className:"memori--deep-thought-disclaimer",children:[w.jsx(ql,{align:"left",content:N("deepThoughtHelper"),children:w.jsx(UY,{})}),w.jsx("h2",{children:g&&(v!=null&&v.pAndCUAccepted)?N("deepThoughtDisclaimerTitle"):N("deepThought")}),g&&!(v!=null&&v.pAndCUAccepted)&&w.jsx("p",{children:N("deepThoughtPreDisclaimerNotAllowed")}),!g&&w.jsx("p",{children:N("deepThoughtPreDisclaimerUnlogged")}),!g&&y&&w.jsx("p",{children:w.jsx(Pt,{outlined:!0,padded:!1,onClick:()=>A(!0),children:"Login"})}),w.jsx("p",{className:"memori--deep-thought-disclaimer-text",children:N("deepThoughtDisclaimer")})]})]})]})};let iMe=class extends D.Component{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("Uncaught error:",e,t)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:w.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.4)",color:"#000",padding:"2rem",borderRadius:"10px"},children:[w.jsx("h2",{children:this.props.t("error.generic")}),w.jsx(Pt,{primary:!0,onClick:()=>this.setState({hasError:!1}),children:this.props.t("error.tryAgain")||"Try again"})]}):this.props.children}};const sMe=sV(["common"])(iMe),eP=({avatar:n,speaking:e=!1})=>w.jsxs("div",{className:er("memori-blob",{"memori-blob--speaking":e}),children:[n&&w.jsx("figure",{children:w.jsx("img",{src:n,alt:"",role:"presentation"})}),w.jsx("div",{className:"mainDiv"}),w.jsx("div",{className:"mainDiv"}),w.jsx("div",{className:"mainDiv"}),w.jsx("div",{className:"mainDiv"}),w.jsx("div",{className:"mainDiv"})]}),oMe=({className:n,title:e})=>w.jsx("svg",{...e?{}:{"aria-hidden":"true"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",focusable:"false",role:"img",className:n,"aria-label":e,children:w.jsx("path",{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"})}),aMe=({className:n,title:e})=>w.jsxs("svg",{...e?{}:{"aria-hidden":"true"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",focusable:"false",role:"img",className:n,"aria-label":e,children:[w.jsx("path",{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}),w.jsx("path",{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"})]}),lMe=({className:n,title:e})=>w.jsx("svg",{...e?{}:{"aria-hidden":"true"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",focusable:"false",role:"img",className:n,"aria-label":e,children:w.jsx("path",{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"})});function cMe(n){let e;const t=new Set,r=(c,u)=>{const d=typeof c=="function"?c(e):c;if(d!==e){const h=e;e=u?d:Object.assign({},e,d),t.forEach(f=>f(e,h))}},i=()=>e,s=(c,u=i,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let h=u(e);function f(){const m=u(e);if(!d(h,m)){const g=h;c(h=m,g)}}return t.add(f),()=>t.delete(f)},l={setState:r,getState:i,subscribe:(c,u,d)=>u||d?s(c,u,d):(t.add(c),()=>t.delete(c)),destroy:()=>t.clear()};return e=n(r,i,l),l}const uMe=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),$z=uMe?D.useEffect:D.useLayoutEffect;function GY(n){const e=typeof n=="function"?cMe(n):n,t=(r=e.getState,i=Object.is)=>{const[,s]=D.useReducer(v=>v+1,0),o=e.getState(),a=D.useRef(o),l=D.useRef(r),c=D.useRef(i),u=D.useRef(!1),d=D.useRef();d.current===void 0&&(d.current=r(o));let h,f=!1;(a.current!==o||l.current!==r||c.current!==i||u.current)&&(h=r(o),f=!i(d.current,h)),$z(()=>{f&&(d.current=h),a.current=o,l.current=r,c.current=i,u.current=!1});const m=D.useRef(o);$z(()=>{const v=()=>{try{const A=e.getState(),C=l.current(A);c.current(d.current,C)||(a.current=A,d.current=C,s())}catch{u.current=!0,s()}},y=e.subscribe(v);return e.getState()!==m.current&&v(),y},[]);const g=f?h:d.current;return D.useDebugValue(g),g};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}var HY={exports:{}},XD={exports:{}};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var iR,Wz;function dMe(){if(Wz)return iR;Wz=1;var n=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable;function r(s){if(s==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(s)}function i(){try{if(!Object.assign)return!1;var s=new String("abc");if(s[5]="de",Object.getOwnPropertyNames(s)[0]==="5")return!1;for(var o={},a=0;a<10;a++)o["_"+String.fromCharCode(a)]=a;var l=Object.getOwnPropertyNames(o).map(function(u){return o[u]});if(l.join("")!=="0123456789")return!1;var c={};return"abcdefghijklmnopqrst".split("").forEach(function(u){c[u]=u}),Object.keys(Object.assign({},c)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return iR=i()?Object.assign:function(s,o){for(var a,l=r(s),c,u=1;u<arguments.length;u++){a=Object(arguments[u]);for(var d in a)e.call(a,d)&&(l[d]=a[d]);if(n){c=n(a);for(var h=0;h<c.length;h++)t.call(a,c[h])&&(l[c[h]]=a[c[h]])}}return l},iR}var VY={exports:{}},$Y={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){var e,t,r,i;if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}if(typeof window>"u"||typeof MessageChannel!="function"){var l=null,c=null,u=function(){if(l!==null)try{var Y=n.unstable_now();l(!0,Y),l=null}catch(ae){throw setTimeout(u,0),ae}};e=function(Y){l!==null?setTimeout(e,0,Y):(l=Y,setTimeout(u,0))},t=function(Y,ae){c=setTimeout(Y,ae)},r=function(){clearTimeout(c)},n.unstable_shouldYield=function(){return!1},i=n.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,h=window.clearTimeout;if(typeof console<"u"){var f=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof f!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var m=!1,g=null,v=-1,y=5,A=0;n.unstable_shouldYield=function(){return n.unstable_now()>=A},i=function(){},n.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<Y?Math.floor(1e3/Y):5};var C=new MessageChannel,T=C.port2;C.port1.onmessage=function(){if(g!==null){var Y=n.unstable_now();A=Y+y;try{g(!0,Y)?T.postMessage(null):(m=!1,g=null)}catch(ae){throw T.postMessage(null),ae}}else m=!1},e=function(Y){g=Y,m||(m=!0,T.postMessage(null))},t=function(Y,ae){v=d(function(){Y(n.unstable_now())},ae)},r=function(){h(v),v=-1}}function x(Y,ae){var fe=Y.length;Y.push(ae);e:for(;;){var we=fe-1>>>1,ge=Y[we];if(ge!==void 0&&0<M(ge,ae))Y[we]=ae,Y[fe]=ge,fe=we;else break e}}function R(Y){return Y=Y[0],Y===void 0?null:Y}function N(Y){var ae=Y[0];if(ae!==void 0){var fe=Y.pop();if(fe!==ae){Y[0]=fe;e:for(var we=0,ge=Y.length;we<ge;){var Se=2*(we+1)-1,Ke=Y[Se],xe=Se+1,Qe=Y[xe];if(Ke!==void 0&&0>M(Ke,fe))Qe!==void 0&&0>M(Qe,Ke)?(Y[we]=Qe,Y[xe]=fe,we=xe):(Y[we]=Ke,Y[Se]=fe,we=Se);else if(Qe!==void 0&&0>M(Qe,fe))Y[we]=Qe,Y[xe]=fe,we=xe;else break e}}return ae}return null}function M(Y,ae){var fe=Y.sortIndex-ae.sortIndex;return fe!==0?fe:Y.id-ae.id}var O=[],P=[],z=1,V=null,$=3,B=!1,q=!1,K=!1;function se(Y){for(var ae=R(P);ae!==null;){if(ae.callback===null)N(P);else if(ae.startTime<=Y)N(P),ae.sortIndex=ae.expirationTime,x(O,ae);else break;ae=R(P)}}function W(Y){if(K=!1,se(Y),!q)if(R(O)!==null)q=!0,e(ee);else{var ae=R(P);ae!==null&&t(W,ae.startTime-Y)}}function ee(Y,ae){q=!1,K&&(K=!1,r()),B=!0;var fe=$;try{for(se(ae),V=R(O);V!==null&&(!(V.expirationTime>ae)||Y&&!n.unstable_shouldYield());){var we=V.callback;if(typeof we=="function"){V.callback=null,$=V.priorityLevel;var ge=we(V.expirationTime<=ae);ae=n.unstable_now(),typeof ge=="function"?V.callback=ge:V===R(O)&&N(O),se(ae)}else N(O);V=R(O)}if(V!==null)var Se=!0;else{var Ke=R(P);Ke!==null&&t(W,Ke.startTime-ae),Se=!1}return Se}finally{V=null,$=fe,B=!1}}var Q=i;n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Y){Y.callback=null},n.unstable_continueExecution=function(){q||B||(q=!0,e(ee))},n.unstable_getCurrentPriorityLevel=function(){return $},n.unstable_getFirstCallbackNode=function(){return R(O)},n.unstable_next=function(Y){switch($){case 1:case 2:case 3:var ae=3;break;default:ae=$}var fe=$;$=ae;try{return Y()}finally{$=fe}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=Q,n.unstable_runWithPriority=function(Y,ae){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var fe=$;$=Y;try{return ae()}finally{$=fe}},n.unstable_scheduleCallback=function(Y,ae,fe){var we=n.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?we+fe:we):fe=we,Y){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=fe+ge,Y={id:z++,callback:ae,priorityLevel:Y,startTime:fe,expirationTime:ge,sortIndex:-1},fe>we?(Y.sortIndex=fe,x(P,Y),R(O)===null&&Y===R(P)&&(K?r():K=!0,t(W,fe-we))):(Y.sortIndex=ge,x(O,Y),q||B||(q=!0,e(ee))),Y},n.unstable_wrapCallback=function(Y){var ae=$;return function(){var fe=$;$=ae;try{return Y.apply(this,arguments)}finally{$=fe}}}})($Y);VY.exports=$Y;var ST=VY.exports;/** @license React v0.26.2
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */XD.exports;(function(n){n.exports=function(t){var r={},i=dMe(),s=D,o=ST;function a(_){for(var E="https://reactjs.org/docs/error-decoder.html?invariant="+_,b=1;b<arguments.length;b++)E+="&args[]="+encodeURIComponent(arguments[b]);return"Minified React error #"+_+"; visit "+E+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,c=60103,u=60106,d=60107,h=60108,f=60114,m=60109,g=60110,v=60112,y=60113,A=60120,C=60115,T=60116,x=60121,R=60129,N=60130,M=60131;if(typeof Symbol=="function"&&Symbol.for){var O=Symbol.for;c=O("react.element"),u=O("react.portal"),d=O("react.fragment"),h=O("react.strict_mode"),f=O("react.profiler"),m=O("react.provider"),g=O("react.context"),v=O("react.forward_ref"),y=O("react.suspense"),A=O("react.suspense_list"),C=O("react.memo"),T=O("react.lazy"),x=O("react.block"),O("react.scope"),R=O("react.debug_trace_mode"),N=O("react.offscreen"),M=O("react.legacy_hidden")}var P=typeof Symbol=="function"&&Symbol.iterator;function z(_){return _===null||typeof _!="object"?null:(_=P&&_[P]||_["@@iterator"],typeof _=="function"?_:null)}function V(_){if(_==null)return null;if(typeof _=="function")return _.displayName||_.name||null;if(typeof _=="string")return _;switch(_){case d:return"Fragment";case u:return"Portal";case f:return"Profiler";case h:return"StrictMode";case y:return"Suspense";case A:return"SuspenseList"}if(typeof _=="object")switch(_.$$typeof){case g:return(_.displayName||"Context")+".Consumer";case m:return(_._context.displayName||"Context")+".Provider";case v:var E=_.render;return E=E.displayName||E.name||"",_.displayName||(E!==""?"ForwardRef("+E+")":"ForwardRef");case C:return V(_.type);case x:return V(_._render);case T:E=_._payload,_=_._init;try{return V(_(E))}catch{}}return null}function $(_){var E=_,b=_;if(_.alternate)for(;E.return;)E=E.return;else{_=E;do E=_,E.flags&1026&&(b=E.return),_=E.return;while(_)}return E.tag===3?b:null}function B(_){if($(_)!==_)throw Error(a(188))}function q(_){var E=_.alternate;if(!E){if(E=$(_),E===null)throw Error(a(188));return E!==_?null:_}for(var b=_,U=E;;){var j=b.return;if(j===null)break;var Z=j.alternate;if(Z===null){if(U=j.return,U!==null){b=U;continue}break}if(j.child===Z.child){for(Z=j.child;Z;){if(Z===b)return B(j),_;if(Z===U)return B(j),E;Z=Z.sibling}throw Error(a(188))}if(b.return!==U.return)b=j,U=Z;else{for(var he=!1,Ce=j.child;Ce;){if(Ce===b){he=!0,b=j,U=Z;break}if(Ce===U){he=!0,U=j,b=Z;break}Ce=Ce.sibling}if(!he){for(Ce=Z.child;Ce;){if(Ce===b){he=!0,b=Z,U=j;break}if(Ce===U){he=!0,U=Z,b=j;break}Ce=Ce.sibling}if(!he)throw Error(a(189))}}if(b.alternate!==U)throw Error(a(190))}if(b.tag!==3)throw Error(a(188));return b.stateNode.current===b?_:E}function K(_){if(_=q(_),!_)return null;for(var E=_;;){if(E.tag===5||E.tag===6)return E;if(E.child)E.child.return=E,E=E.child;else{if(E===_)break;for(;!E.sibling;){if(!E.return||E.return===_)return null;E=E.return}E.sibling.return=E.return,E=E.sibling}}return null}function se(_){if(_=q(_),!_)return null;for(var E=_;;){if(E.tag===5||E.tag===6)return E;if(E.child&&E.tag!==4)E.child.return=E,E=E.child;else{if(E===_)break;for(;!E.sibling;){if(!E.return||E.return===_)return null;E=E.return}E.sibling.return=E.return,E=E.sibling}}return null}function W(_,E){for(var b=_.alternate;E!==null;){if(E===_||E===b)return!0;E=E.return}return!1}var ee=t.getPublicInstance,Q=t.getRootHostContext,Y=t.getChildHostContext,ae=t.prepareForCommit,fe=t.resetAfterCommit,we=t.createInstance,ge=t.appendInitialChild,Se=t.finalizeInitialChildren,Ke=t.prepareUpdate,xe=t.shouldSetTextContent,Qe=t.createTextInstance,We=t.scheduleTimeout,Ve=t.cancelTimeout,te=t.noTimeout,ce=t.isPrimaryRenderer,de=t.supportsMutation,Pe=t.supportsPersistence,Te=t.supportsHydration,De=t.getInstanceFromNode,Ge=t.makeOpaqueHydratingObject,it=t.makeClientId,ke=t.beforeActiveInstanceBlur,ct=t.afterActiveInstanceBlur,oe=t.preparePortalMount,ne=t.supportsTestSelectors,Oe=t.findFiberRoot,st=t.getBoundingRect,Je=t.getTextContent,ft=t.isHiddenSubtree,zt=t.matchAccessibilityRole,je=t.setFocusIfFocusable,Bt=t.setupIntersectionObserver,Ct=t.appendChild,wt=t.appendChildToContainer,xt=t.commitTextUpdate,qt=t.commitMount,cn=t.commitUpdate,Ae=t.insertBefore,ue=t.insertInContainerBefore,et=t.removeChild,Be=t.removeChildFromContainer,lt=t.resetTextContent,St=t.hideInstance,nn=t.hideTextInstance,Dr=t.unhideInstance,mr=t.unhideTextInstance,wn=t.clearContainer,yn=t.cloneInstance,jr=t.createContainerChildSet,Mr=t.appendChildToContainerChildSet,Wi=t.finalizeContainerChildren,nr=t.replaceContainerChildren,ma=t.cloneHiddenInstance,_l=t.cloneHiddenTextInstance,qi=t.canHydrateInstance,Yn=t.canHydrateTextInstance,re=t.isSuspenseInstancePending,Re=t.isSuspenseInstanceFallback,qe=t.getNextHydratableSibling,Le=t.getFirstHydratableChild,$e=t.hydrateInstance,Qt=t.hydrateTextInstance,Jt=t.getNextHydratableInstanceAfterSuspenseInstance,ln=t.commitHydratedContainer,Xt=t.commitHydratedSuspenseInstance,Sn;function Ie(_){if(Sn===void 0)try{throw Error()}catch(b){var E=b.stack.trim().match(/\n( *(at )?)/);Sn=E&&E[1]||""}return`
`+Sn+_}var ye=!1;function rt(_,E){if(!_||ye)return"";ye=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(E)if(E=function(){throw Error()},Object.defineProperty(E.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(E,[])}catch(Ye){var U=Ye}Reflect.construct(_,[],E)}else{try{E.call()}catch(Ye){U=Ye}_.call(E.prototype)}else{try{throw Error()}catch(Ye){U=Ye}_()}}catch(Ye){if(Ye&&U&&typeof Ye.stack=="string"){for(var j=Ye.stack.split(`
`),Z=U.stack.split(`
`),he=j.length-1,Ce=Z.length-1;1<=he&&0<=Ce&&j[he]!==Z[Ce];)Ce--;for(;1<=he&&0<=Ce;he--,Ce--)if(j[he]!==Z[Ce]){if(he!==1||Ce!==1)do if(he--,Ce--,0>Ce||j[he]!==Z[Ce])return`
`+j[he].replace(" at new "," at ");while(1<=he&&0<=Ce);break}}}finally{ye=!1,Error.prepareStackTrace=b}return(_=_?_.displayName||_.name:"")?Ie(_):""}var at=[],$n=-1;function qn(_){return{current:_}}function rn(_){0>$n||(_.current=at[$n],at[$n]=null,$n--)}function Rt(_,E){$n++,at[$n]=_.current,_.current=E}var rr={},mn=qn(rr),Tn=qn(!1),Gr=rr;function gr(_,E){var b=_.type.contextTypes;if(!b)return rr;var U=_.stateNode;if(U&&U.__reactInternalMemoizedUnmaskedChildContext===E)return U.__reactInternalMemoizedMaskedChildContext;var j={},Z;for(Z in b)j[Z]=E[Z];return U&&(_=_.stateNode,_.__reactInternalMemoizedUnmaskedChildContext=E,_.__reactInternalMemoizedMaskedChildContext=j),j}function ri(_){return _=_.childContextTypes,_!=null}function xr(){rn(Tn),rn(mn)}function zr(_,E,b){if(mn.current!==rr)throw Error(a(168));Rt(mn,E),Rt(Tn,b)}function jn(_,E,b){var U=_.stateNode;if(_=E.childContextTypes,typeof U.getChildContext!="function")return b;U=U.getChildContext();for(var j in U)if(!(j in _))throw Error(a(108,V(E)||"Unknown",j));return i({},b,U)}function Dn(_){return _=(_=_.stateNode)&&_.__reactInternalMemoizedMergedChildContext||rr,Gr=mn.current,Rt(mn,_),Rt(Tn,Tn.current),!0}function ga(_,E,b){var U=_.stateNode;if(!U)throw Error(a(169));b?(_=jn(_,E,Gr),U.__reactInternalMemoizedMergedChildContext=_,rn(Tn),rn(mn),Rt(mn,_)):rn(Tn),Rt(Tn,b)}var co=null,is=null,mh=o.unstable_now;mh();var An=0,gn=8;function va(_){if(1&_)return gn=15,1;if(2&_)return gn=14,2;if(4&_)return gn=13,4;var E=24&_;return E!==0?(gn=12,E):_&32?(gn=11,32):(E=192&_,E!==0?(gn=10,E):_&256?(gn=9,256):(E=3584&_,E!==0?(gn=8,E):_&4096?(gn=7,4096):(E=4186112&_,E!==0?(gn=6,E):(E=62914560&_,E!==0?(gn=5,E):_&67108864?(gn=4,67108864):_&134217728?(gn=3,134217728):(E=805306368&_,E!==0?(gn=2,E):1073741824&_?(gn=1,1073741824):(gn=8,_))))))}function $u(_){switch(_){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function Os(_){switch(_){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(a(358,_))}}function tu(_,E){var b=_.pendingLanes;if(b===0)return gn=0;var U=0,j=0,Z=_.expiredLanes,he=_.suspendedLanes,Ce=_.pingedLanes;if(Z!==0)U=Z,j=gn=15;else if(Z=b&134217727,Z!==0){var Ye=Z&~he;Ye!==0?(U=va(Ye),j=gn):(Ce&=Z,Ce!==0&&(U=va(Ce),j=gn))}else Z=b&~he,Z!==0?(U=va(Z),j=gn):Ce!==0&&(U=va(Ce),j=gn);if(U===0)return 0;if(U=31-Ni(U),U=b&((0>U?0:1<<U)<<1)-1,E!==0&&E!==U&&!(E&he)){if(va(E),j<=gn)return E;gn=j}if(E=_.entangledLanes,E!==0)for(_=_.entanglements,E&=U;0<E;)b=31-Ni(E),j=1<<b,U|=_[b],E&=~j;return U}function Lo(_){return _=_.pendingLanes&-1073741825,_!==0?_:_&1073741824?1073741824:0}function ko(_,E){switch(_){case 15:return 1;case 14:return 2;case 12:return _=Rr(24&~E),_===0?ko(10,E):_;case 10:return _=Rr(192&~E),_===0?ko(8,E):_;case 8:return _=Rr(3584&~E),_===0&&(_=Rr(4186112&~E),_===0&&(_=512)),_;case 2:return E=Rr(805306368&~E),E===0&&(E=268435456),E}throw Error(a(358,_))}function Rr(_){return _&-_}function ya(_){for(var E=[],b=0;31>b;b++)E.push(_);return E}function Ri(_,E,b){_.pendingLanes|=E;var U=E-1;_.suspendedLanes&=U,_.pingedLanes&=U,_=_.eventTimes,E=31-Ni(E),_[E]=b}var Ni=Math.clz32?Math.clz32:vh,gh=Math.log,nu=Math.LN2;function vh(_){return _===0?32:31-(gh(_)/nu|0)|0}var yh=o.unstable_runWithPriority,lc=o.unstable_scheduleCallback,ru=o.unstable_cancelCallback,_h=o.unstable_shouldYield,iu=o.unstable_requestPaint,Sh=o.unstable_now,t0=o.unstable_getCurrentPriorityLevel,Ah=o.unstable_ImmediatePriority,En=o.unstable_UserBlockingPriority,qs=o.unstable_NormalPriority,Xn=o.unstable_LowPriority,Wu=o.unstable_IdlePriority,Bo={},up=iu!==void 0?iu:function(){},uo=null,Pi=null,ss=!1,cc=Sh(),Wn=1e4>cc?Sh:function(){return Sh()-cc};function ho(){switch(t0()){case Ah:return 99;case En:return 98;case qs:return 97;case Xn:return 96;case Wu:return 95;default:throw Error(a(332))}}function Sl(_){switch(_){case 99:return Ah;case 98:return En;case 97:return qs;case 96:return Xn;case 95:return Wu;default:throw Error(a(332))}}function _s(_,E){return _=Sl(_),yh(_,E)}function qu(_,E,b){return _=Sl(_),lc(_,E,b)}function yi(){if(Pi!==null){var _=Pi;Pi=null,ru(_)}Qu()}function Qu(){if(!ss&&uo!==null){ss=!0;var _=0;try{var E=uo;_s(99,function(){for(;_<E.length;_++){var b=E[_];do b=b(!0);while(b!==null)}}),uo=null}catch(b){throw uo!==null&&(uo=uo.slice(_+1)),lc(Ah,yi),b}finally{ss=!1}}}var uc=l.ReactCurrentBatchConfig;function _a(_,E){return _===E&&(_!==0||1/_===1/E)||_!==_&&E!==E}var Zt=typeof Object.is=="function"?Object.is:_a,Ju=Object.prototype.hasOwnProperty;function ii(_,E){if(Zt(_,E))return!0;if(typeof _!="object"||_===null||typeof E!="object"||E===null)return!1;var b=Object.keys(_),U=Object.keys(E);if(b.length!==U.length)return!1;for(U=0;U<b.length;U++)if(!Ju.call(E,b[U])||!Zt(_[b[U]],E[b[U]]))return!1;return!0}function Sa(_){switch(_.tag){case 5:return Ie(_.type);case 16:return Ie("Lazy");case 13:return Ie("Suspense");case 19:return Ie("SuspenseList");case 0:case 2:case 15:return _=rt(_.type,!1),_;case 11:return _=rt(_.type.render,!1),_;case 22:return _=rt(_.type._render,!1),_;case 1:return _=rt(_.type,!0),_;default:return""}}function _i(_,E){if(_&&_.defaultProps){E=i({},E),_=_.defaultProps;for(var b in _)E[b]===void 0&&(E[b]=_[b]);return E}return E}var su=qn(null),ou=null,Fo=null,bn=null;function Ku(){bn=Fo=ou=null}function Et(_,E){_=_.type._context,ce?(Rt(su,_._currentValue),_._currentValue=E):(Rt(su,_._currentValue2),_._currentValue2=E)}function dc(_){var E=su.current;rn(su),_=_.type._context,ce?_._currentValue=E:_._currentValue2=E}function Aa(_,E){for(;_!==null;){var b=_.alternate;if((_.childLanes&E)===E){if(b===null||(b.childLanes&E)===E)break;b.childLanes|=E}else _.childLanes|=E,b!==null&&(b.childLanes|=E);_=_.return}}function os(_,E){ou=_,bn=Fo=null,_=_.dependencies,_!==null&&_.firstContext!==null&&(_.lanes&E&&(en=!0),_.firstContext=null)}function Qi(_,E){if(bn!==_&&E!==!1&&E!==0)if((typeof E!="number"||E===1073741823)&&(bn=_,E=1073741823),E={context:_,observedBits:E,next:null},Fo===null){if(ou===null)throw Error(a(308));Fo=E,ou.dependencies={lanes:0,firstContext:E,responders:null}}else Fo=Fo.next=E;return ce?_._currentValue:_._currentValue2}var Ss=!1;function Ea(_){_.updateQueue={baseState:_.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function hc(_,E){_=_.updateQueue,E.updateQueue===_&&(E.updateQueue={baseState:_.baseState,firstBaseUpdate:_.firstBaseUpdate,lastBaseUpdate:_.lastBaseUpdate,shared:_.shared,effects:_.effects})}function Ca(_,E){return{eventTime:_,lane:E,tag:0,payload:null,callback:null,next:null}}function zo(_,E){if(_=_.updateQueue,_!==null){_=_.shared;var b=_.pending;b===null?E.next=E:(E.next=b.next,b.next=E),_.pending=E}}function Ha(_,E){var b=_.updateQueue,U=_.alternate;if(U!==null&&(U=U.updateQueue,b===U)){var j=null,Z=null;if(b=b.firstBaseUpdate,b!==null){do{var he={eventTime:b.eventTime,lane:b.lane,tag:b.tag,payload:b.payload,callback:b.callback,next:null};Z===null?j=Z=he:Z=Z.next=he,b=b.next}while(b!==null);Z===null?j=Z=E:Z=Z.next=E}else j=Z=E;b={baseState:U.baseState,firstBaseUpdate:j,lastBaseUpdate:Z,shared:U.shared,effects:U.effects},_.updateQueue=b;return}_=b.lastBaseUpdate,_===null?b.firstBaseUpdate=E:_.next=E,b.lastBaseUpdate=E}function wa(_,E,b,U){var j=_.updateQueue;Ss=!1;var Z=j.firstBaseUpdate,he=j.lastBaseUpdate,Ce=j.shared.pending;if(Ce!==null){j.shared.pending=null;var Ye=Ce,Mt=Ye.next;Ye.next=null,he===null?Z=Mt:he.next=Mt,he=Ye;var sn=_.alternate;if(sn!==null){sn=sn.updateQueue;var Rn=sn.lastBaseUpdate;Rn!==he&&(Rn===null?sn.firstBaseUpdate=Mt:Rn.next=Mt,sn.lastBaseUpdate=Ye)}}if(Z!==null){Rn=j.baseState,he=0,sn=Mt=Ye=null;do{Ce=Z.lane;var Ut=Z.eventTime;if((U&Ce)===Ce){sn!==null&&(sn=sn.next={eventTime:Ut,lane:0,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null});e:{var $r=_,di=Z;switch(Ce=E,Ut=b,di.tag){case 1:if($r=di.payload,typeof $r=="function"){Rn=$r.call(Ut,Rn,Ce);break e}Rn=$r;break e;case 3:$r.flags=$r.flags&-4097|64;case 0:if($r=di.payload,Ce=typeof $r=="function"?$r.call(Ut,Rn,Ce):$r,Ce==null)break e;Rn=i({},Rn,Ce);break e;case 2:Ss=!0}}Z.callback!==null&&(_.flags|=32,Ce=j.effects,Ce===null?j.effects=[Z]:Ce.push(Z))}else Ut={eventTime:Ut,lane:Ce,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null},sn===null?(Mt=sn=Ut,Ye=Rn):sn=sn.next=Ut,he|=Ce;if(Z=Z.next,Z===null){if(Ce=j.shared.pending,Ce===null)break;Z=Ce.next,Ce.next=null,j.lastBaseUpdate=Ce,j.shared.pending=null}}while(1);sn===null&&(Ye=Rn),j.baseState=Ye,j.firstBaseUpdate=Mt,j.lastBaseUpdate=sn,Lv|=he,_.lanes=he,_.memoizedState=Rn}}function Al(_,E,b){if(_=E.effects,E.effects=null,_!==null)for(E=0;E<_.length;E++){var U=_[E],j=U.callback;if(j!==null){if(U.callback=null,U=b,typeof j!="function")throw Error(a(191,j));j.call(U)}}}var n0=new s.Component().refs;function Eh(_,E,b,U){E=_.memoizedState,b=b(U,E),b=b==null?E:i({},E,b),_.memoizedState=b,_.lanes===0&&(_.updateQueue.baseState=b)}var au={isMounted:function(_){return(_=_._reactInternals)?$(_)===_:!1},enqueueSetState:function(_,E,b){_=_._reactInternals;var U=Ia(),j=Rh(_),Z=Ca(U,j);Z.payload=E,b!=null&&(Z.callback=b),zo(_,Z),sd(_,j,U)},enqueueReplaceState:function(_,E,b){_=_._reactInternals;var U=Ia(),j=Rh(_),Z=Ca(U,j);Z.tag=1,Z.payload=E,b!=null&&(Z.callback=b),zo(_,Z),sd(_,j,U)},enqueueForceUpdate:function(_,E){_=_._reactInternals;var b=Ia(),U=Rh(_),j=Ca(b,U);j.tag=2,E!=null&&(j.callback=E),zo(_,j),sd(_,U,b)}};function Ch(_,E,b,U,j,Z,he){return _=_.stateNode,typeof _.shouldComponentUpdate=="function"?_.shouldComponentUpdate(U,Z,he):E.prototype&&E.prototype.isPureReactComponent?!ii(b,U)||!ii(j,Z):!0}function Uo(_,E,b){var U=!1,j=rr,Z=E.contextType;return typeof Z=="object"&&Z!==null?Z=Qi(Z):(j=ri(E)?Gr:mn.current,U=E.contextTypes,Z=(U=U!=null)?gr(_,j):rr),E=new E(b,Z),_.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=au,_.stateNode=E,E._reactInternals=_,U&&(_=_.stateNode,_.__reactInternalMemoizedUnmaskedChildContext=j,_.__reactInternalMemoizedMaskedChildContext=Z),E}function lu(_,E,b,U){_=E.state,typeof E.componentWillReceiveProps=="function"&&E.componentWillReceiveProps(b,U),typeof E.UNSAFE_componentWillReceiveProps=="function"&&E.UNSAFE_componentWillReceiveProps(b,U),E.state!==_&&au.enqueueReplaceState(E,E.state,null)}function cu(_,E,b,U){var j=_.stateNode;j.props=b,j.state=_.memoizedState,j.refs=n0,Ea(_);var Z=E.contextType;typeof Z=="object"&&Z!==null?j.context=Qi(Z):(Z=ri(E)?Gr:mn.current,j.context=gr(_,Z)),wa(_,b,j,U),j.state=_.memoizedState,Z=E.getDerivedStateFromProps,typeof Z=="function"&&(Eh(_,E,Z,b),j.state=_.memoizedState),typeof E.getDerivedStateFromProps=="function"||typeof j.getSnapshotBeforeUpdate=="function"||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(E=j.state,typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount(),E!==j.state&&au.enqueueReplaceState(j,j.state,null),wa(_,b,j,U),j.state=_.memoizedState),typeof j.componentDidMount=="function"&&(_.flags|=4)}var Ta=Array.isArray;function Yu(_,E,b){if(_=b.ref,_!==null&&typeof _!="function"&&typeof _!="object"){if(b._owner){if(b=b._owner,b){if(b.tag!==1)throw Error(a(309));var U=b.stateNode}if(!U)throw Error(a(147,_));var j=""+_;return E!==null&&E.ref!==null&&typeof E.ref=="function"&&E.ref._stringRef===j?E.ref:(E=function(Z){var he=U.refs;he===n0&&(he=U.refs={}),Z===null?delete he[j]:he[j]=Z},E._stringRef=j,E)}if(typeof _!="string")throw Error(a(284));if(!b._owner)throw Error(a(290,_))}return _}function jo(_,E){if(_.type!=="textarea")throw Error(a(31,Object.prototype.toString.call(E)==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":E))}function Lr(_){function E(ze,Me){if(_){var Xe=ze.lastEffect;Xe!==null?(Xe.nextEffect=Me,ze.lastEffect=Me):ze.firstEffect=ze.lastEffect=Me,Me.nextEffect=null,Me.flags=8}}function b(ze,Me){if(!_)return null;for(;Me!==null;)E(ze,Me),Me=Me.sibling;return null}function U(ze,Me){for(ze=new Map;Me!==null;)Me.key!==null?ze.set(Me.key,Me):ze.set(Me.index,Me),Me=Me.sibling;return ze}function j(ze,Me){return ze=Ph(ze,Me),ze.index=0,ze.sibling=null,ze}function Z(ze,Me,Xe){return ze.index=Xe,_?(Xe=ze.alternate,Xe!==null?(Xe=Xe.index,Xe<Me?(ze.flags=2,Me):Xe):(ze.flags=2,Me)):Me}function he(ze){return _&&ze.alternate===null&&(ze.flags=2),ze}function Ce(ze,Me,Xe,Ft){return Me===null||Me.tag!==6?(Me=Db(Xe,ze.mode,Ft),Me.return=ze,Me):(Me=j(Me,Xe),Me.return=ze,Me)}function Ye(ze,Me,Xe,Ft){return Me!==null&&Me.elementType===Xe.type?(Ft=j(Me,Xe.props),Ft.ref=Yu(ze,Me,Xe),Ft.return=ze,Ft):(Ft=pE(Xe.type,Xe.key,Xe.props,null,ze.mode,Ft),Ft.ref=Yu(ze,Me,Xe),Ft.return=ze,Ft)}function Mt(ze,Me,Xe,Ft){return Me===null||Me.tag!==4||Me.stateNode.containerInfo!==Xe.containerInfo||Me.stateNode.implementation!==Xe.implementation?(Me=Lb(Xe,ze.mode,Ft),Me.return=ze,Me):(Me=j(Me,Xe.children||[]),Me.return=ze,Me)}function sn(ze,Me,Xe,Ft,on){return Me===null||Me.tag!==7?(Me=p0(Xe,ze.mode,Ft,on),Me.return=ze,Me):(Me=j(Me,Xe),Me.return=ze,Me)}function Rn(ze,Me,Xe){if(typeof Me=="string"||typeof Me=="number")return Me=Db(""+Me,ze.mode,Xe),Me.return=ze,Me;if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case c:return Xe=pE(Me.type,Me.key,Me.props,null,ze.mode,Xe),Xe.ref=Yu(ze,null,Me),Xe.return=ze,Xe;case u:return Me=Lb(Me,ze.mode,Xe),Me.return=ze,Me}if(Ta(Me)||z(Me))return Me=p0(Me,ze.mode,Xe,null),Me.return=ze,Me;jo(ze,Me)}return null}function Ut(ze,Me,Xe,Ft){var on=Me!==null?Me.key:null;if(typeof Xe=="string"||typeof Xe=="number")return on!==null?null:Ce(ze,Me,""+Xe,Ft);if(typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case c:return Xe.key===on?Xe.type===d?sn(ze,Me,Xe.props.children,Ft,on):Ye(ze,Me,Xe,Ft):null;case u:return Xe.key===on?Mt(ze,Me,Xe,Ft):null}if(Ta(Xe)||z(Xe))return on!==null?null:sn(ze,Me,Xe,Ft,null);jo(ze,Xe)}return null}function $r(ze,Me,Xe,Ft,on){if(typeof Ft=="string"||typeof Ft=="number")return ze=ze.get(Xe)||null,Ce(Me,ze,""+Ft,on);if(typeof Ft=="object"&&Ft!==null){switch(Ft.$$typeof){case c:return ze=ze.get(Ft.key===null?Xe:Ft.key)||null,Ft.type===d?sn(Me,ze,Ft.props.children,on,Ft.key):Ye(Me,ze,Ft,on);case u:return ze=ze.get(Ft.key===null?Xe:Ft.key)||null,Mt(Me,ze,Ft,on)}if(Ta(Ft)||z(Ft))return ze=ze.get(Xe)||null,sn(Me,ze,Ft,on,null);jo(Me,Ft)}return null}function di(ze,Me,Xe,Ft){for(var on=null,Yr=null,Ln=Me,Pr=Me=0,us=null;Ln!==null&&Pr<Xe.length;Pr++){Ln.index>Pr?(us=Ln,Ln=null):us=Ln.sibling;var vr=Ut(ze,Ln,Xe[Pr],Ft);if(vr===null){Ln===null&&(Ln=us);break}_&&Ln&&vr.alternate===null&&E(ze,Ln),Me=Z(vr,Me,Pr),Yr===null?on=vr:Yr.sibling=vr,Yr=vr,Ln=us}if(Pr===Xe.length)return b(ze,Ln),on;if(Ln===null){for(;Pr<Xe.length;Pr++)Ln=Rn(ze,Xe[Pr],Ft),Ln!==null&&(Me=Z(Ln,Me,Pr),Yr===null?on=Ln:Yr.sibling=Ln,Yr=Ln);return on}for(Ln=U(ze,Ln);Pr<Xe.length;Pr++)us=$r(Ln,ze,Pr,Xe[Pr],Ft),us!==null&&(_&&us.alternate!==null&&Ln.delete(us.key===null?Pr:us.key),Me=Z(us,Me,Pr),Yr===null?on=us:Yr.sibling=us,Yr=us);return _&&Ln.forEach(function(Oh){return E(ze,Oh)}),on}function Rl(ze,Me,Xe,Ft){var on=z(Xe);if(typeof on!="function")throw Error(a(150));if(Xe=on.call(Xe),Xe==null)throw Error(a(151));for(var Yr=on=null,Ln=Me,Pr=Me=0,us=null,vr=Xe.next();Ln!==null&&!vr.done;Pr++,vr=Xe.next()){Ln.index>Pr?(us=Ln,Ln=null):us=Ln.sibling;var Oh=Ut(ze,Ln,vr.value,Ft);if(Oh===null){Ln===null&&(Ln=us);break}_&&Ln&&Oh.alternate===null&&E(ze,Ln),Me=Z(Oh,Me,Pr),Yr===null?on=Oh:Yr.sibling=Oh,Yr=Oh,Ln=us}if(vr.done)return b(ze,Ln),on;if(Ln===null){for(;!vr.done;Pr++,vr=Xe.next())vr=Rn(ze,vr.value,Ft),vr!==null&&(Me=Z(vr,Me,Pr),Yr===null?on=vr:Yr.sibling=vr,Yr=vr);return on}for(Ln=U(ze,Ln);!vr.done;Pr++,vr=Xe.next())vr=$r(Ln,ze,Pr,vr.value,Ft),vr!==null&&(_&&vr.alternate!==null&&Ln.delete(vr.key===null?Pr:vr.key),Me=Z(vr,Me,Pr),Yr===null?on=vr:Yr.sibling=vr,Yr=vr);return _&&Ln.forEach(function(TZ){return E(ze,TZ)}),on}return function(ze,Me,Xe,Ft){var on=typeof Xe=="object"&&Xe!==null&&Xe.type===d&&Xe.key===null;on&&(Xe=Xe.props.children);var Yr=typeof Xe=="object"&&Xe!==null;if(Yr)switch(Xe.$$typeof){case c:e:{for(Yr=Xe.key,on=Me;on!==null;){if(on.key===Yr){switch(on.tag){case 7:if(Xe.type===d){b(ze,on.sibling),Me=j(on,Xe.props.children),Me.return=ze,ze=Me;break e}break;default:if(on.elementType===Xe.type){b(ze,on.sibling),Me=j(on,Xe.props),Me.ref=Yu(ze,on,Xe),Me.return=ze,ze=Me;break e}}b(ze,on);break}else E(ze,on);on=on.sibling}Xe.type===d?(Me=p0(Xe.props.children,ze.mode,Ft,Xe.key),Me.return=ze,ze=Me):(Ft=pE(Xe.type,Xe.key,Xe.props,null,ze.mode,Ft),Ft.ref=Yu(ze,Me,Xe),Ft.return=ze,ze=Ft)}return he(ze);case u:e:{for(on=Xe.key;Me!==null;){if(Me.key===on)if(Me.tag===4&&Me.stateNode.containerInfo===Xe.containerInfo&&Me.stateNode.implementation===Xe.implementation){b(ze,Me.sibling),Me=j(Me,Xe.children||[]),Me.return=ze,ze=Me;break e}else{b(ze,Me);break}else E(ze,Me);Me=Me.sibling}Me=Lb(Xe,ze.mode,Ft),Me.return=ze,ze=Me}return he(ze)}if(typeof Xe=="string"||typeof Xe=="number")return Xe=""+Xe,Me!==null&&Me.tag===6?(b(ze,Me.sibling),Me=j(Me,Xe),Me.return=ze,ze=Me):(b(ze,Me),Me=Db(Xe,ze.mode,Ft),Me.return=ze,ze=Me),he(ze);if(Ta(Xe))return di(ze,Me,Xe,Ft);if(z(Xe))return Rl(ze,Me,Xe,Ft);if(Yr&&jo(ze,Xe),typeof Xe>"u"&&!on)switch(ze.tag){case 1:case 22:case 0:case 11:case 15:throw Error(a(152,V(ze.type)||"Component"))}return b(ze,Me)}}var fc=Lr(!0),dp=Lr(!1),Go={},Ds=qn(Go),El=qn(Go),Cl=qn(Go);function As(_){if(_===Go)throw Error(a(174));return _}function Xu(_,E){Rt(Cl,E),Rt(El,_),Rt(Ds,Go),_=Q(E),rn(Ds),Rt(Ds,_)}function pc(){rn(Ds),rn(El),rn(Cl)}function Qs(_){var E=As(Cl.current),b=As(Ds.current);E=Y(b,_.type,E),b!==E&&(Rt(El,_),Rt(Ds,E))}function Va(_){El.current===_&&(rn(Ds),rn(El))}var Kr=qn(0);function Es(_){for(var E=_;E!==null;){if(E.tag===13){var b=E.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||re(b)||Re(b)))return E}else if(E.tag===19&&E.memoizedProps.revealOrder!==void 0){if(E.flags&64)return E}else if(E.child!==null){E.child.return=E,E=E.child;continue}if(E===_)break;for(;E.sibling===null;){if(E.return===null||E.return===_)return null;E=E.return}E.sibling.return=E.return,E=E.sibling}return null}var as=null,Ji=null,xa=!1;function wl(_,E){var b=Ml(5,null,null,0);b.elementType="DELETED",b.type="DELETED",b.stateNode=E,b.return=_,b.flags=8,_.lastEffect!==null?(_.lastEffect.nextEffect=b,_.lastEffect=b):_.firstEffect=_.lastEffect=b}function wh(_,E){switch(_.tag){case 5:return E=qi(E,_.type,_.pendingProps),E!==null?(_.stateNode=E,!0):!1;case 6:return E=Yn(E,_.pendingProps),E!==null?(_.stateNode=E,!0):!1;case 13:return!1;default:return!1}}function uu(_){if(xa){var E=Ji;if(E){var b=E;if(!wh(_,E)){if(E=qe(b),!E||!wh(_,E)){_.flags=_.flags&-1025|2,xa=!1,as=_;return}wl(as,b)}as=_,Ji=Le(E)}else _.flags=_.flags&-1025|2,xa=!1,as=_}}function r0(_){for(_=_.return;_!==null&&_.tag!==5&&_.tag!==3&&_.tag!==13;)_=_.return;as=_}function Ho(_){if(!Te||_!==as)return!1;if(!xa)return r0(_),xa=!0,!1;var E=_.type;if(_.tag!==5||E!=="head"&&E!=="body"&&!xe(E,_.memoizedProps))for(E=Ji;E;)wl(_,E),E=qe(E);if(r0(_),_.tag===13){if(!Te)throw Error(a(316));if(_=_.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(a(317));Ji=Jt(_)}else Ji=as?qe(_.stateNode):null;return!0}function Tl(){Te&&(Ji=as=null,xa=!1)}var du=[];function Zu(){for(var _=0;_<du.length;_++){var E=du[_];ce?E._workInProgressVersionPrimary=null:E._workInProgressVersionSecondary=null}du.length=0}var hu=l.ReactCurrentDispatcher,si=l.ReactCurrentBatchConfig,ed=0,Nr=null,ls=null,kr=null,mc=!1,gc=!1;function cs(){throw Error(a(321))}function fu(_,E){if(E===null)return!1;for(var b=0;b<E.length&&b<_.length;b++)if(!Zt(_[b],E[b]))return!1;return!0}function xl(_,E,b,U,j,Z){if(ed=Z,Nr=E,E.memoizedState=null,E.updateQueue=null,E.lanes=0,hu.current=_===null||_.memoizedState===null?pt:Lt,_=b(U,j),gc){Z=0;do{if(gc=!1,!(25>Z))throw Error(a(301));Z+=1,kr=ls=null,E.updateQueue=null,hu.current=Ht,_=b(U,j)}while(gc)}if(hu.current=At,E=ls!==null&&ls.next!==null,ed=0,kr=ls=Nr=null,mc=!1,E)throw Error(a(300));return _}function Ls(){var _={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kr===null?Nr.memoizedState=kr=_:kr=kr.next=_,kr}function Ki(){if(ls===null){var _=Nr.alternate;_=_!==null?_.memoizedState:null}else _=ls.next;var E=kr===null?Nr.memoizedState:kr.next;if(E!==null)kr=E,ls=_;else{if(_===null)throw Error(a(310));ls=_,_={memoizedState:ls.memoizedState,baseState:ls.baseState,baseQueue:ls.baseQueue,queue:ls.queue,next:null},kr===null?Nr.memoizedState=kr=_:kr=kr.next=_}return kr}function Js(_,E){return typeof E=="function"?E(_):E}function Il(_){var E=Ki(),b=E.queue;if(b===null)throw Error(a(311));b.lastRenderedReducer=_;var U=ls,j=U.baseQueue,Z=b.pending;if(Z!==null){if(j!==null){var he=j.next;j.next=Z.next,Z.next=he}U.baseQueue=j=Z,b.pending=null}if(j!==null){j=j.next,U=U.baseState;var Ce=he=Z=null,Ye=j;do{var Mt=Ye.lane;if((ed&Mt)===Mt)Ce!==null&&(Ce=Ce.next={lane:0,action:Ye.action,eagerReducer:Ye.eagerReducer,eagerState:Ye.eagerState,next:null}),U=Ye.eagerReducer===_?Ye.eagerState:_(U,Ye.action);else{var sn={lane:Mt,action:Ye.action,eagerReducer:Ye.eagerReducer,eagerState:Ye.eagerState,next:null};Ce===null?(he=Ce=sn,Z=U):Ce=Ce.next=sn,Nr.lanes|=Mt,Lv|=Mt}Ye=Ye.next}while(Ye!==null&&Ye!==j);Ce===null?Z=U:Ce.next=he,Zt(U,E.memoizedState)||(en=!0),E.memoizedState=U,E.baseState=Z,E.baseQueue=Ce,b.lastRenderedState=U}return[E.memoizedState,b.dispatch]}function bl(_){var E=Ki(),b=E.queue;if(b===null)throw Error(a(311));b.lastRenderedReducer=_;var U=b.dispatch,j=b.pending,Z=E.memoizedState;if(j!==null){b.pending=null;var he=j=j.next;do Z=_(Z,he.action),he=he.next;while(he!==j);Zt(Z,E.memoizedState)||(en=!0),E.memoizedState=Z,E.baseQueue===null&&(E.baseState=Z),b.lastRenderedState=Z}return[Z,U]}function i0(_,E,b){var U=E._getVersion;U=U(E._source);var j=ce?E._workInProgressVersionPrimary:E._workInProgressVersionSecondary;if(j!==null?_=j===U:(_=_.mutableReadLanes,(_=(ed&_)===_)&&(ce?E._workInProgressVersionPrimary=U:E._workInProgressVersionSecondary=U,du.push(E))),_)return b(E._source);throw du.push(E),Error(a(350))}function td(_,E,b,U){var j=Vo;if(j===null)throw Error(a(349));var Z=E._getVersion,he=Z(E._source),Ce=hu.current,Ye=Ce.useState(function(){return i0(j,E,b)}),Mt=Ye[1],sn=Ye[0];Ye=kr;var Rn=_.memoizedState,Ut=Rn.refs,$r=Ut.getSnapshot,di=Rn.source;Rn=Rn.subscribe;var Rl=Nr;return _.memoizedState={refs:Ut,source:E,subscribe:U},Ce.useEffect(function(){Ut.getSnapshot=b,Ut.setSnapshot=Mt;var ze=Z(E._source);if(!Zt(he,ze)){ze=b(E._source),Zt(sn,ze)||(Mt(ze),ze=Rh(Rl),j.mutableReadLanes|=ze&j.pendingLanes),ze=j.mutableReadLanes,j.entangledLanes|=ze;for(var Me=j.entanglements,Xe=ze;0<Xe;){var Ft=31-Ni(Xe),on=1<<Ft;Me[Ft]|=ze,Xe&=~on}}},[b,E,U]),Ce.useEffect(function(){return U(E._source,function(){var ze=Ut.getSnapshot,Me=Ut.setSnapshot;try{Me(ze(E._source));var Xe=Rh(Rl);j.mutableReadLanes|=Xe&j.pendingLanes}catch(Ft){Me(function(){throw Ft})}})},[E,U]),Zt($r,b)&&Zt(di,E)&&Zt(Rn,U)||(_={pending:null,dispatch:null,lastRenderedReducer:Js,lastRenderedState:sn},_.dispatch=Mt=ot.bind(null,Nr,_),Ye.queue=_,Ye.baseQueue=null,sn=i0(j,E,b),Ye.memoizedState=Ye.baseState=sn),sn}function hp(_,E,b){var U=Ki();return td(U,_,E,b)}function pu(_){var E=Ls();return typeof _=="function"&&(_=_()),E.memoizedState=E.baseState=_,_=E.queue={pending:null,dispatch:null,lastRenderedReducer:Js,lastRenderedState:_},_=_.dispatch=ot.bind(null,Nr,_),[E.memoizedState,_]}function Th(_,E,b,U){return _={tag:_,create:E,destroy:b,deps:U,next:null},E=Nr.updateQueue,E===null?(E={lastEffect:null},Nr.updateQueue=E,E.lastEffect=_.next=_):(b=E.lastEffect,b===null?E.lastEffect=_.next=_:(U=b.next,b.next=_,_.next=U,E.lastEffect=_)),_}function fp(_){var E=Ls();return _={current:_},E.memoizedState=_}function xh(){return Ki().memoizedState}function fo(_,E,b,U){var j=Ls();Nr.flags|=_,j.memoizedState=Th(1|E,b,void 0,U===void 0?null:U)}function mu(_,E,b,U){var j=Ki();U=U===void 0?null:U;var Z=void 0;if(ls!==null){var he=ls.memoizedState;if(Z=he.destroy,U!==null&&fu(U,he.deps)){Th(E,b,Z,U);return}}Nr.flags|=_,j.memoizedState=Th(1|E,b,Z,U)}function s0(_,E){return fo(516,4,_,E)}function vc(_,E){return mu(516,4,_,E)}function o0(_,E){return mu(4,2,_,E)}function pp(_,E){if(typeof E=="function")return _=_(),E(_),function(){E(null)};if(E!=null)return _=_(),E.current=_,function(){E.current=null}}function a0(_,E,b){return b=b!=null?b.concat([_]):null,mu(4,2,pp.bind(null,E,_),b)}function yc(){}function _e(_,E){var b=Ki();E=E===void 0?null:E;var U=b.memoizedState;return U!==null&&E!==null&&fu(E,U[1])?U[0]:(b.memoizedState=[_,E],_)}function He(_,E){var b=Ki();E=E===void 0?null:E;var U=b.memoizedState;return U!==null&&E!==null&&fu(E,U[1])?U[0]:(_=_(),b.memoizedState=[_,E],_)}function ut(_,E){var b=ho();_s(98>b?98:b,function(){_(!0)}),_s(97<b?97:b,function(){var U=si.transition;si.transition=1;try{_(!1),E()}finally{si.transition=U}})}function ot(_,E,b){var U=Ia(),j=Rh(_),Z={lane:j,action:b,eagerReducer:null,eagerState:null,next:null},he=E.pending;if(he===null?Z.next=Z:(Z.next=he.next,he.next=Z),E.pending=Z,he=_.alternate,_===Nr||he!==null&&he===Nr)gc=mc=!0;else{if(_.lanes===0&&(he===null||he.lanes===0)&&(he=E.lastRenderedReducer,he!==null))try{var Ce=E.lastRenderedState,Ye=he(Ce,b);if(Z.eagerReducer=he,Z.eagerState=Ye,Zt(Ye,Ce))return}catch{}finally{}sd(_,j,U)}}var At={readContext:Qi,useCallback:cs,useContext:cs,useEffect:cs,useImperativeHandle:cs,useLayoutEffect:cs,useMemo:cs,useReducer:cs,useRef:cs,useState:cs,useDebugValue:cs,useDeferredValue:cs,useTransition:cs,useMutableSource:cs,useOpaqueIdentifier:cs,unstable_isNewReconciler:!1},pt={readContext:Qi,useCallback:function(_,E){return Ls().memoizedState=[_,E===void 0?null:E],_},useContext:Qi,useEffect:s0,useImperativeHandle:function(_,E,b){return b=b!=null?b.concat([_]):null,fo(4,2,pp.bind(null,E,_),b)},useLayoutEffect:function(_,E){return fo(4,2,_,E)},useMemo:function(_,E){var b=Ls();return E=E===void 0?null:E,_=_(),b.memoizedState=[_,E],_},useReducer:function(_,E,b){var U=Ls();return E=b!==void 0?b(E):E,U.memoizedState=U.baseState=E,_=U.queue={pending:null,dispatch:null,lastRenderedReducer:_,lastRenderedState:E},_=_.dispatch=ot.bind(null,Nr,_),[U.memoizedState,_]},useRef:fp,useState:pu,useDebugValue:yc,useDeferredValue:function(_){var E=pu(_),b=E[0],U=E[1];return s0(function(){var j=si.transition;si.transition=1;try{U(_)}finally{si.transition=j}},[_]),b},useTransition:function(){var _=pu(!1),E=_[0];return _=ut.bind(null,_[1]),fp(_),[_,E]},useMutableSource:function(_,E,b){var U=Ls();return U.memoizedState={refs:{getSnapshot:E,setSnapshot:null},source:_,subscribe:b},td(U,_,E,b)},useOpaqueIdentifier:function(){if(xa){var _=!1,E=Ge(function(){throw _||(_=!0,b(it())),Error(a(355))}),b=pu(E)[1];return!(Nr.mode&2)&&(Nr.flags|=516,Th(5,function(){b(it())},void 0,null)),E}return E=it(),pu(E),E},unstable_isNewReconciler:!1},Lt={readContext:Qi,useCallback:_e,useContext:Qi,useEffect:vc,useImperativeHandle:a0,useLayoutEffect:o0,useMemo:He,useReducer:Il,useRef:xh,useState:function(){return Il(Js)},useDebugValue:yc,useDeferredValue:function(_){var E=Il(Js),b=E[0],U=E[1];return vc(function(){var j=si.transition;si.transition=1;try{U(_)}finally{si.transition=j}},[_]),b},useTransition:function(){var _=Il(Js)[0];return[xh().current,_]},useMutableSource:hp,useOpaqueIdentifier:function(){return Il(Js)[0]},unstable_isNewReconciler:!1},Ht={readContext:Qi,useCallback:_e,useContext:Qi,useEffect:vc,useImperativeHandle:a0,useLayoutEffect:o0,useMemo:He,useReducer:bl,useRef:xh,useState:function(){return bl(Js)},useDebugValue:yc,useDeferredValue:function(_){var E=bl(Js),b=E[0],U=E[1];return vc(function(){var j=si.transition;si.transition=1;try{U(_)}finally{si.transition=j}},[_]),b},useTransition:function(){var _=bl(Js)[0];return[xh().current,_]},useMutableSource:hp,useOpaqueIdentifier:function(){return bl(Js)[0]},unstable_isNewReconciler:!1},Mn=l.ReactCurrentOwner,en=!1;function Gt(_,E,b,U){E.child=_===null?dp(E,null,b,U):fc(E,_.child,b,U)}function _r(_,E,b,U,j){b=b.render;var Z=E.ref;return os(E,j),U=xl(_,E,b,U,Z,j),_!==null&&!en?(E.updateQueue=_.updateQueue,E.flags&=-517,_.lanes&=~j,G(_,E,j)):(E.flags|=1,Gt(_,E,U,j),E.child)}function Ir(_,E,b,U,j,Z){if(_===null){var he=b.type;return typeof he=="function"&&!Pb(he)&&he.defaultProps===void 0&&b.compare===null&&b.defaultProps===void 0?(E.tag=15,E.type=he,Hr(_,E,he,U,j,Z)):(_=pE(b.type,null,U,E,E.mode,Z),_.ref=E.ref,_.return=E,E.child=_)}return he=_.child,!(j&Z)&&(j=he.memoizedProps,b=b.compare,b=b!==null?b:ii,b(j,U)&&_.ref===E.ref)?G(_,E,Z):(E.flags|=1,_=Ph(he,U),_.ref=E.ref,_.return=E,E.child=_)}function Hr(_,E,b,U,j,Z){if(_!==null&&ii(_.memoizedProps,U)&&_.ref===E.ref)if(en=!1,(Z&j)!==0)_.flags&16384&&(en=!0);else return E.lanes=_.lanes,G(_,E,Z);return lr(_,E,b,U,Z)}function Yi(_,E,b){var U=E.pendingProps,j=U.children,Z=_!==null?_.memoizedState:null;if(U.mode==="hidden"||U.mode==="unstable-defer-without-hiding")if(!(E.mode&4))E.memoizedState={baseLanes:0},dE(E,b);else if(b&1073741824)E.memoizedState={baseLanes:0},dE(E,Z!==null?Z.baseLanes:b);else return _=Z!==null?Z.baseLanes|b:b,E.lanes=E.childLanes=1073741824,E.memoizedState={baseLanes:_},dE(E,_),null;else Z!==null?(U=Z.baseLanes|b,E.memoizedState=null):U=b,dE(E,U);return Gt(_,E,j,b),E.child}function Cs(_,E){var b=E.ref;(_===null&&b!==null||_!==null&&_.ref!==b)&&(E.flags|=128)}function lr(_,E,b,U,j){var Z=ri(b)?Gr:mn.current;return Z=gr(E,Z),os(E,j),b=xl(_,E,b,U,Z,j),_!==null&&!en?(E.updateQueue=_.updateQueue,E.flags&=-517,_.lanes&=~j,G(_,E,j)):(E.flags|=1,Gt(_,E,b,j),E.child)}function Gn(_,E,b,U,j){if(ri(b)){var Z=!0;Dn(E)}else Z=!1;if(os(E,j),E.stateNode===null)_!==null&&(_.alternate=null,E.alternate=null,E.flags|=2),Uo(E,b,U),cu(E,b,U,j),U=!0;else if(_===null){var he=E.stateNode,Ce=E.memoizedProps;he.props=Ce;var Ye=he.context,Mt=b.contextType;typeof Mt=="object"&&Mt!==null?Mt=Qi(Mt):(Mt=ri(b)?Gr:mn.current,Mt=gr(E,Mt));var sn=b.getDerivedStateFromProps,Rn=typeof sn=="function"||typeof he.getSnapshotBeforeUpdate=="function";Rn||typeof he.UNSAFE_componentWillReceiveProps!="function"&&typeof he.componentWillReceiveProps!="function"||(Ce!==U||Ye!==Mt)&&lu(E,he,U,Mt),Ss=!1;var Ut=E.memoizedState;he.state=Ut,wa(E,U,he,j),Ye=E.memoizedState,Ce!==U||Ut!==Ye||Tn.current||Ss?(typeof sn=="function"&&(Eh(E,b,sn,U),Ye=E.memoizedState),(Ce=Ss||Ch(E,b,Ce,U,Ut,Ye,Mt))?(Rn||typeof he.UNSAFE_componentWillMount!="function"&&typeof he.componentWillMount!="function"||(typeof he.componentWillMount=="function"&&he.componentWillMount(),typeof he.UNSAFE_componentWillMount=="function"&&he.UNSAFE_componentWillMount()),typeof he.componentDidMount=="function"&&(E.flags|=4)):(typeof he.componentDidMount=="function"&&(E.flags|=4),E.memoizedProps=U,E.memoizedState=Ye),he.props=U,he.state=Ye,he.context=Mt,U=Ce):(typeof he.componentDidMount=="function"&&(E.flags|=4),U=!1)}else{he=E.stateNode,hc(_,E),Ce=E.memoizedProps,Mt=E.type===E.elementType?Ce:_i(E.type,Ce),he.props=Mt,Rn=E.pendingProps,Ut=he.context,Ye=b.contextType,typeof Ye=="object"&&Ye!==null?Ye=Qi(Ye):(Ye=ri(b)?Gr:mn.current,Ye=gr(E,Ye));var $r=b.getDerivedStateFromProps;(sn=typeof $r=="function"||typeof he.getSnapshotBeforeUpdate=="function")||typeof he.UNSAFE_componentWillReceiveProps!="function"&&typeof he.componentWillReceiveProps!="function"||(Ce!==Rn||Ut!==Ye)&&lu(E,he,U,Ye),Ss=!1,Ut=E.memoizedState,he.state=Ut,wa(E,U,he,j);var di=E.memoizedState;Ce!==Rn||Ut!==di||Tn.current||Ss?(typeof $r=="function"&&(Eh(E,b,$r,U),di=E.memoizedState),(Mt=Ss||Ch(E,b,Mt,U,Ut,di,Ye))?(sn||typeof he.UNSAFE_componentWillUpdate!="function"&&typeof he.componentWillUpdate!="function"||(typeof he.componentWillUpdate=="function"&&he.componentWillUpdate(U,di,Ye),typeof he.UNSAFE_componentWillUpdate=="function"&&he.UNSAFE_componentWillUpdate(U,di,Ye)),typeof he.componentDidUpdate=="function"&&(E.flags|=4),typeof he.getSnapshotBeforeUpdate=="function"&&(E.flags|=256)):(typeof he.componentDidUpdate!="function"||Ce===_.memoizedProps&&Ut===_.memoizedState||(E.flags|=4),typeof he.getSnapshotBeforeUpdate!="function"||Ce===_.memoizedProps&&Ut===_.memoizedState||(E.flags|=256),E.memoizedProps=U,E.memoizedState=di),he.props=U,he.state=di,he.context=Ye,U=Mt):(typeof he.componentDidUpdate!="function"||Ce===_.memoizedProps&&Ut===_.memoizedState||(E.flags|=4),typeof he.getSnapshotBeforeUpdate!="function"||Ce===_.memoizedProps&&Ut===_.memoizedState||(E.flags|=256),U=!1)}return zn(_,E,b,U,Z,j)}function zn(_,E,b,U,j,Z){Cs(_,E);var he=(E.flags&64)!==0;if(!U&&!he)return j&&ga(E,b,!1),G(_,E,Z);U=E.stateNode,Mn.current=E;var Ce=he&&typeof b.getDerivedStateFromError!="function"?null:U.render();return E.flags|=1,_!==null&&he?(E.child=fc(E,_.child,null,Z),E.child=fc(E,null,Ce,Z)):Gt(_,E,Ce,Z),E.memoizedState=U.state,j&&ga(E,b,!0),E.child}function Vr(_){var E=_.stateNode;E.pendingContext?zr(_,E.pendingContext,E.pendingContext!==E.context):E.context&&zr(_,E.context,!1),Xu(_,E.containerInfo)}var Xi={dehydrated:null,retryLane:0};function dr(_,E,b){var U=E.pendingProps,j=Kr.current,Z=!1,he;return(he=(E.flags&64)!==0)||(he=_!==null&&_.memoizedState===null?!1:(j&2)!==0),he?(Z=!0,E.flags&=-65):_!==null&&_.memoizedState===null||U.fallback===void 0||U.unstable_avoidThisFallback===!0||(j|=1),Rt(Kr,j&1),_===null?(U.fallback!==void 0&&uu(E),_=U.children,j=U.fallback,Z?(_=_c(E,_,j,b),E.child.memoizedState={baseLanes:b},E.memoizedState=Xi,_):typeof U.unstable_expectedLoadTime=="number"?(_=_c(E,_,j,b),E.child.memoizedState={baseLanes:b},E.memoizedState=Xi,E.lanes=33554432,_):(b=Ob({mode:"visible",children:_},E.mode,b,null),b.return=E,E.child=b)):_.memoizedState!==null?Z?(U=p(_,E,U.children,U.fallback,b),Z=E.child,j=_.child.memoizedState,Z.memoizedState=j===null?{baseLanes:b}:{baseLanes:j.baseLanes|b},Z.childLanes=_.childLanes&~b,E.memoizedState=Xi,U):(b=Ih(_,E,U.children,b),E.memoizedState=null,b):Z?(U=p(_,E,U.children,U.fallback,b),Z=E.child,j=_.child.memoizedState,Z.memoizedState=j===null?{baseLanes:b}:{baseLanes:j.baseLanes|b},Z.childLanes=_.childLanes&~b,E.memoizedState=Xi,U):(b=Ih(_,E,U.children,b),E.memoizedState=null,b)}function _c(_,E,b,U){var j=_.mode,Z=_.child;return E={mode:"hidden",children:E},!(j&2)&&Z!==null?(Z.childLanes=0,Z.pendingProps=E):Z=Ob(E,j,0,null),b=p0(b,j,U,null),Z.return=_,b.return=_,Z.sibling=b,_.child=Z,b}function Ih(_,E,b,U){var j=_.child;return _=j.sibling,b=Ph(j,{mode:"visible",children:b}),!(E.mode&2)&&(b.lanes=U),b.return=E,b.sibling=null,_!==null&&(_.nextEffect=null,_.flags=8,E.firstEffect=E.lastEffect=_),E.child=b}function p(_,E,b,U,j){var Z=E.mode,he=_.child;_=he.sibling;var Ce={mode:"hidden",children:b};return!(Z&2)&&E.child!==he?(b=E.child,b.childLanes=0,b.pendingProps=Ce,he=b.lastEffect,he!==null?(E.firstEffect=b.firstEffect,E.lastEffect=he,he.nextEffect=null):E.firstEffect=E.lastEffect=null):b=Ph(he,Ce),_!==null?U=Ph(_,U):(U=p0(U,Z,j,null),U.flags|=2),U.return=E,b.return=E,b.sibling=U,E.child=b,U}function S(_,E){_.lanes|=E;var b=_.alternate;b!==null&&(b.lanes|=E),Aa(_.return,E)}function I(_,E,b,U,j,Z){var he=_.memoizedState;he===null?_.memoizedState={isBackwards:E,rendering:null,renderingStartTime:0,last:U,tail:b,tailMode:j,lastEffect:Z}:(he.isBackwards=E,he.rendering=null,he.renderingStartTime=0,he.last=U,he.tail=b,he.tailMode=j,he.lastEffect=Z)}function k(_,E,b){var U=E.pendingProps,j=U.revealOrder,Z=U.tail;if(Gt(_,E,U.children,b),U=Kr.current,U&2)U=U&1|2,E.flags|=64;else{if(_!==null&&_.flags&64)e:for(_=E.child;_!==null;){if(_.tag===13)_.memoizedState!==null&&S(_,b);else if(_.tag===19)S(_,b);else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===E)break e;for(;_.sibling===null;){if(_.return===null||_.return===E)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}U&=1}if(Rt(Kr,U),!(E.mode&2))E.memoizedState=null;else switch(j){case"forwards":for(b=E.child,j=null;b!==null;)_=b.alternate,_!==null&&Es(_)===null&&(j=b),b=b.sibling;b=j,b===null?(j=E.child,E.child=null):(j=b.sibling,b.sibling=null),I(E,!1,j,b,Z,E.lastEffect);break;case"backwards":for(b=null,j=E.child,E.child=null;j!==null;){if(_=j.alternate,_!==null&&Es(_)===null){E.child=j;break}_=j.sibling,j.sibling=b,b=j,j=_}I(E,!0,b,null,Z,E.lastEffect);break;case"together":I(E,!1,null,null,void 0,E.lastEffect);break;default:E.memoizedState=null}return E.child}function G(_,E,b){if(_!==null&&(E.dependencies=_.dependencies),Lv|=E.lanes,b&E.childLanes){if(_!==null&&E.child!==_.child)throw Error(a(153));if(E.child!==null){for(_=E.child,b=Ph(_,_.pendingProps),E.child=b,b.return=E;_.sibling!==null;)_=_.sibling,b=b.sibling=Ph(_,_.pendingProps),b.return=E;b.sibling=null}return E.child}return null}function J(_){_.flags|=4}var me,be,Ue,nt;if(de)me=function(_,E){for(var b=E.child;b!==null;){if(b.tag===5||b.tag===6)ge(_,b.stateNode);else if(b.tag!==4&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===E)break;for(;b.sibling===null;){if(b.return===null||b.return===E)return;b=b.return}b.sibling.return=b.return,b=b.sibling}},be=function(){},Ue=function(_,E,b,U,j){if(_=_.memoizedProps,_!==U){var Z=E.stateNode,he=As(Ds.current);b=Ke(Z,b,_,U,j,he),(E.updateQueue=b)&&J(E)}},nt=function(_,E,b,U){b!==U&&J(E)};else if(Pe){me=function(_,E,b,U){for(var j=E.child;j!==null;){if(j.tag===5){var Z=j.stateNode;b&&U&&(Z=ma(Z,j.type,j.memoizedProps,j)),ge(_,Z)}else if(j.tag===6)Z=j.stateNode,b&&U&&(Z=_l(Z,j.memoizedProps,j)),ge(_,Z);else if(j.tag!==4){if(j.tag===13&&j.flags&4&&(Z=j.memoizedState!==null)){var he=j.child;if(he!==null&&(he.child!==null&&(he.child.return=he,me(_,he,!0,Z)),Z=he.sibling,Z!==null)){Z.return=j,j=Z;continue}}if(j.child!==null){j.child.return=j,j=j.child;continue}}if(j===E)break;for(;j.sibling===null;){if(j.return===null||j.return===E)return;j=j.return}j.sibling.return=j.return,j=j.sibling}};var Nt=function(_,E,b,U){for(var j=E.child;j!==null;){if(j.tag===5){var Z=j.stateNode;b&&U&&(Z=ma(Z,j.type,j.memoizedProps,j)),Mr(_,Z)}else if(j.tag===6)Z=j.stateNode,b&&U&&(Z=_l(Z,j.memoizedProps,j)),Mr(_,Z);else if(j.tag!==4){if(j.tag===13&&j.flags&4&&(Z=j.memoizedState!==null)){var he=j.child;if(he!==null&&(he.child!==null&&(he.child.return=he,Nt(_,he,!0,Z)),Z=he.sibling,Z!==null)){Z.return=j,j=Z;continue}}if(j.child!==null){j.child.return=j,j=j.child;continue}}if(j===E)break;for(;j.sibling===null;){if(j.return===null||j.return===E)return;j=j.return}j.sibling.return=j.return,j=j.sibling}};be=function(_){var E=_.stateNode;if(_.firstEffect!==null){var b=E.containerInfo,U=jr(b);Nt(U,_,!1,!1),E.pendingChildren=U,J(_),Wi(b,U)}},Ue=function(_,E,b,U,j){var Z=_.stateNode,he=_.memoizedProps;if((_=E.firstEffect===null)&&he===U)E.stateNode=Z;else{var Ce=E.stateNode,Ye=As(Ds.current),Mt=null;he!==U&&(Mt=Ke(Ce,b,he,U,j,Ye)),_&&Mt===null?E.stateNode=Z:(Z=yn(Z,Mt,b,he,U,E,_,Ce),Se(Z,b,U,j,Ye)&&J(E),E.stateNode=Z,_?J(E):me(Z,E,!1,!1))}},nt=function(_,E,b,U){b!==U?(_=As(Cl.current),b=As(Ds.current),E.stateNode=Qe(U,_,b,E),J(E)):E.stateNode=_.stateNode}}else be=function(){},Ue=function(){},nt=function(){};function tn(_,E){if(!xa)switch(_.tailMode){case"hidden":E=_.tail;for(var b=null;E!==null;)E.alternate!==null&&(b=E),E=E.sibling;b===null?_.tail=null:b.sibling=null;break;case"collapsed":b=_.tail;for(var U=null;b!==null;)b.alternate!==null&&(U=b),b=b.sibling;U===null?E||_.tail===null?_.tail=null:_.tail.sibling=null:U.sibling=null}}function Un(_,E,b){var U=E.pendingProps;switch(E.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return ri(E.type)&&xr(),null;case 3:return pc(),rn(Tn),rn(mn),Zu(),U=E.stateNode,U.pendingContext&&(U.context=U.pendingContext,U.pendingContext=null),(_===null||_.child===null)&&(Ho(E)?J(E):U.hydrate||(E.flags|=256)),be(E),null;case 5:Va(E);var j=As(Cl.current);if(b=E.type,_!==null&&E.stateNode!=null)Ue(_,E,b,U,j),_.ref!==E.ref&&(E.flags|=128);else{if(!U){if(E.stateNode===null)throw Error(a(166));return null}if(_=As(Ds.current),Ho(E)){if(!Te)throw Error(a(175));_=$e(E.stateNode,E.type,E.memoizedProps,j,_,E),E.updateQueue=_,_!==null&&J(E)}else{var Z=we(b,U,j,_,E);me(Z,E,!1,!1),E.stateNode=Z,Se(Z,b,U,j,_)&&J(E)}E.ref!==null&&(E.flags|=128)}return null;case 6:if(_&&E.stateNode!=null)nt(_,E,_.memoizedProps,U);else{if(typeof U!="string"&&E.stateNode===null)throw Error(a(166));if(_=As(Cl.current),j=As(Ds.current),Ho(E)){if(!Te)throw Error(a(176));Qt(E.stateNode,E.memoizedProps,E)&&J(E)}else E.stateNode=Qe(U,_,j,E)}return null;case 13:return rn(Kr),U=E.memoizedState,E.flags&64?(E.lanes=b,E):(U=U!==null,j=!1,_===null?E.memoizedProps.fallback!==void 0&&Ho(E):j=_.memoizedState!==null,U&&!j&&E.mode&2&&(_===null&&E.memoizedProps.unstable_avoidThisFallback!==!0||Kr.current&1?Ks===0&&(Ks=3):((Ks===0||Ks===3)&&(Ks=4),Vo===null||!(Lv&134217727)&&!(d0&134217727)||h0(Vo,go))),Pe&&U&&(E.flags|=4),de&&(U||j)&&(E.flags|=4),null);case 4:return pc(),be(E),_===null&&oe(E.stateNode.containerInfo),null;case 10:return dc(E),null;case 17:return ri(E.type)&&xr(),null;case 19:if(rn(Kr),U=E.memoizedState,U===null)return null;if(j=(E.flags&64)!==0,Z=U.rendering,Z===null)if(j)tn(U,!1);else{if(Ks!==0||_!==null&&_.flags&64)for(_=E.child;_!==null;){if(Z=Es(_),Z!==null){for(E.flags|=64,tn(U,!1),_=Z.updateQueue,_!==null&&(E.updateQueue=_,E.flags|=4),U.lastEffect===null&&(E.firstEffect=null),E.lastEffect=U.lastEffect,_=b,U=E.child;U!==null;)j=U,b=_,j.flags&=2,j.nextEffect=null,j.firstEffect=null,j.lastEffect=null,Z=j.alternate,Z===null?(j.childLanes=0,j.lanes=b,j.child=null,j.memoizedProps=null,j.memoizedState=null,j.updateQueue=null,j.dependencies=null,j.stateNode=null):(j.childLanes=Z.childLanes,j.lanes=Z.lanes,j.child=Z.child,j.memoizedProps=Z.memoizedProps,j.memoizedState=Z.memoizedState,j.updateQueue=Z.updateQueue,j.type=Z.type,b=Z.dependencies,j.dependencies=b===null?null:{lanes:b.lanes,firstContext:b.firstContext}),U=U.sibling;return Rt(Kr,Kr.current&1|2),E.child}_=_.sibling}U.tail!==null&&Wn()>Cb&&(E.flags|=64,j=!0,tn(U,!1),E.lanes=33554432)}else{if(!j)if(_=Es(Z),_!==null){if(E.flags|=64,j=!0,_=_.updateQueue,_!==null&&(E.updateQueue=_,E.flags|=4),tn(U,!0),U.tail===null&&U.tailMode==="hidden"&&!Z.alternate&&!xa)return E=E.lastEffect=U.lastEffect,E!==null&&(E.nextEffect=null),null}else 2*Wn()-U.renderingStartTime>Cb&&b!==1073741824&&(E.flags|=64,j=!0,tn(U,!1),E.lanes=33554432);U.isBackwards?(Z.sibling=E.child,E.child=Z):(_=U.last,_!==null?_.sibling=Z:E.child=Z,U.last=Z)}return U.tail!==null?(_=U.tail,U.rendering=_,U.tail=_.sibling,U.lastEffect=E.lastEffect,U.renderingStartTime=Wn(),_.sibling=null,E=Kr.current,Rt(Kr,j?E&1|2:E&1),_):null;case 23:case 24:return Mb(),_!==null&&_.memoizedState!==null!=(E.memoizedState!==null)&&U.mode!=="unstable-defer-without-hiding"&&(E.flags|=4),null}throw Error(a(156,E.tag))}function Oi(_){switch(_.tag){case 1:ri(_.type)&&xr();var E=_.flags;return E&4096?(_.flags=E&-4097|64,_):null;case 3:if(pc(),rn(Tn),rn(mn),Zu(),E=_.flags,E&64)throw Error(a(285));return _.flags=E&-4097|64,_;case 5:return Va(_),null;case 13:return rn(Kr),E=_.flags,E&4096?(_.flags=E&-4097|64,_):null;case 19:return rn(Kr),null;case 4:return pc(),null;case 10:return dc(_),null;case 23:case 24:return Mb(),null;default:return null}}function Di(_,E){try{var b="",U=E;do b+=Sa(U),U=U.return;while(U);var j=b}catch(Z){j=`
Error generating stack: `+Z.message+`
`+Z.stack}return{value:_,source:E,stack:j}}function po(_,E){try{console.error(E.value)}catch(b){setTimeout(function(){throw b})}}var mo=typeof WeakMap=="function"?WeakMap:Map;function nd(_,E,b){b=Ca(-1,b),b.tag=3,b.payload={element:null};var U=E.value;return b.callback=function(){aE||(aE=!0,wb=U),po(_,E)},b}function VA(_,E,b){b=Ca(-1,b),b.tag=3;var U=_.type.getDerivedStateFromError;if(typeof U=="function"){var j=E.value;b.payload=function(){return po(_,E),U(j)}}var Z=_.stateNode;return Z!==null&&typeof Z.componentDidCatch=="function"&&(b.callback=function(){typeof U!="function"&&(gu===null?gu=new Set([this]):gu.add(this),po(_,E));var he=E.stack;this.componentDidCatch(E.value,{componentStack:he!==null?he:""})}),b}var db=typeof WeakSet=="function"?WeakSet:Set;function $A(_){var E=_.ref;if(E!==null)if(typeof E=="function")try{E(null)}catch(b){Nh(_,b)}else E.current=null}function WA(_,E){switch(E.tag){case 0:case 11:case 15:case 22:return;case 1:if(E.flags&256&&_!==null){var b=_.memoizedProps,U=_.memoizedState;_=E.stateNode,E=_.getSnapshotBeforeUpdate(E.elementType===E.type?b:_i(E.type,b),U),_.__reactInternalSnapshotBeforeUpdate=E}return;case 3:de&&E.flags&256&&wn(E.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(a(163))}function qA(_,E){if(E=E.updateQueue,E=E!==null?E.lastEffect:null,E!==null){var b=E=E.next;do{if((b.tag&_)===_){var U=b.destroy;b.destroy=void 0,U!==void 0&&U()}b=b.next}while(b!==E)}}function QA(_,E,b){switch(b.tag){case 0:case 11:case 15:case 22:if(E=b.updateQueue,E=E!==null?E.lastEffect:null,E!==null){_=E=E.next;do{if((_.tag&3)===3){var U=_.create;_.destroy=U()}_=_.next}while(_!==E)}if(E=b.updateQueue,E=E!==null?E.lastEffect:null,E!==null){_=E=E.next;do{var j=_;U=j.next,j=j.tag,j&4&&j&1&&(T5(b,_),gZ(b,_)),_=U}while(_!==E)}return;case 1:_=b.stateNode,b.flags&4&&(E===null?_.componentDidMount():(U=b.elementType===b.type?E.memoizedProps:_i(b.type,E.memoizedProps),_.componentDidUpdate(U,E.memoizedState,_.__reactInternalSnapshotBeforeUpdate))),E=b.updateQueue,E!==null&&Al(b,E,_);return;case 3:if(E=b.updateQueue,E!==null){if(_=null,b.child!==null)switch(b.child.tag){case 5:_=ee(b.child.stateNode);break;case 1:_=b.child.stateNode}Al(b,E,_)}return;case 5:_=b.stateNode,E===null&&b.flags&4&&qt(_,b.type,b.memoizedProps,b);return;case 6:return;case 4:return;case 12:return;case 13:Te&&b.memoizedState===null&&(b=b.alternate,b!==null&&(b=b.memoizedState,b!==null&&(b=b.dehydrated,b!==null&&Xt(b))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(a(163))}function Si(_,E){if(de)for(var b=_;;){if(b.tag===5){var U=b.stateNode;E?St(U):Dr(b.stateNode,b.memoizedProps)}else if(b.tag===6)U=b.stateNode,E?nn(U):mr(U,b.memoizedProps);else if((b.tag!==23&&b.tag!==24||b.memoizedState===null||b===_)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===_)break;for(;b.sibling===null;){if(b.return===null||b.return===_)return;b=b.return}b.sibling.return=b.return,b=b.sibling}}function mp(_,E){if(is&&typeof is.onCommitFiberUnmount=="function")try{is.onCommitFiberUnmount(co,E)}catch{}switch(E.tag){case 0:case 11:case 14:case 15:case 22:if(_=E.updateQueue,_!==null&&(_=_.lastEffect,_!==null)){var b=_=_.next;do{var U=b,j=U.destroy;if(U=U.tag,j!==void 0)if(U&4)T5(E,b);else{U=E;try{j()}catch(Z){Nh(U,Z)}}b=b.next}while(b!==_)}break;case 1:if($A(E),_=E.stateNode,typeof _.componentWillUnmount=="function")try{_.props=E.memoizedProps,_.state=E.memoizedState,_.componentWillUnmount()}catch(Z){Nh(E,Z)}break;case 5:$A(E);break;case 4:de?m5(_,E):Pe&&Pe&&(E=E.stateNode.containerInfo,_=jr(E),nr(E,_))}}function JA(_,E){for(var b=E;;)if(mp(_,b),b.child===null||de&&b.tag===4){if(b===E)break;for(;b.sibling===null;){if(b.return===null||b.return===E)return;b=b.return}b.sibling.return=b.return,b=b.sibling}else b.child.return=b,b=b.child}function KA(_){_.alternate=null,_.child=null,_.dependencies=null,_.firstEffect=null,_.lastEffect=null,_.memoizedProps=null,_.memoizedState=null,_.pendingProps=null,_.return=null,_.updateQueue=null}function YA(_){return _.tag===5||_.tag===3||_.tag===4}function l0(_){if(de){e:{for(var E=_.return;E!==null;){if(YA(E))break e;E=E.return}throw Error(a(160))}var b=E;switch(E=b.stateNode,b.tag){case 5:var U=!1;break;case 3:E=E.containerInfo,U=!0;break;case 4:E=E.containerInfo,U=!0;break;default:throw Error(a(161))}b.flags&16&&(lt(E),b.flags&=-17);e:t:for(b=_;;){for(;b.sibling===null;){if(b.return===null||YA(b.return)){b=null;break e}b=b.return}for(b.sibling.return=b.return,b=b.sibling;b.tag!==5&&b.tag!==6&&b.tag!==18;){if(b.flags&2||b.child===null||b.tag===4)continue t;b.child.return=b,b=b.child}if(!(b.flags&2)){b=b.stateNode;break e}}U?c0(_,b,E):Ov(_,b,E)}}function c0(_,E,b){var U=_.tag,j=U===5||U===6;if(j)_=j?_.stateNode:_.stateNode.instance,E?ue(b,_,E):wt(b,_);else if(U!==4&&(_=_.child,_!==null))for(c0(_,E,b),_=_.sibling;_!==null;)c0(_,E,b),_=_.sibling}function Ov(_,E,b){var U=_.tag,j=U===5||U===6;if(j)_=j?_.stateNode:_.stateNode.instance,E?Ae(b,_,E):Ct(b,_);else if(U!==4&&(_=_.child,_!==null))for(Ov(_,E,b),_=_.sibling;_!==null;)Ov(_,E,b),_=_.sibling}function m5(_,E){for(var b=E,U=!1,j,Z;;){if(!U){U=b.return;e:for(;;){if(U===null)throw Error(a(160));switch(j=U.stateNode,U.tag){case 5:Z=!1;break e;case 3:j=j.containerInfo,Z=!0;break e;case 4:j=j.containerInfo,Z=!0;break e}U=U.return}U=!0}if(b.tag===5||b.tag===6)JA(_,b),Z?Be(j,b.stateNode):et(j,b.stateNode);else if(b.tag===4){if(b.child!==null){j=b.stateNode.containerInfo,Z=!0,b.child.return=b,b=b.child;continue}}else if(mp(_,b),b.child!==null){b.child.return=b,b=b.child;continue}if(b===E)break;for(;b.sibling===null;){if(b.return===null||b.return===E)return;b=b.return,b.tag===4&&(U=!1)}b.sibling.return=b.return,b=b.sibling}}function hb(_,E){if(de){switch(E.tag){case 0:case 11:case 14:case 15:case 22:qA(3,E);return;case 1:return;case 5:var b=E.stateNode;if(b!=null){var U=E.memoizedProps;_=_!==null?_.memoizedProps:U;var j=E.type,Z=E.updateQueue;E.updateQueue=null,Z!==null&&cn(b,Z,j,_,U,E)}return;case 6:if(E.stateNode===null)throw Error(a(162));b=E.memoizedProps,xt(E.stateNode,_!==null?_.memoizedProps:b,b);return;case 3:Te&&(E=E.stateNode,E.hydrate&&(E.hydrate=!1,ln(E.containerInfo)));return;case 12:return;case 13:g5(E),XA(E);return;case 19:XA(E);return;case 17:return;case 23:case 24:Si(E,E.memoizedState!==null);return}throw Error(a(163))}switch(E.tag){case 0:case 11:case 14:case 15:case 22:qA(3,E);return;case 12:return;case 13:g5(E),XA(E);return;case 19:XA(E);return;case 3:Te&&(b=E.stateNode,b.hydrate&&(b.hydrate=!1,ln(b.containerInfo)));break;case 23:case 24:return}e:if(Pe){switch(E.tag){case 1:case 5:case 6:case 20:break e;case 3:case 4:E=E.stateNode,nr(E.containerInfo,E.pendingChildren);break e}throw Error(a(163))}}function g5(_){_.memoizedState!==null&&(Eb=Wn(),de&&Si(_.child,!0))}function XA(_){var E=_.updateQueue;if(E!==null){_.updateQueue=null;var b=_.stateNode;b===null&&(b=_.stateNode=new db),E.forEach(function(U){var j=_Z.bind(null,_,U);b.has(U)||(b.add(U),U.then(j,j))})}}function lZ(_,E){return _!==null&&(_=_.memoizedState,_===null||_.dehydrated!==null)?(E=E.memoizedState,E!==null&&E.dehydrated===null):!1}var ZA=0,eE=1,tE=2,nE=3,rE=4;if(typeof Symbol=="function"&&Symbol.for){var Dv=Symbol.for;ZA=Dv("selector.component"),eE=Dv("selector.has_pseudo_class"),tE=Dv("selector.role"),nE=Dv("selector.test_id"),rE=Dv("selector.text")}function fb(_){var E=De(_);if(E!=null){if(typeof E.memoizedProps["data-testname"]!="string")throw Error(a(364));return E}if(_=Oe(_),_===null)throw Error(a(362));return _.stateNode.current}function pb(_,E){switch(E.$$typeof){case ZA:if(_.type===E.value)return!0;break;case eE:e:{E=E.value,_=[_,0];for(var b=0;b<_.length;){var U=_[b++],j=_[b++],Z=E[j];if(U.tag!==5||!ft(U)){for(;Z!=null&&pb(U,Z);)j++,Z=E[j];if(j===E.length){E=!0;break e}else for(U=U.child;U!==null;)_.push(U,j),U=U.sibling}}E=!1}return E;case tE:if(_.tag===5&&zt(_.stateNode,E.value))return!0;break;case rE:if((_.tag===5||_.tag===6)&&(_=Je(_),_!==null&&0<=_.indexOf(E.value)))return!0;break;case nE:if(_.tag===5&&(_=_.memoizedProps["data-testname"],typeof _=="string"&&_.toLowerCase()===E.value.toLowerCase()))return!0;break;default:throw Error(a(365,E))}return!1}function mb(_){switch(_.$$typeof){case ZA:return"<"+(V(_.value)||"Unknown")+">";case eE:return":has("+(mb(_)||"")+")";case tE:return'[role="'+_.value+'"]';case rE:return'"'+_.value+'"';case nE:return'[data-testname="'+_.value+'"]';default:throw Error(a(365,_))}}function v5(_,E){var b=[];_=[_,0];for(var U=0;U<_.length;){var j=_[U++],Z=_[U++],he=E[Z];if(j.tag!==5||!ft(j)){for(;he!=null&&pb(j,he);)Z++,he=E[Z];if(Z===E.length)b.push(j);else for(j=j.child;j!==null;)_.push(j,Z),j=j.sibling}}return b}function gb(_,E){if(!ne)throw Error(a(363));_=fb(_),_=v5(_,E),E=[],_=Array.from(_);for(var b=0;b<_.length;){var U=_[b++];if(U.tag===5)ft(U)||E.push(U.stateNode);else for(U=U.child;U!==null;)_.push(U),U=U.sibling}return E}var iE=null;function cZ(_){if(iE===null)try{var E=("require"+Math.random()).slice(0,7);iE=(n&&n[E]).call(n,"timers").setImmediate}catch{iE=function(U){var j=new MessageChannel;j.port1.onmessage=U,j.port2.postMessage(void 0)}}return iE(_)}var uZ=Math.ceil,sE=l.ReactCurrentDispatcher,vb=l.ReactCurrentOwner,yb=l.IsSomeRendererActing,vn=0,Vo=null,ws=null,go=0,gp=0,_b=qn(0),Ks=0,oE=null,u0=0,Lv=0,d0=0,Sb=0,Ab=null,Eb=0,Cb=1/0;function bh(){Cb=Wn()+500}var $t=null,aE=!1,wb=null,gu=null,Mh=!1,kv=null,Bv=90,Tb=[],xb=[],rd=null,Fv=0,Ib=null,lE=-1,id=0,cE=0,zv=null,Uv=!1;function Ia(){return vn&48?Wn():lE!==-1?lE:lE=Wn()}function Rh(_){if(_=_.mode,!(_&2))return 1;if(!(_&4))return ho()===99?1:2;if(id===0&&(id=u0),uc.transition!==0){cE!==0&&(cE=Ab!==null?Ab.pendingLanes:0),_=id;var E=4186112&~cE;return E&=-E,E===0&&(_=4186112&~_,E=_&-_,E===0&&(E=8192)),E}return _=ho(),vn&4&&_===98?_=ko(12,id):(_=$u(_),_=ko(_,id)),_}function sd(_,E,b){if(50<Fv)throw Fv=0,Ib=null,Error(a(185));if(_=uE(_,E),_===null)return null;Ri(_,E,b),_===Vo&&(d0|=E,Ks===4&&h0(_,go));var U=ho();E===1?vn&8&&!(vn&48)?bb(_):($a(_,b),vn===0&&(bh(),yi())):(!(vn&4)||U!==98&&U!==99||(rd===null?rd=new Set([_]):rd.add(_)),$a(_,b)),Ab=_}function uE(_,E){_.lanes|=E;var b=_.alternate;for(b!==null&&(b.lanes|=E),b=_,_=_.return;_!==null;)_.childLanes|=E,b=_.alternate,b!==null&&(b.childLanes|=E),b=_,_=_.return;return b.tag===3?b.stateNode:null}function $a(_,E){for(var b=_.callbackNode,U=_.suspendedLanes,j=_.pingedLanes,Z=_.expirationTimes,he=_.pendingLanes;0<he;){var Ce=31-Ni(he),Ye=1<<Ce,Mt=Z[Ce];if(Mt===-1){if(!(Ye&U)||Ye&j){Mt=E,va(Ye);var sn=gn;Z[Ce]=10<=sn?Mt+250:6<=sn?Mt+5e3:-1}}else Mt<=E&&(_.expiredLanes|=Ye);he&=~Ye}if(U=tu(_,_===Vo?go:0),E=gn,U===0)b!==null&&(b!==Bo&&ru(b),_.callbackNode=null,_.callbackPriority=0);else{if(b!==null){if(_.callbackPriority===E)return;b!==Bo&&ru(b)}E===15?(b=bb.bind(null,_),uo===null?(uo=[b],Pi=lc(Ah,Qu)):uo.push(b),b=Bo):E===14?b=qu(99,bb.bind(null,_)):(b=Os(E),b=qu(b,y5.bind(null,_))),_.callbackPriority=E,_.callbackNode=b}}function y5(_){if(lE=-1,cE=id=0,vn&48)throw Error(a(327));var E=_.callbackNode;if(od()&&_.callbackNode!==E)return null;var b=tu(_,_===Vo?go:0);if(b===0)return null;var U=b,j=vn;vn|=16;var Z=E5();(Vo!==_||go!==U)&&(bh(),f0(_,U));do try{fZ();break}catch(Ce){A5(_,Ce)}while(1);if(Ku(),sE.current=Z,vn=j,ws!==null?U=0:(Vo=null,go=0,U=Ks),u0&d0)f0(_,0);else if(U!==0){if(U===2&&(vn|=64,_.hydrate&&(_.hydrate=!1,wn(_.containerInfo)),b=Lo(_),b!==0&&(U=jv(_,b))),U===1)throw E=oE,f0(_,0),h0(_,b),$a(_,Wn()),E;switch(_.finishedWork=_.current.alternate,_.finishedLanes=b,U){case 0:case 1:throw Error(a(345));case 2:vp(_);break;case 3:if(h0(_,b),(b&62914560)===b&&(U=Eb+500-Wn(),10<U)){if(tu(_,0)!==0)break;if(j=_.suspendedLanes,(j&b)!==b){Ia(),_.pingedLanes|=_.suspendedLanes&j;break}_.timeoutHandle=We(vp.bind(null,_),U);break}vp(_);break;case 4:if(h0(_,b),(b&4186112)===b)break;for(U=_.eventTimes,j=-1;0<b;){var he=31-Ni(b);Z=1<<he,he=U[he],he>j&&(j=he),b&=~Z}if(b=j,b=Wn()-b,b=(120>b?120:480>b?480:1080>b?1080:1920>b?1920:3e3>b?3e3:4320>b?4320:1960*uZ(b/1960))-b,10<b){_.timeoutHandle=We(vp.bind(null,_),b);break}vp(_);break;case 5:vp(_);break;default:throw Error(a(329))}}return $a(_,Wn()),_.callbackNode===E?y5.bind(null,_):null}function h0(_,E){for(E&=~Sb,E&=~d0,_.suspendedLanes|=E,_.pingedLanes&=~E,_=_.expirationTimes;0<E;){var b=31-Ni(E),U=1<<b;_[b]=-1,E&=~U}}function bb(_){if(vn&48)throw Error(a(327));if(od(),_===Vo&&_.expiredLanes&go){var E=go,b=jv(_,E);u0&d0&&(E=tu(_,E),b=jv(_,E))}else E=tu(_,0),b=jv(_,E);if(_.tag!==0&&b===2&&(vn|=64,_.hydrate&&(_.hydrate=!1,wn(_.containerInfo)),E=Lo(_),E!==0&&(b=jv(_,E))),b===1)throw b=oE,f0(_,0),h0(_,E),$a(_,Wn()),b;return _.finishedWork=_.current.alternate,_.finishedLanes=E,vp(_),$a(_,Wn()),null}function dZ(){if(rd!==null){var _=rd;rd=null,_.forEach(function(E){E.expiredLanes|=24&E.pendingLanes,$a(E,Wn())})}yi()}function _5(_,E){var b=vn;vn|=1;try{return _(E)}finally{vn=b,vn===0&&(bh(),yi())}}function S5(_,E){var b=vn;if(b&48)return _(E);vn|=1;try{if(_)return _s(99,_.bind(null,E))}finally{vn=b,yi()}}function dE(_,E){Rt(_b,gp),gp|=E,u0|=E}function Mb(){gp=_b.current,rn(_b)}function f0(_,E){_.finishedWork=null,_.finishedLanes=0;var b=_.timeoutHandle;if(b!==te&&(_.timeoutHandle=te,Ve(b)),ws!==null)for(b=ws.return;b!==null;){var U=b;switch(U.tag){case 1:U=U.type.childContextTypes,U!=null&&xr();break;case 3:pc(),rn(Tn),rn(mn),Zu();break;case 5:Va(U);break;case 4:pc();break;case 13:rn(Kr);break;case 19:rn(Kr);break;case 10:dc(U);break;case 23:case 24:Mb()}b=b.return}Vo=_,ws=Ph(_.current,null),go=gp=u0=E,Ks=0,oE=null,Sb=d0=Lv=0}function A5(_,E){do{var b=ws;try{if(Ku(),hu.current=At,mc){for(var U=Nr.memoizedState;U!==null;){var j=U.queue;j!==null&&(j.pending=null),U=U.next}mc=!1}if(ed=0,kr=ls=Nr=null,gc=!1,vb.current=null,b===null||b.return===null){Ks=1,oE=E,ws=null;break}e:{var Z=_,he=b.return,Ce=b,Ye=E;if(E=go,Ce.flags|=2048,Ce.firstEffect=Ce.lastEffect=null,Ye!==null&&typeof Ye=="object"&&typeof Ye.then=="function"){var Mt=Ye;if(!(Ce.mode&2)){var sn=Ce.alternate;sn?(Ce.updateQueue=sn.updateQueue,Ce.memoizedState=sn.memoizedState,Ce.lanes=sn.lanes):(Ce.updateQueue=null,Ce.memoizedState=null)}var Rn=(Kr.current&1)!==0,Ut=he;do{var $r;if($r=Ut.tag===13){var di=Ut.memoizedState;if(di!==null)$r=di.dehydrated!==null;else{var Rl=Ut.memoizedProps;$r=Rl.fallback===void 0?!1:Rl.unstable_avoidThisFallback!==!0?!0:!Rn}}if($r){var ze=Ut.updateQueue;if(ze===null){var Me=new Set;Me.add(Mt),Ut.updateQueue=Me}else ze.add(Mt);if(!(Ut.mode&2)){if(Ut.flags|=64,Ce.flags|=16384,Ce.flags&=-2981,Ce.tag===1)if(Ce.alternate===null)Ce.tag=17;else{var Xe=Ca(-1,1);Xe.tag=2,zo(Ce,Xe)}Ce.lanes|=1;break e}Ye=void 0,Ce=E;var Ft=Z.pingCache;if(Ft===null?(Ft=Z.pingCache=new mo,Ye=new Set,Ft.set(Mt,Ye)):(Ye=Ft.get(Mt),Ye===void 0&&(Ye=new Set,Ft.set(Mt,Ye))),!Ye.has(Ce)){Ye.add(Ce);var on=yZ.bind(null,Z,Mt,Ce);Mt.then(on,on)}Ut.flags|=4096,Ut.lanes=E;break e}Ut=Ut.return}while(Ut!==null);Ye=Error((V(Ce.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}Ks!==5&&(Ks=2),Ye=Di(Ye,Ce),Ut=he;do{switch(Ut.tag){case 3:Z=Ye,Ut.flags|=4096,E&=-E,Ut.lanes|=E;var Yr=nd(Ut,Z,E);Ha(Ut,Yr);break e;case 1:Z=Ye;var Ln=Ut.type,Pr=Ut.stateNode;if(!(Ut.flags&64)&&(typeof Ln.getDerivedStateFromError=="function"||Pr!==null&&typeof Pr.componentDidCatch=="function"&&(gu===null||!gu.has(Pr)))){Ut.flags|=4096,E&=-E,Ut.lanes|=E;var us=VA(Ut,Z,E);Ha(Ut,us);break e}}Ut=Ut.return}while(Ut!==null)}w5(b)}catch(vr){E=vr,ws===b&&b!==null&&(ws=b=b.return);continue}break}while(1)}function E5(){var _=sE.current;return sE.current=At,_===null?At:_}function jv(_,E){var b=vn;vn|=16;var U=E5();Vo===_&&go===E||f0(_,E);do try{hZ();break}catch(j){A5(_,j)}while(1);if(Ku(),vn=b,sE.current=U,ws!==null)throw Error(a(261));return Vo=null,go=0,Ks}function hZ(){for(;ws!==null;)C5(ws)}function fZ(){for(;ws!==null&&!_h();)C5(ws)}function C5(_){var E=I5(_.alternate,_,gp);_.memoizedProps=_.pendingProps,E===null?w5(_):ws=E,vb.current=null}function w5(_){var E=_;do{var b=E.alternate;if(_=E.return,E.flags&2048){if(b=Oi(E),b!==null){b.flags&=2047,ws=b;return}_!==null&&(_.firstEffect=_.lastEffect=null,_.flags|=2048)}else{if(b=Un(b,E,gp),b!==null){ws=b;return}if(b=E,b.tag!==24&&b.tag!==23||b.memoizedState===null||gp&1073741824||!(b.mode&4)){for(var U=0,j=b.child;j!==null;)U|=j.lanes|j.childLanes,j=j.sibling;b.childLanes=U}_!==null&&!(_.flags&2048)&&(_.firstEffect===null&&(_.firstEffect=E.firstEffect),E.lastEffect!==null&&(_.lastEffect!==null&&(_.lastEffect.nextEffect=E.firstEffect),_.lastEffect=E.lastEffect),1<E.flags&&(_.lastEffect!==null?_.lastEffect.nextEffect=E:_.firstEffect=E,_.lastEffect=E))}if(E=E.sibling,E!==null){ws=E;return}ws=E=_}while(E!==null);Ks===0&&(Ks=5)}function vp(_){var E=ho();return _s(99,pZ.bind(null,_,E)),null}function pZ(_,E){do od();while(kv!==null);if(vn&48)throw Error(a(327));var b=_.finishedWork;if(b===null)return null;if(_.finishedWork=null,_.finishedLanes=0,b===_.current)throw Error(a(177));_.callbackNode=null;var U=b.lanes|b.childLanes,j=U,Z=_.pendingLanes&~j;_.pendingLanes=j,_.suspendedLanes=0,_.pingedLanes=0,_.expiredLanes&=j,_.mutableReadLanes&=j,_.entangledLanes&=j,j=_.entanglements;for(var he=_.eventTimes,Ce=_.expirationTimes;0<Z;){var Ye=31-Ni(Z),Mt=1<<Ye;j[Ye]=0,he[Ye]=-1,Ce[Ye]=-1,Z&=~Mt}if(rd!==null&&!(U&24)&&rd.has(_)&&rd.delete(_),_===Vo&&(ws=Vo=null,go=0),1<b.flags?b.lastEffect!==null?(b.lastEffect.nextEffect=b,U=b.firstEffect):U=b:U=b.firstEffect,U!==null){j=vn,vn|=32,vb.current=null,zv=ae(_.containerInfo),Uv=!1,$t=U;do try{mZ()}catch(Me){if($t===null)throw Error(a(330));Nh($t,Me),$t=$t.nextEffect}while($t!==null);zv=null,$t=U;do try{for(he=_;$t!==null;){var sn=$t.flags;if(sn&16&&de&&lt($t.stateNode),sn&128){var Rn=$t.alternate;if(Rn!==null){var Ut=Rn.ref;Ut!==null&&(typeof Ut=="function"?Ut(null):Ut.current=null)}}switch(sn&1038){case 2:l0($t),$t.flags&=-3;break;case 6:l0($t),$t.flags&=-3,hb($t.alternate,$t);break;case 1024:$t.flags&=-1025;break;case 1028:$t.flags&=-1025,hb($t.alternate,$t);break;case 4:hb($t.alternate,$t);break;case 8:Ce=he,Z=$t,de?m5(Ce,Z):JA(Ce,Z);var $r=Z.alternate;KA(Z),$r!==null&&KA($r)}$t=$t.nextEffect}}catch(Me){if($t===null)throw Error(a(330));Nh($t,Me),$t=$t.nextEffect}while($t!==null);Uv&&ct(),fe(_.containerInfo),_.current=b,$t=U;do try{for(sn=_;$t!==null;){var di=$t.flags;if(di&36&&QA(sn,$t.alternate,$t),di&128){Rn=void 0;var Rl=$t.ref;if(Rl!==null){var ze=$t.stateNode;switch($t.tag){case 5:Rn=ee(ze);break;default:Rn=ze}typeof Rl=="function"?Rl(Rn):Rl.current=Rn}}$t=$t.nextEffect}}catch(Me){if($t===null)throw Error(a(330));Nh($t,Me),$t=$t.nextEffect}while($t!==null);$t=null,up(),vn=j}else _.current=b;if(Mh)Mh=!1,kv=_,Bv=E;else for($t=U;$t!==null;)E=$t.nextEffect,$t.nextEffect=null,$t.flags&8&&(di=$t,di.sibling=null,di.stateNode=null),$t=E;if(U=_.pendingLanes,U===0&&(gu=null),U===1?_===Ib?Fv++:(Fv=0,Ib=_):Fv=0,b=b.stateNode,is&&typeof is.onCommitFiberRoot=="function")try{is.onCommitFiberRoot(co,b,void 0,(b.current.flags&64)===64)}catch{}if($a(_,Wn()),aE)throw aE=!1,_=wb,wb=null,_;return vn&8||yi(),null}function mZ(){for(;$t!==null;){var _=$t.alternate;Uv||zv===null||($t.flags&8?W($t,zv)&&(Uv=!0,ke()):$t.tag===13&&lZ(_,$t)&&W($t,zv)&&(Uv=!0,ke()));var E=$t.flags;E&256&&WA(_,$t),!(E&512)||Mh||(Mh=!0,qu(97,function(){return od(),null})),$t=$t.nextEffect}}function od(){if(Bv!==90){var _=97<Bv?97:Bv;return Bv=90,_s(_,vZ)}return!1}function gZ(_,E){Tb.push(E,_),Mh||(Mh=!0,qu(97,function(){return od(),null}))}function T5(_,E){xb.push(E,_),Mh||(Mh=!0,qu(97,function(){return od(),null}))}function vZ(){if(kv===null)return!1;var _=kv;if(kv=null,vn&48)throw Error(a(331));var E=vn;vn|=32;var b=xb;xb=[];for(var U=0;U<b.length;U+=2){var j=b[U],Z=b[U+1],he=j.destroy;if(j.destroy=void 0,typeof he=="function")try{he()}catch(Ye){if(Z===null)throw Error(a(330));Nh(Z,Ye)}}for(b=Tb,Tb=[],U=0;U<b.length;U+=2){j=b[U],Z=b[U+1];try{var Ce=j.create;j.destroy=Ce()}catch(Ye){if(Z===null)throw Error(a(330));Nh(Z,Ye)}}for(Ce=_.current.firstEffect;Ce!==null;)_=Ce.nextEffect,Ce.nextEffect=null,Ce.flags&8&&(Ce.sibling=null,Ce.stateNode=null),Ce=_;return vn=E,yi(),!0}function x5(_,E,b){E=Di(b,E),E=nd(_,E,1),zo(_,E),E=Ia(),_=uE(_,1),_!==null&&(Ri(_,1,E),$a(_,E))}function Nh(_,E){if(_.tag===3)x5(_,_,E);else for(var b=_.return;b!==null;){if(b.tag===3){x5(b,_,E);break}else if(b.tag===1){var U=b.stateNode;if(typeof b.type.getDerivedStateFromError=="function"||typeof U.componentDidCatch=="function"&&(gu===null||!gu.has(U))){_=Di(E,_);var j=VA(b,_,1);if(zo(b,j),j=Ia(),b=uE(b,1),b!==null)Ri(b,1,j),$a(b,j);else if(typeof U.componentDidCatch=="function"&&(gu===null||!gu.has(U)))try{U.componentDidCatch(E,_)}catch{}break}}b=b.return}}function yZ(_,E,b){var U=_.pingCache;U!==null&&U.delete(E),E=Ia(),_.pingedLanes|=_.suspendedLanes&b,Vo===_&&(go&b)===b&&(Ks===4||Ks===3&&(go&62914560)===go&&500>Wn()-Eb?f0(_,0):Sb|=b),$a(_,E)}function _Z(_,E){var b=_.stateNode;b!==null&&b.delete(E),E=0,E===0&&(E=_.mode,E&2?E&4?(id===0&&(id=u0),E=Rr(62914560&~id),E===0&&(E=4194304)):E=ho()===99?1:2:E=1),b=Ia(),_=uE(_,E),_!==null&&(Ri(_,E,b),$a(_,b))}var I5;I5=function(_,E,b){var U=E.lanes;if(_!==null)if(_.memoizedProps!==E.pendingProps||Tn.current)en=!0;else if(b&U)en=!!(_.flags&16384);else{switch(en=!1,E.tag){case 3:Vr(E),Tl();break;case 5:Qs(E);break;case 1:ri(E.type)&&Dn(E);break;case 4:Xu(E,E.stateNode.containerInfo);break;case 10:Et(E,E.memoizedProps.value);break;case 13:if(E.memoizedState!==null)return b&E.child.childLanes?dr(_,E,b):(Rt(Kr,Kr.current&1),E=G(_,E,b),E!==null?E.sibling:null);Rt(Kr,Kr.current&1);break;case 19:if(U=(b&E.childLanes)!==0,_.flags&64){if(U)return k(_,E,b);E.flags|=64}var j=E.memoizedState;if(j!==null&&(j.rendering=null,j.tail=null,j.lastEffect=null),Rt(Kr,Kr.current),U)break;return null;case 23:case 24:return E.lanes=0,Yi(_,E,b)}return G(_,E,b)}else en=!1;switch(E.lanes=0,E.tag){case 2:if(U=E.type,_!==null&&(_.alternate=null,E.alternate=null,E.flags|=2),_=E.pendingProps,j=gr(E,mn.current),os(E,b),j=xl(null,E,U,_,j,b),E.flags|=1,typeof j=="object"&&j!==null&&typeof j.render=="function"&&j.$$typeof===void 0){if(E.tag=1,E.memoizedState=null,E.updateQueue=null,ri(U)){var Z=!0;Dn(E)}else Z=!1;E.memoizedState=j.state!==null&&j.state!==void 0?j.state:null,Ea(E);var he=U.getDerivedStateFromProps;typeof he=="function"&&Eh(E,U,he,_),j.updater=au,E.stateNode=j,j._reactInternals=E,cu(E,U,_,b),E=zn(null,E,U,!0,Z,b)}else E.tag=0,Gt(null,E,j,b),E=E.child;return E;case 16:j=E.elementType;e:{switch(_!==null&&(_.alternate=null,E.alternate=null,E.flags|=2),_=E.pendingProps,Z=j._init,j=Z(j._payload),E.type=j,Z=E.tag=AZ(j),_=_i(j,_),Z){case 0:E=lr(null,E,j,_,b);break e;case 1:E=Gn(null,E,j,_,b);break e;case 11:E=_r(null,E,j,_,b);break e;case 14:E=Ir(null,E,j,_i(j.type,_),U,b);break e}throw Error(a(306,j,""))}return E;case 0:return U=E.type,j=E.pendingProps,j=E.elementType===U?j:_i(U,j),lr(_,E,U,j,b);case 1:return U=E.type,j=E.pendingProps,j=E.elementType===U?j:_i(U,j),Gn(_,E,U,j,b);case 3:if(Vr(E),U=E.updateQueue,_===null||U===null)throw Error(a(282));if(U=E.pendingProps,j=E.memoizedState,j=j!==null?j.element:null,hc(_,E),wa(E,U,null,b),U=E.memoizedState.element,U===j)Tl(),E=G(_,E,b);else{if(j=E.stateNode,(Z=j.hydrate)&&(Te?(Ji=Le(E.stateNode.containerInfo),as=E,Z=xa=!0):Z=!1),Z){if(Te&&(_=j.mutableSourceEagerHydrationData,_!=null))for(j=0;j<_.length;j+=2)Z=_[j],he=_[j+1],ce?Z._workInProgressVersionPrimary=he:Z._workInProgressVersionSecondary=he,du.push(Z);for(b=dp(E,null,U,b),E.child=b;b;)b.flags=b.flags&-3|1024,b=b.sibling}else Gt(_,E,U,b),Tl();E=E.child}return E;case 5:return Qs(E),_===null&&uu(E),U=E.type,j=E.pendingProps,Z=_!==null?_.memoizedProps:null,he=j.children,xe(U,j)?he=null:Z!==null&&xe(U,Z)&&(E.flags|=16),Cs(_,E),Gt(_,E,he,b),E.child;case 6:return _===null&&uu(E),null;case 13:return dr(_,E,b);case 4:return Xu(E,E.stateNode.containerInfo),U=E.pendingProps,_===null?E.child=fc(E,null,U,b):Gt(_,E,U,b),E.child;case 11:return U=E.type,j=E.pendingProps,j=E.elementType===U?j:_i(U,j),_r(_,E,U,j,b);case 7:return Gt(_,E,E.pendingProps,b),E.child;case 8:return Gt(_,E,E.pendingProps.children,b),E.child;case 12:return Gt(_,E,E.pendingProps.children,b),E.child;case 10:e:{if(U=E.type._context,j=E.pendingProps,he=E.memoizedProps,Z=j.value,Et(E,Z),he!==null){var Ce=he.value;if(Z=Zt(Ce,Z)?0:(typeof U._calculateChangedBits=="function"?U._calculateChangedBits(Ce,Z):1073741823)|0,Z===0){if(he.children===j.children&&!Tn.current){E=G(_,E,b);break e}}else for(Ce=E.child,Ce!==null&&(Ce.return=E);Ce!==null;){var Ye=Ce.dependencies;if(Ye!==null){he=Ce.child;for(var Mt=Ye.firstContext;Mt!==null;){if(Mt.context===U&&Mt.observedBits&Z){Ce.tag===1&&(Mt=Ca(-1,b&-b),Mt.tag=2,zo(Ce,Mt)),Ce.lanes|=b,Mt=Ce.alternate,Mt!==null&&(Mt.lanes|=b),Aa(Ce.return,b),Ye.lanes|=b;break}Mt=Mt.next}}else he=Ce.tag===10&&Ce.type===E.type?null:Ce.child;if(he!==null)he.return=Ce;else for(he=Ce;he!==null;){if(he===E){he=null;break}if(Ce=he.sibling,Ce!==null){Ce.return=he.return,he=Ce;break}he=he.return}Ce=he}}Gt(_,E,j.children,b),E=E.child}return E;case 9:return j=E.type,Z=E.pendingProps,U=Z.children,os(E,b),j=Qi(j,Z.unstable_observedBits),U=U(j),E.flags|=1,Gt(_,E,U,b),E.child;case 14:return j=E.type,Z=_i(j,E.pendingProps),Z=_i(j.type,Z),Ir(_,E,j,Z,U,b);case 15:return Hr(_,E,E.type,E.pendingProps,U,b);case 17:return U=E.type,j=E.pendingProps,j=E.elementType===U?j:_i(U,j),_!==null&&(_.alternate=null,E.alternate=null,E.flags|=2),E.tag=1,ri(U)?(_=!0,Dn(E)):_=!1,os(E,b),Uo(E,U,j),cu(E,U,j,b),zn(null,E,U,!0,_,b);case 19:return k(_,E,b);case 23:return Yi(_,E,b);case 24:return Yi(_,E,b)}throw Error(a(156,E.tag))};var hE={current:!1},Rb=o.unstable_flushAllWithoutAsserting,b5=typeof Rb=="function";function Nb(){if(Rb!==void 0)return Rb();for(var _=!1;od();)_=!0;return _}function M5(_){try{Nb(),cZ(function(){Nb()?M5(_):_()})}catch(E){_(E)}}var fE=0,R5=!1;function SZ(_,E,b,U){this.tag=_,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=E,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=U,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Ml(_,E,b,U){return new SZ(_,E,b,U)}function Pb(_){return _=_.prototype,!(!_||!_.isReactComponent)}function AZ(_){if(typeof _=="function")return Pb(_)?1:0;if(_!=null){if(_=_.$$typeof,_===v)return 11;if(_===C)return 14}return 2}function Ph(_,E){var b=_.alternate;return b===null?(b=Ml(_.tag,E,_.key,_.mode),b.elementType=_.elementType,b.type=_.type,b.stateNode=_.stateNode,b.alternate=_,_.alternate=b):(b.pendingProps=E,b.type=_.type,b.flags=0,b.nextEffect=null,b.firstEffect=null,b.lastEffect=null),b.childLanes=_.childLanes,b.lanes=_.lanes,b.child=_.child,b.memoizedProps=_.memoizedProps,b.memoizedState=_.memoizedState,b.updateQueue=_.updateQueue,E=_.dependencies,b.dependencies=E===null?null:{lanes:E.lanes,firstContext:E.firstContext},b.sibling=_.sibling,b.index=_.index,b.ref=_.ref,b}function pE(_,E,b,U,j,Z){var he=2;if(U=_,typeof _=="function")Pb(_)&&(he=1);else if(typeof _=="string")he=5;else e:switch(_){case d:return p0(b.children,j,Z,E);case R:he=8,j|=16;break;case h:he=8,j|=1;break;case f:return _=Ml(12,b,E,j|8),_.elementType=f,_.type=f,_.lanes=Z,_;case y:return _=Ml(13,b,E,j),_.type=y,_.elementType=y,_.lanes=Z,_;case A:return _=Ml(19,b,E,j),_.elementType=A,_.lanes=Z,_;case N:return Ob(b,j,Z,E);case M:return _=Ml(24,b,E,j),_.elementType=M,_.lanes=Z,_;default:if(typeof _=="object"&&_!==null)switch(_.$$typeof){case m:he=10;break e;case g:he=9;break e;case v:he=11;break e;case C:he=14;break e;case T:he=16,U=null;break e;case x:he=22;break e}throw Error(a(130,_==null?_:typeof _,""))}return E=Ml(he,b,E,j),E.elementType=_,E.type=U,E.lanes=Z,E}function p0(_,E,b,U){return _=Ml(7,_,U,E),_.lanes=b,_}function Ob(_,E,b,U){return _=Ml(23,_,U,E),_.elementType=N,_.lanes=b,_}function Db(_,E,b){return _=Ml(6,_,null,E),_.lanes=b,_}function Lb(_,E,b){return E=Ml(4,_.children!==null?_.children:[],_.key,E),E.lanes=b,E.stateNode={containerInfo:_.containerInfo,pendingChildren:null,implementation:_.implementation},E}function EZ(_,E,b){this.tag=E,this.containerInfo=_,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=te,this.pendingContext=this.context=null,this.hydrate=b,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=ya(0),this.expirationTimes=ya(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ya(0),Te&&(this.mutableSourceEagerHydrationData=null)}function N5(_){var E=_._reactInternals;if(E===void 0)throw typeof _.render=="function"?Error(a(188)):Error(a(268,Object.keys(_)));return _=K(E),_===null?null:_.stateNode}function P5(_,E){if(_=_.memoizedState,_!==null&&_.dehydrated!==null){var b=_.retryLane;_.retryLane=b!==0&&b<E?b:E}}function mE(_,E){P5(_,E),(_=_.alternate)&&P5(_,E)}function CZ(_){return _=K(_),_===null?null:_.stateNode}function wZ(){return null}return r.IsThisRendererActing=hE,r.act=function(_){function E(){fE--,yb.current=b,hE.current=U}R5===!1&&(R5=!0,console.error("act(...) is not supported in production builds of React, and might not behave as expected.")),fE++;var b=yb.current,U=hE.current;yb.current=!0,hE.current=!0;try{var j=_5(_)}catch(Z){throw E(),Z}if(j!==null&&typeof j=="object"&&typeof j.then=="function")return{then:function(Z,he){j.then(function(){1<fE||b5===!0&&b===!0?(E(),Z()):M5(function(Ce){E(),Ce?he(Ce):Z()})},function(Ce){E(),he(Ce)})}};try{fE!==1||b5!==!1&&b!==!1||Nb(),E()}catch(Z){throw E(),Z}return{then:function(Z){Z()}}},r.attemptContinuousHydration=function(_){if(_.tag===13){var E=Ia();sd(_,67108864,E),mE(_,67108864)}},r.attemptHydrationAtCurrentPriority=function(_){if(_.tag===13){var E=Ia(),b=Rh(_);sd(_,b,E),mE(_,b)}},r.attemptSynchronousHydration=function(_){switch(_.tag){case 3:var E=_.stateNode;if(E.hydrate){var b=va(E.pendingLanes);E.expiredLanes|=b&E.pendingLanes,$a(E,Wn()),!(vn&48)&&(bh(),yi())}break;case 13:var U=Ia();S5(function(){return sd(_,1,U)}),mE(_,4)}},r.attemptUserBlockingHydration=function(_){if(_.tag===13){var E=Ia();sd(_,4,E),mE(_,4)}},r.batchedEventUpdates=function(_,E){var b=vn;vn|=2;try{return _(E)}finally{vn=b,vn===0&&(bh(),yi())}},r.batchedUpdates=_5,r.createComponentSelector=function(_){return{$$typeof:ZA,value:_}},r.createContainer=function(_,E,b){return _=new EZ(_,E,b),E=Ml(3,null,null,E===2?7:E===1?3:0),_.current=E,E.stateNode=_,Ea(E),_},r.createHasPsuedoClassSelector=function(_){return{$$typeof:eE,value:_}},r.createPortal=function(_,E,b){var U=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:U==null?null:""+U,children:_,containerInfo:E,implementation:b}},r.createRoleSelector=function(_){return{$$typeof:tE,value:_}},r.createTestNameSelector=function(_){return{$$typeof:nE,value:_}},r.createTextSelector=function(_){return{$$typeof:rE,value:_}},r.deferredUpdates=function(_){return _s(97,_)},r.discreteUpdates=function(_,E,b,U,j){var Z=vn;vn|=4;try{return _s(98,_.bind(null,E,b,U,j))}finally{vn=Z,vn===0&&(bh(),yi())}},r.findAllNodes=gb,r.findBoundingRects=function(_,E){if(!ne)throw Error(a(363));E=gb(_,E),_=[];for(var b=0;b<E.length;b++)_.push(st(E[b]));for(E=_.length-1;0<E;E--){b=_[E];for(var U=b.x,j=U+b.width,Z=b.y,he=Z+b.height,Ce=E-1;0<=Ce;Ce--)if(E!==Ce){var Ye=_[Ce],Mt=Ye.x,sn=Mt+Ye.width,Rn=Ye.y,Ut=Rn+Ye.height;if(U>=Mt&&Z>=Rn&&j<=sn&&he<=Ut){_.splice(E,1);break}else if(U!==Mt||b.width!==Ye.width||Ut<Z||Rn>he){if(!(Z!==Rn||b.height!==Ye.height||sn<U||Mt>j)){Mt>U&&(Ye.width+=Mt-U,Ye.x=U),sn<j&&(Ye.width=j-Mt),_.splice(E,1);break}}else{Rn>Z&&(Ye.height+=Rn-Z,Ye.y=Z),Ut<he&&(Ye.height=he-Rn),_.splice(E,1);break}}}return _},r.findHostInstance=N5,r.findHostInstanceWithNoPortals=function(_){return _=se(_),_===null?null:_.tag===20?_.stateNode.instance:_.stateNode},r.findHostInstanceWithWarning=function(_){return N5(_)},r.flushControlled=function(_){var E=vn;vn|=1;try{_s(99,_)}finally{vn=E,vn===0&&(bh(),yi())}},r.flushDiscreteUpdates=function(){!(vn&49)&&(dZ(),od())},r.flushPassiveEffects=od,r.flushSync=S5,r.focusWithin=function(_,E){if(!ne)throw Error(a(363));for(_=fb(_),E=v5(_,E),E=Array.from(E),_=0;_<E.length;){var b=E[_++];if(!ft(b)){if(b.tag===5&&je(b.stateNode))return!0;for(b=b.child;b!==null;)E.push(b),b=b.sibling}}return!1},r.getCurrentUpdateLanePriority=function(){return An},r.getFindAllNodesFailureDescription=function(_,E){if(!ne)throw Error(a(363));var b=0,U=[];_=[fb(_),0];for(var j=0;j<_.length;){var Z=_[j++],he=_[j++],Ce=E[he];if((Z.tag!==5||!ft(Z))&&(pb(Z,Ce)&&(U.push(mb(Ce)),he++,he>b&&(b=he)),he<E.length))for(Z=Z.child;Z!==null;)_.push(Z,he),Z=Z.sibling}if(b<E.length){for(_=[];b<E.length;b++)_.push(mb(E[b]));return`findAllNodes was able to match part of the selector:
  `+(U.join(" > ")+`

No matching component was found for:
  `)+_.join(" > ")}return null},r.getPublicRootInstance=function(_){if(_=_.current,!_.child)return null;switch(_.child.tag){case 5:return ee(_.child.stateNode);default:return _.child.stateNode}},r.injectIntoDevTools=function(_){if(_={bundleType:_.bundleType,version:_.version,rendererPackageName:_.rendererPackageName,rendererConfig:_.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:l.ReactCurrentDispatcher,findHostInstanceByFiber:CZ,findFiberByHostInstance:_.findFiberByHostInstance||wZ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")_=!1;else{var E=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!E.isDisabled&&E.supportsFiber)try{co=E.inject(_),is=E}catch{}_=!0}return _},r.observeVisibleRects=function(_,E,b,U){if(!ne)throw Error(a(363));_=gb(_,E);var j=Bt(_,b,U).disconnect;return{disconnect:function(){j()}}},r.registerMutableSourceForHydration=function(_,E){var b=E._getVersion;b=b(E._source),_.mutableSourceEagerHydrationData==null?_.mutableSourceEagerHydrationData=[E,b]:_.mutableSourceEagerHydrationData.push(E,b)},r.runWithPriority=function(_,E){var b=An;try{return An=_,E()}finally{An=b}},r.shouldSuspend=function(){return!1},r.unbatchedUpdates=function(_,E){var b=vn;vn&=-2,vn|=8;try{return _(E)}finally{vn=b,vn===0&&(bh(),yi())}},r.updateContainer=function(_,E,b,U){var j=E.current,Z=Ia(),he=Rh(j);e:if(b){b=b._reactInternals;t:{if($(b)!==b||b.tag!==1)throw Error(a(170));var Ce=b;do{switch(Ce.tag){case 3:Ce=Ce.stateNode.context;break t;case 1:if(ri(Ce.type)){Ce=Ce.stateNode.__reactInternalMemoizedMergedChildContext;break t}}Ce=Ce.return}while(Ce!==null);throw Error(a(171))}if(b.tag===1){var Ye=b.type;if(ri(Ye)){b=jn(b,Ye,Ce);break e}}b=Ce}else b=rr;return E.context===null?E.context=b:E.pendingContext=b,E=Ca(Z,he),E.payload={element:_},U=U===void 0?null:U,U!==null&&(E.callback=U),zo(j,E),sd(j,he,Z),he},r}})(XD);var hMe=XD.exports;HY.exports=hMe;var fMe=HY.exports;const pMe=zu(fMe);var mMe=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(i=r;i--!==0;)if(!n(e[i],t[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!n(e[o],t[o]))return!1}return!0}return e!==e&&t!==t};const ZD=zu(mMe),ob=[];function WY(n,e,t,r=0,i=!1){for(const o of e)if(ZD(t,o.args)){if(i)return;if(o.error)throw o.error;if(o.response)return o.response;throw o.promise}const s={args:t,promise:n(...t).then(o=>s.response=o??!0).catch(o=>s.error=o??"unknown error").then(()=>{r>0&&setTimeout(()=>{const o=e.indexOf(s);o!==-1&&e.splice(o,1)},r)})};if(e.push(s),!i)throw s.promise}function gMe(n,...e){if(e===void 0||e.length===0)n.splice(0,n.length);else{const t=n.find(r=>ZD(e,r.args));if(t){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}}}function rh(n,...e){return WY(n,ob,e,rh.lifespan)}rh.lifespan=0;rh.clear=(...n)=>gMe(ob,...n);rh.preload=(n,...e)=>void WY(n,ob,e,rh.lifespan,!0);rh.peek=(...n)=>{var e;return(e=ob.find(t=>ZD(n,t.args)))==null?void 0:e.response};function qY(n){return function(e){n.forEach(function(t){typeof t=="function"?t(e):t!=null&&(t.current=e)})}}function tP(n,e,t){var r,i,s,o,a;e==null&&(e=100);function l(){var u=Date.now()-o;u<e&&u>=0?r=setTimeout(l,e-u):(r=null,t||(a=n.apply(s,i),s=i=null))}var c=function(){s=this,i=arguments,o=Date.now();var u=t&&!r;return r||(r=setTimeout(l,e)),u&&(a=n.apply(s,i),s=i=null),a};return c.clear=function(){r&&(clearTimeout(r),r=null)},c.flush=function(){r&&(a=n.apply(s,i),s=i=null,clearTimeout(r),r=null)},c}tP.debounce=tP;var vMe=tP;const qz=zu(vMe);function yMe(n){let{debounce:e,scroll:t,polyfill:r,offsetSize:i}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const s=r||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=D.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=D.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),c=e?typeof e=="number"?e:e.scroll:null,u=e?typeof e=="number"?e:e.resize:null,d=D.useRef(!1);D.useEffect(()=>(d.current=!0,()=>void(d.current=!1)));const[h,f,m]=D.useMemo(()=>{const A=()=>{if(!l.current.element)return;const{left:C,top:T,width:x,height:R,bottom:N,right:M,x:O,y:P}=l.current.element.getBoundingClientRect(),z={left:C,top:T,width:x,height:R,bottom:N,right:M,x:O,y:P};l.current.element instanceof HTMLElement&&i&&(z.height=l.current.element.offsetHeight,z.width=l.current.element.offsetWidth),Object.freeze(z),d.current&&!EMe(l.current.lastBounds,z)&&a(l.current.lastBounds=z)};return[A,u?qz(A,u):A,c?qz(A,c):A]},[a,i,c,u]);function g(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(A=>A.removeEventListener("scroll",m,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function v(){l.current.element&&(l.current.resizeObserver=new s(m),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(A=>A.addEventListener("scroll",m,{capture:!0,passive:!0})))}const y=A=>{!A||A===l.current.element||(g(),l.current.element=A,l.current.scrollContainers=QY(A),v())};return SMe(m,!!t),_Me(f),D.useEffect(()=>{g(),v()},[t,m,f]),D.useEffect(()=>g,[]),[y,o,h]}function _Me(n){D.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function SMe(n,e){D.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function QY(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:i}=window.getComputedStyle(n);return[t,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...QY(n.parentElement)]}const AMe=["x","y","top","bottom","left","right","width","height"],EMe=(n,e)=>AMe.every(t=>n[t]===e[t]),qr={obj:n=>n===Object(n)&&!qr.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e){if(typeof n!=typeof e||!!n!=!!e)return!1;if(qr.str(n)||qr.num(n)||qr.obj(n))return n===e;if(qr.arr(n)&&n==e)return!0;let t;for(t in n)if(!(t in e))return!1;for(t in e)if(n[t]!==e[t])return!1;return qr.und(t)?n===e:!0}};function sR(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function JY(n,e,t,r){const i=t.get(e);i&&(t.delete(e),t.size===0&&(n.delete(r),i.target.releasePointerCapture(r)))}function CMe(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((r,i)=>{JY(t.capturedMap,e,r,i)})}function wMe(n){const e=new le;function t(d){var h;const f=n.getState(),{raycaster:m,mouse:g,camera:v,size:y}=f,{offsetX:A,offsetY:C}=(h=m.computeOffsets==null?void 0:m.computeOffsets(d,f))!=null?h:d,{width:T,height:x}=y;g.set(A/T*2-1,-(C/x)*2+1),m.setFromCamera(g,v)}function r(d){const{internal:h}=n.getState(),f=d.offsetX-h.initialClick[0],m=d.offsetY-h.initialClick[1];return Math.round(Math.sqrt(f*f+m*m))}function i(d){return d.filter(h=>["Move","Over","Enter","Out","Leave"].some(f=>{var m;return(m=h.__r3f)==null?void 0:m.handlers["onPointer"+f]}))}function s(d){const h=n.getState(),{raycaster:f,internal:m}=h;if(!f.enabled)return[];const g=new Set,v=[],y=d?d(m.interaction):m.interaction;let A=f.intersectObjects(y,!0).filter(T=>{const x=sR(T);return g.has(x)?!1:(g.add(x),!0)});f.filter&&(A=f.filter(A,h));for(const T of A){let x=T.object;for(;x;){var C;(C=x.__r3f)!=null&&C.eventCount&&v.push({...T,eventObject:x}),x=x.parent}}return v}function o(d,h){const{internal:f}=n.getState();if("pointerId"in h&&f.capturedMap.has(h.pointerId))for(let m of f.capturedMap.get(h.pointerId).values())d.push(m.intersection);return d}function a(d,h,f,m){const{raycaster:g,mouse:v,camera:y,internal:A}=n.getState();if(d.length){const C=e.set(v.x,v.y,0).unproject(y),T={stopped:!1};for(const x of d){const R=z=>{var V,$;return(V=($=A.capturedMap.get(z))==null?void 0:$.has(x.eventObject))!=null?V:!1},N=z=>{const V={intersection:x,target:h.target};A.capturedMap.has(z)?A.capturedMap.get(z).set(x.eventObject,V):A.capturedMap.set(z,new Map([[x.eventObject,V]])),h.target.setPointerCapture(z)},M=z=>{const V=A.capturedMap.get(z);V&&JY(A.capturedMap,x.eventObject,V,z)};let O={};for(let z in h){let V=h[z];typeof V!="function"&&(O[z]=V)}let P={...x,...O,spaceX:v.x,spaceY:v.y,intersections:d,stopped:T.stopped,delta:f,unprojectedPoint:C,ray:g.ray,camera:y,stopPropagation:()=>{const z="pointerId"in h&&A.capturedMap.get(h.pointerId);if((!z||z.has(x.eventObject))&&(P.stopped=T.stopped=!0,A.hovered.size&&Array.from(A.hovered.values()).find(V=>V.eventObject===x.eventObject))){const V=d.slice(0,d.indexOf(x));l([...V,x])}},target:{hasPointerCapture:R,setPointerCapture:N,releasePointerCapture:M},currentTarget:{hasPointerCapture:R,setPointerCapture:N,releasePointerCapture:M},sourceEvent:h,nativeEvent:h};if(m(P),T.stopped===!0)break}}return d}function l(d){const{internal:h}=n.getState();Array.from(h.hovered.values()).forEach(f=>{if(!d.length||!d.find(m=>m.object===f.object&&m.index===f.index&&m.instanceId===f.instanceId)){const g=f.eventObject.__r3f,v=g==null?void 0:g.handlers;if(h.hovered.delete(sR(f)),g!=null&&g.eventCount){const y={...f,intersections:d||[]};v.onPointerOut==null||v.onPointerOut(y),v.onPointerLeave==null||v.onPointerLeave(y)}}})}const c=d=>{switch(d){case"onPointerLeave":case"onPointerCancel":return()=>l([]);case"onLostPointerCapture":return h=>{const{internal:f}=n.getState();"pointerId"in h&&!f.capturedMap.has(h.pointerId)&&(f.capturedMap.delete(h.pointerId),l([]))}}return h=>{const{onPointerMissed:f,internal:m}=n.getState();t(h),m.lastEvent.current=h;const g=d==="onPointerMove",v=d==="onClick"||d==="onContextMenu"||d==="onDoubleClick",A=o(s(g?i:void 0),h),C=v?r(h):0;d==="onPointerDown"&&(m.initialClick=[h.offsetX,h.offsetY],m.initialHits=A.map(T=>T.eventObject)),v&&!A.length&&C<=2&&(u(h,m.interaction),f&&f(h)),g&&l(A),a(A,h,C,T=>{const x=T.eventObject,R=x.__r3f,N=R==null?void 0:R.handlers;if(R!=null&&R.eventCount)if(g){if(N.onPointerOver||N.onPointerEnter||N.onPointerOut||N.onPointerLeave){const M=sR(T),O=m.hovered.get(M);O?O.stopped&&T.stopPropagation():(m.hovered.set(M,T),N.onPointerOver==null||N.onPointerOver(T),N.onPointerEnter==null||N.onPointerEnter(T))}N.onPointerMove==null||N.onPointerMove(T)}else{const M=N[d];M?(!v||m.initialHits.includes(x))&&(u(h,m.interaction.filter(O=>!m.initialHits.includes(O))),M(T)):v&&m.initialHits.includes(x)&&u(h,m.interaction.filter(O=>!m.initialHits.includes(O)))}})}};function u(d,h){h.forEach(f=>{var m;return(m=f.__r3f)==null||m.handlers.onPointerMissed==null?void 0:m.handlers.onPointerMissed(d)})}return{handlePointer:c}}const TMe=n=>n&&!!n.memoized&&!!n.changes,Cx=n=>n&&!!n.getState,oR=(n,e)=>{var t,r;return{root:Cx(n)?n:(t=(r=n.__r3f)==null?void 0:r.root)!=null?t:e.__r3f.root,container:Cx(n)?n.getState().scene:n}},Qz="__default",xMe={};let IMe={};function bMe(n,e){return!!(qr.arr(n)&&qr.equ(n,e)||n===e)}function W0(n,e){const t=n;return(e!=null&&e.primitive||!t.__r3f)&&(t.__r3f={root:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e}),n}function MMe(n){function e(h,{children:f,key:m,ref:g,...v},{children:y,key:A,ref:C,...T}={},x=!1){var R;const N=(R=h==null?void 0:h.__r3f)!=null?R:{},M=Object.entries(v),O=[];if(x){const z=Object.keys(T);for(let V=0;V<z.length;V++)v.hasOwnProperty(z[V])||M.unshift([z[V],Qz+"remove"])}M.forEach(([z,V])=>{var $;if(($=h.__r3f)!=null&&$.primitive&&z==="object"||bMe(V,T[z]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(z))return O.push([z,V,!0,[]]);let B=[];z.includes("-")&&(B=z.split("-")),O.push([z,V,!1,B])});const P={...v};return N.memoizedProps&&N.memoizedProps.args&&(P.args=N.memoizedProps.args),N.memoizedProps&&N.memoizedProps.attach&&(P.attach=N.memoizedProps.attach),{accumulative:x,memoized:P,changes:O}}function t(h,f){var m,g,v;const y=(m=h==null?void 0:h.__r3f)!=null?m:{},A=y.root,C=(g=A==null||A.getState==null?void 0:A.getState())!=null?g:{},{memoized:T,changes:x}=TMe(f)?f:e(h,f),R=y.eventCount;if(h.__r3f&&(h.__r3f.memoizedProps=T),x.forEach(([N,M,O,P])=>{var z;let V=h,$=V[N];if(P.length&&($=P.reduce((q,K)=>q[K],h),!($&&$.set))){const[q,...K]=P.reverse();V=K.reverse().reduce((se,W)=>se[W],h),N=q}if(M===Qz+"remove")if($&&$.constructor)M=new $.constructor(T.args);else if(V.constructor){const q=new V.constructor(V.__r3f.memoizedProps.args);M=q[$],q.dispose&&q.dispose()}else M=0;const B=(C==null||(z=C.gl)==null?void 0:z.outputEncoding)===Bu;if(O)M?y.handlers[N]=M:delete y.handlers[N],y.eventCount=Object.keys(y.handlers).length;else if($&&$.set&&($.copy||$ instanceof _m)){if(Array.isArray(M))$.fromArray?$.fromArray(M):$.set(...M);else if($.copy&&M&&M.constructor&&$.constructor.name===M.constructor.name)$.copy(M);else if(M!==void 0){const q=$ instanceof Dt;!q&&$.setScalar?$.setScalar(M):$ instanceof _m&&M instanceof _m?$.mask=M.mask:$.set(M),!B&&q&&$.convertSRGBToLinear()}}else V[N]=M,!B&&V[N]instanceof Vi&&(V[N].encoding=ai);r(h)}),y.parent&&C.internal&&h.raycast&&R!==y.eventCount){const N=C.internal.interaction.indexOf(h);N>-1&&C.internal.interaction.splice(N,1),y.eventCount&&C.internal.interaction.push(h)}return x.length&&(v=h.__r3f)!=null&&v.parent&&i(h),h}function r(h){var f,m;const g=(f=h.__r3f)==null||(m=f.root)==null||m.getState==null?void 0:m.getState();g&&g.internal.frames===0&&g.invalidate()}function i(h){h.onUpdate==null||h.onUpdate(h)}function s(h,{args:f=[],...m},g,v,y){let A=`${h[0].toUpperCase()}${h.slice(1)}`,C;if(!Cx(g)&&y){const T=x=>x.return?T(x.return):x.stateNode&&x.stateNode.containerInfo;g=T(y)}if(!g||!Cx(g))throw`No valid root for ${A}!`;if(h==="primitive"){if(m.object===void 0)throw"Primitives without 'object' are invalid!";const T=m.object;C=W0(T,{root:g,primitive:!0})}else{const T=IMe[A]||nK[A];if(!T)throw`${A} is not part of the THREE namespace! Did you forget to extend? See: https://github.com/pmndrs/react-three-fiber/blob/master/markdown/api.md#using-3rd-party-objects-declaratively`;if(!Array.isArray(f))throw"The args prop must be an array!";C=W0(new T(...f),{root:g,memoizedProps:{args:f.length===0?null:f}})}return"attachFns"in m||(A.endsWith("Geometry")?m={attach:"geometry",...m}:A.endsWith("Material")&&(m={attach:"material",...m})),t(C,m),C}function o(h,f){let m=!1;if(f){if(f.attachArray)qr.arr(h[f.attachArray])||(h[f.attachArray]=[]),h[f.attachArray].push(f);else if(f.attachObject)qr.obj(h[f.attachObject[0]])||(h[f.attachObject[0]]={}),h[f.attachObject[0]][f.attachObject[1]]=f;else if(f.attach&&!qr.fun(f.attach))h[f.attach]=f;else if(qr.arr(f.attachFns)){const[g]=f.attachFns;qr.str(g)&&qr.fun(h[g])?h[g](f):qr.fun(g)&&g(f,h)}else f.isObject3D&&h.isObject3D&&(h.add(f),m=!0);m||h.__r3f.objects.push(f),f.__r3f||W0(f,{}),f.__r3f.parent=h,i(f),r(f)}}function a(h,f,m){let g=!1;if(f){if(f.attachArray){const v=h[f.attachArray];qr.arr(v)||(h[f.attachArray]=[]),v.splice(v.indexOf(m),0,f)}else{if(f.attachObject||f.attach&&!qr.fun(f.attach))return o(h,f);if(f.isObject3D&&h.isObject3D){f.parent=h,f.dispatchEvent({type:"added"});const v=h.children.filter(A=>A!==f),y=v.indexOf(m);h.children=[...v.slice(0,y),f,...v.slice(y)],g=!0}}g||h.__r3f.objects.push(f),f.__r3f||W0(f,{}),f.__r3f.parent=h,i(f),r(f)}}function l(h,f,m=!1){h&&[...h].forEach(g=>c(f,g,m))}function c(h,f,m){if(f){var g,v;if(f.__r3f&&(f.__r3f.parent=null),(g=h.__r3f)!=null&&g.objects&&(h.__r3f.objects=h.__r3f.objects.filter(x=>x!==f)),f.attachArray)h[f.attachArray]=h[f.attachArray].filter(x=>x!==f);else if(f.attachObject)delete h[f.attachObject[0]][f.attachObject[1]];else if(f.attach&&!qr.fun(f.attach)&&h[f.attach]===f)h[f.attach]=null;else if(qr.arr(f.attachFns)){const[,x]=f.attachFns;qr.str(x)&&qr.fun(h[x])?h[x](f):qr.fun(x)&&x(f,h)}else if(f.isObject3D&&h.isObject3D){var y;h.remove(f),(y=f.__r3f)!=null&&y.root&&CMe(f.__r3f.root,f)}const C=(v=f.__r3f)==null?void 0:v.primitive,T=m===void 0?f.dispose!==null&&!C:m;if(!C){var A;l((A=f.__r3f)==null?void 0:A.objects,f,T),l(f.children,f,T)}f.__r3f&&(delete f.__r3f.root,delete f.__r3f.objects,delete f.__r3f.handlers,delete f.__r3f.memoizedProps,C||delete f.__r3f),T&&f.dispose&&f.type!=="Scene"&&ST.unstable_runWithPriority(ST.unstable_IdlePriority,()=>{try{f.dispose()}catch{}}),r(h)}}function u(h,f,m,g){var v;const y=(v=h.__r3f)==null?void 0:v.parent;if(!y)return;const A=s(f,m,h.__r3f.root);f!=="primitive"&&h.children&&(h.children.forEach(C=>o(A,C)),h.children=[]),h.__r3f.objects.forEach(C=>o(A,C)),h.__r3f.objects=[],c(y,h),o(y,A),A.raycast&&A.__r3f.eventCount&&A.__r3f.root.getState().internal.interaction.push(A),[g,g.alternate].forEach(C=>{C!==null&&(C.stateNode=A,C.ref&&(typeof C.ref=="function"?C.ref(A):C.ref.current=A))})}return{reconciler:pMe({now:ST.unstable_now,createInstance:s,removeChild:c,appendChild:o,appendInitialChild:o,insertBefore:a,warnsIfNotActing:!0,supportsMutation:!0,isPrimaryRenderer:!1,scheduleTimeout:qr.fun(setTimeout)?setTimeout:void 0,cancelTimeout:qr.fun(clearTimeout)?clearTimeout:void 0,setTimeout:qr.fun(setTimeout)?setTimeout:void 0,clearTimeout:qr.fun(clearTimeout)?clearTimeout:void 0,noTimeout:-1,appendChildToContainer:(h,f)=>{const{container:m,root:g}=oR(h,f);m.__r3f.root=g,o(m,f)},removeChildFromContainer:(h,f)=>c(oR(h,f).container,f),insertInContainerBefore:(h,f,m)=>a(oR(h,f).container,f,m),prepareUpdate(h,f,m,g){if(h.__r3f.primitive&&g.object&&g.object!==h)return[!0];{const{args:v=[],children:y,...A}=g,{args:C=[],children:T,...x}=m;if(!Array.isArray(v))throw"The args prop must be an array!";if(v.some((N,M)=>N!==C[M]))return[!0];const R=e(h,A,x,!0);if(R.changes.length)return[!1,R];if(h.attach&&typeof h.attach!="function"){const M=h.__r3f.parent;M&&M[h.attach]!==h&&o(M,h)}return null}},commitUpdate(h,[f,m],g,v,y,A){f?u(h,g,y,A):t(h,m)},hideInstance(h){h.isObject3D&&(h.visible=!1,r(h))},unhideInstance(h,f){(h.isObject3D&&f.visible==null||f.visible)&&(h.visible=!0,r(h))},hideTextInstance(){throw new Error("Text is not allowed in the R3F tree.")},getPublicInstance(h){return h},getRootHostContext(h){return xMe},getChildHostContext(h){return h},createTextInstance(){},finalizeInitialChildren(h){var f;return!!((f=h==null?void 0:h.__r3f)!=null?f:{}).handlers},commitMount(h){var f;const m=(f=h==null?void 0:h.__r3f)!=null?f:{};h.raycast&&m.handlers&&m.eventCount&&h.__r3f.root.getState().internal.interaction.push(h)},shouldDeprioritizeSubtree(){return!1},prepareForCommit(){return null},preparePortalMount(h){W0(h)},resetAfterCommit(){},shouldSetTextContent(){return!1},clearContainer(){return!1}}),applyProps:t}}const RMe=n=>!!(n!=null&&n.render),Jz=n=>n&&n.isOrthographicCamera;function nP(n){return Array.isArray(n)?Math.min(Math.max(n[0],window.devicePixelRatio),n[1]):n}const KY=D.createContext(null),NMe=(n,e,t,r)=>{const{gl:i,size:s,shadows:o=!1,linear:a=!1,flat:l=!1,vr:c=!1,orthographic:u=!1,frameloop:d="always",dpr:h=1,performance:f,clock:m=new vD,raycaster:g,camera:v,onPointerMissed:y}=r;o&&(i.shadowMap.enabled=!0,typeof o=="object"?Object.assign(i.shadowMap,o):i.shadowMap.type=D6),a&&(i.outputEncoding=Bu),l&&(i.toneMapping=zc),d==="never"&&(m.stop(),m.elapsedTime=0);const A=GY((R,N)=>{const M=new eK,{params:O,...P}=g||{};n(M,{enabled:!0,...P,params:{...M.params,...O}});const z=v instanceof Kg,V=z?v:u?new Uc(0,0,0,0,.1,1e3):new gi(75,0,.1,1e3);z||(V.position.z=5,v&&n(V,v),v!=null&&v.rotation||V.lookAt(0,0,0));const $=nP(h),B=new le,q=new le,K=new le;function se(Q=N().camera,Y=q,ae=N().size){const{width:fe,height:we}=ae,ge=fe/we;Y instanceof le?K.copy(Y):K.set(...Y);const Se=Q.getWorldPosition(B).distanceTo(K);if(Jz(Q))return{width:fe/Q.zoom,height:we/Q.zoom,factor:1,distance:Se,aspect:ge};{const Ke=Q.fov*Math.PI/180,xe=2*Math.tan(Ke/2)*Se,Qe=xe*(fe/we);return{width:Qe,height:xe,factor:fe/Qe,distance:Se,aspect:ge}}}let W;const ee=Q=>R(Y=>({performance:{...Y.performance,current:Q}}));return{gl:i,set:R,get:N,invalidate:()=>e(N()),advance:(Q,Y)=>t(Q,Y,N()),linear:a,flat:l,scene:W0(new U2),camera:V,controls:null,raycaster:M,clock:m,mouse:new tt,vr:c,frameloop:d,onPointerMissed:y,performance:{current:1,min:.5,max:1,debounce:200,...f,regress:()=>{const Q=N();W&&clearTimeout(W),Q.performance.current!==Q.performance.min&&ee(Q.performance.min),W=setTimeout(()=>ee(N().performance.max),Q.performance.debounce)}},size:{width:0,height:0},viewport:{initialDpr:$,dpr:$,width:0,height:0,aspect:0,distance:0,factor:0,getCurrentViewport:se},setSize:(Q,Y)=>{const ae={width:Q,height:Y};R(fe=>({size:ae,viewport:{...fe.viewport,...se(V,q,ae)}}))},setDpr:Q=>R(Y=>({viewport:{...Y.viewport,dpr:nP(Q)}})),setFrameloop:(Q="always")=>R(()=>({frameloop:Q})),events:{connected:!1},internal:{active:!1,priority:0,frames:0,lastProps:r,lastEvent:D.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(Q,Y=0)=>(R(({internal:ae})=>({internal:{...ae,priority:ae.priority+(Y>0?1:0),subscribers:[...ae.subscribers,{ref:Q,priority:Y}].sort((fe,we)=>fe.priority-we.priority)}})),()=>{R(({internal:ae})=>({internal:{...ae,priority:ae.priority-(Y>0?1:0),subscribers:ae.subscribers.filter(fe=>fe.ref!==Q)}}))})}}}),C=A.getState();let T=C.size,x=C.viewport.dpr;return A.subscribe(()=>{const{camera:R,size:N,viewport:M,internal:O}=A.getState();(N!==T||M.dpr!==x)&&(!R.manual&&!(O.lastProps.camera instanceof Kg)&&(Jz(R)?(R.left=N.width/-2,R.right=N.width/2,R.top=N.height/2,R.bottom=N.height/-2):R.aspect=N.width/N.height,R.updateProjectionMatrix(),R.updateMatrixWorld()),i.setPixelRatio(M.dpr),i.setSize(N.width,N.height),T=N,x=M.dpr)}),s&&C.setSize(s.width,s.height),A.subscribe(R=>e(R)),A};let vf,Kz=[],Yz=[],PMe=[];function Yy(n,e){for(vf=0;vf<n.length;vf++)n[vf](e)}function aR(n,e){let t=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(t=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),vf=0;vf<e.internal.subscribers.length;vf++)e.internal.subscribers[vf].ref.current(e,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function OMe(n){let e=!1,t;function r(o){if(e=!0,t=0,Yy(Kz,o),n.forEach(a=>{const l=a.store.getState();l.internal.active&&(l.frameloop==="always"||l.internal.frames>0)&&(t+=aR(o,l))}),Yy(Yz,o),t>0)return requestAnimationFrame(r);Yy(PMe,o),e=!1}function i(o){if(!o)return n.forEach(a=>i(a.store.getState()));o.vr||!o.internal.active||o.frameloop==="never"||(o.internal.frames=Math.min(60,o.internal.frames+1),e||(e=!0,requestAnimationFrame(r)))}function s(o,a=!0,l){a&&Yy(Kz,o),l?aR(o,l):n.forEach(c=>aR(o,c.store.getState())),a&&Yy(Yz,o)}return{loop:r,invalidate:i,advance:s}}function DMe(n){const{handlePointer:e}=wMe(n),t={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};return{connected:!1,handlers:Object.keys(t).reduce((r,i)=>({...r,[i]:e(i)}),{}),connect:r=>{var i;const{set:s,events:o}=n.getState();o.disconnect==null||o.disconnect(),s(a=>({events:{...a.events,connected:r}})),Object.entries((i=o==null?void 0:o.handlers)!=null?i:[]).forEach(([a,l])=>{const[c,u]=t[a];r.addEventListener(c,l,{passive:u})})},disconnect:()=>{const{set:r,events:i}=n.getState();if(i.connected){var s;Object.entries((s=i.handlers)!=null?s:[]).forEach(([o,a])=>{if(i&&i.connected instanceof HTMLElement){const[l]=t[o];i.connected.removeEventListener(l,a)}}),r(o=>({events:{...o.events,connected:!1}}))}}}}const rP=typeof window<"u"?D.useLayoutEffect:D.useEffect;function LMe({set:n}){return rP(()=>(n(new Promise(()=>null)),()=>n(!1)),[]),null}class YY extends D.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}YY.getDerivedStateFromError=()=>({error:!0});const kMe=D.forwardRef(function({children:e,fallback:t,tabIndex:r,resize:i,id:s,style:o,className:a,events:l,...c},u){const[d,{width:h,height:f}]=yMe({scroll:!0,debounce:{scroll:50,resize:0},...i}),m=D.useRef(null),[g,v]=D.useState(!1),[y,A]=D.useState(!1);if(g)throw g;if(y)throw y;return rP(()=>{h>0&&f>0&&UMe(D.createElement(YY,{set:A},D.createElement(D.Suspense,{fallback:D.createElement(LMe,{set:v})},e)),m.current,{...c,size:{width:h,height:f},events:l||DMe})},[h,f,e]),rP(()=>{const C=m.current;return()=>nX(C)},[]),D.createElement("div",{ref:d,id:s,className:a,tabIndex:r,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",...o}},D.createElement("canvas",{ref:qY([m,u]),style:{display:"block"}},t))});function XY(){const n=D.useContext(KY);if(!n)throw"R3F hooks can only be used within the Canvas component!";return n}function pi(n=t=>t,e){return XY()(n,e)}function cp(n,e=0){const t=XY().getState().internal.subscribe,r=D.useRef(n);return D.useLayoutEffect(()=>void(r.current=n),[n]),D.useLayoutEffect(()=>t(r,e),[e,t]),null}function ZY(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function BMe(n){return D.useMemo(()=>ZY(n),[n])}function eX(n,e){return function(t,...r){const i=new t;return n&&n(i),Promise.all(r.map(s=>new Promise((o,a)=>i.load(s,l=>{l.scene&&Object.assign(l,ZY(l.scene)),o(l)},e,l=>a(`Could not load ${s}: ${l.message}`)))))}}function Pv(n,e,t,r){const i=Array.isArray(e)?e:[e],s=rh(eX(t,r),n,...i);return Array.isArray(e)?s:s[0]}Pv.preload=function(n,e,t){const r=Array.isArray(e)?e:[e];return rh.preload(eX(t),n,...r)};Pv.clear=function(n,e){const t=Array.isArray(e)?e:[e];return rh.clear(n,...t)};const CS=new Map,Xz=["legacy","blocking","concurrent"],{invalidate:FMe,advance:Zz}=OMe(CS),{reconciler:Zg,applyProps:tX}=MMe(),zMe=(n,e)=>{const t=typeof n=="function"?n(e):n;if(RMe(t))return t;const r=new K6({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n});return r.outputEncoding=ai,r.toneMapping=B6,n&&tX(r,n),r};function UMe(n,e,{gl:t,size:r,mode:i=Xz[1],events:s,onCreated:o,...a}={}){var l;if(!r){var c,u,d,h;r={width:(c=(u=e.parentElement)==null?void 0:u.clientWidth)!=null?c:0,height:(d=(h=e.parentElement)==null?void 0:h.clientHeight)!=null?d:0}}let f=CS.get(e),m=f==null?void 0:f.fiber,g=f==null?void 0:f.store,v=(l=g)==null?void 0:l.getState();if(m&&v&&(a.dpr!==void 0&&!qr.equ(v.viewport.dpr,nP(a.dpr))&&v.setDpr(a.dpr),(v.size.width!==r.width||v.size.height!==r.height)&&v.setSize(r.width,r.height),v.frameloop!==a.frameloop&&v.setFrameloop(a.frameloop),a.linear!==v.internal.lastProps.linear&&(nX(e),m=void 0)),!m){const y=zMe(t,e);a.vr&&(y.xr.enabled=!0,y.setAnimationLoop(C=>Zz(C,!0))),g=NMe(tX,FMe,Zz,{gl:y,size:r,...a});const A=g.getState();m=Zg.createContainer(g,Xz.indexOf(i),!1,null),CS.set(e,{fiber:m,store:g}),s&&A.set({events:s(g)})}if(g&&m)return Zg.updateContainer(D.createElement(jMe,{store:g,element:n,onCreated:o,target:e}),m,null,()=>{}),g;throw"Error creating root!"}function jMe({store:n,element:e,onCreated:t,target:r}){return D.useEffect(()=>{const i=n.getState();i.set(s=>({internal:{...s.internal,active:!0}})),i.events.connect==null||i.events.connect(r),t&&t(i)},[]),D.createElement(KY.Provider,{value:n},e)}function nX(n,e){const t=CS.get(n),r=t==null?void 0:t.fiber;if(r){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),Zg.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{var s,o,a;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),GMe(i),CS.delete(n),e&&e(n)},500)})}}function GMe(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const r in n){var e,t;(e=(t=r).dispose)==null||e.call(t),delete n[r]}}Zg.act;function HMe(n,e){return Zg.createPortal(n,e,null,null)}Zg.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:"17.0.2"});function ev(){return ev=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ev.apply(null,arguments)}const jA=new le,e5=new le,VMe=new le;function $Me(n,e,t){const r=jA.setFromMatrixPosition(n.matrixWorld);r.project(e);const i=t.width/2,s=t.height/2;return[r.x*i+i,-(r.y*s)+s]}function WMe(n,e){const t=jA.setFromMatrixPosition(n.matrixWorld),r=e5.setFromMatrixPosition(e.matrixWorld),i=t.sub(r),s=e.getWorldDirection(VMe);return i.angleTo(s)>Math.PI/2}function qMe(n,e,t,r){const i=jA.setFromMatrixPosition(n.matrixWorld),s=i.clone();s.project(e),t.setFromCamera(s,e);const o=t.intersectObjects(r,!0);if(o.length){const a=o[0].distance;return i.distanceTo(t.ray.origin)<a}return!0}function QMe(n,e){if(e instanceof Uc)return e.zoom;if(e instanceof gi){const t=jA.setFromMatrixPosition(n.matrixWorld),r=e5.setFromMatrixPosition(e.matrixWorld),i=e.fov*Math.PI/180,s=t.distanceTo(r);return 1/(2*Math.tan(i/2)*s)}else return 1}function JMe(n,e,t){if(e instanceof gi||e instanceof Uc){const r=jA.setFromMatrixPosition(n.matrixWorld),i=e5.setFromMatrixPosition(e.matrixWorld),s=r.distanceTo(i),o=(t[1]-t[0])/(e.far-e.near),a=t[1]-o*e.far;return Math.round(o*s+a)}}const iP=n=>Math.abs(n)<1e-10?0:n;function rX(n,e,t=""){let r="matrix3d(";for(let i=0;i!==16;i++)r+=iP(e[i]*n.elements[i])+(i!==15?",":")");return t+r}const KMe=(n=>e=>rX(e,n))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),YMe=(n=>(e,t)=>rX(e,n(t),"translate(-50%,-50%)"))(n=>[1/n,1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1]),XMe=D.forwardRef(({children:n,eps:e=.001,style:t,className:r,prepend:i,center:s,fullscreen:o,portal:a,distanceFactor:l,sprite:c=!1,transform:u=!1,occlude:d,onOcclude:h,zIndexRange:f=[16777271,0],calculatePosition:m=$Me,as:g="div",wrapperClass:v,pointerEvents:y="auto",...A},C)=>{var T;const x=pi(({gl:Q})=>Q),R=pi(({camera:Q})=>Q),N=pi(({scene:Q})=>Q),M=pi(({size:Q})=>Q),O=pi(({raycaster:Q})=>Q),[P]=D.useState(()=>document.createElement(g)),z=D.useRef(null),V=D.useRef(0),$=D.useRef([0,0]),B=D.useRef(null),q=D.useRef(null),K=(T=a==null?void 0:a.current)!==null&&T!==void 0?T:x.domElement.parentNode;D.useEffect(()=>{if(z.current){if(N.updateMatrixWorld(),u)P.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const Q=m(z.current,R,M);P.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${Q[0]}px,${Q[1]}px,0);transform-origin:0 0;`}return K&&(i?K.prepend(P):K.appendChild(P)),()=>{K&&K.removeChild(P),Ag.unmountComponentAtNode(P)}}},[K,u]),D.useLayoutEffect(()=>{v&&(P.className=v)},[v]);const se=D.useMemo(()=>u?{position:"absolute",top:0,left:0,width:M.width,height:M.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-M.height/2,left:-M.width/2,width:M.width,height:M.height},...t},[t,s,o,M,u]),W=D.useMemo(()=>({position:"absolute",pointerEvents:y}),[y]);D.useLayoutEffect(()=>{u?Ag.render(D.createElement("div",{ref:B,style:se},D.createElement("div",{ref:q,style:W},D.createElement("div",{ref:C,className:r,style:t,children:n}))),P):Ag.render(D.createElement("div",{ref:C,style:se,className:r,children:n}),P)});const ee=D.useRef(!0);return cp(()=>{if(z.current){R.updateMatrixWorld(),z.current.updateWorldMatrix(!0,!1);const Q=u?$.current:m(z.current,R,M);if(u||Math.abs(V.current-R.zoom)>e||Math.abs($.current[0]-Q[0])>e||Math.abs($.current[1]-Q[1])>e){const Y=WMe(z.current,R);let ae=!1;typeof d=="boolean"?d===!0&&(ae=[N]):Array.isArray(d)&&(ae=d.map(we=>we.current));const fe=ee.current;if(ae){const we=qMe(z.current,R,O,ae);ee.current=we&&!Y}else ee.current=!Y;if(fe!==ee.current&&(h?h(!ee.current):P.style.display=ee.current?"block":"none"),P.style.zIndex=`${JMe(z.current,R,f)}`,u){const[we,ge]=[M.width/2,M.height/2],Se=R.projectionMatrix.elements[5]*ge,{isOrthographicCamera:Ke,top:xe,left:Qe,bottom:We,right:Ve}=R,te=KMe(R.matrixWorldInverse),ce=Ke?`scale(${Se})translate(${iP(-(Ve+Qe)/2)}px,${iP((xe+We)/2)}px)`:`translateZ(${Se}px)`;let de=z.current.matrixWorld;c&&(de=R.matrixWorldInverse.clone().transpose().copyPosition(de).scale(z.current.scale),de.elements[3]=de.elements[7]=de.elements[11]=0,de.elements[15]=1),P.style.width=M.width+"px",P.style.height=M.height+"px",P.style.perspective=Ke?"":`${Se}px`,B.current&&q.current&&(B.current.style.transform=`${ce}${te}translate(${we}px,${ge}px)`,q.current.style.transform=YMe(de,1/((l||10)/400)))}else{const we=l===void 0?1:QMe(z.current,R)*l;P.style.transform=`translate3d(${Q[0]}px,${Q[1]}px,0) scale(${we})`}$.current=Q,V.current=R.zoom}}}),D.createElement("group",ev({},A,{ref:z}))});let Xy=0;const ZMe=GY(n=>(dg.onStart=(e,t,r)=>{n({active:!0,item:e,loaded:t,total:r,progress:(t-Xy)/(r-Xy)*100})},dg.onLoad=()=>{n({active:!1})},dg.onError=e=>n(t=>({errors:[...t.errors,e]})),dg.onProgress=(e,t,r)=>{t===r&&(Xy=r),n({active:!0,item:e,loaded:t,total:r,progress:(t-Xy)/(r-Xy)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0})),e3e=parseInt(gA.replace(/\D+/g,""));function eU(n,e){if(e===YQ)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===lx||e===j6){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const r=t.count-2,i=[];if(t)if(e===lx)for(let o=1;o<=r;o++)i.push(t.getX(0)),i.push(t.getX(o)),i.push(t.getX(o+1));else for(let o=0;o<r;o++)o%2===0?(i.push(t.getX(o)),i.push(t.getX(o+1)),i.push(t.getX(o+2))):(i.push(t.getX(o+2)),i.push(t.getX(o+1)),i.push(t.getX(o)));i.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(i),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}var t3e=Object.defineProperty,n3e=(n,e,t)=>e in n?t3e(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,r3e=(n,e,t)=>(n3e(n,typeof e!="symbol"?e+"":e,t),t);class i3e{constructor(){r3e(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}var s3e=Object.defineProperty,o3e=(n,e,t)=>e in n?s3e(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,un=(n,e,t)=>(o3e(n,typeof e!="symbol"?e+"":e,t),t);const JC=new Ev,tU=new Id,a3e=Math.cos(70*(Math.PI/180)),nU=(n,e)=>(n%e+e)%e;let l3e=class extends i3e{constructor(e,t){super(),un(this,"object"),un(this,"domElement"),un(this,"enabled",!0),un(this,"target",new le),un(this,"minDistance",0),un(this,"maxDistance",1/0),un(this,"minZoom",0),un(this,"maxZoom",1/0),un(this,"minPolarAngle",0),un(this,"maxPolarAngle",Math.PI),un(this,"minAzimuthAngle",-1/0),un(this,"maxAzimuthAngle",1/0),un(this,"enableDamping",!1),un(this,"dampingFactor",.05),un(this,"enableZoom",!0),un(this,"zoomSpeed",1),un(this,"enableRotate",!0),un(this,"rotateSpeed",1),un(this,"enablePan",!0),un(this,"panSpeed",1),un(this,"screenSpacePanning",!0),un(this,"keyPanSpeed",7),un(this,"zoomToCursor",!1),un(this,"autoRotate",!1),un(this,"autoRotateSpeed",2),un(this,"reverseOrbit",!1),un(this,"reverseHorizontalOrbit",!1),un(this,"reverseVerticalOrbit",!1),un(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),un(this,"mouseButtons",{LEFT:Kp.ROTATE,MIDDLE:Kp.DOLLY,RIGHT:Kp.PAN}),un(this,"touches",{ONE:Yp.ROTATE,TWO:Yp.DOLLY_PAN}),un(this,"target0"),un(this,"position0"),un(this,"zoom0"),un(this,"_domElementKeyEvents",null),un(this,"getPolarAngle"),un(this,"getAzimuthalAngle"),un(this,"setPolarAngle"),un(this,"setAzimuthalAngle"),un(this,"getDistance"),un(this,"getZoomScale"),un(this,"listenToKeyEvents"),un(this,"stopListenToKeyEvents"),un(this,"saveState"),un(this,"reset"),un(this,"update"),un(this,"connect"),un(this,"dispose"),un(this,"dollyIn"),un(this,"dollyOut"),un(this,"getScale"),un(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=Ae=>{let ue=nU(Ae,2*Math.PI),et=u.phi;et<0&&(et+=2*Math.PI),ue<0&&(ue+=2*Math.PI);let Be=Math.abs(ue-et);2*Math.PI-Be<Be&&(ue<et?ue+=2*Math.PI:et+=2*Math.PI),d.phi=ue-et,r.update()},this.setAzimuthalAngle=Ae=>{let ue=nU(Ae,2*Math.PI),et=u.theta;et<0&&(et+=2*Math.PI),ue<0&&(ue+=2*Math.PI);let Be=Math.abs(ue-et);2*Math.PI-Be<Be&&(ue<et?ue+=2*Math.PI:et+=2*Math.PI),d.theta=ue-et,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=Ae=>{Ae.addEventListener("keydown",zt),this._domElementKeyEvents=Ae},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",zt),this._domElementKeyEvents=null},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(i),r.update(),l=a.NONE},this.update=(()=>{const Ae=new le,ue=new le(0,1,0),et=new Hs().setFromUnitVectors(e.up,ue),Be=et.clone().invert(),lt=new le,St=new Hs,nn=2*Math.PI;return function(){const mr=r.object.position;et.setFromUnitVectors(e.up,ue),Be.copy(et).invert(),Ae.copy(mr).sub(r.target),Ae.applyQuaternion(et),u.setFromVector3(Ae),r.autoRotate&&l===a.NONE&&B(V()),r.enableDamping?(u.theta+=d.theta*r.dampingFactor,u.phi+=d.phi*r.dampingFactor):(u.theta+=d.theta,u.phi+=d.phi);let wn=r.minAzimuthAngle,yn=r.maxAzimuthAngle;isFinite(wn)&&isFinite(yn)&&(wn<-Math.PI?wn+=nn:wn>Math.PI&&(wn-=nn),yn<-Math.PI?yn+=nn:yn>Math.PI&&(yn-=nn),wn<=yn?u.theta=Math.max(wn,Math.min(yn,u.theta)):u.theta=u.theta>(wn+yn)/2?Math.max(wn,u.theta):Math.min(yn,u.theta)),u.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,u.phi)),u.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(f,r.dampingFactor):r.target.add(f),r.zoomToCursor&&O||r.object.isOrthographicCamera?u.radius=fe(u.radius):u.radius=fe(u.radius*h),Ae.setFromSpherical(u),Ae.applyQuaternion(Be),mr.copy(r.target).add(Ae),r.object.matrixAutoUpdate||r.object.updateMatrix(),r.object.lookAt(r.target),r.enableDamping===!0?(d.theta*=1-r.dampingFactor,d.phi*=1-r.dampingFactor,f.multiplyScalar(1-r.dampingFactor)):(d.set(0,0,0),f.set(0,0,0));let jr=!1;if(r.zoomToCursor&&O){let Mr=null;if(r.object instanceof gi&&r.object.isPerspectiveCamera){const Wi=Ae.length();Mr=fe(Wi*h);const nr=Wi-Mr;r.object.position.addScaledVector(N,nr),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const Wi=new le(M.x,M.y,0);Wi.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/h)),r.object.updateProjectionMatrix(),jr=!0;const nr=new le(M.x,M.y,0);nr.unproject(r.object),r.object.position.sub(nr).add(Wi),r.object.updateMatrixWorld(),Mr=Ae.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;Mr!==null&&(r.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(Mr).add(r.object.position):(JC.origin.copy(r.object.position),JC.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(JC.direction))<a3e?e.lookAt(r.target):(tU.setFromNormalAndCoplanarPoint(r.object.up,r.target),JC.intersectPlane(tU,r.target))))}else r.object instanceof Uc&&r.object.isOrthographicCamera&&(jr=h!==1,jr&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/h)),r.object.updateProjectionMatrix()));return h=1,O=!1,jr||lt.distanceToSquared(r.object.position)>c||8*(1-St.dot(r.object.quaternion))>c?(r.dispatchEvent(i),lt.copy(r.object.position),St.copy(r.object.quaternion),jr=!1,!0):!1}})(),this.connect=Ae=>{r.domElement=Ae,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",Ct),r.domElement.addEventListener("pointerdown",oe),r.domElement.addEventListener("pointercancel",Oe),r.domElement.addEventListener("wheel",ft)},this.dispose=()=>{var Ae,ue,et,Be,lt,St;r.domElement&&(r.domElement.style.touchAction="auto"),(Ae=r.domElement)==null||Ae.removeEventListener("contextmenu",Ct),(ue=r.domElement)==null||ue.removeEventListener("pointerdown",oe),(et=r.domElement)==null||et.removeEventListener("pointercancel",Oe),(Be=r.domElement)==null||Be.removeEventListener("wheel",ft),(lt=r.domElement)==null||lt.ownerDocument.removeEventListener("pointermove",ne),(St=r.domElement)==null||St.ownerDocument.removeEventListener("pointerup",Oe),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",zt)};const r=this,i={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const c=1e-6,u=new DN,d=new DN;let h=1;const f=new le,m=new tt,g=new tt,v=new tt,y=new tt,A=new tt,C=new tt,T=new tt,x=new tt,R=new tt,N=new le,M=new tt;let O=!1;const P=[],z={};function V(){return 2*Math.PI/60/60*r.autoRotateSpeed}function $(){return Math.pow(.95,r.zoomSpeed)}function B(Ae){r.reverseOrbit||r.reverseHorizontalOrbit?d.theta+=Ae:d.theta-=Ae}function q(Ae){r.reverseOrbit||r.reverseVerticalOrbit?d.phi+=Ae:d.phi-=Ae}const K=(()=>{const Ae=new le;return function(et,Be){Ae.setFromMatrixColumn(Be,0),Ae.multiplyScalar(-et),f.add(Ae)}})(),se=(()=>{const Ae=new le;return function(et,Be){r.screenSpacePanning===!0?Ae.setFromMatrixColumn(Be,1):(Ae.setFromMatrixColumn(Be,0),Ae.crossVectors(r.object.up,Ae)),Ae.multiplyScalar(et),f.add(Ae)}})(),W=(()=>{const Ae=new le;return function(et,Be){const lt=r.domElement;if(lt&&r.object instanceof gi&&r.object.isPerspectiveCamera){const St=r.object.position;Ae.copy(St).sub(r.target);let nn=Ae.length();nn*=Math.tan(r.object.fov/2*Math.PI/180),K(2*et*nn/lt.clientHeight,r.object.matrix),se(2*Be*nn/lt.clientHeight,r.object.matrix)}else lt&&r.object instanceof Uc&&r.object.isOrthographicCamera?(K(et*(r.object.right-r.object.left)/r.object.zoom/lt.clientWidth,r.object.matrix),se(Be*(r.object.top-r.object.bottom)/r.object.zoom/lt.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function ee(Ae){r.object instanceof gi&&r.object.isPerspectiveCamera||r.object instanceof Uc&&r.object.isOrthographicCamera?h=Ae:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function Q(Ae){ee(h/Ae)}function Y(Ae){ee(h*Ae)}function ae(Ae){if(!r.zoomToCursor||!r.domElement)return;O=!0;const ue=r.domElement.getBoundingClientRect(),et=Ae.clientX-ue.left,Be=Ae.clientY-ue.top,lt=ue.width,St=ue.height;M.x=et/lt*2-1,M.y=-(Be/St)*2+1,N.set(M.x,M.y,1).unproject(r.object).sub(r.object.position).normalize()}function fe(Ae){return Math.max(r.minDistance,Math.min(r.maxDistance,Ae))}function we(Ae){m.set(Ae.clientX,Ae.clientY)}function ge(Ae){ae(Ae),T.set(Ae.clientX,Ae.clientY)}function Se(Ae){y.set(Ae.clientX,Ae.clientY)}function Ke(Ae){g.set(Ae.clientX,Ae.clientY),v.subVectors(g,m).multiplyScalar(r.rotateSpeed);const ue=r.domElement;ue&&(B(2*Math.PI*v.x/ue.clientHeight),q(2*Math.PI*v.y/ue.clientHeight)),m.copy(g),r.update()}function xe(Ae){x.set(Ae.clientX,Ae.clientY),R.subVectors(x,T),R.y>0?Q($()):R.y<0&&Y($()),T.copy(x),r.update()}function Qe(Ae){A.set(Ae.clientX,Ae.clientY),C.subVectors(A,y).multiplyScalar(r.panSpeed),W(C.x,C.y),y.copy(A),r.update()}function We(Ae){ae(Ae),Ae.deltaY<0?Y($()):Ae.deltaY>0&&Q($()),r.update()}function Ve(Ae){let ue=!1;switch(Ae.code){case r.keys.UP:W(0,r.keyPanSpeed),ue=!0;break;case r.keys.BOTTOM:W(0,-r.keyPanSpeed),ue=!0;break;case r.keys.LEFT:W(r.keyPanSpeed,0),ue=!0;break;case r.keys.RIGHT:W(-r.keyPanSpeed,0),ue=!0;break}ue&&(Ae.preventDefault(),r.update())}function te(){if(P.length==1)m.set(P[0].pageX,P[0].pageY);else{const Ae=.5*(P[0].pageX+P[1].pageX),ue=.5*(P[0].pageY+P[1].pageY);m.set(Ae,ue)}}function ce(){if(P.length==1)y.set(P[0].pageX,P[0].pageY);else{const Ae=.5*(P[0].pageX+P[1].pageX),ue=.5*(P[0].pageY+P[1].pageY);y.set(Ae,ue)}}function de(){const Ae=P[0].pageX-P[1].pageX,ue=P[0].pageY-P[1].pageY,et=Math.sqrt(Ae*Ae+ue*ue);T.set(0,et)}function Pe(){r.enableZoom&&de(),r.enablePan&&ce()}function Te(){r.enableZoom&&de(),r.enableRotate&&te()}function De(Ae){if(P.length==1)g.set(Ae.pageX,Ae.pageY);else{const et=cn(Ae),Be=.5*(Ae.pageX+et.x),lt=.5*(Ae.pageY+et.y);g.set(Be,lt)}v.subVectors(g,m).multiplyScalar(r.rotateSpeed);const ue=r.domElement;ue&&(B(2*Math.PI*v.x/ue.clientHeight),q(2*Math.PI*v.y/ue.clientHeight)),m.copy(g)}function Ge(Ae){if(P.length==1)A.set(Ae.pageX,Ae.pageY);else{const ue=cn(Ae),et=.5*(Ae.pageX+ue.x),Be=.5*(Ae.pageY+ue.y);A.set(et,Be)}C.subVectors(A,y).multiplyScalar(r.panSpeed),W(C.x,C.y),y.copy(A)}function it(Ae){const ue=cn(Ae),et=Ae.pageX-ue.x,Be=Ae.pageY-ue.y,lt=Math.sqrt(et*et+Be*Be);x.set(0,lt),R.set(0,Math.pow(x.y/T.y,r.zoomSpeed)),Q(R.y),T.copy(x)}function ke(Ae){r.enableZoom&&it(Ae),r.enablePan&&Ge(Ae)}function ct(Ae){r.enableZoom&&it(Ae),r.enableRotate&&De(Ae)}function oe(Ae){var ue,et;r.enabled!==!1&&(P.length===0&&((ue=r.domElement)==null||ue.ownerDocument.addEventListener("pointermove",ne),(et=r.domElement)==null||et.ownerDocument.addEventListener("pointerup",Oe)),wt(Ae),Ae.pointerType==="touch"?je(Ae):st(Ae))}function ne(Ae){r.enabled!==!1&&(Ae.pointerType==="touch"?Bt(Ae):Je(Ae))}function Oe(Ae){var ue,et,Be;xt(Ae),P.length===0&&((ue=r.domElement)==null||ue.releasePointerCapture(Ae.pointerId),(et=r.domElement)==null||et.ownerDocument.removeEventListener("pointermove",ne),(Be=r.domElement)==null||Be.ownerDocument.removeEventListener("pointerup",Oe)),r.dispatchEvent(o),l=a.NONE}function st(Ae){let ue;switch(Ae.button){case 0:ue=r.mouseButtons.LEFT;break;case 1:ue=r.mouseButtons.MIDDLE;break;case 2:ue=r.mouseButtons.RIGHT;break;default:ue=-1}switch(ue){case Kp.DOLLY:if(r.enableZoom===!1)return;ge(Ae),l=a.DOLLY;break;case Kp.ROTATE:if(Ae.ctrlKey||Ae.metaKey||Ae.shiftKey){if(r.enablePan===!1)return;Se(Ae),l=a.PAN}else{if(r.enableRotate===!1)return;we(Ae),l=a.ROTATE}break;case Kp.PAN:if(Ae.ctrlKey||Ae.metaKey||Ae.shiftKey){if(r.enableRotate===!1)return;we(Ae),l=a.ROTATE}else{if(r.enablePan===!1)return;Se(Ae),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function Je(Ae){if(r.enabled!==!1)switch(l){case a.ROTATE:if(r.enableRotate===!1)return;Ke(Ae);break;case a.DOLLY:if(r.enableZoom===!1)return;xe(Ae);break;case a.PAN:if(r.enablePan===!1)return;Qe(Ae);break}}function ft(Ae){r.enabled===!1||r.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(Ae.preventDefault(),r.dispatchEvent(s),We(Ae),r.dispatchEvent(o))}function zt(Ae){r.enabled===!1||r.enablePan===!1||Ve(Ae)}function je(Ae){switch(qt(Ae),P.length){case 1:switch(r.touches.ONE){case Yp.ROTATE:if(r.enableRotate===!1)return;te(),l=a.TOUCH_ROTATE;break;case Yp.PAN:if(r.enablePan===!1)return;ce(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(r.touches.TWO){case Yp.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Pe(),l=a.TOUCH_DOLLY_PAN;break;case Yp.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Te(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function Bt(Ae){switch(qt(Ae),l){case a.TOUCH_ROTATE:if(r.enableRotate===!1)return;De(Ae),r.update();break;case a.TOUCH_PAN:if(r.enablePan===!1)return;Ge(Ae),r.update();break;case a.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;ke(Ae),r.update();break;case a.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;ct(Ae),r.update();break;default:l=a.NONE}}function Ct(Ae){r.enabled!==!1&&Ae.preventDefault()}function wt(Ae){P.push(Ae)}function xt(Ae){delete z[Ae.pointerId];for(let ue=0;ue<P.length;ue++)if(P[ue].pointerId==Ae.pointerId){P.splice(ue,1);return}}function qt(Ae){let ue=z[Ae.pointerId];ue===void 0&&(ue=new tt,z[Ae.pointerId]=ue),ue.set(Ae.pageX,Ae.pageY)}function cn(Ae){const ue=Ae.pointerId===P[0].pointerId?P[1]:P[0];return z[ue.pointerId]}this.dollyIn=(Ae=$())=>{Y(Ae),r.update()},this.dollyOut=(Ae=$())=>{Q(Ae),r.update()},this.getScale=()=>h,this.setScale=Ae=>{ee(Ae),r.update()},this.getZoomScale=()=>$(),t!==void 0&&this.connect(t),this.update()}};function wx(n){if(typeof TextDecoder<"u")return new TextDecoder().decode(n);let e="";for(let t=0,r=n.length;t<r;t++)e+=String.fromCharCode(n[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const dm="srgb",Vd="srgb-linear",rU=3001,c3e=3e3;class t5 extends fa{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new p3e(t)}),this.register(function(t){return new m3e(t)}),this.register(function(t){return new w3e(t)}),this.register(function(t){return new T3e(t)}),this.register(function(t){return new x3e(t)}),this.register(function(t){return new v3e(t)}),this.register(function(t){return new y3e(t)}),this.register(function(t){return new _3e(t)}),this.register(function(t){return new S3e(t)}),this.register(function(t){return new f3e(t)}),this.register(function(t){return new A3e(t)}),this.register(function(t){return new g3e(t)}),this.register(function(t){return new C3e(t)}),this.register(function(t){return new E3e(t)}),this.register(function(t){return new d3e(t)}),this.register(function(t){return new I3e(t)}),this.register(function(t){return new b3e(t)})}load(e,t,r,i){const s=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const c=Mf.extractUrlBase(e);o=Mf.resolveURL(c,this.path)}else o=Mf.extractUrlBase(e);this.manager.itemStart(e);const a=function(c){i?i(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new dl(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(u){t(u),s.manager.itemEnd(e)},a)}catch(u){a(u)}},r,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,i){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(wx(new Uint8Array(e.slice(0,4)))===iX){try{o[or.KHR_BINARY_GLTF]=new M3e(e)}catch(u){i&&i(u);return}s=JSON.parse(o[or.KHR_BINARY_GLTF].content)}else s=JSON.parse(wx(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new G3e(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const u=this.pluginCallbacks[c](l);u.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[u.name]=u,o[u.name]=!0}if(s.extensionsUsed)for(let c=0;c<s.extensionsUsed.length;++c){const u=s.extensionsUsed[c],d=s.extensionsRequired||[];switch(u){case or.KHR_MATERIALS_UNLIT:o[u]=new h3e;break;case or.KHR_DRACO_MESH_COMPRESSION:o[u]=new R3e(s,this.dracoLoader);break;case or.KHR_TEXTURE_TRANSFORM:o[u]=new N3e;break;case or.KHR_MESH_QUANTIZATION:o[u]=new P3e;break;default:d.indexOf(u)>=0&&a[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(r,i)}parseAsync(e,t){const r=this;return new Promise(function(i,s){r.parse(e,t,i,s)})}}function u3e(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const or={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class d3e{constructor(e){this.parser=e,this.name=or.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let r=0,i=t.length;r<i;r++){const s=t[r];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,r="light:"+e;let i=t.cache.get(r);if(i)return i;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const u=new Dt(16777215);l.color!==void 0&&u.setRGB(l.color[0],l.color[1],l.color[2],Vd);const d=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new mD(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new pD(u),c.distance=d;break;case"spot":c=new fD(u),c.distance=d,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,Td(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),i=Promise.resolve(c),t.cache.add(r,i),i}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,r=this.parser,s=r.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return r._getNodeRef(t.cache,a,l)})}}class h3e{constructor(){this.name=or.KHR_MATERIALS_UNLIT}getMaterialType(){return rl}extendParams(e,t,r){const i=[];e.color=new Dt(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],Vd),e.opacity=o[3]}s.baseColorTexture!==void 0&&i.push(r.assignTexture(e,"map",s.baseColorTexture,dm))}return Promise.all(i)}}class f3e{constructor(e){this.parser=e,this.name=or.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class p3e{constructor(e){this.parser=e,this.name=or.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ac}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(r.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new tt(a,a)}return Promise.all(s)}}class m3e{constructor(e){this.parser=e,this.name=or.KHR_MATERIALS_DISPERSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ac}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class g3e{constructor(e){this.parser=e,this.name=or.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ac}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class v3e{constructor(e){this.parser=e,this.name=or.KHR_MATERIALS_SHEEN}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ac}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Dt(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=i.extensions[this.name];if(o.sheenColorFactor!==void 0){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],Vd)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(r.assignTexture(t,"sheenColorMap",o.sheenColorTexture,dm)),o.sheenRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class y3e{constructor(e){this.parser=e,this.name=or.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ac}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(r.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class _3e{constructor(e){this.parser=e,this.name=or.KHR_MATERIALS_VOLUME}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ac}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(r.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new Dt().setRGB(a[0],a[1],a[2],Vd),Promise.all(s)}}class S3e{constructor(e){this.parser=e,this.name=or.KHR_MATERIALS_IOR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ac}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class A3e{constructor(e){this.parser=e,this.name=or.KHR_MATERIALS_SPECULAR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ac}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(r.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new Dt().setRGB(a[0],a[1],a[2],Vd),o.specularColorTexture!==void 0&&s.push(r.assignTexture(t,"specularColorMap",o.specularColorTexture,dm)),Promise.all(s)}}class E3e{constructor(e){this.parser=e,this.name=or.EXT_MATERIALS_BUMP}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ac}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(r.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}}class C3e{constructor(e){this.parser=e,this.name=or.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ac}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(r.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class w3e{constructor(e){this.parser=e,this.name=or.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,r=t.json,i=r.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class T3e{constructor(e){this.parser=e,this.name=or.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const c=r.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class x3e{constructor(e){this.parser=e,this.name=or.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const c=r.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class I3e{constructor(e){this.name=or.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const i=r.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=i.byteOffset||0,c=i.byteLength||0,u=i.count,d=i.byteStride,h=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,d,h,i.mode,i.filter).then(function(f){return f.buffer}):o.ready.then(function(){const f=new ArrayBuffer(u*d);return o.decodeGltfBuffer(new Uint8Array(f),u,d,h,i.mode,i.filter),f})})}else return null}}class b3e{constructor(e){this.name=or.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,r=t.nodes[e];if(!r.extensions||!r.extensions[this.name]||r.mesh===void 0)return null;const i=t.meshes[r.mesh];for(const c of i.primitives)if(c.mode!==Ll.TRIANGLES&&c.mode!==Ll.TRIANGLE_STRIP&&c.mode!==Ll.TRIANGLE_FAN&&c.mode!==void 0)return null;const o=r.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(u=>(l[c]=u,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const u=c.pop(),d=u.isGroup?u.children:[u],h=c[0].count,f=[];for(const m of d){const g=new xn,v=new le,y=new Hs,A=new le(1,1,1),C=new X6(m.geometry,m.material,h);for(let T=0;T<h;T++)l.TRANSLATION&&v.fromBufferAttribute(l.TRANSLATION,T),l.ROTATION&&y.fromBufferAttribute(l.ROTATION,T),l.SCALE&&A.fromBufferAttribute(l.SCALE,T),C.setMatrixAt(T,g.compose(v,y,A));for(const T in l)if(T==="_COLOR_0"){const x=l[T];C.instanceColor=new Pm(x.array,x.itemSize,x.normalized)}else T!=="TRANSLATION"&&T!=="ROTATION"&&T!=="SCALE"&&m.geometry.setAttribute(T,l[T]);pr.prototype.copy.call(C,m),this.parser.assignFinalMaterial(C),f.push(C)}return u.isGroup?(u.clear(),u.add(...f),u):f[0]}))}}const iX="glTF",Zy=12,iU={JSON:1313821514,BIN:5130562};class M3e{constructor(e){this.name=or.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Zy);if(this.header={magic:wx(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==iX)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-Zy,i=new DataView(e,Zy);let s=0;for(;s<r;){const o=i.getUint32(s,!0);s+=4;const a=i.getUint32(s,!0);if(s+=4,a===iU.JSON){const l=new Uint8Array(e,Zy+s,o);this.content=wx(l)}else if(a===iU.BIN){const l=Zy+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class R3e{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=or.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const r=this.json,i=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const u in o){const d=sP[u]||u.toLowerCase();a[d]=o[u]}for(const u in e.attributes){const d=sP[u]||u.toLowerCase();if(o[u]!==void 0){const h=r.accessors[e.attributes[u]],f=Mg[h.componentType];c[d]=f.name,l[d]=h.normalized===!0}}return t.getDependency("bufferView",s).then(function(u){return new Promise(function(d,h){i.decodeDracoFile(u,function(f){for(const m in f.attributes){const g=f.attributes[m],v=l[m];v!==void 0&&(g.normalized=v)}d(f)},a,c,Vd,h)})})}}class N3e{constructor(){this.name=or.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class P3e{constructor(){this.name=or.KHR_MESH_QUANTIZATION}}class sX extends Mv{constructor(e,t,r,i){super(e,t,r,i)}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let o=0;o!==i;o++)t[o]=r[s+o];return t}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,u=i-t,d=(r-t)/u,h=d*d,f=h*d,m=e*c,g=m-c,v=-2*f+3*h,y=f-h,A=1-v,C=y-h+d;for(let T=0;T!==a;T++){const x=o[g+T+a],R=o[g+T+l]*u,N=o[m+T+a],M=o[m+T]*u;s[T]=A*x+C*R+v*N+y*M}return s}}const O3e=new Hs;class D3e extends sX{interpolate_(e,t,r,i){const s=super.interpolate_(e,t,r,i);return O3e.fromArray(s).normalize().toArray(s),s}}const Ll={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Mg={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},sU={9728:ts,9729:li,9984:oS,9985:O2,9986:aS,9987:uh},oU={33071:Ro,33648:qg,10497:kf},lR={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},sP={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...e3e>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Jh={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},L3e={CUBICSPLINE:void 0,LINEAR:Nm,STEP:Qg},cR={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function k3e(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new bv({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Df})),n.DefaultMaterial}function Wp(n,e,t){for(const r in t.extensions)n[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=t.extensions[r])}function Td(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function B3e(n,e,t){let r=!1,i=!1,s=!1;for(let c=0,u=e.length;c<u;c++){const d=e[c];if(d.POSITION!==void 0&&(r=!0),d.NORMAL!==void 0&&(i=!0),d.COLOR_0!==void 0&&(s=!0),r&&i&&s)break}if(!r&&!i&&!s)return Promise.resolve(n);const o=[],a=[],l=[];for(let c=0,u=e.length;c<u;c++){const d=e[c];if(r){const h=d.POSITION!==void 0?t.getDependency("accessor",d.POSITION):n.attributes.position;o.push(h)}if(i){const h=d.NORMAL!==void 0?t.getDependency("accessor",d.NORMAL):n.attributes.normal;a.push(h)}if(s){const h=d.COLOR_0!==void 0?t.getDependency("accessor",d.COLOR_0):n.attributes.color;l.push(h)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const u=c[0],d=c[1],h=c[2];return r&&(n.morphAttributes.position=u),i&&(n.morphAttributes.normal=d),s&&(n.morphAttributes.color=h),n.morphTargetsRelative=!0,n})}function F3e(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,r=e.weights.length;t<r;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let r=0,i=t.length;r<i;r++)n.morphTargetDictionary[t[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function z3e(n){let e;const t=n.extensions&&n.extensions[or.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+uR(t.attributes):e=n.indices+":"+uR(n.attributes)+":"+n.mode,n.targets!==void 0)for(let r=0,i=n.targets.length;r<i;r++)e+=":"+uR(n.targets[r]);return e}function uR(n){let e="";const t=Object.keys(n).sort();for(let r=0,i=t.length;r<i;r++)e+=t[r]+":"+n[t[r]]+";";return e}function oP(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function U3e(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const j3e=new xn;class G3e{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new u3e,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let r=!1,i=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,i=navigator.userAgent.indexOf("Firefox")>-1,s=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||r||i&&s<98?this.textureLoader=new VJ(this.options.manager):this.textureLoader=new YJ(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new dl(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const r=this,i=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(o){const a={scene:o[0][i.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:i.asset,parser:r,userData:{}};return Wp(s,a,i),Td(a,i),Promise.all(r._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(const l of a.scenes)l.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[];for(let i=0,s=t.length;i<s;i++){const o=t[i].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let i=0,s=e.length;i<s;i++){const o=e[i];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(r[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,r){if(e.refs[t]<=1)return r;const i=r.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,u]of o.children.entries())s(u,a.children[c])};return s(r,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let r=0;r<t.length;r++){const i=e(t[r]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const r=[];for(let i=0;i<t.length;i++){const s=e(t[i]);s&&r.push(s)}return r}getDependency(e,t){const r=e+":"+t;let i=this.cache.get(r);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:if(i=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!i)throw new Error("Unknown type: "+e);break}this.cache.add(r,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const r=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(i.map(function(s,o){return r.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],r=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[or.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,o){r.load(Mf.resolveURL(t.uri,i.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(r){const i=t.byteLength||0,s=t.byteOffset||0;return r.slice(s,s+i)})}loadAccessor(e){const t=this,r=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0){const o=lR[i.type],a=Mg[i.componentType],l=i.normalized===!0,c=new a(i.count*o);return Promise.resolve(new wr(c,o,l))}const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=lR[i.type],c=Mg[i.componentType],u=c.BYTES_PER_ELEMENT,d=u*l,h=i.byteOffset||0,f=i.bufferView!==void 0?r.bufferViews[i.bufferView].byteStride:void 0,m=i.normalized===!0;let g,v;if(f&&f!==d){const y=Math.floor(h/f),A="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+y+":"+i.count;let C=t.cache.get(A);C||(g=new c(a,y*f,i.count*f/u),C=new SA(g,f/u),t.cache.add(A,C)),v=new Ff(C,l,h%f/u,m)}else a===null?g=new c(i.count*l):g=new c(a,h,i.count*l),v=new wr(g,l,m);if(i.sparse!==void 0){const y=lR.SCALAR,A=Mg[i.sparse.indices.componentType],C=i.sparse.indices.byteOffset||0,T=i.sparse.values.byteOffset||0,x=new A(o[1],C,i.sparse.count*y),R=new c(o[2],T,i.sparse.count*l);a!==null&&(v=new wr(v.array.slice(),v.itemSize,v.normalized));for(let N=0,M=x.length;N<M;N++){const O=x[N];if(v.setX(O,R[N*l]),l>=2&&v.setY(O,R[N*l+1]),l>=3&&v.setZ(O,R[N*l+2]),l>=4&&v.setW(O,R[N*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return v})}loadTexture(e){const t=this.json,r=this.options,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=r.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,r){const i=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,r).then(function(u){u.flipY=!1,u.name=o.name||a.name||"",u.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(u.name=a.uri);const h=(s.samplers||{})[o.sampler]||{};return u.magFilter=sU[h.magFilter]||li,u.minFilter=sU[h.minFilter]||uh,u.wrapS=oU[h.wrapS]||kf,u.wrapT=oU[h.wrapT]||kf,i.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const r=this,i=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(d=>d.clone());const o=i.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=r.getDependency("bufferView",o.bufferView).then(function(d){c=!0;const h=new Blob([d],{type:o.mimeType});return l=a.createObjectURL(h),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(d){return new Promise(function(h,f){let m=h;t.isImageBitmapLoader===!0&&(m=function(g){const v=new Vi(g);v.needsUpdate=!0,h(v)}),t.load(Mf.resolveURL(d,s.path),m,void 0,f)})}).then(function(d){return c===!0&&a.revokeObjectURL(l),Td(d,o),d.userData.mimeType=o.mimeType||U3e(o.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),d});return this.sourceCache[e]=u,u}assignTexture(e,t,r,i){const s=this;return this.getDependency("texture",r.index).then(function(o){if(!o)return null;if(r.texCoord!==void 0&&r.texCoord>0&&(o=o.clone(),o.channel=r.texCoord),s.extensions[or.KHR_TEXTURE_TRANSFORM]){const a=r.extensions!==void 0?r.extensions[or.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[or.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return i!==void 0&&(typeof i=="number"&&(i=i===rU?dm:Vd),"colorSpace"in o?o.colorSpace=i:o.encoding=i===dm?rU:c3e),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let r=e.material;const i=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new G2,Rs.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,l.sizeAttenuation=!1,this.cache.add(a,l)),r=l}else if(e.isLine){const a="LineBasicMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new Do,Rs.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,this.cache.add(a,l)),r=l}if(i||s||o){let a="ClonedMaterial:"+r.uuid+":";i&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=r.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),i&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(r))),r=l}e.material=r}getMaterialType(){return bv}loadMaterial(e){const t=this,r=this.json,i=this.extensions,s=r.materials[e];let o;const a={},l=s.extensions||{},c=[];if(l[or.KHR_MATERIALS_UNLIT]){const d=i[or.KHR_MATERIALS_UNLIT];o=d.getMaterialType(),c.push(d.extendParams(a,s,t))}else{const d=s.pbrMetallicRoughness||{};if(a.color=new Dt(1,1,1),a.opacity=1,Array.isArray(d.baseColorFactor)){const h=d.baseColorFactor;a.color.setRGB(h[0],h[1],h[2],Vd),a.opacity=h[3]}d.baseColorTexture!==void 0&&c.push(t.assignTexture(a,"map",d.baseColorTexture,dm)),a.metalness=d.metallicFactor!==void 0?d.metallicFactor:1,a.roughness=d.roughnessFactor!==void 0?d.roughnessFactor:1,d.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(a,"metalnessMap",d.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",d.metallicRoughnessTexture))),o=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=xu);const u=s.alphaMode||cR.OPAQUE;if(u===cR.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,u===cR.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==rl&&(c.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new tt(1,1),s.normalTexture.scale!==void 0)){const d=s.normalTexture.scale;a.normalScale.set(d,d)}if(s.occlusionTexture!==void 0&&o!==rl&&(c.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==rl){const d=s.emissiveFactor;a.emissive=new Dt().setRGB(d[0],d[1],d[2],Vd)}return s.emissiveTexture!==void 0&&o!==rl&&c.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,dm)),Promise.all(c).then(function(){const d=new o(a);return s.name&&(d.name=s.name),Td(d,s),t.associations.set(d,{materials:e}),s.extensions&&Wp(i,d,s),d})}createUniqueName(e){const t=yr.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,r=this.extensions,i=this.primitiveCache;function s(a){return r[or.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return aU(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],u=z3e(c),d=i[u];if(d)o.push(d.promise);else{let h;c.extensions&&c.extensions[or.KHR_DRACO_MESH_COMPRESSION]?h=s(c):h=aU(new Jn,c,t),i[u]={primitive:c,promise:h},o.push(h)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.json,i=this.extensions,s=r.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const u=o[l].material===void 0?k3e(this.cache):this.getDependency("material",o[l].material);a.push(u)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],d=[];for(let f=0,m=u.length;f<m;f++){const g=u[f],v=o[f];let y;const A=c[f];if(v.mode===Ll.TRIANGLES||v.mode===Ll.TRIANGLE_STRIP||v.mode===Ll.TRIANGLE_FAN||v.mode===void 0)y=s.isSkinnedMesh===!0?new AA(g,A):new js(g,A),y.isSkinnedMesh===!0&&y.normalizeSkinWeights(),v.mode===Ll.TRIANGLE_STRIP?y.geometry=eU(y.geometry,j6):v.mode===Ll.TRIANGLE_FAN&&(y.geometry=eU(y.geometry,lx));else if(v.mode===Ll.LINES)y=new Yc(g,A);else if(v.mode===Ll.LINE_STRIP)y=new Zd(g,A);else if(v.mode===Ll.LINE_LOOP)y=new Z6(g,A);else if(v.mode===Ll.POINTS)y=new eD(g,A);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+v.mode);Object.keys(y.geometry.morphAttributes).length>0&&F3e(y,s),y.name=t.createUniqueName(s.name||"mesh_"+e),Td(y,s),v.extensions&&Wp(i,y,v),t.assignFinalMaterial(y),d.push(y)}for(let f=0,m=d.length;f<m;f++)t.associations.set(d[f],{meshes:e,primitives:f});if(d.length===1)return s.extensions&&Wp(i,d[0],s),d[0];const h=new Bd;s.extensions&&Wp(i,h,s),t.associations.set(h,{meshes:e});for(let f=0,m=d.length;f<m;f++)h.add(d[f]);return h})}loadCamera(e){let t;const r=this.json.cameras[e],i=r[r.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?t=new gi(kd.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):r.type==="orthographic"&&(t=new Uc(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),Td(t,r),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],r=[];for(let i=0,s=t.joints.length;i<s;i++)r.push(this._loadNodeShallow(t.joints[i]));return t.inverseBindMatrices!==void 0?r.push(this.getDependency("accessor",t.inverseBindMatrices)):r.push(null),Promise.all(r).then(function(i){const s=i.pop(),o=i,a=[],l=[];for(let c=0,u=o.length;c<u;c++){const d=o[c];if(d){a.push(d);const h=new xn;s!==null&&h.fromArray(s.array,c*16),l.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new EA(a,l)})}loadAnimation(e){const t=this.json,r=this,i=t.animations[e],s=i.name?i.name:"animation_"+e,o=[],a=[],l=[],c=[],u=[];for(let d=0,h=i.channels.length;d<h;d++){const f=i.channels[d],m=i.samplers[f.sampler],g=f.target,v=g.node,y=i.parameters!==void 0?i.parameters[m.input]:m.input,A=i.parameters!==void 0?i.parameters[m.output]:m.output;g.node!==void 0&&(o.push(this.getDependency("node",v)),a.push(this.getDependency("accessor",y)),l.push(this.getDependency("accessor",A)),c.push(m),u.push(g))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c),Promise.all(u)]).then(function(d){const h=d[0],f=d[1],m=d[2],g=d[3],v=d[4],y=[];for(let A=0,C=h.length;A<C;A++){const T=h[A],x=f[A],R=m[A],N=g[A],M=v[A];if(T===void 0)continue;T.updateMatrix&&T.updateMatrix();const O=r._createAnimationTracks(T,x,R,N,M);if(O)for(let P=0;P<O.length;P++)y.push(O[P])}return new Yg(s,void 0,y)})}createNodeMesh(e){const t=this.json,r=this,i=t.nodes[e];return i.mesh===void 0?null:r.getDependency("mesh",i.mesh).then(function(s){const o=r._getNodeRef(r.meshCache,i.mesh,s);return i.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=i.weights.length;l<c;l++)a.morphTargetInfluences[l]=i.weights[l]}),o})}loadNode(e){const t=this.json,r=this,i=t.nodes[e],s=r._loadNodeShallow(e),o=[],a=i.children||[];for(let c=0,u=a.length;c<u;c++)o.push(r.getDependency("node",a[c]));const l=i.skin===void 0?Promise.resolve(null):r.getDependency("skin",i.skin);return Promise.all([s,Promise.all(o),l]).then(function(c){const u=c[0],d=c[1],h=c[2];h!==null&&u.traverse(function(f){f.isSkinnedMesh&&f.bind(h,j3e)});for(let f=0,m=d.length;f<m;f++)u.add(d[f]);return u})}_loadNodeShallow(e){const t=this.json,r=this.extensions,i=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?i.createUniqueName(s.name):"",a=[],l=i._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(i.getDependency("camera",s.camera).then(function(c){return i._getNodeRef(i.cameraCache,s.camera,c)})),i._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let u;if(s.isBone===!0?u=new j2:c.length>1?u=new Bd:c.length===1?u=c[0]:u=new pr,u!==c[0])for(let d=0,h=c.length;d<h;d++)u.add(c[d]);if(s.name&&(u.userData.name=s.name,u.name=o),Td(u,s),s.extensions&&Wp(r,u,s),s.matrix!==void 0){const d=new xn;d.fromArray(s.matrix),u.applyMatrix4(d)}else s.translation!==void 0&&u.position.fromArray(s.translation),s.rotation!==void 0&&u.quaternion.fromArray(s.rotation),s.scale!==void 0&&u.scale.fromArray(s.scale);return i.associations.has(u)||i.associations.set(u,{}),i.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const t=this.extensions,r=this.json.scenes[e],i=this,s=new Bd;r.name&&(s.name=i.createUniqueName(r.name)),Td(s,r),r.extensions&&Wp(t,s,r);const o=r.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(i.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let u=0,d=l.length;u<d;u++)s.add(l[u]);const c=u=>{const d=new Map;for(const[h,f]of i.associations)(h instanceof Rs||h instanceof Vi)&&d.set(h,f);return u.traverse(h=>{const f=i.associations.get(h);f!=null&&d.set(h,f)}),d};return i.associations=c(s),s})}_createAnimationTracks(e,t,r,i,s){const o=[],a=e.name?e.name:e.uuid,l=[];Jh[s.path]===Jh.weights?e.traverse(function(h){h.morphTargetInfluences&&l.push(h.name?h.name:h.uuid)}):l.push(a);let c;switch(Jh[s.path]){case Jh.weights:c=Om;break;case Jh.rotation:c=Uf;break;case Jh.position:case Jh.scale:c=Dm;break;default:switch(r.itemSize){case 1:c=Om;break;case 2:case 3:default:c=Dm;break}break}const u=i.interpolation!==void 0?L3e[i.interpolation]:Nm,d=this._getArrayFromAccessor(r);for(let h=0,f=l.length;h<f;h++){const m=new c(l[h]+"."+Jh[s.path],t.array,d,u);i.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(m),o.push(m)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const r=oP(t.constructor),i=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)i[s]=t[s]*r;t=i}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(r){const i=this instanceof Uf?D3e:sX;return new i(this.times,this.values,this.getValueSize()/3,r)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function H3e(n,e,t){const r=e.attributes,i=new np;if(r.POSITION!==void 0){const a=t.json.accessors[r.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(i.set(new le(l[0],l[1],l[2]),new le(c[0],c[1],c[2])),a.normalized){const u=oP(Mg[a.componentType]);i.min.multiplyScalar(u),i.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new le,l=new le;for(let c=0,u=s.length;c<u;c++){const d=s[c];if(d.POSITION!==void 0){const h=t.json.accessors[d.POSITION],f=h.min,m=h.max;if(f!==void 0&&m!==void 0){if(l.setX(Math.max(Math.abs(f[0]),Math.abs(m[0]))),l.setY(Math.max(Math.abs(f[1]),Math.abs(m[1]))),l.setZ(Math.max(Math.abs(f[2]),Math.abs(m[2]))),h.normalized){const g=oP(Mg[h.componentType]);l.multiplyScalar(g)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(a)}n.boundingBox=i;const o=new rp;i.getCenter(o.center),o.radius=i.min.distanceTo(i.max)/2,n.boundingSphere=o}function aU(n,e,t){const r=e.attributes,i=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in r){const a=sP[o]||o.toLowerCase();a in n.attributes||i.push(s(r[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});i.push(o)}return Td(n,e),H3e(n,e,t),Promise.all(i).then(function(){return e.targets!==void 0?B3e(n,e.targets,t):n})}class V3e extends HJ{constructor(e){super(e),this.type=kc}parse(e){const o=function(M,O){switch(M){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(O||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(O||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(O||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(O||""))}},u=`
`,d=function(M,O,P){O=O||1024;let V=M.pos,$=-1,B=0,q="",K=String.fromCharCode.apply(null,new Uint16Array(M.subarray(V,V+128)));for(;0>($=K.indexOf(u))&&B<O&&V<M.byteLength;)q+=K,B+=K.length,V+=128,K+=String.fromCharCode.apply(null,new Uint16Array(M.subarray(V,V+128)));return-1<$?(P!==!1&&(M.pos+=B+$+1),q+K.slice(0,$)):!1},h=function(M){const O=/^#\?(\S+)/,P=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,z=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,V=/^\s*FORMAT=(\S+)\s*$/,$=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,B={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let q,K;for((M.pos>=M.byteLength||!(q=d(M)))&&o(1,"no header found"),(K=q.match(O))||o(3,"bad initial token"),B.valid|=1,B.programtype=K[1],B.string+=q+`
`;q=d(M),q!==!1;){if(B.string+=q+`
`,q.charAt(0)==="#"){B.comments+=q+`
`;continue}if((K=q.match(P))&&(B.gamma=parseFloat(K[1])),(K=q.match(z))&&(B.exposure=parseFloat(K[1])),(K=q.match(V))&&(B.valid|=2,B.format=K[1]),(K=q.match($))&&(B.valid|=4,B.height=parseInt(K[1],10),B.width=parseInt(K[2],10)),B.valid&2&&B.valid&4)break}return B.valid&2||o(3,"missing format specifier"),B.valid&4||o(3,"missing image size specifier"),B},f=function(M,O,P){const z=O;if(z<8||z>32767||M[0]!==2||M[1]!==2||M[2]&128)return new Uint8Array(M);z!==(M[2]<<8|M[3])&&o(3,"wrong scanline width");const V=new Uint8Array(4*O*P);V.length||o(4,"unable to allocate buffer space");let $=0,B=0;const q=4*z,K=new Uint8Array(4),se=new Uint8Array(q);let W=P;for(;W>0&&B<M.byteLength;){B+4>M.byteLength&&o(1),K[0]=M[B++],K[1]=M[B++],K[2]=M[B++],K[3]=M[B++],(K[0]!=2||K[1]!=2||(K[2]<<8|K[3])!=z)&&o(3,"bad rgbe scanline format");let ee=0,Q;for(;ee<q&&B<M.byteLength;){Q=M[B++];const ae=Q>128;if(ae&&(Q-=128),(Q===0||ee+Q>q)&&o(3,"bad scanline data"),ae){const fe=M[B++];for(let we=0;we<Q;we++)se[ee++]=fe}else se.set(M.subarray(B,B+Q),ee),ee+=Q,B+=Q}const Y=z;for(let ae=0;ae<Y;ae++){let fe=0;V[$]=se[ae+fe],fe+=z,V[$+1]=se[ae+fe],fe+=z,V[$+2]=se[ae+fe],fe+=z,V[$+3]=se[ae+fe],$+=4}W--}return V},m=function(M,O,P,z){const V=M[O+3],$=Math.pow(2,V-128)/255;P[z+0]=M[O+0]*$,P[z+1]=M[O+1]*$,P[z+2]=M[O+2]*$,P[z+3]=1},g=function(M,O,P,z){const V=M[O+3],$=Math.pow(2,V-128)/255;P[z+0]=g_.toHalfFloat(Math.min(M[O+0]*$,65504)),P[z+1]=g_.toHalfFloat(Math.min(M[O+1]*$,65504)),P[z+2]=g_.toHalfFloat(Math.min(M[O+2]*$,65504)),P[z+3]=g_.toHalfFloat(1)},v=new Uint8Array(e);v.pos=0;const y=h(v),A=y.width,C=y.height,T=f(v.subarray(v.pos),A,C);let x,R,N;switch(this.type){case nl:N=T.length/4;const M=new Float32Array(N*4);for(let P=0;P<N;P++)m(T,P*4,M,P*4);x=M,R=nl;break;case kc:N=T.length/4;const O=new Uint16Array(N*4);for(let P=0;P<N;P++)g(T,P*4,O,P*4);x=O,R=kc;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:A,height:C,data:x,header:y.string,gamma:y.gamma,exposure:y.exposure,type:R}}setDataType(e){return this.type=e,this}load(e,t,r,i){function s(o,a){switch(o.type){case nl:case kc:"colorSpace"in o?o.colorSpace="srgb-linear":o.encoding=3e3,o.minFilter=li,o.magFilter=li,o.generateMipmaps=!1,o.flipY=!0;break}t&&t(o,a)}return super.load(e,s,r,i)}}const dR=new WeakMap;class $3e extends fa{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,r,i){const s=new dl(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(t).catch(i)},r,i)}decodeDracoFile(e,t,r,i){const s={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const c=t.attributeTypes[l];c.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=c.name)}const r=JSON.stringify(t);if(dR.has(e)){const l=dR.get(e);if(l.key===r)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(i=l,new Promise((c,u)=>{i._callbacks[s]={resolve:c,reject:u},i.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{i&&s&&this._releaseTask(i,s)}),dR.set(e,{key:r,promise:a}),a}_createGeometry(e){const t=new Jn;e.index&&t.setIndex(new wr(e.index.array,1));for(let r=0;r<e.attributes.length;r++){const i=e.attributes[r],s=i.name,o=i.array,a=i.itemSize;t.setAttribute(s,new wr(o,a))}return t}_loadLibrary(e,t){const r=new dl(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise((i,s)=>{r.load(e,i,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(r=>{const i=r[0];e||(this.decoderConfig.wasmBinary=r[1]);const s=W3e.toString(),o=["/* draco decoder */",i,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(s){const o=s.data;switch(o.type){case"decode":i._callbacks[o.id].resolve(o);break;case"error":i._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,s){return i._taskLoad>s._taskLoad?-1:1});const r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function W3e(){let n,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(u){n.onModuleLoaded=function(d){u({draco:d})},DracoDecoderModule(n)});break;case"decode":const l=a.buffer,c=a.taskConfig;e.then(u=>{const d=u.draco,h=new d.Decoder,f=new d.DecoderBuffer;f.Init(new Int8Array(l),l.byteLength);try{const m=t(d,h,f,c),g=m.attributes.map(v=>v.array.buffer);m.index&&g.push(m.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:m},g)}catch(m){console.error(m),self.postMessage({type:"error",id:a.id,error:m.message})}finally{d.destroy(f),d.destroy(h)}});break}};function t(o,a,l,c){const u=c.attributeIDs,d=c.attributeTypes;let h,f;const m=a.GetEncodedGeometryType(l);if(m===o.TRIANGULAR_MESH)h=new o.Mesh,f=a.DecodeBufferToMesh(l,h);else if(m===o.POINT_CLOUD)h=new o.PointCloud,f=a.DecodeBufferToPointCloud(l,h);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!f.ok()||h.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+f.error_msg());const g={index:null,attributes:[]};for(const v in u){const y=self[d[v]];let A,C;if(c.useUniqueIDs)C=u[v],A=a.GetAttributeByUniqueId(h,C);else{if(C=a.GetAttributeId(h,o[u[v]]),C===-1)continue;A=a.GetAttribute(h,C)}g.attributes.push(i(o,a,h,v,y,A))}return m===o.TRIANGULAR_MESH&&(g.index=r(o,a,h)),o.destroy(h),g}function r(o,a,l){const u=l.num_faces()*3,d=u*4,h=o._malloc(d);a.GetTrianglesUInt32Array(l,d,h);const f=new Uint32Array(o.HEAPF32.buffer,h,u).slice();return o._free(h),{array:f,itemSize:1}}function i(o,a,l,c,u,d){const h=d.num_components(),m=l.num_points()*h,g=m*u.BYTES_PER_ELEMENT,v=s(o,u),y=o._malloc(g);a.GetAttributeDataArrayForAllPoints(l,d,v,g,y);const A=new u(o.HEAPF32.buffer,y,m).slice();return o._free(y),{name:c,array:A,itemSize:h}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let KC;const hR=()=>{if(KC)return KC;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),r=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let i=n;WebAssembly.validate(t)&&(i=e);let s;const o=WebAssembly.instantiate(a(i),{}).then(d=>{s=d.instance,s.exports.__wasm_call_ctors()});function a(d){const h=new Uint8Array(d.length);for(let m=0;m<d.length;++m){const g=d.charCodeAt(m);h[m]=g>96?g-71:g>64?g-65:g>47?g+4:g>46?63:62}let f=0;for(let m=0;m<d.length;++m)h[f++]=h[m]<60?r[h[m]]:(h[m]-60)*64+h[++m];return h.buffer.slice(0,f)}function l(d,h,f,m,g,v){const y=s.exports.sbrk,A=f+3&-4,C=y(A*m),T=y(g.length),x=new Uint8Array(s.exports.memory.buffer);x.set(g,T);const R=d(C,f,m,T,g.length);if(R===0&&v&&v(C,A,m),h.set(x.subarray(C,C+f*m)),y(C-y(0)),R!==0)throw new Error(`Malformed buffer data: ${R}`)}const c={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},u={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return KC={ready:o,supported:!0,decodeVertexBuffer(d,h,f,m,g){l(s.exports.meshopt_decodeVertexBuffer,d,h,f,m,s.exports[c[g]])},decodeIndexBuffer(d,h,f,m){l(s.exports.meshopt_decodeIndexBuffer,d,h,f,m)},decodeIndexSequence(d,h,f,m){l(s.exports.meshopt_decodeIndexSequence,d,h,f,m)},decodeGltfBuffer(d,h,f,m,g,v){l(s.exports[u[g]],d,h,f,m,s.exports[c[v]])}},KC},q3e=D.forwardRef(({makeDefault:n,...e},t)=>{const r=pi(({set:a})=>a),i=pi(({camera:a})=>a),s=pi(({size:a})=>a),o=D.useRef();return D.useLayoutEffect(()=>{const{current:a}=o;a&&!e.manual&&(a.aspect=s.width/s.height,a.updateProjectionMatrix())},[s,e]),D.useLayoutEffect(()=>{if(n&&o.current){const a=i;return r(()=>({camera:o.current})),()=>r(()=>({camera:a}))}},[i,o,n,r]),D.createElement("perspectiveCamera",ev({ref:qY([o,t])},e))}),Q3e=D.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:r,enableDamping:i=!0,onChange:s,onStart:o,onEnd:a,...l},c)=>{const u=pi(T=>T.invalidate),d=pi(T=>T.camera),h=pi(T=>T.gl),f=pi(T=>T.events),m=pi(T=>T.set),g=pi(T=>T.get),v=pi(T=>T.performance),y=e||d,A=r||f.connected||h.domElement,C=D.useMemo(()=>new l3e(y),[y]);return cp(()=>{C.enabled&&C.update()}),D.useEffect(()=>(C.connect(A),()=>void C.dispose()),[A,t,C,u]),D.useEffect(()=>{const T=x=>{u(),t&&v.regress(),s&&s(x)};return C.addEventListener("change",T),o&&C.addEventListener("start",o),a&&C.addEventListener("end",a),()=>{o&&C.removeEventListener("start",o),a&&C.removeEventListener("end",a),C.removeEventListener("change",T)}},[s,o,a]),D.useEffect(()=>{if(n){const T=g().controls;return m({controls:C}),()=>m({controls:T})}},[n,C]),D.createElement("primitive",ev({ref:c,object:C,enableDamping:i},l))});let YC=null;function oX(n,e,t){return r=>{t&&t(r),n&&(YC||(YC=new $3e),YC.setDecoderPath(typeof n=="string"?n:"https://www.gstatic.com/draco/versioned/decoders/1.4.3/"),r.setDRACOLoader(YC)),e&&r.setMeshoptDecoder(typeof hR=="function"?hR():hR)}}function wS(n,e=!0,t=!0,r){return Pv(t5,n,oX(e,t,r))}wS.preload=(n,e=!0,t=!0,r)=>Pv.preload(t5,n,oX(e,t,r));wS.clear=n=>Pv.clear(t5,n);function J3e(n,e){const t=D.useRef(),[r]=D.useState(()=>e?e instanceof pr?{current:e}:e:t),[i]=D.useState(()=>new dx(void 0)),s=D.useRef({}),[o]=D.useState(()=>{const a={};return n.forEach(l=>Object.defineProperty(a,l.name,{enumerable:!0,get(){if(r.current)return s.current[l.name]||(s.current[l.name]=i.clipAction(l,r.current))}})),{ref:r,clips:n,actions:a,names:n.map(l=>l.name),mixer:i}});return cp((a,l)=>i.update(l)),D.useEffect(()=>{const a=r.current;return()=>{s.current={},Object.values(o.actions).forEach(l=>{a&&i.uncacheAction(l,a)})}},[n]),o}const fR={sunset:"venice/venice_sunset_1k.hdr",dawn:"kiara/kiara_1_dawn_1k.hdr",night:"dikhololo/dikhololo_night_1k.hdr",warehouse:"empty-wharehouse/empty_warehouse_01_1k.hdr",forest:"forrest-slope/forest_slope_1k.hdr",apartment:"lebombo/lebombo_1k.hdr",studio:"studio-small-3/studio_small_03_1k.hdr",city:"potsdamer-platz/potsdamer_platz_1k.hdr",park:"rooitou/rooitou_park_1k.hdr",lobby:"st-fagans/st_fagans_interior_1k.hdr"},K3e="https://market-assets.fra1.cdn.digitaloceanspaces.com/market-assets/hdris/",Y3e=n=>n.current&&n.current.isScene,n5=n=>Y3e(n)?n.current:n;function X3e(n){return n.map?D.createElement(aX,n):n.children?D.createElement(Z3e,n):D.createElement(eRe,n)}function aX({scene:n,background:e=!1,map:t}){const r=pi(i=>i.scene);return D.useLayoutEffect(()=>{if(t){const i=n5(n||r),s=i.background,o=i.environment;return e!=="only"&&(i.environment=t),e&&(i.background=t),()=>{e!=="only"&&(i.environment=o),e&&(i.background=s)}}},[n,t]),null}function Z3e({children:n,near:e=1,far:t=1e3,resolution:r=256,frames:i=1,background:s=!1,scene:o,files:a,path:l,preset:c=void 0,extensions:u}){const d=pi(y=>y.gl),h=pi(y=>y.scene),f=D.useRef(null),[m]=D.useState(()=>new U2),g=D.useMemo(()=>{const y=new W6(r);return y.texture.type=kc,y},[r]);D.useLayoutEffect(()=>{i===1&&f.current.update(d,m);const y=n5(o||h),A=y.background,C=y.environment;return s!=="only"&&(y.environment=g.texture),s&&(y.background=g.texture),()=>{s!=="only"&&(y.environment=C),s&&(y.background=A)}},[n,o]);let v=1;return cp(()=>{(i===1/0||v<i)&&(f.current.update(d,m),v++)}),D.createElement(D.Fragment,null,HMe(D.createElement(D.Fragment,null,n,D.createElement("cubeCamera",{ref:f,args:[e,t,g]}),(a||c)&&D.createElement(aX,{background:!0,files:a,preset:c,path:l,extensions:u,scene:m})),m))}function eRe({background:n=!1,files:e=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:t="",preset:r=void 0,scene:i,extensions:s}){if(r){if(!(r in fR))throw new Error("Preset must be one of: "+Object.keys(fR).join(", "));e=fR[r],t=K3e}const o=pi(d=>d.scene),a=Array.isArray(e),c=Pv(a?GJ:V3e,a?[e]:e,d=>{d.setPath(t),d.setDataType==null||d.setDataType(nl),s&&s(d)}),u=a?c[0]:c;return u.mapping=a?Xd:Wg,D.useLayoutEffect(()=>{const d=n5(i||o),h=d.background,f=d.environment;return n!=="only"&&(d.environment=u),n&&(d.background=u),()=>{n!=="only"&&(d.environment=f),n&&(d.background=h)}},[u,n,i]),null}class tRe extends Vc{constructor(){super({uniforms:{depth:{value:null},opacity:{value:1},attenuation:{value:2.5},anglePower:{value:12},spotPosition:{value:new le(0,0,0)},lightColor:{value:new Dt("white")},cameraNear:{value:0},cameraFar:{value:1},resolution:{value:new tt(0,0)}},transparent:!0,depthWrite:!1,vertexShader:`
      varying vec3 vNormal;
      varying vec3 vWorldPosition;
      varying float vViewZ;
      varying float vIntensity;
      uniform vec3 spotPosition;
      uniform float attenuation;      

      void main() {
        // compute intensity
        vNormal = normalize( normalMatrix * normal );
        vec4 worldPosition	= modelMatrix * vec4( position, 1.0 );
        vWorldPosition = worldPosition.xyz;
        vec4 viewPosition = viewMatrix * worldPosition;
        vViewZ = viewPosition.z;
        float intensity	= distance(worldPosition.xyz, spotPosition) / attenuation;
        intensity	= 1.0 - clamp(intensity, 0.0, 1.0);
        vIntensity = intensity;        
        // set gl_Position
        gl_Position	= projectionMatrix * viewPosition;

      }`,fragmentShader:`
      #include <packing>

      varying vec3 vNormal;
      varying vec3 vWorldPosition;
      uniform vec3 lightColor;
      uniform vec3 spotPosition;
      uniform float attenuation;
      uniform float anglePower;
      uniform sampler2D depth;
      uniform vec2 resolution;
      uniform float cameraNear;
      uniform float cameraFar;
      varying float vViewZ;
      varying float vIntensity;
      uniform float opacity;

      float readDepth( sampler2D depthSampler, vec2 coord ) {
        float fragCoordZ = texture2D( depthSampler, coord ).x;
        float viewZ = perspectiveDepthToViewZ(fragCoordZ, cameraNear, cameraFar);
        return viewZ;
      }

      void main() {
        float d = 1.0;
        bool isSoft = resolution[0] > 0.0 && resolution[1] > 0.0;
        if (isSoft) {
          vec2 sUv = gl_FragCoord.xy / resolution;
          d = readDepth(depth, sUv);
        }
        float intensity = vIntensity;
        vec3 normal	= vec3(vNormal.x, vNormal.y, abs(vNormal.z));
        float angleIntensity	= pow( dot(normal, vec3(0.0, 0.0, 1.0)), anglePower );
        intensity	*= angleIntensity;
        // fades when z is close to sampled depth, meaning the cone is intersecting existing geometry
        if (isSoft) {
          intensity	*= smoothstep(0., 1., vViewZ - d);
        }
        gl_FragColor = vec4(lightColor, intensity * opacity);

        #include <tonemapping_fragment>
	      #include <encodings_fragment>
      }`})}}const lU=new le,nRe=D.forwardRef(({opacity:n=1,radiusTop:e,radiusBottom:t,depthBuffer:r,color:i="white",distance:s=5,angle:o=.15,attenuation:a=5,anglePower:l=5,...c},u)=>{const d=D.useRef(null),h=pi(y=>y.size),f=pi(y=>y.camera),m=pi(y=>y.viewport.dpr),[g]=D.useState(()=>new tRe);e=e===void 0?.1:e,t=t===void 0?o*7:t,cp(()=>{g.uniforms.spotPosition.value.copy(d.current.getWorldPosition(lU)),d.current.lookAt(d.current.parent.target.getWorldPosition(lU))});const v=D.useMemo(()=>{const y=new sp(e,t,s,128,64,!0);return y.applyMatrix4(new xn().makeTranslation(0,-s/2,0)),y.applyMatrix4(new xn().makeRotationX(-Math.PI/2)),y},[o,s,e,t]);return D.createElement("spotLight",ev({ref:u,angle:o,color:i,distance:s},c),D.createElement("mesh",{ref:d,geometry:v,raycast:()=>null},D.createElement("primitive",{object:g,attach:"material","uniforms-opacity-value":n,"uniforms-lightColor-value":i,"uniforms-attenuation-value":a,"uniforms-anglePower-value":l,"uniforms-depth-value":r,"uniforms-cameraNear-value":f.near,"uniforms-cameraFar-value":f.far,"uniforms-resolution-value":r?[h.width*m,h.height*m]:[0,0]})))});/**
 * lil-gui
 * https://lil-gui.georgealways.com
 * @version 0.19.2
 * @author George Michael Brower
 * @license MIT
 */class Du{constructor(e,t,r,i,s="div"){this.parent=e,this.object=t,this.property=r,this._disabled=!1,this._hidden=!1,this.initialValue=this.getValue(),this.domElement=document.createElement(s),this.domElement.classList.add("controller"),this.domElement.classList.add(i),this.$name=document.createElement("div"),this.$name.classList.add("name"),Du.nextNameID=Du.nextNameID||0,this.$name.id=`lil-gui-name-${++Du.nextNameID}`,this.$widget=document.createElement("div"),this.$widget.classList.add("widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.domElement.addEventListener("keydown",o=>o.stopPropagation()),this.domElement.addEventListener("keyup",o=>o.stopPropagation()),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(r)}name(e){return this._name=e,this.$name.textContent=e,this}onChange(e){return this._onChange=e,this}_callOnChange(){this.parent._callOnChange(this),this._onChange!==void 0&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),this._onFinishChange!==void 0&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(e=!0){return this.disable(!e)}disable(e=!0){return e===this._disabled?this:(this._disabled=e,this.domElement.classList.toggle("disabled",e),this.$disable.toggleAttribute("disabled",e),this)}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}options(e){const t=this.parent.add(this.object,this.property,e);return t.name(this._name),this.destroy(),t}min(e){return this}max(e){return this}step(e){return this}decimals(e){return this}listen(e=!0){return this._listening=e,this._listenCallbackID!==void 0&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback);const e=this.save();e!==this._listenPrevValue&&this.updateDisplay(),this._listenPrevValue=e}getValue(){return this.object[this.property]}setValue(e){return this.getValue()!==e&&(this.object[this.property]=e,this._callOnChange(),this.updateDisplay()),this}updateDisplay(){return this}load(e){return this.setValue(e),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.listen(!1),this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}}class rRe extends Du{constructor(e,t,r){super(e,t,r,"boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",()=>{this.setValue(this.$input.checked),this._callOnFinishChange()}),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}}function aP(n){let e,t;return(e=n.match(/(#|0x)?([a-f0-9]{6})/i))?t=e[2]:(e=n.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?t=parseInt(e[1]).toString(16).padStart(2,0)+parseInt(e[2]).toString(16).padStart(2,0)+parseInt(e[3]).toString(16).padStart(2,0):(e=n.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(t=e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),t?"#"+t:!1}const iRe={isPrimitive:!0,match:n=>typeof n=="string",fromHexString:aP,toHexString:aP},TS={isPrimitive:!0,match:n=>typeof n=="number",fromHexString:n=>parseInt(n.substring(1),16),toHexString:n=>"#"+n.toString(16).padStart(6,0)},sRe={isPrimitive:!1,match:n=>Array.isArray(n),fromHexString(n,e,t=1){const r=TS.fromHexString(n);e[0]=(r>>16&255)/255*t,e[1]=(r>>8&255)/255*t,e[2]=(r&255)/255*t},toHexString([n,e,t],r=1){r=255/r;const i=n*r<<16^e*r<<8^t*r<<0;return TS.toHexString(i)}},oRe={isPrimitive:!1,match:n=>Object(n)===n,fromHexString(n,e,t=1){const r=TS.fromHexString(n);e.r=(r>>16&255)/255*t,e.g=(r>>8&255)/255*t,e.b=(r&255)/255*t},toHexString({r:n,g:e,b:t},r=1){r=255/r;const i=n*r<<16^e*r<<8^t*r<<0;return TS.toHexString(i)}},aRe=[iRe,TS,sRe,oRe];function lRe(n){return aRe.find(e=>e.match(n))}class cRe extends Du{constructor(e,t,r,i){super(e,t,r,"color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=lRe(this.initialValue),this._rgbScale=i,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",()=>{this._setValueFromHexString(this.$input.value)}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$text.addEventListener("input",()=>{const s=aP(this.$text.value);s&&this._setValueFromHexString(s)}),this.$text.addEventListener("focus",()=>{this._textFocused=!0,this.$text.select()}),this.$text.addEventListener("blur",()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()}),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(e){if(this._format.isPrimitive){const t=this._format.fromHexString(e);this.setValue(t)}else this._format.fromHexString(e,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(e){return this._setValueFromHexString(e),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}}class pR extends Du{constructor(e,t,r){super(e,t,r,"function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",i=>{i.preventDefault(),this.getValue().call(this.object),this._callOnChange()}),this.$button.addEventListener("touchstart",()=>{},{passive:!0}),this.$disable=this.$button}}class uRe extends Du{constructor(e,t,r,i,s,o){super(e,t,r,"number"),this._initInput(),this.min(i),this.max(s);const a=o!==void 0;this.step(a?o:this._getImplicitStep(),a),this.updateDisplay()}decimals(e){return this._decimals=e,this.updateDisplay(),this}min(e){return this._min=e,this._onUpdateMinMax(),this}max(e){return this._max=e,this._onUpdateMinMax(),this}step(e,t=!0){return this._step=e,this._stepExplicit=t,this}updateDisplay(){const e=this.getValue();if(this._hasSlider){let t=(e-this._min)/(this._max-this._min);t=Math.max(0,Math.min(t,1)),this.$fill.style.width=t*100+"%"}return this._inputFocused||(this.$input.value=this._decimals===void 0?e:e.toFixed(this._decimals)),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),window.matchMedia("(pointer: coarse)").matches&&(this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any")),this.$widget.appendChild(this.$input),this.$disable=this.$input;const t=()=>{let A=parseFloat(this.$input.value);isNaN(A)||(this._stepExplicit&&(A=this._snap(A)),this.setValue(this._clamp(A)))},r=A=>{const C=parseFloat(this.$input.value);isNaN(C)||(this._snapClampSetValue(C+A),this.$input.value=this.getValue())},i=A=>{A.key==="Enter"&&this.$input.blur(),A.code==="ArrowUp"&&(A.preventDefault(),r(this._step*this._arrowKeyMultiplier(A))),A.code==="ArrowDown"&&(A.preventDefault(),r(this._step*this._arrowKeyMultiplier(A)*-1))},s=A=>{this._inputFocused&&(A.preventDefault(),r(this._step*this._normalizeMouseWheel(A)))};let o=!1,a,l,c,u,d;const h=5,f=A=>{a=A.clientX,l=c=A.clientY,o=!0,u=this.getValue(),d=0,window.addEventListener("mousemove",m),window.addEventListener("mouseup",g)},m=A=>{if(o){const C=A.clientX-a,T=A.clientY-l;Math.abs(T)>h?(A.preventDefault(),this.$input.blur(),o=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(C)>h&&g()}if(!o){const C=A.clientY-c;d-=C*this._step*this._arrowKeyMultiplier(A),u+d>this._max?d=this._max-u:u+d<this._min&&(d=this._min-u),this._snapClampSetValue(u+d)}c=A.clientY},g=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",g)},v=()=>{this._inputFocused=!0},y=()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()};this.$input.addEventListener("input",t),this.$input.addEventListener("keydown",i),this.$input.addEventListener("wheel",s,{passive:!1}),this.$input.addEventListener("mousedown",f),this.$input.addEventListener("focus",v),this.$input.addEventListener("blur",y)}_initSlider(){this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("hasSlider");const e=(y,A,C,T,x)=>(y-A)/(C-A)*(x-T)+T,t=y=>{const A=this.$slider.getBoundingClientRect();let C=e(y,A.left,A.right,this._min,this._max);this._snapClampSetValue(C)},r=y=>{this._setDraggingStyle(!0),t(y.clientX),window.addEventListener("mousemove",i),window.addEventListener("mouseup",s)},i=y=>{t(y.clientX)},s=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",s)};let o=!1,a,l;const c=y=>{y.preventDefault(),this._setDraggingStyle(!0),t(y.touches[0].clientX),o=!1},u=y=>{y.touches.length>1||(this._hasScrollBar?(a=y.touches[0].clientX,l=y.touches[0].clientY,o=!0):c(y),window.addEventListener("touchmove",d,{passive:!1}),window.addEventListener("touchend",h))},d=y=>{if(o){const A=y.touches[0].clientX-a,C=y.touches[0].clientY-l;Math.abs(A)>Math.abs(C)?c(y):(window.removeEventListener("touchmove",d),window.removeEventListener("touchend",h))}else y.preventDefault(),t(y.touches[0].clientX)},h=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",d),window.removeEventListener("touchend",h)},f=this._callOnFinishChange.bind(this),m=400;let g;const v=y=>{if(Math.abs(y.deltaX)<Math.abs(y.deltaY)&&this._hasScrollBar)return;y.preventDefault();const C=this._normalizeMouseWheel(y)*this._step;this._snapClampSetValue(this.getValue()+C),this.$input.value=this.getValue(),clearTimeout(g),g=setTimeout(f,m)};this.$slider.addEventListener("mousedown",r),this.$slider.addEventListener("touchstart",u,{passive:!1}),this.$slider.addEventListener("wheel",v,{passive:!1})}_setDraggingStyle(e,t="horizontal"){this.$slider&&this.$slider.classList.toggle("active",e),document.body.classList.toggle("lil-gui-dragging",e),document.body.classList.toggle(`lil-gui-${t}`,e)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(e){let{deltaX:t,deltaY:r}=e;return Math.floor(e.deltaY)!==e.deltaY&&e.wheelDelta&&(t=0,r=-e.wheelDelta/120,r*=this._stepExplicit?1:10),t+-r}_arrowKeyMultiplier(e){let t=this._stepExplicit?1:10;return e.shiftKey?t*=10:e.altKey&&(t/=10),t}_snap(e){const t=Math.round(e/this._step)*this._step;return parseFloat(t.toPrecision(15))}_clamp(e){return e<this._min&&(e=this._min),e>this._max&&(e=this._max),e}_snapClampSetValue(e){this.setValue(this._clamp(this._snap(e)))}get _hasScrollBar(){const e=this.parent.root.$children;return e.scrollHeight>e.clientHeight}get _hasMin(){return this._min!==void 0}get _hasMax(){return this._max!==void 0}}class dRe extends Du{constructor(e,t,r,i){super(e,t,r,"option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$select.addEventListener("change",()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()}),this.$select.addEventListener("focus",()=>{this.$display.classList.add("focus")}),this.$select.addEventListener("blur",()=>{this.$display.classList.remove("focus")}),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.options(i)}options(e){return this._values=Array.isArray(e)?e:Object.values(e),this._names=Array.isArray(e)?e:Object.keys(e),this.$select.replaceChildren(),this._names.forEach(t=>{const r=document.createElement("option");r.textContent=t,this.$select.appendChild(r)}),this.updateDisplay(),this}updateDisplay(){const e=this.getValue(),t=this._values.indexOf(e);return this.$select.selectedIndex=t,this.$display.textContent=t===-1?e:this._names[t],this}}class hRe extends Du{constructor(e,t,r){super(e,t,r,"string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("spellcheck","false"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",()=>{this.setValue(this.$input.value)}),this.$input.addEventListener("keydown",i=>{i.code==="Enter"&&this.$input.blur()}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}}const fRe=`.lil-gui {
  font-family: var(--font-family);
  font-size: var(--font-size);
  line-height: 1;
  font-weight: normal;
  font-style: normal;
  text-align: left;
  color: var(--text-color);
  user-select: none;
  -webkit-user-select: none;
  touch-action: manipulation;
  --background-color: #1f1f1f;
  --text-color: #ebebeb;
  --title-background-color: #111111;
  --title-text-color: #ebebeb;
  --widget-color: #424242;
  --hover-color: #4f4f4f;
  --focus-color: #595959;
  --number-color: #2cc9ff;
  --string-color: #a2db3c;
  --font-size: 11px;
  --input-font-size: 11px;
  --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
  --font-family-mono: Menlo, Monaco, Consolas, "Droid Sans Mono", monospace;
  --padding: 4px;
  --spacing: 4px;
  --widget-height: 20px;
  --title-height: calc(var(--widget-height) + var(--spacing) * 1.25);
  --name-width: 45%;
  --slider-knob-width: 2px;
  --slider-input-width: 27%;
  --color-input-width: 27%;
  --slider-input-min-width: 45px;
  --color-input-min-width: 45px;
  --folder-indent: 7px;
  --widget-padding: 0 0 0 3px;
  --widget-border-radius: 2px;
  --checkbox-size: calc(0.75 * var(--widget-height));
  --scrollbar-width: 5px;
}
.lil-gui, .lil-gui * {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}
.lil-gui.root {
  width: var(--width, 245px);
  display: flex;
  flex-direction: column;
  background: var(--background-color);
}
.lil-gui.root > .title {
  background: var(--title-background-color);
  color: var(--title-text-color);
}
.lil-gui.root > .children {
  overflow-x: hidden;
  overflow-y: auto;
}
.lil-gui.root > .children::-webkit-scrollbar {
  width: var(--scrollbar-width);
  height: var(--scrollbar-width);
  background: var(--background-color);
}
.lil-gui.root > .children::-webkit-scrollbar-thumb {
  border-radius: var(--scrollbar-width);
  background: var(--focus-color);
}
@media (pointer: coarse) {
  .lil-gui.allow-touch-styles, .lil-gui.allow-touch-styles .lil-gui {
    --widget-height: 28px;
    --padding: 6px;
    --spacing: 6px;
    --font-size: 13px;
    --input-font-size: 16px;
    --folder-indent: 10px;
    --scrollbar-width: 7px;
    --slider-input-min-width: 50px;
    --color-input-min-width: 65px;
  }
}
.lil-gui.force-touch-styles, .lil-gui.force-touch-styles .lil-gui {
  --widget-height: 28px;
  --padding: 6px;
  --spacing: 6px;
  --font-size: 13px;
  --input-font-size: 16px;
  --folder-indent: 10px;
  --scrollbar-width: 7px;
  --slider-input-min-width: 50px;
  --color-input-min-width: 65px;
}
.lil-gui.autoPlace {
  max-height: 100%;
  position: fixed;
  top: 0;
  right: 15px;
  z-index: 1001;
}

.lil-gui .controller {
  display: flex;
  align-items: center;
  padding: 0 var(--padding);
  margin: var(--spacing) 0;
}
.lil-gui .controller.disabled {
  opacity: 0.5;
}
.lil-gui .controller.disabled, .lil-gui .controller.disabled * {
  pointer-events: none !important;
}
.lil-gui .controller > .name {
  min-width: var(--name-width);
  flex-shrink: 0;
  white-space: pre;
  padding-right: var(--spacing);
  line-height: var(--widget-height);
}
.lil-gui .controller .widget {
  position: relative;
  display: flex;
  align-items: center;
  width: 100%;
  min-height: var(--widget-height);
}
.lil-gui .controller.string input {
  color: var(--string-color);
}
.lil-gui .controller.boolean {
  cursor: pointer;
}
.lil-gui .controller.color .display {
  width: 100%;
  height: var(--widget-height);
  border-radius: var(--widget-border-radius);
  position: relative;
}
@media (hover: hover) {
  .lil-gui .controller.color .display:hover:before {
    content: " ";
    display: block;
    position: absolute;
    border-radius: var(--widget-border-radius);
    border: 1px solid #fff9;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
  }
}
.lil-gui .controller.color input[type=color] {
  opacity: 0;
  width: 100%;
  height: 100%;
  cursor: pointer;
}
.lil-gui .controller.color input[type=text] {
  margin-left: var(--spacing);
  font-family: var(--font-family-mono);
  min-width: var(--color-input-min-width);
  width: var(--color-input-width);
  flex-shrink: 0;
}
.lil-gui .controller.option select {
  opacity: 0;
  position: absolute;
  width: 100%;
  max-width: 100%;
}
.lil-gui .controller.option .display {
  position: relative;
  pointer-events: none;
  border-radius: var(--widget-border-radius);
  height: var(--widget-height);
  line-height: var(--widget-height);
  max-width: 100%;
  overflow: hidden;
  word-break: break-all;
  padding-left: 0.55em;
  padding-right: 1.75em;
  background: var(--widget-color);
}
@media (hover: hover) {
  .lil-gui .controller.option .display.focus {
    background: var(--focus-color);
  }
}
.lil-gui .controller.option .display.active {
  background: var(--focus-color);
}
.lil-gui .controller.option .display:after {
  font-family: "lil-gui";
  content: "↕";
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  padding-right: 0.375em;
}
.lil-gui .controller.option .widget,
.lil-gui .controller.option select {
  cursor: pointer;
}
@media (hover: hover) {
  .lil-gui .controller.option .widget:hover .display {
    background: var(--hover-color);
  }
}
.lil-gui .controller.number input {
  color: var(--number-color);
}
.lil-gui .controller.number.hasSlider input {
  margin-left: var(--spacing);
  width: var(--slider-input-width);
  min-width: var(--slider-input-min-width);
  flex-shrink: 0;
}
.lil-gui .controller.number .slider {
  width: 100%;
  height: var(--widget-height);
  background: var(--widget-color);
  border-radius: var(--widget-border-radius);
  padding-right: var(--slider-knob-width);
  overflow: hidden;
  cursor: ew-resize;
  touch-action: pan-y;
}
@media (hover: hover) {
  .lil-gui .controller.number .slider:hover {
    background: var(--hover-color);
  }
}
.lil-gui .controller.number .slider.active {
  background: var(--focus-color);
}
.lil-gui .controller.number .slider.active .fill {
  opacity: 0.95;
}
.lil-gui .controller.number .fill {
  height: 100%;
  border-right: var(--slider-knob-width) solid var(--number-color);
  box-sizing: content-box;
}

.lil-gui-dragging .lil-gui {
  --hover-color: var(--widget-color);
}
.lil-gui-dragging * {
  cursor: ew-resize !important;
}

.lil-gui-dragging.lil-gui-vertical * {
  cursor: ns-resize !important;
}

.lil-gui .title {
  height: var(--title-height);
  line-height: calc(var(--title-height) - 4px);
  font-weight: 600;
  padding: 0 var(--padding);
  -webkit-tap-highlight-color: transparent;
  cursor: pointer;
  outline: none;
  text-decoration-skip: objects;
}
.lil-gui .title:before {
  font-family: "lil-gui";
  content: "▾";
  padding-right: 2px;
  display: inline-block;
}
.lil-gui .title:active {
  background: var(--title-background-color);
  opacity: 0.75;
}
@media (hover: hover) {
  body:not(.lil-gui-dragging) .lil-gui .title:hover {
    background: var(--title-background-color);
    opacity: 0.85;
  }
  .lil-gui .title:focus {
    text-decoration: underline var(--focus-color);
  }
}
.lil-gui.root > .title:focus {
  text-decoration: none !important;
}
.lil-gui.closed > .title:before {
  content: "▸";
}
.lil-gui.closed > .children {
  transform: translateY(-7px);
  opacity: 0;
}
.lil-gui.closed:not(.transition) > .children {
  display: none;
}
.lil-gui.transition > .children {
  transition-duration: 300ms;
  transition-property: height, opacity, transform;
  transition-timing-function: cubic-bezier(0.2, 0.6, 0.35, 1);
  overflow: hidden;
  pointer-events: none;
}
.lil-gui .children:empty:before {
  content: "Empty";
  padding: 0 var(--padding);
  margin: var(--spacing) 0;
  display: block;
  height: var(--widget-height);
  font-style: italic;
  line-height: var(--widget-height);
  opacity: 0.5;
}
.lil-gui.root > .children > .lil-gui > .title {
  border: 0 solid var(--widget-color);
  border-width: 1px 0;
  transition: border-color 300ms;
}
.lil-gui.root > .children > .lil-gui.closed > .title {
  border-bottom-color: transparent;
}
.lil-gui + .controller {
  border-top: 1px solid var(--widget-color);
  margin-top: 0;
  padding-top: var(--spacing);
}
.lil-gui .lil-gui .lil-gui > .title {
  border: none;
}
.lil-gui .lil-gui .lil-gui > .children {
  border: none;
  margin-left: var(--folder-indent);
  border-left: 2px solid var(--widget-color);
}
.lil-gui .lil-gui .controller {
  border: none;
}

.lil-gui label, .lil-gui input, .lil-gui button {
  -webkit-tap-highlight-color: transparent;
}
.lil-gui input {
  border: 0;
  outline: none;
  font-family: var(--font-family);
  font-size: var(--input-font-size);
  border-radius: var(--widget-border-radius);
  height: var(--widget-height);
  background: var(--widget-color);
  color: var(--text-color);
  width: 100%;
}
@media (hover: hover) {
  .lil-gui input:hover {
    background: var(--hover-color);
  }
  .lil-gui input:active {
    background: var(--focus-color);
  }
}
.lil-gui input:disabled {
  opacity: 1;
}
.lil-gui input[type=text],
.lil-gui input[type=number] {
  padding: var(--widget-padding);
  -moz-appearance: textfield;
}
.lil-gui input[type=text]:focus,
.lil-gui input[type=number]:focus {
  background: var(--focus-color);
}
.lil-gui input[type=checkbox] {
  appearance: none;
  width: var(--checkbox-size);
  height: var(--checkbox-size);
  border-radius: var(--widget-border-radius);
  text-align: center;
  cursor: pointer;
}
.lil-gui input[type=checkbox]:checked:before {
  font-family: "lil-gui";
  content: "✓";
  font-size: var(--checkbox-size);
  line-height: var(--checkbox-size);
}
@media (hover: hover) {
  .lil-gui input[type=checkbox]:focus {
    box-shadow: inset 0 0 0 1px var(--focus-color);
  }
}
.lil-gui button {
  outline: none;
  cursor: pointer;
  font-family: var(--font-family);
  font-size: var(--font-size);
  color: var(--text-color);
  width: 100%;
  height: var(--widget-height);
  text-transform: none;
  background: var(--widget-color);
  border-radius: var(--widget-border-radius);
  border: none;
}
@media (hover: hover) {
  .lil-gui button:hover {
    background: var(--hover-color);
  }
  .lil-gui button:focus {
    box-shadow: inset 0 0 0 1px var(--focus-color);
  }
}
.lil-gui button:active {
  background: var(--focus-color);
}

@font-face {
  font-family: "lil-gui";
  src: url("data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAUsAAsAAAAACJwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAH4AAADAImwmYE9TLzIAAAGIAAAAPwAAAGBKqH5SY21hcAAAAcgAAAD0AAACrukyyJBnbHlmAAACvAAAAF8AAACEIZpWH2hlYWQAAAMcAAAAJwAAADZfcj2zaGhlYQAAA0QAAAAYAAAAJAC5AHhobXR4AAADXAAAABAAAABMAZAAAGxvY2EAAANsAAAAFAAAACgCEgIybWF4cAAAA4AAAAAeAAAAIAEfABJuYW1lAAADoAAAASIAAAIK9SUU/XBvc3QAAATEAAAAZgAAAJCTcMc2eJxVjbEOgjAURU+hFRBK1dGRL+ALnAiToyMLEzFpnPz/eAshwSa97517c/MwwJmeB9kwPl+0cf5+uGPZXsqPu4nvZabcSZldZ6kfyWnomFY/eScKqZNWupKJO6kXN3K9uCVoL7iInPr1X5baXs3tjuMqCtzEuagm/AAlzQgPAAB4nGNgYRBlnMDAysDAYM/gBiT5oLQBAwuDJAMDEwMrMwNWEJDmmsJwgCFeXZghBcjlZMgFCzOiKOIFAB71Bb8AeJy1kjFuwkAQRZ+DwRAwBtNQRUGKQ8OdKCAWUhAgKLhIuAsVSpWz5Bbkj3dEgYiUIszqWdpZe+Z7/wB1oCYmIoboiwiLT2WjKl/jscrHfGg/pKdMkyklC5Zs2LEfHYpjcRoPzme9MWWmk3dWbK9ObkWkikOetJ554fWyoEsmdSlt+uR0pCJR34b6t/TVg1SY3sYvdf8vuiKrpyaDXDISiegp17p7579Gp3p++y7HPAiY9pmTibljrr85qSidtlg4+l25GLCaS8e6rRxNBmsnERunKbaOObRz7N72ju5vdAjYpBXHgJylOAVsMseDAPEP8LYoUHicY2BiAAEfhiAGJgZWBgZ7RnFRdnVJELCQlBSRlATJMoLV2DK4glSYs6ubq5vbKrJLSbGrgEmovDuDJVhe3VzcXFwNLCOILB/C4IuQ1xTn5FPilBTj5FPmBAB4WwoqAHicY2BkYGAA4sk1sR/j+W2+MnAzpDBgAyEMQUCSg4EJxAEAwUgFHgB4nGNgZGBgSGFggJMhDIwMqEAYAByHATJ4nGNgAIIUNEwmAABl3AGReJxjYAACIQYlBiMGJ3wQAEcQBEV4nGNgZGBgEGZgY2BiAAEQyQWEDAz/wXwGAAsPATIAAHicXdBNSsNAHAXwl35iA0UQXYnMShfS9GPZA7T7LgIu03SSpkwzYTIt1BN4Ak/gKTyAeCxfw39jZkjymzcvAwmAW/wgwHUEGDb36+jQQ3GXGot79L24jxCP4gHzF/EIr4jEIe7wxhOC3g2TMYy4Q7+Lu/SHuEd/ivt4wJd4wPxbPEKMX3GI5+DJFGaSn4qNzk8mcbKSR6xdXdhSzaOZJGtdapd4vVPbi6rP+cL7TGXOHtXKll4bY1Xl7EGnPtp7Xy2n00zyKLVHfkHBa4IcJ2oD3cgggWvt/V/FbDrUlEUJhTn/0azVWbNTNr0Ens8de1tceK9xZmfB1CPjOmPH4kitmvOubcNpmVTN3oFJyjzCvnmrwhJTzqzVj9jiSX911FjeAAB4nG3HMRKCMBBA0f0giiKi4DU8k0V2GWbIZDOh4PoWWvq6J5V8If9NVNQcaDhyouXMhY4rPTcG7jwYmXhKq8Wz+p762aNaeYXom2n3m2dLTVgsrCgFJ7OTmIkYbwIbC6vIB7WmFfAAAA==") format("woff");
}`;function pRe(n){const e=document.createElement("style");e.innerHTML=n;const t=document.querySelector("head link[rel=stylesheet], head style");t?document.head.insertBefore(e,t):document.head.appendChild(e)}let cU=!1;class r5{constructor({parent:e,autoPlace:t=e===void 0,container:r,width:i,title:s="Controls",closeFolders:o=!1,injectStyles:a=!0,touchStyles:l=!0}={}){if(this.parent=e,this.root=e?e.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("div"),this.$title.classList.add("title"),this.$title.setAttribute("role","button"),this.$title.setAttribute("aria-expanded",!0),this.$title.setAttribute("tabindex",0),this.$title.addEventListener("click",()=>this.openAnimated(this._closed)),this.$title.addEventListener("keydown",c=>{(c.code==="Enter"||c.code==="Space")&&(c.preventDefault(),this.$title.click())}),this.$title.addEventListener("touchstart",()=>{},{passive:!0}),this.$children=document.createElement("div"),this.$children.classList.add("children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(s),this.parent){this.parent.children.push(this),this.parent.folders.push(this),this.parent.$children.appendChild(this.domElement);return}this.domElement.classList.add("root"),l&&this.domElement.classList.add("allow-touch-styles"),!cU&&a&&(pRe(fRe),cU=!0),r?r.appendChild(this.domElement):t&&(this.domElement.classList.add("autoPlace"),document.body.appendChild(this.domElement)),i&&this.domElement.style.setProperty("--width",i+"px"),this._closeFolders=o}add(e,t,r,i,s){if(Object(r)===r)return new dRe(this,e,t,r);const o=e[t];switch(typeof o){case"number":return new uRe(this,e,t,r,i,s);case"boolean":return new rRe(this,e,t);case"string":return new hRe(this,e,t);case"function":return new pR(this,e,t)}console.error(`gui.add failed
	property:`,t,`
	object:`,e,`
	value:`,o)}addColor(e,t,r=1){return new cRe(this,e,t,r)}addFolder(e){const t=new r5({parent:this,title:e});return this.root._closeFolders&&t.close(),t}load(e,t=!0){return e.controllers&&this.controllers.forEach(r=>{r instanceof pR||r._name in e.controllers&&r.load(e.controllers[r._name])}),t&&e.folders&&this.folders.forEach(r=>{r._title in e.folders&&r.load(e.folders[r._title])}),this}save(e=!0){const t={controllers:{},folders:{}};return this.controllers.forEach(r=>{if(!(r instanceof pR)){if(r._name in t.controllers)throw new Error(`Cannot save GUI with duplicate property "${r._name}"`);t.controllers[r._name]=r.save()}}),e&&this.folders.forEach(r=>{if(r._title in t.folders)throw new Error(`Cannot save GUI with duplicate folder "${r._title}"`);t.folders[r._title]=r.save()}),t}open(e=!0){return this._setClosed(!e),this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("closed",this._closed),this}close(){return this.open(!1)}_setClosed(e){this._closed!==e&&(this._closed=e,this._callOnOpenClose(this))}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(e=!0){return this._setClosed(!e),this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame(()=>{const t=this.$children.clientHeight;this.$children.style.height=t+"px",this.domElement.classList.add("transition");const r=s=>{s.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",r))};this.$children.addEventListener("transitionend",r);const i=e?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!e),requestAnimationFrame(()=>{this.$children.style.height=i+"px"})}),this}title(e){return this._title=e,this.$title.textContent=e,this}reset(e=!0){return(e?this.controllersRecursive():this.controllers).forEach(r=>r.reset()),this}onChange(e){return this._onChange=e,this}_callOnChange(e){this.parent&&this.parent._callOnChange(e),this._onChange!==void 0&&this._onChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(e){this.parent&&this.parent._callOnFinishChange(e),this._onFinishChange!==void 0&&this._onFinishChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}onOpenClose(e){return this._onOpenClose=e,this}_callOnOpenClose(e){this.parent&&this.parent._callOnOpenClose(e),this._onOpenClose!==void 0&&this._onOpenClose.call(this,e)}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach(e=>e.destroy())}controllersRecursive(){let e=Array.from(this.controllers);return this.folders.forEach(t=>{e=e.concat(t.controllersRecursive())}),e}foldersRecursive(){let e=Array.from(this.folders);return this.folders.forEach(t=>{e=e.concat(t.foldersRecursive())}),e}}const mRe=r5,gRe=({onBaseActionChange:n,baseActions:e,modifyTimeScale:t,onMorphTargetInfluencesChange:r,onMorphTargetDictionaryChange:i,morphTargetDictionary:s,timeScale:o})=>{const a=D.useRef(null),l=D.useRef({"modify time scale":o}),c=D.useRef([]);return D.useEffect(()=>{const u=new mRe({width:310});a.current=u;const d=u.addFolder("Base Actions"),h=u.addFolder("Additive Action Weights"),f=u.addFolder("General Speed");return["None",...Object.keys(e)].forEach(g=>{e[g],l.current[g]=()=>{n(g)};const v=d.add(l.current,g);c.current.push(v)}),Object.entries(s).forEach(([g,v])=>{l.current[g]=v/100,h.add(l.current,g,-1,1,.01).listen().onChange(y=>{r({[g]:y})})}),f.add(l.current,"modify time scale",0,1.5,.01).onChange(g=>{t(g)}),d.open(),h.open(),f.open(),()=>{u.destroy()}},[n,r,i,t,e,s,o]),null};var eo;(function(n){n.LOADING="LOADING",n.EMOTION="EMOTION",n.IDLE="IDLE"})(eo||(eo={}));const xS=new le(0,-1,0),vRe=new Jm(.175,0,0),lX=new le(0,-1.45,0),cX=.1,yRe={MALE:"https://assets.memori.ai/api/v2/asset/2c5e88a4-cf62-408b-9ef0-518b099dfcb2.glb",FEMALE:"https://assets.memori.ai/api/v2/asset/2adc934b-24b2-45bd-94ad-ffec58d3cb32.glb"},XC={minInterval:1e3,maxInterval:5e3,blinkDuration:150},lP={fadeInDuration:.8,fadeOutDuration:.8,idleCount:5,timeScale:1},_Re=.3,SRe=.5;class uU{constructor(e,t,r=lP){this.currentState=eo.LOADING,this.currentAction=null,this.lastIdleIndex=-1,this.isTransitioning=!1,this.currentIdleLoopCount=0,this.MAX_IDLE_LOOPS=5,this.lastAnimationTime=0,this.isChatAlreadyStarted=!1,this.mixer=e,this.actions=t,this.config=r}checkForLoop(){if(!this.currentAction||this.currentState!==eo.IDLE)return;this.currentAction.getClip();const e=this.currentAction.time;e<this.lastAnimationTime&&(this.currentIdleLoopCount++,this.currentIdleLoopCount>=this.MAX_IDLE_LOOPS&&this.forceIdleChange()),this.lastAnimationTime=e}forceIdleChange(){this.currentIdleLoopCount=0,this.lastAnimationTime=0,this.transitionTo(eo.IDLE)}getNextIdleAnimation(){let e;do e=Math.floor(Math.random()*this.config.idleCount)+1;while(e===this.lastIdleIndex);this.isChatAlreadyStarted&&e===3&&(e=this.lastIdleIndex!==4?4:2),this.lastIdleIndex=e;const t=this.actions[`Idle${e}`];if(!t)throw new Error(`Idle animation ${e} not found`);return t}transitionTo(e,t){if(!this.isTransitioning){this.isTransitioning=!0;try{let r=null;switch(e){case eo.LOADING:r=this.actions[t||"Loading1"],this.currentIdleLoopCount=0,this.lastAnimationTime=0;break;case eo.EMOTION:r=this.actions[t||"Timore1"],this.currentIdleLoopCount=0,this.lastAnimationTime=0;break;case eo.IDLE:r=this.getNextIdleAnimation(),this.currentState!==eo.IDLE&&(this.currentIdleLoopCount=0,this.lastAnimationTime=0);break}if(!r)throw new Error(`No animation found for state: ${e}`);this.currentAction&&this.currentAction.fadeOut(this.config.fadeOutDuration),r.reset().fadeIn(this.config.fadeInDuration).play(),r.timeScale=this.config.timeScale,e!==eo.IDLE?(r.setLoop(z6,1),r.clampWhenFinished=!0):r.setLoop(1/0,1/0),this.currentAction=r,this.currentState=e}catch(r){console.error("[AnimationController] Error during animation transition:",r),e!==eo.IDLE&&this.transitionTo(eo.IDLE)}finally{this.isTransitioning=!1}}}update(e){this.currentAction&&(this.checkForLoop(),this.currentState!==eo.IDLE&&this.currentAction.time>=this.currentAction.getClip().duration*.9&&this.transitionTo(eo.IDLE),this.mixer.update(e))}getCurrentState(){return this.currentState}getLoopCount(){return this.currentIdleLoopCount}setTimeScale(e){this.config.timeScale=e,this.currentAction&&(this.currentAction.timeScale=e)}updateIsChatAlreadyStarted(e){this.isChatAlreadyStarted=e}getDebugInfo(){var e;return{currentState:this.currentState,currentIdleIndex:this.lastIdleIndex,loopCount:this.currentIdleLoopCount,currentTime:((e=this.currentAction)===null||e===void 0?void 0:e.time)||0,lastTime:this.lastAnimationTime,isTransitioning:this.isTransitioning,isChatAlreadyStarted:this.isChatAlreadyStarted}}}class cP{constructor(e){this.currentEmotionValues={},this.previousEmotionKeys=new Set,this.headMesh=e}updateMorphTargets(e,t,r,i,s){if(!this.headMesh.morphTargetDictionary||!this.headMesh.morphTargetInfluences)return;const o=this.calculateBlinkValue(e,s,i),a=new Set(Object.keys(t));Object.entries(this.headMesh.morphTargetDictionary).forEach(([l,c])=>{if(typeof c!="number")return;let u=0;if(a.has(l)){const d=t[l],h=this.currentEmotionValues[l]||0,f=kd.lerp(h,d*2.5,_Re);this.currentEmotionValues[l]=f,u+=f}r&&l===r.name&&(u+=r.weight),l==="eyesClosed"&&i&&(u+=o),u=kd.clamp(u,0,1),this.headMesh.morphTargetInfluences&&(this.headMesh.morphTargetInfluences[c]=kd.lerp(this.headMesh.morphTargetInfluences[c]||0,u,SRe))}),this.previousEmotionKeys=a}calculateBlinkValue(e,t,r){if(!r)return 0;let i=0;if(e>=t.nextBlinkTime&&!t.isBlinking&&(t.isBlinking=!0,t.blinkStartTime=e,t.lastBlinkTime=e,t.nextBlinkTime=e+Math.random()*(XC.maxInterval-XC.minInterval)+XC.minInterval),t.isBlinking){const s=(e-t.blinkStartTime)/XC.blinkDuration;s<=.5?i=s*2:s<=1?i=2-s*2:(t.isBlinking=!1,i=0)}return i}}class uX{constructor(e=xS.clone(),t=lX.clone(),r=.6){this.defaultPosition=e,this.zoomedPosition=t,this.currentScale=new le(1,1,1),this.targetScale=new le(1,1,1),this.currentPosition=e.clone(),this.basePosition=e.clone(),this.initialCameraPosition=new le(0,0,r)}mapHeightToScale(e,t){return t?kd.lerp(1.4,2.1,e/100):kd.lerp(.5,1.5,e/100)}mapDepthToCamera(e,t){const r=this.initialCameraPosition.z;return kd.lerp(r,r+3,e/100)}updateHeight(e,t){const r=this.mapHeightToScale(e,t);this.targetScale.set(r,r,r)}updateDepth(e,t){return this.mapDepthToCamera(e,t)}updateBasePosition(e){const t=e?this.zoomedPosition:this.defaultPosition;this.basePosition.copy(t),this.currentPosition.copy(t)}updateScale(e){return this.currentScale.lerp(this.targetScale,e),this.currentScale}getPosition(){return this.currentPosition}reset(){this.currentScale.set(1,1,1),this.targetScale.set(1,1,1),this.currentPosition.copy(this.defaultPosition),this.basePosition.copy(this.defaultPosition)}}function ARe({url:n,sex:e,currentBaseAction:t,timeScale:r,eyeBlink:i,updateCurrentViseme:s,setMorphTargetDictionary:o,setMorphTargetInfluences:a,emotionMorphTargets:l,avatarHeight:c=50,avatarDepth:u=0,onCameraZChange:d}){var h;const{scene:f}=wS(n),{animations:m}=wS(yRe[e]),{actions:g}=J3e(m,f),v=D.useRef(),y=D.useRef(),A=D.useRef(),C=D.useRef({isBlinking:!1,lastBlinkTime:0,nextBlinkTime:0,blinkStartTime:0});D.useEffect(()=>{if(A.current||(A.current=new uX(xS)),!g||!f)return;const R=new dx(f);if(v.current=new uU(R,g,{...lP}),T&&(y.current=new cP(T),T.morphTargetDictionary&&T.morphTargetInfluences)){o(T.morphTargetDictionary);const N=Object.keys(T.morphTargetDictionary).reduce((M,O)=>({...M,[O]:0}),{});a(N)}},[g,f]),D.useEffect(()=>{A.current&&A.current.updateHeight(c,!1)},[c]),D.useEffect(()=>{if(A.current&&d){const R=A.current.updateDepth(u,!1);d(R)}},[u,d]);const T=D.useMemo(()=>{let R;return f==null||f.traverse(N=>{N instanceof AA&&(N.name==="GBNL__Head"||N.name==="Wolf3D_Avatar")&&(R=N)}),R},[f]);D.useEffect(()=>{if(!g||!T)return;const R=new dx(f);if(v.current=new uU(R,g,{...lP}),y.current=new cP(T),T.morphTargetDictionary&&T.morphTargetInfluences){o(T.morphTargetDictionary);const N=Object.keys(T.morphTargetDictionary).reduce((M,O)=>({...M,[O]:0}),{});a(N)}},[g,T,f,o,a,r]),D.useEffect(()=>{v.current&&(t.action.startsWith("Loading")?(v.current.updateIsChatAlreadyStarted(!0),v.current.transitionTo(eo.LOADING,t.action)):t.action.startsWith("Idle")?v.current.transitionTo(eo.IDLE):v.current.transitionTo(eo.EMOTION,t.action))},[t]),D.useEffect(()=>{var R;(R=v.current)===null||R===void 0||R.setTimeScale(r)},[r]),cp((R,N)=>{var M;const O=R.clock.elapsedTime*1e3;if((M=v.current)===null||M===void 0||M.update(N),y.current){const P=s(O/1e3);y.current.updateMorphTargets(O,l,P,i||!1,C.current)}if(f&&A.current){const P=A.current.updateScale(cX);f.scale.copy(P)}});const x=((h=A.current)===null||h===void 0?void 0:h.getPosition())||xS;return w.jsx("group",{position:x,rotation:vRe,children:w.jsx("primitive",{object:f})})}const ERe=(n,e,t)=>Math.min(Math.max(n,e),t),dU=(n,e,t=.05)=>n*(1-t)+e*t,hU=(n,e,t,r,i)=>(n=ERe(n,e,t),(n-e)*(i-r)/(t-e)+r),CRe=n=>{n.Wolf3D_Hands&&(n.Wolf3D_Hands.visible=!1),n.RightHand&&n.LeftHand&&(n.RightHand.position.set(0,-2,0),n.LeftHand.position.set(0,-2,0))},ZC=Math.PI/180;let i5=!1,dX;const e_=new tt(0,0),Kh=new tt(0,0),fU=()=>{dX=setTimeout(()=>{i5=!0},1e3)},pU=()=>{clearTimeout(dX),i5=!1};function wRe(n,e){const{gl:t}=pi();D.useEffect(()=>{if(n)return t.domElement.addEventListener("mouseleave",fU),t.domElement.addEventListener("mouseenter",pU),()=>{t.domElement.removeEventListener("mouseleave",fU),t.domElement.removeEventListener("mouseenter",pU)}},[t.domElement,n]),cp(r=>{if(!n||!(e!=null&&e.Neck)||!(e!=null&&e.Head))return;const i=Math.abs(r.camera.rotation.z);!i5&&i<.2?(e_.x=hU(r.mouse.y,-1,1,5*ZC,-5*ZC),e_.y=hU(r.mouse.x,-1,1,-10*ZC,10*ZC)):e_.set(0,0),Kh.x=dU(Kh.x,e_.x),Kh.y=dU(Kh.y,e_.y),e.Neck.rotation.x=Kh.x+.1,e.Neck.rotation.y=Kh.y,e.Head.rotation.x=Kh.x*2,e.Head.rotation.y=Kh.y*2})}function TRe({url:n,setMorphTargetInfluences:e,setMorphTargetDictionary:t,updateCurrentViseme:r,eyeBlink:i=!1,avatarHeight:s=50,avatarDepth:o=0,headMovement:a=!1,onLoaded:l,onCameraZChange:c}){var u;const{scene:d}=wS(n),{nodes:h,materials:f}=BMe(d),{camera:m}=pi(),g=D.useRef(),v=D.useRef();D.useRef(m.position.z),wRe(a,h);const y=D.useRef({isBlinking:!1,lastBlinkTime:0,nextBlinkTime:0,blinkStartTime:0}),A=D.useMemo(()=>{let T;return d==null||d.traverse(x=>{x instanceof AA&&(x.name==="GBNL__Head"||x.name==="Wolf3D_Avatar")&&(T=x)}),T},[d]);D.useEffect(()=>{if(v.current||(v.current=new uX(xS,lX)),A&&(g.current=new cP(A),A.morphTargetDictionary&&A.morphTargetInfluences)){t(A.morphTargetDictionary);const T=Object.keys(A.morphTargetDictionary).reduce((x,R)=>({...x,[R]:0}),{});e(T)}return hTe(f),l==null||l(),CRe(h),()=>{Object.values(f).forEach(T=>T.dispose()),Object.values(h).filter(fTe).forEach(T=>T.geometry.dispose())}},[f,h,n,l,d,A]),D.useEffect(()=>{v.current&&v.current.updateHeight(s,!0)},[s]),D.useEffect(()=>{if(v.current&&c){const T=v.current.updateDepth(o,!0);c(T)}},[o,c]),cp(T=>{const x=T.clock.elapsedTime*1e3;if(g.current){const R=r(x/1e3);g.current.updateMorphTargets(x,{},R,i,y.current)}if(d&&v.current){const R=v.current.updateScale(cX);d.scale.copy(R)}});const C=((u=v.current)===null||u===void 0?void 0:u.getPosition())||xS;return w.jsx("group",{position:C,children:w.jsx("primitive",{object:d})})}const xRe={Gioia1:{weight:0},Gioia2:{weight:0},Gioia3:{weight:0},Idle1:{weight:1},Idle2:{weight:0},Idle3:{weight:0},Idle4:{weight:0},Idle5:{weight:0},Rabbia1:{weight:0},Rabbia2:{weight:0},Rabbia3:{weight:0},Sorpresa1:{weight:0},Sorpresa2:{weight:0},Sorpresa3:{weight:0},Timore1:{weight:0},Timore2:{weight:0},Timore3:{weight:0},Tristezza1:{weight:0},Tristezza2:{weight:0},Tristezza3:{weight:0},Loading1:{weight:0},Loading2:{weight:0},Loading3:{weight:0}},IRe=({stopProcessing:n,chatEmission:e,showControls:t,animation:r,url:i,sex:s,eyeBlink:o,headMovement:a,halfBody:l,loading:c,avatarHeight:u,avatarDepth:d,updateCurrentViseme:h,resetVisemeQueue:f,setCameraZ:m})=>{const[g,v]=D.useState({action:r||"Idle1",weight:1}),[y,A]=D.useState({}),[C,T]=D.useState({}),[x,R]=D.useState({}),[N,M]=D.useState(.8),O=D.useCallback(B=>{if(B==="Loading1"||B==="Loading2"||B==="Loading3")return;const q={Gioia:{Gioria:1},Rabbia:{Rabbia:1},Sorpresa:{Sorpresa:1},Tristezza:{Tristezza:1},Timore:{Timore:1}},K=Object.keys(q).reduce((ee,Q)=>(ee[Q]=0,ee),{}),se=Object.keys(q).find(ee=>B.startsWith(ee))||"default",W=se==="default"?K:q[se];R(ee=>({...K,...W}))},[]),P=D.useCallback(B=>{O(B),v({action:B,weight:1})},[]),z=D.useCallback(B=>{A(q=>({...q,...B}))},[]),V=D.useCallback(B=>{T(B)},[]),$=D.useCallback(B=>{M(B)},[]);return D.useEffect(()=>{var B,q;const se=(e==null?void 0:e.includes('<output class="memori-emotion">'))?(q=(B=e==null?void 0:e.split('<output class="memori-emotion">')[1])===null||B===void 0?void 0:B.split("</output>")[0])===null||q===void 0?void 0:q.trim():null;if(se){const W=Math.floor(Math.random()*3)+1,ee=`${se}${W}`;P(ee)}else{const W=Math.floor(Math.random()*5)+1,ee=`Idle${W===3?4:W}`;P(ee)}},[e]),D.useEffect(()=>{if(c){const q=`Loading${Math.floor(Math.random()*3)+1}`;P(q)}},[c]),w.jsxs(w.Fragment,{children:[t&&w.jsx(gRe,{timeScale:N,morphTargetDictionary:C,onBaseActionChange:P,onMorphTargetInfluencesChange:z,onMorphTargetDictionaryChange:V,baseActions:xRe,currentBaseAction:g,modifyTimeScale:$}),l?w.jsx(TRe,{url:i,onCameraZChange:m,setMorphTargetInfluences:A,setMorphTargetDictionary:T,updateCurrentViseme:h,avatarHeight:u||50,avatarDepth:d||-50,headMovement:a}):w.jsx(ARe,{url:i,sex:s,resetVisemeQueue:f,eyeBlink:o,currentBaseAction:g,timeScale:N,morphTargetInfluences:y,updateCurrentViseme:h,stopProcessing:n,setMorphTargetDictionary:T,setMorphTargetInfluences:A,emotionMorphTargets:x,halfBody:l,onCameraZChange:m,avatarHeight:u||50,avatarDepth:d||-50})]})},s5={muteSpeaker:"@memori:muteSpeaker",microphoneMode:"@memori:microphoneMode",continuousSpeechTimeout:"@memori:continuousSpeechTimeout",birthDate:"@memori:birthDate",controlsPosition:"@memori:controlsPosition",hideEmissions:"@memori:hideEmissions",loginToken:"@memori:loginToken",location:"@memori:location"},Xs=(n,e)=>{var t;try{const r=window.localStorage.getItem((t=s5[n])!==null&&t!==void 0?t:n);if(!r)return e;try{return JSON.parse(r)}catch{return r}}catch(r){return console.error("error",r),e}},Ei=(n,e)=>{var t;try{window.localStorage.setItem((t=s5[n])!==null&&t!==void 0?t:n,e.toString())}catch(r){console.error("error",r)}},mR=n=>{var e;try{window.localStorage.removeItem((e=s5[n])!==null&&e!==void 0?e:n)}catch(t){console.error("error",t)}},mU=({min:n=0,max:e=100,step:t=1,defaultValue:r=50,label:i,onChange:s,disabled:o=!1})=>{const[a,l]=D.useState(r),[c,u]=D.useState(!1),d=D.useRef(null),h=(a-n)/(e-n)*100,f=[];for(let A=n;A<=e;A+=(e-n)/4)f.push(Math.round(A));const m=A=>{if(!d.current)return a;const C=d.current.getBoundingClientRect(),T=A-C.left,x=C.width,R=Math.max(0,Math.min(100,T/x*100)),N=Math.round(R/100*(e-n)+n),M=Math.round(N/t)*t;return Math.min(Math.max(M,n),e)},g=A=>{if(o)return;u(!0);const C=m(A);l(C),s==null||s(C)},v=A=>{if(!c||o)return;const C=m(A);l(C),s==null||s(C)},y=()=>{u(!1)};return D.useEffect(()=>{const A=x=>{c&&(x.preventDefault(),v(x.touches[0].clientX))},C=x=>{v(x.clientX)},T=()=>{y()};return c&&(window.addEventListener("touchmove",A,{passive:!1}),window.addEventListener("mousemove",C),window.addEventListener("touchend",T),window.addEventListener("mouseup",T)),()=>{window.removeEventListener("touchmove",A),window.removeEventListener("mousemove",C),window.removeEventListener("touchend",T),window.removeEventListener("mouseup",T)}},[c]),D.useEffect(()=>{l(r)},[r]),w.jsxs("div",{className:er("memori--slider-container",{"memori--slider-disabled":o}),style:{"--percentage":`${h}%`},children:[w.jsxs("div",{className:"memori--slider-header",children:[i&&w.jsx("div",{className:"memori--slider-label",children:i}),w.jsx("div",{className:"memori--slider-value",children:a})]}),w.jsxs("div",{ref:d,className:"memori--slider-track-container",onMouseDown:A=>g(A.clientX),onTouchStart:A=>g(A.touches[0].clientX),children:[w.jsx("div",{className:"memori--slider-track",children:w.jsx("div",{className:"memori--slider-track-fill"})}),w.jsx("div",{className:"memori--slider-marks",children:f.map(A=>w.jsxs("div",{className:"memori--slider-mark",children:[w.jsx("div",{className:"memori--slider-mark-line"}),w.jsx("span",{className:"memori--slider-mark-value",children:A})]},A))}),w.jsx(zi,{value:a,onChange:l,disabled:o,children:w.jsx("div",{className:"memori--slider-thumb",role:"slider","aria-valuemin":n,"aria-valuemax":e,"aria-valuenow":a,tabIndex:o?-1:0})})]})]})};const bRe=({avatarHeight:n,avatarDepth:e,setAvatarHeight:t,setAvatarDepth:r,halfBody:i,setEnablePositionControls:s})=>{const o=i?{height:80,depth:50}:{height:25,depth:25},a=i?{height:55,depth:10}:{height:15,depth:5},l=i?{height:100,depth:80}:{height:65,depth:100},c=D.useRef({height:n,depth:e,zoomed:!1,normal:!1,far:!1}),{t:u}=ur();return D.useEffect(()=>{c.current.height=n,c.current.depth=e},[n,e]),D.useEffect(()=>{const d=h=>{if(h.key==="-"||h.key==="_"&&c.current.depth<100){const f=Math.min(c.current.depth+10,100);r(f),Ei("avatarDepth",f)}else if((h.key==="+"||h.key==="=")&&c.current.depth>-100){const f=Math.max(c.current.depth-10,-100);r(f),Ei("avatarDepth",f)}};return window.addEventListener("keydown",d),()=>{window.removeEventListener("keydown",d)}},[r]),D.useEffect(()=>{const d=f=>{if(f.key==="ArrowUp"&&c.current.height<100){const m=c.current.height+5;t(m),Ei("avatarHeight",m)}},h=f=>{if(f.key==="ArrowDown"&&c.current.height>0){const m=c.current.height-5;t(m),Ei("avatarHeight",m)}};return window.addEventListener("keydown",d),window.addEventListener("keydown",h),()=>{window.removeEventListener("keydown",d),window.removeEventListener("keydown",h)}},[t]),w.jsxs("div",{className:"memori--position-controls",children:[w.jsx("div",{className:"memori--position-controls-close",children:w.jsx(Pt,{ghost:!0,icon:w.jsx(pA,{}),outlined:!0,danger:!0,shape:"circle",className:"memori--position-controls-close-button",onClick:()=>{s(!1)}})}),w.jsx("div",{className:"memori--slider-container",children:w.jsx(mU,{defaultValue:c.current.height,min:.5,max:100,label:w.jsx("label",{className:"memori--slider-label",children:u("write_and_speak.height")}),step:1,onChange:d=>{t(d),Ei("avatarHeight",d)}})}),w.jsx("div",{className:"memori--slider-container",children:w.jsx(mU,{defaultValue:c.current.depth,min:.5,max:100,step:5,label:w.jsx("label",{className:"memori--slider-label",children:u("write_and_speak.depth")}),onChange:d=>{r(d),Ei("avatarDepth",d)}})}),w.jsxs("div",{className:"memori--preset-buttons",children:[w.jsx(Pt,{outlined:!0,isActive:n===(i?a.height:o.height)&&e===(i?a.depth:o.depth),onClick:()=>{t(a.height),r(a.depth),Ei("avatarHeight",a.height),Ei("avatarDepth",a.depth)},children:u("write_and_speak.zoomed")}),w.jsx(Pt,{outlined:!0,isActive:n===(i?o.height:a.height)&&e===(i?o.depth:a.depth),onClick:()=>{t(o.height),r(o.depth),Ei("avatarHeight",o.height),Ei("avatarDepth",o.depth)},children:u("write_and_speak.normal")}),w.jsx(Pt,{outlined:!0,isActive:n===(i?l.height:o.height)&&e===(i?l.depth:o.depth),onClick:()=>{t(l.height),r(l.depth),Ei("avatarHeight",l.height),Ei("avatarDepth",l.depth)},children:u("write_and_speak.far")})]})]})},MRe=({fallbackImg:n})=>{const{progress:e}=ZMe();return w.jsx(XMe,{center:!0,className:"avatar-loader",children:w.jsx(vl,{spinning:!0,children:n?w.jsxs("figure",{children:[w.jsx("img",{src:n,alt:`${Math.round(e)}% loaded`,title:`${Math.round(e)}% loaded`}),w.jsx("figcaption",{children:`${Math.round(e)}%`})]}):w.jsxs(w.Fragment,{children:[Math.round(e)," % loaded"]})})})},RRe={halfBody:{width:"100%",height:"100%",minHeight:"500px",backgroundColor:"white",borderRadius:"100%"},fullBody:{width:"500px",height:"500px",backgroundColor:"white"}},NRe=()=>rTe()||nTe()?w.jsx(nRe,{distance:100,position:[-.3,.2,1.25],angle:Math.PI/2,attenuation:5,anglePower:5}):w.jsx(X3e,{files:"https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/venice_sunset_1k.hdr"}),gU=(n,e)=>({fov:e?44:40,position:[0,0,n?.6:3],target:[0,0,0]});function PRe({url:n,sex:e,style:t,rotateAvatar:r,eyeBlink:i,headMovement:s,speaking:o,fallback:a,fallbackImg:l,halfBody:c=!0,loading:u,animation:d,showControls:h=!1,isZoomed:f,chatEmission:m,stopProcessing:g,resetVisemeQueue:v,updateCurrentViseme:y,enablePositionControls:A,setEnablePositionControls:C,isTotem:T=!1}){const[x,R]=D.useState(()=>gU(c,f||!1).position[2]),N=()=>T?Xs("avatarHeight",50):c?80:f?16:65,M=()=>T?Xs("avatarDepth",50):c?50:f?5:100,[O,P]=D.useState(N()),[z,V]=D.useState(M());return w.jsxs(w.Fragment,{children:[A&&w.jsx(bRe,{avatarHeight:O,avatarDepth:z,halfBody:c,setAvatarHeight:P,setAvatarDepth:V,setEnablePositionControls:C}),w.jsxs(kMe,{style:t||RRe.fullBody,children:[w.jsx(q3e,{makeDefault:!0,position:[0,0,x],fov:gU(c,f||!1).fov}),r&&w.jsx(Q3e,{enablePan:!1,enableZoom:!1,target:[0,0,0]}),w.jsxs(D.Suspense,{fallback:a||w.jsx(MRe,{fallbackImg:l}),children:[NRe(),w.jsx(IRe,{url:n,sex:e,showControls:h,loading:u||!1,animation:d,isZoomed:f||!1,eyeBlink:i||!1,headMovement:s||!1,speaking:o||!1,halfBody:c,chatEmission:m,updateCurrentViseme:y,stopProcessing:g,resetVisemeQueue:v,setCameraZ:R,avatarHeight:O,avatarDepth:z})]})]})]})}const hX=D.createContext(void 0),ORe={0:"viseme_sil",1:"viseme_PP",2:"viseme_FF",3:"viseme_TH",4:"viseme_DD",5:"viseme_kk",6:"viseme_CH",7:"viseme_SS",8:"viseme_nn",9:"viseme_RR",10:"viseme_aa",11:"viseme_E",12:"viseme_I",13:"viseme_O",14:"viseme_U",15:"viseme_kk",16:"viseme_CH",17:"viseme_SS",18:"viseme_TH",19:"viseme_RR",20:"viseme_kk",21:"viseme_PP"},DRe={DEFAULT_VISEME_DURATION:.1,VISEME_OVERLAP:.02,SMOOTHING_FACTOR:.4,LOG_INTERVAL:60,PRELOAD:.5,WEIGHT_MULTIPLIER:.8},{DEFAULT_VISEME_DURATION:fX,VISEME_OVERLAP:pX,SMOOTHING_FACTOR:mX,LOG_INTERVAL:LRe,PRELOAD:kRe,WEIGHT_MULTIPLIER:BRe}=DRe,gR={calculateEndTime:n=>n+fX,isExpired:(n,e)=>n.endTime<e-pX,calculateWeight:n=>Math.sin(Math.PI*Math.min(n,1))*BRe,smoothWeight:(n,e)=>n+(e-n)*mX},o5=n=>(e,t)=>{const r={event:"color: #4CAF50; font-weight: bold;",error:"color: #f44336; font-weight: bold;",debug:"color: #2196F3; font-weight: bold;"};console.log(`%c[VisemeContext] ${e}`,r[n],t)},t_=o5("event"),FRe=o5("error"),zRe=o5("debug"),URe=({children:n})=>{const e=D.useRef([]),t=D.useRef(null),r=D.useRef(null),[i,s]=D.useState(!1),[o,a]=D.useState("idle"),l=D.useRef(null),c=D.useRef(0),u=D.useRef(null),d=D.useCallback(C=>{t.current=C,C.onstatechange=()=>{switch(t_("Audio Context State Change",{state:C.state,currentTime:C.currentTime}),C.state){case"running":a("active");break;case"suspended":a("paused");break;case"closed":a("finished"),m();break}}},[]),h=D.useCallback((C,T)=>{if(o==="finished")return;const x=ORe[C]||"viseme_sil",R=T/1e7;u.current===null&&(u.current=R);const N=R-(u.current||0),M=N+fX,O={name:x,weight:0,startTime:N,endTime:M};e.current.push(O),o==="idle"&&a("preparing")},[o]),f=D.useCallback(C=>{if(!C){FRe("No audio context provided",{state:o});return}t.current=C,r.current=C.currentTime,c.current=0,s(!0),a("active"),t_("Started Processing",{audioTime:C.currentTime,queueLength:e.current.length,state:o})},[]),m=D.useCallback(()=>{s(!1),a("finished"),r.current=null,l.current=null,c.current=0,t.current=null,t_("Stopped Processing",{queueLength:e.current.length,state:o})},[]),g=D.useCallback(C=>{if(!i||!t.current)return null;const T=t.current.currentTime-(r.current||0)+kRe;e.current=e.current.filter(R=>!gR.isExpired(R,T));const x=e.current.find(R=>R.startTime<=T&&R.endTime>T-pX);if(c.current%LRe===60&&zRe("Current Viseme",{currentViseme:x,audioTime:T,visemeQueue:e.current}),x){const R=(T-x.startTime)/(x.endTime-x.startTime),N=gR.calculateWeight(R),M=l.current?gR.smoothWeight(l.current.weight,N):N,O={...x,weight:M};return l.current=O,O}if(l.current){const R=l.current.weight*(1-mX);l.current={...l.current,weight:R}}return l.current=null,null},[i]),v=D.useCallback(()=>{e.current=[],l.current=null,r.current=null,u.current=null,c.current=0,a("idle"),t_("Reset Viseme Queue",{previousState:o})},[o]),y=D.useCallback(C=>{t_("Reset And Start Processing",{previousState:o,queueLength:e.current.length}),m(),v(),f(C)},[m,v,f,o]),A=D.useMemo(()=>({addViseme:h,updateCurrentViseme:g,startProcessing:f,stopProcessing:m,resetAndStartProcessing:y,resetVisemeQueue:v,isProcessing:i,setAudioContext:d}),[h,g,f,m,y,v,i,d]);return w.jsx(hX.Provider,{value:A,children:n})},gX=()=>{const n=D.useContext(hX);if(!n)throw new Error("useVisemeContext must be used within a VisemeProvider");return n},jRe=({memori:n,integration:e,integrationConfig:t,tenant:r,instruct:i=!1,avatar3dVisible:s=!1,setAvatar3dVisible:o,hasUserActivatedSpeak:a=!1,isPlayingAudio:l=!1,loading:c=!1,baseUrl:u,apiUrl:d,animation:h,isZoomed:f=!1,chatProps:m,avatarType:g=null,enablePositionControls:v,setEnablePositionControls:y,isTotem:A=!1})=>{const{t:C}=ur(),[T,x]=D.useState(!1),{stopProcessing:R,updateCurrentViseme:N,resetVisemeQueue:M}=gX();D.useEffect(()=>{x(!0)},[]);const O=()=>{if((t==null?void 0:t.avatar)==="userAvatar"&&n.avatarURL&&n.avatarURL.length>0)return Pa({type:"avatar",tenantID:r==null?void 0:r.id,resourceURI:n.avatarURL,baseURL:u,apiURL:d})},P=()=>((t==null?void 0:t.avatar)==="readyplayerme"||(t==null?void 0:t.avatar)==="readyplayerme-full"||(t==null?void 0:t.avatar)==="customglb"||(t==null?void 0:t.avatar)==="customrpm")&&(t!=null&&t.avatarURL)&&g&&g!=="blob"?w.jsxs(w.Fragment,{children:[w.jsx("div",{className:er("memori--avatar-wrapper",`memori--avatar-${(t==null?void 0:t.avatar)||"default"}`,{hidden:!s}),children:z()}),V()]}):w.jsx("div",{className:"memori--blob-container",children:T&&w.jsx(eP,{speaking:l,avatar:O()})}),z=()=>{var q;return T?(t==null?void 0:t.avatar)==="readyplayerme"||(t==null?void 0:t.avatar)==="readyplayerme-full"||(t==null?void 0:t.avatar)==="customrpm"?w.jsx(sMe,{fallback:w.jsx("div",{className:"memori--blob-container",children:T&&w.jsx(eP,{speaking:l,avatar:O()})}),children:w.jsx(PRe,{enablePositionControls:v,updateCurrentViseme:N,url:t.avatarURL,sex:n.voiceType==="FEMALE"?"FEMALE":"MALE",fallbackImg:O(),headMovement:!0,eyeBlink:!0,animation:h,halfBody:t.avatar==="readyplayerme",speaking:l,loading:c,style:$(),stopProcessing:R,resetVisemeQueue:M,isZoomed:f,isTotem:A,chatEmission:(q=m==null?void 0:m.dialogState)===null||q===void 0?void 0:q.emission,setEnablePositionControls:y})}):(t==null?void 0:t.avatar)==="customglb"?w.jsx(BK,{poster:O()||"",src:t.avatarURL,alt:""}):null:null},V=()=>w.jsx("div",{className:"memori--avatar-toggle",children:w.jsx(Pt,{ghost:!0,onClick:()=>o(!s),icon:s?w.jsx(aMe,{}):w.jsx(oMe,{}),children:w.jsx("span",{className:"memori--avatar-toggle-text",children:C(s?"hide":"show")})})}),$=()=>(t==null?void 0:t.avatar)==="readyplayerme"?{width:"100%",height:"100%",backgroundColor:"none",boxShadow:"none"}:{width:"100%",height:"100%",backgroundColor:"none"},B=()=>{if(!(i&&!a&&n.isGiver&&(r!=null&&r.id)))return null;const q=`https://${r.id}/${n.culture==="it-IT"?"it":"en"}/${n.ownerUserName}/${n.name}/integrations${e!=null&&e.integrationID?`?integration=${e.integrationID}&openAvatarModal=true`:""}`;return w.jsx("div",{className:"memori--avatar-link-to-integrations",children:w.jsx("a",{className:"memori-button memori-button--circle memori-button--outlined",href:q,children:w.jsx(ql,{content:C("widgetgoToIntegrationsToCustomizeAvatar"),children:w.jsx("span",{className:"memori-button--icon",children:w.jsx(lMe,{})})})})})};return w.jsxs(w.Fragment,{children:[P(),B()]})},GRe=D.memo(jRe,(n,e)=>JSON.stringify(n)===JSON.stringify(e)),HRe=({instruct:n,canInstruct:e,onChangeMode:t})=>{const{t:r}=ur();return e?w.jsx("div",{className:"memori--changeMode-instruct",children:w.jsxs(Ja,{name:"instruct",value:n?"instruct":"test",defaultValue:n?"instruct":"test",className:"memori--changeMode-instruct-radio",onChange:t,children:[w.jsx(Ja.Option,{value:"instruct",className:"memori--changeMode-instruct-radio-button",children:({checked:i})=>w.jsx(Pt,{primary:i,children:r("widget.instruct")||"Instruct"})}),w.jsx(Ja.Option,{value:"test",className:"memori--changeMode-instruct-radio-button",children:({checked:i})=>w.jsx(Pt,{primary:i,children:r("widget.test")||"Test"})})]})}):null},VRe=({className:n,title:e})=>w.jsx("svg",{...e?{}:{"aria-hidden":"true"},focusable:"false",role:"img",viewBox:"0 0 40 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:n,"aria-label":e,children:w.jsx("path",{d:"M25.085.277c-.264 0-.531.071-.777.236L8.482 10.857H1.161a.716.716 0 00-.715.714V24.43c0 .392.322.714.715.714h7.321l15.826 10.344c.246.16.518.236.777.236.745 0 1.433-.593 1.433-1.433V1.71c0-.84-.688-1.433-1.433-1.433zM23.304 30.99l-13.063-8.54-.803-.522H3.66V14.07h5.777l.799-.522 13.067-8.54V30.99zM39.534 15.148L36.967 18l2.567 2.852a1.09 1.09 0 010 1.427l-1.283 1.426a.845.845 0 01-1.284 0L34.4 20.852l-2.567 2.852a.845.845 0 01-1.283 0l-1.284-1.426a1.09 1.09 0 010-1.426L31.833 18l-2.567-2.852a1.09 1.09 0 010-1.426l1.283-1.427a.845.845 0 011.284 0l2.567 2.853 2.567-2.853a.845.845 0 011.284 0l1.283 1.427a1.09 1.09 0 010 1.426z",fill:"currentColor"})}),$Re=({className:n,title:e})=>w.jsx("svg",{...e?{}:{"aria-hidden":"true"},focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",className:n,"aria-label":e,children:w.jsx("path",{d:"M625.9 115c-5.9 0-11.9 1.6-17.4 5.3L254 352H90c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h164l354.5 231.7c5.5 3.6 11.6 5.3 17.4 5.3 16.7 0 32.1-13.3 32.1-32.1V147.1c0-18.8-15.4-32.1-32.1-32.1zM586 803L293.4 611.7l-18-11.7H146V424h129.4l17.9-11.7L586 221v582zm348-327H806c-8.8 0-16 7.2-16 16v40c0 8.8 7.2 16 16 16h128c8.8 0 16-7.2 16-16v-40c0-8.8-7.2-16-16-16zm-41.9 261.8l-110.3-63.7a15.9 15.9 0 00-21.7 5.9l-19.9 34.5c-4.4 7.6-1.8 17.4 5.8 21.8L856.3 800a15.9 15.9 0 0021.7-5.9l19.9-34.5c4.4-7.6 1.7-17.4-5.8-21.8zM760 344a15.9 15.9 0 0021.7 5.9L892 286.2c7.6-4.4 10.2-14.2 5.8-21.8L878 230a15.9 15.9 0 00-21.7-5.9L746 287.8a15.99 15.99 0 00-5.8 21.8L760 344z"})}),WRe=({className:n,title:e})=>w.jsx("svg",{...e?{}:{"aria-hidden":"true"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",focusable:"false",role:"img",className:n,"aria-label":e,children:w.jsx("path",{d:"M464 512a48 48 0 1096 0 48 48 0 10-96 0zm200 0a48 48 0 1096 0 48 48 0 10-96 0zm-400 0a48 48 0 1096 0 48 48 0 10-96 0zm661.2-173.6c-22.6-53.7-55-101.9-96.3-143.3a444.35 444.35 0 00-143.3-96.3C630.6 75.7 572.2 64 512 64h-2c-60.6.3-119.3 12.3-174.5 35.9a445.35 445.35 0 00-142 96.5c-40.9 41.3-73 89.3-95.2 142.8-23 55.4-34.6 114.3-34.3 174.9A449.4 449.4 0 00112 714v152a46 46 0 0046 46h152.1A449.4 449.4 0 00510 960h2.1c59.9 0 118-11.6 172.7-34.3a444.48 444.48 0 00142.8-95.2c41.3-40.9 73.8-88.7 96.5-142 23.6-55.2 35.6-113.9 35.9-174.5.3-60.9-11.5-120-34.8-175.6zm-151.1 438C704 845.8 611 884 512 884h-1.7c-60.3-.3-120.2-15.3-173.1-43.5l-8.4-4.5H188V695.2l-4.5-8.4C155.3 633.9 140.3 574 140 513.7c-.4-99.7 37.7-193.3 107.6-263.8 69.8-70.5 163.1-109.5 262.8-109.9h1.7c50 0 98.5 9.7 144.2 28.9 44.6 18.7 84.6 45.6 119 80 34.3 34.3 61.3 74.4 80 119 19.4 46.2 29.1 95.2 28.9 145.8-.6 99.6-39.7 192.9-110.1 262.7z"})}),qRe=(n,e="export-chat.txt")=>{const t=new Blob([n],{type:"text/plain"}),r=URL.createObjectURL(t),i=document.createElement("a");i.setAttribute("href",r),i.setAttribute("download",e),i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i)},QRe=({history:n,memori:e,className:t,buttonClassName:r,icon:i,disabled:s=!1,align:o="right",filename:a})=>{const{t:l}=ur(),c=`${l("write_and_speak.conversationStartedLabel")} ${new Intl.DateTimeFormat("it",{dateStyle:"short",timeStyle:"short"}).format(new Date)}

`.concat(n.map(u=>`${u.fromUser?"YOU":e.name}: ${u.text}`).join(`
`));return w.jsx(aT,{title:l("write_and_speak.exportChatHistoryMessage"),className:er("memori-export-history-button",t,{"memori-export-history-button--align-left":o==="left"}),children:({close:u})=>w.jsxs(w.Fragment,{children:[w.jsx(aT.Button,{disabled:s,className:er("memori-button","memori-button--circle","memori-button--icon-only",r,{"memori-button--disabled":s,"memori-button--primary":!s}),children:w.jsx("div",{className:"memori-button--icon",children:i||w.jsx(WRe,{})})}),w.jsxs(aT.Panel,{className:"memori-export-history-button--panel",children:[w.jsx("p",{children:l("write_and_speak.exportChatHistory")}),w.jsx(Pt,{primary:!0,onClick:()=>qRe(c,a||`${e.name.replace(/\W+/g,"-")}-export-chat.txt`),children:l("yes")||"Yes"}),w.jsx(Pt,{onClick:()=>u(),children:l("no")||"No"})]})]})})},JRe=({className:n,title:e})=>w.jsx("svg",{...e?{}:{"aria-hidden":"true"},focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",className:n,"aria-label":e,children:w.jsx("path",{d:"M924.8 625.7l-65.5-56c3.1-19 4.7-38.4 4.7-57.8s-1.6-38.8-4.7-57.8l65.5-56a32.03 32.03 0 009.3-35.2l-.9-2.6a443.74 443.74 0 00-79.7-137.9l-1.8-2.1a32.12 32.12 0 00-35.1-9.5l-81.3 28.9c-30-24.6-63.5-44-99.7-57.6l-15.7-85a32.05 32.05 0 00-25.8-25.7l-2.7-.5c-52.1-9.4-106.9-9.4-159 0l-2.7.5a32.05 32.05 0 00-25.8 25.7l-15.8 85.4a351.86 351.86 0 00-99 57.4l-81.9-29.1a32 32 0 00-35.1 9.5l-1.8 2.1a446.02 446.02 0 00-79.7 137.9l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.3 56.6c-3.1 18.8-4.6 38-4.6 57.1 0 19.2 1.5 38.4 4.6 57.1L99 625.5a32.03 32.03 0 00-9.3 35.2l.9 2.6c18.1 50.4 44.9 96.9 79.7 137.9l1.8 2.1a32.12 32.12 0 0035.1 9.5l81.9-29.1c29.8 24.5 63.1 43.9 99 57.4l15.8 85.4a32.05 32.05 0 0025.8 25.7l2.7.5a449.4 449.4 0 00159 0l2.7-.5a32.05 32.05 0 0025.8-25.7l15.7-85a350 350 0 0099.7-57.6l81.3 28.9a32 32 0 0035.1-9.5l1.8-2.1c34.8-41.1 61.6-87.5 79.7-137.9l.9-2.6c4.5-12.3.8-26.3-9.3-35zM788.3 465.9c2.5 15.1 3.8 30.6 3.8 46.1s-1.3 31-3.8 46.1l-6.6 40.1 74.7 63.9a370.03 370.03 0 01-42.6 73.6L721 702.8l-31.4 25.8c-23.9 19.6-50.5 35-79.3 45.8l-38.1 14.3-17.9 97a377.5 377.5 0 01-85 0l-17.9-97.2-37.8-14.5c-28.5-10.8-55-26.2-78.7-45.7l-31.4-25.9-93.4 33.2c-17-22.9-31.2-47.6-42.6-73.6l75.5-64.5-6.5-40c-2.4-14.9-3.7-30.3-3.7-45.5 0-15.3 1.2-30.6 3.7-45.5l6.5-40-75.5-64.5c11.3-26.1 25.6-50.7 42.6-73.6l93.4 33.2 31.4-25.9c23.7-19.5 50.2-34.9 78.7-45.7l37.9-14.3 17.9-97.2c28.1-3.2 56.8-3.2 85 0l17.9 97 38.1 14.3c28.7 10.8 55.4 26.2 79.3 45.8l31.4 25.8 92.8-32.9c17 22.9 31.2 47.6 42.6 73.6L781.8 426l6.5 39.9zM512 326c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 614c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 502c0-29.9 11.7-58 32.8-79.2C454 401.6 482.1 390 512 390c29.9 0 58 11.6 79.2 32.8A111.6 111.6 0 01624 502c0 29.9-11.7 58-32.8 79.2z"})}),KRe=({className:n,title:e})=>w.jsx("svg",{...e?{}:{"aria-hidden":"true"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",focusable:"false",role:"img",className:n,"aria-label":e,children:w.jsx("path",{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-32 736H663.9V602.2h104l15.6-120.7H663.9v-77.1c0-35 9.7-58.8 59.8-58.8h63.9v-108c-11.1-1.5-49-4.8-93.2-4.8-92.2 0-155.3 56.3-155.3 159.6v89H434.9v120.7h104.3V848H176V176h672v672z"})}),YRe=({className:n,title:e})=>w.jsx("svg",{...e?{}:{"aria-hidden":"true"},focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",className:n,"aria-label":e,children:w.jsx("path",{d:"M928 254.3c-30.6 13.2-63.9 22.7-98.2 26.4a170.1 170.1 0 0 0 75-94 336.64 336.64 0 0 1-108.2 41.2A170.1 170.1 0 0 0 672 174c-94.5 0-170.5 76.6-170.5 170.6 0 13.2 1.6 26.4 4.2 39.1-141.5-7.4-267.7-75-351.6-178.5a169.32 169.32 0 0 0-23.2 86.1c0 59.2 30.1 111.4 76 142.1a172 172 0 0 1-77.1-21.7v2.1c0 82.9 58.6 151.6 136.7 167.4a180.6 180.6 0 0 1-44.9 5.8c-11.1 0-21.6-1.1-32.2-2.6C211 652 273.9 701.1 348.8 702.7c-58.6 45.9-132 72.9-211.7 72.9-14.3 0-27.5-.5-41.2-2.1C171.5 822 261.2 850 357.8 850 671.4 850 843 590.2 843 364.7c0-7.4 0-14.8-.5-22.2 33.2-24.3 62.3-54.4 85.5-88.2z"})}),XRe=({className:n,title:e})=>w.jsx("svg",{...e?{}:{"aria-hidden":"true"},focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",className:n,"aria-label":e,children:w.jsx("path",{d:"M847.7 112H176.3c-35.5 0-64.3 28.8-64.3 64.3v671.4c0 35.5 28.8 64.3 64.3 64.3h671.4c35.5 0 64.3-28.8 64.3-64.3V176.3c0-35.5-28.8-64.3-64.3-64.3zm0 736c-447.8-.1-671.7-.2-671.7-.3.1-447.8.2-671.7.3-671.7 447.8.1 671.7.2 671.7.3-.1 447.8-.2 671.7-.3 671.7zM230.6 411.9h118.7v381.8H230.6zm59.4-52.2c37.9 0 68.8-30.8 68.8-68.8a68.8 68.8 0 1 0-137.6 0c-.1 38 30.7 68.8 68.8 68.8zm252.3 245.1c0-49.8 9.5-98 71.2-98 60.8 0 61.7 56.9 61.7 101.2v185.7h118.6V584.3c0-102.8-22.2-181.9-142.3-181.9-57.7 0-96.4 31.7-112.3 61.7h-1.6v-52.2H423.7v381.8h118.6V604.8z"})}),ZRe=({className:n,title:e})=>w.jsxs("svg",{...e?{}:{"aria-hidden":"true"},focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",className:n,"aria-label":e,children:[w.jsx("path",{d:"M713.5 599.9c-10.9-5.6-65.2-32.2-75.3-35.8-10.1-3.8-17.5-5.6-24.8 5.6-7.4 11.1-28.4 35.8-35 43.3-6.4 7.4-12.9 8.3-23.8 2.8-64.8-32.4-107.3-57.8-150-131.1-11.3-19.5 11.3-18.1 32.4-60.2 3.6-7.4 1.8-13.7-1-19.3-2.8-5.6-24.8-59.8-34-81.9-8.9-21.5-18.1-18.5-24.8-18.9-6.4-.4-13.7-.4-21.1-.4-7.4 0-19.3 2.8-29.4 13.7-10.1 11.1-38.6 37.8-38.6 92s39.5 106.7 44.9 114.1c5.6 7.4 77.7 118.6 188.4 166.5 70 30.2 97.4 32.8 132.4 27.6 21.3-3.2 65.2-26.6 74.3-52.5 9.1-25.8 9.1-47.9 6.4-52.5-2.7-4.9-10.1-7.7-21-13z"}),w.jsx("path",{d:"M925.2 338.4c-22.6-53.7-55-101.9-96.3-143.3-41.3-41.3-89.5-73.8-143.3-96.3C630.6 75.7 572.2 64 512 64h-2c-60.6.3-119.3 12.3-174.5 35.9-53.3 22.8-101.1 55.2-142 96.5-40.9 41.3-73 89.3-95.2 142.8-23 55.4-34.6 114.3-34.3 174.9.3 69.4 16.9 138.3 48 199.9v152c0 25.4 20.6 46 46 46h152.1c61.6 31.1 130.5 47.7 199.9 48h2.1c59.9 0 118-11.6 172.7-34.3 53.5-22.3 101.6-54.3 142.8-95.2 41.3-40.9 73.8-88.7 96.5-142 23.6-55.2 35.6-113.9 35.9-174.5.3-60.9-11.5-120-34.8-175.6zm-151.1 438C704 845.8 611 884 512 884h-1.7c-60.3-.3-120.2-15.3-173.1-43.5l-8.4-4.5H188V695.2l-4.5-8.4C155.3 633.9 140.3 574 140 513.7c-.4-99.7 37.7-193.3 107.6-263.8 69.8-70.5 163.1-109.5 262.8-109.9h1.7c50 0 98.5 9.7 144.2 28.9 44.6 18.7 84.6 45.6 119 80 34.3 34.3 61.3 74.4 80 119 19.4 46.2 29.1 95.2 28.9 145.8-.6 99.6-39.7 192.9-110.1 262.7z"})]}),e4e=({className:n,title:e})=>w.jsx("svg",{...e?{}:{"aria-hidden":"true"},focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",className:n,"aria-label":e,children:w.jsx("path",{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0 0 68.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"})}),t4e=({className:n,title:e})=>w.jsx("svg",{...e?{}:{"aria-hidden":"true"},focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",className:n,"aria-label":e,children:w.jsx("path",{d:"M752 664c-28.5 0-54.8 10-75.4 26.7L469.4 540.8a160.68 160.68 0 0 0 0-57.6l207.2-149.9C697.2 350 723.5 360 752 360c66.2 0 120-53.8 120-120s-53.8-120-120-120-120 53.8-120 120c0 11.6 1.6 22.7 4.7 33.3L439.9 415.8C410.7 377.1 364.3 352 312 352c-88.4 0-160 71.6-160 160s71.6 160 160 160c52.3 0 98.7-25.1 127.9-63.8l196.8 142.5c-3.1 10.6-4.7 21.8-4.7 33.3 0 66.2 53.8 120 120 120s120-53.8 120-120-53.8-120-120-120zm0-476c28.7 0 52 23.3 52 52s-23.3 52-52 52-52-23.3-52-52 23.3-52 52-52zM312 600c-48.5 0-88-39.5-88-88s39.5-88 88-88 88 39.5 88 88-39.5 88-88 88zm440 236c-28.7 0-52-23.3-52-52s23.3-52 52-52 52 23.3 52 52-23.3 52-52 52z"})}),n4e=({className:n,title:e})=>w.jsx("svg",{...e?{}:{"aria-hidden":"true"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",focusable:"false",role:"img",className:n,"aria-label":e,children:w.jsx("path",{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"})}),r4e=({className:n,title:e})=>w.jsx("svg",{...e?{}:{"aria-hidden":"true"},focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 496 512",className:n,"aria-label":e,children:w.jsx("path",{fill:"currentColor",d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm121.8 169.9l-40.7 191.8c-3 13.6-11.1 16.9-22.4 10.5l-62-45.7-29.9 28.8c-3.3 3.3-6.1 6.1-12.5 6.1l4.4-63.1 114.9-103.8c5-4.4-1.1-6.9-7.7-2.5l-142 89.4-61.2-19.1c-13.3-4.2-13.6-13.3 2.8-19.7l239.1-92.2c11.1-4 20.8 2.7 17.2 19.5z"})});var i4e=Object.defineProperty,Tx=Object.getOwnPropertySymbols,vX=Object.prototype.hasOwnProperty,yX=Object.prototype.propertyIsEnumerable,vU=(n,e,t)=>e in n?i4e(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,yU=(n,e)=>{for(var t in e||(e={}))vX.call(e,t)&&vU(n,t,e[t]);if(Tx)for(var t of Tx(e))yX.call(e,t)&&vU(n,t,e[t]);return n},s4e=(n,e)=>{var t={};for(var r in n)vX.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&Tx)for(var r of Tx(n))e.indexOf(r)<0&&yX.call(n,r)&&(t[r]=n[r]);return t};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Bm;(n=>{const e=class{constructor(l,c,u,d){if(this.version=l,this.errorCorrectionLevel=c,this.modules=[],this.isFunction=[],l<e.MIN_VERSION||l>e.MAX_VERSION)throw new RangeError("Version value out of range");if(d<-1||d>7)throw new RangeError("Mask value out of range");this.size=l*4+17;let h=[];for(let m=0;m<this.size;m++)h.push(!1);for(let m=0;m<this.size;m++)this.modules.push(h.slice()),this.isFunction.push(h.slice());this.drawFunctionPatterns();const f=this.addEccAndInterleave(u);if(this.drawCodewords(f),d==-1){let m=1e9;for(let g=0;g<8;g++){this.applyMask(g),this.drawFormatBits(g);const v=this.getPenaltyScore();v<m&&(d=g,m=v),this.applyMask(g)}}s(0<=d&&d<=7),this.mask=d,this.applyMask(d),this.drawFormatBits(d),this.isFunction=[]}static encodeText(l,c){const u=n.QrSegment.makeSegments(l);return e.encodeSegments(u,c)}static encodeBinary(l,c){const u=n.QrSegment.makeBytes(l);return e.encodeSegments([u],c)}static encodeSegments(l,c,u=1,d=40,h=-1,f=!0){if(!(e.MIN_VERSION<=u&&u<=d&&d<=e.MAX_VERSION)||h<-1||h>7)throw new RangeError("Invalid value");let m,g;for(m=u;;m++){const C=e.getNumDataCodewords(m,c)*8,T=a.getTotalBits(l,m);if(T<=C){g=T;break}if(m>=d)throw new RangeError("Data too long")}for(const C of[e.Ecc.MEDIUM,e.Ecc.QUARTILE,e.Ecc.HIGH])f&&g<=e.getNumDataCodewords(m,C)*8&&(c=C);let v=[];for(const C of l){r(C.mode.modeBits,4,v),r(C.numChars,C.mode.numCharCountBits(m),v);for(const T of C.getData())v.push(T)}s(v.length==g);const y=e.getNumDataCodewords(m,c)*8;s(v.length<=y),r(0,Math.min(4,y-v.length),v),r(0,(8-v.length%8)%8,v),s(v.length%8==0);for(let C=236;v.length<y;C^=253)r(C,8,v);let A=[];for(;A.length*8<v.length;)A.push(0);return v.forEach((C,T)=>A[T>>>3]|=C<<7-(T&7)),new e(m,c,A,h)}getModule(l,c){return 0<=l&&l<this.size&&0<=c&&c<this.size&&this.modules[c][l]}getModules(){return this.modules}drawFunctionPatterns(){for(let u=0;u<this.size;u++)this.setFunctionModule(6,u,u%2==0),this.setFunctionModule(u,6,u%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const l=this.getAlignmentPatternPositions(),c=l.length;for(let u=0;u<c;u++)for(let d=0;d<c;d++)u==0&&d==0||u==0&&d==c-1||u==c-1&&d==0||this.drawAlignmentPattern(l[u],l[d]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(l){const c=this.errorCorrectionLevel.formatBits<<3|l;let u=c;for(let h=0;h<10;h++)u=u<<1^(u>>>9)*1335;const d=(c<<10|u)^21522;s(d>>>15==0);for(let h=0;h<=5;h++)this.setFunctionModule(8,h,i(d,h));this.setFunctionModule(8,7,i(d,6)),this.setFunctionModule(8,8,i(d,7)),this.setFunctionModule(7,8,i(d,8));for(let h=9;h<15;h++)this.setFunctionModule(14-h,8,i(d,h));for(let h=0;h<8;h++)this.setFunctionModule(this.size-1-h,8,i(d,h));for(let h=8;h<15;h++)this.setFunctionModule(8,this.size-15+h,i(d,h));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let l=this.version;for(let u=0;u<12;u++)l=l<<1^(l>>>11)*7973;const c=this.version<<12|l;s(c>>>18==0);for(let u=0;u<18;u++){const d=i(c,u),h=this.size-11+u%3,f=Math.floor(u/3);this.setFunctionModule(h,f,d),this.setFunctionModule(f,h,d)}}drawFinderPattern(l,c){for(let u=-4;u<=4;u++)for(let d=-4;d<=4;d++){const h=Math.max(Math.abs(d),Math.abs(u)),f=l+d,m=c+u;0<=f&&f<this.size&&0<=m&&m<this.size&&this.setFunctionModule(f,m,h!=2&&h!=4)}}drawAlignmentPattern(l,c){for(let u=-2;u<=2;u++)for(let d=-2;d<=2;d++)this.setFunctionModule(l+d,c+u,Math.max(Math.abs(d),Math.abs(u))!=1)}setFunctionModule(l,c,u){this.modules[c][l]=u,this.isFunction[c][l]=!0}addEccAndInterleave(l){const c=this.version,u=this.errorCorrectionLevel;if(l.length!=e.getNumDataCodewords(c,u))throw new RangeError("Invalid argument");const d=e.NUM_ERROR_CORRECTION_BLOCKS[u.ordinal][c],h=e.ECC_CODEWORDS_PER_BLOCK[u.ordinal][c],f=Math.floor(e.getNumRawDataModules(c)/8),m=d-f%d,g=Math.floor(f/d);let v=[];const y=e.reedSolomonComputeDivisor(h);for(let C=0,T=0;C<d;C++){let x=l.slice(T,T+g-h+(C<m?0:1));T+=x.length;const R=e.reedSolomonComputeRemainder(x,y);C<m&&x.push(0),v.push(x.concat(R))}let A=[];for(let C=0;C<v[0].length;C++)v.forEach((T,x)=>{(C!=g-h||x>=m)&&A.push(T[C])});return s(A.length==f),A}drawCodewords(l){if(l.length!=Math.floor(e.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let c=0;for(let u=this.size-1;u>=1;u-=2){u==6&&(u=5);for(let d=0;d<this.size;d++)for(let h=0;h<2;h++){const f=u-h,g=(u+1&2)==0?this.size-1-d:d;!this.isFunction[g][f]&&c<l.length*8&&(this.modules[g][f]=i(l[c>>>3],7-(c&7)),c++)}}s(c==l.length*8)}applyMask(l){if(l<0||l>7)throw new RangeError("Mask value out of range");for(let c=0;c<this.size;c++)for(let u=0;u<this.size;u++){let d;switch(l){case 0:d=(u+c)%2==0;break;case 1:d=c%2==0;break;case 2:d=u%3==0;break;case 3:d=(u+c)%3==0;break;case 4:d=(Math.floor(u/3)+Math.floor(c/2))%2==0;break;case 5:d=u*c%2+u*c%3==0;break;case 6:d=(u*c%2+u*c%3)%2==0;break;case 7:d=((u+c)%2+u*c%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[c][u]&&d&&(this.modules[c][u]=!this.modules[c][u])}}getPenaltyScore(){let l=0;for(let h=0;h<this.size;h++){let f=!1,m=0,g=[0,0,0,0,0,0,0];for(let v=0;v<this.size;v++)this.modules[h][v]==f?(m++,m==5?l+=e.PENALTY_N1:m>5&&l++):(this.finderPenaltyAddHistory(m,g),f||(l+=this.finderPenaltyCountPatterns(g)*e.PENALTY_N3),f=this.modules[h][v],m=1);l+=this.finderPenaltyTerminateAndCount(f,m,g)*e.PENALTY_N3}for(let h=0;h<this.size;h++){let f=!1,m=0,g=[0,0,0,0,0,0,0];for(let v=0;v<this.size;v++)this.modules[v][h]==f?(m++,m==5?l+=e.PENALTY_N1:m>5&&l++):(this.finderPenaltyAddHistory(m,g),f||(l+=this.finderPenaltyCountPatterns(g)*e.PENALTY_N3),f=this.modules[v][h],m=1);l+=this.finderPenaltyTerminateAndCount(f,m,g)*e.PENALTY_N3}for(let h=0;h<this.size-1;h++)for(let f=0;f<this.size-1;f++){const m=this.modules[h][f];m==this.modules[h][f+1]&&m==this.modules[h+1][f]&&m==this.modules[h+1][f+1]&&(l+=e.PENALTY_N2)}let c=0;for(const h of this.modules)c=h.reduce((f,m)=>f+(m?1:0),c);const u=this.size*this.size,d=Math.ceil(Math.abs(c*20-u*10)/u)-1;return s(0<=d&&d<=9),l+=d*e.PENALTY_N4,s(0<=l&&l<=2568888),l}getAlignmentPatternPositions(){if(this.version==1)return[];{const l=Math.floor(this.version/7)+2,c=this.version==32?26:Math.ceil((this.version*4+4)/(l*2-2))*2;let u=[6];for(let d=this.size-7;u.length<l;d-=c)u.splice(1,0,d);return u}}static getNumRawDataModules(l){if(l<e.MIN_VERSION||l>e.MAX_VERSION)throw new RangeError("Version number out of range");let c=(16*l+128)*l+64;if(l>=2){const u=Math.floor(l/7)+2;c-=(25*u-10)*u-55,l>=7&&(c-=36)}return s(208<=c&&c<=29648),c}static getNumDataCodewords(l,c){return Math.floor(e.getNumRawDataModules(l)/8)-e.ECC_CODEWORDS_PER_BLOCK[c.ordinal][l]*e.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][l]}static reedSolomonComputeDivisor(l){if(l<1||l>255)throw new RangeError("Degree out of range");let c=[];for(let d=0;d<l-1;d++)c.push(0);c.push(1);let u=1;for(let d=0;d<l;d++){for(let h=0;h<c.length;h++)c[h]=e.reedSolomonMultiply(c[h],u),h+1<c.length&&(c[h]^=c[h+1]);u=e.reedSolomonMultiply(u,2)}return c}static reedSolomonComputeRemainder(l,c){let u=c.map(d=>0);for(const d of l){const h=d^u.shift();u.push(0),c.forEach((f,m)=>u[m]^=e.reedSolomonMultiply(f,h))}return u}static reedSolomonMultiply(l,c){if(l>>>8||c>>>8)throw new RangeError("Byte out of range");let u=0;for(let d=7;d>=0;d--)u=u<<1^(u>>>7)*285,u^=(c>>>d&1)*l;return s(u>>>8==0),u}finderPenaltyCountPatterns(l){const c=l[1];s(c<=this.size*3);const u=c>0&&l[2]==c&&l[3]==c*3&&l[4]==c&&l[5]==c;return(u&&l[0]>=c*4&&l[6]>=c?1:0)+(u&&l[6]>=c*4&&l[0]>=c?1:0)}finderPenaltyTerminateAndCount(l,c,u){return l&&(this.finderPenaltyAddHistory(c,u),c=0),c+=this.size,this.finderPenaltyAddHistory(c,u),this.finderPenaltyCountPatterns(u)}finderPenaltyAddHistory(l,c){c[0]==0&&(l+=this.size),c.pop(),c.unshift(l)}};let t=e;t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],n.QrCode=t;function r(l,c,u){if(c<0||c>31||l>>>c)throw new RangeError("Value out of range");for(let d=c-1;d>=0;d--)u.push(l>>>d&1)}function i(l,c){return(l>>>c&1)!=0}function s(l){if(!l)throw new Error("Assertion error")}const o=class{constructor(l,c,u){if(this.mode=l,this.numChars=c,this.bitData=u,c<0)throw new RangeError("Invalid argument");this.bitData=u.slice()}static makeBytes(l){let c=[];for(const u of l)r(u,8,c);return new o(o.Mode.BYTE,l.length,c)}static makeNumeric(l){if(!o.isNumeric(l))throw new RangeError("String contains non-numeric characters");let c=[];for(let u=0;u<l.length;){const d=Math.min(l.length-u,3);r(parseInt(l.substr(u,d),10),d*3+1,c),u+=d}return new o(o.Mode.NUMERIC,l.length,c)}static makeAlphanumeric(l){if(!o.isAlphanumeric(l))throw new RangeError("String contains unencodable characters in alphanumeric mode");let c=[],u;for(u=0;u+2<=l.length;u+=2){let d=o.ALPHANUMERIC_CHARSET.indexOf(l.charAt(u))*45;d+=o.ALPHANUMERIC_CHARSET.indexOf(l.charAt(u+1)),r(d,11,c)}return u<l.length&&r(o.ALPHANUMERIC_CHARSET.indexOf(l.charAt(u)),6,c),new o(o.Mode.ALPHANUMERIC,l.length,c)}static makeSegments(l){return l==""?[]:o.isNumeric(l)?[o.makeNumeric(l)]:o.isAlphanumeric(l)?[o.makeAlphanumeric(l)]:[o.makeBytes(o.toUtf8ByteArray(l))]}static makeEci(l){let c=[];if(l<0)throw new RangeError("ECI assignment value out of range");if(l<128)r(l,8,c);else if(l<16384)r(2,2,c),r(l,14,c);else if(l<1e6)r(6,3,c),r(l,21,c);else throw new RangeError("ECI assignment value out of range");return new o(o.Mode.ECI,0,c)}static isNumeric(l){return o.NUMERIC_REGEX.test(l)}static isAlphanumeric(l){return o.ALPHANUMERIC_REGEX.test(l)}getData(){return this.bitData.slice()}static getTotalBits(l,c){let u=0;for(const d of l){const h=d.mode.numCharCountBits(c);if(d.numChars>=1<<h)return 1/0;u+=4+h+d.bitData.length}return u}static toUtf8ByteArray(l){l=encodeURI(l);let c=[];for(let u=0;u<l.length;u++)l.charAt(u)!="%"?c.push(l.charCodeAt(u)):(c.push(parseInt(l.substr(u+1,2),16)),u+=2);return c}};let a=o;a.NUMERIC_REGEX=/^[0-9]*$/,a.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,a.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n.QrSegment=a})(Bm||(Bm={}));(n=>{(e=>{const t=class{constructor(i,s){this.ordinal=i,this.formatBits=s}};let r=t;r.LOW=new t(0,1),r.MEDIUM=new t(1,0),r.QUARTILE=new t(2,3),r.HIGH=new t(3,2),e.Ecc=r})(n.QrCode||(n.QrCode={}))})(Bm||(Bm={}));(n=>{(e=>{const t=class{constructor(i,s){this.modeBits=i,this.numBitsCharCount=s}numCharCountBits(i){return this.numBitsCharCount[Math.floor((i+7)/17)]}};let r=t;r.NUMERIC=new t(1,[10,12,14]),r.ALPHANUMERIC=new t(2,[9,11,13]),r.BYTE=new t(4,[8,16,16]),r.KANJI=new t(8,[8,10,12]),r.ECI=new t(7,[0,0,0]),e.Mode=r})(n.QrSegment||(n.QrSegment={}))})(Bm||(Bm={}));var y_=Bm;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var o4e={L:y_.QrCode.Ecc.LOW,M:y_.QrCode.Ecc.MEDIUM,Q:y_.QrCode.Ecc.QUARTILE,H:y_.QrCode.Ecc.HIGH},a4e=128,l4e="L",c4e="#FFFFFF",u4e="#000000",d4e=!1,_X=4,h4e=.1;function f4e(n,e=0){const t=[];return n.forEach(function(r,i){let s=null;r.forEach(function(o,a){if(!o&&s!==null){t.push(`M${s+e} ${i+e}h${a-s}v1H${s+e}z`),s=null;return}if(a===r.length-1){if(!o)return;s===null?t.push(`M${a+e},${i+e} h1v1H${a+e}z`):t.push(`M${s+e},${i+e} h${a+1-s}v1H${s+e}z`);return}o&&s===null&&(s=a)})}),t.join("")}function p4e(n,e){return n.slice().map((t,r)=>r<e.y||r>=e.y+e.h?t:t.map((i,s)=>s<e.x||s>=e.x+e.w?i:!1))}function m4e(n,e,t,r){if(r==null)return null;const i=t?_X:0,s=n.length+i*2,o=Math.floor(e*h4e),a=s/e,l=(r.width||o)*a,c=(r.height||o)*a,u=r.x==null?n.length/2-l/2:r.x*a,d=r.y==null?n.length/2-c/2:r.y*a;let h=null;if(r.excavate){let f=Math.floor(u),m=Math.floor(d),g=Math.ceil(l+u-f),v=Math.ceil(c+d-m);h={x:f,y:m,w:g,h:v}}return{x:u,y:d,h:c,w:l,excavation:h}}var g4e=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}();function v4e(n){const e=n,{value:t,size:r=a4e,level:i=l4e,bgColor:s=c4e,fgColor:o=u4e,includeMargin:a=d4e,style:l,imageSettings:c}=e,u=s4e(e,["value","size","level","bgColor","fgColor","includeMargin","style","imageSettings"]),d=c==null?void 0:c.src,h=D.useRef(null),f=D.useRef(null),[m,g]=D.useState(!1);D.useEffect(()=>{if(h.current!=null){const A=h.current,C=A.getContext("2d");if(!C)return;let T=y_.QrCode.encodeText(t,o4e[i]).getModules();const x=a?_X:0,R=T.length+x*2,N=m4e(T,r,a,c),M=f.current,O=N!=null&&M!==null&&M.complete&&M.naturalHeight!==0&&M.naturalWidth!==0;O&&N.excavation!=null&&(T=p4e(T,N.excavation));const P=window.devicePixelRatio||1;A.height=A.width=r*P;const z=r/R*P;C.scale(z,z),C.fillStyle=s,C.fillRect(0,0,R,R),C.fillStyle=o,g4e?C.fill(new Path2D(f4e(T,x))):T.forEach(function(V,$){V.forEach(function(B,q){B&&C.fillRect(q+x,$+x,1,1)})}),O&&C.drawImage(M,N.x+x,N.y+x,N.w,N.h)}}),D.useEffect(()=>{g(!1)},[d]);const v=yU({height:r,width:r},l);let y=null;return d!=null&&(y=ht.createElement("img",{src:d,key:d,style:{display:"none"},onLoad:()=>{g(!0)},ref:f})),ht.createElement(ht.Fragment,null,ht.createElement("canvas",yU({style:v,height:r,width:r,ref:h},u)),y)}const y4e=({tenant:n,url:e,title:t="",className:r,baseUrl:i,primary:s=!0,showQrCode:o=!0,align:a="right"})=>{const{t:l}=ur(),[c,u]=D.useState(e),d=D.useMemo(()=>n!=null&&n.theme?`${i??"https://aisuru.com"}/images/${n.theme}/square_logo.png`:`${i??"https://aisuru.com"}/images/memori_logo.png`,[n,i]);D.useEffect(()=>{e||u(window.location.href)},[e]);const h=[{id:"facebook",title:"Facebook",url:`https://www.facebook.com/sharer/sharer.php?u=${c}`,icon:KRe},{id:"twitter",title:"Twitter",url:`https://twitter.com/intent/tweet?url=${c}`,icon:YRe},{id:"linkedin",title:"LinkedIn",url:`https://www.linkedin.com/shareArticle?mini=true&title=${t}&url=${c}`,icon:XRe},{id:"whatsapp",title:"Whatsapp",url:`https://api.whatsapp.com/send?phone=&text=${c}`,icon:ZRe},{id:"telegram",title:"Telegram",url:`https://t.me/share/url?text=${t}&url=${c}`,icon:r4e},{id:"email",title:"Email",url:`mailto:?subject=${(t==null?void 0:t.length)>0?t:e}&body=${c}`,icon:e4e}],f=()=>{const m=document.getElementById("qr-canvas");if(!m)return;const g=document.createElement("a");g.href=m.toDataURL(),g.download=`memori-${t}-share.png`,document.body.appendChild(g),g.click(),document.body.removeChild(g)};return w.jsxs(jl,{as:"div",className:er("memori-share-button",{"memori-share-button--align-left":a==="left"}),children:[w.jsx(jl.Button,{className:er("memori-button","memori-button--circle","memori-button--icon-only","memori-share-button--button",r,{"memori-button--primary":s}),title:l("widget.share")||void 0,children:w.jsx("div",{className:"memori-button--icon",children:w.jsx(t4e,{})})}),w.jsxs(jl.Items,{className:"memori-share-button--overlay",as:"ul",children:[w.jsx(jl.Item,{as:"li",className:"memori-share-button--li",children:w.jsx(Pt,{className:"memori-share-button--link",ghost:!0,icon:w.jsx(LK,{}),onClick:()=>{c&&navigator.clipboard.writeText(c)},children:l("copyToClipboard")||void 0})},"copy"),h.map(m=>{var g;return w.jsx(jl.Item,{as:"li",className:"memori-share-button--li",children:w.jsxs("a",{className:er("memori-button","memori-button--with-icon","memori-button--ghost","memori-button--padded","memori-share-button--link"),href:(g=m.url)!==null&&g!==void 0?g:"",target:"_blank",rel:"noopener noreferrer",children:[w.jsx("div",{className:"memori-button--icon",children:w.jsx(m.icon,{})}),m.title]})},m.id)}),o&&w.jsxs(jl.Item,{as:"li",className:"memori-share-button--li-qr-code",children:[w.jsx(v4e,{id:"qr-canvas",value:c??"",size:128,bgColor:"#ffffff",fgColor:"#000000",level:"H",includeMargin:!1,imageSettings:{src:d,x:void 0,y:void 0,height:32,width:32,excavate:!0}}),w.jsx("div",{children:w.jsx(Pt,{onClick:f,icon:w.jsx(n4e,{}),title:"Download QR",children:"Download"})})]},"qrcode")]})]})},_4e=({className:n,title:e})=>w.jsx("svg",{...e?{}:{"aria-hidden":"true"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",focusable:"false",role:"img",className:n,"aria-label":e,children:w.jsx("path",{d:"M290 236.4l43.9-43.9a8.01 8.01 0 0 0-4.7-13.6L169 160c-5.1-.6-9.5 3.7-8.9 8.9L179 329.1c.8 6.6 8.9 9.4 13.6 4.7l43.7-43.7L370 423.7c3.1 3.1 8.2 3.1 11.3 0l42.4-42.3c3.1-3.1 3.1-8.2 0-11.3L290 236.4zm352.7 187.3c3.1 3.1 8.2 3.1 11.3 0l133.7-133.6 43.7 43.7a8.01 8.01 0 0 0 13.6-4.7L863.9 169c.6-5.1-3.7-9.5-8.9-8.9L694.8 179c-6.6.8-9.4 8.9-4.7 13.6l43.9 43.9L600.3 370a8.03 8.03 0 0 0 0 11.3l42.4 42.4zM845 694.9c-.8-6.6-8.9-9.4-13.6-4.7l-43.7 43.7L654 600.3a8.03 8.03 0 0 0-11.3 0l-42.4 42.3a8.03 8.03 0 0 0 0 11.3L734 787.6l-43.9 43.9a8.01 8.01 0 0 0 4.7 13.6L855 864c5.1.6 9.5-3.7 8.9-8.9L845 694.9zm-463.7-94.6a8.03 8.03 0 0 0-11.3 0L236.3 733.9l-43.7-43.7a8.01 8.01 0 0 0-13.6 4.7L160.1 855c-.6 5.1 3.7 9.5 8.9 8.9L329.2 845c6.6-.8 9.4-8.9 4.7-13.6L290 787.6 423.7 654c3.1-3.1 3.1-8.2 0-11.3l-42.4-42.4z"})}),S4e=({className:n,title:e})=>w.jsxs("svg",{...e?{}:{"aria-hidden":"true"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",focusable:"false",role:"img",className:n,fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2","aria-label":e,children:[w.jsx("path",{d:"M23 4L23 10 17 10"}),w.jsx("path",{d:"M1 20L1 14 7 14"}),w.jsx("path",{d:"M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15"})]}),A4e=({className:n,title:e})=>w.jsx("svg",{...e?{}:{"aria-hidden":"true"},focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",className:n,"aria-label":e,children:w.jsx("path",{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6c-.3 1.5-.4 3-.4 4.4 0 14.4 11.6 26 26 26h723c1.5 0 3-.1 4.4-.4 14.2-2.4 23.7-15.9 21.2-30zM204 390h272V182h72v208h272v104H204V390zm468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"})}),E4e=({className:n,memori:e,tenant:t,history:r,position:i,setShowPositionDrawer:s,setShowSettingsDrawer:o,setShowKnownFactsDrawer:a,setShowExpertsDrawer:l,enableAudio:c=!0,speakerMuted:u,setSpeakerMuted:d,hasUserActivatedSpeak:h=!1,showShare:f=!0,showSettings:m=!0,showSpeaker:g=!0,showReload:v=!1,showClear:y=!1,showLogin:A=!0,setShowLoginDrawer:C,clearHistory:T,loginToken:x,user:R,sessionID:N})=>{const{t:M}=ur(),[O,P]=D.useState(!1),[z,V]=D.useState(!1);return D.useEffect(()=>{document.fullscreenEnabled&&P(!0)},[]),w.jsxs("div",{className:er("memori-header",n),children:[e.needsPosition&&i&&w.jsxs("div",{className:"memori-header--position",children:[i.latitude!==0&&i.longitude!==0&&w.jsx("span",{className:"memori-header--position-placeName",children:i.placeName}),w.jsx(Pt,{primary:!0,shape:"circle",className:"memori-header--button memori-header--button--position",title:M("widget.position")||"Position",icon:w.jsx(jY,{}),onClick:()=>s(!0)})]}),v&&w.jsx(Pt,{primary:!0,shape:"circle",className:"memori-header--button memori-header--button--reload",title:M("reload")||"Reload",icon:w.jsx(S4e,{}),onClick:()=>{window.location.reload()}}),y&&w.jsx(Pt,{primary:!0,shape:"circle",className:"memori-header--button memori-header--button--clear",title:M("clearHistory")||"Clear chat",icon:w.jsx(A4e,{}),onClick:T}),O&&w.jsx(Pt,{primary:!0,shape:"circle",className:"memori-header--button memori-header--button--fullscreen",title:z?M("fullscreenExit")||"Exit fullscreen":M("fullscreenEnter")||"Enter fullscreen",icon:z?w.jsx(kY,{}):w.jsx(_4e,{}),onClick:()=>{document.fullscreenElement?document.exitFullscreen&&(document.exitFullscreen(),V(!1)):(document.documentElement.requestFullscreen(),V(!0))}}),e.enableDeepThought&&!!x&&(R==null?void 0:R.pAndCUAccepted)&&w.jsx(Pt,{primary:!!N&&!!h,shape:"circle",icon:w.jsx(UY,{}),className:"memori-header--button memori-header--button--knownfacts",disabled:!h||!N,onClick:()=>a(!0),title:M("knownFacts.title")||"Known facts"}),e.enableBoardOfExperts&&w.jsx(Pt,{primary:!0,shape:"circle",icon:w.jsx(zY,{}),className:"memori-header--button memori-header--button--experts",disabled:!h||!N,onClick:()=>l(!0),title:M("widget.showExpertsInTheBoard")||"Experts in this board"}),c&&g&&w.jsx(Pt,{primary:!0,shape:"circle",className:"memori-header--button memori-header--button--speaker",icon:u?w.jsx(VRe,{}):w.jsx($Re,{}),onClick:()=>d(!u),title:M("widget.sound")||"Sound"}),w.jsx(QRe,{history:r,memori:e,className:"memori-header--button memori-header--button--export",disabled:!h||r.length===0}),m&&w.jsx(Pt,{primary:!0,shape:"circle",className:"memori-header--button memori-header--button-settings",icon:w.jsx(JRe,{}),onClick:()=>o(!0),title:M("widget.settings")||"Settings"}),f&&w.jsx(y4e,{className:"memori-header--button memori-header--button-share",title:e.name,tenant:t,showQrCode:!0,align:"left"}),A&&w.jsx(Pt,{primary:!0,shape:"circle",className:"memori-header--button memori-header--button-login",icon:w.jsx(fK,{}),onClick:()=>C(!0),title:x?M("login.user")||"User":M("login.login")||"Login"})]})},C4e=({tenant:n,userLang:e="en",integrationID:t,memoriHash:r})=>{const i=(n==null?void 0:n.theme)==="memorytwin"?"memorytwin":(n==null?void 0:n.theme)==="twincreator"?"twincreator":"aisuru";return w.jsxs("div",{className:"memori--powered-by",children:[w.jsx("img",{src:`https://aisuru.com/images/${i}/logo.png`,alt:""}),w.jsxs("p",{children:[w.jsx("span",{className:"sr-only",children:"Powered by"}),w.jsx("a",{href:`https://memori.ai/${(e==null?void 0:e.toLowerCase())==="it"?"it":"en"}${t?`?integrationID=${t}`:""}${r?`${t?"&":"?"}memori=${r}`:""}`,target:"_blank",rel:"noopener noreferrer",children:"Memori.AI"})]})]})},AT=({className:n,title:e})=>w.jsx("svg",{...e?{}:{"aria-hidden":"true"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",focusable:"false",role:"img",className:n,fill:"currentColor","aria-label":e,children:w.jsx("path",{fillRule:"evenodd",d:"M10 3a.75.75 0 01.55.24l3.25 3.5a.75.75 0 11-1.1 1.02L10 4.852 7.3 7.76a.75.75 0 01-1.1-1.02l3.25-3.5A.75.75 0 0110 3zm-3.76 9.2a.75.75 0 011.06.04l2.7 2.908 2.7-2.908a.75.75 0 111.1 1.02l-3.25 3.5a.75.75 0 01-1.1 0l-3.25-3.5a.75.75 0 01.04-1.06z",clipRule:"evenodd"})}),vR={en:["January","February","March","April","May","June","July","August","September","October","November","December"],it:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"]},SX=D.memo(({defaultDate:n,onChange:e,disabled:t=!1})=>{const{t:r,i18n:i}=ur(),[s,o]=D.useState(n?typeof n=="string"?dn.fromISO(n):dn.fromJSDate(n):dn.now());return D.useEffect(()=>{e(s)},[s,e]),w.jsxs("div",{className:"memori--date-selector",children:[w.jsx("div",{className:"memori--date-selector__select",children:w.jsxs(zi,{value:s,onChange:a=>{o(a)},disabled:t,name:"day",children:[w.jsxs(zi.Label,{className:"memori--date-selector__select-label",children:[r("day"),":"]}),w.jsxs(zi.Button,{"aria-label":r("day"),className:"memori--date-selector__select-button",children:[w.jsx("span",{className:"memori--date-selector__select--value",children:s.day}),w.jsx("span",{className:"memori--date-selector__select--icon",children:w.jsx(AT,{})})]}),w.jsx(Zr,{as:D.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:w.jsx(zi.Options,{className:"memori--date-selector__select-options",children:[...Array(31).keys()].map(a=>w.jsx(zi.Option,{value:s.set({day:a+1}),className:"memori--date-selector__select-option",children:a+1},a))})})]})}),w.jsx("div",{className:"memori--date-selector__select",children:w.jsxs(zi,{value:s,onChange:a=>{o(a)},disabled:t,name:"month",children:[w.jsxs(zi.Label,{className:"memori--date-selector__select-label",children:[r("month"),":"]}),w.jsxs(zi.Button,{"aria-label":r("month"),className:"memori--date-selector__select-button",children:[w.jsx("span",{className:"memori--date-selector__select--value",children:vR[i.language==="it"?"it":"en"][s.month-1]}),w.jsx("span",{className:"memori--date-selector__select--icon",children:w.jsx(AT,{})})]}),w.jsx(Zr,{as:D.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:w.jsx(zi.Options,{className:"memori--date-selector__select-options",children:vR[i.language==="it"?"it":"en"].map(a=>w.jsx(zi.Option,{className:"memori--date-selector__select-option",value:s.set({month:vR[i.language==="it"?"it":"en"].findIndex(l=>l===a)+1}),children:a},a))})})]})}),w.jsx("div",{className:"memori--date-selector__select",children:w.jsxs(zi,{value:s,onChange:a=>{o(a)},disabled:t,name:"year",children:[w.jsxs(zi.Label,{className:"memori--date-selector__select-label",children:[r("year"),":"]}),w.jsxs(zi.Button,{"aria-label":r("year"),className:"memori--date-selector__select-button",children:[w.jsx("span",{className:"memori--date-selector__select--value",children:s.year}),w.jsx("span",{className:"memori--date-selector__select--icon",children:w.jsx(AT,{})})]}),w.jsx(Zr,{as:D.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:w.jsx(zi.Options,{className:"memori--date-selector__select-options",children:[...Array(dn.now().year-1899).keys()].sort((a,l)=>l-a).map(a=>w.jsx(zi.Option,{value:s.set({year:a+1900}),className:"memori--date-selector__select-option",children:a+1900},a))})})]})})]})});SX.displayName="DateSelector";const w4e=({visible:n=!1,onClose:e,minAge:t})=>{const{t:r}=ur(),[i,s]=D.useState(),[o,a]=D.useState(),[l,c]=D.useState(!1),u=D.useCallback(()=>{if(c(!0),!i){kn.error(r("requiredField")),a(r("requiredField")||"Required field"),c(!1);return}if(dn.now().diff(i,"years").years<t){kn.error(r("underageTwinSession",{age:t})),a(r("underageTwinSession",{age:t})||`You must be at least ${t} years old to interact with this Twin`),c(!1);return}e(i.toJSDate().toISOString())},[i,t,e,r]);return w.jsxs(yS,{open:n,title:r("ageVerification"),className:"age-verification-modal",closable:!0,onClose:()=>e(),children:[w.jsx("p",{children:r("ageVerificationText",{minAge:t})}),w.jsxs("form",{className:"age-verification-form",onSubmit:d=>{d.preventDefault(),u()},children:[w.jsx("div",{className:"form-item",children:w.jsxs("fieldset",{name:"birthDate",children:[w.jsx("legend",{className:"sr-only",children:r("birthDate")}),w.jsx(SX,{defaultDate:new Date(Date.now()),onChange:d=>{s(d)}}),w.jsx("p",{className:"form-item-help",children:r("birthDateHelper")}),o&&w.jsx("p",{className:"form-item-error",children:o})]})}),w.jsx("div",{className:"form-item form-submit",children:w.jsx(Pt,{primary:!0,htmlType:"submit",className:"age-verification-submit",loading:l,disabled:!i,children:r("confirm")})})]})]})},xx=({label:n,className:e,disabled:t=!1,indeterminate:r=!1,checked:i,children:s,onChange:o,name:a,...l})=>{const c=D.useRef(null);return D.useEffect(()=>{c.current&&(c.current.indeterminate=r)},[c,r]),w.jsxs("label",{className:er("memori-checkbox",e,{"memori-checkbox--disabled":t,"memori-checkbox--indeterminate":r}),children:[w.jsxs("span",{className:"memori-checkbox--input-wrapper",children:[w.jsx("input",{ref:c,type:"checkbox",...l,name:a,disabled:t,checked:i||r,className:"memori-checkbox--input",onChange:o}),w.jsx("span",{className:"memori-checkbox--inner"})]}),!!(n!=null&&n.length)&&w.jsx("span",{className:"memori-checkbox--text",children:n})]})},AX=({className:n,value:e,name:t,displayValue:r,options:i,onChange:s,disabled:o=!1,label:a,placeholder:l})=>w.jsx("div",{className:er("memori-select",n),children:w.jsxs(zi,{value:e,onChange:c=>{s(c)},disabled:o,name:t,children:[a&&w.jsxs(zi.Label,{className:"memori-select--label",children:[a,":"]}),w.jsxs(zi.Button,{"aria-label":a,className:"memori-select--button",children:[w.jsx("span",{className:er("memori-select--value",{"memori-select--value-placeholder":!e}),children:e?r||e:l}),w.jsx("span",{className:"memori-select--icon",children:w.jsx(AT,{})})]}),w.jsx(Zr,{as:D.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:w.jsx(zi.Options,{className:"memori-select--options",children:i.map(c=>w.jsx(zi.Option,{value:c.value,className:"memori-select--option",children:c.label},c.value))})})]})}),T4e=[2,3,5,10,15,20,30,60],x4e=({open:n,layout:e="DEFAULT",onClose:t,microphoneMode:r="HOLD_TO_TALK",continuousSpeechTimeout:i,setMicrophoneMode:s,setContinuousSpeechTimeout:o,controlsPosition:a,setControlsPosition:l,hideEmissions:c,setHideEmissions:u,additionalSettings:d,avatarType:h,setAvatarType:f,enablePositionControls:m,setEnablePositionControls:g,isAvatar3d:v})=>{const{t:y}=ur();return w.jsxs(Sv,{className:"memori-settings-drawer",open:n,onClose:t,title:y("widget.settings")||"Settings",description:y("write_and_speak.settingsHeaderLabel"),children:[w.jsxs("div",{className:"memori-settings-drawer--field controls",children:[w.jsxs("label",{htmlFor:"#microphoneMode",children:[y("write_and_speak.microphoneMode")||"Microphone mode",":"]}),w.jsxs(Ja,{id:"microphoneMode",name:"microphoneMode",value:r,defaultValue:r,className:"memori-settings-drawer--microphoneMode-radio",onChange:A=>{let C=A==="CONTINUOUS"?"CONTINUOUS":"HOLD_TO_TALK";s(C),Ei("microphoneMode",C)},children:[w.jsx(Ja.Option,{value:"HOLD_TO_TALK",className:"memori-settings-drawer--microphoneMode-radio-button",children:({checked:A})=>w.jsx(Pt,{primary:A,outlined:!A,children:y("write_and_speak.holdToSpeak")||"Hold to speak"})}),w.jsx(Ja.Option,{value:"CONTINUOUS",className:"memori-settings-drawer--microphoneMode-radio-button",children:({checked:A})=>w.jsx(Pt,{primary:A,outlined:!A,children:y("write_and_speak.continuousSpeechLabel")||"Continuous speech"})})]})]}),r==="CONTINUOUS"&&w.jsx("div",{className:"memori-settings-drawer--field",children:w.jsx(AX,{label:y("write_and_speak.secondsLabel")||"Seconds",placeholder:y("write_and_speak.secondsLabel")||"Seconds",options:T4e.map(A=>({value:A,label:A})),value:i,onChange:A=>{o(A),Ei("continuousSpeechTimeout",A)}})}),e==="TOTEM"&&w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"memori-settings-drawer--field controls",children:[w.jsxs("label",{htmlFor:"#controlsPosition",children:[y("write_and_speak.controlsPosition")||"Controls",":"]}),w.jsxs(Ja,{id:"controlsPosition",name:"controlsPosition",value:a,defaultValue:a,className:"memori-settings-drawer--controlsposition-radio",onChange:A=>{l(A),Ei("controlsPosition",A)},children:[w.jsx(Ja.Option,{value:"center",className:"memori-settings-drawer--controlsposition-radio-button",children:({checked:A})=>w.jsx(Pt,{primary:A,outlined:!A,children:y("center")||"Center"})}),w.jsx(Ja.Option,{value:"bottom",className:"memori-settings-drawer--controlsposition-radio-button",children:({checked:A})=>w.jsx(Pt,{primary:A,outlined:!A,children:y("bottom")||"Bottom"})})]})]}),v&&w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"memori-settings-drawer--field controls",children:[w.jsxs("label",{htmlFor:"avatarType",className:"memori-settings-drawer-label",children:[y("write_and_speak.avatarType")||"Avatar type",":"]}),w.jsxs(Ja,{id:"avatarType",name:"avatarType",value:h,defaultValue:h,className:"memori-settings-drawer--avatarType-radio",onChange:A=>{f&&f(A),Ei("avatarType",A)},children:[w.jsx(Ja.Option,{value:"blob",className:"memori-settings-drawer--avatarType-radio-button",children:({checked:A})=>w.jsx(Pt,{primary:A,outlined:!A,children:y("write_and_speak.blob")||"Blob"})}),w.jsx(Ja.Option,{value:"avatar3d",className:"memori-settings-drawer--avatarType-radio-button",children:({checked:A})=>w.jsx(Pt,{primary:A,outlined:!A,children:y("write_and_speak.avatar3d")||"Avatar 3D"})})]})]}),w.jsx("div",{className:"memori-settings-drawer--field",children:w.jsx(xx,{label:y("write_and_speak.enablePositionControls")||"Enable position controls",name:"enablePositionControls",checked:m,onChange:A=>{g(A.target.checked)}})})]}),w.jsx("div",{className:"memori-settings-drawer--field",children:w.jsx(xx,{label:y("write_and_speak.hideEmissionsLabel")||"Hide emissions",name:"hideControls",checked:c,onChange:A=>{u(A.target.checked),Ei("hideEmissions",A.target.checked)}})})]}),d&&w.jsx("div",{className:"memori-settings-drawer--field controls",children:d})]})},_U=({className:n,title:e})=>w.jsx("svg",{...e?{}:{"aria-hidden":"true"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",focusable:"false",role:"img",className:n,"aria-label":e,children:w.jsx("path",{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"})}),I4e=({className:n,title:e})=>w.jsx("svg",{...e?{}:{"aria-hidden":"true"},focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",className:n,"aria-label":e,children:w.jsx("path",{d:"M15 18L9 12 15 6"})}),b4e=({className:n,title:e})=>w.jsx("svg",{...e?{}:{"aria-hidden":"true"},focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",className:n,"aria-label":e,children:w.jsx("path",{d:"M9 18L15 12 9 6"})}),M4e=({apiClient:n,sessionID:e,memori:t,visible:r=!0,initialKnownFacts:i=[],closeDrawer:s})=>{var o;const{t:a}=ur(),{getKnownFactsPaginated:l,deleteKnownFact:c}=n.knownFacts,[u,d]=D.useState(i),[h,f]=D.useState(25),[m,g]=D.useState(0),[v,y]=D.useState((o=i==null?void 0:i.length)!==null&&o!==void 0?o:0),[A,C]=D.useState(!1),T=async(z,V,$)=>{if(!(!e&&!z)){C(!0);try{const{knownFacts:B,count:q,...K}=await l(z??e,V??m,$??h);d(B??[]),y(q??0),K.resultCode!==0&&(console.error(K),kn.error(a(bs(K.resultCode))))}catch(B){console.error("KNOWN_FACTS/FETCH",B),d(i??[])}C(!1)}};D.useEffect(()=>{T()},[]);const[x,R]=D.useState(!1),[N,M]=D.useState(),[O,P]=D.useState([]);return w.jsxs(Sv,{open:r,width:"80%",className:"memori-known-facts-drawer",onClose:()=>s(),title:a("knownFacts.title"),children:[w.jsx("p",{children:a("knownFacts.description",{memoriName:t.name})}),w.jsxs(vl,{spinning:A,children:[w.jsxs("div",{className:"memori-known-facts-actions",children:[w.jsxs(Pt,{primary:!0,danger:!0,onClick:()=>{R(!0)},className:"memori-known-facts-delete-selected",disabled:(O==null?void 0:O.length)===0,icon:w.jsx(_U,{}),loading:A,children:[a("selected")," (",O==null?void 0:O.length,")"]}),w.jsx(yS,{className:"memori-known-facts-modal",open:x,closable:!0,title:O.length>1?a("knownFacts.deleteSelectedConfirmTitle"):a("knownFacts.deleteConfirmTitle"),description:O.length>1?a("knownFacts.deleteSelectedConfirmMessage",{number:O.length}):a("knownFacts.deleteConfirmMessage"),onClose:()=>{R(!1)},footer:w.jsxs(w.Fragment,{children:[w.jsx(Pt,{ghost:!0,onClick:()=>{R(!1)},children:a("cancel")}),w.jsx(Pt,{primary:!0,danger:!0,onClick:async()=>{try{const z=O.map(V=>c(e,V));Promise.all(z).then(V=>{if(V.every($=>$.resultCode===0))kn.success(a("knownFacts.deleteSuccess")),P([]),T(),R(!1);else{let $=V.find(B=>B.resultCode!==0);console.error($),($==null?void 0:$.resultCode)!==void 0&&kn.error(a(bs($==null?void 0:$.resultCode)))}})}catch(z){let V=z;kn.error(a("Error")+V.message)}},children:a("confirm")})]})})]}),v>25&&w.jsxs("nav",{className:"memori--table--pagination",children:[v>h&&w.jsxs("div",{className:"memori--table--pagination--pages",children:[w.jsx(Pt,{shape:"circle",disabled:m===0||m<h,padded:!1,title:a("previous")||"Previous",icon:w.jsx(I4e,{}),onClick:()=>{let z=(m/h-1)*h;g(z),T(void 0,z,h)}}),w.jsxs("span",{className:"memori--table--pagination--pages--current",children:[Math.ceil(m/h)+1," /"," ",Math.ceil(v/h)]}),w.jsx(Pt,{shape:"circle",padded:!1,title:a("next")||"Next",icon:w.jsx(b4e,{}),disabled:(m/h+1)*h>=v,onClick:()=>{let z=(m/h+1)*h;g(z),T(void 0,z,h)}})]}),w.jsx(AX,{options:[{label:`25 / ${a("page")||"page"}`,value:25},{label:`50 / ${a("page")||"page"}`,value:50},{label:`100 / ${a("page")||"page"}`,value:100}],value:h,displayValue:`${h} / ${a("page")||"page"}`,onChange:z=>{f(z),g(0),T(void 0,0,z)}})]}),w.jsxs("table",{className:"memori--table",children:[w.jsx("thead",{children:w.jsxs("tr",{children:[w.jsx("th",{className:"memori--table--column-centered",children:w.jsx(xx,{checked:!!(u!=null&&u.length)&&(O==null?void 0:O.length)===u.length,indeterminate:!!(u!=null&&u.length)&&!!(O!=null&&O.length)&&(O==null?void 0:O.length)!==(u==null?void 0:u.length),onChange:z=>{z.target.checked?P(u.map(V=>V.knownFactID)):P([])}})}),w.jsx("th",{children:a("knownFacts.text")}),w.jsx("th",{className:"mobile-hidden",children:a("createdAt")}),w.jsx("th",{className:"memori--table--column-right",children:a("actions")})]})}),w.jsx("tbody",{children:u.map(z=>w.jsxs("tr",{children:[w.jsx("th",{className:"memori--table--column-centered",children:w.jsx(xx,{checked:O==null?void 0:O.includes(z.knownFactID),onChange:V=>{V.target.checked?P($=>[...new Set([...$,z.knownFactID])]):P($=>$.filter(B=>B!==z.knownFactID))}})}),w.jsx("td",{children:z.text}),w.jsx("td",{className:"mobile-hidden",children:w.jsx("span",{className:"memori--table--date",children:z.creationTimestamp?new Intl.DateTimeFormat("it",{dateStyle:"short",timeStyle:"short"}).format(new Date(z.creationTimestamp)):"-"})}),w.jsx("td",{className:"memori--table--column-right",children:w.jsxs("div",{className:"memori--table--action-column",children:[w.jsx(Pt,{danger:!0,ghost:!0,shape:"circle",icon:w.jsx(_U,{}),disabled:(O==null?void 0:O.length)>0,title:a("delete")||"Delete",onClick:()=>M(z.knownFactID)}),w.jsx(yS,{className:"memori-known-facts-modal",open:N===z.knownFactID,closable:!0,title:a("knownFacts.deleteConfirmTitle"),description:a("knownFacts.deleteConfirmMessage"),onClose:()=>{M(void 0)},footer:w.jsxs(w.Fragment,{children:[w.jsx(Pt,{ghost:!0,onClick:()=>{M(void 0)},children:a("cancel")}),w.jsx(Pt,{primary:!0,danger:!0,onClick:async()=>{try{const V=await c(e,z.knownFactID);V.resultCode===0?(kn.success(a("knownFacts.deleteSuccess")),P([]),T(),M(void 0)):(console.error(V),kn.error(a(bs(V.resultCode),{ns:"common"})))}catch(V){let $=V;kn.error(a("Error")+$.message)}},children:a("confirm")})]})})]})})]},z.knownFactID))})]})]})]})},R4e=({open:n=!1,baseUrl:e,apiUrl:t,tenant:r,experts:i,onClose:s})=>{const{t:o}=ur();return w.jsx(Sv,{open:n,onClose:s,className:"memori--experts-drawer",title:w.jsx("h2",{className:"memori--experts-drawer--title",children:o("widget.expertsInTheBoard")}),children:w.jsx("ul",{className:"memori--experts-drawer--list",children:i.map(a=>w.jsxs("li",{className:"memori--experts-drawer--item",children:[w.jsx("figure",{className:"memori--experts-drawer--avatar",children:w.jsx("img",{src:`${t}/api/v1/memoriai/memori/avatar/${a.expertMemoriID}`,alt:a.name,onError:l=>{l.currentTarget.src=Pa({tenantID:r==null?void 0:r.id,type:"avatar",baseURL:e}),l.currentTarget.onerror=null}})}),w.jsxs("div",{className:"memori--experts-drawer--content",children:[w.jsx("h3",{className:"memori--experts-drawer--name",children:a.name}),w.jsx("p",{className:"memori--experts-drawer--description",children:a.description})]})]},a.expertID))})})},SU=["memori","private","public","api","404","500","it","en","account","auth","logout","privacy_and_cookie","unauthorized","users","virtual_spaces"],N4e=({tenant:n,apiClient:e,onLogin:t,goToLogin:r,__TEST__waitingForOtp:i=!1})=>{const{t:s,i18n:o}=ur(),a=o.language==="it"?"it":"en",{userSignUp:l,userConfirmSignUp:c,resendVerificationCode:u}=e.backend,[d,h]=D.useState(),[f,m]=D.useState(),[g,v]=D.useState(),[y,A]=D.useState(),C=!g||g&&AD.test(g),T=C&&g&&g.length>=24,x=!g||g.length===0,R=!C||x?0:g.length<8?15:g.length>=32?100:(g.length-8)*(50/24)+50,[N,M]=D.useState(!1),[O,P]=D.useState(!1),[z,V]=D.useState(i),[$,B]=D.useState(null),[q,K]=D.useState();D.useEffect(()=>{K(window.location.href)},[]);const se=Y=>Y.split("@")[0].replace(/[^a-zA-Z0-9]/g,""),W=async Y=>{var ae,fe,we,ge,Se,Ke,xe;Y.preventDefault();const Qe=Y.currentTarget,We=(ae=Qe.tenant.value)!==null&&ae!==void 0?ae:n.id,Ve=((fe=Qe.eMail.value)!==null&&fe!==void 0?fe:d).toLowerCase(),te=(we=Qe.userName.value)!==null&&we!==void 0?we:f,ce=Qe.password.value,de=new Date((ge=Qe.birthDate)===null||ge===void 0?void 0:ge.value).toISOString(),Pe=(Se=Qe.tnCAndPPAccepted)===null||Se===void 0?void 0:Se.checked,Te=(Ke=Qe.pAndCUAccepted)===null||Ke===void 0?void 0:Ke.checked,De=(xe=Qe.referral)===null||xe===void 0?void 0:xe.value;if(!Ve||!te||!ce||!de||!Pe){B(s("missingData"));return}if(M(!0),B(null),(new Date().getTime()-new Date(de).getTime())/1e3/60/60/24/365<14){kn.error(s("login.underage",{age:14})),B(s("login.underage",{age:14}));return}try{const{user:it,...ke}=await l({tenant:We,eMail:Ve,userName:te,password:ce,birthDate:de,tnCAndPPAccepted:Pe,tnCAndPPAcceptanceDate:new Date().toISOString(),pAndCUAccepted:Te,pAndCUAcceptanceDate:new Date().toISOString(),referral:De});ke.resultCode!==0?(console.error(ke),kn.error(s(bs(ke.resultCode)))):it&&(kn.success(s("success")),V(!0))}catch(it){let ke=it;console.error("[signup]",ke),ke!=null&&ke.message&&kn.error(ke.message)}finally{M(!1)}},ee=async Y=>{if(Y.preventDefault(),!!f){P(!0);try{const ae=await u({tenant:n==null?void 0:n.id,userName:f});ae.resultCode===0?kn.success(s("resentVerificationCode")):(console.error(ae),kn.error(s(bs(ae.resultCode))))}catch(ae){let fe=ae;console.error("[resend otp]",fe),fe!=null&&fe.message&&kn.error(fe.message)}finally{P(!1)}}},Q=async Y=>{var ae,fe,we;Y.preventDefault();const ge=Y.currentTarget,Se=(ae=ge.tenant.value)!==null&&ae!==void 0?ae:n.id,Ke=(fe=ge.userName.value)!==null&&fe!==void 0?fe:f,xe=(we=ge.password.value)!==null&&we!==void 0?we:g,Qe=ge.verificationCode.value;M(!0),B(null);try{const{user:We,token:Ve,...te}=await c({tenant:Se,userName:Ke,password:xe,verificationCode:Qe});te.resultCode!==0?(console.error(te),kn.error(s(bs(te.resultCode)))):We&&Ve&&(kn.success(s("success")),t(We,Ve))}catch(We){let Ve=We;console.error("[validate otp]",Ve),Ve!=null&&Ve.message&&kn.error(Ve.message)}finally{M(!1)}};return z?w.jsxs(w.Fragment,{children:[w.jsxs("form",{className:"memori--login-drawer--form",onSubmit:Q,children:[w.jsx("input",{type:"hidden",name:"userName",value:f}),w.jsx("input",{type:"hidden",name:"password",value:g}),w.jsx("input",{type:"hidden",name:"tenant",value:n.id}),w.jsxs("label",{htmlFor:"#verificationCode",children:[s("login.otpCode"),w.jsx("input",{id:"verificationCode",name:"verificationCode",type:"text",required:!0,autoComplete:"one-time-code",placeholder:s("login.otpCode")||"OTP"})]}),w.jsx("p",{children:w.jsx(Pt,{outlined:!0,onClick:ee,loading:O,children:s("login.resendVerificationCode")})}),w.jsx(Pt,{htmlType:"submit",primary:!0,loading:N,children:s("confirm")})]}),$&&w.jsx("p",{role:"alert",className:"memori--login-drawer--error",children:$})]}):w.jsxs(w.Fragment,{children:[w.jsxs("form",{className:"memori--login-drawer--form",onSubmit:W,children:[w.jsx("input",{type:"hidden",name:"tenant",value:n.id}),w.jsx("input",{type:"hidden",name:"referral",value:q}),w.jsxs("label",{htmlFor:"#eMail",children:[s("login.email"),w.jsx("input",{type:"email",name:"eMail",id:"eMail",required:!0,autoComplete:"email",placeholder:s("login.email")||"Email",onChange:Y=>h(Y.target.value),"aria-invalid":!!(d!=null&&d.length)&&!vS.test(d)})]}),!!(d!=null&&d.length)&&!vS.test(d)&&w.jsx("p",{className:"memori--login-drawer--inline-error",children:s("login.emailFormatError")}),w.jsxs("label",{htmlFor:"userName",children:[s("login.username"),w.jsx("input",{type:"text",name:"userName",id:"userName",required:!0,autoComplete:"username",placeholder:s("login.username")||"Username",onFocus:()=>{if(!(f!=null&&f.length)&&(d!=null&&d.length)){let Y=se(d);const ae=document.getElementById("userName");ae&&(ae.value=Y,m(Y))}},onChange:Y=>m(Y.target.value),"aria-invalid":!!(f!=null&&f.length)&&(SU.includes(f.toLowerCase())||!MF.test(f))})]}),!!(f!=null&&f.length)&&SU.includes(f.toLowerCase())&&w.jsx("p",{className:"memori--login-drawer--inline-error",children:s("login.usernameContainsReservedWord")}),!!(f!=null&&f.length)&&!MF.test(f)&&w.jsx("p",{className:"memori--login-drawer--inline-error",children:s("login.usernameFormatError")}),w.jsxs("label",{htmlFor:"#birthDate",children:[s("login.birthDate"),w.jsx("input",{id:"birthDate",name:"birthDate",type:"date",required:!0,autoComplete:"bday"})]}),w.jsx("p",{children:w.jsx("small",{children:s("login.birthDateHelper")})}),w.jsxs("label",{htmlFor:"#password",children:[s("login.password"),w.jsx("input",{id:"password",name:"password",type:"password",required:!0,autoComplete:"new-password",placeholder:s("login.password")||"Password",onChange:Y=>v(Y.target.value),"aria-invalid":!C})]}),!C&&w.jsx("p",{className:"memori--login-drawer--inline-error",children:s("login.passwordFormatError")}),w.jsxs("label",{htmlFor:"#confirm-password",children:[s("login.confirmPassword"),w.jsx("input",{id:"confirm-password",name:"confirmPassword",type:"password",required:!0,autoComplete:"new-password",placeholder:s("login.confirmPassword")||"Password",onChange:Y=>A(Y.target.value),"aria-invalid":!!(g!=null&&g.length)&&!!(y!=null&&y.length)&&g!==y})]}),!!(g!=null&&g.length)&&!!(y!=null&&y.length)&&g!==y&&w.jsx("p",{className:"memori--login-drawer--inline-error",children:s("login.passwordMatchingError")}),w.jsx("meter",{className:"memori--login-drawer--password-meter",min:0,low:33,high:66,optimum:80,max:100,value:R,id:"password-strength-meter"}),w.jsx("small",{children:s(`login.pwd${T?"Strong":C?"Acceptable":"Weak"}`)}),w.jsxs("label",{className:"memori-checkbox",children:[w.jsxs("span",{className:"memori-checkbox--input-wrapper",children:[w.jsx("input",{type:"checkbox",name:"tnCAndPPAccepted",required:!0,className:"memori-checkbox--input"}),w.jsx("span",{className:"memori-checkbox--inner"})]}),w.jsxs("span",{className:"memori-checkbox--text",children:[s("login.privacyLabel")," ",w.jsx("a",{href:`https://memori.ai/${a}/privacy_and_cookie`,target:"_blank",rel:"noopener noreferrer",children:s("login.privacyAndCookiePolicy")})," ",s("login.and")," ",w.jsx("a",{href:`https://memori.ai/${a}/tos`,target:"_blank",rel:"noopener noreferrer",children:s("login.termsOfService")})]})]}),w.jsxs("label",{className:"memori-checkbox",children:[w.jsxs("span",{className:"memori-checkbox--input-wrapper",children:[w.jsx("input",{type:"checkbox",name:"pAndCUAccepted",className:"memori-checkbox--input"}),w.jsx("span",{className:"memori-checkbox--inner"})]}),w.jsxs("span",{className:"memori-checkbox--text",children:[s("login.pAndCUAccepted")," ",w.jsx("small",{children:w.jsxs("em",{children:["(",s("login.optional"),")"]})})]})]}),w.jsx("p",{children:w.jsx("small",{children:s("login.deepThoughtExplaination")})}),w.jsx(Pt,{htmlType:"submit",primary:!0,loading:N,children:s("login.signUp")}),w.jsxs("p",{className:"memori--login-drawer--signup",children:[s("login.alreadyHaveAnAccount")," ",w.jsx(Pt,{outlined:!0,onClick:r,children:s("login.backToLogin")})]})]}),$&&w.jsx("p",{role:"alert",className:"memori--login-drawer--error",children:$})]})},P4e=["image/jpeg","image/png","image/jpg","image/gif"],O4e=({user:n,loginToken:e,apiClient:t,onUserUpdate:r})=>{const{t:i,i18n:s}=ur(),o=s.language==="it"?"it":"en",{updateUser:a,uploadAsset:l}=t.backend,[c,u]=D.useState(),[d,h]=D.useState(),[f,m]=D.useState(),g=!d||d&&AD.test(d),v=g&&d&&d.length>=24,y=!d||d.length===0,A=!g||y?0:d.length<8?15:d.length>=32?100:(d.length-8)*(50/24)+50,[C,T]=D.useState(!1),[x,R]=D.useState(null),N=async(O,P)=>{try{const{user:z,...V}=await a(e,O,P);V.resultCode!==0?(console.error(V),kn.error(i(bs(V.resultCode)))):z&&(kn.success(i("success")),r(z))}catch(z){let V=z;console.error("[signup]",V),V!=null&&V.message&&kn.error(V.message)}finally{T(!1)}},M=async O=>{var P,z,V,$,B;if(O.preventDefault(),!n.userID)return;const q=n.userID,K=O.currentTarget,se=(P=K.eMail.value)!==null&&P!==void 0?P:c,W=(z=K.newPassword.value)!==null&&z!==void 0?z:d,ee=K.password.value,Q=K.confirmPassword.value,Y=(V=K.pAndCUAccepted)===null||V===void 0?void 0:V.checked,ae=(B=($=K.avatar)===null||$===void 0?void 0:$.files)===null||B===void 0?void 0:B[0];if(T(!0),R(null),W!=null&&W.length&&W!==Q){R(i("login.passwordMatchingError")),T(!1);return}let fe={...se!=null&&se.length&&se!==n.eMail?{eMail:se}:{},...W?{password:ee,newPassword:W}:{},...Y!==void 0&&Y!==n.pAndCUAccepted?{pAndCUAccepted:Y,pAndCUAcceptanceDate:new Date().toISOString()}:{}};if(Object.values(fe).length===0&&!ae){console.debug("No changes to submit"),T(!1);return}if(ae){const we=new FileReader;we.onload=async ge=>{var Se,Ke;try{const{asset:xe,...Qe}=await l((Se=ae.name)!==null&&Se!==void 0?Se:"avatar",(Ke=ge.target)===null||Ke===void 0?void 0:Ke.result,e);Qe.resultCode!==0?(console.error(Qe),kn.error(i(bs(Qe.resultCode)))):xe&&(fe.avatarURL=xe.assetURL,await N(q,fe))}catch(xe){let Qe=xe;console.error("[avatar upload]",Qe),Qe!=null&&Qe.message&&kn.error(Qe.message)}},we.readAsDataURL(ae)}else await N(q,fe)};return w.jsxs(w.Fragment,{children:[w.jsx("h3",{className:"memori--login-drawer--edit-account-title",children:i("login.editAccount")}),w.jsxs("form",{className:"memori--login-drawer--form memori--login-drawer--account-form",onSubmit:M,children:[w.jsxs("details",{className:"memori--details",children:[w.jsx("summary",{children:i("login.emailChange")}),w.jsxs("label",{htmlFor:"#eMail",children:[i("login.email"),w.jsx("input",{type:"email",name:"eMail",id:"eMail",autoComplete:"email",placeholder:n.eMail,onChange:O=>u(O.target.value),"aria-invalid":!!(c!=null&&c.length)&&!vS.test(c)})]}),!!(c!=null&&c.length)&&!vS.test(c)&&w.jsx("p",{className:"memori--login-drawer--inline-error",children:i("login.emailFormatError")})]}),w.jsxs("details",{className:"memori--details",children:[w.jsx("summary",{children:i("login.passwordChange")}),w.jsxs("label",{htmlFor:"#password",children:[i("login.currentPassword"),w.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"password",placeholder:i("login.currentPassword")||"Password"})]}),w.jsxs("label",{htmlFor:"#newPassword",children:[i("login.newPassword"),w.jsx("input",{id:"newPassword",name:"newPassword",type:"password",autoComplete:"new-password",placeholder:i("login.password")||"Password",onChange:O=>h(O.target.value),"aria-invalid":!g})]}),!g&&w.jsx("p",{className:"memori--login-drawer--inline-error",children:i("login.passwordFormatError")}),w.jsxs("label",{htmlFor:"#confirm-password",children:[i("login.confirmPassword"),w.jsx("input",{id:"confirm-password",name:"confirmPassword",type:"password",autoComplete:"new-password",placeholder:i("login.confirmPassword")||"Password",onChange:O=>m(O.target.value),"aria-invalid":!!(d!=null&&d.length)&&!!(f!=null&&f.length)&&d!==f})]}),!!(d!=null&&d.length)&&!!(f!=null&&f.length)&&d!==f&&w.jsx("p",{className:"memori--login-drawer--inline-error",children:i("login.passwordMatchingError")}),w.jsx("meter",{className:"memori--login-drawer--password-meter",min:0,low:33,high:66,optimum:80,max:100,value:A,id:"password-strength-meter"}),w.jsx("small",{children:i(`login.pwd${v?"Strong":g?"Acceptable":"Weak"}`)})]}),w.jsxs("details",{className:"memori--details",children:[w.jsx("summary",{children:i("login.avatarChange")}),w.jsxs("label",{htmlFor:"#avatar",children:["Avatar",w.jsx("input",{type:"file",name:"avatar",id:"avatar",accept:P4e.join(", "),placeholder:n.avatarURL})]})]}),w.jsxs("label",{className:"memori-checkbox memori-checkbox--disabled",children:[w.jsxs("span",{className:"memori-checkbox--input-wrapper",children:[w.jsx("input",{type:"checkbox",name:"tnCAndPPAccepted",disabled:!0,defaultChecked:n.tnCAndPPAccepted,checked:n.tnCAndPPAccepted,className:"memori-checkbox--input"}),w.jsx("span",{className:"memori-checkbox--inner"})]}),w.jsxs("span",{className:"memori-checkbox--text",children:[i("login.privacyLabel")," ",w.jsx("a",{href:`https://memori.ai/${o}/privacy_and_cookie`,target:"_blank",rel:"noopener noreferrer",children:i("login.privacyAndCookiePolicy")})," ",i("login.and")," ",w.jsx("a",{href:`https://memori.ai/${o}/tos`,target:"_blank",rel:"noopener noreferrer",children:i("login.termsOfService")})]})]}),w.jsxs("label",{className:"memori-checkbox",children:[w.jsxs("span",{className:"memori-checkbox--input-wrapper",children:[w.jsx("input",{type:"checkbox",name:"pAndCUAccepted",className:"memori-checkbox--input",defaultChecked:n.pAndCUAccepted}),w.jsx("span",{className:"memori-checkbox--inner"})]}),w.jsx(ql,{align:"left",content:i("login.deepThoughtExplaination"),children:w.jsxs("span",{className:"memori-checkbox--text",children:[i("login.pAndCUAccepted")," ",w.jsx("small",{children:w.jsxs("em",{children:["(",i("login.optional"),")"]})})]})})]}),w.jsx(Pt,{htmlType:"submit",primary:!0,loading:C,children:i("login.save")})]}),x&&w.jsx("p",{role:"alert",className:"memori--login-drawer--error",children:x})]})},D4e=({open:n=!1,onClose:e,onLogin:t,onLogout:r,user:i,loginToken:s,tenant:o,apiClient:a,__TEST__signup:l=!1,__TEST__needMissingData:c=!1,__TEST__waitingForOtp:u=!1,__TEST__changePwd:d=!1})=>{var h,f;const{t:m,i18n:g}=ur(),v=g.language==="it"?"it":"en",{userLogin:y,updateUser:A}=a.backend,C=(i==null?void 0:i.userID)&&s,[T,x]=D.useState(!1),[R,N]=D.useState(null),[M,O]=D.useState(l),[P,z]=D.useState(d?{flowID:"flowID",tenant:o.id,eMail:"email",userName:"username",password:"password"}:void 0),[V,$]=D.useState(c?{token:"token",birthDate:!0,tnCAndPPAccepted:!0}:{}),B=ge=>{ge.preventDefault();const Se=ge.currentTarget,Ke=Se.userNameOrEmail.value,xe=Se.password.value,Qe=vS.test(Ke),We=Qe?{tenant:o==null?void 0:o.id,eMail:Ke,password:xe}:{tenant:o==null?void 0:o.id,userName:Ke,password:xe};x(!0),N(null),y(We).then(Ve=>{var te,ce,de,Pe,Te;Ve.resultCode===-14?z({tenant:o.id,eMail:Qe?Ke:void 0,userName:Qe?void 0:Ke,password:xe,flowID:Ve.flowID||((te=Ve.user)===null||te===void 0?void 0:te.flowID)}):Ve.resultCode!==0?(console.error(Ve),kn.error(m(bs(Ve.resultCode))),N(Ve.resultMessage)):Ve.user&&Ve.token&&(!(!((ce=Ve.user)===null||ce===void 0)&&ce.tnCAndPPAccepted)||!(!((de=Ve.user)===null||de===void 0)&&de.birthDate)?$({token:Ve.token,birthDate:!(!((Pe=Ve.user)===null||Pe===void 0)&&Pe.birthDate),tnCAndPPAccepted:!(!((Te=Ve.user)===null||Te===void 0)&&Te.tnCAndPPAccepted)}):t(Ve.user,Ve.token))}).catch(Ve=>{console.error("[LOGIN]",Ve),Ve.message&&(kn.error(Ve.message),N(Ve.message))}).finally(()=>{x(!1)})},q=async ge=>{var Se,Ke,xe;ge.preventDefault();const Qe=ge.currentTarget,We=(Se=Qe.birthDate)===null||Se===void 0?void 0:Se.value,Ve=(Ke=Qe.tnCAndPPAccepted)===null||Ke===void 0?void 0:Ke.checked,te=(xe=Qe.pAndCUAccepted)===null||xe===void 0?void 0:xe.checked;if(!(i!=null&&i.userID)||!(V!=null&&V.token))return;if(!We||!Ve){N(m("missingData"));return}let ce={userID:i.userID,birthDate:i!=null&&i.birthDate||!V.birthDate?void 0:We,tnCAndPPAccepted:Ve||(i==null?void 0:i.tnCAndPPAccepted),tnCAndPPAcceptanceDate:Ve?new Date().toISOString():void 0,pAndCUAccepted:te||(i==null?void 0:i.pAndCUAccepted),pAndCUAcceptanceDate:te?new Date().toISOString():void 0};const{user:de,...Pe}=await A(V.token,i.userID,ce);Pe.resultCode!==0?(console.error(Pe),kn.error(m(bs(Pe.resultCode))),N(Pe.resultMessage)):(kn.success(m("success")),t(de||ce,V.token))},[K,se]=D.useState(),[W,ee]=D.useState(),Q=!K||K&&AD.test(K),Y=Q&&K&&K.length>=24,ae=!K||K.length===0,fe=!Q||ae?0:K.length<8?15:K.length>=32?100:(K.length-8)*(50/24)+50,we=async ge=>{var Se,Ke,xe,Qe,We;ge.preventDefault();const Ve=ge.currentTarget,te=(Se=Ve.tenant.value)!==null&&Se!==void 0?Se:o.id,ce=(Ke=Ve.flowID.value)!==null&&Ke!==void 0?Ke:P==null?void 0:P.flowID,de=(xe=Ve.eMail.value)!==null&&xe!==void 0?xe:P==null?void 0:P.eMail,Pe=(Qe=Ve.userName.value)!==null&&Qe!==void 0?Qe:P==null?void 0:P.userName,Te=(We=Ve.password.value)!==null&&We!==void 0?We:P==null?void 0:P.password,De=Ve.newPassword.value;if(!(De!=null&&De.length)||!Q){N(m("login.passwordFormatError"));return}x(!0);const Ge={tenant:te,flowID:ce,eMail:de,userName:Pe,password:Te,newPassword:De};try{const{user:it,token:ke,...ct}=await y(Ge);ct.resultCode!==0?(console.error(ct),kn.error(m(bs(ct.resultCode))),N(ct.resultMessage)):it&&ke&&(kn.success(m("success")),t(it||Ge,ke))}catch(it){let ke=it;console.error("[LOGIN/CHANGE PWD]",ke),ke.message&&(kn.error(ke.message),N(ke.message))}finally{x(!1)}};return w.jsx(Sv,{open:n,onClose:e,className:er("memori--login-drawer",{"memori--login-drawer--logged":C,"memori--login-drawer--signup":M}),title:w.jsx("span",{className:"memori--login-drawer--title",children:C?m("login.loggedDrawerTitle",{name:i.userName}):m(M?"login.signupDrawerTitle":"login.loginDrawerTitle")}),children:C?w.jsxs("div",{className:"memori--login-drawer--logged",children:[i.avatarURL&&w.jsx("figure",{className:"memori--login-drawer--avatar",children:w.jsx("img",{src:i.avatarURL,alt:i.userName})}),w.jsx(Pt,{primary:!0,onClick:()=>{r()},children:m("login.logout")}),w.jsx(O4e,{user:i,loginToken:s,apiClient:a,onUserUpdate:ge=>t(ge,s)})]}):!((h=V==null?void 0:V.token)===null||h===void 0)&&h.length?w.jsxs(w.Fragment,{children:[w.jsx("h3",{children:m("login.missingData")}),w.jsx("p",{children:m("login.missingDataHelper")}),w.jsxs("form",{className:"memori--login-drawer--form",onSubmit:q,children:[V.birthDate&&w.jsxs(w.Fragment,{children:[w.jsxs("label",{htmlFor:"#birthDate",children:[m("login.birthDate"),w.jsx("input",{id:"birthDate",name:"birthDate",type:"date",required:!0,autoComplete:"bday"})]}),w.jsx("p",{children:w.jsx("small",{children:m("login.birthDateHelper")})})]}),(V==null?void 0:V.tnCAndPPAccepted)&&w.jsxs(w.Fragment,{children:[w.jsxs("label",{className:"memori-checkbox",children:[w.jsxs("span",{className:"memori-checkbox--input-wrapper",children:[w.jsx("input",{type:"checkbox",name:"tnCAndPPAccepted",className:"memori-checkbox--input"}),w.jsx("span",{className:"memori-checkbox--inner"})]}),w.jsxs("span",{className:"memori-checkbox--text",children:[m("login.privacyLabel")," ",w.jsx("a",{href:`https://memori.ai/${v}/privacy_and_cookie`,target:"_blank",rel:"noopener noreferrer",children:m("login.privacyAndCookiePolicy")})," ",m("login.and")," ",w.jsx("a",{href:`https://memori.ai/${v}/tos`,target:"_blank",rel:"noopener noreferrer",children:m("login.termsOfService")})]})]}),w.jsxs("label",{className:"memori-checkbox",children:[w.jsxs("span",{className:"memori-checkbox--input-wrapper",children:[w.jsx("input",{type:"checkbox",name:"pAndCUAccepted",defaultChecked:i==null?void 0:i.pAndCUAccepted,className:"memori-checkbox--input"}),w.jsx("span",{className:"memori-checkbox--inner"})]}),w.jsxs("span",{className:"memori-checkbox--text",children:[m("login.pAndCUAccepted")," ",w.jsx("small",{children:w.jsxs("em",{children:["(",m("login.optional"),")"]})})]})]}),w.jsx("p",{children:w.jsx("small",{children:m("login.goToAccountToChangeYourPreferences")})}),w.jsx("p",{children:w.jsx("small",{children:m("login.deepThoughtExplaination")})})]}),w.jsx(Pt,{htmlType:"submit",primary:!0,loading:T,children:m("login.save")})]})]}):P!=null&&P.flowID?w.jsxs(w.Fragment,{children:[w.jsx("p",{children:m("login.mustChangePassword")}),w.jsxs("form",{className:"memori--login-drawer--form",onSubmit:we,children:[w.jsx("input",{type:"hidden",name:"tenant",value:(f=P.tenant)!==null&&f!==void 0?f:o==null?void 0:o.id}),w.jsx("input",{type:"hidden",name:"flowID",value:P.flowID}),w.jsx("input",{type:"hidden",name:"eMail",value:P.eMail}),w.jsx("input",{type:"hidden",name:"userName",value:P.userName}),w.jsx("input",{type:"hidden",name:"password",value:P.password}),w.jsxs("label",{htmlFor:"#newPassword",children:[m("login.password"),w.jsx("input",{id:"newPassword",name:"newPassword",type:"password",required:!0,autoComplete:"new-password",placeholder:m("login.password")||"Password",onChange:ge=>se(ge.target.value),"aria-invalid":!Q})]}),!Q&&w.jsx("p",{className:"memori--login-drawer--inline-error",children:m("login.passwordFormatError")}),w.jsxs("label",{htmlFor:"#confirm-password",children:[m("login.confirmPassword"),w.jsx("input",{id:"confirm-password",name:"confirmPassword",type:"password",required:!0,autoComplete:"new-password",placeholder:m("login.confirmPassword")||"Password",onChange:ge=>ee(ge.target.value),"aria-invalid":!!(K!=null&&K.length)&&!!(W!=null&&W.length)&&K!==W})]}),!!(K!=null&&K.length)&&!!(W!=null&&W.length)&&K!==W&&w.jsx("p",{className:"memori--login-drawer--inline-error",children:m("login.passwordMatchingError")}),w.jsx("meter",{className:"memori--login-drawer--password-meter",min:0,low:33,high:66,optimum:80,max:100,value:fe,id:"password-strength-meter"}),w.jsx("small",{children:m(`login.pwd${Y?"Strong":Q?"Acceptable":"Weak"}`)}),w.jsx(Pt,{htmlType:"submit",primary:!0,loading:T,children:m("confirm")})]})]}):M?w.jsx(N4e,{tenant:o,apiClient:a,onLogin:t,goToLogin:()=>O(!1),__TEST__waitingForOtp:u}):w.jsxs(w.Fragment,{children:[w.jsxs("form",{className:"memori--login-drawer--form",onSubmit:B,children:[w.jsxs("label",{htmlFor:"#userNameOrEmail",children:[m("login.userNameOrEmail"),w.jsx("input",{id:"userNameOrEmail",name:"userNameOrEmail",required:!0,autoComplete:"email",placeholder:"Username/email"})]}),w.jsxs("label",{htmlFor:"#password",children:["Password",w.jsx("input",{id:"password",name:"password",type:"password",required:!0,autoComplete:"password",placeholder:"Password"})]}),w.jsx(Pt,{htmlType:"submit",primary:!0,loading:T,children:m("login.login")}),o!=null&&o.disableRegistration?o.adminEmail?w.jsxs("div",{className:"memori--login-drawer--signup",children:[w.jsx("p",{children:m("login.registrationDisabled")}),w.jsxs("p",{children:[m("login.contactAdmin"),":"," ",w.jsx("a",{href:`mailto:${o.adminEmail}`,children:o.adminEmail})]})]}):null:w.jsxs("p",{className:"memori--login-drawer--signup",children:[m("login.newUserSignUp")," ",w.jsx(Pt,{outlined:!0,onClick:()=>O(!0),children:m("login.signUp")})]})]}),R&&w.jsx("p",{role:"alert",className:"memori--login-drawer--error",children:R})]})})},AU=({Header:n,headerProps:e,Avatar:t,avatarProps:r,Chat:i,chatProps:s,StartPanel:o,startPanelProps:a,integrationStyle:l,integrationBackground:c,ChangeMode:u,changeModeProps:d,sessionId:h,hasUserActivatedSpeak:f,showInstruct:m=!1,loading:g=!1,poweredBy:v})=>w.jsxs(w.Fragment,{children:[l,c,w.jsxs(vl,{spinning:g,children:[m&&u&&d&&w.jsx(u,{...d}),n&&e&&w.jsx(n,{...e}),w.jsxs("div",{className:"memori--grid",children:[w.jsxs("div",{className:"memori--grid-column memori--grid-column-left",children:[t&&r&&w.jsx(t,{...r}),w.jsx("div",{id:"extension"})]}),w.jsx("div",{className:"memori--grid-column memori--grid-column-right",children:h&&f&&i&&s?w.jsx(i,{...s}):a?w.jsx(o,{...a}):null}),v]})]})]}),L4e=({Header:n,headerProps:e,Avatar:t,avatarProps:r,Chat:i,chatProps:s,StartPanel:o,startPanelProps:a,integrationStyle:l,integrationBackground:c,ChangeMode:u,changeModeProps:d,sessionId:h,hasUserActivatedSpeak:f,showInstruct:m=!1,loading:g=!1,poweredBy:v})=>w.jsxs(w.Fragment,{children:[l,c,w.jsxs(vl,{spinning:g,className:"memori-totem-layout",children:[v,m&&u&&d&&w.jsx(u,{...d}),w.jsx("div",{className:"memori-totem-layout--header",children:n&&e&&w.jsx(n,{...e})}),w.jsx("div",{className:"memori-totem-layout--avatar",children:t&&r&&w.jsx(t,{...r,isTotem:!0})}),w.jsx("div",{id:"extension"}),w.jsx("div",{className:"memori-totem-layout--controls",children:h&&f&&i&&s?w.jsx(i,{...s}):a?w.jsx(o,{...a}):null})]})]}),k4e=({Header:n,headerProps:e,Chat:t,chatProps:r,StartPanel:i,startPanelProps:s,integrationStyle:o,integrationBackground:a,ChangeMode:l,changeModeProps:c,sessionId:u,hasUserActivatedSpeak:d,showInstruct:h=!1,loading:f=!1,poweredBy:m})=>w.jsxs(w.Fragment,{children:[o,a,w.jsxs(vl,{spinning:f,className:"memori-chat-layout",children:[m,h&&l&&c&&w.jsx(l,{...c}),w.jsx("div",{className:"memori-chat-layout--header",children:n&&e&&w.jsx(n,{...e})}),w.jsx("div",{id:"extension"}),w.jsx("div",{className:"memori-chat-layout--controls",children:u&&d&&t&&r?w.jsx(t,{...r}):s?w.jsx(i,{...s}):null})]})]}),B4e=({Header:n,headerProps:e,Avatar:t,avatarProps:r,Chat:i,chatProps:s,StartPanel:o,startPanelProps:a,integrationStyle:l,ChangeMode:c,changeModeProps:u,sessionId:d,hasUserActivatedSpeak:h,showInstruct:f=!1,loading:m=!1,poweredBy:g})=>{var v,y;const{t:A}=ur(),[C,T]=D.useState(!0),[x,R]=D.useState(),N=D.useMemo(()=>s==null?void 0:s.stopAudio,[s==null?void 0:s.stopAudio]),M=O=>{T(O),R(O?void 0:new Date().toISOString());try{N==null||N()}catch(P){console.log(P)}};return w.jsx("div",{className:`memori-website_assistant--${C?"collapsed":"expanded"}`,children:C?w.jsx("div",{className:"memori-website_assistant--trigger",children:w.jsx(Pt,{className:"memori-website_assistant--trigger-button",ghost:!0,shape:"circle",onClick:()=>M(!1),title:A("expand")||"Expand",children:w.jsx(eP,{avatar:r==null?void 0:r.memori.avatarURL})})}):w.jsxs(w.Fragment,{children:[l,w.jsxs(vl,{spinning:m,className:"memori-website_assistant-layout",children:[g,w.jsx("div",{className:"memori-website_assistant--close-button-wrapper",children:w.jsx(Pt,{className:"memori-website_assistant--close-button",primary:!0,shape:"circle",onClick:()=>M(!0),icon:w.jsx(pA,{}),title:A("close")||"Close"})}),f&&c&&u&&w.jsx(c,{...u}),w.jsx("div",{className:"memori-website_assistant-layout--header",children:n&&e&&w.jsx(n,{...e,showSettings:!1,showReload:!1})}),w.jsx("div",{className:"memori-website_assistant-layout--avatar",children:t&&r&&D.createElement(t,{...r,integrationConfig:r.integrationConfig?{...r.integrationConfig,avatarURL:!((v=r.integrationConfig)===null||v===void 0)&&v.avatarURL?`${(y=r.integrationConfig)===null||y===void 0?void 0:y.avatarURL.split("#")[0]}#${x}`:void 0}:{},key:x})}),w.jsx("div",{id:"extension"}),w.jsx("div",{className:"memori-website_assistant-layout--controls",children:d&&h&&i&&s?w.jsx(i,{...s}):a?w.jsx(o,{...a}):null})]})]})})},F4e=async({operation:n="session_creation",baseUrl:e,userID:t,userName:r,tenant:i})=>{if(!t&&!r)throw new Error("Either userID or userName must be provided");const s=await fetch(`${e}/api/verify-tokens`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({operation:n,userID:t,userName:r,tenant:i})});if(!s.ok)throw new Error("Failed to fetch credits");return s.json()},z4e=({Header:n,headerProps:e,Chat:t,chatProps:r,startPanelProps:i,sessionId:s,hasUserActivatedSpeak:o})=>{const{t:a}=ur(),[l,c]=D.useState(!1),u=()=>{try{window.speechSynthesis.speak(new SpeechSynthesisUtterance(""))}catch(h){console.error(h)}i&&(i!=null&&i.initializeTTS)&&(i==null||i.initializeTTS()),i&&(i!=null&&i.onClickStart)&&(i==null||i.onClickStart())};D.useEffect(()=>{const h=document.body;h&&(l?(h.style.width="calc(100% - 350px)",h.style.marginRight="300px",h.style.transition="all 0.5s"):(h.style.width="100%",h.style.marginLeft="0"))},[l]);const d=()=>{c(!l),u()};return w.jsxs(w.Fragment,{children:[w.jsx("input",{type:"checkbox",id:"memori-sidebar-toggle",className:"memori-sidebar-toggle",checked:l,onChange:d}),w.jsxs("div",{className:"memori-sidebar-container",children:[w.jsx("label",{htmlFor:"memori-sidebar-toggle",className:"memori-sidebar-toggle-label memori-open-label",children:w.jsx(PK,{className:"memori-icon","aria-label":a("expand")})}),w.jsxs("aside",{className:"memori-sidebar",children:[w.jsx("label",{htmlFor:"memori-sidebar-toggle",className:"memori-sidebar-toggle-label memori-close-label",children:w.jsx("span",{children:w.jsx(pA,{className:"memori-icon-close","aria-label":a("collapse")})})}),w.jsx("div",{className:"memori-sidebar-content",children:w.jsx("div",{className:"memori-hidden-chat-layout--header",children:n&&e&&w.jsx(n,{position:{latitude:0,longitude:0,placeName:""},...e,className:"memori-hidden-chat-layout-header--layout"})})}),w.jsx("div",{id:"extension"}),w.jsx("div",{className:"memori-hidden-chat-layout--controls",children:s&&o&&t&&r?w.jsx(t,{...r}):w.jsx("div",{className:"memori-loading",children:w.jsx(vl,{})})})]})]})]})},U4e=({Header:n,headerProps:e,Avatar:t,avatarProps:r,Chat:i,chatProps:s,StartPanel:o,startPanelProps:a,integrationStyle:l,integrationBackground:c,ChangeMode:u,changeModeProps:d,sessionId:h,hasUserActivatedSpeak:f,showInstruct:m=!1,loading:g=!1,poweredBy:v})=>(D.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}),[]),w.jsxs(w.Fragment,{children:[l,c,w.jsxs(vl,{className:"memori-spin--zoomed-full-body",spinning:g,children:[m&&u&&d&&w.jsx(u,{...d}),n&&e&&w.jsx(n,{...e}),w.jsxs("div",{className:"memori--grid",children:[w.jsxs("div",{className:"memori--grid-column memori--grid-column-left",children:[t&&r&&w.jsx(t,{chatProps:s,isZoomed:!0,...r}),w.jsx("div",{id:"extension"})]}),w.jsx("div",{className:"memori--grid-column memori--grid-column--zoomed-full-body memori--grid-column-right",children:h&&f&&i&&s?w.jsx(i,{...s}):a?w.jsx(o,{...a}):null}),w.jsx("div",{className:"memori--powered-by-custom",children:v})]})]})]})),j4e=n=>{var e,t,r,i,s;let o=n?document.querySelector(`.memori-widget[data-memori-integration="${n}"]`)||((t=(e=document.querySelector("memori-client"))===null||e===void 0?void 0:e.shadowRoot)===null||t===void 0?void 0:t.querySelector(".memori-widget[data-memori-integration]")):document.querySelector(".memori-widget")||((i=(r=document.querySelector("memori-client"))===null||r===void 0?void 0:r.shadowRoot)===null||i===void 0?void 0:i.querySelector(".memori-widget"));if(!o)return null;let a=(s=o.dataset)===null||s===void 0?void 0:s.memoriEngineState;return a?JSON.parse(a):null},a5=(n,e=!0,t=!1,r,i=!1,s=!1)=>{const o=new CustomEvent("MemoriTextEntered",{detail:{text:n,waitForPrevious:e,hidden:t,typingText:r,useLoaderTextAsMsg:i,hasBatchQueued:s}});document.dispatchEvent(o),window.navigator.userAgent.includes("Safari")&&!window.navigator.userAgent.includes("Chrome")&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&setTimeout(()=>{document.dispatchEvent(new CustomEvent("MemoriEndSpeak"))},300)},G4e=(n,e=!0,t,r=!1,i=!1)=>a5(n,e,!0,t,r,i),H4e=n=>{function e(){var a,l,c,u;(a=document.querySelector("fieldset#chat-fieldset"))===null||a===void 0||a.setAttribute("disabled","");const d="opacity: 0.5; touch-action: none; pointer-events: none;";(l=document.querySelector("textarea.memori-chat-textarea--input"))===null||l===void 0||l.setAttribute("style",d),(c=document.querySelector("button.memori-chat-inputs--send"))===null||c===void 0||c.setAttribute("style",d),(u=document.querySelector("button.memori-chat-inputs--mic"))===null||u===void 0||u.setAttribute("style",d)}function t(){var a,l,c,u;(a=document.querySelector("fieldset#chat-fieldset"))===null||a===void 0||a.removeAttribute("disabled"),(l=document.querySelector("textarea.memori-chat-textarea--input"))===null||l===void 0||l.removeAttribute("style"),(c=document.querySelector("button.memori-chat-inputs--send"))===null||c===void 0||c.removeAttribute("style"),(u=document.querySelector("button.memori-chat-inputs--mic"))===null||u===void 0||u.removeAttribute("style")}function r(){var a;return!!(!((a=document.querySelector("fieldset#chat-fieldset"))===null||a===void 0)&&a.hasAttribute("disabled"))}const i=window.navigator.userAgent.includes("Safari")&&!window.navigator.userAgent.includes("Chrome")&&/iPad|iPhone|iPod/.test(navigator.userAgent),s=function*(){yield*n}();e();const o=()=>{const a=s.next(),l=a.value;if(l){r()||e();let c=l.waitForPrevious;i&&(c=!1),a5(l.message,c,l.hidden,l.typingText,l.useLoaderTextAsMsg,!a.done),i&&setTimeout(()=>{document.dispatchEvent(new CustomEvent("MemoriEndSpeak")),t()},3e3)}else r()&&t();if(a.done){document.removeEventListener("MemoriEndSpeak",o),r()&&t();return}};document.addEventListener("MemoriEndSpeak",o),o()};window.getMemoriState=j4e;window.typeMessage=a5;window.typeMessageHidden=G4e;window.typeBatchMessages=H4e;let Sd,ba,hs,yu,Cr,EU,n_=!1,Ad=!1,Bs;const V4e=({memori:n,memoriConfigs:e,ownerUserID:t,ownerUserName:r,tenantID:i,memoriLang:s,multilingual:o,integration:a,layout:l="DEFAULT",customLayout:c,showInstruct:u=!1,showShare:d,preview:h=!1,embed:f=!1,showCopyButton:m=!0,showTranslationOriginal:g=!1,showInputs:v=!0,showDates:y=!1,showContextPerLine:A=!1,showSettings:C=!0,showTypingText:T=!1,showClear:x=!1,showLogin:R=!1,showOnlyLastMessages:N,height:M="100vh",secret:O,baseUrl:P="https://aisuru.com",apiURL:z="https://backend.memori.ai",engineURL:V="https://engine.memori.ai",initialContextVars:$,initialQuestion:B,ogImage:q,sessionID:K,tenant:se,personification:W,authToken:ee,AZURE_COGNITIVE_SERVICES_TTS_KEY:Q,enableAudio:Y,defaultSpeakerActive:ae=!0,disableTextEnteredEvents:fe=!1,onStateChange:we,additionalInfo:ge,additionalSettings:Se,customMediaRenderer:Ke,userAvatar:xe,useMathFormatting:Qe=!1})=>{var We,Ve,te,ce,de,Pe,Te,De,Ge,it,ke,ct,oe,ne,Oe,st,Je,ft,zt,je,Bt,Ct,wt,xt,qt,cn;const{t:Ae,i18n:ue}=ur(),[et,Be]=D.useState(!1);D.useEffect(()=>{Be(!0)},[]);const lt=qx(z,V),{initSession:St,postTextEnteredEvent:nn,postPlaceChangedEvent:Dr,postDateChangedEvent:mr,postTimeoutEvent:wn,postTagChangedEvent:yn,getSession:jr,getExpertReferences:Mr,getSessionChatLogs:Wi}=lt,[nr,ma]=D.useState(!1),[_l,qi]=D.useState(!0),[Yn,re]=D.useState((We=ge==null?void 0:ge.loginToken)!==null&&We!==void 0?We:ee),[Re,qe]=D.useState({avatarURL:typeof xe=="string"?xe:void 0});D.useEffect(()=>{Yn&&!(Re!=null&&Re.userID)&&R&&lt.backend.getCurrentUser(Yn).then(({user:_e,resultCode:He})=>{_e&&He===0?(qe(_e),Ei("loginToken",Yn),!_i&&_e.birthDate&&(su(_e.birthDate),Ei("birthDate",_e.birthDate))):mR("loginToken")})},[Yn,Re==null?void 0:Re.userID]);const[Le,$e]=D.useState(!1),[Qt,Jt]=D.useState(!1),[ln,Xt]=D.useState(!1),Sn=((ce=(te=(Ve=n.culture)===null||Ve===void 0?void 0:Ve.split("-"))===null||te===void 0?void 0:te[0])===null||ce===void 0?void 0:ce.toUpperCase())||((De=(Te=(Pe=(de=e==null?void 0:e.find(_e=>_e.memoriConfigID===n.memoriConfigurationID))===null||de===void 0?void 0:de.culture)===null||Pe===void 0?void 0:Pe.split("-"))===null||Te===void 0?void 0:Te[0])===null||De===void 0?void 0:De.toUpperCase()),Ie=a!=null&&a.customData?JSON.parse(a.customData):null,ye=o!==void 0?o:!!(Ie!=null&&Ie.multilanguage),rt=Ie==null?void 0:Ie.forcedTimeout,[at,$n]=D.useState((ct=(ke=(it=(Ge=s??(Ie==null?void 0:Ie.lang))!==null&&Ge!==void 0?Ge:Sn)!==null&&it!==void 0?it:Ie==null?void 0:Ie.uiLang)!==null&&ke!==void 0?ke:ue.language)!==null&&ct!==void 0?ct:"IT"),qn=Qe!==void 0?Qe:!!(Ie!=null&&Ie.useMathFormatting);D.useEffect(()=>{qn&&dTe()},[qn]),D.useEffect(()=>{ye&&at&&Zxe.includes(at.toLowerCase())&&ue.changeLanguage(at.toLowerCase())},[at]);const[rn,Rt]=D.useState(!1),[rr,mn]=D.useState(!1),[Tn,Gr]=D.useState(),gr=l||(Ie==null?void 0:Ie.layout)||"DEFAULT",ri=(oe=Y??(Ie==null?void 0:Ie.enableAudio))!==null&&oe!==void 0?oe:!1,[xr,zr]=D.useState(!1),[jn,Dn]=D.useState(!1),[ga,co]=D.useState(!1),[is,mh]=D.useState(!1),[An,gn]=D.useState(!1),[va,$u]=D.useState(!1),[Os,tu]=D.useState(!ri||!ae),[Lo,ko]=D.useState(!1),[Rr,ya]=D.useState(2),[Ri,Ni]=D.useState(!1),[gh,nu]=D.useState("center"),[vh,yh]=D.useState(!1),[lc,ru]=D.useState(null),[_h,iu]=D.useState(!1),{startProcessing:Sh,setAudioContext:t0,addViseme:Ah,stopProcessing:En,resetVisemeQueue:qs}=gX();D.useEffect(()=>{Ni(!!hs),Ad=!!hs},[hs]),D.useEffect(()=>{let _e="bottom",He=Xs("microphoneMode","HOLD_TO_TALK");window.innerWidth<=768?(_e="bottom",He="HOLD_TO_TALK"):window.matchMedia("(orientation: portrait)").matches||window.innerHeight>window.innerWidth?_e="center":_e="bottom",tu(Xs("muteSpeaker",!ri||!ae)),n_=Xs("muteSpeaker",!ri||!ae),ko(He==="CONTINUOUS"),ya(Xs("continuousSpeechTimeout",2)),nu(Xs("controlsPosition",_e)),ru(Xs("avatarType","avatar3d")),iu(Xs("hideEmissions",!1)),!(ge!=null&&ge.loginToken)&&!ee&&(re(Xs("loginToken",void 0)),Bs=Xs("loginToken",void 0),su(Xs("birthDate",void 0)))},[]);const[Xn,Wu]=D.useState(O),[Bo,up]=D.useState(),[uo,Pi]=D.useState(null),[ss,cc]=D.useState(),Wn=async(_e,He)=>{var ut;const ot=He??bn;if(_e&&ot){const{currentState:At,...pt}=await Dr({sessionId:ot,placeName:_e.placeName,latitude:_e.latitude,longitude:_e.longitude,uncertaintyKm:(ut=_e.uncertainty)!==null&&ut!==void 0?ut:0});At&&pt.resultCode===0&&dc(Lt=>{var Ht;return{...Lt,...At,hints:!((Ht=At.hints)===null||Ht===void 0)&&Ht.length?At.hints:Lt==null?void 0:Lt.hints}})}},ho=_e=>{cc(_e),Wn(_e),_e?Ei("position",JSON.stringify(_e)):mR("position")};D.useEffect(()=>{const _e=Xs("position",void 0);_e&&cc(_e)},[]);const[Sl,_s]=D.useState(""),qu=_e=>{if(!_e||_e===`
`||_e.trim()===""){_s(""),Al();return}_s(_e),wa()},[yi,Qu]=D.useState(!1),[uc,_a]=D.useState([]),Zt=_e=>{_a(He=>{var ut,ot;return[...He,{..._e,media:(ot=(ut=_e.media)===null||ut===void 0?void 0:ut.filter(At=>{var pt;return!(At.mimeType==="text/javascript"&&(!((pt=At.properties)===null||pt===void 0)&&pt.executable))}))!==null&&ot!==void 0?ot:[]}]})},Ju=async(_e,He,ut,ot=!0,At,pt=!1,Lt,Ht=!1,Mn=!1)=>{var en,Gt,_r,Ir;const Hr=ut||bn||((en=window.getMemoriState())===null||en===void 0?void 0:en.sessionID);if(!Hr||!(_e!=null&&_e.length))return;pt||Zt({text:_e,translatedText:At,fromUser:!0,media:He??[],initial:bn?!!ut&&ut!==bn:!!ut}),mn(!0),Gr(Lt);let Yi=_e,Cs=!1;try{!pt&&ot&&!nr&&ye&&at.toUpperCase()!==Sn.toUpperCase()&&(Yi=(await pg(_e,Sn,at,P)).text);const{currentState:lr,...Gn}=await nn({sessionId:Hr,text:Yi});if(Gn.resultCode===0&&lr){const zn=Ht&&Lt?Lt:(Gt=lr.emission)!==null&&Gt!==void 0?Gt:Et==null?void 0:Et.emission;if(lr.state==="X4"&&n.giverTag){const{currentState:Vr,...Xi}=await yn(Hr,n.giverTag);Xi.resultCode===0?(Aa(Vr),zn&&(Zt({text:zn,emitter:Vr.emitter,media:Vr.media,fromUser:!1,questionAnswered:Yi,contextVars:Vr.contextVars,date:Vr.currentDate,placeName:Vr.currentPlaceName,placeLatitude:Vr.currentLatitude,placeLongitude:Vr.currentLongitude,placeUncertaintyKm:Vr.currentUncertaintyKm,tag:Vr.currentTag,memoryTags:Vr.memoryTags}),Lr(zn))):(console.error(Gn,Xi),kn.error(Ae(bs(Xi.resultCode))),Cs=!0)}else if(lr.state==="X2d"&&n.giverTag){const{currentState:Vr,...Xi}=await nn({sessionId:Hr,text:Math.random().toString().substring(2,8)});if(Xi.resultCode===0){const{currentState:dr,..._c}=await yn(Hr,n.giverTag);_c.resultCode===0?(Aa(dr),zn&&(Zt({text:zn,emitter:dr.emitter,media:dr.media,fromUser:!1,questionAnswered:Yi,contextVars:dr.contextVars,date:dr.currentDate,placeName:dr.currentPlaceName,placeLatitude:dr.currentLatitude,placeLongitude:dr.currentLongitude,placeUncertaintyKm:dr.currentUncertaintyKm,tag:dr.currentTag,memoryTags:dr.memoryTags}),Lr(zn))):(console.error(Gn,_c),kn.error(Ae(bs(_c.resultCode))),Cs=!0)}else console.error(Gn,Xi),kn.error(Ae(bs(Xi.resultCode))),Cs=!0}else at.toLowerCase()!==Sn.toLowerCase()&&zn&&!nr&&ye?ii(lr,at,Yi).then(Vr=>{let Xi=Vr.translatedEmission||Vr.emission;Xi&&Lr(Xi)}):(Aa({...lr,emission:zn}),zn&&(Zt({text:zn,emitter:lr.emitter,media:lr.media,fromUser:!1,questionAnswered:Yi,generatedByAI:!!lr.completion,contextVars:lr.contextVars,date:lr.currentDate,placeName:lr.currentPlaceName,placeLatitude:lr.currentLatitude,placeLongitude:lr.currentLongitude,placeUncertaintyKm:lr.currentUncertaintyKm,tag:lr.currentTag,memoryTags:lr.memoryTags}),Lr(zn)))}else Gn.resultCode===404&&(_a(zn=>[...zn.slice(0,zn.length-1)]),Qi(!1,Xn||n.secretToken,Bo,nr&&n.giverTag?n.giverTag:void 0,nr&&n.giverPIN?n.giverPIN:void 0,{PATHNAME:window.location.pathname,ROUTE:((Ir=(_r=window.location.pathname)===null||_r===void 0?void 0:_r.split("/"))===null||Ir===void 0?void 0:Ir.pop())||"",...$||{}},B).then(zn=>{console.info("session timeout"),zn!=null&&zn.sessionID&&setTimeout(()=>{Ju(_e,He,zn==null?void 0:zn.sessionID)},500)}))}catch(lr){console.error(lr),Cs=!0,Gr(void 0),mn(!1)}Mn||(Gr(void 0),mn(!1))},ii=async(_e,He,ut)=>{var ot,At,pt;const Lt=(ot=_e.emission)!==null&&ot!==void 0?ot:Et==null?void 0:Et.emission;let Ht={..._e},Mn=null;if(!Lt||nr||Sn.toUpperCase()===He.toUpperCase()||!ye)Ht={..._e,emission:Lt},Lt&&(Mn={text:Lt,emitter:_e.emitter,media:_e.media,fromUser:!1,questionAnswered:ut,contextVars:_e.contextVars,date:_e.currentDate,placeName:_e.currentPlaceName,placeLatitude:_e.currentLatitude,placeLongitude:_e.currentLongitude,placeUncertaintyKm:_e.currentUncertaintyKm,tag:_e.currentTag,memoryTags:_e.memoryTags});else try{const en=await pg(Lt,He,Sn,P);if(_e.hints&&_e.hints.length>0){const Gt=await Promise.all(((At=_e.hints)!==null&&At!==void 0?At:[]).map(async _r=>{var Ir;const Hr=await pg(_r,He,Sn,P);return{text:(Ir=Hr==null?void 0:Hr.text)!==null&&Ir!==void 0?Ir:_r,originalText:_r}}));Ht={..._e,emission:en.text,translatedHints:Gt}}else Ht={..._e,emission:Lt,translatedEmission:en.text,hints:(pt=_e.hints)!==null&&pt!==void 0?pt:_e.state==="G1"?Et==null?void 0:Et.hints:[]};en.text.length>0&&(Mn={text:Lt,translatedText:en.text,emitter:_e.emitter,media:_e.media,fromUser:!1,questionAnswered:ut,generatedByAI:!!_e.completion,contextVars:_e.contextVars,date:_e.currentDate,placeName:_e.currentPlaceName,placeLatitude:_e.currentLatitude,placeLongitude:_e.currentLongitude,placeUncertaintyKm:_e.currentUncertaintyKm,tag:_e.currentTag,memoryTags:_e.memoryTags})}catch(en){console.error(en),Ht={..._e,emission:Lt},Mn={text:Lt,emitter:_e.emitter,media:_e.media,fromUser:!1,questionAnswered:ut,contextVars:_e.contextVars,date:_e.currentDate,placeName:_e.currentPlaceName,placeLatitude:_e.currentLatitude,placeLongitude:_e.currentLongitude,placeUncertaintyKm:_e.currentUncertaintyKm,tag:_e.currentTag,memoryTags:_e.memoryTags}}return Aa(Ht),Mn&&Zt(Mn),Ht},Sa=n.ageRestriction!==void 0?n.ageRestriction:n.nsfw?18:n.enableCompletions?14:0,[_i,su]=D.useState(),[ou,Fo]=D.useState(!1),[bn,Ku]=D.useState(K),[Et,dc]=D.useState(),Aa=_e=>{var He;dc(_e),we&&we(_e);const ut=new CustomEvent("MemoriNewDialogState",{detail:_e});document.dispatchEvent(ut);const ot=(He=_e==null?void 0:_e.media)===null||He===void 0?void 0:He.filter(At=>{var pt;return At.mimeType==="text/javascript"&&!!(!((pt=At.properties)===null||pt===void 0)&&pt.executable)});ot==null||ot.forEach(At=>{try{setTimeout(()=>{var pt;console.log("snippet",At),new Function((pt=At.content)!==null&&pt!==void 0?pt:"")(),setTimeout(()=>{var Lt,Ht,Mn;(Lt=document.querySelector(".memori-chat--content"))===null||Lt===void 0||Lt.scrollTo(0,(Mn=(Ht=document.querySelector(".memori-chat--content"))===null||Ht===void 0?void 0:Ht.scrollHeight)!==null&&Mn!==void 0?Mn:0)},400)},1e3)}catch(pt){console.warn(pt)}})},os=async _e=>{var He,ut,ot,At,pt,Lt;let Ht=Xs("birthDate",void 0),Mn=(He=_i??_e.birthDate)!==null&&He!==void 0?He:Ht;if(!Mn&&Sa){Fo(!0);return}if(n.privacyType!=="PUBLIC"&&!n.secretToken&&!Xn&&!Bo){Pi("password");return}Rt(!0);try{if(!n.giverTag&&(!((ut=n.receivedInvitations)===null||ut===void 0)&&ut.length)){let _r=n.receivedInvitations.find(Ir=>Ir.type==="GIVER"&&Ir.state==="ACCEPTED");_r&&(n.giverTag=_r.tag,n.giverPIN=_r.pin)}let en;try{en=(()=>window.location.href)()}catch(_r){console.debug(_r)}const Gt=await St({..._e,birthDate:Mn,tag:(ot=_e.tag)!==null&&ot!==void 0?ot:W==null?void 0:W.tag,pin:(At=_e.pin)!==null&&At!==void 0?At:W==null?void 0:W.pin,additionalInfo:{...ge||{},loginToken:(Lt=(pt=Bs??Yn)!==null&&pt!==void 0?pt:ge==null?void 0:ge.loginToken)!==null&&Lt!==void 0?Lt:ee,language:Uo(at),referral:en,timeZoneOffset:new Date().getTimezoneOffset().toString()}});if(Gt!=null&&Gt.sessionID&&(Gt!=null&&Gt.currentState)&&Gt.resultCode===0)return Ku(Gt.sessionID),ss&&Wn(ss,Gt.sessionID),Rt(!1),{dialogState:Gt.currentState,sessionID:Gt.sessionID};Gt!=null&&Gt.resultMessage.startsWith("This Memori is aged restricted")?(console.warn(Gt),kn.error(Ae("underageTwinSession",{age:Sa})),Xt(!0)):(Gt==null?void 0:Gt.resultCode)===403?(Wu(void 0),Pi("password")):(console.warn(Gt),kn.error(Ae(bs(Gt==null?void 0:Gt.resultCode))),Xt(!0))}catch(en){console.error(en)}},Qi=async(_e=!1,He,ut,ot,At,pt,Lt,Ht)=>{var Mn,en,Gt,_r,Ir;Rt(!0);let Hr=Xs("birthDate",void 0),Yi=Ht??Hr;try{if(!Yi&&Sa){Fo(!0);return}if(n.privacyType!=="PUBLIC"&&!He&&!n.secretToken&&!Xn&&!ut&&!Bo){Pi("password");return}let Cs;try{Cs=(()=>window.location.href)()}catch(Vr){console.debug(Vr)}const{sessionID:lr,currentState:Gn,...zn}=await St({memoriID:(Mn=n.engineMemoriID)!==null&&Mn!==void 0?Mn:"",password:He||Xn||n.secretToken,recoveryTokens:ut||Bo,tag:ot,pin:At,initialContextVars:{PATHNAME:window.location.pathname,ROUTE:((Gt=(en=window.location.pathname)===null||en===void 0?void 0:en.split("/"))===null||Gt===void 0?void 0:Gt.pop())||"",...pt||{}},initialQuestion:Lt,birthDate:Yi,additionalInfo:{...ge||{},loginToken:(Ir=(_r=Bs??Yn)!==null&&_r!==void 0?_r:ge==null?void 0:ge.loginToken)!==null&&Ir!==void 0?Ir:ee,language:Uo(at),referral:Cs,timeZoneOffset:new Date().getTimezoneOffset().toString()}});if(lr&&Gn&&zn.resultCode===0)return Ku(lr),_e&&(Aa(Gn),Gn.emission&&(uc.length<=1?_a([{text:Gn.emission,emitter:Gn.emitter,media:Gn.media,fromUser:!1,initial:!0,contextVars:Gn.contextVars,date:Gn.currentDate,placeName:Gn.currentPlaceName,placeLatitude:Gn.currentLatitude,placeLongitude:Gn.currentLongitude,placeUncertaintyKm:Gn.currentUncertaintyKm,tag:Gn.currentTag,memoryTags:Gn.memoryTags}]):Zt({text:Gn.emission,emitter:Gn.emitter,media:Gn.media,fromUser:!1,initial:!0,contextVars:Gn.contextVars,date:Gn.currentDate,placeName:Gn.currentPlaceName,placeLatitude:Gn.currentLatitude,placeLongitude:Gn.currentLongitude,placeUncertaintyKm:Gn.currentUncertaintyKm,tag:Gn.currentTag,memoryTags:Gn.memoryTags}))),ss&&Wn(ss,lr),n.needsDateTime&&hc({sessionID:lr,state:Gn}),Rt(!1),{dialogState:Gn,sessionID:lr};zn!=null&&zn.resultMessage.startsWith("This Memori is aged restricted")?(console.error(zn),kn.error(Ae("underageTwinSession",{age:Sa})),Xt(!0)):(zn==null?void 0:zn.resultCode)===403?(Wu(void 0),Pi("password")):(console.error(zn),kn.error(Ae(bs(zn.resultCode))),Xt(!0))}catch(Cs){console.error(Cs)}return Rt(!1),null},Ss=async(_e,He,ut,ot)=>{var At,pt,Lt,Ht,Mn;if(!_e||!He)return console.error("CHANGETAG/Session not found"),Promise.reject("Session not found");try{const{currentState:en,resultCode:Gt}=await yn(He,ut??FC);if(Gt===0){let _r=0;if(ut!==FC&&ot&&(en.state==="X1a"||en.state==="X1b")){const{resultCode:Ir}=await nn({sessionId:He,text:ot??""});_r=Ir}if(_r===0){const{currentState:Ir,...Hr}=await jr(He);if(Hr.resultCode===0&&Ir)return{currentState:Ir,sessionId:He,...Hr}}else if([400,401,403,404,500].includes(Gt)){console.warn("[APPCONTEXT/CHANGETAG]",Gt);let Ir=Xs("birthDate",void 0),Hr;try{Hr=(()=>window.location.href)()}catch(Yi){console.debug(Yi)}os({memoriID:(At=n.engineMemoriID)!==null&&At!==void 0?At:"",password:O||Xn||n.secretToken,tag:n.giverTag,pin:n.giverPIN,initialContextVars:{PATHNAME:window.location.pathname,ROUTE:((Lt=(pt=window.location.pathname)===null||pt===void 0?void 0:pt.split("/"))===null||Lt===void 0?void 0:Lt.pop())||"",...$||{}},initialQuestion:B,birthDate:_i||Ir||void 0,additionalInfo:{...ge||{},loginToken:(Mn=(Ht=Bs??Yn)!==null&&Ht!==void 0?Ht:ge==null?void 0:ge.loginToken)!==null&&Mn!==void 0?Mn:ee,language:Uo(at),referral:Hr,timeZoneOffset:new Date().getTimezoneOffset().toString()}})}else if(en)return{currentState:en,sessionId:He,resultCode:Gt}}}catch(en){let Gt=en;return console.warn("[APPCONTEXT/CHANGETAG]",Gt),Promise.reject(Gt)}return null},Ea=async()=>{bn&&n.giverTag&&n.giverPIN&&(_a([]),await Ss(n.engineMemoriID,bn,n.giverTag,n.giverPIN))};D.useEffect(()=>()=>{(!Et||(Et==null?void 0:Et.currentTag)!==n.giverTag)&&Ea()},[]);const hc=D.useCallback(async({sessionID:_e,date:He,state:ut})=>{var ot;const At=_e??bn,pt=ut??Et;if(!At||!n.needsDateTime||!((ot=pt==null?void 0:pt.hints)===null||ot===void 0)&&ot.length)return;const Lt=(He?dn.fromISO(He):dn.now()).toUTC().toFormat("yyyy/MM/dd HH:mm:ss ZZ").split(":").slice(0,-1).join(":"),{currentState:Ht,...Mn}=await mr(At,Lt);Mn.resultCode===0&&Ht&&dc(en=>{var Gt;return{...en,...Ht,hints:!((Gt=Ht.hints)===null||Gt===void 0)&&Gt.length?Ht.hints:en==null?void 0:en.hints}})},[Et,n.needsDateTime,bn]);D.useEffect(()=>{if(bn&&n.needsDateTime){hc({sessionID:bn,state:Et});let _e=setInterval(()=>{hc({sessionID:bn})},60*1e3);return()=>{clearInterval(_e)}}},[n.needsDateTime,bn]);const[Ca,zo]=D.useState(),Ha=D.useRef(),wa=()=>{Ca&&(clearTimeout(Ca),zo(void 0)),Ha!=null&&Ha.current&&(clearTimeout(Ha.current),Ha.current=void 0)},Al=()=>{wa(),!Ri&&!Sl.length&&!rr&&!yi&&Eh()},n0=async()=>{var _e;if(!xr||Ri||Sl.length||rr||yi){Al();return}else if(bn&&xr&&(Et!=null&&Et.acceptsTimeout)){const{currentState:He,...ut}=await wn(bn);if(ut.resultCode===0&&He){const ot=He.emission;if(!nr&&ye&&at!==(ue==null?void 0:ue.language)&&ot&&ot.length>0)ii({...He,emission:ot},at).then(At=>{let pt=At.translatedEmission||At.emission;pt&&Lr(pt)});else if(ot&&ot.length>0)Zt({text:ot,emitter:He.emitter,media:He.media,fromUser:!1,generatedByAI:!!He.completion,contextVars:He.contextVars,date:He.currentDate,placeName:He.currentPlaceName,placeLatitude:He.currentLatitude,placeLongitude:He.currentLongitude,placeUncertaintyKm:He.currentUncertaintyKm,tag:He.currentTag,memoryTags:He.memoryTags}),Lr(ot),Aa({...He,hints:(_e=He.hints)!==null&&_e!==void 0?_e:He.state==="G1"?Et==null?void 0:Et.hints:[]});else{Al();return}}}},Eh=()=>{let _e=Et==null?void 0:Et.timeout;if(!_e){let ut=40,ot=25;if(_e=Math.floor(Math.random()*(ut-ot))+ot,Et!=null&&Et.emission){let At=Et.emission.length/26.5;_e=_e+At}}if(rt&&(_e=rt,Et!=null&&Et.emission)){let ut=Et.emission.length/26.5;_e=_e+ut}let He=setTimeout(n0,_e*1e3);zo(He),Ha.current=He};D.useEffect(()=>{(Sl.length||Ri||rr)&&wa(),bn&&!Sl.length&&Al()},[Et==null?void 0:Et.acceptsTimeout,Et==null?void 0:Et.timeout,Et==null?void 0:Et.state,Ri,bn,uc,Sl,rr,xr]),D.useEffect(()=>()=>{zr(!1),Jt(!1),wa(),Ha.current=void 0},[]);const au=()=>{if(!Q)return;ba=Yo.SpeechConfig.fromSubscription(Q,"westeurope"),ba.speechSynthesisLanguage=Uo(at),ba.speechSynthesisVoiceName=Ch(at),ba.speechRecognitionLanguage=Uo(at),ba.setProperty("speechSynthesis.outputFormat","viseme"),Tg()&&(ba.speechSynthesisOutputFormat=Yo.SpeechSynthesisOutputFormat.Audio16Khz32KBitRateMonoMp3),Cr=new LE;let _e=Cr.createBuffer(1,1e4,22050),He=Cr.createBufferSource();He.buffer=_e,He.connect(Cr.destination),yu=new Yo.SpeakerAudioDestination;let ut=Yo.AudioConfig.fromSpeakerOutput(yu);hs=new Yo.SpeechSynthesizer(ba,ut)},Ch=D.useCallback(_e=>{var He,ut,ot,At;let pt="",Lt=((At=(ot=_e??((ut=(He=n.culture)===null||He===void 0?void 0:He.split("-"))===null||ut===void 0?void 0:ut[0]))!==null&&ot!==void 0?ot:ue.language)!==null&&At!==void 0?At:"IT").toUpperCase(),Ht=n.voiceType;switch(n.enableBoardOfExperts&&(Et!=null&&Et.emitter)&&(Ki==null||Ki.find(Mn=>Mn.name===(Et==null?void 0:Et.emitter))),Lt){case"IT":pt=`${Ht==="MALE"?"it-IT-DiegoNeural":"it-IT-ElsaNeural"}`;break;case"DE":pt=`${Ht==="MALE"?"de-DE-ConradNeural":"de-DE-KatjaNeural"}`;break;case"EN":pt=`${Ht==="MALE"?"en-GB-RyanNeural":"en-GB-SoniaNeural"}`;break;case"ES":pt=`${Ht==="MALE"?"es-ES-AlvaroNeural":"es-ES-ElviraNeural"}`;break;case"FR":pt=`${Ht==="MALE"?"fr-FR-HenriNeural":"fr-FR-DeniseNeural"}`;break;case"PT":pt=`${Ht==="MALE"?"pt-PT-DuarteNeural":"pt-PT-RaquelNeural"}`;break;case"UK":pt=`${Ht==="MALE"?"uk-UA-OstapNeural":"uk-UA-PolinaNeural"}`;break;case"RU":pt=`${Ht==="MALE"?"ru-RU-DmitryNeural":"ru-RU-SvetlanaNeural"}`;break;case"PL":pt=`${Ht==="MALE"?"pl-PL-MarekNeural":"pl-PL-AgnieszkaNeural"}`;break;case"FI":pt=`${Ht==="MALE"?"fi-FI-HarriNeural":"fi-FI-SelmaNeural"}`;break;case"EL":pt=`${Ht==="MALE"?"el-GR-NestorasNeural":"el-GR-AthinaNeural"}`;break;case"AR":pt=`${Ht==="MALE"?"ar-SA-HamedNeural":"ar-SA-ZariyahNeural"}`;break;case"ZH":pt=`${Ht==="MALE"?"zh-CN-YunxiNeural":"zh-CN-XiaoxiaoNeural"}`;break;case"JA":pt=`${Ht==="MALE"?"ja-JP-KeitaNeural":"ja-JP-NanamiNeural"}`;break;default:pt=`${Ht==="MALE"?"it-IT-DiegoNeural":"it-IT-IsabellaNeural"}`;break}return pt},[n.voiceType,n.enableBoardOfExperts,Et==null?void 0:Et.emitter,ue.language,n.culture]),Uo=_e=>{var He,ut;let ot="";switch((_e||((ut=(He=n.culture)===null||He===void 0?void 0:He.split("-"))===null||ut===void 0?void 0:ut[0])||ue.language||"IT").toUpperCase()){case"IT":ot="it-IT";break;case"DE":ot="de-DE";break;case"EN":ot="en-GB";break;case"ES":ot="es-ES";break;case"FR":ot="fr-FR";break;case"PT":ot="pt-PT";break;case"UK":ot="uk-UK";break;case"RU":ot="ru-RU";break;case"PL":ot="pl-PL";break;case"FI":ot="fi-FI";break;case"EL":ot="el-GR";break;case"AR":ot="ar-SA";break;case"ZH":ot="zh-CN";break;case"JA":ot="ja-JP";break;default:ot="it-IT";break}return ot},[lu,cu]=D.useState(),Ta=async()=>{try{return await(await fetch(`${P||"https://aisuru.com"}/api/lexiconmap`)).json()}catch(_e){console.error(_e)}};D.useEffect(()=>{Ta().then(_e=>{cu(_e)})},[]);const Yu=(_e,He)=>{var ut;if(!lu)return _e;const ot={...(ut=lu.common)!==null&&ut!==void 0?ut:{},...se!=null&&se.id&&lu[se.id]?lu[se.id]:{}};return Object.keys(ot).map(Lt=>{var Ht;const Mn=(Ht=ot[Lt][He.toLowerCase()])!==null&&Ht!==void 0?Ht:ot[Lt].default;return{word:Lt,phoneme:Mn,caseSensitive:ot[Lt].caseSensitive}}).reduce((Lt,{word:Ht,phoneme:Mn,caseSensitive:en})=>Lt.replace(new RegExp(`\\b${Ht}\\b`,en?"g":"gi"),`<phoneme alphabet="ipa" ph="${Mn}">${Ht}</phoneme>`),_e)},jo=()=>{const _e=new CustomEvent("MemoriEndSpeak");document.dispatchEvent(_e)},Lr=_e=>{if(!Q||h){jo();return}if(as(),h)return;if(Os||n_){Ad=!1,mn(!1),jo(),Lo&&Qs();return}yu&&yu.pause();let He=window.navigator.userAgent.includes("Safari")&&!window.navigator.userAgent.includes("Chrome"),ut=/iPad|iPhone|iPod/.test(navigator.userAgent);if(Cr.state==="interrupted"){Cr.resume().then(()=>Lr(_e));return}if(Cr.state==="closed"){Cr=new LE;let pt=Cr.createBuffer(1,1e4,22050),Lt=Cr.createBufferSource();Lt.buffer=pt,Lt.connect(Cr.destination)}else if(Cr.state==="suspended"){Go(),Cr=new LE;let pt=Cr.createBuffer(1,1e4,22050),Lt=Cr.createBufferSource();Lt.buffer=pt,Lt.connect(Cr.destination)}if(!hs){ut||(yu=new Yo.SpeakerAudioDestination);let pt=Yo.AudioConfig.fromSpeakerOutput(yu);hs=new Yo.SpeechSynthesizer(ba,pt)}const ot=Cr.createBufferSource();ot.addEventListener("ended",()=>{Ni(!1),Ad=!1}),yu.onAudioEnd=()=>{Ni(!1),Ad=!1,ot.disconnect(),jo(),r0()},qs(),hs.visemeReceived=function(pt,Lt){Ah(Lt.visemeId,Lt.audioOffset)};const At=aTe(oTe(sTe(rK(ED(_e)))));hs.speakSsmlAsync(`<speak version="1.0" xmlns="http://www.w3.org/2001/10/synthesis" xmlns:mstts="https://www.w3.org/2001/mstts" xmlns:emo="http://www.w3.org/2009/10/emotionml" xml:lang="${Uo(at)}"><voice name="${Ch(at)}"><s>${Yu(At,at.toLowerCase())}</s></voice></speak>`,pt=>{if(pt){Ni(!0),Ad=!0,Sh(Cr);try{Cr.decodeAudioData(pt.audioData,function(Lt){ot.buffer=Lt,ot.connect(Cr.destination),(uc.length<1||He&&ut)&&ot.start(0)}),Cr.onstatechange=()=>{Cr.state==="suspended"||Cr.state==="closed"?(ot.disconnect(),Ni(!1),En(),qs(),Ad=!1):Cr.state==="interrupted"&&Cr.resume()},Cr.resume(),hs&&(hs.close(),hs=null)}catch(Lt){console.error("Error processing audio data:",Lt),fc(_e)}}else fc(_e)},pt=>{console.error("Speak error:",pt),fc(_e)}),mn(!1)},fc=_e=>{console.log("Falling back to browser speech synthesis"),window.speechSynthesis.speak(new SpeechSynthesisUtterance(_e)),dp()},dp=()=>{Ni(!1),En(),qs(),Ad=!1,hs&&(console.log("Closing speech synthesizer"),hs.close(),hs=null),jo()},Go=()=>{Ni(!1),Ad=!1;try{hs&&(hs.close(),hs=null),Cr.state!=="closed"&&Cr.close(),yu&&(yu.pause(),yu.close())}catch(_e){console.debug("stopAudio error: ",_e)}},Ds=()=>{let _e=document.querySelector("#chat-fieldset textarea");_e&&_l?_e.focus():_e==null||_e.blur()};D.useEffect(()=>{gr!=="TOTEM"&&Ds()},[Et==null?void 0:Et.emission]);const[El,Cl]=D.useState(""),As=()=>Cl(""),[Xu,pc]=D.useState(null),Qs=()=>{let _e=setTimeout(async()=>{Ji();const He=RF(El);He.length>0&&yi?(Ju(He),As(),_s("")):yi&&Al()},Rr*1e3);pc(_e)},Va=()=>{Xu&&(clearTimeout(Xu),pc(null))},Kr=()=>{Va(),Lo&&Qs()};D.useEffect(()=>{Kr(),Al()},[El]);const Es=async()=>{if(Q){Ji(),Cl(""),As(),Tg()&&qi(!1);try{navigator.mediaDevices.getUserMedia({audio:!0}).then(function(_e){Dn(!0),ba||(ba=Yo.SpeechConfig.fromSubscription(Q,"westeurope"),ba.speechRecognitionLanguage=Uo(at),ba.speechSynthesisLanguage=Uo(at),ba.speechSynthesisVoiceName=Ch(at));const He=Yo.AudioConfig.fromDefaultMicrophoneInput();Sd=new Yo.SpeechRecognizer(ba,He),Qu(!0),Sd.recognized=(ut,ot)=>{if(ot.result.text)if(ot.result.reason===Yo.ResultReason.RecognizedSpeech){let At=ot.result.text;if(Cl(At||""),(At==null?void 0:At.length)>0){const pt=RF(At);pt.length>0&&_s(Lt=>`${Lt} ${pt}`)}}else ot.result.reason===Yo.ResultReason.NoMatch&&console.debug("NOMATCH: Speech could not be recognized.")},Sd.canceled=(ut,ot)=>{ot.reason===Yo.CancellationReason.Error&&(console.debug(`"CANCELED: ErrorCode=${ot.errorCode}`),console.debug(`"CANCELED: ErrorDetails=${ot.errorDetails}`),console.debug("CANCELED: Did you set the speech resource key and region values?")),as()},Sd.sessionStopped=(ut,ot)=>{as()},As(),Sd.startContinuousRecognitionAsync()}).catch(console.debug)}catch(_e){console.debug(_e)}}},as=()=>{Sd&&(Sd.stopContinuousRecognitionAsync(),Sd.close(),Sd=null),Qu(!1)},Ji=()=>{Dn(!1),as(),Va()},xa=()=>{yi&&(Ji(),As(),_s(""),Es())},wl=()=>{try{Ji(),wa(),Jt(!1),Ha.current=void 0,Go()}catch(_e){console.log("Error: resetUIEffects",_e)}};D.useEffect(()=>()=>{wl()},[]),D.useEffect(()=>(document.addEventListener("MemoriResetUIEffects",wl),()=>{document.removeEventListener("MemoriResetUIEffects",wl)}),[]),D.useEffect(()=>{(Et==null?void 0:Et.state)==="Z0"&&Ji()},[Et==null?void 0:Et.state]);const[wh,uu]=D.useState(!1),r0=D.useCallback(_e=>{Ri&&hs&&(hs.close(),hs=null),Lo&&(jn||!wh)&&(uu(!0),Es())},[Lo,jn]);D.useEffect(()=>{uc.length>1&&!Ri&&Lo&&(jn||!wh)?Es():Ri&&yi&&as()},[Ri]),D.useEffect(()=>{xa()},[Sn]);const[Ho,Tl]=D.useState("keypress");D.useEffect(()=>{window.innerWidth<=768&&Tg()?Tl("click"):Tl("keypress")},[]);const[du,Zu]=D.useState(),hu=Ie==null?void 0:Ie.globalBackground,si=hu?`url(${hu})`:null,ed=a?{"--memori-chat-bubble-bg":"#fff",...Ie&&!u?{"--memori-text-color":(ne=Ie.textColor)!==null&&ne!==void 0?ne:"#000"}:{},...Ie!=null&&Ie.buttonBgColor?{"--memori-button-bg":Ie.buttonBgColor,"--memori-primary":Ie.buttonBgColor}:{},...Ie!=null&&Ie.buttonTextColor?{"--memori-button-text":Ie.buttonTextColor}:{},...Ie!=null&&Ie.blurBackground?{"--memori-blur-background":"5px"}:{"--memori-blur-background":"0px"},...Ie!=null&&Ie.innerBgColor?{"--memori-inner-bg":`rgba(${Ie.innerBgColor==="dark"?"0, 0, 0":"255, 255, 255"}, ${(Oe=Ie.innerBgAlpha)!==null&&Oe!==void 0?Oe:.4})`,"--memori-inner-content-pad":"1.5rem","--memori-nav-bg-image":"none","--memori-nav-bg":`rgba(${Ie.innerBgColor==="dark"?"0, 0, 0":"255, 255, 255"}, ${(st=Ie==null?void 0:Ie.innerBgAlpha)!==null&&st!==void 0?st:.4})`}:{"--memori-inner-content-pad":"0px"}}:{},Nr=`
    ${h?"#preview,":gr==="WEBSITE_ASSISTANT"?"":":root,"} .memori-widget, .memori-drawer, .memori-modal {
      ${Object.entries(ed).map(([_e,He])=>`${_e}: ${He};`).join(`
`)}
    }
  `,ls=(Ie==null?void 0:Ie.showAIicon)===void 0?!0:Ie==null?void 0:Ie.showAIicon,kr=(Ie==null?void 0:Ie.showWhyThisAnswer)===void 0?!0:Ie==null?void 0:Ie.showWhyThisAnswer,[mc,gc]=D.useState(!1);D.useEffect(()=>{(window.innerWidth>=768&&gr==="FULLPAGE"||gr!=="FULLPAGE")&&gc(!0)},[]),D.useEffect(()=>{if(Ie!=null&&Ie.seoTitle){let He=document.createElement("meta");He.setAttribute("property","og:title"),He.setAttribute("content",Ie.seoTitle),document.head.append(He)}if(Ie!=null&&Ie.seoDescription){let He=document.createElement("meta");He.setAttribute("property","og:description"),He.setAttribute("content",Ie.seoDescription),document.head.append(He)}if(Ie!=null&&Ie.seoUrl){let He=document.createElement("meta");He.setAttribute("property","og:url"),He.setAttribute("content",Ie.seoUrl),document.head.append(He)}let _e=q||n.avatarURL;if(Ie!=null&&Ie.seoImageShowAvatar&&_e){let He=document.createElement("meta");He.setAttribute("property","og:image"),He.setAttribute("content",_e),document.head.append(He)}},[Ie,n.avatarURL,q]);const cs=async _e=>{var He;if(bn)try{const{currentState:ut,...ot}=await yn(bn,_e);if(ot.resultCode===0)if(Zt({text:_e,fromUser:!0}),ut.state==="X4"&&n.giverTag){const{currentState:At,...pt}=await lt.postTagChangedEvent(bn,n.giverTag);pt.resultCode===0?(Aa(At),At.emission&&Zt({text:At.emission,emitter:At.emitter,media:At.media,fromUser:!1,contextVars:At.contextVars,date:At.currentDate,placeName:At.currentPlaceName,placeLatitude:At.currentLatitude,placeLongitude:At.currentLongitude,placeUncertaintyKm:At.currentUncertaintyKm,tag:At.currentTag,memoryTags:At.memoryTags})):(console.error(pt),kn.error(Ae(bs(pt.resultCode))))}else Aa(ut),ut.emission&&Zt({text:ut.emission,emitter:ut.emitter,media:ut.media,fromUser:!1,contextVars:ut.contextVars,date:ut.currentDate,placeName:ut.currentPlaceName,placeLatitude:ut.currentLatitude,placeLongitude:ut.currentLongitude,placeUncertaintyKm:ut.currentUncertaintyKm,tag:ut.currentTag,memoryTags:ut.memoryTags});else console.error(ot,_e,(He=Et==null?void 0:Et.knownTags)===null||He===void 0?void 0:He[_e]),kn.error(Ae(bs(ot.resultCode)))}catch(ut){let ot=ut;console.error(ot),kn.error(ot.message)}},fu=(_e,He)=>{as(),Go(),Ju(_e,void 0,void 0,!1,He)},xl=D.useCallback(_e=>{if(fe)return;const{text:He,waitForPrevious:ut,hidden:ot,typingText:At,useLoaderTextAsMsg:pt,hasBatchQueued:Lt}=_e.detail;He&&(ut&&!n_&&(Ad||rr)?setTimeout(()=>{xl(_e)},1e3):(as(),Go(),Ju(He,void 0,void 0,void 0,void 0,ot,At,pt,Lt)))},[bn,Ri,rr,at,fe]);D.useEffect(()=>(fe?document.removeEventListener("MemoriTextEntered",xl):document.addEventListener("MemoriTextEntered",xl),()=>{document.removeEventListener("MemoriTextEntered",xl)}),[bn,at,fe]);const Ls=D.useCallback(async(_e,He=!1)=>{var ut,ot,At,pt,Lt,Ht,Mn,en,Gt,_r,Ir,Hr,Yi,Cs,lr,Gn,zn,Vr,Xi;const dr=(_e==null?void 0:_e.sessionID)||bn,_c=(_e==null?void 0:_e.dialogState)||Et;Jt(!0);let Ih=document.getElementById("memori-audio"),p=window.navigator.userAgent.includes("Safari")&&!window.navigator.userAgent.includes("Chrome");Ih&&p&&(Ih.muted=!1,Ih.play().catch(k=>{console.warn("error playing intro audio",k)}));let S=Xs("birthDate",void 0),I=_i||S||void 0;if(!dr&&Sa&&!I)Fo(!0),Jt(!1);else if(!dr&&n.privacyType!=="PUBLIC"&&!n.secretToken&&!Xn&&!Bo||!dr&&ln){Pi("password"),Jt(!1);return}else if(!dr||He){Jt(!1),Xt(!1);const k=await os({memoriID:n.engineMemoriID,password:O||Xn||n.secretToken,tag:W==null?void 0:W.tag,pin:W==null?void 0:W.pin,initialContextVars:{PATHNAME:(ut=window.location.pathname)===null||ut===void 0?void 0:ut.toUpperCase(),ROUTE:((pt=(At=(ot=window.location.pathname)===null||ot===void 0?void 0:ot.split("/"))===null||At===void 0?void 0:At.pop())===null||pt===void 0?void 0:pt.toUpperCase())||"",...$||{}},initialQuestion:B,birthDate:I,additionalInfo:{...ge||{},loginToken:(Ht=(Lt=Bs??Yn)!==null&&Lt!==void 0?Lt:ge==null?void 0:ge.loginToken)!==null&&Ht!==void 0?Ht:ee,language:Uo(at),timeZoneOffset:new Date().getTimezoneOffset().toString()}});k!=null&&k.dialogState?(_a([]),ii(k.dialogState,at).then(G=>{let J=G.translatedEmission||G.emission;J&&Lr(J)}).finally(()=>{zr(!0)})):await Ls(k||void 0);return}else if(K){const{currentState:k,...G}=await jr(dr);if(G.resultCode!==0||!k){console.debug("session expired, opening new session"),Xt(!0),Ku(void 0),Jt(!1),await Ls(void 0,!0);return}if(_a([]),ss&&Wn(ss,dr),n.needsDateTime&&hc({sessionID:dr,state:k}),nr&&n.giverTag&&(Et==null?void 0:Et.currentTag)!==n.giverTag)try{console.debug("change tag #0"),await Ss(n.engineMemoriID,dr,"-");const J=await Ss(n.engineMemoriID,dr,n.giverTag,n.giverPIN);if(J&&J.resultCode===0)ii(J.currentState,at).then(me=>{let be=me.translatedEmission||me.emission;be&&Lr(be)}).finally(()=>{zr(!0)});else throw console.error("session #1",J),new Error("No session")}catch(J){console.error("session #2",J),Qi(!0,n==null?void 0:n.secretToken,void 0,n==null?void 0:n.giverTag,n==null?void 0:n.giverPIN,{PATHNAME:(Mn=window.location.pathname)===null||Mn===void 0?void 0:Mn.toUpperCase(),ROUTE:((_r=(Gt=(en=window.location.pathname)===null||en===void 0?void 0:en.split("/"))===null||Gt===void 0?void 0:Gt.pop())===null||_r===void 0?void 0:_r.toUpperCase())||"",...$||{}},B,I).then(()=>{zr(!0)})}else if(!nr&&W&&(Et==null?void 0:Et.currentTag)!==W.tag)try{console.debug("change tag #3"),await Ss(n.engineMemoriID,dr,"-");const J=await Ss(n.engineMemoriID,dr,W.tag,W.pin);if(J&&J.resultCode===0)ii(J.currentState,at).then(me=>{let be=me.translatedEmission||me.emission;be&&Lr(be)}).finally(()=>{zr(!0)});else throw console.error("session #4",J),new Error("No session")}catch(J){console.error("session #5",J),Qi(!0,n==null?void 0:n.secretToken,void 0,W.tag,W.pin,{PATHNAME:(Ir=window.location.pathname)===null||Ir===void 0?void 0:Ir.toUpperCase(),ROUTE:((Cs=(Yi=(Hr=window.location.pathname)===null||Hr===void 0?void 0:Hr.split("/"))===null||Yi===void 0?void 0:Yi.pop())===null||Cs===void 0?void 0:Cs.toUpperCase())||"",...$||{}},B,I).then(()=>{zr(!0)})}else if(!nr&&!W&&(Et!=null&&Et.currentTag)&&(Et==null?void 0:Et.currentTag)!==FC&&(Et==null?void 0:Et.currentTag)!=="-")try{console.debug("change tag #6"),await Ss(n.engineMemoriID,dr,"-");const J=await Ss(n.engineMemoriID,dr,FC);if(J&&J.resultCode===0)ii(J.currentState,at).then(me=>{let be=me.translatedEmission||me.emission;be&&Lr(be)}).finally(()=>{zr(!0)});else throw console.error("session #7",J),new Error("No session")}catch(J){console.error("session #8",J),Qi(!0,n==null?void 0:n.secretToken,void 0,void 0,void 0,{PATHNAME:(lr=window.location.pathname)===null||lr===void 0?void 0:lr.toUpperCase(),ROUTE:((Vr=(zn=(Gn=window.location.pathname)===null||Gn===void 0?void 0:Gn.split("/"))===null||zn===void 0?void 0:zn.pop())===null||Vr===void 0?void 0:Vr.toUpperCase())||"",...$||{}},B,I).then(()=>{zr(!0)})}else{try{const{chatLogs:J,...me}=await Wi(dr,dr),be=(Xi=J==null?void 0:J[0])===null||Xi===void 0?void 0:Xi.lines.map((nt,Nt)=>{var tn,Un;return{text:nt.text,media:(Un=(tn=nt.media)===null||tn===void 0?void 0:tn.filter(Oi=>eIe.includes(Oi.mimeType)))===null||Un===void 0?void 0:Un.map(Oi=>({mediumID:`${Nt}-${Oi.mimeType}`,...Oi})),fromUser:nt.inbound,timestamp:nt.timestamp,emitter:nt.emitter,initial:Nt===0}});let Ue=be.slice(0,-1);if(Sn.toUpperCase()!==at.toUpperCase()&&ye)try{Ue=await Promise.all(be.map(async nt=>({...nt,originalText:nt.text,text:(await pg(nt.text,at,Sn,P)).text})))}catch(nt){console.log("Error translating messages",nt)}_a(Ue)}catch(J){console.log("Error retrieving chat logs",J)}ii(k,at).then(J=>{let me=J.translatedEmission||J.emission;me&&Lr(me)}).finally(()=>{zr(!0)})}ss&&Wn(ss,dr),n.needsDateTime&&hc({sessionID:dr,state:k})}else _a([]),ii(_c,at).then(k=>{let G=k.translatedEmission||k.emission;G&&Lr(G)}).finally(()=>{zr(!0)})},[Xn,n,Bo,_i,bn,at,ss]);D.useEffect(()=>{const _e=document.querySelector(`memori-client[memoriname="${n.name}"]`)||document.querySelector(`memori-client[memoriid="${n.memoriID}"]`)||document.querySelector("memori-client");if(!_e)return;const He={attributes:!0,childList:!1,subtree:!1},ut=(At,pt)=>{var Lt,Ht,Mn;for(const en of At)en.type==="attributes"&&((Lt=en.attributeName)===null||Lt===void 0?void 0:Lt.toLowerCase())==="authtoken"&&(en.target.nodeName==="MEMORI-CLIENT"?(re(en.target.getAttribute("authtoken")||void 0),Bs=en.target.getAttribute("authtoken")||void 0):(re(((Mn=(Ht=en.target)===null||Ht===void 0?void 0:Ht.parentElement)===null||Mn===void 0?void 0:Mn.getAttribute("authtoken"))||void 0),Bs=en.target.getAttribute("authtoken")||void 0))},ot=new MutationObserver(ut);return ot.observe(_e,He),()=>{ot.disconnect()}},[]);const[Ki,Js]=D.useState(),Il=D.useCallback(async()=>{if(!(!bn||!(n!=null&&n.enableBoardOfExperts)))try{const{experts:_e,count:He,...ut}=await Mr(bn);ut.resultCode===0?Js(_e):console.warn("Error fetching experts",ut)}catch(_e){console.warn(_e)}},[bn,n==null?void 0:n.enableBoardOfExperts]);D.useEffect(()=>{Il()},[bn,Il]);const bl=n.enableDeepThought&&!!Yn&&!!(Re!=null&&Re.userID)&&(Re==null?void 0:Re.pAndCUAccepted),i0=se==null?void 0:se.billingDelegation,[td,hp]=D.useState(!0),pu=D.useCallback(async()=>{if(se!=null&&se.billingDelegation)try{const _e=await F4e({operation:bl?"dt_session_creation":"session_creation",baseUrl:P,userID:t,userName:r,tenant:i});_e.enough?hp(!0):(hp(!1),console.warn("Not enough credits. Required:",_e.required))}catch(_e){console.debug(_e)}},[se==null?void 0:se.billingDelegation,bl]);D.useEffect(()=>{se!=null&&se.billingDelegation&&pu()},[se==null?void 0:se.billingDelegation,bl]);const Th=N===void 0?l!=="TOTEM"&&l!=="WEBSITE_ASSISTANT"&&l!=="HIDDEN_CHAT":!N,fp={memori:n,tenant:se,history:uc,showShare:(Je=d??(Ie==null?void 0:Ie.showShare))!==null&&Je!==void 0?Je:!0,position:ss,setShowPositionDrawer:co,setShowSettingsDrawer:mh,setShowKnownFactsDrawer:gn,setShowExpertsDrawer:$u,enableAudio:(ft=Y??(Ie==null?void 0:Ie.enableAudio))!==null&&ft!==void 0?ft:!0,showSpeaker:!!Q,speakerMuted:Os||n_,setSpeakerMuted:_e=>{if(n_=!!_e,tu(_e),Ei("muteSpeaker",!!_e),_e)Go();else{Cr=new LE;let He=Cr.createBuffer(1,1e4,22050),ut=Cr.createBufferSource();ut.buffer=He,ut.connect(Cr.destination)}},showSettings:C,hasUserActivatedSpeak:xr,showReload:gr==="TOTEM",showClear:x,clearHistory:()=>_a(_e=>_e.slice(-1)),showLogin:R,setShowLoginDrawer:$e,loginToken:Yn,user:Re,sessionID:bn},xh={memori:n,integration:a,integrationConfig:Ie,tenant:se,instruct:nr,avatar3dVisible:mc,setAvatar3dVisible:gc,hasUserActivatedSpeak:xr,isPlayingAudio:Ri&&!Os,loading:!!rr,baseUrl:P,apiUrl:lt.constants.BACKEND_URL,enablePositionControls:vh,setEnablePositionControls:yh,avatarType:lc},fo={memori:n,tenant:se,language:Sn,userLang:at,setUserLang:$n,baseUrl:P,apiUrl:lt.constants.BACKEND_URL,position:ss,openPositionDrawer:()=>co(!0),integrationConfig:Ie,instruct:nr,sessionId:bn,clickedStart:Qt,isMultilanguageEnabled:ye,onClickStart:Ls,initializeTTS:au,isUserLoggedIn:!!Yn&&!!(Re!=null&&Re.userID),hasInitialSession:!!K,notEnoughCredits:i0&&!td,showLogin:R,setShowLoginDrawer:$e,user:Re},mu={memori:n,sessionID:bn||"",tenant:se,translateTo:ye&&at.toUpperCase()!==((wt=(Ct=(Bt=(je=(zt=n.culture)===null||zt===void 0?void 0:zt.split("-"))===null||je===void 0?void 0:je[0])!==null&&Bt!==void 0?Bt:ue.language)!==null&&Ct!==void 0?Ct:"IT")===null||wt===void 0?void 0:wt.toUpperCase())?at:void 0,baseUrl:P,apiUrl:lt.constants.BACKEND_URL,layout:l,memoriTyping:rr,typingText:Tn,showTypingText:T,history:Th?uc:uc.slice(-2),authToken:(qt=(xt=Yn??Bs)!==null&&xt!==void 0?xt:ge==null?void 0:ge.loginToken)!==null&&qt!==void 0?qt:ee,dialogState:Et,setDialogState:Aa,pushMessage:Zt,simulateUserPrompt:fu,showDates:y,showContextPerLine:A,showAIicon:ls,showWhyThisAnswer:kr,showCopyButton:m,showTranslationOriginal:g,client:lt,selectReceiverTag:cs,preview:h,sendOnEnter:Ho,setSendOnEnter:Tl,microphoneMode:Lo?"CONTINUOUS":"HOLD_TO_TALK",attachmentsMenuOpen:du,setAttachmentsMenuOpen:Zu,instruct:nr,showInputs:v,showMicrophone:!!Q,userMessage:Sl,onChangeUserMessage:qu,sendMessage:(_e,He)=>{Go(),as(),Ju(_e,He),_s(""),As()},stopListening:Ji,startListening:Es,stopAudio:Go,resetTranscript:As,listening:yi,setEnableFocusChatInput:qi,isPlayingAudio:Ri,customMediaRenderer:Ke,user:Re,userAvatar:xe,experts:Ki,useMathFormatting:qn},s0=a&&si?w.jsx("div",{className:"memori--global-background",children:w.jsx("div",{className:"memori--global-background-image",style:{backgroundImage:si}})}):w.jsx("div",{className:"memori--global-background no-background-image"}),vc=a?w.jsx("style",{dangerouslySetInnerHTML:{__html:Nr}}):null,o0=_e=>{ma(_e==="instruct"),zr(!1),Jt(!1)},pp={canInstruct:!!n.giverTag,instruct:!!nr,onChangeMode:o0},a0=w.jsx(C4e,{tenant:se,userLang:at,integrationID:a==null?void 0:a.integrationID,memoriHash:`${n.ownerTenantName}-${n.ownerUserName}-${n.name}`}),yc=c||(gr==="TOTEM"?L4e:gr==="CHAT"?k4e:gr==="FULLPAGE"?AU:gr==="WEBSITE_ASSISTANT"?B4e:gr==="HIDDEN_CHAT"?z4e:gr==="ZOOMED_FULL_BODY"?U4e:AU);return w.jsxs("div",{className:er("memori","memori-widget",`memori-layout-${l.toLowerCase()}`,`memori-controls-${gh.toLowerCase()}`,`memori--avatar-${(Ie==null?void 0:Ie.avatar)||"default"}`,{"memori--preview":h,"memori--embed":f,"memori--with-integration":a,"memori--with-speechkey":!!Q,"memori--active":xr,"memori--hide-emissions":_h,"memori--has-active-session":!!bn}),"data-memori-name":n==null?void 0:n.name,"data-memori-id":n==null?void 0:n.engineMemoriID,"data-memori-secondary-id":n==null?void 0:n.memoriID,"data-memori-session-id":bn,"data-memori-integration":a==null?void 0:a.integrationID,"data-memori-engine-state":JSON.stringify({...Et,sessionID:bn}),style:{height:M},children:[w.jsx(yc,{Header:E4e,headerProps:fp,Avatar:GRe,avatarProps:xh,Chat:Zbe,chatProps:mu,StartPanel:rMe,startPanelProps:fo,integrationStyle:vc,integrationBackground:s0,ChangeMode:HRe,changeModeProps:pp,poweredBy:a0,sessionId:bn,hasUserActivatedSpeak:xr,showInstruct:u,loading:rn}),w.jsx("audio",{id:"memori-audio",style:{display:"none"},src:"https://aisuru.com/intro.mp3"}),et&&w.jsx(UTe,{withModal:!0,pwdOrTokens:uo,openModal:!!uo,setPwdOrTokens:Pi,showTokens:n.privacyType==="SECRET",onFinish:async _e=>{var He,ut,ot,At;_e.password&&Wu(_e.password),_e.password&&(EU=_e.password),_e.tokens&&up(_e.tokens),Qi(!bn,_e.password,_e.tokens,nr?n.giverTag:W==null?void 0:W.tag,nr?n.giverPIN:W==null?void 0:W.pin,{PATHNAME:(He=window.location.pathname)===null||He===void 0?void 0:He.toUpperCase(),ROUTE:((At=(ot=(ut=window.location.pathname)===null||ut===void 0?void 0:ut.split("/"))===null||ot===void 0?void 0:ot.pop())===null||At===void 0?void 0:At.toUpperCase())||"",...$||{}},B,_i).then(pt=>{Pi(null),Ls(pt||void 0)}).catch(()=>{Pi(null),Xt(!0)})},minimumNumberOfRecoveryTokens:(cn=n==null?void 0:n.minimumNumberOfRecoveryTokens)!==null&&cn!==void 0?cn:1}),et&&w.jsx(w4e,{visible:ou,minAge:Sa,onClose:_e=>{var He,ut,ot,At;_e?(su(_e),Ei("birthDate",_e),Qi(!bn,EU||Xn||(n==null?void 0:n.secretToken),Bo,nr?n.giverTag:W==null?void 0:W.tag,nr?n.giverPIN:W==null?void 0:W.pin,{PATHNAME:(He=window.location.pathname)===null||He===void 0?void 0:He.toUpperCase(),ROUTE:((At=(ot=(ut=window.location.pathname)===null||ut===void 0?void 0:ut.split("/"))===null||ot===void 0?void 0:ot.pop())===null||At===void 0?void 0:At.toUpperCase())||"",...$||{}},B,_e).then(pt=>{Fo(!1),Pi(null),Ls(pt||void 0)}).catch(()=>{Fo(!1),Xt(!0)})):(Fo(!1),Jt(!1))}}),is&&w.jsx(x4e,{layout:gr,open:!!is,onClose:()=>mh(!1),microphoneMode:Lo?"CONTINUOUS":"HOLD_TO_TALK",continuousSpeechTimeout:Rr,setMicrophoneMode:_e=>ko(_e==="CONTINUOUS"),setContinuousSpeechTimeout:ya,controlsPosition:gh,setControlsPosition:nu,hideEmissions:_h,setHideEmissions:iu,avatarType:lc,setAvatarType:ru,enablePositionControls:vh,setEnablePositionControls:yh,isAvatar3d:!!(Ie!=null&&Ie.avatarURL),additionalSettings:Se}),ga&&w.jsx(vTe,{memori:n,open:!!ga,venue:ss,setVenue:ho,onClose:_e=>{_e&&Wn(_e),co(!1)}}),An&&bn&&w.jsx(M4e,{apiClient:lt,memori:n,sessionID:bn,visible:An,closeDrawer:()=>gn(!1)}),va&&!!Ki&&w.jsx(R4e,{apiUrl:lt.constants.BACKEND_URL,baseUrl:P,tenant:se,experts:Ki,open:va,onClose:()=>$u(!1)}),Le&&(se==null?void 0:se.id)&&w.jsx(D4e,{tenant:se,apiClient:lt,open:!!Le,user:Re,loginToken:Yn,onClose:()=>$e(!1),onLogin:(_e,He)=>{qe(_e),re(He),Bs=He,$e(!1),Ei("loginToken",He)},onLogout:()=>{Yn&&lt.backend.userLogout(Yn).then(()=>{$e(!1),qe(void 0),re(void 0),Bs=void 0,mR("loginToken")})}})]})},CU={id:"aisuru.com",theme:"aisuru",config:{name:"Memori",showNewUser:!1,requirePosition:!1}},$4e=async(n,e)=>{const t=e?new URL(`${e.startsWith("http")?"":e.includes("localhost")?"http://":"https://"}${e}`).origin:"https://aisuru.com";try{const r=await fetch(`${t}/api/tenant/${n}`),{tenant:i}=await r.json();return i||{...CU,tenantID:n}}catch{return{...CU,tenantID:n}}};function Rf(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function uP(n,e){return uP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},uP(n,e)}function ab(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&uP(n,e)}function GA(n,e){if(e&&(No(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rf(n)}function Fu(n){return Fu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Fu(n)}function W4e(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function q4e(n){return nV(n)||W4e(n)||rV(n)||iV()}function wU(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function TU(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?wU(Object(t),!0).forEach(function(r){gl(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):wU(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var Q4e={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){console&&console[e]&&console[e].apply(console,t)}},J4e=function(){function n(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Wc(this,n),this.init(e,t)}return qc(n,[{key:"init",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=r.prefix||"i18next:",this.logger=t||Q4e,this.options=r,this.debug=r.debug}},{key:"setDebug",value:function(t){this.debug=t}},{key:"log",value:function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return this.forward(r,"log","",!0)}},{key:"warn",value:function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return this.forward(r,"warn","",!0)}},{key:"error",value:function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return this.forward(r,"error","")}},{key:"deprecate",value:function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return this.forward(r,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(t,r,i,s){return s&&!this.debug?null:(typeof t[0]=="string"&&(t[0]="".concat(i).concat(this.prefix," ").concat(t[0])),this.logger[r](t))}},{key:"create",value:function(t){return new n(this.logger,TU(TU({},{prefix:"".concat(this.prefix,":").concat(t,":")}),this.options))}},{key:"clone",value:function(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new n(this.logger,t)}}]),n}(),Ru=new J4e,Vf=function(){function n(){Wc(this,n),this.observers={}}return qc(n,[{key:"on",value:function(t,r){var i=this;return t.split(" ").forEach(function(s){i.observers[s]=i.observers[s]||[],i.observers[s].push(r)}),this}},{key:"off",value:function(t,r){if(this.observers[t]){if(!r){delete this.observers[t];return}this.observers[t]=this.observers[t].filter(function(i){return i!==r})}}},{key:"emit",value:function(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];if(this.observers[t]){var o=[].concat(this.observers[t]);o.forEach(function(l){l.apply(void 0,i)})}if(this.observers["*"]){var a=[].concat(this.observers["*"]);a.forEach(function(l){l.apply(l,[t].concat(i))})}}}]),n}();function r_(){var n,e,t=new Promise(function(r,i){n=r,e=i});return t.resolve=n,t.reject=e,t}function xU(n){return n==null?"":""+n}function K4e(n,e,t){n.forEach(function(r){e[r]&&(t[r]=e[r])})}function l5(n,e,t){function r(a){return a&&a.indexOf("###")>-1?a.replace(/###/g,"."):a}function i(){return!n||typeof n=="string"}for(var s=typeof e!="string"?[].concat(e):e.split(".");s.length>1;){if(i())return{};var o=r(s.shift());!n[o]&&t&&(n[o]=new t),Object.prototype.hasOwnProperty.call(n,o)?n=n[o]:n={}}return i()?{}:{obj:n,k:r(s.shift())}}function IU(n,e,t){var r=l5(n,e,Object),i=r.obj,s=r.k;i[s]=t}function Y4e(n,e,t,r){var i=l5(n,e,Object),s=i.obj,o=i.k;s[o]=s[o]||[],r&&(s[o]=s[o].concat(t)),r||s[o].push(t)}function Ix(n,e){var t=l5(n,e),r=t.obj,i=t.k;if(r)return r[i]}function bU(n,e,t){var r=Ix(n,t);return r!==void 0?r:Ix(e,t)}function EX(n,e,t){for(var r in e)r!=="__proto__"&&r!=="constructor"&&(r in n?typeof n[r]=="string"||n[r]instanceof String||typeof e[r]=="string"||e[r]instanceof String?t&&(n[r]=e[r]):EX(n[r],e[r],t):n[r]=e[r]);return n}function G0(n){return n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var X4e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function Z4e(n){return typeof n=="string"?n.replace(/[&<>"'\/]/g,function(e){return X4e[e]}):n}var lb=typeof window<"u"&&window.navigator&&typeof window.navigator.userAgentData>"u"&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,eNe=[" ",",","?","!",";"];function tNe(n,e,t){e=e||"",t=t||"";var r=eNe.filter(function(a){return e.indexOf(a)<0&&t.indexOf(a)<0});if(r.length===0)return!0;var i=new RegExp("(".concat(r.map(function(a){return a==="?"?"\\?":a}).join("|"),")")),s=!i.test(n);if(!s){var o=n.indexOf(t);o>0&&!i.test(n.substring(0,o))&&(s=!0)}return s}function MU(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function ew(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?MU(Object(t),!0).forEach(function(r){gl(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):MU(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function nNe(n){var e=rNe();return function(){var r=Fu(n),i;if(e){var s=Fu(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return GA(this,i)}}function rNe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function CX(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(n){if(n[e])return n[e];for(var r=e.split(t),i=n,s=0;s<r.length;++s){if(!i||typeof i[r[s]]=="string"&&s+1<r.length)return;if(i[r[s]]===void 0){for(var o=2,a=r.slice(s,s+o).join(t),l=i[a];l===void 0&&r.length>s+o;)o++,a=r.slice(s,s+o).join(t),l=i[a];if(l===void 0)return;if(l===null)return null;if(e.endsWith(a)){if(typeof l=="string")return l;if(a&&typeof l[a]=="string")return l[a]}var c=r.slice(s+o).join(t);return c?CX(l,c,t):void 0}i=i[r[s]]}return i}}var iNe=function(n){ab(t,n);var e=nNe(t);function t(r){var i,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return Wc(this,t),i=e.call(this),lb&&Vf.call(Rf(i)),i.data=r||{},i.options=s,i.options.keySeparator===void 0&&(i.options.keySeparator="."),i.options.ignoreJSONStructure===void 0&&(i.options.ignoreJSONStructure=!0),i}return qc(t,[{key:"addNamespaces",value:function(i){this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}},{key:"removeNamespaces",value:function(i){var s=this.options.ns.indexOf(i);s>-1&&this.options.ns.splice(s,1)}},{key:"getResource",value:function(i,s,o){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,c=a.ignoreJSONStructure!==void 0?a.ignoreJSONStructure:this.options.ignoreJSONStructure,u=[i,s];o&&typeof o!="string"&&(u=u.concat(o)),o&&typeof o=="string"&&(u=u.concat(l?o.split(l):o)),i.indexOf(".")>-1&&(u=i.split("."));var d=Ix(this.data,u);return d||!c||typeof o!="string"?d:CX(this.data&&this.data[i]&&this.data[i][s],o,l)}},{key:"addResource",value:function(i,s,o,a){var l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},c=this.options.keySeparator;c===void 0&&(c=".");var u=[i,s];o&&(u=u.concat(c?o.split(c):o)),i.indexOf(".")>-1&&(u=i.split("."),a=s,s=u[1]),this.addNamespaces(s),IU(this.data,u,a),l.silent||this.emit("added",i,s,o,a)}},{key:"addResources",value:function(i,s,o){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var l in o)(typeof o[l]=="string"||Object.prototype.toString.apply(o[l])==="[object Array]")&&this.addResource(i,s,l,o[l],{silent:!0});a.silent||this.emit("added",i,s,o)}},{key:"addResourceBundle",value:function(i,s,o,a,l){var c=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},u=[i,s];i.indexOf(".")>-1&&(u=i.split("."),a=o,o=s,s=u[1]),this.addNamespaces(s);var d=Ix(this.data,u)||{};a?EX(d,o,l):d=ew(ew({},d),o),IU(this.data,u,d),c.silent||this.emit("added",i,s,o)}},{key:"removeResourceBundle",value:function(i,s){this.hasResourceBundle(i,s)&&delete this.data[i][s],this.removeNamespaces(s),this.emit("removed",i,s)}},{key:"hasResourceBundle",value:function(i,s){return this.getResource(i,s)!==void 0}},{key:"getResourceBundle",value:function(i,s){return s||(s=this.options.defaultNS),this.options.compatibilityAPI==="v1"?ew(ew({},{}),this.getResource(i,s)):this.getResource(i,s)}},{key:"getDataByLanguage",value:function(i){return this.data[i]}},{key:"hasLanguageSomeTranslations",value:function(i){var s=this.getDataByLanguage(i),o=s&&Object.keys(s)||[];return!!o.find(function(a){return s[a]&&Object.keys(s[a]).length>0})}},{key:"toJSON",value:function(){return this.data}}]),t}(Vf),wX={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,r,i,s){var o=this;return e.forEach(function(a){o.processors[a]&&(t=o.processors[a].process(t,r,i,s))}),t}};function RU(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Jo(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?RU(Object(t),!0).forEach(function(r){gl(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):RU(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function sNe(n){var e=oNe();return function(){var r=Fu(n),i;if(e){var s=Fu(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return GA(this,i)}}function oNe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var NU={},PU=function(n){ab(t,n);var e=sNe(t);function t(r){var i,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Wc(this,t),i=e.call(this),lb&&Vf.call(Rf(i)),K4e(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],r,Rf(i)),i.options=s,i.options.keySeparator===void 0&&(i.options.keySeparator="."),i.logger=Ru.create("translator"),i}return qc(t,[{key:"changeLanguage",value:function(i){i&&(this.language=i)}},{key:"exists",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(i==null)return!1;var o=this.resolve(i,s);return o&&o.res!==void 0}},{key:"extractFromKey",value:function(i,s){var o=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;o===void 0&&(o=":");var a=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,l=s.ns||this.options.defaultNS||[],c=o&&i.indexOf(o)>-1,u=!this.options.userDefinedKeySeparator&&!s.keySeparator&&!this.options.userDefinedNsSeparator&&!s.nsSeparator&&!tNe(i,o,a);if(c&&!u){var d=i.match(this.interpolator.nestingRegexp);if(d&&d.length>0)return{key:i,namespaces:l};var h=i.split(o);(o!==a||o===a&&this.options.ns.indexOf(h[0])>-1)&&(l=h.shift()),i=h.join(a)}return typeof l=="string"&&(l=[l]),{key:i,namespaces:l}}},{key:"translate",value:function(i,s,o){var a=this;if(No(s)!=="object"&&this.options.overloadTranslationOptionHandler&&(s=this.options.overloadTranslationOptionHandler(arguments)),s||(s={}),i==null)return"";Array.isArray(i)||(i=[String(i)]);var l=s.returnDetails!==void 0?s.returnDetails:this.options.returnDetails,c=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,u=this.extractFromKey(i[i.length-1],s),d=u.key,h=u.namespaces,f=h[h.length-1],m=s.lng||this.language,g=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(m&&m.toLowerCase()==="cimode"){if(g){var v=s.nsSeparator||this.options.nsSeparator;return l?(y.res="".concat(f).concat(v).concat(d),y):"".concat(f).concat(v).concat(d)}return l?(y.res=d,y):d}var y=this.resolve(i,s),A=y&&y.res,C=y&&y.usedKey||d,T=y&&y.exactUsedKey||d,x=Object.prototype.toString.apply(A),R=["[object Number]","[object Function]","[object RegExp]"],N=s.joinArrays!==void 0?s.joinArrays:this.options.joinArrays,M=!this.i18nFormat||this.i18nFormat.handleAsObject,O=typeof A!="string"&&typeof A!="boolean"&&typeof A!="number";if(M&&A&&O&&R.indexOf(x)<0&&!(typeof N=="string"&&x==="[object Array]")){if(!s.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var P=this.options.returnedObjectHandler?this.options.returnedObjectHandler(C,A,Jo(Jo({},s),{},{ns:h})):"key '".concat(d," (").concat(this.language,")' returned an object instead of string.");return l?(y.res=P,y):P}if(c){var z=x==="[object Array]",V=z?[]:{},$=z?T:C;for(var B in A)if(Object.prototype.hasOwnProperty.call(A,B)){var q="".concat($).concat(c).concat(B);V[B]=this.translate(q,Jo(Jo({},s),{joinArrays:!1,ns:h})),V[B]===q&&(V[B]=A[B])}A=V}}else if(M&&typeof N=="string"&&x==="[object Array]")A=A.join(N),A&&(A=this.extendTranslation(A,i,s,o));else{var K=!1,se=!1,W=s.count!==void 0&&typeof s.count!="string",ee=t.hasDefaultValue(s),Q=W?this.pluralResolver.getSuffix(m,s.count,s):"",Y=s["defaultValue".concat(Q)]||s.defaultValue;!this.isValidLookup(A)&&ee&&(K=!0,A=Y),this.isValidLookup(A)||(se=!0,A=d);var ae=s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,fe=ae&&se?void 0:A,we=ee&&Y!==A&&this.options.updateMissing;if(se||K||we){if(this.logger.log(we?"updateKey":"missingKey",m,f,d,we?Y:A),c){var ge=this.resolve(d,Jo(Jo({},s),{},{keySeparator:!1}));ge&&ge.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var Se=[],Ke=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Ke&&Ke[0])for(var xe=0;xe<Ke.length;xe++)Se.push(Ke[xe]);else this.options.saveMissingTo==="all"?Se=this.languageUtils.toResolveHierarchy(s.lng||this.language):Se.push(s.lng||this.language);var Qe=function(Ve,te,ce){var de=ee&&ce!==A?ce:fe;a.options.missingKeyHandler?a.options.missingKeyHandler(Ve,f,te,de,we,s):a.backendConnector&&a.backendConnector.saveMissing&&a.backendConnector.saveMissing(Ve,f,te,de,we,s),a.emit("missingKey",Ve,f,te,A)};this.options.saveMissing&&(this.options.saveMissingPlurals&&W?Se.forEach(function(We){a.pluralResolver.getSuffixes(We,s).forEach(function(Ve){Qe([We],d+Ve,s["defaultValue".concat(Ve)]||Y)})}):Qe(Se,d,Y))}A=this.extendTranslation(A,i,s,y,o),se&&A===d&&this.options.appendNamespaceToMissingKey&&(A="".concat(f,":").concat(d)),(se||K)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?A=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(f,":").concat(d):d,K?A:void 0):A=this.options.parseMissingKeyHandler(A))}return l?(y.res=A,y):A}},{key:"extendTranslation",value:function(i,s,o,a,l){var c=this;if(this.i18nFormat&&this.i18nFormat.parse)i=this.i18nFormat.parse(i,Jo(Jo({},this.options.interpolation.defaultVariables),o),a.usedLng,a.usedNS,a.usedKey,{resolved:a});else if(!o.skipInterpolation){o.interpolation&&this.interpolator.init(Jo(Jo({},o),{interpolation:Jo(Jo({},this.options.interpolation),o.interpolation)}));var u=typeof i=="string"&&(o&&o.interpolation&&o.interpolation.skipOnVariables!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),d;if(u){var h=i.match(this.interpolator.nestingRegexp);d=h&&h.length}var f=o.replace&&typeof o.replace!="string"?o.replace:o;if(this.options.interpolation.defaultVariables&&(f=Jo(Jo({},this.options.interpolation.defaultVariables),f)),i=this.interpolator.interpolate(i,f,o.lng||this.language,o),u){var m=i.match(this.interpolator.nestingRegexp),g=m&&m.length;d<g&&(o.nest=!1)}o.nest!==!1&&(i=this.interpolator.nest(i,function(){for(var A=arguments.length,C=new Array(A),T=0;T<A;T++)C[T]=arguments[T];return l&&l[0]===C[0]&&!o.context?(c.logger.warn("It seems you are nesting recursively key: ".concat(C[0]," in key: ").concat(s[0])),null):c.translate.apply(c,C.concat([s]))},o)),o.interpolation&&this.interpolator.reset()}var v=o.postProcess||this.options.postProcess,y=typeof v=="string"?[v]:v;return i!=null&&y&&y.length&&o.applyPostProcessor!==!1&&(i=wX.handle(y,i,s,this.options&&this.options.postProcessPassResolved?Jo({i18nResolved:a},o):o,this)),i}},{key:"resolve",value:function(i){var s=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a,l,c,u,d;return typeof i=="string"&&(i=[i]),i.forEach(function(h){if(!s.isValidLookup(a)){var f=s.extractFromKey(h,o),m=f.key;l=m;var g=f.namespaces;s.options.fallbackNS&&(g=g.concat(s.options.fallbackNS));var v=o.count!==void 0&&typeof o.count!="string",y=v&&!o.ordinal&&o.count===0&&s.pluralResolver.shouldUseIntlApi(),A=o.context!==void 0&&(typeof o.context=="string"||typeof o.context=="number")&&o.context!=="",C=o.lngs?o.lngs:s.languageUtils.toResolveHierarchy(o.lng||s.language,o.fallbackLng);g.forEach(function(T){s.isValidLookup(a)||(d=T,!NU["".concat(C[0],"-").concat(T)]&&s.utils&&s.utils.hasLoadedNamespace&&!s.utils.hasLoadedNamespace(d)&&(NU["".concat(C[0],"-").concat(T)]=!0,s.logger.warn('key "'.concat(l,'" for languages "').concat(C.join(", "),`" won't get resolved as namespace "`).concat(d,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),C.forEach(function(x){if(!s.isValidLookup(a)){u=x;var R=[m];if(s.i18nFormat&&s.i18nFormat.addLookupKeys)s.i18nFormat.addLookupKeys(R,m,x,T,o);else{var N;v&&(N=s.pluralResolver.getSuffix(x,o.count,o));var M="".concat(s.options.pluralSeparator,"zero");if(v&&(R.push(m+N),y&&R.push(m+M)),A){var O="".concat(m).concat(s.options.contextSeparator).concat(o.context);R.push(O),v&&(R.push(O+N),y&&R.push(O+M))}}for(var P;P=R.pop();)s.isValidLookup(a)||(c=P,a=s.getResource(x,T,P,o))}}))})}}),{res:a,usedKey:l,exactUsedKey:c,usedLng:u,usedNS:d}}},{key:"isValidLookup",value:function(i){return i!==void 0&&!(!this.options.returnNull&&i===null)&&!(!this.options.returnEmptyString&&i==="")}},{key:"getResource",value:function(i,s,o){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(i,s,o,a):this.resourceStore.getResource(i,s,o,a)}}],[{key:"hasDefaultValue",value:function(i){var s="defaultValue";for(var o in i)if(Object.prototype.hasOwnProperty.call(i,o)&&s===o.substring(0,s.length)&&i[o]!==void 0)return!0;return!1}}]),t}(Vf);function yR(n){return n.charAt(0).toUpperCase()+n.slice(1)}var aNe=function(){function n(e){Wc(this,n),this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Ru.create("languageUtils")}return qc(n,[{key:"getScriptPartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return null;var r=t.split("-");return r.length===2||(r.pop(),r[r.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(r.join("-"))}},{key:"getLanguagePartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return t;var r=t.split("-");return this.formatLanguageCode(r[0])}},{key:"formatLanguageCode",value:function(t){if(typeof t=="string"&&t.indexOf("-")>-1){var r=["hans","hant","latn","cyrl","cans","mong","arab"],i=t.split("-");return this.options.lowerCaseLng?i=i.map(function(s){return s.toLowerCase()}):i.length===2?(i[0]=i[0].toLowerCase(),i[1]=i[1].toUpperCase(),r.indexOf(i[1].toLowerCase())>-1&&(i[1]=yR(i[1].toLowerCase()))):i.length===3&&(i[0]=i[0].toLowerCase(),i[1].length===2&&(i[1]=i[1].toUpperCase()),i[0]!=="sgn"&&i[2].length===2&&(i[2]=i[2].toUpperCase()),r.indexOf(i[1].toLowerCase())>-1&&(i[1]=yR(i[1].toLowerCase())),r.indexOf(i[2].toLowerCase())>-1&&(i[2]=yR(i[2].toLowerCase()))),i.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}},{key:"isSupportedCode",value:function(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}},{key:"getBestMatchFromCodes",value:function(t){var r=this;if(!t)return null;var i;return t.forEach(function(s){if(!i){var o=r.formatLanguageCode(s);(!r.options.supportedLngs||r.isSupportedCode(o))&&(i=o)}}),!i&&this.options.supportedLngs&&t.forEach(function(s){if(!i){var o=r.getLanguagePartFromCode(s);if(r.isSupportedCode(o))return i=o;i=r.options.supportedLngs.find(function(a){if(a.indexOf(o)===0)return a})}}),i||(i=this.getFallbackCodes(this.options.fallbackLng)[0]),i}},{key:"getFallbackCodes",value:function(t,r){if(!t)return[];if(typeof t=="function"&&(t=t(r)),typeof t=="string"&&(t=[t]),Object.prototype.toString.apply(t)==="[object Array]")return t;if(!r)return t.default||[];var i=t[r];return i||(i=t[this.getScriptPartFromCode(r)]),i||(i=t[this.formatLanguageCode(r)]),i||(i=t[this.getLanguagePartFromCode(r)]),i||(i=t.default),i||[]}},{key:"toResolveHierarchy",value:function(t,r){var i=this,s=this.getFallbackCodes(r||this.options.fallbackLng||[],t),o=[],a=function(c){c&&(i.isSupportedCode(c)?o.push(c):i.logger.warn("rejecting language code not found in supportedLngs: ".concat(c)))};return typeof t=="string"&&t.indexOf("-")>-1?(this.options.load!=="languageOnly"&&a(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&a(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&a(this.getLanguagePartFromCode(t))):typeof t=="string"&&a(this.formatLanguageCode(t)),s.forEach(function(l){o.indexOf(l)<0&&a(i.formatLanguageCode(l))}),o}}]),n}(),lNe=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],cNe={1:function(e){return+(e>1)},2:function(e){return+(e!=1)},3:function(e){return 0},4:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},5:function(e){return e==0?0:e==1?1:e==2?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},6:function(e){return e==1?0:e>=2&&e<=4?1:2},7:function(e){return e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},8:function(e){return e==1?0:e==2?1:e!=8&&e!=11?2:3},9:function(e){return+(e>=2)},10:function(e){return e==1?0:e==2?1:e<7?2:e<11?3:4},11:function(e){return e==1||e==11?0:e==2||e==12?1:e>2&&e<20?2:3},12:function(e){return+(e%10!=1||e%100==11)},13:function(e){return+(e!==0)},14:function(e){return e==1?0:e==2?1:e==3?2:3},15:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2},16:function(e){return e%10==1&&e%100!=11?0:e!==0?1:2},17:function(e){return e==1||e%10==1&&e%100!=11?0:1},18:function(e){return e==0?0:e==1?1:2},19:function(e){return e==1?0:e==0||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3},20:function(e){return e==1?0:e==0||e%100>0&&e%100<20?1:2},21:function(e){return e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0},22:function(e){return e==1?0:e==2?1:(e<0||e>10)&&e%10==0?2:3}},uNe=["v1","v2","v3"],OU={zero:0,one:1,two:2,few:3,many:4,other:5};function dNe(){var n={};return lNe.forEach(function(e){e.lngs.forEach(function(t){n[t]={numbers:e.nr,plurals:cNe[e.fc]}})}),n}var hNe=function(){function n(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Wc(this,n),this.languageUtils=e,this.options=t,this.logger=Ru.create("pluralResolver"),(!this.options.compatibilityJSON||this.options.compatibilityJSON==="v4")&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=dNe()}return qc(n,[{key:"addRule",value:function(t,r){this.rules[t]=r}},{key:"getRule",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(t,{type:r.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}},{key:"needsPlural",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.getRule(t,r);return this.shouldUseIntlApi()?i&&i.resolvedOptions().pluralCategories.length>1:i&&i.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(t,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(t,i).map(function(s){return"".concat(r).concat(s)})}},{key:"getSuffixes",value:function(t){var r=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getRule(t,i);return s?this.shouldUseIntlApi()?s.resolvedOptions().pluralCategories.sort(function(o,a){return OU[o]-OU[a]}).map(function(o){return"".concat(r.options.prepend).concat(o)}):s.numbers.map(function(o){return r.getSuffix(t,o,i)}):[]}},{key:"getSuffix",value:function(t,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=this.getRule(t,i);return s?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(s.select(r)):this.getSuffixRetroCompatible(s,r):(this.logger.warn("no plural rule found for: ".concat(t)),"")}},{key:"getSuffixRetroCompatible",value:function(t,r){var i=this,s=t.noAbs?t.plurals(r):t.plurals(Math.abs(r)),o=t.numbers[s];this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1&&(o===2?o="plural":o===1&&(o=""));var a=function(){return i.options.prepend&&o.toString()?i.options.prepend+o.toString():o.toString()};return this.options.compatibilityJSON==="v1"?o===1?"":typeof o=="number"?"_plural_".concat(o.toString()):a():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1?a():this.options.prepend&&s.toString()?this.options.prepend+s.toString():s.toString()}},{key:"shouldUseIntlApi",value:function(){return!uNe.includes(this.options.compatibilityJSON)}}]),n}();function DU(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function xc(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?DU(Object(t),!0).forEach(function(r){gl(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):DU(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var fNe=function(){function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Wc(this,n),this.logger=Ru.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||function(t){return t},this.init(e)}return qc(n,[{key:"init",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});var r=t.interpolation;this.escape=r.escape!==void 0?r.escape:Z4e,this.escapeValue=r.escapeValue!==void 0?r.escapeValue:!0,this.useRawValueToEscape=r.useRawValueToEscape!==void 0?r.useRawValueToEscape:!1,this.prefix=r.prefix?G0(r.prefix):r.prefixEscaped||"{{",this.suffix=r.suffix?G0(r.suffix):r.suffixEscaped||"}}",this.formatSeparator=r.formatSeparator?r.formatSeparator:r.formatSeparator||",",this.unescapePrefix=r.unescapeSuffix?"":r.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":r.unescapeSuffix||"",this.nestingPrefix=r.nestingPrefix?G0(r.nestingPrefix):r.nestingPrefixEscaped||G0("$t("),this.nestingSuffix=r.nestingSuffix?G0(r.nestingSuffix):r.nestingSuffixEscaped||G0(")"),this.nestingOptionsSeparator=r.nestingOptionsSeparator?r.nestingOptionsSeparator:r.nestingOptionsSeparator||",",this.maxReplaces=r.maxReplaces?r.maxReplaces:1e3,this.alwaysFormat=r.alwaysFormat!==void 0?r.alwaysFormat:!1,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var t="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(t,"g");var r="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(r,"g");var i="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(i,"g")}},{key:"interpolate",value:function(t,r,i,s){var o=this,a,l,c,u=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function d(v){return v.replace(/\$/g,"$$$$")}var h=function(y){if(y.indexOf(o.formatSeparator)<0){var A=bU(r,u,y);return o.alwaysFormat?o.format(A,void 0,i,xc(xc(xc({},s),r),{},{interpolationkey:y})):A}var C=y.split(o.formatSeparator),T=C.shift().trim(),x=C.join(o.formatSeparator).trim();return o.format(bU(r,u,T),x,i,xc(xc(xc({},s),r),{},{interpolationkey:T}))};this.resetRegExp();var f=s&&s.missingInterpolationHandler||this.options.missingInterpolationHandler,m=s&&s.interpolation&&s.interpolation.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables,g=[{regex:this.regexpUnescape,safeValue:function(y){return d(y)}},{regex:this.regexp,safeValue:function(y){return o.escapeValue?d(o.escape(y)):d(y)}}];return g.forEach(function(v){for(c=0;a=v.regex.exec(t);){var y=a[1].trim();if(l=h(y),l===void 0)if(typeof f=="function"){var A=f(t,a,s);l=typeof A=="string"?A:""}else if(s&&s.hasOwnProperty(y))l="";else if(m){l=a[0];continue}else o.logger.warn("missed to pass in variable ".concat(y," for interpolating ").concat(t)),l="";else typeof l!="string"&&!o.useRawValueToEscape&&(l=xU(l));var C=v.safeValue(l);if(t=t.replace(a[0],C),m?(v.regex.lastIndex+=l.length,v.regex.lastIndex-=a[0].length):v.regex.lastIndex=0,c++,c>=o.maxReplaces)break}}),t}},{key:"nest",value:function(t,r){var i=this,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o,a,l=xc({},s);l.applyPostProcessor=!1,delete l.defaultValue;function c(f,m){var g=this.nestingOptionsSeparator;if(f.indexOf(g)<0)return f;var v=f.split(new RegExp("".concat(g,"[ ]*{"))),y="{".concat(v[1]);f=v[0],y=this.interpolate(y,l);var A=y.match(/'/g),C=y.match(/"/g);(A&&A.length%2===0&&!C||C.length%2!==0)&&(y=y.replace(/'/g,'"'));try{l=JSON.parse(y),m&&(l=xc(xc({},m),l))}catch(T){return this.logger.warn("failed parsing options string in nesting for key ".concat(f),T),"".concat(f).concat(g).concat(y)}return delete l.defaultValue,f}for(;o=this.nestingRegexp.exec(t);){var u=[],d=!1;if(o[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(o[1])){var h=o[1].split(this.formatSeparator).map(function(f){return f.trim()});o[1]=h.shift(),u=h,d=!0}if(a=r(c.call(this,o[1].trim(),l),l),a&&o[0]===t&&typeof a!="string")return a;typeof a!="string"&&(a=xU(a)),a||(this.logger.warn("missed to resolve ".concat(o[1]," for nesting ").concat(t)),a=""),d&&(a=u.reduce(function(f,m){return i.format(f,m,s.lng,xc(xc({},s),{},{interpolationkey:o[1].trim()}))},a.trim())),t=t.replace(o[0],a),this.regexp.lastIndex=0}return t}}]),n}();function LU(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Yh(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?LU(Object(t),!0).forEach(function(r){gl(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):LU(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function pNe(n){var e=n.toLowerCase().trim(),t={};if(n.indexOf("(")>-1){var r=n.split("(");e=r[0].toLowerCase().trim();var i=r[1].substring(0,r[1].length-1);if(e==="currency"&&i.indexOf(":")<0)t.currency||(t.currency=i.trim());else if(e==="relativetime"&&i.indexOf(":")<0)t.range||(t.range=i.trim());else{var s=i.split(";");s.forEach(function(o){if(o){var a=o.split(":"),l=q4e(a),c=l[0],u=l.slice(1),d=u.join(":").trim().replace(/^'+|'+$/g,"");t[c.trim()]||(t[c.trim()]=d),d==="false"&&(t[c.trim()]=!1),d==="true"&&(t[c.trim()]=!0),isNaN(d)||(t[c.trim()]=parseInt(d,10))}})}}return{formatName:e,formatOptions:t}}function H0(n){var e={};return function(r,i,s){var o=i+JSON.stringify(s),a=e[o];return a||(a=n(i,s),e[o]=a),a(r)}}var mNe=function(){function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Wc(this,n),this.logger=Ru.create("formatter"),this.options=e,this.formats={number:H0(function(t,r){var i=new Intl.NumberFormat(t,r);return function(s){return i.format(s)}}),currency:H0(function(t,r){var i=new Intl.NumberFormat(t,Yh(Yh({},r),{},{style:"currency"}));return function(s){return i.format(s)}}),datetime:H0(function(t,r){var i=new Intl.DateTimeFormat(t,Yh({},r));return function(s){return i.format(s)}}),relativetime:H0(function(t,r){var i=new Intl.RelativeTimeFormat(t,Yh({},r));return function(s){return i.format(s,r.range||"day")}}),list:H0(function(t,r){var i=new Intl.ListFormat(t,Yh({},r));return function(s){return i.format(s)}})},this.init(e)}return qc(n,[{key:"init",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}},i=r.interpolation;this.formatSeparator=i.formatSeparator?i.formatSeparator:i.formatSeparator||","}},{key:"add",value:function(t,r){this.formats[t.toLowerCase().trim()]=r}},{key:"addCached",value:function(t,r){this.formats[t.toLowerCase().trim()]=H0(r)}},{key:"format",value:function(t,r,i,s){var o=this,a=r.split(this.formatSeparator),l=a.reduce(function(c,u){var d=pNe(u),h=d.formatName,f=d.formatOptions;if(o.formats[h]){var m=c;try{var g=s&&s.formatParams&&s.formatParams[s.interpolationkey]||{},v=g.locale||g.lng||s.locale||s.lng||i;m=o.formats[h](c,v,Yh(Yh(Yh({},f),s),g))}catch(y){o.logger.warn(y)}return m}else o.logger.warn("there was no format function for ".concat(h));return c},t);return l}}]),n}();function kU(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function BU(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?kU(Object(t),!0).forEach(function(r){gl(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):kU(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function gNe(n){var e=vNe();return function(){var r=Fu(n),i;if(e){var s=Fu(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return GA(this,i)}}function vNe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function yNe(n,e){n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)}var _Ne=function(n){ab(t,n);var e=gNe(t);function t(r,i,s){var o,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return Wc(this,t),o=e.call(this),lb&&Vf.call(Rf(o)),o.backend=r,o.store=i,o.services=s,o.languageUtils=s.languageUtils,o.options=a,o.logger=Ru.create("backendConnector"),o.waitingReads=[],o.maxParallelReads=a.maxParallelReads||10,o.readingCalls=0,o.maxRetries=a.maxRetries>=0?a.maxRetries:5,o.retryTimeout=a.retryTimeout>=1?a.retryTimeout:350,o.state={},o.queue=[],o.backend&&o.backend.init&&o.backend.init(s,a.backend,a),o}return qc(t,[{key:"queueLoad",value:function(i,s,o,a){var l=this,c={},u={},d={},h={};return i.forEach(function(f){var m=!0;s.forEach(function(g){var v="".concat(f,"|").concat(g);!o.reload&&l.store.hasResourceBundle(f,g)?l.state[v]=2:l.state[v]<0||(l.state[v]===1?u[v]===void 0&&(u[v]=!0):(l.state[v]=1,m=!1,u[v]===void 0&&(u[v]=!0),c[v]===void 0&&(c[v]=!0),h[g]===void 0&&(h[g]=!0)))}),m||(d[f]=!0)}),(Object.keys(c).length||Object.keys(u).length)&&this.queue.push({pending:u,pendingCount:Object.keys(u).length,loaded:{},errors:[],callback:a}),{toLoad:Object.keys(c),pending:Object.keys(u),toLoadLanguages:Object.keys(d),toLoadNamespaces:Object.keys(h)}}},{key:"loaded",value:function(i,s,o){var a=i.split("|"),l=a[0],c=a[1];s&&this.emit("failedLoading",l,c,s),o&&this.store.addResourceBundle(l,c,o),this.state[i]=s?-1:2;var u={};this.queue.forEach(function(d){Y4e(d.loaded,[l],c),yNe(d,i),s&&d.errors.push(s),d.pendingCount===0&&!d.done&&(Object.keys(d.loaded).forEach(function(h){u[h]||(u[h]={});var f=d.loaded[h];f.length&&f.forEach(function(m){u[h][m]===void 0&&(u[h][m]=!0)})}),d.done=!0,d.errors.length?d.callback(d.errors):d.callback())}),this.emit("loaded",u),this.queue=this.queue.filter(function(d){return!d.done})}},{key:"read",value:function(i,s,o){var a=this,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,u=arguments.length>5?arguments[5]:void 0;if(!i.length)return u(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:i,ns:s,fcName:o,tried:l,wait:c,callback:u});return}return this.readingCalls++,this.backend[o](i,s,function(d,h){if(a.readingCalls--,a.waitingReads.length>0){var f=a.waitingReads.shift();a.read(f.lng,f.ns,f.fcName,f.tried,f.wait,f.callback)}if(d&&h&&l<a.maxRetries){setTimeout(function(){a.read.call(a,i,s,o,l+1,c*2,u)},c);return}u(d,h)})}},{key:"prepareLoading",value:function(i,s){var o=this,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),l&&l();typeof i=="string"&&(i=this.languageUtils.toResolveHierarchy(i)),typeof s=="string"&&(s=[s]);var c=this.queueLoad(i,s,a,l);if(!c.toLoad.length)return c.pending.length||l(),null;c.toLoad.forEach(function(u){o.loadOne(u)})}},{key:"load",value:function(i,s,o){this.prepareLoading(i,s,{},o)}},{key:"reload",value:function(i,s,o){this.prepareLoading(i,s,{reload:!0},o)}},{key:"loadOne",value:function(i){var s=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",a=i.split("|"),l=a[0],c=a[1];this.read(l,c,"read",void 0,void 0,function(u,d){u&&s.logger.warn("".concat(o,"loading namespace ").concat(c," for language ").concat(l," failed"),u),!u&&d&&s.logger.log("".concat(o,"loaded namespace ").concat(c," for language ").concat(l),d),s.loaded(i,u,d)})}},{key:"saveMissing",value:function(i,s,o,a,l){var c=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(s)){this.logger.warn('did not save key "'.concat(o,'" as the namespace "').concat(s,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}o==null||o===""||(this.backend&&this.backend.create&&this.backend.create(i,s,o,a,null,BU(BU({},c),{},{isUpdate:l})),!(!i||!i[0])&&this.store.addResource(i[0],s,o,a))}}]),t}(Vf);function SNe(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};if(No(e[1])==="object"&&(t=e[1]),typeof e[1]=="string"&&(t.defaultValue=e[1]),typeof e[2]=="string"&&(t.tDescription=e[2]),No(e[2])==="object"||No(e[3])==="object"){var r=e[3]||e[2];Object.keys(r).forEach(function(i){t[i]=r[i]})}return t},interpolation:{escapeValue:!0,format:function(e,t,r,i){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function FU(n){return typeof n.ns=="string"&&(n.ns=[n.ns]),typeof n.fallbackLng=="string"&&(n.fallbackLng=[n.fallbackLng]),typeof n.fallbackNS=="string"&&(n.fallbackNS=[n.fallbackNS]),n.supportedLngs&&n.supportedLngs.indexOf("cimode")<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),n}function zU(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function _u(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?zU(Object(t),!0).forEach(function(r){gl(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):zU(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function ANe(n){var e=ENe();return function(){var r=Fu(n),i;if(e){var s=Fu(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return GA(this,i)}}function ENe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function tw(){}function CNe(n){var e=Object.getOwnPropertyNames(Object.getPrototypeOf(n));e.forEach(function(t){typeof n[t]=="function"&&(n[t]=n[t].bind(n))})}var bx=function(n){ab(t,n);var e=ANe(t);function t(){var r,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;if(Wc(this,t),r=e.call(this),lb&&Vf.call(Rf(r)),r.options=FU(i),r.services={},r.logger=Ru,r.modules={external:[]},CNe(Rf(r)),s&&!r.isInitialized&&!i.isClone){if(!r.options.initImmediate)return r.init(i,s),GA(r,Rf(r));setTimeout(function(){r.init(i,s)},0)}return r}return qc(t,[{key:"init",value:function(){var i=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;typeof s=="function"&&(o=s,s={}),!s.defaultNS&&s.defaultNS!==!1&&s.ns&&(typeof s.ns=="string"?s.defaultNS=s.ns:s.ns.indexOf("translation")<0&&(s.defaultNS=s.ns[0]));var a=SNe();this.options=_u(_u(_u({},a),this.options),FU(s)),this.options.compatibilityAPI!=="v1"&&(this.options.interpolation=_u(_u({},a.interpolation),this.options.interpolation)),s.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=s.keySeparator),s.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=s.nsSeparator);function l(y){return y?typeof y=="function"?new y:y:null}if(!this.options.isClone){this.modules.logger?Ru.init(l(this.modules.logger),this.options):Ru.init(null,this.options);var c;this.modules.formatter?c=this.modules.formatter:typeof Intl<"u"&&(c=mNe);var u=new aNe(this.options);this.store=new iNe(this.options.resources,this.options);var d=this.services;d.logger=Ru,d.resourceStore=this.store,d.languageUtils=u,d.pluralResolver=new hNe(u,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),c&&(!this.options.interpolation.format||this.options.interpolation.format===a.interpolation.format)&&(d.formatter=l(c),d.formatter.init(d,this.options),this.options.interpolation.format=d.formatter.format.bind(d.formatter)),d.interpolator=new fNe(this.options),d.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},d.backendConnector=new _Ne(l(this.modules.backend),d.resourceStore,d,this.options),d.backendConnector.on("*",function(y){for(var A=arguments.length,C=new Array(A>1?A-1:0),T=1;T<A;T++)C[T-1]=arguments[T];i.emit.apply(i,[y].concat(C))}),this.modules.languageDetector&&(d.languageDetector=l(this.modules.languageDetector),d.languageDetector.init(d,this.options.detection,this.options)),this.modules.i18nFormat&&(d.i18nFormat=l(this.modules.i18nFormat),d.i18nFormat.init&&d.i18nFormat.init(this)),this.translator=new PU(this.services,this.options),this.translator.on("*",function(y){for(var A=arguments.length,C=new Array(A>1?A-1:0),T=1;T<A;T++)C[T-1]=arguments[T];i.emit.apply(i,[y].concat(C))}),this.modules.external.forEach(function(y){y.init&&y.init(i)})}if(this.format=this.options.interpolation.format,o||(o=tw),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.length>0&&h[0]!=="dev"&&(this.options.lng=h[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var f=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];f.forEach(function(y){i[y]=function(){var A;return(A=i.store)[y].apply(A,arguments)}});var m=["addResource","addResources","addResourceBundle","removeResourceBundle"];m.forEach(function(y){i[y]=function(){var A;return(A=i.store)[y].apply(A,arguments),i}});var g=r_(),v=function(){var A=function(T,x){i.isInitialized&&!i.initializedStoreOnce&&i.logger.warn("init: i18next is already initialized. You should call init just once!"),i.isInitialized=!0,i.options.isClone||i.logger.log("initialized",i.options),i.emit("initialized",i.options),g.resolve(x),o(T,x)};if(i.languages&&i.options.compatibilityAPI!=="v1"&&!i.isInitialized)return A(null,i.t.bind(i));i.changeLanguage(i.options.lng,A)};return this.options.resources||!this.options.initImmediate?v():setTimeout(v,0),g}},{key:"loadResources",value:function(i){var s=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:tw,a=o,l=typeof i=="string"?i:this.language;if(typeof i=="function"&&(a=i),!this.options.resources||this.options.partialBundledLanguages){if(l&&l.toLowerCase()==="cimode")return a();var c=[],u=function(f){if(f){var m=s.services.languageUtils.toResolveHierarchy(f);m.forEach(function(g){c.indexOf(g)<0&&c.push(g)})}};if(l)u(l);else{var d=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);d.forEach(function(h){return u(h)})}this.options.preload&&this.options.preload.forEach(function(h){return u(h)}),this.services.backendConnector.load(c,this.options.ns,function(h){!h&&!s.resolvedLanguage&&s.language&&s.setResolvedLanguage(s.language),a(h)})}else a(null)}},{key:"reloadResources",value:function(i,s,o){var a=r_();return i||(i=this.languages),s||(s=this.options.ns),o||(o=tw),this.services.backendConnector.reload(i,s,function(l){a.resolve(),o(l)}),a}},{key:"use",value:function(i){if(!i)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!i.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return i.type==="backend"&&(this.modules.backend=i),(i.type==="logger"||i.log&&i.warn&&i.error)&&(this.modules.logger=i),i.type==="languageDetector"&&(this.modules.languageDetector=i),i.type==="i18nFormat"&&(this.modules.i18nFormat=i),i.type==="postProcessor"&&wX.addPostProcessor(i),i.type==="formatter"&&(this.modules.formatter=i),i.type==="3rdParty"&&this.modules.external.push(i),this}},{key:"setResolvedLanguage",value:function(i){if(!(!i||!this.languages)&&!(["cimode","dev"].indexOf(i)>-1))for(var s=0;s<this.languages.length;s++){var o=this.languages[s];if(!(["cimode","dev"].indexOf(o)>-1)&&this.store.hasLanguageSomeTranslations(o)){this.resolvedLanguage=o;break}}}},{key:"changeLanguage",value:function(i,s){var o=this;this.isLanguageChangingTo=i;var a=r_();this.emit("languageChanging",i);var l=function(h){o.language=h,o.languages=o.services.languageUtils.toResolveHierarchy(h),o.resolvedLanguage=void 0,o.setResolvedLanguage(h)},c=function(h,f){f?(l(f),o.translator.changeLanguage(f),o.isLanguageChangingTo=void 0,o.emit("languageChanged",f),o.logger.log("languageChanged",f)):o.isLanguageChangingTo=void 0,a.resolve(function(){return o.t.apply(o,arguments)}),s&&s(h,function(){return o.t.apply(o,arguments)})},u=function(h){!i&&!h&&o.services.languageDetector&&(h=[]);var f=typeof h=="string"?h:o.services.languageUtils.getBestMatchFromCodes(h);f&&(o.language||l(f),o.translator.language||o.translator.changeLanguage(f),o.services.languageDetector&&o.services.languageDetector.cacheUserLanguage(f)),o.loadResources(f,function(m){c(m,f)})};return!i&&this.services.languageDetector&&!this.services.languageDetector.async?u(this.services.languageDetector.detect()):!i&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(u):u(i),a}},{key:"getFixedT",value:function(i,s,o){var a=this,l=function c(u,d){var h;if(No(d)!=="object"){for(var f=arguments.length,m=new Array(f>2?f-2:0),g=2;g<f;g++)m[g-2]=arguments[g];h=a.options.overloadTranslationOptionHandler([u,d].concat(m))}else h=_u({},d);h.lng=h.lng||c.lng,h.lngs=h.lngs||c.lngs,h.ns=h.ns||c.ns,h.keyPrefix=h.keyPrefix||o||c.keyPrefix;var v=a.options.keySeparator||".",y=h.keyPrefix?"".concat(h.keyPrefix).concat(v).concat(u):u;return a.t(y,h)};return typeof i=="string"?l.lng=i:l.lngs=i,l.ns=s,l.keyPrefix=o,l}},{key:"t",value:function(){var i;return this.translator&&(i=this.translator).translate.apply(i,arguments)}},{key:"exists",value:function(){var i;return this.translator&&(i=this.translator).exists.apply(i,arguments)}},{key:"setDefaultNamespace",value:function(i){this.options.defaultNS=i}},{key:"hasLoadedNamespace",value:function(i){var s=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var a=this.resolvedLanguage||this.languages[0],l=this.options?this.options.fallbackLng:!1,c=this.languages[this.languages.length-1];if(a.toLowerCase()==="cimode")return!0;var u=function(f,m){var g=s.services.backendConnector.state["".concat(f,"|").concat(m)];return g===-1||g===2};if(o.precheck){var d=o.precheck(this,u);if(d!==void 0)return d}return!!(this.hasResourceBundle(a,i)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||u(a,i)&&(!l||u(c,i)))}},{key:"loadNamespaces",value:function(i,s){var o=this,a=r_();return this.options.ns?(typeof i=="string"&&(i=[i]),i.forEach(function(l){o.options.ns.indexOf(l)<0&&o.options.ns.push(l)}),this.loadResources(function(l){a.resolve(),s&&s(l)}),a):(s&&s(),Promise.resolve())}},{key:"loadLanguages",value:function(i,s){var o=r_();typeof i=="string"&&(i=[i]);var a=this.options.preload||[],l=i.filter(function(c){return a.indexOf(c)<0});return l.length?(this.options.preload=a.concat(l),this.loadResources(function(c){o.resolve(),s&&s(c)}),o):(s&&s(),Promise.resolve())}},{key:"dir",value:function(i){if(i||(i=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!i)return"rtl";var s=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"];return s.indexOf(this.services.languageUtils.getLanguagePartFromCode(i))>-1||i.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var i=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:tw,a=_u(_u(_u({},this.options),s),{isClone:!0}),l=new t(a);(s.debug!==void 0||s.prefix!==void 0)&&(l.logger=l.logger.clone(s));var c=["store","services","language"];return c.forEach(function(u){l[u]=i[u]}),l.services=_u({},this.services),l.services.utils={hasLoadedNamespace:l.hasLoadedNamespace.bind(l)},l.translator=new PU(l.services,l.options),l.translator.on("*",function(u){for(var d=arguments.length,h=new Array(d>1?d-1:0),f=1;f<d;f++)h[f-1]=arguments[f];l.emit.apply(l,[u].concat(h))}),l.init(a,o),l.translator.options=l.options,l.translator.backendConnector.services.utils={hasLoadedNamespace:l.hasLoadedNamespace.bind(l)},l}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),t}(Vf);gl(bx,"createInstance",function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return new bx(n,e)});var Ga=bx.createInstance();Ga.createInstance=bx.createInstance;var wNe=Ga.createInstance;Ga.init;Ga.loadResources;Ga.reloadResources;Ga.use;Ga.changeLanguage;Ga.getFixedT;Ga.t;Ga.exists;Ga.setDefaultNamespace;Ga.hasLoadedNamespace;Ga.loadNamespaces;Ga.loadLanguages;const TNe="Si",xNe="No",INe="Conferma",bNe="Applica",MNe="Annulla",RNe="Mostra",NNe="Nascondi",PNe="Invia",ONe="Chiudi",DNe="Modifica",LNe="Caricamento",kNe="Espandi",BNe="Riduci",FNe="Passa a schermo intero",zNe="Esci da schermo intero",UNe="Centro",jNe="In basso",GNe="Nascosto",HNe="Giorno",VNe="Mese",$Ne="Anno",WNe="Data creazione",qNe="Selezionati",QNe="pagina",JNe="Azioni",KNe="Successivo",YNe="Precedente",XNe="Copia",ZNe="Copia codice sorgente",ePe="Copia negli appunti",tPe="Mostra originale",nPe="Mostra traduzione",rPe="Posizione esatta",iPe="Incertezza",sPe="Domanda",oPe="Nessun risultato",aPe="Luogo",lPe="Cerca luogo...",cPe="Bloccato",uPe="Memori bloccato fino al {{date}}",dPe='Attualmente "{{name}}" non può rispondere, torna qui il {{date}}',hPe="perchè ha superato la soglia mensile di chat ammesse.",fPe="Puoi sempre gestirlo in qualità di amministratore, ma altri utenti non potranno interrogarlo.",pPe="Risposta generata da IA, può talvolta generare informazioni non corrette",mPe="Perché questa risposta?",gPe="Questa risposta è stata generata automaticamente da un'intelligenza artificiale sulla base di questi contenuti verificati.",vPe="IA evoluta, può rispondere con risposte generate automaticamente che talvolta potrebbero contenere informazioni non corrette",yPe="Questo Twin è integrato con una IA generativa di {{provider}}, ma al momento non è disponibile. Riprova più tardi.",_Pe="un provider esterno",SPe="Vedi pagina di stato",APe="Gruppo di esperti",EPe="Data di nascita",CPe="Ti chiediamo la data di nascita esclusivamente per abilitare o disabilitare le funzionalità che hanno restrizioni in base all'età",wPe="Devi avere almeno {{age}} anni per registrarti.",TPe="Devi avere almeno {{age}} anni per interagire con questo Twin.",xPe="Errore durante il caricamento della sessione",IPe="Errore durante il caricamento del riferimento",bPe="Errore durante il riapertura della sessione",MPe="Verifica dell'età",RPe="Per interagire con questo Twin, devi aver almeno {{minAge}} anni.",NPe="NSFW: Questo Twin contiene contenuti per adulti",PPe="Pensiero profondo",OPe="Pensiero Profondo è una funzionalità avanzata delle AI che ti consentirà di poter sfruttare a pieno le tue conversazioni mantenendo memoria delle stesse. Le AI con Pensiero Profondo possono darti informazioni adattandosi a te e alle cose che condividerete insieme.",DPe="Pensiero profondo abilitato",LPe="Pensiero Profondo è una funzionalità avanzata delle AI che ti consentirà di poter sfruttare a pieno le tue conversazioni mantenendo memoria delle stesse. Le AI con Pensiero Profondo possono darti informazioni adattandosi a te e alle cose che condividerete insieme.",kPe="Accedi per abilitare Pensiero Profondo.",BPe="Pensiero Profondo è disabilitato poiché non hai acconsentito al suo utilizzo, puoi cambiare la tua scelta in qualsiasi momento nelle impostazioni del tuo account.",FPe="L'autore di questo Twin non ha abbastanza crediti per rispondere alla tua domanda.",zPe={title:"Fatti noti",description:"Dettagli delle informazioni condivise tra te e {{memoriName}}",type:"Tipo",typeShortTerm:"Breve termine",typeLongTerm:"Lungo termine",typeHelper:`Tipi:
- Breve termine: questo fatto noto è sempre utilizzato durante le conversazioni
- Lungo termine: questo fatto noto è utilizzato durante le conversazioni solo se rilevante per la domanda corrente`,text:"Testo",deleteSuccess:"Fatto noto eliminato",deleteConfirmTitle:"Elimina il fatto noto",deleteConfirmMessage:"Confermi di voler eliminare questo fatto noto?",deleteSelectedConfirmTitle:"Elimina i fatti noti selezionati",deleteSelectedConfirmMessage:"Confermi di voler eliminare i fatti noti selezionati?"},UPe={title:"Autenticazione",useRecoveryTokens:"Utilizza i token di recupero",tokens:"Token",addToken:"Aggiungi token",usePassword:"Utilizza la password",atLeast:"Almeno"},jPe={instruct:"Istruisci",test:"Prova",sound:"Audio",position:"Preferenze posizione",settings:"Impostazioni",share:"Condividi",sendOnKeypress:"Premi Invio per inviare",sendOnClick:"Clicca sul bottone di invio",boardOfExperts:"Gruppo di esperti",showExpertsInTheBoard:"Mostra gli esperti di questo gruppo",expertsInTheBoard:"Esperti di questo gruppo",goToIntegrationsToCustomizeAvatar:"Per personalizzare l'avatar, vai a Condividimi e configura la pagina pubblica"},GPe={micButtonPopover:"Premi il pulsante per parlare",micButtonPopoverListening:"Premi il pulsante per smettere di parlare",pageInstructExplanation:"Per insegnarmi nuove cose clicca sul pulsante ISTRUISCIMI per cominciare",pageTryMeExplanation:"Per parlare con me clicca sul pulsante INIZIAMO per cominciare",instructButton:"ISTRUISCIMI",tryMeButton:"INIZIAMO",resumeButton:"RIPRENDI",chatHistory:"Cronologia chat",exportChatHistory:"Esporta la cronologia chat",exportChatHistoryMessage:"Vuoi esportare la cronologia chat?",chatBotButtonText:"CLICCA QUI PER APRIRE LA CHAT",conversationStartedLabel:"Conversazione avvenuta il",settingsHeaderLabel:"Configura qui il memori se vuoi impostare una conversazione continua. Setta i secondi di silenzio prima dell'invio.",continuousSpeechLabel:"Conversazione continua",holdToSpeak:"Tieni premuto per parlare",releaseToEndListening:"Rilascia per smettere di parlare",pressAndHoldToSpeak:"Premi e tieni premuto per parlare",microphoneMode:"Modalità microfono",hideEmissionsLabel:"Nascondi testo emesso dal Twin",secondsLabel:"Secondi",controlsPosition:"Posizione dei controlli",avatarControls:"Controlli Avatar",height:"Altezza",depth:"Profondità",avatarType:"Tipo Avatar",blob:"Blob",avatar3d:"Avatar 3D",zoomed:"Vicino",normal:"Normale",far:"Lontano",suggestions:`Usa le frecce per regolare l'altezza dell'avatar
Usa +/- per regolare la profondità dell'avatar`,enablePositionControls:"Abilita controlli posizione",tryMeHeaderLabel:"PROVA",unknownPosition:"Posizione sconosciuta",fieldPlace:"Indica la posizione (es 'Milano')",showMapLinkFor:"Visualizza sulla mappa la posizione",useMyPosition:"Usa la mia posizione",myPosition:"Posizione corrente",updatingPosition:"Aggiorno la posizione...",placeNotFound:"Luogo sconosciuto!",requirePositionHelp:"Per parlare con {{name}} devi decidere se fornire o meno la tua posizione. Questo perchè diverse risposte che potrà fornirti potrebbero dipendere da dove ti trovi.",dontWantToProvidePosition:"Non voglio fornire la mia posizione",attachmentsLabel:"Arricchisci il tuo messaggio",iWantToTalkToIn:"Voglio parlare con {{name}} in"},HPe={title:"Titolo",editAttributes:"Modifica attributi media",uploadMimeTypeNotAllowed:"Il tipo di file non è permesso",uploadSizeLimitMessage:"Il file caricato è troppo grande (max {{size}}MB)",uploadWrongResolutionMessage:"La risoluzione deve essere {{width}}x{{height}} pixel",memoriNameAlreadyUsed:"Hai già un Twin con questo nome",uploadHelperImages:"Caricare un file con estensione png, jpg, jpeg o gif e con dimensione massima di {{size}}MB",uploadHelper:"Caricare un file di dimensione massima di {{size}}MB",uploadError:"Errore nel caricamento",square:"quadrato",scaleRatio:"Proporzioni",addMediaLabel:"Aggiungi media",insertThisMediaMsg:"Inserisci questi media",mediaUploadMessage:"Clicca per caricare un nuovo media",addLinkLabel:"Aggiungi un link",linkKey:"URL",linkValue:"Titolo link",insertThisLink:"Inserisci un link a {{url}} con titolo {{title}}"},VPe={level:"Livello",points:"punti",memoriReachedLevel:"è diventato più evoluto ed ha raggiunto il livello",levelGoToStatistics:"{{memori}} è al livello {{level}} con {{points}} punti. Clicca per andare alle statistiche.",congratulationsNewLevel:"Congratulazioni, hai raggiunto un nuovo livello!",congratulationsNewLevelDescription:"Il tuo Memori è diventato più evoluto con {{points}} punti, guarda le",statistics:"statistiche"},$Pe={login:"Accedi",logout:"Esci",user:"Utente",loggedDrawerTitle:"Ciao, {{name}}!",loginDrawerTitle:"Accedi",signupDrawerTitle:"Registrati",newUserSignUp:"Sei un nuovo utente?",signUp:"Registrati!",alreadyHaveAnAccount:"Hai già un account?",backToLogin:"Torna al login",registrationDisabled:"La registrazione è disabilitata.",contactAdmin:"Contatta l'amministratore per richiedere l'accesso",userNameOrEmail:"Nome utente o email",email:"Email",emailFormatError:"Per favore, inserisci una mail valida",username:"Nome utente",usernameContainsReservedWord:"Il nome utente contiene una parola riservata, per favore cambia il nome utente",usernameFormatError:"Il nome utente deve essere lungo almeno 3 caratteri e può contenere solo lettere, numeri e _",otpCode:"Codice di verifica",resendVerificationCode:"Invia di nuovo",resentVerificationCode:"Codice di verifica inviato! Controlla la tua mail.",password:"Password",newPassword:"Nuova password",confirmPassword:"Conferma la password",currentPassword:"Password attuale",passwordMatchingError:"Le password non coincidono.",passwordFormatError:"La password deve essere lunga almeno 8 caratteri e contenere almeno un numero, una lettera maiuscola, una minuscola e un simbolo",pwdWeak:"Debole",pwdAcceptable:"Accettabile",pwdStrong:"Forte",mustChangePassword:"Devi cambiare la password",passwordChange:"Cambio password",emailChange:"Cambio email",avatarChange:"Cambio avatar",underage:"Devi avere almeno {{age}} anni per registrarti.",optional:"opzionale",birthDate:"Data di nascita",birthDateHelper:"Ti chiediamo la data di nascita esclusivamente per abilitare o disabilitare le funzionalità che hanno restrizioni in base all'età",missingData:"Informazioni mancanti",missingDataHelper:"Sappiamo che questo è un po' fastidioso, ma abbiamo bisogno di alcune informazioni in più per completare la tua registrazione.",goToAccountToChangeYourPreferences:"Puoi cambiare la tua scelta in qualsiasi momento dalla tua pagina Account.",deepThoughtExplaination:"Pensiero Profondo è una funzionalità avanzata delle AI che ti consentirà di poter sfruttare a pieno le tue conversazioni mantenendo memoria delle stesse. Le AI con Pensiero Profondo possono darti informazioni adattandosi a te e alle cose che condividerete insieme. Consenti all'autore del twin di contattarti per offerte commerciali riguardanti prodotti su cui hai espresso interesse.",tnCAndPPAcceptedHelper:"Dall'ultimo accesso, i T&C e l'Informativa sulla privacy sono stati modificati. Si prega di accettarle, altrimenti non sarà possibile apportare modifiche ai propri gemelli. Puoi sempre cancellare il tuo account nella pagina del tuo profilo utente.",privacyLabel:"Ho letto e accettato l'",privacyAndCookiePolicy:"informativa sui cookie e sulla privacy",and:"e",termsOfService:"i termini del servizio",pAndCUAccepted:"Accetto le condizioni di utilizzo relative a Pensiero Profondo",editAccount:"Modifica account",save:"Salva"},WPe="Operazione andata a buon fine",qPe="Errore",QPe={TENANT_NOT_FOUND:"Tenant non trovato",TENANT_REGISTRATION_DISABLED:"La registrazione su questa piattaforma è disabilitata",TENANT_MISSING_NAME:"Tenant: nome mancante",TENANT_MAX_USERS_REACHED:"Numero massimo di utenti raggiunto",TENANT_MAX_ADMINS_REACHED:"Numero massimo di utenti amministratori raggiunto",TENANT_ALREADY_EXISTS:"Tenant già esistente",TENANT_MISSING_DESCRIPTION:"Tenant: descrizione mancante",TENANT_CANT_SET_COMPLETION_PROVIDER:"Tenant: non abilitato a gestire il provider di completamento",USER_NOT_CONFIRMED:"Utente ancora non confermato",USER_NOT_FOUND:"Utente non trovato",USER_OR_PASSWORD_INVALID:"Utente o password non validi",USER_MUST_CHANGE_PASSWORD:"Devi cambiare la password",USER_MUST_ENTER_VERIFICATION_CODE:"Devi inserire il codice di verifica",USER_MISSING_TENANT:"Utente: tenant mancante",USER_MISSING_NAME:"Utente: nome mancante",USER_MISSING_PASSWORD:"Utente: password mancante",USER_MISSING_EMAIL:"Utente: email mancante",USER_MISSING_VERIFICATION_CODE:"Utente: codice di verifica mancante",USER_NAME_ALREADY_USED:"Nome utente già in uso",USER_PASSWORD_NOT_CONFORMING_TO_POLICY:"La password non rispetta le regole di sicurezza",USER_EMAIL_ALREADY_USED:"Email già in uso",USER_EMAIL_INVALID:"Email non valida",USER_VERIFICATION_CODE_INVALID:"Codice di verifica non valido",USER_MISSING_NAME_OR_EMAIL:"Nome utente o email mancante",USER_NAME_INVALID:"Nome utente non valido",USER_HAS_ONE_OR_MORE_MEMORI:"L'utente ha uno o più memori",USER_MISSING_NEW_PASSWORD:"Utente: nuova password mancante",USER_NOTHING_TO_DO:"Niente da fare",USER_CANT_CREATE_MEMORI:"Utente non abilitato a creare Memori",USER_MAX_MEMORI_REACHED:"Massimo numero di Memori raggiunto",USER_TOO_MANY_ATTEMPTS:"Troppi tentativi",USER_MUST_ACCEPT_TNC_AND_PP:"Devi accettare i termini e le condizioni",USER_BIRTH_DATE_CANT_BE_CHANGED:"Data di nascita non può essere cambiata",USER_CANT_SET_COMPLETION_PROVIDER:"Utente: non abilitato a gestire il provider di completamento",USER_CANT_ENABLE_DEEP_THOUGHT:"Utente: non abilitato a gestire Pensiero Profondo",USER_CANT_ENABLE_DCM_INTEGRATION:"Utente: non abilitato a gestire l'integrazione con DCM",USER_CANT_ENABLE_CHAINING_OR_BOARD_OF_EXPERTS:"Utente: non abilitato a gestire la concatenazione o il gruppo di esperti",USER_CREATION_BILLING_DENIED_PERMISSION:"Non hai crediti sufficienti per creare un Twin",USER_HAS_ONE_OR_MORE_COMPLETION_CONFIGS:"L'utente ha una o più configurazioni completions",USER_CANT_BE_DELETED:"Utente non può essere cancellato",MEMORI_NOT_FOUND:"Memori non trovato",MEMORI_NOT_ACCESSIBLE:"Memori non accessibile",MEMORI_ONLY_OWNER_CAN_CHANGE_GIVER_TAG_AND_PIN:"Solo il proprietario può cambiare il tag e il pin",SESSION_NOT_FOUND:"Sessione non trovata",SESSION_IS_NOT_ADMINISTRATIVE:"Sessione non amministrativa",SESSION_EXPIRED:"Sessione scaduta",MEMORI_MISSING_CONFIGURATION:"Memori: configurazione mancante",MEMORI_CONFIGURATION_NOT_FOUND:"Memori: configurazione non trovata",MEMORI_INVALID_PRIVACY_TYPE:"Memori: tipo di privacy non valido",MEMORI_MISSING_PASSWORD:"Memori: password mancante",MEMORI_INVALID_TOTAL_NUMBER_OF_RECOVERY_TOKENS:"Memori: numero totale di token di recupero non valido",MEMORI_INVALID_MINIMUM_NUMBER_OF_RECOVERY_TOKENS:"Memori: numero minimo di token di recupero non valido",MEMORI_INVALID_VOICE_TYPE:"Memori: tipo di voce non valido",MEMORI_MISSING_NAME:"Memori: nome mancante",MEMORI_MISSING_PASSWORD_OR_RECOVERY_TOKENS:"Memori: password o token di recupero mancanti",MEMORI_INVALID_ID:"Memori: ID non valido",MEMORI_NAME_ALREADY_USED:"Nome memori già in uso",MEMORI_INVALID_PIN:"Memori: PIN non valido",MEMORI_GIVER_TAG_PIN_CHANGE_REQUIRES_SEPARATE_OPERATION:"Memori: cambio TAG e PIN richiedono operazioni separate",MEMORI_NO_PASSWORD_WHEN_PUBLIC:"Memori: password non richiesta su Memori pubblico",MEMORI_DEEP_THOUGHT_REQUIRES_COMPLETIONS:"Pensiero Profondo richiede l'abilitazione delle completions",MEMORI_BOARD_OF_EXPERTS_REQUIRES_COMPLETIONS:"Il gruppo di esperti richiede l'abilitazione delle completions",MEMORI_INVALID_COMPLETION_CONFIG:"Memori: configurazione completions non valida",MEMORI_TRANSFER_MISSING_DESTINATION_USER:"Trasferimento: utente di destinazione mancante",MEMORI_TRANSFER_INVALID_DESTINATION_USER_ID:"Trasferimento: ID utente di destinazione non valido",MEMORI_TRANSFER_DESTINATION_USER_DATA_INCONSISTENT:"Trasferimento: dati utente di destinazione non validi",MEMORI_TRANSFER_NOTHING_TO_DO:"Trasferimento: alcuna operazione da fare",MEMORI_CONFIGURATION_CANT_BE_CHANGED:"Memori: la configurazione non può essere modificata",MEMORI_MISSING_NEW_PASSWORD:"Memori: nuova password mancante",MEMORI_SESSIONS_INVALID_DATE_FROM_FORMAT:"Formato non valido data a partire da",MEMORI_SESSIONS_INVALID_DATE_TO_FORMAT:"Formato non valido data fino a",MEMORI_FEATURE_REQUIRES_SUBSCRIPTION:"Memori: funzionalità richiede un abbonamento",INTEGRATION_NOT_FOUND:"Integrazione non trovata",INTEGRATION_INVALID_TYPE:"Tipo integrazione non valido",INTEGRATION_ALREADY_EXISTS:"Integrazione già esistente",INTEGRATION_MEMORI_IS_NOT_PUBLIC:"Memori non pubblici non possono essere integrati",INTEGRATION_MISSING_INVOCATION_TEXT:"Integrazione: testo di invocazione mancante",INTEGRATION_MISSING_DEVICE_EMAILS:"Integrazione: email del dispositivo mancante",INTEGRATION_MEMORI_IS_EMPTY:"Memori vuoti non possono essere integrati",INTEGRATION_MISSING_PRIVACY_POLICY:"Integrazione: privacy policy mancante",INTEGRATION_MISSING_CATEGORY:"Categoria integrazione mancante",INTEGRATION_MISSING_DESCRIPTION:"Descrizione integrazione mancante",INTEGRATION_INVALID_INVOCATION_TEXT:"Testo di invocazione non valido",INTEGRATION_GOOGLE_NO_MORE_AVAILABLE:"Google Home non più disponibile",UPLOAD_REQUIRES_MULTIPART_ENCODING:"L'upload richiede l'encoding multipart",UPLOAD_MISSING_CONTENT_TYPE_BOUNDARY:"Upload: manca il content type boundary",UPLOAD_MAX_LENGTH_EXCEEDED:"Upload: dimensione massima superata",UPLOAD_FILE_IS_EMPTY:"Upload: file vuoto",UPLOAD_INVALID_FILE_TYPE_OR_SIGNATURE:"Upload: tipo di file o firma non validi",UPLOAD_MISSING_FILE_NAME:"Upload: nome file mancante",UPLOAD_INVALID_MEMORY_ID:"Upload: ID contenuto non valido",UPLOAD_MISSING_FILE_CONTENT:"Upload: contenuto file mancante",ASSET_NOT_FOUND:"Asset non trovato",ASSET_NOT_ACCESSIBLE:"Asset non accessibile",ASSET_MISSING_SESSION_ID:"Asset: ID sessione mancante",ASSET_INVALID_FILE_NAME:"Asset: nome file non valido",INVITATION_NOT_FOUND:"Invito non trovato",INVITATION_NOT_ACCESSIBLE:"Invito non accessibile",INVITATION_ALREADY_ACCEPTED:"Invito già accettato",INVITATION_ALREADY_REJECTED:"Invito già rifiutato",INVITATION_MISSING_DESTINATION_EMAIL:"Invito: email di destinazione mancante",INVITATION_DESTINATION_EMAIL_INVALID:"Invito: email di destinazione non valida",INVITATION_MISSING_TAG:"Invito: tag mancante",INVITATION_MISSING_PIN:"Invito: PIN mancante",INVITATION_INVALID_PIN:"Invito: PIN non valido",INVITATION_INVALID_TYPE:"Invito: tipo non valido",INVITATION_MISSING_DESTINATION_NAME:"Invito: nome destinatario mancante",INVITATION_TAG_PIN_CANT_BE_CHANGED:"Invito: tag e pin non possono essere cambiati",INVITATION_CANT_BE_CHANGED:"Invito: non può essere modificato",ACTIONLOG_INVALID_USER_ID:"ID utente non valido",ACTIONLOG_INVALID_DATE_FROM_FORMAT:"Data a partire da: formato non valido",ACTIONLOG_INVALID_DATE_TO_FORMAT:"Data fino a: formato non valido",ACTIONLOG_INVALID_MEMORI_ID:"ID Memori non valido",CONSUMPTIONLOG_INVALID_TYPE:"Tipo di log non valido",CONSUMPTIONLOG_INVALID_DATE_FROM_FORMAT:"Data a partire da: formato non valido",CONSUMPTIONLOG_INVALID_DATE_TO_FORMAT:"Data fino a: formato non valido",CONSUMPTIONLOG_INVALID_USER_ID:"ID utente non valido",CONSUMPTIONLOG_INVALID_MEMORI_ID:"Memori ID non valido",NOTIFICATIONPREFS_INVALID_CHATLOG_EXTRACTION_PERIOD:"Notifiche: Periodo di estrazione chatlog non valido",PROCESS_INVALID_TYPE:"Tipo di processo non valido",PROCESS_ALREADY_RUNNING:"Processo già in esecuzione",PROCESS_NOT_FOUND:"Processo non trovato",IMPORTCSV_MISSING_ROWS:"Importazione CSV: righe mancanti",IMPORTCSV_MISSING_CSV:"Importazione CSV: CSV mancante",IMPORTCSV_MISSING_SEPARATOR:"Importazione CSV: separatore mancante",IMPORTCSV_INVALID_SEPARATOR:"Importazione CSV: separatore non valido",IMPORTCSV_MISSING_HEADERS:"Importazione CSV: intestazioni mancanti",IMPORTCSV_MISSING_TITLE_VARIANT_SEPARATOR:"Importazione CSV: separatore varianti titolo mancante",IMPORTCSV_INVALID_RECEIVER_ID:"Importazione CSV: ID receiver non valido",IMPORTCSV_INVALID_MEDIA_LINK:"Importazione CSV: link media non valido",IMPORTCSV_INVALID_LINK_TITLE_HANDLING:"Importazione CSV: titolo link non valido",IMPORTCSV_UNDETECTABLE_CHAR_ENCODING:"Importazione CSV: encoding caratteri non rilevabile",IMPORTCSV_CANT_IMPORT_TO_SECRET_MEMORI:"Importazione CSV: impossibile importare in Memori segreti",IMPORTTXT_MISSING_ROWS:"Importazione TXT: righe mancanti",IMPORTTXT_INVALID_GRANULARITY:"Importazione TXT: granularità non valida",IMPORTTXT_INVALID_RECEIVER_ID:"Importazione TXT: ID receiver non valido",IMPORTTXT_INVALID_MEDIA_LINK:"Importazione TXT: link media non valido",IMPORTTXT_INVALID_LINK_TITLE_HANDLING:"Importazione TXT: titolo link non valido",IMPORTTXT_UNDETECTABLE_CHAR_ENCODING:"Importazione TXT: encoding caratteri non rilevabile",IMPORTTXT_CANT_IMPORT_TO_SECRET_MEMORI:"Importazione TXT: impossibile importare in Memori segreti",IMPORTTXT_IMPORT_LIMIT_EXCEEDED:"Importazione TXT: limite importazione superato",IMPORTTXT_IMPORT_ON_GPT4_REQUIRES_API_KEY:"Importazione TXT: importazione su GPT-4 richiede API key",IMPORTTXT_IMPORT_REQUIRES_PAYING:"Importazione TXT: importazione richiede un piano a pagamento",IMPORTTXT_BILLING_DENIED_PERMISSION:"Importazione TXT: non hai crediti sufficienti per l'operazione",EXPORTCSV_MISSING_CSV_SPECS:"Esportazione CSV: specifiche CSV mancanti",EXPORTCSV_MISSING_SEPARATOR:"Esportazione CSV: separatore mancante",EXPORTCSV_INVALID_SEPARATOR:"Esportazione CSV: separatore non valido",EXPORTCSV_MISSING_TITLE_VARIANT_SEPARATOR:"Esportazione CSV: separatore varianti titolo mancante",EXPORTCSV_MISSING_NEW_LINE_CHAR:"Esportazione CSV: carattere di nuova riga mancante",EXPORTCSV_INVALID_NEW_LINE_CHAR:"Esportazione CSV: carattere di nuova riga non valido",EXPORTCSV_MISSING_PASSWORD:"Esportazione CSV: password mancante",EXPORTJSONL_MISSING_JSONL_SPECS:"Esportazione JSONL: specifiche JSONL mancanti",EXPORTJSONL_MISSING_PLATFORM:"Esportazione JSONL: piattaforma mancante",EXPORTJSONL_INVALID_PLATFORM:"Esportazione JSONL: piattaforma non valida",EXPORTJSONL_MISSING_PASSWORD:"Esportazione JSONL: password mancante",EXPORTJSONL_EXPORT_REQUIRES_PAYING:"Esportazione JSONL: esportazione richiede un piano a pagamento",ANALYSIS_MISSING_QUERY:"Analisi: query mancante",ANALYSIS_CANT_ANALYZE_SECRET_MEMORI:"Analisi: impossibile analizzare Memori segreti",ANALYSIS_USER_QUERY_MATCH_REQUIRES_DEEP_THOUGHT:"Analisi: corrispondenza query utente richiede Pensiero Profondo",BADGE_ASSIGNMENT_WRONG_OR_MISSING_CREDENTIALS:"Assegnazione badge: credenziali errate o mancanti",BADGE_ASSIGNMENT_MISSING_REF_ID:"Assegnazione badge: ID ref mancante",BADGE_ASSIGNMENT_OUTCOME_NOT_FOUND:"Assegnazione badge: esito non trovato",BADGE_ASSIGNMENT_MISSING_ASSERTION_URL:"Assegnazione badge: URL di asserzione mancante",BADGE_ASSIGNMENT_MISSING_BADGE_URL:"Assegnazione badge: URL badge mancante",BADGE_ASSIGNMENT_MISSING_ISSUER_URL:"Assegnazione badge: URL issuer mancante",BADGE_ASSIGNMENT_INVALID_URL:"Assegnazione badge: URL non valido",BADGE_ASSIGNMENT_MISSING_RECIPIENT:"Assegnazione badge: destinatario mancante",BADGE_ASSIGNMENT_UNKNOWN_RECIPIENT_TYPE:"Assegnazione badge: tipo destinatario sconosciuto",BADGE_ASSIGNMENT_MISSING_RECIPIENT_IDENTITY:"Assegnazione badge: identità destinatario mancante",BADGE_ASSIGNMENT_MISSING_RECIPIENT_HASH_TYPE:"Assegnazione badge: tipo hash destinatario mancante",BADGE_ASSIGNMENT_UNKNOWN_RECIPIENT_HASH_TYPE:"Assegnazione badge: tipo hash destinatario sconosciuto",BADGE_ASSIGNMENT_WRONG_RECIPIENT_IDENTITY:"Assegnazione badge: identità destinatario errata",BADGE_NOT_FOUND:"Badge non trovato",OUTCOME_NO_DCM_CONFIGURED:"Outcome: nessun DCM configurato",OUTCOME_USER_BADGES_DISABLED:"Outcome: badge utente disabilitati",COMPLETION_CONFIG_MISSING_NAME:"Configurazione completions: nome mancante",COMPLETION_CONFIG_MISSING_PROVIDER:"Configurazione completions: provider mancante",COMPLETION_CONFIG_MISSING_ENDPOINT:"Configurazione completions: endpoint mancante",COMPLETION_CONFIG_MISSING_API_KEY:"Configurazione completions: API key mancante",COMPLETION_CONFIG_MISSING_MODEL:"Configurazione completions: modello mancante",COMPLETION_CONFIG_NO_PURPOSE_SPECIFIED:"Configurazione completions: almeno un tipo di completions deve essere specificato",COMPLETION_CONFIG_INVALID_NAME:"Configurazione completions: nome non valido",COMPLETION_CONFIG_INVALID_PURPOSE:"Configurazione completions: tipo di completions non valido",COMPLETION_CONFIG_INVALID_ENDPOINT:"Configurazione completions: endpoint non valido",COMPLETION_CONFIG_INCONSISTENT_ENDPOINT:"Configurazione completions: endpoint incoerente",COMPLETION_CONFIG_INVALID_PROVIDER:"Configurazione completions: provider non valido",COMPLETION_CONFIG_NOT_FOUND:"Configurazione completions: non trovata",COMPLETION_CONFIG_NOT_ACCESSIBLE:"Configurazione completions: non accessibile",COMPLETION_CONFIG_NAME_RESERVED:"Configurazione completions: nome riservato",COMPLETION_CONFIG_NAME_ALREADY_EXISTS:"Configurazione completions: nome già esistente",COMPLETION_CONFIG_VISIBILITY_CHANGE_NOT_ALLOWED:"Configurazione completions: cambiamento visibilità non consentito"},JPe={yes:TNe,no:xNe,confirm:INe,apply:bNe,cancel:MNe,show:RNe,hide:NNe,send:PNe,close:ONe,edit:DNe,delete:"Elimina",loading:LNe,expand:kNe,collapse:BNe,fullscreenEnter:FNe,fullscreenExit:zNe,center:UNe,bottom:jNe,hidden:GNe,day:HNe,month:VNe,year:$Ne,createdAt:WNe,selected:qNe,page:QNe,actions:JNe,next:KNe,previous:YNe,copy:XNe,copyRawCode:ZNe,copyToClipboard:ePe,showOriginalText:tPe,showTranslatedText:nPe,exactPosition:rPe,uncertain:iPe,question:sPe,nothingFound:oPe,venue:aPe,searchVenue:lPe,memoriBlockedTitle:cPe,memoriBlockedUntil:uPe,memoriBlockedAnon:dPe,memoriBlockedReasonExceedChats:hPe,memoriBlockedGiverHelper:fPe,generatedByAI:pPe,whyThisAnswer:mPe,whyThisAnswerHelper:gPe,completionsEnabled:vPe,completionProviderDown:yPe,completionProviderFallbackName:_Pe,completionProviderCheckStatusPage:SPe,boardOfExperts:APe,birthDate:EPe,birthDateHelper:CPe,underage:wPe,underageTwinSession:TPe,errorFetchingSession:xPe,errorGettingReferralURL:IPe,errorReopeningSession:bPe,ageVerification:MPe,ageVerificationText:RPe,nsfw:NPe,deepThought:PPe,deepThoughtHelper:OPe,deepThoughtDisclaimerTitle:DPe,deepThoughtDisclaimer:LPe,deepThoughtPreDisclaimerUnlogged:kPe,deepThoughtPreDisclaimerNotAllowed:BPe,notEnoughCredits:FPe,knownFacts:zPe,auth:UPe,widget:jPe,write_and_speak:GPe,media:HPe,gamification:VPe,login:$Pe,success:WPe,Error:"Errore","internal server error":"Ops, scusa... qualcosa è andato storto nel server",error:qPe,"error.loading":"Errore durante il caricamento dei contenuti.","error.notFound":"Ops, non abbiamo trovato ciò che cercavi.","error.generic":"Ops, qualcosa è andato storto.","error.serverNotResponding":"Stiamo facendo manutenzione o rilasciando aggiornamenti. Riprova più tardi.","error.unprocessableEntity":"Errore durante il salvataggio dei dati. Ricontrolla i dati inseriti.","error.goBackTo":"Prova a tornare alla","error.reloadPage":"Ricarica la pagina","error.tryAgain":"Riprova","error.unauthorized":"Non sei autorizzato a visualizzare questo contenuto.",errors:QPe},KPe="Yes",YPe="No",XPe="Confirm",ZPe="Apply",eOe="Cancel",tOe="Show",nOe="Hide",rOe="Send",iOe="Close",sOe="Edit",oOe="Loading",aOe="Expand",lOe="Collapse",cOe="Enter fullscreen",uOe="Exit fullscreen",dOe="Center",hOe="Bottom",fOe="Hidden",pOe="Day",mOe="Month",gOe="Year",vOe="Creation date",yOe="Selected",_Oe="page",SOe="Actions",AOe="Next",EOe="Previous",COe="Copy",wOe="Copy raw code",TOe="Copy to clipboard",xOe="Show original",IOe="Show translation",bOe="Exact position",MOe="Uncertain",ROe="Question",NOe="Nothing found",POe="Venue",OOe="Search venue...",DOe="Blocked",LOe="Memori blocked until {{date}}",kOe=`Currently "{{name}}" can't answer, come back here on {{date}}`,BOe="because it has exceeded the monthly threshold of allowed chats.",FOe="You can still manage it as administrator, but other users will not be able to interact with it.",zOe="Answer generated by AI, may occasionally generate incorrect informations",UOe="Why this answer?",jOe="This answer was generated automatically by an artificial intelligence based on these verified contents.",GOe="Advanced AI, can respond with automatically generated answers that may sometimes contain incorrect information",HOe="This Twin is integrated with a generative AI from {{provider}}, but it is currently unavailable. Try again later.",VOe="an external provider",$Oe="Check status page",WOe="Board of experts",qOe="Birth date",QOe="We ask for your birth date only to enable or disable functionalities that have age restrictions",JOe="You must be at least {{age}} years old to sign up.",KOe="You must be at least {{age}} years old to interact with this Twin.",YOe="Error during session loading",XOe="Error during referral loading",ZOe="Error during session reopening",e6e="Age verification",t6e="To interact with this Twin, you must be at least {{minAge}} years old.",n6e="NSFW: This Twin contains adult contents",r6e="Deep Thought",i6e="Deep Thought is an advanced feature of the AI that will allow you to fully exploit your conversations by keeping track of them. The AI with Deep Thought can give you information tailored to you and the things you will share together. Allow the twin's author to contact you for commercial offers regarding products you have shown interest in.",s6e="Deep Thought enabled",o6e="Deep Thought is an advanced feature of the AI that will allow you to fully exploit your conversations by keeping track of them. The AI with Deep Thought can give you information tailored to you and the things you will share together.",a6e="Log in to enable Deep Thought.",l6e="Deep Thought is disabled since you didn't consent its usage, you can change this any time in your account settings.",c6e="The author of this Twin does not have enough credits to answer your question.",u6e={title:"Known facts",description:"Details of the information shared between you and {{memoriName}}",type:"Type",typeShortTerm:"Short term",typeLongTerm:"Long term",typeHelper:`Types:
- Short Term: this Known Fact is always used during conversations
- Long Term: this Known Fact is used during conversations only if relevant to the current question`,text:"Text",deleteSuccess:"Known fact deleted",deleteConfirmTitle:"Delete known fact",deleteConfirmMessage:"Are you sure you want to delete this known fact?",deleteSelectedConfirmTitle:"Delete selected known facts",deleteSelectedConfirmMessage:"Are you sure you want to delete the selected known facts?"},d6e={title:"Authentication",useRecoveryTokens:"Use recovery tokens",tokens:"Tokens",addToken:"Add token",usePassword:"Use password",atLeast:"At least"},h6e={instruct:"Instruct",test:"Test",sound:"Sound",position:"Position preferences",settings:"Settings",share:"Share",sendOnKeypress:"Hit Enter to send",sendOnClick:"Click on Submit",boardOfExperts:"Board of experts",showExpertsInTheBoard:"Show experts in this board",expertsInTheBoard:"Experts in this board",goToIntegrationsToCustomizeAvatar:"To customize the avatar, go to Share and customize the public page"},f6e={micButtonPopover:"Click the button to speak",micButtonPopoverListening:"Click the button to stop speak",pageInstructExplanation:"To teach me new things click on the INSTRUCT ME button to get started",pageTryMeExplanation:"To talk to me click on the START button to get started",instructButton:"INSTRUCT ME",tryMeButton:"START",resumeButton:"RESUME",chatHistory:"Chat history",exportChatHistory:"Export chat history",exportChatHistoryMessage:"Do you want to export chat history?",chatBotButtonText:"CLICK HERE TO OPEN CHATBOT",conversationStartedLabel:"Conversation started on",settingsHeaderLabel:"Setup here if you want to set the memori as continuous speech, and change the silence seconds if you want to customize them.",continuousSpeechLabel:"Continuous speech",holdToSpeak:"Hold to speak",releaseToEndListening:"Release to end listening",pressAndHoldToSpeak:"Press and hold to speak",microphoneMode:"Microphone mode",hideEmissionsLabel:"Hide text emitted by the Twin",secondsLabel:"Set seconds",controlsPosition:"Controls position",avatarControls:"Avatar controls",height:"Height",depth:"Depth",avatarType:"Avatar type",suggestions:`Use the arrow keys to adjust the avatar height
Use +/- to adjust the avatar depth`,blob:"Blob",avatar3d:"3D Avatar",zoomed:"Zoomed",normal:"Normal",far:"Far",enablePositionControls:"Enable position controls",tryMeHeaderLabel:"TRY",unknownPosition:"Unknown position",fieldPlace:"Write the place (eg 'Milano')",showMapLinkFor:"Show the position on the map",useMyPosition:"Use my position",myPosition:"Your position",updatingPosition:"Updating position...",placeNotFound:"Place not found!",requirePosition:"Insert your position before start",requirePositionHelp:"To talk to {{name}} you have to decide whether to provide your position or not. This is because different answers that it can provide you may depend on where you are.",dontWantToProvidePosition:"I don't want to provide my position",attachmentsLabel:"Enrich your message",iWantToTalkToIn:"I want to talk to {{name}} in"},p6e={title:"Title",editAttributes:"Edit media attributes",uploadMimeTypeNotAllowed:"The file type is not allowed",uploadSizeLimitMessage:"The uploaded size is too big (max {{size}}MB)",uploadWrongResolutionMessage:"The resolution must be {{width}}x{{height}} pixel",memoriNameAlreadyUsed:"You already have a Twin with this name",uploadHelperImages:"Upload a file with extension png, jpg, jpeg or gif, and having at maximum a size of {{size}}MB",uploadHelper:"Upload a file having at maximum a size of {{size}}MB",uploadError:"Upload failed",square:"square",scaleRatio:"Scale ratio",addMediaLabel:"Add a media",insertThisMediaMsg:"Insert these media",mediaUploadMessage:"Click to load a new media",addLinkLabel:"Add a link",linkKey:"URL",linkValue:"Link title",insertThisLink:"Insert a link to {{url}} with title {{title}}"},m6e={level:"Level",points:"points",memoriReachedLevel:"became more evolved and reached level",levelGoToStatistics:"{{memori}} is at level {{level}} with {{points}} points. Click to go to statistics.",congratulationsNewLevel:"Congratulations, you have reached a new level!",congratulationsNewLevelDescription:"Your Memori became more evolved with {{points}} points, look at the",statistics:"statistics"},g6e={login:"Login",logout:"Logout",user:"User",loggedDrawerTitle:"Hi, {{name}}!",loginDrawerTitle:"Login",signupDrawerTitle:"Sign up",newUserSignUp:"New user?",signUp:"Sign up!",alreadyHaveAnAccount:"Already have an account?",backToLogin:"Back to login",registrationDisabled:"Registration is disabled",contactAdmin:"Contact the administrator to request access",userNameOrEmail:"Username or email",email:"Email",emailFormatError:"Please, insert a valid email",username:"Username",usernameContainsReservedWord:"Username contains a reserved word, please choose another one",usernameFormatError:"Username must be at least 3 characters long and contain only letters, numbers and _",otpCode:"Verification code",resendVerificationCode:"Resend code",resentVerificationCode:"Confirmation code sent! Please check your email.",password:"Password",newPassword:"New password",confirmPassword:"Confirm Password",currentPassword:"Current password",passwordMatchingError:"Passwords do not match.",passwordFormatError:"Password must be at least 8 characters long and contain at least a number, an upper case letter, a lower case letter and a symbol",pwdWeak:"Weak",pwdAcceptable:"Acceptable",pwdStrong:"Strong",mustChangePassword:"You must change your password",passwordChange:"Change password",emailChange:"Change email",avatarChange:"Change avatar",underage:"You must be at least {{age}} years old to sign up.",optional:"Optional",birthDate:"Birth date",birthDateHelper:"We ask for your birth date only to enable or disable functionalities that have age restrictions",missingData:"Missing informations",missingDataHelper:"We know that this is a bit annoying, but we need some more informations to complete your registration.",goToAccountToChangeYourPreferences:"You can change your choice at any time from your Account page.",deepThoughtExplaination:"Deep Thought is an advanced feature of the AI that will allow you to fully exploit your conversations by keeping track of them. The AI with Deep Thought can give you information tailored to you and the things you will share together. Allow the twin's author to contact you for commercial offers regarding products you have shown interest in.",tnCAndPPAcceptedHelper:"Since your last login, T&C and Privacy Policy have changed. Please accept them, otherwise you won't be able to make changes to your Twins. You can always delete your account in your user profile page.",privacyLabel:"I have read and accepted the",privacyAndCookiePolicy:"Privacy e Cookie Policy",and:"and",termsOfService:"Terms of Service",pAndCUAccepted:"I accept the terms of service about Deep Thought",editAccount:"Edit account",save:"Save"},v6e="Success",y6e="Error",_6e={TENANT_NOT_FOUND:"Tenant not found",TENANT_REGISTRATION_DISABLED:"Registration on this platform is disabled",TENANT_MISSING_NAME:"Tenant: name missing",TENANT_MAX_USERS_REACHED:"Maximum number of users reached",TENANT_MAX_ADMINS_REACHED:"Maximum number of admin users reached",TENANT_ALREADY_EXISTS:"Tenant already exists",TENANT_MISSING_DESCRIPTION:"Tenant: description missing",TENANT_CANT_SET_COMPLETION_PROVIDER:"Tenant: can't set completion provider",USER_NOT_CONFIRMED:"User still not confirmed",USER_NOT_FOUND:"User not found",USER_OR_PASSWORD_INVALID:"Invalid user or password",USER_MUST_CHANGE_PASSWORD:"You must change your password",USER_MUST_ENTER_VERIFICATION_CODE:"You must enter the verification code",USER_MISSING_TENANT:"User: missing tenant",USER_MISSING_NAME:"User: name is missing",USER_MISSING_PASSWORD:"User: password missing",USER_MISSING_EMAIL:"User: Missing email",USER_MISSING_VERIFICATION_CODE:"User: Missing verification code",USER_NAME_ALREADY_USED:"User name already in use",USER_PASSWORD_NOT_CONFORMING_TO_POLICY:"The password does not meet the security rules",USER_EMAIL_ALREADY_USED:"Email already in use",USER_EMAIL_INVALID:"Invalid email",USER_VERIFICATION_CODE_INVALID:"Invalid verification code",USER_MISSING_NAME_OR_EMAIL:"Missing username or email",USER_NAME_INVALID:"Invalid user name",USER_HAS_ONE_OR_MORE_MEMORI:"The user has one or more memories",USER_MISSING_NEW_PASSWORD:"User: new password missing",USER_NOTHING_TO_DO:"Nothing to do",USER_CANT_CREATE_MEMORI:"User not allowed to create Memori",USER_MAX_MEMORI_REACHED:"Maximum number of Memori reached",USER_TOO_MANY_ATTEMPTS:"Too many attempts",USER_MUST_ACCEPT_TNC_AND_PP:"You must accept the terms and conditions",USER_BIRTH_DATE_CANT_BE_CHANGED:"Date of birth cannot be changed",USER_CANT_SET_COMPLETION_PROVIDER:"User: not allowed to manage completion provider",USER_CANT_ENABLE_DEEP_THOUGHT:"User: not enabled to manage Deep Thought",USER_CANT_ENABLE_DCM_INTEGRATION:"User: not enabled to manage DCM integration",USER_CANT_ENABLE_CHAINING_OR_BOARD_OF_EXPERTS:"User: not allowed to manage chaining or expert group",USER_CREATION_BILLING_DENIED_PERMISSION:"You don't have enough credits to create a Twin",USER_HAS_ONE_OR_MORE_COMPLETION_CONFIGS:"The user has one or more completion configurations",USER_CANT_BE_DELETED:"User can't be deleted",MEMORI_NOT_FOUND:"Memori not found",MEMORI_NOT_ACCESSIBLE:"Memori not accessible",MEMORI_ONLY_OWNER_CAN_CHANGE_GIVER_TAG_AND_PIN:"Only owner can change tag or pin",SESSION_NOT_FOUND:"Session not found",SESSION_IS_NOT_ADMINISTRATIVE:"Non-administrative session",SESSION_EXPIRED:"Session expired",MEMORI_MISSING_CONFIGURATION:"Twin: missing configuration",MEMORI_CONFIGURATION_NOT_FOUND:"Twin: configuration not found",MEMORI_INVALID_PRIVACY_TYPE:"Twin: invalid privacy type",MEMORI_MISSING_PASSWORD:"Twin: missing password",MEMORI_INVALID_TOTAL_NUMBER_OF_RECOVERY_TOKENS:"Twin: total number of invalid recovery tokens",MEMORI_INVALID_MINIMUM_NUMBER_OF_RECOVERY_TOKENS:"Twin: minimum number of invalid recovery tokens",MEMORI_INVALID_VOICE_TYPE:"Twin: invalid voice type",MEMORI_MISSING_NAME:"Twin: missing name",MEMORI_MISSING_PASSWORD_OR_RECOVERY_TOKENS:"Twin: missing password or recovery token",MEMORI_INVALID_ID:"Twin: invalid ID",MEMORI_NAME_ALREADY_USED:"Twin name already in use",MEMORI_INVALID_PIN:"Twin: Invalid PIN",MEMORI_GIVER_TAG_PIN_CHANGE_REQUIRES_SEPARATE_OPERATION:"Twin: TAG and PIN change require separate operations",MEMORI_NO_PASSWORD_WHEN_PUBLIC:"Twin: no password required when public",MEMORI_DEEP_THOUGHT_REQUIRES_COMPLETIONS:"Deep Thought requires completions to be enabled",MEMORI_BOARD_OF_EXPERTS_REQUIRES_COMPLETIONS:"The expert group requires completions to be enabled",MEMORI_INVALID_COMPLETION_CONFIG:"Twin: invalid completions configuration",MEMORI_TRANSFER_MISSING_DESTINATION_USER:"Transfer: missing destination user",MEMORI_TRANSFER_INVALID_DESTINATION_USER_ID:"Transfer: invalid destination user ID",MEMORI_TRANSFER_DESTINATION_USER_DATA_INCONSISTENT:"Transfer: invalid destination user data",MEMORI_TRANSFER_NOTHING_TO_DO:"Transfer: nothing to do",MEMORI_CONFIGURATION_CANT_BE_CHANGED:"Memories: configuration cannot be changed",MEMORI_MISSING_NEW_PASSWORD:"Memories: new password missing",MEMORI_FEATURE_REQUIRES_SUBSCRIPTION:"Feature requires subscription",INTEGRATION_NOT_FOUND:"Integration not found",MEMORI_SESSIONS_INVALID_DATE_FROM_FORMAT:"Invalid date from format",MEMORI_SESSIONS_INVALID_DATE_TO_FORMAT:"Invalid date to format",INTEGRATION_INVALID_TYPE:"Invalid integration type",INTEGRATION_ALREADY_EXISTS:"Integration already exists",INTEGRATION_MEMORI_IS_NOT_PUBLIC:"Non-public memories cannot be integrated",INTEGRATION_MISSING_INVOCATION_TEXT:"Integration: missing invocation text",INTEGRATION_MISSING_DEVICE_EMAILS:"Integration: missing device email",INTEGRATION_MEMORI_IS_EMPTY:"Empty memories cannot be integrated",INTEGRATION_MISSING_PRIVACY_POLICY:"Integration: privacy policy missing",INTEGRATION_MISSING_CATEGORY:"Integration category missing",INTEGRATION_MISSING_DESCRIPTION:"Missing integration description",INTEGRATION_INVALID_INVOCATION_TEXT:"Invalid invocation text",INTEGRATION_GOOGLE_NO_MORE_AVAILABLE:"Google Home no more available",UPLOAD_REQUIRES_MULTIPART_ENCODING:"Upload requires multipart encoding",UPLOAD_MISSING_CONTENT_TYPE_BOUNDARY:"Upload: missing content type boundary",UPLOAD_MAX_LENGTH_EXCEEDED:"Upload: maximum size exceeded",UPLOAD_FILE_IS_EMPTY:"Upload: empty file",UPLOAD_INVALID_FILE_TYPE_OR_SIGNATURE:"Upload: invalid file type or signature",UPLOAD_MISSING_FILE_NAME:"Upload: missing file name",UPLOAD_INVALID_MEMORY_ID:"Upload: Invalid content ID",UPLOAD_MISSING_FILE_CONTENT:"Upload: Missing file content",ASSET_NOT_FOUND:"Asset not found",ASSET_NOT_ACCESSIBLE:"Asset not accessible",ASSET_MISSING_SESSION_ID:"Asset: missing session ID",ASSET_INVALID_FILE_NAME:"Asset: invalid file name",INVITATION_NOT_FOUND:"Invitation not found",INVITATION_NOT_ACCESSIBLE:"Invitation not accessible",INVITATION_ALREADY_ACCEPTED:"Invitation already accepted",INVITATION_ALREADY_REJECTED:"Invitation already rejected",INVITATION_MISSING_DESTINATION_EMAIL:"Invitation: missing destination email",INVITATION_DESTINATION_EMAIL_INVALID:"Invitation: destination email invalid",INVITATION_MISSING_TAG:"Invitation: missing tag",INVITATION_MISSING_PIN:"Invitation: PIN missing",INVITATION_INVALID_PIN:"Invitation: invalid PIN",INVITATION_INVALID_TYPE:"Invitation: invalid type",INVITATION_MISSING_DESTINATION_NAME:"Invitation: destination name missing",INVITATION_TAG_PIN_CANT_BE_CHANGED:"Invitation: tag and pin can't be changed",INVITATION_CANT_BE_CHANGED:"Intation: can't be changed",ACTIONLOG_INVALID_USER_ID:"Invalid user ID",ACTIONLOG_INVALID_DATE_FROM_FORMAT:"Date from: invalid format",ACTIONLOG_INVALID_DATE_TO_FORMAT:"Date to: invalid format",ACTIONLOG_INVALID_MEMORI_ID:"Invalid Memori ID",CONSUMPTIONLOG_INVALID_TYPE:"Invalid log type",CONSUMPTIONLOG_INVALID_DATE_FROM_FORMAT:"Date from: invalid format",CONSUMPTIONLOG_INVALID_DATE_TO_FORMAT:"Date to: invalid format",CONSUMPTIONLOG_INVALID_USER_ID:"Invalid user ID",CONSUMPTIONLOG_INVALID_MEMORI_ID:"Invalid Memori ID",NOTIFICATIONPREFS_INVALID_CHATLOG_EXTRACTION_PERIOD:"Notifications: Invalid chat log extraction period",PROCESS_INVALID_TYPE:"Invalid process type",PROCESS_ALREADY_RUNNING:"Process already running",PROCESS_NOT_FOUND:"Process not found",IMPORTCSV_MISSING_ROWS:"CSV import: missing rows",IMPORTCSV_MISSING_CSV:"CSV Import: Missing CSV",IMPORTCSV_MISSING_SEPARATOR:"CSV import: missing separator",IMPORTCSV_INVALID_SEPARATOR:"CSV import: invalid separator",IMPORTCSV_MISSING_HEADERS:"CSV import: missing headers",IMPORTCSV_MISSING_TITLE_VARIANT_SEPARATOR:"CSV import: missing title variant separator",IMPORTCSV_INVALID_RECEIVER_ID:"CSV import: invalid receiver ID",IMPORTCSV_INVALID_MEDIA_LINK:"CSV import: invalid media link",IMPORTCSV_INVALID_LINK_TITLE_HANDLING:"CSV import: invalid link title",IMPORTCSV_UNDETECTABLE_CHAR_ENCODING:"CSV import: undetectable character encoding",IMPORTCSV_CANT_IMPORT_TO_SECRET_MEMORI:"CSV Import: Cannot import to Secret Memories",IMPORTTXT_MISSING_ROWS:"Importing TXT: missing rows",IMPORTTXT_INVALID_GRANULARITY:"Import TXT: invalid granularity",IMPORTTXT_INVALID_RECEIVER_ID:"Import TXT: invalid receiver ID",IMPORTTXT_INVALID_MEDIA_LINK:"Import TXT: invalid media link",IMPORTTXT_INVALID_LINK_TITLE_HANDLING:"Import TXT: invalid link title",IMPORTTXT_UNDETECTABLE_CHAR_ENCODING:"TXT import: undetectable character encoding",IMPORTTXT_CANT_IMPORT_TO_SECRET_MEMORI:"TXT Import: Cannot import to Secret Memories",IMPORTTXT_IMPORT_LIMIT_EXCEEDED:"Import TXT: import limit exceeded",IMPORTTXT_IMPORT_ON_GPT4_REQUIRES_API_KEY:"Import TXT: import on GPT-4 requires API key",IMPORTTXT_IMPORT_REQUIRES_PAYING:"Import TXT: Import requires a paying plan",IMPORTTXT_BILLING_DENIED_PERMISSION:"Import TXT: you don't have enough credits for the operation",EXPORTCSV_MISSING_CSV_SPECS:"CSV export: missing CSV specifications",EXPORTCSV_MISSING_SEPARATOR:"CSV export: missing separator",EXPORTCSV_INVALID_SEPARATOR:"CSV export: invalid separator",EXPORTCSV_MISSING_TITLE_VARIANT_SEPARATOR:"CSV export: missing title variant separator",EXPORTCSV_MISSING_NEW_LINE_CHAR:"CSV export: missing newline character",EXPORTCSV_INVALID_NEW_LINE_CHAR:"CSV export: invalid newline character",EXPORTCSV_MISSING_PASSWORD:"CSV export: missing password",EXPORTJSONL_MISSING_JSONL_SPECS:"JSONL export: missing JSONL specifications",EXPORTJSONL_MISSING_PLATFORM:"JSONL export: missing platform",EXPORTJSONL_INVALID_PLATFORM:"JSONL export: invalid platform",EXPORTJSONL_MISSING_PASSWORD:"JSONL export: missing password",EXPORTJSONL_EXPORT_REQUIRES_PAYING:"JSONL Export: Export requires a paid plan",ANALYSIS_MISSING_QUERY:"Analysis: missing query",ANALYSIS_CANT_ANALYZE_SECRET_MEMORI:"Analysis: Unable to analyze Secret Memories",ANALYSIS_USER_QUERY_MATCH_REQUIRES_DEEP_THOUGHT:"Analysis: matching user query requires Deep Thinking",BADGE_ASSIGNMENT_WRONG_OR_MISSING_CREDENTIALS:"Badge assignment: incorrect or missing credentials",BADGE_ASSIGNMENT_MISSING_REF_ID:"Badge assignment: ref ID missing",BADGE_ASSIGNMENT_OUTCOME_NOT_FOUND:"Badge assignment: result not found",BADGE_ASSIGNMENT_MISSING_ASSERTION_URL:"Badge assignment: Missing assertion URL",BADGE_ASSIGNMENT_MISSING_BADGE_URL:"Badge Assignment: Missing Badge URL",BADGE_ASSIGNMENT_MISSING_ISSUER_URL:"Badge assignment: missing issuer URL",BADGE_ASSIGNMENT_INVALID_URL:"Badge assignment: Invalid URL",BADGE_ASSIGNMENT_MISSING_RECIPIENT:"Badge assignment: missing recipient",BADGE_ASSIGNMENT_UNKNOWN_RECIPIENT_TYPE:"Badge assignment: unknown recipient type",BADGE_ASSIGNMENT_MISSING_RECIPIENT_IDENTITY:"Badge assignment: missing recipient identity",BADGE_ASSIGNMENT_MISSING_RECIPIENT_HASH_TYPE:"Badge assignment: missing recipient hash type",BADGE_ASSIGNMENT_UNKNOWN_RECIPIENT_HASH_TYPE:"Badge assignment: recipient hash type unknown",BADGE_ASSIGNMENT_WRONG_RECIPIENT_IDENTITY:"Badge assignment: incorrect recipient identity",BADGE_NOT_FOUND:"Badge not found",OUTCOME_NO_DCM_CONFIGURED:"Outcome: no DCM configured",OUTCOME_USER_BADGES_DISABLED:"Outcome: user badges disabled",COMPLETION_CONFIG_MISSING_NAME:"Completions configuration: missing name",COMPLETION_CONFIG_MISSING_PROVIDER:"Completions configuration: missing provider",COMPLETION_CONFIG_MISSING_ENDPOINT:"Completions configuration: missing endpoint",COMPLETION_CONFIG_MISSING_API_KEY:"Completions configuration: missing API key",COMPLETION_CONFIG_MISSING_MODEL:"Completions configuration: missing model",COMPLETION_CONFIG_NO_PURPOSE_SPECIFIED:"Completions configuration: at least one completions type must be specified",COMPLETION_CONFIG_INVALID_NAME:"Completions configuration: invalid name",COMPLETION_CONFIG_INVALID_PURPOSE:"Completions configuration: invalid completions type",COMPLETION_CONFIG_INVALID_ENDPOINT:"Completions configuration: invalid endpoint",COMPLETION_CONFIG_INCONSISTENT_ENDPOINT:"Completions configuration: inconsistent endpoint",COMPLETION_CONFIG_INVALID_PROVIDER:"Completions configuration: invalid provider",COMPLETION_CONFIG_NOT_FOUND:"Completions configuration: not found",COMPLETION_CONFIG_NOT_ACCESSIBLE:"Completions configuration: not accessible",COMPLETION_CONFIG_NAME_RESERVED:"Completions configuration: name reserved",COMPLETION_CONFIG_NAME_ALREADY_EXISTS:"Completions configuration: name already exists",COMPLETION_CONFIG_VISIBILITY_CHANGE_NOT_ALLOWED:"Completions configuration: visibility change not allowed"},S6e={yes:KPe,no:YPe,confirm:XPe,apply:ZPe,cancel:eOe,show:tOe,hide:nOe,send:rOe,close:iOe,edit:sOe,delete:"Delete",loading:oOe,expand:aOe,collapse:lOe,fullscreenEnter:cOe,fullscreenExit:uOe,center:dOe,bottom:hOe,hidden:fOe,day:pOe,month:mOe,year:gOe,createdAt:vOe,selected:yOe,page:_Oe,actions:SOe,next:AOe,previous:EOe,copy:COe,copyRawCode:wOe,copyToClipboard:TOe,showOriginalText:xOe,showTranslatedText:IOe,exactPosition:bOe,uncertain:MOe,question:ROe,nothingFound:NOe,venue:POe,searchVenue:OOe,memoriBlockedTitle:DOe,memoriBlockedUntil:LOe,memoriBlockedAnon:kOe,memoriBlockedReasonExceedChats:BOe,memoriBlockedGiverHelper:FOe,generatedByAI:zOe,whyThisAnswer:UOe,whyThisAnswerHelper:jOe,completionsEnabled:GOe,completionProviderDown:HOe,completionProviderFallbackName:VOe,completionProviderCheckStatusPage:$Oe,boardOfExperts:WOe,birthDate:qOe,birthDateHelper:QOe,underage:JOe,underageTwinSession:KOe,errorFetchingSession:YOe,errorGettingReferralURL:XOe,errorReopeningSession:ZOe,ageVerification:e6e,ageVerificationText:t6e,nsfw:n6e,deepThought:r6e,deepThoughtHelper:i6e,deepThoughtDisclaimerTitle:s6e,deepThoughtDisclaimer:o6e,deepThoughtPreDisclaimerUnlogged:a6e,deepThoughtPreDisclaimerNotAllowed:l6e,notEnoughCredits:c6e,knownFacts:u6e,auth:d6e,widget:h6e,write_and_speak:f6e,media:p6e,gamification:m6e,login:g6e,success:v6e,Error:"Error","internal server error":"Oupsie, sorry... Something went wrong on the server",error:y6e,"error.loading":"Error while loading content.","error.generic":"Oupsie, sorry... something went wrong.","error.serverNotResponding":"We are doing maintenance or releasing updates. Please try again later.","error.notFound":"Oupsie, we didn't find the page you were looking for.","error.goBackTo":"You can try to go back to the","error.reloadPage":"Reload the page","error.tryAgain":"Try again","error.unauthorized":"You are unauthorized to view this content.","error.unprocessableEntity":"Error while processing the request. Check the data you entered.",errors:_6e},A6e="Oui",E6e="Non",C6e="Confirmer",w6e="Appliquer",T6e="Annuler",x6e="Montrer",I6e="Cacher",b6e="Envoyer",M6e="Fermer",R6e="Modifier",N6e="Chargement",P6e="Développer",O6e="Effondrement",D6e="Entrez en plein écran",L6e="Quitter le plein écran",k6e="Centre",B6e="Bas",F6e="Caché",z6e="Jour",U6e="Mois",j6e="Année",G6e="Date de création",H6e="Choisi",V6e="page",$6e="Actes",W6e="Suivant",q6e="Précédent",Q6e="Copie",J6e="Copier le code brut",K6e="Copier dans le presse-papier",Y6e="Afficher l'original",X6e="Afficher la traduction",Z6e="Position exacte",eDe="Incertain",tDe="Question",nDe="Rien trouvé",rDe="Lieu",iDe="Rechercher un lieu...",sDe="Bloqué",oDe="Memori bloqué jusqu'à {{date}}",aDe='Actuellement "{{name}}"Je ne peux pas répondre, reviens ici {{date}}',lDe="car il a dépassé le seuil mensuel de chats autorisés.",cDe="Vous pouvez toujours le gérer en tant qu'administrateur, mais les autres utilisateurs ne pourront pas interagir avec lui.",uDe="Réponse générée par l'IA, peut occasionnellement générer des informations incorrectes",dDe="Pourquoi cette réponse ?",hDe="Cette réponse a été générée automatiquement par une intelligence artificielle basée sur ces contenus vérifiés.",fDe="L'IA avancée peut répondre avec des réponses générées automatiquement qui peuvent parfois contenir des informations incorrectes",pDe="Ce Twin est intégré à une IA générative de {{provider}}, mais il est actuellement indisponible. ",mDe="un prestataire externe",gDe="Vérifier la page d'état",vDe="Conseil d'experts",yDe="Date de naissance",_De="Nous demandons votre date de naissance uniquement pour activer ou désactiver les fonctionnalités qui ont des restrictions d'âge",SDe="Vous devez être au moins {{age}} ans pour s'inscrire.",ADe="Vous devez être au moins {{age}} ans pour interagir avec ce Twin.",EDe="Erreur lors du chargement de la session",CDe="Erreur lors du chargement du référent",wDe="Erreur lors de la re-ouverture de la session",TDe="Vérification de l'âge",xDe="Pour interagir avec ce Twin, vous devez être au minimum {{minAge}} ans.",IDe="NSFW : Ce jumeau contient du contenu pour adultes",bDe="Pensée profonde",MDe="Deep Thought est une fonctionnalité avancée de l'IA qui vous permettra d'exploiter pleinement vos conversations en les gardant une trace. ",RDe="Pensée profonde activée",NDe="Deep Thought est une fonctionnalité avancée de l'IA qui vous permettra d'exploiter pleinement vos conversations en les gardant une trace. ",PDe="Connectez-vous pour activer Deep Thought.",ODe="Deep Thought est désactivé car vous n'avez pas consenti à son utilisation, vous pouvez le modifier à tout moment dans les paramètres de votre compte.",DDe="L'auteur de ce Twin n'a pas suffisamment de crédits pour répondre à votre question.",LDe={title:"Faits connus",description:"Détails des informations partagées entre vous et {{memoriName}}",type:"Taper",typeShortTerm:"Court terme",typeLongTerm:"Long terme",typeHelper:`Types :
`,text:"Texte",deleteSuccess:"Fait connu supprimé",deleteConfirmTitle:"Supprimer un fait connu",deleteConfirmMessage:"Êtes-vous sûr de vouloir supprimer ce fait connu ?",deleteSelectedConfirmTitle:"Supprimer les faits connus sélectionnés",deleteSelectedConfirmMessage:"Etes-vous sûr de vouloir supprimer les faits connus sélectionnés ?"},kDe={title:"Authentification",useRecoveryTokens:"Utiliser des jetons de récupération",tokens:"Jetons",addToken:"Ajouter un jeton",usePassword:"Utiliser le mot de passe",atLeast:"Au moins"},BDe={instruct:"Instruire",test:"Test",sound:"Son",position:"Préférences de position",settings:"Paramètres",share:"Partager",sendOnKeypress:"Appuyez sur Entrée pour envoyer",sendOnClick:"Cliquez sur Soumettre",boardOfExperts:"Conseil d'experts",showExpertsInTheBoard:"Afficher les experts dans ce forum",expertsInTheBoard:"Experts dans ce forum",goToIntegrationsToCustomizeAvatar:"Pour personnaliser l'avatar, allez dans Partager et personnalisez la page publique"},FDe={micButtonPopover:"Cliquez sur le bouton pour parler",micButtonPopoverListening:"Cliquez sur le bouton pour arrêter de parler",pageInstructExplanation:"Pour m'apprendre de nouvelles choses, cliquez sur le bouton INSTRUCTEZ-MOI pour commencer",pageTryMeExplanation:"Pour me parler, cliquez sur le bouton START pour commencer",instructButton:"INSTRUCTEZ-MOI",tryMeButton:"COMMENCER",chatHistory:"Historique des discussions",exportChatHistory:"Exporter l'historique des discussions",exportChatHistoryMessage:"Voulez-vous exporter l’historique des discussions ?",chatBotButtonText:"CLIQUEZ ICI POUR OUVRIR LE CHATBOT",conversationStartedLabel:"La conversation a commencé le",settingsHeaderLabel:"Configurez ici si vous souhaitez définir la mémoire comme parole continue et modifiez les secondes de silence si vous souhaitez les personnaliser.",continuousSpeechLabel:"Discours continu",holdToSpeak:"Attends pour parler",releaseToEndListening:"Relâcher pour terminer l'écoute",pressAndHoldToSpeak:"Appuyez et maintenez pour parler",microphoneMode:"Mode micro",hideEmissionsLabel:"Masquer le texte émis par le Twin",secondsLabel:"Régler les secondes",controlsPosition:"Position des commandes",tryMeHeaderLabel:"ESSAYER",unknownPosition:"Position inconnue",fieldPlace:"Écrivez le lieu (par exemple « Milano »)",showMapLinkFor:"Afficher la position sur la carte",useMyPosition:"Utiliser ma position",myPosition:"Votre poste",updatingPosition:"Mise à jour du poste...",placeNotFound:"Lieu introuvable !",requirePosition:"Insérez votre position avant de commencer",requirePositionHelp:"Pour parler à {{name}} vous devez décider si vous souhaitez ou non fournir votre poste. ",dontWantToProvidePosition:"Je ne veux pas donner ma position",attachmentsLabel:"Enrichissez votre message",iWantToTalkToIn:"je veux parler à {{name}} dans"},zDe={title:"Titre",editAttributes:"Modifier les attributs du média",uploadMimeTypeNotAllowed:"Le type de fichier n'est pas autorisé",uploadSizeLimitMessage:"La taille téléchargée est trop grande (max {{size}}Mo)",uploadWrongResolutionMessage:"La résolution doit être {{width}}x{{height}} pixels",memoriNameAlreadyUsed:"Vous avez déjà un jumeau portant ce nom",uploadHelperImages:"Téléchargez un fichier avec l'extension png, jpg, jpeg ou gif, et ayant au maximum une taille de {{size}}Mo",uploadHelper:"Téléchargez un fichier ayant au maximum une taille de {{size}}Mo",uploadError:"Échec du téléchargement",square:"carré",scaleRatio:"Rapport d'échelle",addMediaLabel:"Ajouter un média",insertThisMediaMsg:"Insérez ces médias",mediaUploadMessage:"Cliquez pour charger un nouveau média",addLinkLabel:"Ajouter un lien",linkKey:"URL",linkValue:"Titre du lien",insertThisLink:"Insérer un lien vers {{url}} avec titre {{title}}"},UDe={level:"Niveau",points:"points",memoriReachedLevel:"est devenu plus évolué et a atteint le niveau",levelGoToStatistics:"{{memori}} est au niveau {{level}} avec {{points}} points. ",congratulationsNewLevel:"Félicitations, vous avez atteint un nouveau niveau !",congratulationsNewLevelDescription:"Votre Memori est devenu plus évolué avec {{points}} points, regardez le",statistics:"statistiques"},jDe={login:"Se connecter",logout:"Déconnexion",user:"Utilisateur",loggedDrawerTitle:"Salut, {{name}}!",loginDrawerTitle:"Se connecter",signupDrawerTitle:"S'inscrire",newUserSignUp:"Nouvel utilisateur ?",signUp:"S'inscrire!",alreadyHaveAnAccount:"Vous avez déjà un compte ?",backToLogin:"Retour à la connexion",registrationDisabled:"L'inscription est désactivée",contactAdmin:"Contacter l'administrateur pour demander l'accès",userNameOrEmail:"Nom d'utilisateur ou email",email:"E-mail",emailFormatError:"Veuillez insérer un email valide",username:"Nom d'utilisateur",usernameContainsReservedWord:"Le nom d'utilisateur contient un mot réservé, veuillez en choisir un autre",usernameFormatError:"Le nom d'utilisateur doit comporter au moins 3 caractères et contenir uniquement des lettres, des chiffres et _",otpCode:"Le code de vérification",resendVerificationCode:"Renvoyer le code",resentVerificationCode:"Code de confirmation envoyé ! ",password:"Mot de passe",newPassword:"Nouveau mot de passe",confirmPassword:"Confirmez le mot de passe",currentPassword:"Mot de passe actuel",passwordMatchingError:"Les mots de passe ne correspondent pas.",passwordFormatError:"Le mot de passe doit comporter au moins 8 caractères et contenir au moins un chiffre, une lettre majuscule, une lettre minuscule et un symbole.",pwdWeak:"Faible",pwdAcceptable:"Acceptable",pwdStrong:"Fort",mustChangePassword:"Vous devez changer votre mot de passe",passwordChange:"Changer le mot de passe",emailChange:"Changer d'e-mail",avatarChange:"Changer d'avatar",underage:"Vous devez être au moins {{age}} ans pour s'inscrire.",optional:"Facultatif",birthDate:"Date de naissance",birthDateHelper:"Nous demandons votre date de naissance uniquement pour activer ou désactiver les fonctionnalités qui ont des restrictions d'âge",missingData:"Informations manquantes",missingDataHelper:"Nous savons que c'est un peu ennuyeux, mais nous avons besoin de plus d'informations pour finaliser votre inscription.",goToAccountToChangeYourPreferences:"Vous pouvez modifier votre choix à tout moment depuis la page de votre compte.",deepThoughtExplaination:"Deep Thought est une fonctionnalité avancée de l'IA qui vous permettra d'exploiter pleinement vos conversations en les gardant une trace. ",tnCAndPPAcceptedHelper:"Depuis votre dernière connexion, les conditions générales et la politique de confidentialité ont changé. ",privacyLabel:"J'ai lu et accepté le",privacyAndCookiePolicy:"Politique de confidentialité et de cookies",and:"et",termsOfService:"Conditions d'utilisation",pAndCUAccepted:"J'accepte les conditions d'utilisation de Deep Thought",editAccount:"Modifier le compte",save:"Sauvegarder"},GDe="Succès",HDe="Erreur",VDe={TENANT_NOT_FOUND:"Locataire introuvable",TENANT_REGISTRATION_DISABLED:"L'inscription sur cette plateforme est désactivée",TENANT_MISSING_NAME:"Locataire : nom manquant",TENANT_MAX_USERS_REACHED:"Nombre maximum d'utilisateurs atteint",TENANT_MAX_ADMINS_REACHED:"Nombre maximum d'utilisateurs administrateurs atteint",TENANT_ALREADY_EXISTS:"Le locataire existe déjà",TENANT_MISSING_DESCRIPTION:"Locataire : description manquante",TENANT_CANT_SET_COMPLETION_PROVIDER:"Locataire : impossible de définir le fournisseur de complétion",USER_NOT_CONFIRMED:"L'utilisateur n'est toujours pas confirmé",USER_NOT_FOUND:"Utilisateur introuvable",USER_OR_PASSWORD_INVALID:"Utilisateur ou mot de passe invalide",USER_MUST_CHANGE_PASSWORD:"Vous devez changer votre mot de passe",USER_MUST_ENTER_VERIFICATION_CODE:"Vous devez entrer le code de vérification",USER_MISSING_TENANT:"Utilisateur : locataire manquant",USER_MISSING_NAME:"Utilisateur : le nom est manquant",USER_MISSING_PASSWORD:"Utilisateur : mot de passe manquant",USER_MISSING_EMAIL:"Utilisateur : E-mail manquant",USER_MISSING_VERIFICATION_CODE:"Utilisateur : Code de vérification manquant",USER_NAME_ALREADY_USED:"Nom d'utilisateur déjà utilisé",USER_PASSWORD_NOT_CONFORMING_TO_POLICY:"Le mot de passe ne répond pas aux règles de sécurité",USER_EMAIL_ALREADY_USED:"E-mail déjà utilisé",USER_EMAIL_INVALID:"E-mail invalide",USER_VERIFICATION_CODE_INVALID:"Code de vérification invalide",USER_MISSING_NAME_OR_EMAIL:"Nom d'utilisateur ou e-mail manquant",USER_NAME_INVALID:"Nom d'utilisateur invalide",USER_HAS_ONE_OR_MORE_MEMORI:"L'utilisateur possède une ou plusieurs mémoires",USER_MISSING_NEW_PASSWORD:"Utilisateur : nouveau mot de passe manquant",USER_NOTHING_TO_DO:"Rien à faire",USER_CANT_CREATE_MEMORI:"L'utilisateur n'est pas autorisé à créer des Memori",USER_MAX_MEMORI_REACHED:"Nombre maximum de Memori atteint",USER_TOO_MANY_ATTEMPTS:"Trop de tentatives",USER_MUST_ACCEPT_TNC_AND_PP:"Vous devez accepter les termes et conditions",USER_BIRTH_DATE_CANT_BE_CHANGED:"La date de naissance ne peut pas être modifiée",USER_CANT_SET_COMPLETION_PROVIDER:"Utilisateur : non autorisé à gérer le fournisseur de complétion",USER_CANT_ENABLE_DEEP_THOUGHT:"Utilisateur : non autorisé à gérer Deep Thought",USER_CANT_ENABLE_DCM_INTEGRATION:"Utilisateur : non autorisé à gérer l'intégration DCM",USER_CANT_ENABLE_CHAINING_OR_BOARD_OF_EXPERTS:"Utilisateur : non autorisé à gérer des chaînages ou des groupes d'experts",USER_CREATION_BILLING_DENIED_PERMISSION:"Vous n'avez pas assez de crédits pour créer un Twin",USER_HAS_ONE_OR_MORE_COMPLETION_CONFIGS:"L'utilisateur dispose d'une ou plusieurs configurations de complétion",USER_CANT_BE_DELETED:"L'utilisateur ne peut pas être supprimé",MEMORI_NOT_FOUND:"Mémoire introuvable",MEMORI_NOT_ACCESSIBLE:"Mémoires non accessibles",MEMORI_ONLY_OWNER_CAN_CHANGE_GIVER_TAG_AND_PIN:"Seul le propriétaire peut modifier le tag ou le code PIN",SESSION_NOT_FOUND:"Séance introuvable",SESSION_IS_NOT_ADMINISTRATIVE:"Séance non administrative",SESSION_EXPIRED:"Session expirée",MEMORI_MISSING_CONFIGURATION:"Twin : configuration manquante",MEMORI_CONFIGURATION_NOT_FOUND:"Twin : configuration introuvable",MEMORI_INVALID_PRIVACY_TYPE:"Twin : type de confidentialité non valide",MEMORI_MISSING_PASSWORD:"Twin : mot de passe manquant",MEMORI_INVALID_TOTAL_NUMBER_OF_RECOVERY_TOKENS:"Twin : nombre total de jetons de récupération invalides",MEMORI_INVALID_MINIMUM_NUMBER_OF_RECOVERY_TOKENS:"Twin : nombre minimum de jetons de récupération invalides",MEMORI_INVALID_VOICE_TYPE:"Twin : type de voix invalide",MEMORI_MISSING_NAME:"Jumeau : nom manquant",MEMORI_MISSING_PASSWORD_OR_RECOVERY_TOKENS:"Twin : mot de passe ou jeton de récupération manquant",MEMORI_INVALID_ID:"Jumeau : pièce d'identité invalide",MEMORI_NAME_ALREADY_USED:"Nom jumeau déjà utilisé",MEMORI_INVALID_PIN:"Twin : code PIN invalide",MEMORI_GIVER_TAG_PIN_CHANGE_REQUIRES_SEPARATE_OPERATION:"Twin : le changement de TAG et de PIN nécessite des opérations distinctes",MEMORI_NO_PASSWORD_WHEN_PUBLIC:"Twin : aucun mot de passe requis lorsqu'il est public",MEMORI_DEEP_THOUGHT_REQUIRES_COMPLETIONS:"Deep Thought nécessite que les complétions soient activées",MEMORI_BOARD_OF_EXPERTS_REQUIRES_COMPLETIONS:"Le groupe d'experts exige que les complétions soient activées",MEMORI_INVALID_COMPLETION_CONFIG:"Twin : configuration des complétions non valide",MEMORI_TRANSFER_MISSING_DESTINATION_USER:"Transfert : utilisateur de destination manquant",MEMORI_TRANSFER_INVALID_DESTINATION_USER_ID:"Transfert : ID utilisateur de destination non valide",MEMORI_TRANSFER_DESTINATION_USER_DATA_INCONSISTENT:"Transfert : données utilisateur de destination non valides",MEMORI_TRANSFER_NOTHING_TO_DO:"Transfert : rien à faire",MEMORI_CONFIGURATION_CANT_BE_CHANGED:"Mémoires : la configuration ne peut pas être modifiée",MEMORI_MISSING_NEW_PASSWORD:"Souvenirs : nouveau mot de passe manquant",MEMORI_FEATURE_REQUIRES_SUBSCRIPTION:"La fonctionnalité nécessite un abonnement",INTEGRATION_NOT_FOUND:"Intégration introuvable",MEMORI_SESSIONS_INVALID_DATE_FROM_FORMAT:"Date invalide du format",MEMORI_SESSIONS_INVALID_DATE_TO_FORMAT:"Date à formater invalide",INTEGRATION_INVALID_TYPE:"Type d'intégration invalide",INTEGRATION_ALREADY_EXISTS:"L'intégration existe déjà",INTEGRATION_MEMORI_IS_NOT_PUBLIC:"Les mémoires non publiques ne peuvent pas être intégrées",INTEGRATION_MISSING_INVOCATION_TEXT:"Intégration : texte d'invocation manquant",INTEGRATION_MISSING_DEVICE_EMAILS:"Intégration : e-mail de l'appareil manquant",INTEGRATION_MEMORI_IS_EMPTY:"Les mémoires vides ne peuvent pas être intégrées",INTEGRATION_MISSING_PRIVACY_POLICY:"Intégration : politique de confidentialité manquante",INTEGRATION_MISSING_CATEGORY:"Catégorie d'intégration manquante",INTEGRATION_MISSING_DESCRIPTION:"Description de l'intégration manquante",INTEGRATION_INVALID_INVOCATION_TEXT:"Texte d'appel invalide",INTEGRATION_GOOGLE_NO_MORE_AVAILABLE:"Google Home n'est plus disponible",UPLOAD_REQUIRES_MULTIPART_ENCODING:"Le téléchargement nécessite un codage en plusieurs parties",UPLOAD_MISSING_CONTENT_TYPE_BOUNDARY:"Téléchargement : limite de type de contenu manquante",UPLOAD_MAX_LENGTH_EXCEEDED:"Téléchargement : taille maximale dépassée",UPLOAD_FILE_IS_EMPTY:"Télécharger : fichier vide",UPLOAD_INVALID_FILE_TYPE_OR_SIGNATURE:"Téléchargement : type de fichier ou signature non valide",UPLOAD_MISSING_FILE_NAME:"Télécharger : nom de fichier manquant",UPLOAD_INVALID_MEMORY_ID:"Télécharger : ID de contenu invalide",UPLOAD_MISSING_FILE_CONTENT:"Télécharger : contenu du fichier manquant",ASSET_NOT_FOUND:"Actif introuvable",ASSET_NOT_ACCESSIBLE:"Actif non accessible",ASSET_MISSING_SESSION_ID:"Élément : ID de session manquant",ASSET_INVALID_FILE_NAME:"Élément : nom de fichier non valide",INVITATION_NOT_FOUND:"Invitation introuvable",INVITATION_NOT_ACCESSIBLE:"Invitation non accessible",INVITATION_ALREADY_ACCEPTED:"Invitation déjà acceptée",INVITATION_ALREADY_REJECTED:"Invitation déjà rejetée",INVITATION_MISSING_DESTINATION_EMAIL:"Invitation : e-mail de destination manquant",INVITATION_DESTINATION_EMAIL_INVALID:"Invitation : e-mail de destination invalide",INVITATION_MISSING_TAG:"Invitation : étiquette manquante",INVITATION_MISSING_PIN:"Invitation : code PIN manquant",INVITATION_INVALID_PIN:"Invitation : code PIN invalide",INVITATION_INVALID_TYPE:"Invitation : type non valide",INVITATION_MISSING_DESTINATION_NAME:"Invitation : le nom de la destination est manquant",INVITATION_TAG_PIN_CANT_BE_CHANGED:"Invitation : le tag et le code PIN ne peuvent pas être modifiés",INVITATION_CANT_BE_CHANGED:"Intation : ne peut pas être modifié",ACTIONLOG_INVALID_USER_ID:"ID utilisateur invalide",ACTIONLOG_INVALID_DATE_FROM_FORMAT:"Date de : format non valide",ACTIONLOG_INVALID_DATE_TO_FORMAT:"Date de : format non valide",ACTIONLOG_INVALID_MEMORI_ID:"Identifiant Memori invalide",CONSUMPTIONLOG_INVALID_TYPE:"Type de journal invalide",CONSUMPTIONLOG_INVALID_DATE_FROM_FORMAT:"Date de : format non valide",CONSUMPTIONLOG_INVALID_DATE_TO_FORMAT:"Date de : format non valide",CONSUMPTIONLOG_INVALID_USER_ID:"ID utilisateur invalide",CONSUMPTIONLOG_INVALID_MEMORI_ID:"Identifiant Memori invalide",NOTIFICATIONPREFS_INVALID_CHATLOG_EXTRACTION_PERIOD:"Notifications : période d'extraction du journal de discussion non valide",PROCESS_INVALID_TYPE:"Type de processus invalide",PROCESS_ALREADY_RUNNING:"Processus déjà en cours",PROCESS_NOT_FOUND:"Processus introuvable",IMPORTCSV_MISSING_ROWS:"Import CSV : lignes manquantes",IMPORTCSV_MISSING_CSV:"Importation CSV : CSV manquant",IMPORTCSV_MISSING_SEPARATOR:"Import CSV : séparateur manquant",IMPORTCSV_INVALID_SEPARATOR:"Importation CSV : séparateur non valide",IMPORTCSV_MISSING_HEADERS:"Import CSV : en-têtes manquants",IMPORTCSV_MISSING_TITLE_VARIANT_SEPARATOR:"Import CSV : séparateur de variante de titre manquant",IMPORTCSV_INVALID_RECEIVER_ID:"Importation CSV : ID de destinataire non valide",IMPORTCSV_INVALID_MEDIA_LINK:"Importation CSV : lien média non valide",IMPORTCSV_INVALID_LINK_TITLE_HANDLING:"Importation CSV : titre du lien invalide",IMPORTCSV_UNDETECTABLE_CHAR_ENCODING:"Import CSV : encodage de caractères indétectable",IMPORTCSV_CANT_IMPORT_TO_SECRET_MEMORI:"Importation CSV : impossible d'importer dans les mémoires secrètes",IMPORTTXT_MISSING_ROWS:"Importation de TXT : lignes manquantes",IMPORTTXT_INVALID_GRANULARITY:"Importer TXT : granularité invalide",IMPORTTXT_INVALID_RECEIVER_ID:"Importer TXT : ID de destinataire invalide",IMPORTTXT_INVALID_MEDIA_LINK:"Importer TXT : lien média non valide",IMPORTTXT_INVALID_LINK_TITLE_HANDLING:"Importer TXT : titre du lien invalide",IMPORTTXT_UNDETECTABLE_CHAR_ENCODING:"Import TXT : encodage de caractères indétectable",IMPORTTXT_CANT_IMPORT_TO_SECRET_MEMORI:"Importation TXT : impossible d'importer vers les mémoires secrètes",IMPORTTXT_IMPORT_LIMIT_EXCEEDED:"Importer TXT : limite d'importation dépassée",IMPORTTXT_IMPORT_ON_GPT4_REQUIRES_API_KEY:"Importer TXT : l'importation sur GPT-4 nécessite une clé API",IMPORTTXT_IMPORT_REQUIRES_PAYING:"Importer TXT : l'importation nécessite un forfait payant",IMPORTTXT_BILLING_DENIED_PERMISSION:"Importer TXT : vous n'avez pas assez de crédits pour l'opération",EXPORTCSV_MISSING_CSV_SPECS:"Exportation CSV : spécifications CSV manquantes",EXPORTCSV_MISSING_SEPARATOR:"Export CSV : séparateur manquant",EXPORTCSV_INVALID_SEPARATOR:"Exportation CSV : séparateur non valide",EXPORTCSV_MISSING_TITLE_VARIANT_SEPARATOR:"Exportation CSV : séparateur de variante de titre manquant",EXPORTCSV_MISSING_NEW_LINE_CHAR:"Exportation CSV : caractère de nouvelle ligne manquant",EXPORTCSV_INVALID_NEW_LINE_CHAR:"Exportation CSV : caractère de nouvelle ligne non valide",EXPORTCSV_MISSING_PASSWORD:"Export CSV : mot de passe manquant",EXPORTJSONL_MISSING_JSONL_SPECS:"Export JSONL : spécifications JSONL manquantes",EXPORTJSONL_MISSING_PLATFORM:"Export JSONL : plateforme manquante",EXPORTJSONL_INVALID_PLATFORM:"Export JSONL : plateforme non valide",EXPORTJSONL_MISSING_PASSWORD:"Export JSONL : mot de passe manquant",EXPORTJSONL_EXPORT_REQUIRES_PAYING:"Exportation JSONL : l'exportation nécessite un forfait payant",ANALYSIS_MISSING_QUERY:"Analyse : requête manquante",ANALYSIS_CANT_ANALYZE_SECRET_MEMORI:"Analyse : impossible d'analyser les souvenirs secrets",ANALYSIS_USER_QUERY_MATCH_REQUIRES_DEEP_THOUGHT:"Analyse : la correspondance avec la requête de l'utilisateur nécessite une réflexion approfondie",BADGE_ASSIGNMENT_WRONG_OR_MISSING_CREDENTIALS:"Attribution des badges : identifiants incorrects ou manquants",BADGE_ASSIGNMENT_MISSING_REF_ID:"Affectation du badge : ID de référence manquant",BADGE_ASSIGNMENT_OUTCOME_NOT_FOUND:"Attribution des badges : résultat introuvable",BADGE_ASSIGNMENT_MISSING_ASSERTION_URL:"Attribution du badge : URL d'assertion manquante",BADGE_ASSIGNMENT_MISSING_BADGE_URL:"Attribution du badge : URL du badge manquante",BADGE_ASSIGNMENT_MISSING_ISSUER_URL:"Attribution du badge : URL de l'émetteur manquante",BADGE_ASSIGNMENT_INVALID_URL:"Attribution du badge : URL invalide",BADGE_ASSIGNMENT_MISSING_RECIPIENT:"Affectation du badge : destinataire manquant",BADGE_ASSIGNMENT_UNKNOWN_RECIPIENT_TYPE:"Attribution du badge : type de destinataire inconnu",BADGE_ASSIGNMENT_MISSING_RECIPIENT_IDENTITY:"Attribution du badge : identité du destinataire manquante",BADGE_ASSIGNMENT_MISSING_RECIPIENT_HASH_TYPE:"Attribution du badge : type de hachage du destinataire manquant",BADGE_ASSIGNMENT_UNKNOWN_RECIPIENT_HASH_TYPE:"Attribution du badge : type de hachage du destinataire inconnu",BADGE_ASSIGNMENT_WRONG_RECIPIENT_IDENTITY:"Attribution du badge : identité du destinataire incorrecte",BADGE_NOT_FOUND:"Badge introuvable",OUTCOME_NO_DCM_CONFIGURED:"Résultat : aucun DCM configuré",OUTCOME_USER_BADGES_DISABLED:"Résultat : badges utilisateur désactivés",COMPLETION_CONFIG_MISSING_NAME:"Configuration des complétions : nom manquant",COMPLETION_CONFIG_MISSING_PROVIDER:"Configuration des complétions : fournisseur manquant",COMPLETION_CONFIG_MISSING_ENDPOINT:"Configuration des complétions : point de terminaison manquant",COMPLETION_CONFIG_MISSING_API_KEY:"Configuration des complétions : clé API manquante",COMPLETION_CONFIG_MISSING_MODEL:"Configuration des complétions : modèle manquant",COMPLETION_CONFIG_NO_PURPOSE_SPECIFIED:"Configuration des complétions : au moins un type de complétions doit être spécifié",COMPLETION_CONFIG_INVALID_NAME:"Configuration des complétions: nom non valide",COMPLETION_CONFIG_INVALID_PURPOSE:"Configuration des complétions : type de complétions non valide",COMPLETION_CONFIG_INVALID_ENDPOINT:"Configuration des achèvements : point de terminaison non valide",COMPLETION_CONFIG_INCONSISTENT_ENDPOINT:"Configuration des complétions : point de terminaison incohérent",COMPLETION_CONFIG_INVALID_PROVIDER:"Configuration des complétions : fournisseur non valide",COMPLETION_CONFIG_NOT_FOUND:"Configuration des complétions : introuvable",COMPLETION_CONFIG_NOT_ACCESSIBLE:"Configuration des complétions : non accessible",COMPLETION_CONFIG_NAME_RESERVED:"Configuration des complétions : nom réservé",COMPLETION_CONFIG_NAME_ALREADY_EXISTS:"Configuration des complétions : le nom existe déjà",COMPLETION_CONFIG_VISIBILITY_CHANGE_NOT_ALLOWED:"Configuration des complétions : changement de visibilité non autorisé"},$De={yes:A6e,no:E6e,confirm:C6e,apply:w6e,cancel:T6e,show:x6e,hide:I6e,send:b6e,close:M6e,edit:R6e,delete:"Supprimer",loading:N6e,expand:P6e,collapse:O6e,fullscreenEnter:D6e,fullscreenExit:L6e,center:k6e,bottom:B6e,hidden:F6e,day:z6e,month:U6e,year:j6e,createdAt:G6e,selected:H6e,page:V6e,actions:$6e,next:W6e,previous:q6e,copy:Q6e,copyRawCode:J6e,copyToClipboard:K6e,showOriginalText:Y6e,showTranslatedText:X6e,exactPosition:Z6e,uncertain:eDe,question:tDe,nothingFound:nDe,venue:rDe,searchVenue:iDe,memoriBlockedTitle:sDe,memoriBlockedUntil:oDe,memoriBlockedAnon:aDe,memoriBlockedReasonExceedChats:lDe,memoriBlockedGiverHelper:cDe,generatedByAI:uDe,whyThisAnswer:dDe,whyThisAnswerHelper:hDe,completionsEnabled:fDe,completionProviderDown:pDe,completionProviderFallbackName:mDe,completionProviderCheckStatusPage:gDe,boardOfExperts:vDe,birthDate:yDe,birthDateHelper:_De,underage:SDe,underageTwinSession:ADe,errorFetchingSession:EDe,errorGettingReferralURL:CDe,errorReopeningSession:wDe,ageVerification:TDe,ageVerificationText:xDe,nsfw:IDe,deepThought:bDe,deepThoughtHelper:MDe,deepThoughtDisclaimerTitle:RDe,deepThoughtDisclaimer:NDe,deepThoughtPreDisclaimerUnlogged:PDe,deepThoughtPreDisclaimerNotAllowed:ODe,notEnoughCredits:DDe,knownFacts:LDe,auth:kDe,widget:BDe,write_and_speak:FDe,media:zDe,gamification:UDe,login:jDe,success:GDe,Error:"Erreur","internal server error":"Oupsie, désolé... Quelque chose s'est mal passé sur le serveur",error:HDe,"error.loading":"Erreur lors du chargement du contenu.","error.generic":"Oupsie, désolé... quelque chose s'est mal passé.","error.serverNotResponding":"Nous effectuons une maintenance ou publions des mises à jour. ","error.notFound":"Oupsie, nous n'avons pas trouvé la page que vous cherchiez.","error.goBackTo":"Vous pouvez essayer de revenir au","error.reloadPage":"Recharger la page","error.tryAgain":"Essayer à nouveau","error.unauthorized":"Vous n'êtes pas autorisé à consulter ce contenu.","error.unprocessableEntity":"Erreur lors du traitement de la demande. ",errors:VDe},WDe="Ja",qDe="NEIN",QDe="Bestätigen",JDe="Anwenden",KDe="Stornieren",YDe="Zeigen",XDe="Verstecken",ZDe="Schicken",e5e="Schließen",t5e="Bearbeiten",n5e="Laden",r5e="Expandieren",i5e="Zusammenbruch",s5e="Geben Sie den Vollbildmodus ein",o5e="Beenden Sie den Vollbildmodus",a5e="Center",l5e="Unten",c5e="Versteckt",u5e="Tag",d5e="Monat",h5e="Jahr",f5e="Erstellungsdatum",p5e="Ausgewählt",m5e="Seite",g5e="Aktionen",v5e="Nächste",y5e="Vorherige",_5e="Kopie",S5e="Rohcode kopieren",A5e="In die Zwischenablage kopieren",E5e="Original anzeigen",C5e="Übersetzung anzeigen",w5e="Genaue Position",T5e="Unsicher",x5e="Frage",I5e="Nichts gefunden",b5e="Veranstaltungsort",M5e="Veranstaltungsort suchen...",R5e="Blockiert",N5e="Memori blockiert bis {{date}}",P5e='Momentan "{{name}}„Kann nicht antworten, komm hierher zurück {{date}}',O5e="weil der monatliche Schwellenwert für erlaubte Chats überschritten wurde.",D5e="Sie können es weiterhin als Administrator verwalten, andere Benutzer können jedoch nicht damit interagieren.",L5e="Von KI generierte Antworten können gelegentlich falsche Informationen generieren",k5e="Warum diese Antwort?",B5e="Diese Antwort wurde automatisch von einer künstlichen Intelligenz auf Basis dieser verifizierten Inhalte generiert.",F5e="Fortschrittliche KI kann mit automatisch generierten Antworten reagieren, die manchmal falsche Informationen enthalten können",z5e="Dieser Zwilling ist mit einer generativen KI von integriert {{provider}}, aber es ist derzeit nicht verfügbar. ",U5e="ein externer Anbieter",j5e="Überprüfen Sie die Statusseite",G5e="Expertengremium",H5e="Geburtsdatum",V5e="Wir fragen nur nach Ihrem Geburtsdatum, um Funktionen zu aktivieren oder zu deaktivieren, für die Altersbeschränkungen gelten",$5e="Das müssen Sie mindestens sein {{age}} Jahre alt, um sich anzumelden.",W5e="Das müssen Sie mindestens sein {{age}} Jahre alt, um mit diesem Zwilling zu interagieren.",q5e="Fehler beim Laden der Sitzung",Q5e="Fehler beim Laden des Referrals",J5e="Fehler beim erneuten Öffnen der Sitzung",K5e="Altersüberprüfung",Y5e="Um mit diesem Zwilling interagieren zu können, müssen Sie mindestens sein {{minAge}} Jahre alt.",X5e="NSFW: Dieser Twin enthält Inhalte für Erwachsene",Z5e="Tiefer Gedanke",eLe="Deep Thought ist eine erweiterte Funktion der KI, die es Ihnen ermöglicht, Ihre Gespräche voll auszuschöpfen, indem Sie sie verfolgen. ",tLe="Deep Thought aktiviert",nLe="Deep Thought ist eine erweiterte Funktion der KI, die es Ihnen ermöglicht, Ihre Gespräche voll auszuschöpfen, indem Sie sie verfolgen. ",rLe="Melden Sie sich an, um Deep Thought zu aktivieren.",iLe="Deep Thought ist deaktiviert, da Sie der Nutzung nicht zugestimmt haben. Sie können dies jederzeit in Ihren Kontoeinstellungen ändern.",sLe="Der Autor dieses Zwillings verfügt nicht über genügend Credits, um Ihre Frage zu beantworten.",oLe={title:"Bekannte Fakten",description:"Einzelheiten zu den Informationen, die zwischen Ihnen und geteilt werden {{memoriName}}",type:"Typ",typeShortTerm:"Kurzfristig",typeLongTerm:"Langfristig",typeHelper:`Typen:
`,text:"Text",deleteSuccess:"Bekannte Tatsache gelöscht",deleteConfirmTitle:"Bekannte Tatsache löschen",deleteConfirmMessage:"Sind Sie sicher, dass Sie diese bekannte Tatsache löschen möchten?",deleteSelectedConfirmTitle:"Ausgewählte bekannte Fakten löschen",deleteSelectedConfirmMessage:"Sind Sie sicher, dass Sie die ausgewählten bekannten Fakten löschen möchten?"},aLe={title:"Authentifizierung",useRecoveryTokens:"Verwenden Sie Wiederherstellungstoken",tokens:"Token",addToken:"Token hinzufügen",usePassword:"Passwort verwenden",atLeast:"Mindestens"},lLe={instruct:"Anweisen",test:"Prüfen",sound:"Klang",position:"Positionspräferenzen",settings:"Einstellungen",share:"Aktie",sendOnKeypress:"Drücken Sie zum Senden die Eingabetaste",sendOnClick:"Klicken Sie auf Senden",boardOfExperts:"Expertengremium",showExpertsInTheBoard:"Experten in diesem Forum anzeigen",expertsInTheBoard:"Experten in diesem Forum",goToIntegrationsToCustomizeAvatar:"Um den Avatar anzupassen, gehen Sie zu „Teilen“ und passen Sie die öffentliche Seite an"},cLe={micButtonPopover:"Klicken Sie auf die Schaltfläche, um zu sprechen",micButtonPopoverListening:"Klicken Sie auf die Schaltfläche, um das Sprechen zu stoppen",pageInstructExplanation:"Um mir neue Dinge beizubringen, klicken Sie auf die Schaltfläche „ANLEITEN“, um zu beginnen",pageTryMeExplanation:"Um mit mir zu sprechen, klicken Sie auf die Schaltfläche START, um zu beginnen",instructButton:"WEISE MICH AN",tryMeButton:"START",chatHistory:"Chatverlauf",exportChatHistory:"Chatverlauf exportieren",exportChatHistoryMessage:"Möchten Sie den Chatverlauf exportieren?",chatBotButtonText:"KLICKEN SIE HIER, UM CHATBOT ZU ÖFFNEN",conversationStartedLabel:"Das Gespräch begann am",settingsHeaderLabel:"Richten Sie hier ein, wenn Sie die Memori als Dauerrede einstellen möchten, und ändern Sie die Stillesekunden, wenn Sie sie anpassen möchten.",continuousSpeechLabel:"Kontinuierliche Rede",holdToSpeak:"Halten Sie gedrückt, um zu sprechen",releaseToEndListening:"Lassen Sie los, um das Hören zu beenden",pressAndHoldToSpeak:"Zum Sprechen gedrückt halten",microphoneMode:"Mikrofonmodus",hideEmissionsLabel:"Vom Zwilling ausgegebenen Text ausblenden",secondsLabel:"Sekunden einstellen",controlsPosition:"Steuert die Position",tryMeHeaderLabel:"VERSUCHEN",unknownPosition:"Unbekannte Position",fieldPlace:"Geben Sie den Ort ein (z. B. „Mailand“)",showMapLinkFor:"Zeigen Sie die Position auf der Karte an",useMyPosition:"Nutzen Sie meine Position",myPosition:"Ihre Position",updatingPosition:"Position wird aktualisiert...",placeNotFound:"Ort nicht gefunden!",requirePosition:"Geben Sie vor dem Start Ihre Position ein",requirePositionHelp:"Zum Reden {{name}} Sie müssen entscheiden, ob Sie Ihre Position angeben oder nicht. ",dontWantToProvidePosition:"Ich möchte meine Position nicht bekannt geben",attachmentsLabel:"Bereichern Sie Ihre Botschaft",iWantToTalkToIn:"Ich möchte mit reden {{name}} In"},uLe={title:"Titel",editAttributes:"Medienattribute bearbeiten",uploadMimeTypeNotAllowed:"Der Dateityp ist nicht zulässig",uploadSizeLimitMessage:"Die hochgeladene Größe ist zu groß (max {{size}}MB)",uploadWrongResolutionMessage:"Die Auflösung muss sein {{width}}X{{height}} Pixel",memoriNameAlreadyUsed:"Du hast bereits einen Zwilling mit diesem Namen",uploadHelperImages:"Laden Sie eine Datei mit der Erweiterung PNG, JPG, JPEG oder GIF hoch und darf maximal eine Größe von haben {{size}}MB",uploadHelper:"Laden Sie eine Datei mit einer maximalen Größe von hoch {{size}}MB",uploadError:"Der Upload ist fehlgeschlagen",square:"Quadrat",scaleRatio:"Maßstabsverhältnis",addMediaLabel:"Fügen Sie ein Medium hinzu",insertThisMediaMsg:"Legen Sie diese Medien ein",mediaUploadMessage:"Klicken Sie hier, um ein neues Medium zu laden",addLinkLabel:"Fügen Sie einen Link hinzu",linkKey:"URL",linkValue:"Linktitel",insertThisLink:"Fügen Sie einen Link ein {{url}} mit Titel {{title}}"},dLe={level:"Ebene",points:"Punkte",memoriReachedLevel:"entwickelte sich weiter und erreichte ein höheres Niveau",levelGoToStatistics:"{{memori}} ist auf gleicher Höhe {{level}} mit {{points}} Punkte. ",congratulationsNewLevel:"Herzlichen Glückwunsch, Sie haben ein neues Level erreicht!",congratulationsNewLevelDescription:"Ihre Memori wurden mit weiterentwickelt {{points}} Punkte, schauen Sie sich die an",statistics:"Statistiken"},hLe={login:"Login",logout:"Abmelden",user:"Benutzer",loggedDrawerTitle:"Hallo, {{name}}!",loginDrawerTitle:"Login",signupDrawerTitle:"Melden Sie sich an",newUserSignUp:"Neuer Benutzer?",signUp:"Melden Sie sich an!",alreadyHaveAnAccount:"Sie haben bereits ein Konto?",backToLogin:"Zurück zum Login",registrationDisabled:"Die Registrierung ist deaktiviert",contactAdmin:"Wenden Sie sich an den Administrator, um Zugriff anzufordern",userNameOrEmail:"Benutzername oder E-Mail",email:"E-Mail",emailFormatError:"Bitte geben Sie eine gültige E-Mail-Adresse ein",username:"Benutzername",usernameContainsReservedWord:"Der Benutzername enthält ein reserviertes Wort. Bitte wählen Sie ein anderes",usernameFormatError:"Der Benutzername muss mindestens 3 Zeichen lang sein und darf nur Buchstaben, Zahlen und _ enthalten.",otpCode:"Bestätigungscode",resendVerificationCode:"Code erneut senden",resentVerificationCode:"Bestätigungscode gesendet! ",password:"Passwort",newPassword:"Neues Passwort",confirmPassword:"Passwort bestätigen",currentPassword:"Aktuelles Passwort",passwordMatchingError:"Passwörter stimmen nicht überein.",passwordFormatError:"Das Passwort muss mindestens 8 Zeichen lang sein und mindestens eine Zahl, einen Großbuchstaben, einen Kleinbuchstaben und ein Symbol enthalten",pwdWeak:"Schwach",pwdAcceptable:"Akzeptabel",pwdStrong:"Stark",mustChangePassword:"Sie müssen Ihr Passwort ändern",passwordChange:"Kennwort ändern",emailChange:"E-Mail ändern",avatarChange:"Avatar ändern",underage:"Das müssen Sie mindestens sein {{age}} Jahre alt, um sich anzumelden.",optional:"Optional",birthDate:"Geburtsdatum",birthDateHelper:"Wir fragen nur nach Ihrem Geburtsdatum, um Funktionen zu aktivieren oder zu deaktivieren, für die Altersbeschränkungen gelten",missingData:"Fehlende Informationen",missingDataHelper:"Wir wissen, dass dies etwas nervig ist, benötigen jedoch noch einige weitere Informationen, um Ihre Registrierung abzuschließen.",goToAccountToChangeYourPreferences:"Sie können Ihre Auswahl jederzeit auf Ihrer Kontoseite ändern.",deepThoughtExplaination:"Deep Thought ist eine erweiterte Funktion der KI, die es Ihnen ermöglicht, Ihre Gespräche voll auszuschöpfen, indem Sie sie verfolgen. ",tnCAndPPAcceptedHelper:"Seit Ihrer letzten Anmeldung haben sich die AGB und Datenschutzbestimmungen geändert. ",privacyLabel:"Ich habe die gelesen und akzeptiert",privacyAndCookiePolicy:"Datenschutz und Cookie-Richtlinie",and:"Und",termsOfService:"Nutzungsbedingungen",pAndCUAccepted:"Ich akzeptiere die Nutzungsbedingungen von Deep Thought",editAccount:"Konto bearbeiten",save:"Speichern"},fLe="Erfolg",pLe="Fehler",mLe={TENANT_NOT_FOUND:"Mieter nicht gefunden",TENANT_REGISTRATION_DISABLED:"Die Registrierung auf dieser Plattform ist deaktiviert",TENANT_MISSING_NAME:"Mieter: Name fehlt",TENANT_MAX_USERS_REACHED:"Maximale Anzahl Benutzer erreicht",TENANT_MAX_ADMINS_REACHED:"Maximale Anzahl an Admin-Benutzern erreicht",TENANT_ALREADY_EXISTS:"Mieter existiert bereits",TENANT_MISSING_DESCRIPTION:"Mieter: Beschreibung fehlt",TENANT_CANT_SET_COMPLETION_PROVIDER:"Mandant: Abschlussanbieter kann nicht festgelegt werden",USER_NOT_CONFIRMED:"Benutzer noch nicht bestätigt",USER_NOT_FOUND:"Benutzer nicht gefunden",USER_OR_PASSWORD_INVALID:"Ungültiger Benutzer oder Passwort",USER_MUST_CHANGE_PASSWORD:"Sie müssen Ihr Passwort ändern",USER_MUST_ENTER_VERIFICATION_CODE:"Sie müssen den Bestätigungscode eingeben",USER_MISSING_TENANT:"Benutzer: Mieter fehlt",USER_MISSING_NAME:"Benutzer: Name fehlt",USER_MISSING_PASSWORD:"Benutzer: Passwort fehlt",USER_MISSING_EMAIL:"Benutzer: Fehlende E-Mail",USER_MISSING_VERIFICATION_CODE:"Benutzer: Fehlender Bestätigungscode",USER_NAME_ALREADY_USED:"Benutzername wird bereits verwendet",USER_PASSWORD_NOT_CONFORMING_TO_POLICY:"Das Passwort entspricht nicht den Sicherheitsregeln",USER_EMAIL_ALREADY_USED:"E-Mail wird bereits verwendet",USER_EMAIL_INVALID:"Ungültige E-Mail",USER_VERIFICATION_CODE_INVALID:"Ungültiger Bestätigungscode",USER_MISSING_NAME_OR_EMAIL:"Benutzername oder E-Mail fehlen",USER_NAME_INVALID:"Ungültiger Benutzername",USER_HAS_ONE_OR_MORE_MEMORI:"Der Benutzer verfügt über eine oder mehrere Erinnerungen",USER_MISSING_NEW_PASSWORD:"Benutzer: Neues Passwort fehlt",USER_NOTHING_TO_DO:"Nichts zu tun",USER_CANT_CREATE_MEMORI:"Benutzer darf Memori nicht erstellen",USER_MAX_MEMORI_REACHED:"Maximale Anzahl an Memori erreicht",USER_TOO_MANY_ATTEMPTS:"Zu viele Versuche",USER_MUST_ACCEPT_TNC_AND_PP:"Sie müssen die Allgemeinen Geschäftsbedingungen akzeptieren",USER_BIRTH_DATE_CANT_BE_CHANGED:"Das Geburtsdatum kann nicht geändert werden",USER_CANT_SET_COMPLETION_PROVIDER:"Benutzer: darf den Vervollständigungsanbieter nicht verwalten",USER_CANT_ENABLE_DEEP_THOUGHT:"Benutzer: nicht für die Verwaltung von Deep Thought aktiviert",USER_CANT_ENABLE_DCM_INTEGRATION:"Benutzer: nicht für die Verwaltung der DCM-Integration aktiviert",USER_CANT_ENABLE_CHAINING_OR_BOARD_OF_EXPERTS:"Benutzer: darf die Verkettung oder Expertengruppe nicht verwalten",USER_CREATION_BILLING_DENIED_PERMISSION:"Sie haben nicht genügend Credits, um einen Zwilling zu erstellen",USER_HAS_ONE_OR_MORE_COMPLETION_CONFIGS:"Der Benutzer verfügt über eine oder mehrere Abschlusskonfigurationen",USER_CANT_BE_DELETED:"Benutzer kann nicht gelöscht werden",MEMORI_NOT_FOUND:"Erinnerungen nicht gefunden",MEMORI_NOT_ACCESSIBLE:"Memori nicht zugänglich",MEMORI_ONLY_OWNER_CAN_CHANGE_GIVER_TAG_AND_PIN:"Nur der Eigentümer kann das Tag oder die PIN ändern",SESSION_NOT_FOUND:"Sitzung nicht gefunden",SESSION_IS_NOT_ADMINISTRATIVE:"Nicht-administrative Sitzung",SESSION_EXPIRED:"Sitzung abgelaufen",MEMORI_MISSING_CONFIGURATION:"Zwilling: fehlende Konfiguration",MEMORI_CONFIGURATION_NOT_FOUND:"Zwilling: Konfiguration nicht gefunden",MEMORI_INVALID_PRIVACY_TYPE:"Twin: ungültiger Datenschutztyp",MEMORI_MISSING_PASSWORD:"Zwilling: Passwort fehlt",MEMORI_INVALID_TOTAL_NUMBER_OF_RECOVERY_TOKENS:"Twin: Gesamtzahl ungültiger Wiederherstellungstokens",MEMORI_INVALID_MINIMUM_NUMBER_OF_RECOVERY_TOKENS:"Twin: Mindestanzahl ungültiger Wiederherstellungstokens",MEMORI_INVALID_VOICE_TYPE:"Zwilling: ungültiger Stimmtyp",MEMORI_MISSING_NAME:"Zwilling: fehlender Name",MEMORI_MISSING_PASSWORD_OR_RECOVERY_TOKENS:"Zwilling: Fehlendes Passwort oder Wiederherstellungstoken",MEMORI_INVALID_ID:"Zwilling: ungültige ID",MEMORI_NAME_ALREADY_USED:"Zwillingsname wird bereits verwendet",MEMORI_INVALID_PIN:"Zwilling: Ungültige PIN",MEMORI_GIVER_TAG_PIN_CHANGE_REQUIRES_SEPARATE_OPERATION:"Zwilling: TAG- und PIN-Änderung erfordern separate Vorgänge",MEMORI_NO_PASSWORD_WHEN_PUBLIC:"Zwilling: Im öffentlichen Zustand ist kein Passwort erforderlich",MEMORI_DEEP_THOUGHT_REQUIRES_COMPLETIONS:"Für „Deep Thought“ müssen Vervollständigungen aktiviert sein",MEMORI_BOARD_OF_EXPERTS_REQUIRES_COMPLETIONS:"Für die Expertengruppe müssen Vervollständigungen aktiviert sein",MEMORI_INVALID_COMPLETION_CONFIG:"Zwilling: Ungültige Abschlusskonfiguration",MEMORI_TRANSFER_MISSING_DESTINATION_USER:"Übertragung: Zielbenutzer fehlt",MEMORI_TRANSFER_INVALID_DESTINATION_USER_ID:"Übertragung: Ungültige Zielbenutzer-ID",MEMORI_TRANSFER_DESTINATION_USER_DATA_INCONSISTENT:"Übertragung: Ungültige Zielbenutzerdaten",MEMORI_TRANSFER_NOTHING_TO_DO:"Transfer: nichts zu tun",MEMORI_CONFIGURATION_CANT_BE_CHANGED:"Speicher: Konfiguration kann nicht geändert werden",MEMORI_MISSING_NEW_PASSWORD:"Erinnerungen: Neues Passwort fehlt",MEMORI_FEATURE_REQUIRES_SUBSCRIPTION:"Für die Funktion ist ein Abonnement erforderlich",INTEGRATION_NOT_FOUND:"Integration nicht gefunden",MEMORI_SESSIONS_INVALID_DATE_FROM_FORMAT:"Ungültiges Datum aus Format",MEMORI_SESSIONS_INVALID_DATE_TO_FORMAT:"Ungültiges Datum zum Formatieren",INTEGRATION_INVALID_TYPE:"Ungültiger Integrationstyp",INTEGRATION_ALREADY_EXISTS:"Die Integration ist bereits vorhanden",INTEGRATION_MEMORI_IS_NOT_PUBLIC:"Nicht-öffentliche Erinnerungen können nicht integriert werden",INTEGRATION_MISSING_INVOCATION_TEXT:"Integration: fehlender Aufruftext",INTEGRATION_MISSING_DEVICE_EMAILS:"Integration: Fehlende Geräte-E-Mail",INTEGRATION_MEMORI_IS_EMPTY:"Leere Erinnerungen können nicht integriert werden",INTEGRATION_MISSING_PRIVACY_POLICY:"Integration: Datenschutzrichtlinie fehlt",INTEGRATION_MISSING_CATEGORY:"Integrationskategorie fehlt",INTEGRATION_MISSING_DESCRIPTION:"Fehlende Integrationsbeschreibung",INTEGRATION_INVALID_INVOCATION_TEXT:"Ungültiger Aufruftext",INTEGRATION_GOOGLE_NO_MORE_AVAILABLE:"Google Home nicht mehr verfügbar",UPLOAD_REQUIRES_MULTIPART_ENCODING:"Für den Upload ist eine mehrteilige Kodierung erforderlich",UPLOAD_MISSING_CONTENT_TYPE_BOUNDARY:"Hochladen: Inhaltstypgrenze fehlt",UPLOAD_MAX_LENGTH_EXCEEDED:"Upload: Maximale Größe überschritten",UPLOAD_FILE_IS_EMPTY:"Hochladen: leere Datei",UPLOAD_INVALID_FILE_TYPE_OR_SIGNATURE:"Hochladen: Ungültiger Dateityp oder ungültige Signatur",UPLOAD_MISSING_FILE_NAME:"Hochladen: Dateiname fehlt",UPLOAD_INVALID_MEMORY_ID:"Hochladen: Ungültige Inhalts-ID",UPLOAD_MISSING_FILE_CONTENT:"Hochladen: Dateiinhalt fehlt",ASSET_NOT_FOUND:"Asset nicht gefunden",ASSET_NOT_ACCESSIBLE:"Asset nicht zugänglich",ASSET_MISSING_SESSION_ID:"Asset: Sitzungs-ID fehlt",ASSET_INVALID_FILE_NAME:"Asset: ungültiger Dateiname",INVITATION_NOT_FOUND:"Einladung nicht gefunden",INVITATION_NOT_ACCESSIBLE:"Einladung nicht zugänglich",INVITATION_ALREADY_ACCEPTED:"Einladung bereits angenommen",INVITATION_ALREADY_REJECTED:"Einladung bereits abgelehnt",INVITATION_MISSING_DESTINATION_EMAIL:"Einladung: Ziel-E-Mail fehlt",INVITATION_DESTINATION_EMAIL_INVALID:"Einladung: Ziel-E-Mail-Adresse ungültig",INVITATION_MISSING_TAG:"Einladung: Tag fehlt",INVITATION_MISSING_PIN:"Einladung: PIN fehlt",INVITATION_INVALID_PIN:"Einladung: ungültige PIN",INVITATION_INVALID_TYPE:"Einladung: ungültiger Typ",INVITATION_MISSING_DESTINATION_NAME:"Einladung: Zielname fehlt",INVITATION_TAG_PIN_CANT_BE_CHANGED:"Einladung: Tag und Pin können nicht geändert werden",INVITATION_CANT_BE_CHANGED:"Absicht: kann nicht geändert werden",ACTIONLOG_INVALID_USER_ID:"Ungültige Benutzer-ID",ACTIONLOG_INVALID_DATE_FROM_FORMAT:"Datum von: ungültiges Format",ACTIONLOG_INVALID_DATE_TO_FORMAT:"Datum bis: ungültiges Format",ACTIONLOG_INVALID_MEMORI_ID:"Ungültige Memori-ID",CONSUMPTIONLOG_INVALID_TYPE:"Ungültiger Protokolltyp",CONSUMPTIONLOG_INVALID_DATE_FROM_FORMAT:"Datum von: ungültiges Format",CONSUMPTIONLOG_INVALID_DATE_TO_FORMAT:"Datum bis: ungültiges Format",CONSUMPTIONLOG_INVALID_USER_ID:"Ungültige Benutzer-ID",CONSUMPTIONLOG_INVALID_MEMORI_ID:"Ungültige Memori-ID",NOTIFICATIONPREFS_INVALID_CHATLOG_EXTRACTION_PERIOD:"Benachrichtigungen: Ungültiger Chat-Protokoll-Extraktionszeitraum",PROCESS_INVALID_TYPE:"Ungültiger Prozesstyp",PROCESS_ALREADY_RUNNING:"Prozess läuft bereits",PROCESS_NOT_FOUND:"Prozess nicht gefunden",IMPORTCSV_MISSING_ROWS:"CSV-Import: fehlende Zeilen",IMPORTCSV_MISSING_CSV:"CSV-Import: CSV fehlt",IMPORTCSV_MISSING_SEPARATOR:"CSV-Import: fehlendes Trennzeichen",IMPORTCSV_INVALID_SEPARATOR:"CSV-Import: Ungültiges Trennzeichen",IMPORTCSV_MISSING_HEADERS:"CSV-Import: fehlende Header",IMPORTCSV_MISSING_TITLE_VARIANT_SEPARATOR:"CSV-Import: Titelvariantentrennzeichen fehlt",IMPORTCSV_INVALID_RECEIVER_ID:"CSV-Import: ungültige Empfänger-ID",IMPORTCSV_INVALID_MEDIA_LINK:"CSV-Import: Ungültiger Medienlink",IMPORTCSV_INVALID_LINK_TITLE_HANDLING:"CSV-Import: Ungültiger Linktitel",IMPORTCSV_UNDETECTABLE_CHAR_ENCODING:"CSV-Import: Nicht erkennbare Zeichenkodierung",IMPORTCSV_CANT_IMPORT_TO_SECRET_MEMORI:"CSV-Import: Der Import in Secret Memories ist nicht möglich",IMPORTTXT_MISSING_ROWS:"TXT wird importiert: Zeilen fehlen",IMPORTTXT_INVALID_GRANULARITY:"TXT importieren: ungültige Granularität",IMPORTTXT_INVALID_RECEIVER_ID:"TXT importieren: ungültige Empfänger-ID",IMPORTTXT_INVALID_MEDIA_LINK:"TXT importieren: Ungültiger Medienlink",IMPORTTXT_INVALID_LINK_TITLE_HANDLING:"TXT importieren: ungültiger Linktitel",IMPORTTXT_UNDETECTABLE_CHAR_ENCODING:"TXT-Import: Nicht erkennbare Zeichenkodierung",IMPORTTXT_CANT_IMPORT_TO_SECRET_MEMORI:"TXT-Import: Der Import in Secret Memories ist nicht möglich",IMPORTTXT_IMPORT_LIMIT_EXCEEDED:"TXT importieren: Importlimit überschritten",IMPORTTXT_IMPORT_ON_GPT4_REQUIRES_API_KEY:"TXT importieren: Für den Import auf GPT-4 ist ein API-Schlüssel erforderlich",IMPORTTXT_IMPORT_REQUIRES_PAYING:"TXT importieren: Für den Import ist ein kostenpflichtiger Plan erforderlich",IMPORTTXT_BILLING_DENIED_PERMISSION:"TXT importieren: Sie haben nicht genügend Credits für den Vorgang",EXPORTCSV_MISSING_CSV_SPECS:"CSV-Export: CSV-Spezifikationen fehlen",EXPORTCSV_MISSING_SEPARATOR:"CSV-Export: fehlendes Trennzeichen",EXPORTCSV_INVALID_SEPARATOR:"CSV-Export: Ungültiges Trennzeichen",EXPORTCSV_MISSING_TITLE_VARIANT_SEPARATOR:"CSV-Export: fehlendes Titelvarianten-Trennzeichen",EXPORTCSV_MISSING_NEW_LINE_CHAR:"CSV-Export: Fehlendes Zeilenumbruchzeichen",EXPORTCSV_INVALID_NEW_LINE_CHAR:"CSV-Export: Ungültiges Zeilenumbruchzeichen",EXPORTCSV_MISSING_PASSWORD:"CSV-Export: Passwort fehlt",EXPORTJSONL_MISSING_JSONL_SPECS:"JSONL-Export: JSONL-Spezifikationen fehlen",EXPORTJSONL_MISSING_PLATFORM:"JSONL-Export: fehlende Plattform",EXPORTJSONL_INVALID_PLATFORM:"JSONL-Export: ungültige Plattform",EXPORTJSONL_MISSING_PASSWORD:"JSONL-Export: Passwort fehlt",EXPORTJSONL_EXPORT_REQUIRES_PAYING:"JSONL-Export: Für den Export ist ein kostenpflichtiger Plan erforderlich",ANALYSIS_MISSING_QUERY:"Analyse: fehlende Abfrage",ANALYSIS_CANT_ANALYZE_SECRET_MEMORI:"Analyse: Geheime Erinnerungen können nicht analysiert werden",ANALYSIS_USER_QUERY_MATCH_REQUIRES_DEEP_THOUGHT:"Analyse: Passende Benutzeranfragen erfordern tiefes Denken",BADGE_ASSIGNMENT_WRONG_OR_MISSING_CREDENTIALS:"Ausweiszuweisung: falsche oder fehlende Zugangsdaten",BADGE_ASSIGNMENT_MISSING_REF_ID:"Badge-Zuordnung: Referenz-ID fehlt",BADGE_ASSIGNMENT_OUTCOME_NOT_FOUND:"Badge-Zuweisung: Ergebnis nicht gefunden",BADGE_ASSIGNMENT_MISSING_ASSERTION_URL:"Badge-Zuweisung: Fehlende Behauptungs-URL",BADGE_ASSIGNMENT_MISSING_BADGE_URL:"Badge-Zuweisung: Badge-URL fehlt",BADGE_ASSIGNMENT_MISSING_ISSUER_URL:"Badge-Zuweisung: Aussteller-URL fehlt",BADGE_ASSIGNMENT_INVALID_URL:"Badge-Zuweisung: Ungültige URL",BADGE_ASSIGNMENT_MISSING_RECIPIENT:"Ausweiszuordnung: fehlender Empfänger",BADGE_ASSIGNMENT_UNKNOWN_RECIPIENT_TYPE:"Badge-Zuordnung: unbekannter Empfängertyp",BADGE_ASSIGNMENT_MISSING_RECIPIENT_IDENTITY:"Ausweiszuordnung: Empfängeridentität fehlt",BADGE_ASSIGNMENT_MISSING_RECIPIENT_HASH_TYPE:"Badge-Zuweisung: Empfänger-Hash-Typ fehlt",BADGE_ASSIGNMENT_UNKNOWN_RECIPIENT_HASH_TYPE:"Badge-Zuweisung: Empfänger-Hash-Typ unbekannt",BADGE_ASSIGNMENT_WRONG_RECIPIENT_IDENTITY:"Badge-Zuordnung: Falsche Empfängeridentität",BADGE_NOT_FOUND:"Abzeichen nicht gefunden",OUTCOME_NO_DCM_CONFIGURED:"Ergebnis: kein DCM konfiguriert",OUTCOME_USER_BADGES_DISABLED:"Ergebnis: Benutzerausweise deaktiviert",COMPLETION_CONFIG_MISSING_NAME:"Vervollständigungskonfiguration: Name fehlt",COMPLETION_CONFIG_MISSING_PROVIDER:"Vervollständigungskonfiguration: fehlender Anbieter",COMPLETION_CONFIG_MISSING_ENDPOINT:"Abschlusskonfiguration: fehlender Endpunkt",COMPLETION_CONFIG_MISSING_API_KEY:"Vervollständigungskonfiguration: fehlender API-Schlüssel",COMPLETION_CONFIG_MISSING_MODEL:"Vervollständigungskonfiguration: fehlendes Modell",COMPLETION_CONFIG_NO_PURPOSE_SPECIFIED:"Vervollständigungskonfiguration: Es muss mindestens ein Vervollständigungstyp angegeben werden",COMPLETION_CONFIG_INVALID_NAME:"Vervollständigungskonfiguration: ungültiger Name",COMPLETION_CONFIG_INVALID_PURPOSE:"Vervollständigungskonfiguration: Ungültiger Vervollständigungstyp",COMPLETION_CONFIG_INVALID_ENDPOINT:"Abschlusskonfiguration: Ungültiger Endpunkt",COMPLETION_CONFIG_INCONSISTENT_ENDPOINT:"Abschlusskonfiguration: inkonsistenter Endpunkt",COMPLETION_CONFIG_INVALID_PROVIDER:"Vervollständigungskonfiguration: ungültiger Anbieter",COMPLETION_CONFIG_NOT_FOUND:"Vervollständigungskonfiguration: nicht gefunden",COMPLETION_CONFIG_NOT_ACCESSIBLE:"Vervollständigungskonfiguration: nicht zugänglich",COMPLETION_CONFIG_NAME_RESERVED:"Vervollständigungskonfiguration: Name reserviert",COMPLETION_CONFIG_NAME_ALREADY_EXISTS:"Vervollständigungskonfiguration: Name existiert bereits",COMPLETION_CONFIG_VISIBILITY_CHANGE_NOT_ALLOWED:"Vervollständigungskonfiguration: Änderung der Sichtbarkeit nicht zulässig"},gLe={yes:WDe,no:qDe,confirm:QDe,apply:JDe,cancel:KDe,show:YDe,hide:XDe,send:ZDe,close:e5e,edit:t5e,delete:"Löschen",loading:n5e,expand:r5e,collapse:i5e,fullscreenEnter:s5e,fullscreenExit:o5e,center:a5e,bottom:l5e,hidden:c5e,day:u5e,month:d5e,year:h5e,createdAt:f5e,selected:p5e,page:m5e,actions:g5e,next:v5e,previous:y5e,copy:_5e,copyRawCode:S5e,copyToClipboard:A5e,showOriginalText:E5e,showTranslatedText:C5e,exactPosition:w5e,uncertain:T5e,question:x5e,nothingFound:I5e,venue:b5e,searchVenue:M5e,memoriBlockedTitle:R5e,memoriBlockedUntil:N5e,memoriBlockedAnon:P5e,memoriBlockedReasonExceedChats:O5e,memoriBlockedGiverHelper:D5e,generatedByAI:L5e,whyThisAnswer:k5e,whyThisAnswerHelper:B5e,completionsEnabled:F5e,completionProviderDown:z5e,completionProviderFallbackName:U5e,completionProviderCheckStatusPage:j5e,boardOfExperts:G5e,birthDate:H5e,birthDateHelper:V5e,underage:$5e,underageTwinSession:W5e,errorFetchingSession:q5e,errorGettingReferralURL:Q5e,errorReopeningSession:J5e,ageVerification:K5e,ageVerificationText:Y5e,nsfw:X5e,deepThought:Z5e,deepThoughtHelper:eLe,deepThoughtDisclaimerTitle:tLe,deepThoughtDisclaimer:nLe,deepThoughtPreDisclaimerUnlogged:rLe,deepThoughtPreDisclaimerNotAllowed:iLe,notEnoughCredits:sLe,knownFacts:oLe,auth:aLe,widget:lLe,write_and_speak:cLe,media:uLe,gamification:dLe,login:hLe,success:fLe,Error:"Fehler","internal server error":"Oupsie, tut mir leid... Auf dem Server ist ein Fehler aufgetreten",error:pLe,"error.loading":"Fehler beim Laden des Inhalts.","error.generic":"Oupsie, tut mir leid ... etwas ist schief gelaufen.","error.serverNotResponding":"Wir führen Wartungsarbeiten durch oder veröffentlichen Updates. ","error.notFound":"Oupsie, wir haben die von Ihnen gesuchte Seite nicht gefunden.","error.goBackTo":"Sie können versuchen, dorthin zurückzukehren","error.reloadPage":"Laden Sie die Seite neu","error.tryAgain":"Versuchen Sie es erneut","error.unauthorized":"Es ist Ihnen nicht gestattet, diesen Inhalt anzuzeigen.","error.unprocessableEntity":"Fehler beim Verarbeiten der Anfrage. ",errors:mLe},vLe="Sí",yLe="No",_Le="Confirmar",SLe="Aplicar",ALe="Cancelar",ELe="Espectáculo",CLe="Esconder",wLe="Enviar",TLe="Cerca",xLe="Editar",ILe="Cargando",bLe="Expandir",MLe="Colapsar",RLe="Entrar en pantalla completa",NLe="Salir de pantalla completa",PLe="Centro",OLe="Abajo",DLe="Oculto",LLe="Día",kLe="Mes",BLe="Año",FLe="Fecha de creación",zLe="Seleccionado",ULe="página",jLe="Comportamiento",GLe="Próximo",HLe="Anterior",VLe="Copiar",$Le="Copiar código sin formato",WLe="Copiar al portapapeles",qLe="Mostrar original",QLe="Mostrar traducción",JLe="Posición exacta",KLe="Incierto",YLe="Pregunta",XLe="No se encontró nada",ZLe="Evento",e8e="Buscar lugar...",t8e="Obstruido",n8e="Memori bloqueado hasta {{date}}",r8e='Actualmente "{{name}}"No puedo responder, vuelve aquí. {{date}}',i8e="porque ha superado el umbral mensual de chats permitidos.",s8e="Aún podrás administrarlo como administrador, pero otros usuarios no podrán interactuar con él.",o8e="La respuesta generada por IA, ocasionalmente puede generar información incorrecta",a8e="¿Por qué esta respuesta?",l8e="Esta respuesta fue generada automáticamente por una inteligencia artificial basada en estos contenidos verificados.",c8e="La IA avanzada puede responder con respuestas generadas automáticamente que a veces pueden contener información incorrecta.",u8e="Este Twin está integrado con una IA generativa de {{provider}}, pero actualmente no está disponible. ",d8e="un proveedor externo",h8e="Comprobar página de estado",f8e="junta de expertos",p8e="Fecha de nacimiento",m8e="Solicitamos tu fecha de nacimiento únicamente para habilitar o deshabilitar funcionalidades que tienen restricciones de edad.",g8e="Debes ser al menos {{age}} años para inscribirse.",v8e="Debes ser al menos {{age}} años para interactuar con este gemelo.",y8e="Error durante el cargamento de la sesión",_8e="Error durante el cargamento del référent",S8e="Error durante el re-abrir la sesión",A8e="Verificación de edad",E8e="Para interactuar con este Gemelo, debes tener al menos {{minAge}} años.",C8e="NSFW: Este gemelo contiene contenido para adultos",w8e="pensamiento profundo",T8e="Deep Thought es una característica avanzada de la IA que te permitirá explotar al máximo tus conversaciones al realizar un seguimiento de ellas. ",x8e="Pensamiento profundo habilitado",I8e="Deep Thought es una característica avanzada de la IA que te permitirá explotar al máximo tus conversaciones al realizar un seguimiento de ellas. ",b8e="Inicie sesión para habilitar Pensamiento profundo.",M8e="Deep Thought está deshabilitado porque usted no dio su consentimiento para su uso; puede cambiar esto en cualquier momento en la configuración de su cuenta.",R8e="El autor de este Gemelo no tiene suficientes créditos para responder a tu pregunta.",N8e={title:"hechos conocidos",description:"Detalles de la información compartida entre usted y {{memoriName}}",type:"Tipo",typeShortTerm:"Corto plazo",typeLongTerm:"Largo plazo",typeHelper:`Tipos:
`,text:"Texto",deleteSuccess:"Hecho conocido eliminado",deleteConfirmTitle:"Eliminar hecho conocido",deleteConfirmMessage:"¿Está seguro de que desea eliminar este hecho conocido?",deleteSelectedConfirmTitle:"Eliminar hechos conocidos seleccionados",deleteSelectedConfirmMessage:"¿Está seguro de que desea eliminar los hechos conocidos seleccionados?"},P8e={title:"Autenticación",useRecoveryTokens:"Utilice tokens de recuperación",tokens:"Fichas",addToken:"Agregar token",usePassword:"Usar contraseña",atLeast:"Al menos"},O8e={instruct:"Instruir",test:"Prueba",sound:"Sonido",position:"Preferencias de posición",settings:"Ajustes",share:"Compartir",sendOnKeypress:"Presiona Enter para enviar",sendOnClick:"Haga clic en Enviar",boardOfExperts:"junta de expertos",showExpertsInTheBoard:"Mostrar expertos en este foro",expertsInTheBoard:"Expertos en este foro",goToIntegrationsToCustomizeAvatar:"Para personalizar el avatar, vaya a Compartir y personalice la página pública."},D8e={micButtonPopover:"Haga clic en el botón para hablar",micButtonPopoverListening:"Haga clic en el botón para dejar de hablar.",pageInstructExplanation:"Para enseñarme cosas nuevas, haga clic en el botón INSTRUIRME para comenzar.",pageTryMeExplanation:"Para hablar conmigo haga clic en el botón INICIO para comenzar",instructButton:"INSTRUÍME",tryMeButton:"COMENZAR",chatHistory:"Historial de chat",exportChatHistory:"Exportar historial de chat",exportChatHistoryMessage:"¿Quieres exportar el historial de chat?",chatBotButtonText:"HAGA CLIC AQUÍ PARA ABRIR EL CHATBOT",conversationStartedLabel:"La conversación comenzó el",settingsHeaderLabel:"Configure aquí si desea configurar la memoria como voz continua y cambie los segundos de silencio si desea personalizarlos.",continuousSpeechLabel:"discurso continuo",holdToSpeak:"Mantenga para hablar",releaseToEndListening:"Suelte para finalizar la escucha",pressAndHoldToSpeak:"Mantenga presionado para hablar",microphoneMode:"Modo micrófono",hideEmissionsLabel:"Ocultar texto emitido por el Twin",secondsLabel:"Establecer segundos",controlsPosition:"Posición de los controles",tryMeHeaderLabel:"INTENTAR",unknownPosition:"Posición desconocida",fieldPlace:"Escribe el lugar (por ejemplo, 'Milano')",showMapLinkFor:"Mostrar la posición en el mapa.",useMyPosition:"Usa mi posición",myPosition:"Tu posición",updatingPosition:"Actualizando posición...",placeNotFound:"¡Lugar no encontrado!",requirePosition:"Inserte su posición antes de comenzar",requirePositionHelp:"para hablar con {{name}} usted tiene que decidir si proporciona su puesto o no. ",dontWantToProvidePosition:"No quiero proporcionar mi puesto.",attachmentsLabel:"Enriquece tu mensaje",iWantToTalkToIn:"quiero hablar con {{name}} en"},L8e={title:"Título",editAttributes:"Editar atributos de medios",uploadMimeTypeNotAllowed:"El tipo de archivo no está permitido.",uploadSizeLimitMessage:"El tamaño subido es demasiado grande (máx. {{size}}MEGABYTE)",uploadWrongResolutionMessage:"La resolución debe ser {{width}}incógnita{{height}} píxel",memoriNameAlreadyUsed:"Ya tienes un gemelo con este nombre.",uploadHelperImages:"Sube un archivo con extensión png, jpg, jpeg o gif, y que tenga como máximo un tamaño de {{size}}MEGABYTE",uploadHelper:"Cargue un archivo que tenga como máximo un tamaño de {{size}}MEGABYTE",uploadError:"Error al subir",square:"cuadrado",scaleRatio:"Relación de escala",addMediaLabel:"Agregar un medio",insertThisMediaMsg:"Inserte estos medios",mediaUploadMessage:"Haga clic para cargar un nuevo medio",addLinkLabel:"Agregar un enlace",linkKey:"URL",linkValue:"Título del enlace",insertThisLink:"Insertar un enlace a {{url}} con titulo {{title}}"},k8e={level:"Nivel",points:"agujas",memoriReachedLevel:"se volvió más evolucionado y alcanzó el nivel",levelGoToStatistics:"{{memori}} esta al nivel {{level}} con {{points}} agujas. ",congratulationsNewLevel:"¡Felicitaciones, has alcanzado un nuevo nivel!",congratulationsNewLevelDescription:"Tu Memori se volvió más evolucionado con {{points}} puntos, mira el",statistics:"estadística"},B8e={login:"Acceso",logout:"Cerrar sesión",user:"Usuario",loggedDrawerTitle:"Hola, {{name}}!",loginDrawerTitle:"Acceso",signupDrawerTitle:"Inscribirse",newUserSignUp:"¿Nuevo usuario?",signUp:"¡Inscribirse!",alreadyHaveAnAccount:"¿Ya tienes una cuenta?",backToLogin:"Volver a iniciar sesión",registrationDisabled:"El registro está deshabilitado",contactAdmin:"Póngase en contacto con el administrador para solicitar acceso",userNameOrEmail:"Nombre de usuario o correo electrónico",email:"Correo electrónico",emailFormatError:"Por favor, inserte un correo electrónico válido",username:"Nombre de usuario",usernameContainsReservedWord:"El nombre de usuario contiene una palabra reservada, elija otra",usernameFormatError:"El nombre de usuario debe tener al menos 3 caracteres y contener solo letras, números y _",otpCode:"Código de verificación",resendVerificationCode:"Reenviar código",resentVerificationCode:"¡Código de confirmación enviado! ",password:"Contraseña",newPassword:"Nueva contraseña",confirmPassword:"confirmar Contraseña",currentPassword:"Contraseña actual",passwordMatchingError:"Las contraseñas no coinciden.",passwordFormatError:"La contraseña debe tener al menos 8 caracteres y contener al menos un número, una letra mayúscula, una letra minúscula y un símbolo.",pwdWeak:"Débil",pwdAcceptable:"Aceptable",pwdStrong:"Fuerte",mustChangePassword:"Debes cambiar tu contraseña",passwordChange:"Cambiar la contraseña",emailChange:"Cambiar correo electrónico",avatarChange:"Cambiar avatar",underage:"Debes ser al menos {{age}} años para inscribirse.",optional:"Opcional",birthDate:"Fecha de nacimiento",birthDateHelper:"Solicitamos tu fecha de nacimiento únicamente para habilitar o deshabilitar funcionalidades que tienen restricciones de edad.",missingData:"Información faltante",missingDataHelper:"Sabemos que esto es un poco molesto, pero necesitamos más información para completar tu registro.",goToAccountToChangeYourPreferences:"Puede cambiar su elección en cualquier momento desde la página de su Cuenta.",deepThoughtExplaination:"Deep Thought es una característica avanzada de la IA que te permitirá explotar al máximo tus conversaciones al realizar un seguimiento de ellas. ",tnCAndPPAcceptedHelper:"Desde su último inicio de sesión, los Términos y condiciones y la Política de privacidad han cambiado. ",privacyLabel:"He leído y acepto el",privacyAndCookiePolicy:"Política de privacidad y cookies",and:"y",termsOfService:"Términos de servicio",pAndCUAccepted:"Acepto los términos de servicio sobre Deep Thought",editAccount:"Editar cuenta",save:"Ahorrar"},F8e="Éxito",z8e="Error",U8e={TENANT_NOT_FOUND:"Inquilino no encontrado",TENANT_REGISTRATION_DISABLED:"El registro en esta plataforma está deshabilitado",TENANT_MISSING_NAME:"Inquilino: falta el nombre",TENANT_MAX_USERS_REACHED:"Número máximo de usuarios alcanzado",TENANT_MAX_ADMINS_REACHED:"Número máximo de usuarios administradores alcanzado",TENANT_ALREADY_EXISTS:"El inquilino ya existe",TENANT_MISSING_DESCRIPTION:"Inquilino: falta descripción",TENANT_CANT_SET_COMPLETION_PROVIDER:"Inquilino: no se puede configurar el proveedor de finalización",USER_NOT_CONFIRMED:"Usuario aún no confirmado",USER_NOT_FOUND:"Usuario no encontrado",USER_OR_PASSWORD_INVALID:"Usuario o contraseña no válidos",USER_MUST_CHANGE_PASSWORD:"Debes cambiar tu contraseña",USER_MUST_ENTER_VERIFICATION_CODE:"Debes ingresar el código de verificación",USER_MISSING_TENANT:"Usuario: inquilino desaparecido",USER_MISSING_NAME:"Usuario: falta el nombre",USER_MISSING_PASSWORD:"Usuario: falta contraseña",USER_MISSING_EMAIL:"Usuario: Falta correo electrónico",USER_MISSING_VERIFICATION_CODE:"Usuario: Falta el código de verificación",USER_NAME_ALREADY_USED:"Nombre de usuario ya en uso",USER_PASSWORD_NOT_CONFORMING_TO_POLICY:"La contraseña no cumple con las reglas de seguridad.",USER_EMAIL_ALREADY_USED:"Correo electrónico ya en uso",USER_EMAIL_INVALID:"Correo electrónico no válido",USER_VERIFICATION_CODE_INVALID:"Código de verificación no válido",USER_MISSING_NAME_OR_EMAIL:"Falta nombre de usuario o correo electrónico",USER_NAME_INVALID:"Nombre de usuario no válido",USER_HAS_ONE_OR_MORE_MEMORI:"El usuario tiene uno o más recuerdos.",USER_MISSING_NEW_PASSWORD:"Usuario: falta nueva contraseña",USER_NOTHING_TO_DO:"Nada que hacer",USER_CANT_CREATE_MEMORI:"Usuario no autorizado a crear Memori",USER_MAX_MEMORI_REACHED:"Número máximo de Memori alcanzado",USER_TOO_MANY_ATTEMPTS:"demasiados intentos",USER_MUST_ACCEPT_TNC_AND_PP:"Debes aceptar los términos y condiciones.",USER_BIRTH_DATE_CANT_BE_CHANGED:"La fecha de nacimiento no se puede cambiar.",USER_CANT_SET_COMPLETION_PROVIDER:"Usuario: no tiene permiso para gestionar el proveedor de finalización",USER_CANT_ENABLE_DEEP_THOUGHT:"Usuario: no habilitado para gestionar Deep Thought",USER_CANT_ENABLE_DCM_INTEGRATION:"Usuario: no habilitado para gestionar la integración de DCM",USER_CANT_ENABLE_CHAINING_OR_BOARD_OF_EXPERTS:"Usuario: no se le permite gestionar encadenamiento o grupo de expertos",USER_CREATION_BILLING_DENIED_PERMISSION:"No tienes suficientes créditos para crear un gemelo",USER_HAS_ONE_OR_MORE_COMPLETION_CONFIGS:"El usuario tiene una o más configuraciones de finalización.",USER_CANT_BE_DELETED:"Usuario: no se puede eliminar",MEMORI_NOT_FOUND:"Memoria no encontrada",MEMORI_NOT_ACCESSIBLE:"Memorias no accesibles",MEMORI_ONLY_OWNER_CAN_CHANGE_GIVER_TAG_AND_PIN:"Sólo el propietario puede cambiar la etiqueta o el pin",SESSION_NOT_FOUND:"Sesión no encontrada",SESSION_IS_NOT_ADMINISTRATIVE:"Sesión no administrativa",SESSION_EXPIRED:"La sesión expiró",MEMORI_MISSING_CONFIGURATION:"Gemelo: falta configuración",MEMORI_CONFIGURATION_NOT_FOUND:"Gemelo: configuración no encontrada",MEMORI_INVALID_PRIVACY_TYPE:"Gemelo: tipo de privacidad no válido",MEMORI_MISSING_PASSWORD:"Gemelo: falta contraseña",MEMORI_INVALID_TOTAL_NUMBER_OF_RECOVERY_TOKENS:"Gemelo: número total de tokens de recuperación no válidos",MEMORI_INVALID_MINIMUM_NUMBER_OF_RECOVERY_TOKENS:"Gemelo: número mínimo de tokens de recuperación no válidos",MEMORI_INVALID_VOICE_TYPE:"Gemelo: tipo de voz no válido",MEMORI_MISSING_NAME:"Gemelo: falta nombre",MEMORI_MISSING_PASSWORD_OR_RECOVERY_TOKENS:"Gemelo: falta contraseña o token de recuperación",MEMORI_INVALID_ID:"Gemelo: identificación no válida",MEMORI_NAME_ALREADY_USED:"Nombre gemelo ya en uso",MEMORI_INVALID_PIN:"Gemelo: PIN no válido",MEMORI_GIVER_TAG_PIN_CHANGE_REQUIRES_SEPARATE_OPERATION:"Gemelo: el cambio de TAG y PIN requiere operaciones separadas",MEMORI_NO_PASSWORD_WHEN_PUBLIC:"Twin: no se requiere contraseña cuando es público",MEMORI_DEEP_THOUGHT_REQUIRES_COMPLETIONS:"Deep Thought requiere que las completaciones estén habilitadas",MEMORI_BOARD_OF_EXPERTS_REQUIRES_COMPLETIONS:"El grupo de expertos requiere que se habiliten las completaciones.",MEMORI_INVALID_COMPLETION_CONFIG:"Gemelo: configuración de finalizaciones no válidas",MEMORI_TRANSFER_MISSING_DESTINATION_USER:"Transferencia: falta usuario de destino",MEMORI_TRANSFER_INVALID_DESTINATION_USER_ID:"Transferencia: ID de usuario de destino no válido",MEMORI_TRANSFER_DESTINATION_USER_DATA_INCONSISTENT:"Transferencia: datos de usuario de destino no válidos",MEMORI_TRANSFER_NOTHING_TO_DO:"Transferencia: nada que hacer",MEMORI_CONFIGURATION_CANT_BE_CHANGED:"Memorias: la configuración no se puede cambiar",MEMORI_MISSING_NEW_PASSWORD:"Recuerdos: falta nueva contraseña",MEMORI_FEATURE_REQUIRES_SUBSCRIPTION:"La función requiere suscripción",INTEGRATION_NOT_FOUND:"Integración no encontrada",MEMORI_SESSIONS_INVALID_DATE_FROM_FORMAT:"Fecha no válida del formato",MEMORI_SESSIONS_INVALID_DATE_TO_FORMAT:"Fecha no válida para formatear",INTEGRATION_INVALID_TYPE:"Tipo de integración no válido",INTEGRATION_ALREADY_EXISTS:"La integración ya existe",INTEGRATION_MEMORI_IS_NOT_PUBLIC:"Las memorias no públicas no se pueden integrar",INTEGRATION_MISSING_INVOCATION_TEXT:"Integración: falta texto de invocación",INTEGRATION_MISSING_DEVICE_EMAILS:"Integración: correo electrónico del dispositivo perdido",INTEGRATION_MEMORI_IS_EMPTY:"Los recuerdos vacíos no se pueden integrar",INTEGRATION_MISSING_PRIVACY_POLICY:"Integración: falta la política de privacidad",INTEGRATION_MISSING_CATEGORY:"Falta categoría de integración",INTEGRATION_MISSING_DESCRIPTION:"Falta descripción de integración",INTEGRATION_INVALID_INVOCATION_TEXT:"Texto de invocación no válido",INTEGRATION_GOOGLE_NO_MORE_AVAILABLE:"Google Home ya no está disponible",UPLOAD_REQUIRES_MULTIPART_ENCODING:"La carga requiere codificación multiparte",UPLOAD_MISSING_CONTENT_TYPE_BOUNDARY:"Subir: falta límite de tipo de contenido",UPLOAD_MAX_LENGTH_EXCEEDED:"Subir: se superó el tamaño máximo",UPLOAD_FILE_IS_EMPTY:"Subir: archivo vacío",UPLOAD_INVALID_FILE_TYPE_OR_SIGNATURE:"Subir: tipo de archivo o firma no válidos",UPLOAD_MISSING_FILE_NAME:"Subir: falta el nombre del archivo",UPLOAD_INVALID_MEMORY_ID:"Subir: ID de contenido no válido",UPLOAD_MISSING_FILE_CONTENT:"Subir: Falta contenido del archivo",ASSET_NOT_FOUND:"Activo no encontrado",ASSET_NOT_ACCESSIBLE:"Activo no accesible",ASSET_MISSING_SESSION_ID:"Activo: ID de sesión faltante",ASSET_INVALID_FILE_NAME:"Activo: nombre de archivo no válido",INVITATION_NOT_FOUND:"Invitación no encontrada",INVITATION_NOT_ACCESSIBLE:"Invitación no accesible",INVITATION_ALREADY_ACCEPTED:"Invitación ya aceptada",INVITATION_ALREADY_REJECTED:"Invitación ya rechazada",INVITATION_MISSING_DESTINATION_EMAIL:"Invitación: falta el correo electrónico de destino",INVITATION_DESTINATION_EMAIL_INVALID:"Invitación: correo electrónico de destino no válido",INVITATION_MISSING_TAG:"Invitación: falta etiqueta",INVITATION_MISSING_PIN:"Invitación: falta el PIN",INVITATION_INVALID_PIN:"Invitación: PIN no válido",INVITATION_INVALID_TYPE:"Invitación: tipo no válido",INVITATION_MISSING_DESTINATION_NAME:"Invitación: falta el nombre del destino",INVITATION_TAG_PIN_CANT_BE_CHANGED:"Invitación: la etiqueta y el pin no se pueden cambiar",INVITATION_CANT_BE_CHANGED:"Intación: no se puede cambiar",ACTIONLOG_INVALID_USER_ID:"ID de usuario no válido",ACTIONLOG_INVALID_DATE_FROM_FORMAT:"Fecha de: formato no válido",ACTIONLOG_INVALID_DATE_TO_FORMAT:"Fecha hasta: formato no válido",ACTIONLOG_INVALID_MEMORI_ID:"ID de memoria no válida",CONSUMPTIONLOG_INVALID_TYPE:"Tipo de registro no válido",CONSUMPTIONLOG_INVALID_DATE_FROM_FORMAT:"Fecha de: formato no válido",CONSUMPTIONLOG_INVALID_DATE_TO_FORMAT:"Fecha hasta: formato no válido",CONSUMPTIONLOG_INVALID_USER_ID:"ID de usuario no válido",CONSUMPTIONLOG_INVALID_MEMORI_ID:"ID de memoria no válida",NOTIFICATIONPREFS_INVALID_CHATLOG_EXTRACTION_PERIOD:"Notificaciones: Período de extracción del registro de chat no válido",PROCESS_INVALID_TYPE:"Tipo de proceso no válido",PROCESS_ALREADY_RUNNING:"Proceso ya en ejecución",PROCESS_NOT_FOUND:"Proceso no encontrado",IMPORTCSV_MISSING_ROWS:"Importación CSV: filas faltantes",IMPORTCSV_MISSING_CSV:"Importación CSV: Falta CSV",IMPORTCSV_MISSING_SEPARATOR:"Importación CSV: falta separador",IMPORTCSV_INVALID_SEPARATOR:"Importación CSV: separador no válido",IMPORTCSV_MISSING_HEADERS:"Importación CSV: faltan encabezados",IMPORTCSV_MISSING_TITLE_VARIANT_SEPARATOR:"Importación CSV: falta el separador de variante de título",IMPORTCSV_INVALID_RECEIVER_ID:"Importación CSV: ID de receptor no válido",IMPORTCSV_INVALID_MEDIA_LINK:"Importación CSV: enlace multimedia no válido",IMPORTCSV_INVALID_LINK_TITLE_HANDLING:"Importación CSV: título del enlace no válido",IMPORTCSV_UNDETECTABLE_CHAR_ENCODING:"Importación CSV: codificación de caracteres indetectable",IMPORTCSV_CANT_IMPORT_TO_SECRET_MEMORI:"Importación CSV: no se puede importar a Secret Memories",IMPORTTXT_MISSING_ROWS:"Importando TXT: filas faltantes",IMPORTTXT_INVALID_GRANULARITY:"Importar TXT: granularidad no válida",IMPORTTXT_INVALID_RECEIVER_ID:"Importar TXT: ID de receptor no válido",IMPORTTXT_INVALID_MEDIA_LINK:"Importar TXT: enlace multimedia no válido",IMPORTTXT_INVALID_LINK_TITLE_HANDLING:"Importar TXT: título del enlace no válido",IMPORTTXT_UNDETECTABLE_CHAR_ENCODING:"Importación TXT: codificación de caracteres indetectable",IMPORTTXT_CANT_IMPORT_TO_SECRET_MEMORI:"Importación TXT: No se puede importar a Secret Memories",IMPORTTXT_IMPORT_LIMIT_EXCEEDED:"Importar TXT: límite de importación excedido",IMPORTTXT_IMPORT_ON_GPT4_REQUIRES_API_KEY:"Importar TXT: la importación en GPT-4 requiere una clave API",IMPORTTXT_IMPORT_REQUIRES_PAYING:"Importar TXT: la importación requiere un plan de pago",IMPORTTXT_BILLING_DENIED_PERMISSION:"Importar TXT: no tienes suficientes créditos para la operación",EXPORTCSV_MISSING_CSV_SPECS:"Exportación CSV: faltan especificaciones CSV",EXPORTCSV_MISSING_SEPARATOR:"Exportación CSV: falta separador",EXPORTCSV_INVALID_SEPARATOR:"Exportación CSV: separador no válido",EXPORTCSV_MISSING_TITLE_VARIANT_SEPARATOR:"Exportación CSV: falta el separador de variante de título",EXPORTCSV_MISSING_NEW_LINE_CHAR:"Exportación CSV: falta un carácter de nueva línea",EXPORTCSV_INVALID_NEW_LINE_CHAR:"Exportación CSV: carácter de nueva línea no válido",EXPORTCSV_MISSING_PASSWORD:"Exportación CSV: falta contraseña",EXPORTJSONL_MISSING_JSONL_SPECS:"Exportación JSONL: faltan especificaciones JSONL",EXPORTJSONL_MISSING_PLATFORM:"Exportación JSONL: plataforma faltante",EXPORTJSONL_INVALID_PLATFORM:"Exportación JSONL: plataforma no válida",EXPORTJSONL_MISSING_PASSWORD:"Exportación JSONL: falta contraseña",EXPORTJSONL_EXPORT_REQUIRES_PAYING:"Exportación JSONL: la exportación requiere un plan pago",ANALYSIS_MISSING_QUERY:"Análisis: consulta faltante",ANALYSIS_CANT_ANALYZE_SECRET_MEMORI:"Análisis: No se pueden analizar recuerdos secretos",ANALYSIS_USER_QUERY_MATCH_REQUIRES_DEEP_THOUGHT:"Análisis: hacer coincidir la consulta del usuario requiere un pensamiento profundo",BADGE_ASSIGNMENT_WRONG_OR_MISSING_CREDENTIALS:"Asignación de insignia: credenciales incorrectas o faltantes",BADGE_ASSIGNMENT_MISSING_REF_ID:"Asignación de insignia: falta el ID de referencia",BADGE_ASSIGNMENT_OUTCOME_NOT_FOUND:"Asignación de insignia: resultado no encontrado",BADGE_ASSIGNMENT_MISSING_ASSERTION_URL:"Asignación de insignia: falta la URL de aserción",BADGE_ASSIGNMENT_MISSING_BADGE_URL:"Asignación de insignia: URL de insignia faltante",BADGE_ASSIGNMENT_MISSING_ISSUER_URL:"Asignación de insignia: falta la URL del emisor",BADGE_ASSIGNMENT_INVALID_URL:"Asignación de insignia: URL no válida",BADGE_ASSIGNMENT_MISSING_RECIPIENT:"Asignación de insignia: destinatario faltante",BADGE_ASSIGNMENT_UNKNOWN_RECIPIENT_TYPE:"Asignación de insignia: tipo de destinatario desconocido",BADGE_ASSIGNMENT_MISSING_RECIPIENT_IDENTITY:"Asignación de insignia: falta la identidad del destinatario",BADGE_ASSIGNMENT_MISSING_RECIPIENT_HASH_TYPE:"Asignación de insignia: falta el tipo de hash del destinatario",BADGE_ASSIGNMENT_UNKNOWN_RECIPIENT_HASH_TYPE:"Asignación de insignia: tipo de hash del destinatario desconocido",BADGE_ASSIGNMENT_WRONG_RECIPIENT_IDENTITY:"Asignación de insignia: identidad del destinatario incorrecta",BADGE_NOT_FOUND:"Insignia no encontrada",OUTCOME_NO_DCM_CONFIGURED:"Resultado: no hay ningún DCM configurado",OUTCOME_USER_BADGES_DISABLED:"Resultado: insignias de usuario deshabilitadas",COMPLETION_CONFIG_MISSING_NAME:"Configuración de terminaciones: falta nombre",COMPLETION_CONFIG_MISSING_PROVIDER:"Configuración de terminaciones: falta proveedor",COMPLETION_CONFIG_MISSING_ENDPOINT:"Configuración de terminaciones: falta punto final",COMPLETION_CONFIG_MISSING_API_KEY:"Configuración de terminaciones: falta clave API",COMPLETION_CONFIG_MISSING_MODEL:"Configuración de terminaciones: modelo faltante",COMPLETION_CONFIG_NO_PURPOSE_SPECIFIED:"Configuración de terminaciones: se debe especificar al menos un tipo de terminaciones",COMPLETION_CONFIG_INVALID_NAME:"Configuración de terminaciones: nombre no válido",COMPLETION_CONFIG_INVALID_PURPOSE:"Configuración de terminaciones: tipo de terminaciones no válidas",COMPLETION_CONFIG_INVALID_ENDPOINT:"Configuración de terminaciones: punto final no válido",COMPLETION_CONFIG_INCONSISTENT_ENDPOINT:"Configuración de terminaciones: punto final inconsistente",COMPLETION_CONFIG_INVALID_PROVIDER:"Configuración de terminaciones: proveedor no válido",COMPLETION_CONFIG_NOT_FOUND:"Configuración de terminaciones: no encontrada",COMPLETION_CONFIG_NOT_ACCESSIBLE:"Configuración de terminaciones: no accesible",COMPLETION_CONFIG_NAME_RESERVED:"Configuración de terminaciones: nombre reservado",COMPLETION_CONFIG_NAME_ALREADY_EXISTS:"Configuración de terminaciones: el nombre ya existe",COMPLETION_CONFIG_VISIBILITY_CHANGE_NOT_ALLOWED:"Configuración de terminaciones: cambio de visibilidad no permitido"},j8e={yes:vLe,no:yLe,confirm:_Le,apply:SLe,cancel:ALe,show:ELe,hide:CLe,send:wLe,close:TLe,edit:xLe,delete:"Borrar",loading:ILe,expand:bLe,collapse:MLe,fullscreenEnter:RLe,fullscreenExit:NLe,center:PLe,bottom:OLe,hidden:DLe,day:LLe,month:kLe,year:BLe,createdAt:FLe,selected:zLe,page:ULe,actions:jLe,next:GLe,previous:HLe,copy:VLe,copyRawCode:$Le,copyToClipboard:WLe,showOriginalText:qLe,showTranslatedText:QLe,exactPosition:JLe,uncertain:KLe,question:YLe,nothingFound:XLe,venue:ZLe,searchVenue:e8e,memoriBlockedTitle:t8e,memoriBlockedUntil:n8e,memoriBlockedAnon:r8e,memoriBlockedReasonExceedChats:i8e,memoriBlockedGiverHelper:s8e,generatedByAI:o8e,whyThisAnswer:a8e,whyThisAnswerHelper:l8e,completionsEnabled:c8e,completionProviderDown:u8e,completionProviderFallbackName:d8e,completionProviderCheckStatusPage:h8e,boardOfExperts:f8e,birthDate:p8e,birthDateHelper:m8e,underage:g8e,underageTwinSession:v8e,errorFetchingSession:y8e,errorGettingReferralURL:_8e,errorReopeningSession:S8e,ageVerification:A8e,ageVerificationText:E8e,nsfw:C8e,deepThought:w8e,deepThoughtHelper:T8e,deepThoughtDisclaimerTitle:x8e,deepThoughtDisclaimer:I8e,deepThoughtPreDisclaimerUnlogged:b8e,deepThoughtPreDisclaimerNotAllowed:M8e,notEnoughCredits:R8e,knownFacts:N8e,auth:P8e,widget:O8e,write_and_speak:D8e,media:L8e,gamification:k8e,login:B8e,success:F8e,Error:"Error","internal server error":"Oupsie, lo siento... Algo salió mal en el servidor.",error:z8e,"error.loading":"Error al cargar contenido.","error.generic":"Oupsie, lo siento... algo salió mal.","error.serverNotResponding":"Estamos realizando mantenimiento o lanzando actualizaciones. ","error.notFound":"Oupsie, no encontramos la página que buscabas.","error.goBackTo":"Puedes intentar volver al","error.reloadPage":"recargar la pagina","error.tryAgain":"Intentar otra vez","error.unauthorized":"No estás autorizado a ver este contenido.","error.unprocessableEntity":"Error al procesar la solicitud. ",errors:U8e},G8e={en:{translation:S6e},it:{translation:JPe},es:{translation:j8e},fr:{translation:$De},de:{translation:gLe}},L_=wNe({resources:G8e,lng:"en",fallbackLng:"it",supportedLngs:["en","it","fr","es","de"],nonExplicitSupportedLngs:!0,interpolation:{escapeValue:!1}});L_.init();const H8e=({children:n})=>w.jsx(oV,{i18n:L_,children:n}),V8e=()=>{const n=navigator.language;if(n){let e=n.split("-")[0];if(["en","it"].includes(e))return{lng:e,fallbackLng:e==="en"?"it":"en"}}return{lng:"en",fallbackLng:"it"}},TX=({ownerUserName:n,ownerUserID:e,memoriName:t,memoriID:r,integrationID:i,tenantID:s,secretToken:o,sessionID:a,layout:l="DEFAULT",customLayout:c,showShare:u=!0,showCopyButton:d=!0,showTranslationOriginal:h=!1,showSettings:f=!0,showInstruct:m=!1,showTypingText:g=!1,showClear:v=!1,showOnlyLastMessages:y=!1,showInputs:A=!0,showDates:C=!1,showContextPerLine:T=!1,showLogin:x,height:R="100%",baseURL:N,apiURL:M="https://backend.memori.ai",engineURL:O="https://engine.memori.ai",tag:P,pin:z,context:V,initialQuestion:$,uiLang:B,spokenLang:q,multilingual:K,authToken:se,AZURE_COGNITIVE_SERVICES_TTS_KEY:W,enableAudio:ee,defaultSpeakerActive:Q=!0,disableTextEnteredEvents:Y=!1,onStateChange:ae,additionalInfo:fe,customMediaRenderer:we,additionalSettings:ge,userAvatar:Se,useMathFormatting:Ke=!1})=>{var xe,Qe,We;const[Ve,te]=D.useState(),[ce,de]=D.useState(),[Pe,Te]=D.useState(W),{t:De}=ur();if(!(r&&e||t&&n))throw new Error("Identifier pair required: please provide either memoriID and ownerUserID or memoriName and ownerUserName");const Ge=qx(M,O),it=D.useCallback(async()=>{const oe=N||(s.startsWith("https://")?s:`https://${s}`),Oe=await(await fetch(`${oe}/api/speechkey`)).json();Oe.AZURE_COGNITIVE_SERVICES_TTS_KEY&&Te(Oe.AZURE_COGNITIVE_SERVICES_TTS_KEY)},[]);D.useEffect(()=>{W||it()},[W]);const ke=D.useCallback(async()=>{if(r&&e){const{memori:oe,...ne}=await Ge.backend.getMemoriByUserAndId(s,e,r);ne.resultCode===0&&oe?te(oe):console.error("[MEMORI]",ne,oe)}else if(t&&n){const{memori:oe,...ne}=await Ge.backend.getMemori(s,n,t);ne.resultCode===0&&oe?te(oe):console.error("[MEMORI]",ne,oe)}},[r,e,t,n,s]);D.useEffect(()=>{ke()},[ke,s]);const ct=D.useCallback(async()=>{const oe=await $4e(s,N);oe&&de(oe)},[s,M]);return D.useEffect(()=>{ct()},[ct]),D.useEffect(()=>{if(B)L_.changeLanguage(B.toLowerCase());else{const{lng:oe,fallbackLng:ne}=V8e();L_.changeLanguage(oe).catch(()=>{L_.changeLanguage(ne)})}},[B]),w.jsx(H8e,{children:w.jsxs(URe,{children:[w.jsx(Dq,{position:"top-center",reverseOrder:!0}),Ve?w.jsx(V4e,{layout:l,customLayout:c,height:R,baseUrl:N||(s.startsWith("https://")?s:`https://${s}`),apiURL:M,engineURL:O,memori:{...Ve,secretToken:o},ownerUserName:n??Ve.ownerUserName,ownerUserID:e??Ve.ownerUserID,tenantID:s,memoriLang:q??((Qe=(xe=Ve.culture)===null||xe===void 0?void 0:xe.split("-"))===null||Qe===void 0?void 0:Qe[0]),multilingual:K,tenant:ce,secret:o,sessionID:a,showShare:u,showCopyButton:d,showTranslationOriginal:h,showSettings:f,showInstruct:m,showTypingText:g,showClear:v,showOnlyLastMessages:y,showInputs:A,showDates:C,showContextPerLine:T,showLogin:x??(Ve==null?void 0:Ve.enableDeepThought),integration:(We=Ve==null?void 0:Ve.integrations)===null||We===void 0?void 0:We.find(oe=>i?oe.integrationID===i:!!oe.publish&&oe.type==="LANDING_EXPERIENCE"),initialContextVars:V,initialQuestion:$,authToken:se,AZURE_COGNITIVE_SERVICES_TTS_KEY:Pe||W,enableAudio:ee,defaultSpeakerActive:Q,disableTextEnteredEvents:Y,onStateChange:ae,additionalInfo:fe,customMediaRenderer:we,additionalSettings:ge,userAvatar:Se,useMathFormatting:Ke,...P&&z?{personification:{tag:P,pin:z}}:{}}):w.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:w.jsxs("p",{style:{textAlign:"center",margin:"2rem auto",textTransform:"capitalize"},children:[De("loading")||"Loading","..."]})})]})})};TX.propTypes={memoriName:_n.string,memoriID:_n.string,ownerUserName:_n.string,ownerUserID:_n.string,integrationID:_n.string,tenantID:_n.string.isRequired,secretToken:_n.string,sessionID:_n.string,layout:_n.oneOf(["DEFAULT","FULLPAGE","TOTEM","WEBSITE_ASSISTANT","CHAT","HIDDEN_CHAT","ZOOMED_FULL_BODY"]),customLayout:_n.any,showShare:_n.bool,showCopyButton:_n.bool,showTranslationOriginal:_n.bool,showInstruct:_n.bool,showInputs:_n.bool,showDates:_n.bool,showContextPerLine:_n.bool,showSettings:_n.bool,showClear:_n.bool,showOnlyLastMessages:_n.bool,showTypingText:_n.bool,showLogin:_n.bool,height:_n.oneOfType([_n.string,_n.number]),baseURL:_n.string,apiURL:_n.string,engineURL:_n.string,tag:_n.string,pin:_n.string,context:_n.objectOf(_n.any),initialQuestion:_n.string,uiLang:_n.oneOf(["en","it","fr","es","de","EN","IT","FR","ES","DE"]),spokenLang:_n.string,multilingual:_n.bool,authToken:_n.string,enableAudio:_n.bool,defaultSpeakerActive:_n.bool,disableTextEnteredEvents:_n.bool,AZURE_COGNITIVE_SERVICES_TTS_KEY:_n.string,onStateChange:_n.func,additionalInfo:_n.objectOf(_n.any),customMediaRenderer:_n.func,additionalSettings:_n.any,userAvatar:_n.oneOfType([_n.string,_n.any]),useMathFormatting:_n.bool};var c5={},dP=function(n,e){return dP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},dP(n,e)};function xX(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");dP(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Mx=function(){return Mx=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Mx.apply(this,arguments)};function IX(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function bX(n,e,t,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s}function MX(n,e){return function(t,r){e(t,r,n)}}function RX(n,e,t,r,i,s){function o(y){if(y!==void 0&&typeof y!="function")throw new TypeError("Function expected");return y}for(var a=r.kind,l=a==="getter"?"get":a==="setter"?"set":"value",c=!e&&n?r.static?n:n.prototype:null,u=e||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),d,h=!1,f=t.length-1;f>=0;f--){var m={};for(var g in r)m[g]=g==="access"?{}:r[g];for(var g in r.access)m.access[g]=r.access[g];m.addInitializer=function(y){if(h)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(y||null))};var v=(0,t[f])(a==="accessor"?{get:u.get,set:u.set}:u[l],m);if(a==="accessor"){if(v===void 0)continue;if(v===null||typeof v!="object")throw new TypeError("Object expected");(d=o(v.get))&&(u.get=d),(d=o(v.set))&&(u.set=d),(d=o(v.init))&&i.unshift(d)}else(d=o(v))&&(a==="field"?i.unshift(d):u[l]=d)}c&&Object.defineProperty(c,r.name,u),h=!0}function NX(n,e,t){for(var r=arguments.length>2,i=0;i<e.length;i++)t=r?e[i].call(n,t):e[i].call(n);return r?t:void 0}function PX(n){return typeof n=="symbol"?n:"".concat(n)}function OX(n,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function DX(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function LX(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})}function kX(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(t=0)),t;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(n,t)}catch(u){c=[6,u],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var cb=Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]};function BX(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&cb(e,n,t)}function Rx(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function u5(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return s}function FX(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(u5(arguments[e]));return n}function zX(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}function UX(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))}function tv(n){return this instanceof tv?(this.v=n,this):new tv(n)}function jX(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(f){return function(m){return Promise.resolve(m).then(f,d)}}function a(f,m){r[f]&&(i[f]=function(g){return new Promise(function(v,y){s.push([f,g,v,y])>1||l(f,g)})},m&&(i[f]=m(i[f])))}function l(f,m){try{c(r[f](m))}catch(g){h(s[0][3],g)}}function c(f){f.value instanceof tv?Promise.resolve(f.value.v).then(u,d):h(s[0][2],f)}function u(f){l("next",f)}function d(f){l("throw",f)}function h(f,m){f(m),s.shift(),s.length&&l(s[0][0],s[0][1])}}function GX(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=n[i]?function(o){return(t=!t)?{value:tv(n[i](o)),done:!1}:s?s(o):o}:s}}function HX(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Rx=="function"?Rx(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,l){o=n[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}}function VX(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}var $8e=Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e},hP=function(n){return hP=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},hP(n)};function $X(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t=hP(n),r=0;r<t.length;r++)t[r]!=="default"&&cb(e,n,t[r]);return $8e(e,n),e}function WX(n){return n&&n.__esModule?n:{default:n}}function qX(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)}function QX(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t}function JX(n,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?e===n:n.has(e)}function KX(n,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,i;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],t&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),n.stack.push({value:e,dispose:r,async:t})}else t&&n.stack.push({async:!0});return e}var W8e=typeof SuppressedError=="function"?SuppressedError:function(n,e,t){var r=new Error(t);return r.name="SuppressedError",r.error=n,r.suppressed=e,r};function YX(n){function e(s){n.error=n.hasError?new W8e(s,n.error,"An error was suppressed during disposal."):s,n.hasError=!0}var t,r=0;function i(){for(;t=n.stack.pop();)try{if(!t.async&&r===1)return r=0,n.stack.push(t),Promise.resolve().then(i);if(t.dispose){var s=t.dispose.call(t.value);if(t.async)return r|=2,Promise.resolve(s).then(i,function(o){return e(o),i()})}else r|=1}catch(o){e(o)}if(r===1)return n.hasError?Promise.reject(n.error):Promise.resolve();if(n.hasError)throw n.error}return i()}function XX(n,e){return typeof n=="string"&&/^\.\.?\//.test(n)?n.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(t,r,i,s,o){return r?e?".jsx":".js":i&&(!s||!o)?t:i+s+"."+o.toLowerCase()+"js"}):n}const q8e={__extends:xX,__assign:Mx,__rest:IX,__decorate:bX,__param:MX,__esDecorate:RX,__runInitializers:NX,__propKey:PX,__setFunctionName:OX,__metadata:DX,__awaiter:LX,__generator:kX,__createBinding:cb,__exportStar:BX,__values:Rx,__read:u5,__spread:FX,__spreadArrays:zX,__spreadArray:UX,__await:tv,__asyncGenerator:jX,__asyncDelegator:GX,__asyncValues:HX,__makeTemplateObject:VX,__importStar:$X,__importDefault:WX,__classPrivateFieldGet:qX,__classPrivateFieldSet:QX,__classPrivateFieldIn:JX,__addDisposableResource:KX,__disposeResources:YX,__rewriteRelativeImportExtension:XX},Q8e=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:KX,get __assign(){return Mx},__asyncDelegator:GX,__asyncGenerator:jX,__asyncValues:HX,__await:tv,__awaiter:LX,__classPrivateFieldGet:qX,__classPrivateFieldIn:JX,__classPrivateFieldSet:QX,__createBinding:cb,__decorate:bX,__disposeResources:YX,__esDecorate:RX,__exportStar:BX,__extends:xX,__generator:kX,__importDefault:WX,__importStar:$X,__makeTemplateObject:VX,__metadata:DX,__param:MX,__propKey:PX,__read:u5,__rest:IX,__rewriteRelativeImportExtension:XX,__runInitializers:NX,__setFunctionName:OX,__spread:FX,__spreadArray:UX,__spreadArrays:zX,__values:Rx,default:q8e},Symbol.toStringTag,{value:"Module"})),ys=$c(Q8e),Zm=$c(Uve);var nw={},rw={},UU;function ZX(){if(UU)return rw;UU=1,Object.defineProperty(rw,"__esModule",{value:!0});const n=ys,e=w,t=n.__importDefault(lo),r=({className:i,title:s,loading:o=!0})=>(0,e.jsx)("svg",{...s?{}:{"aria-hidden":"true"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",focusable:"false",role:"img",className:(0,t.default)(i,{"memori-loading-icon":o}),"aria-label":s,children:(0,e.jsx)("path",{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"})});return rw.default=r,rw}var jU;function ub(){if(jU)return nw;jU=1,Object.defineProperty(nw,"__esModule",{value:!0});const n=ys,e=w,t=n.__importDefault(lo),r=n.__importDefault(ZX()),i=({spinning:s=!1,primary:o=!1,className:a,children:l})=>(0,e.jsxs)("div",{className:(0,t.default)("memori-spin",a,{"memori-spin--spinning":s,"memori-spin--primary":o}),children:[l,(0,e.jsx)("div",{className:"memori-spin--spinner",children:(0,e.jsx)(r.default,{loading:!0})})]});return nw.default=i,nw}var iw={},GU;function eu(){if(GU)return iw;GU=1,Object.defineProperty(iw,"__esModule",{value:!0});const n=ys,e=w,t=n.__importDefault(lo),r=n.__importDefault(ZX()),i=({primary:s=!1,outlined:o=!1,ghost:a=!1,padded:l=!0,shape:c="rounded",danger:u=!1,loading:d=!1,disabled:h=!1,block:f=!1,icon:m,className:g,title:v,id:y,htmlType:A,onClick:C,onMouseDown:T,onMouseUp:x,onMouseLeave:R,onTouchStart:N,onTouchEnd:M,children:O,isActive:P})=>(0,e.jsxs)("button",{id:y,type:A,onClick:C,onMouseDown:T,onMouseUp:x,onMouseLeave:R,onTouchStart:N,onTouchEnd:M,title:v,disabled:d||h,className:(0,t.default)("memori-button",{"memori-button--primary":s,"memori-button--outlined":o,"memori-button--ghost":a,"memori-button--square":c==="square","memori-button--rounded":c==="rounded","memori-button--circle":c==="circle","memori-button--padded":l,"memori-button--block":f,"memori-button--with-icon":(m||d)&&O,"memori-button--icon-only":(m||d)&&!O,"memori-button--danger":u,"memori-button--loading":d,"memori-button--active":P},g),children:[m&&!d&&(0,e.jsx)("span",{className:"memori-button--icon",children:m}),d&&(0,e.jsx)("span",{className:"memori-button--icon loading-icon",children:(0,e.jsx)(r.default,{loading:!0})}),O]});return iw.default=i,iw}var sw={},HU;function eZ(){if(HU)return sw;HU=1,Object.defineProperty(sw,"__esModule",{value:!0});const n=w,e=({className:t,title:r})=>(0,n.jsx)("svg",{...r?{}:{"aria-hidden":"true"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",focusable:"false",role:"img",className:t,"aria-label":r,children:(0,n.jsx)("path",{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 0 0 203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"})});return sw.default=e,sw}Object.defineProperty(c5,"__esModule",{value:!0});const HA=ys,wo=w,_R=HA.__importDefault(D),qp=Zm,J8e=HA.__importDefault(ub()),K8e=HA.__importDefault(eu()),Y8e=HA.__importDefault(eZ()),VU=HA.__importDefault(lo),X8e=({open:n=!1,onClose:e,className:t,title:r,description:i,children:s,footer:o,loading:a=!1,animated:l=!0,side:c="right",closable:u=!0,width:d="100%",widthMd:h="80%",widthLg:f="60%"})=>(0,wo.jsx)(qp.Transition,{appear:!0,show:n,as:_R.default.Fragment,children:(0,wo.jsxs)(qp.Dialog,{open:n,onClose:e,className:(0,VU.default)("memori-drawer",t),children:[(0,wo.jsx)(qp.Transition.Child,{as:_R.default.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,wo.jsx)("div",{className:"memori-drawer--backdrop"})}),(0,wo.jsx)("div",{className:"memori-drawer--container",children:(0,wo.jsx)("div",{className:"memori-drawer--container-scrollable",children:(0,wo.jsx)(qp.Transition.Child,{static:!0,as:_R.default.Fragment,enter:"ease-out duration-300",enterFrom:l?"max-w-0 opacity-0":"opacity-0",enterTo:"max-w-80 opacity-100",leave:"ease-in duration-200",leaveFrom:"max-w-80 opacity-100",leaveTo:l?"max-w-0 opacity-0":"opacity-0",children:(0,wo.jsxs)(qp.Dialog.Panel,{className:(0,VU.default)("memori-drawer--panel",{"memori-drawer--panel-left":c==="left","memori-drawer--with-footer":!!o}),children:[(0,wo.jsx)("style",{dangerouslySetInnerHTML:{__html:`
                    .memori-drawer--panel {
                      --memori-drawer--width: ${d};
                      --memori-drawer--width-lg: ${f};
                      --memori-drawer--width-md: ${h};
                    }
                  `}}),u&&(0,wo.jsx)("div",{className:"memori-drawer--close",children:(0,wo.jsx)(K8e.default,{shape:"circle",outlined:!0,icon:(0,wo.jsx)(Y8e.default,{}),onClick:()=>e(!1)})}),(0,wo.jsxs)(J8e.default,{spinning:a,children:[r&&(0,wo.jsx)(qp.Dialog.Title,{className:"memori-drawer--title",children:r}),i&&(0,wo.jsx)(qp.Dialog.Description,{className:"memori-drawer--description",children:i}),s,o&&(0,wo.jsx)("div",{className:"memori-drawer--footer",children:o})]})]})})})})]})});var Z8e=c5.default=X8e,tZ={},SR={};const $U=$c(nK);var WU;function nZ(){return WU||(WU=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.disposeObject=n.isSkinnedMesh=n.correctMaterials=n.installMathJax=n.installMathJaxScript=n.mathJaxConfig=n.cleanUrl=n.difference=n.stripObjNulls=n.getFieldFromCustomData=n.escapeHTML=n.stripHTML=n.stripOutputTags=n.stripMarkdown=n.stripEmojis=n.stripDuplicates=n.useDebounceFn=n.useDebounce=n.isValidUrl=n.validURLRegEx=n.usernameRegEx=n.mailRegEx=n.pwdRegEx=n.isAndroid=n.isiOS=n.hasTouchscreen=void 0;const e=ys,t=D,r=$U,i=e.__importStar($U),s=()=>{let P=!1;if("maxTouchPoints"in navigator)P=navigator.maxTouchPoints>0;else if("msMaxTouchPoints"in navigator)P=navigator.msMaxTouchPoints>0;else{const V=window&&"matchMedia"in window&&matchMedia("(pointer:coarse)");if(V&&V.media==="(pointer:coarse)")P=!!V.matches;else if("orientation"in window)P=!0;else{var z=navigator==null?void 0:navigator.userAgent;P=/\b(BlackBerry|webOS|iPhone|IEMobile)\b/i.test(z)||/\b(Android|Windows Phone|iPad|iPod)\b/i.test(z)}}return P};n.hasTouchscreen=s;const o=()=>{var P;let z=((P=navigator==null?void 0:navigator.userAgentData)===null||P===void 0?void 0:P.platform)||(navigator==null?void 0:navigator.platform)||"unknown",V=(navigator==null?void 0:navigator.userAgent)||"unknown";return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(z)||V.includes("Mac")&&"ontouchend"in document};n.isiOS=o;const a=()=>{var P;return(((P=navigator==null?void 0:navigator.userAgentData)===null||P===void 0?void 0:P.platform)||(navigator==null?void 0:navigator.platform)||"unknown").toLowerCase()==="android"||navigator.userAgent.includes("Android")};n.isAndroid=a,n.pwdRegEx=/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$_:;|,~+=\{\}\[\]%^&*-]).{8,}$/,n.mailRegEx=/^\w+([.-]?[+]?\w+)*@\w+([.-]?\w+)*(\.\w{2,})+$/,n.usernameRegEx=/^(?!.*\.\.)(?!.*\.$)[^\W][\w.+-]{2,32}$/,n.validURLRegEx=/^(ftp|http|https):\/\/[^ "]+$/;const l=P=>{try{return!!new URL(P)}catch{return!1}};n.isValidUrl=l;function c(P,z){const[V,$]=(0,t.useState)(P);return(0,t.useEffect)(()=>{const B=setTimeout(()=>{$(P)},z);return()=>{clearTimeout(B)}},[P,z]),V}n.useDebounce=c;function u(P,z){const V=(0,t.useRef)(),$=(0,t.useRef)(null);return(0,t.useEffect)(()=>($.current=P,()=>{$.current=null}),[P]),(0,t.useEffect)(()=>()=>{clearTimeout(V.current)},[]),(0,t.useMemo)(()=>(...B)=>{clearTimeout(V.current),V.current=window.setTimeout(()=>{$.current&&$.current(...B)},z)},[z])}n.useDebounceFn=u;const d=P=>P.slice(0,P.length/2).trim().toLowerCase()===P.slice(P.length/2+1).trim().toLowerCase()?P.slice(0,P.length/2):P;n.stripDuplicates=d;const h=P=>P.replaceAll(/[^\p{L}\p{N}\p{P}\p{Z}^$\n]/gu,"").trim();n.stripEmojis=h;const f=P=>(P=P.replaceAll(/```*?```/g,""),P=P.replaceAll(/```[\s\S]*?```/g,""),P=P.replaceAll(/`[^`]*`/g,""),P=P.replaceAll(/!\[[^\]]*\]\([^)]*\)/g,""),P=P.replaceAll(/\[([^\]]*)\]\([^)]*\)/g,"$1"),P=P.replaceAll(/^> /gm,""),P=P.replaceAll(/^#+ /gm,""),P=P.replaceAll(/[*_]/g,""),P=P.replaceAll(/---/g,""),P=P.replaceAll(/~~/g,""),P=P.replaceAll(/^\s*[-*+] /gm,""),P=P.replaceAll(/^\s*\d+\.\s+/gm,""),P=P.replaceAll(/^\|.*\|$/gm,""),P=P.replaceAll(/\$\$[\s\S]*?\$\$/g,""),P=P.replaceAll(/\$[\s\S]*?\$/g,""),P=P.replaceAll(/\\\([\s\S]*?\\\)/g,""),P=P.replaceAll(/\\\[[\s\S]*?\\\]/g,""),P=P.replaceAll(/\s+/g," ").trim(),P);n.stripMarkdown=f;const m=P=>{const z=/<output.*?<\/output>/gs;if(!z.test(P))return P;const V=P.replace(z,"");return(0,n.stripOutputTags)(V)};n.stripOutputTags=m;const g=P=>{const z=document.createElement("div");return z.innerHTML=P,z.textContent||""};n.stripHTML=g;const v=P=>{const z=document.createElement("textarea");return z.textContent=P,z.innerHTML};n.escapeHTML=v;const y=(P,z)=>{try{return z?JSON.parse(z)[P]:""}catch{return""}};n.getFieldFromCustomData=y;const A=P=>{const z={...P};return Object.keys(z).forEach(V=>{z[V]===null&&delete z[V]}),z};n.stripObjNulls=A;const C=(P,z)=>Object.keys(z).reduce((V,$)=>{let B={...V};return P[$]!==z[$]&&(B[$]=z[$]),B},{});n.difference=C;function T(P){try{P=encodeURI(P).replace(/%25/g,"%")}catch{return null}return P}n.cleanUrl=T,n.mathJaxConfig={startup:{elements:[".memori-chat--bubble-content"]},options:{processHtmlClass:"memori-chat--bubble-content"},tex:{inlineMath:[["$","$"],["\\$","\\$"]],displayMath:[["$$","$$"]],processEscapes:!0},asciimath:{fixphi:!0,displaystyle:!0,decimalsign:"."},skipStartupTypeset:!0,chtml:{displayAlign:"left"},svg:{fontCache:"global"}};const x=()=>{const P=document.createElement("script");P.src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js",P.async=!0,P.id="mathjax-script",document.head.appendChild(P)};n.installMathJaxScript=x;const R=()=>{window.MathJax=n.mathJaxConfig,(0,n.installMathJaxScript)()};n.installMathJax=R;function N(P){Object.values(P).forEach(z=>{z instanceof r.MeshStandardMaterial&&(z.roughness=.8,z.metalness=.1,z.shadowSide=2,z.map&&(z.map.anisotropy=16))})}n.correctMaterials=N;function M(P){return P.isSkinnedMesh===!0}n.isSkinnedMesh=M;function O(P){"geometry"in P&&P.geometry instanceof i.BufferGeometry&&P.geometry.dispose(),"material"in P&&Array.isArray(P.material)&&(Array.isArray(P.material)?P.material.forEach(z=>{z instanceof i.Material&&z.dispose()}):P&&P.material instanceof i.Material&&P.material.dispose()),P.children&&P.children.forEach(O)}n.disposeObject=O}(SR)),SR}var i_={},qU;function d5(){if(qU)return i_;qU=1,Object.defineProperty(i_,"__esModule",{value:!0}),i_.getResourceUrl=void 0;const n=({type:e,resourceURI:t,sessionID:r,baseURL:i="",apiURL:s=""})=>{let o=e==="cover"?`${i}/images/memoriCover.png`:`${i}/images/memoriAvatar.png?v=20231208`;try{return!t||t.length===0?o:t.includes("memoriai/memory")&&!t.includes("memori-ai-session-id")&&r?`${t}?memori-ai-session-id=${r}`:(t.startsWith("https://")||t.startsWith("http://"))&&(new URL(t).hostname.includes("memori.ai")||new URL(t).hostname.includes("aclambda.online")||new URL(t).hostname.includes("localhost"))?`${t}${t.endsWith("/")||!r?"":"/"}${r||""}`:t.startsWith("cloud://")?`${(s==null?void 0:s.replace(/v2/,"v1"))||""}/CloudAsset/${t.replace("cloud://","")}`:t.startsWith("guid://")?`${(s==null?void 0:s.replace(/v2/,"v1"))||""}/GuidAsset/${t.replace("guid://","")}`:t||o}catch{return t||o}};return i_.getResourceUrl=n,i_}var ow={},aw={},QU;function eke(){if(QU)return aw;QU=1,Object.defineProperty(aw,"__esModule",{value:!0});const n=w,e=({className:t,title:r})=>(0,n.jsx)("svg",{...r?{}:{"aria-hidden":"true"},focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",className:t,"aria-label":r,children:(0,n.jsx)("path",{d:"M858.5 763.6a374 374 0 0 0-80.6-119.5 375.63 375.63 0 0 0-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 0 0-80.6 119.5A371.7 371.7 0 0 0 136 901.8a8 8 0 0 0 8 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 0 0 8-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"})});return aw.default=e,aw}var lw={},JU;function tke(){if(JU)return lw;JU=1,Object.defineProperty(lw,"__esModule",{value:!0});const n=w,e=({className:t,title:r})=>(0,n.jsx)("svg",{...r?{}:{"aria-hidden":"true"},focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",className:t,"aria-label":r,children:(0,n.jsxs)("g",{fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd",children:[(0,n.jsx)("path",{fillRule:"evenodd",d:"M0 4a4 4 0 014-4h16a4 4 0 014 4v16a4 4 0 01-4 4H4a4 4 0 01-4-4zm4-2.4A2.4 2.4 0 001.6 4v16A2.4 2.4 0 004 22.4h16a2.4 2.4 0 002.4-2.4V4A2.4 2.4 0 0020 1.6z",clipRule:"evenodd"}),(0,n.jsx)("path",{fillRule:"evenodd",d:"M9.715 8.442a.798.798 0 00-1.43 0l-3.2 6.4a.799.799 0 101.431.716l.579-1.158h3.811l.578 1.158a.8.8 0 001.431-.716zm.391 4.358L9 10.589 7.894 12.8z",clipRule:"evenodd"}),(0,n.jsx)("path",{fillRule:"evenodd",d:"M17 8c.552 0 1 .358 1 .8v6.4c0 .442-.448.8-1 .8s-1-.358-1-.8V8.8c0-.442.448-.8 1-.8z",clipRule:"evenodd"})]})});return lw.default=e,lw}var cw={},KU;function nke(){if(KU)return cw;KU=1,Object.defineProperty(cw,"__esModule",{value:!0});const n=w,e=({className:t,title:r})=>(0,n.jsxs)("svg",{...r?{}:{"aria-hidden":"true"},focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",className:t,"aria-label":r,children:[(0,n.jsx)("path",{d:"M140 188h584v164h76V144c0-17.7-14.3-32-32-32H96c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h544v-76H140V188z"}),(0,n.jsx)("path",{d:"M414.3 256h-60.6c-3.4 0-6.4 2.2-7.6 5.4L219 629.4c-.3.8-.4 1.7-.4 2.6 0 4.4 3.6 8 8 8h55.1c3.4 0 6.4-2.2 7.6-5.4L322 540h196.2L422 261.4c-1.3-3.2-4.3-5.4-7.7-5.4zm12.4 228h-85.5L384 360.2 426.7 484zM936 528H800v-93c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v93H592c-13.3 0-24 10.7-24 24v176c0 13.3 10.7 24 24 24h136v152c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V752h136c13.3 0 24-10.7 24-24V552c0-13.3-10.7-24-24-24zM728 680h-88v-80h88v80zm160 0h-88v-80h88v80z"})]});return cw.default=e,cw}var uw={},YU;function h5(){if(YU)return uw;YU=1,Object.defineProperty(uw,"__esModule",{value:!0});const n=ys,e=w,t=n.__importDefault(lo),r=({content:i,className:s,align:o="right",disabled:a=!1,visible:l=!1,children:c})=>(0,e.jsxs)("div",{className:(0,t.default)("memori-tooltip",`memori-tooltip--align-${o}`,s,{"memori-tooltip--disabled":a,"memori-tooltip--visible":l}),children:[(0,e.jsx)("div",{className:"memori-tooltip--content",children:i}),(0,e.jsx)("div",{className:"memori-tooltip--trigger",children:c})]});return uw.default=r,uw}var dw={},hw={},XU;function rke(){if(XU)return hw;XU=1,Object.defineProperty(hw,"__esModule",{value:!0});const n=w,e=({className:t,title:r})=>(0,n.jsxs)("svg",{...r?{}:{"aria-hidden":"true"},focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:t,"aria-label":r,children:[(0,n.jsx)("path",{fill:"none",d:"M0 0h24v24H0V0z"}),(0,n.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H5.17l-.59.59-.58.58V4h16v12zm-9-4h2v2h-2zm0-6h2v4h-2z"})]});return hw.default=e,hw}var ZU;function ike(){if(ZU)return dw;ZU=1,Object.defineProperty(dw,"__esModule",{value:!0});const n=ys,e=w,t=n.__importStar(D),r=Zm,i=n.__importDefault(h5()),s=n.__importDefault(eu()),o=n.__importDefault(rke()),a={"it-IT":"Non è quello che ti ho chiesto","fr-FR":"Ce n'est pas ce que je t'ai demandé","en-GB":"It's not what I asked"},l={"it-IT":"La risposta non era corretta","fr-FR":"La réponse n'était pas correcte","en-GB":"The answer was not correct"},c={"it-IT":"Non mi è piaciuta la risposta","fr-FR":"Je n'ai pas aimé la réponse","en-GB":"I didn't like the answer"},u=({memori:d,className:h,onNegativeClick:f,toggle:m=!1,dropdown:g=!1})=>{const[v,y]=(0,t.useState)(),A=d.culture==="it-IT"?"it-IT":d.culture==="fr-FR"?"fr-FR":"en-GB",C=a[A],T=l[A],x=c[A];return(0,e.jsx)("div",{className:`memori-chat--feedback${h?` ${h}`:""}`,children:g?(0,e.jsxs)(r.Menu,{as:"div",className:"memori-chat--feedback-menu",children:[(0,e.jsx)(r.Menu.Button,{as:t.default.Fragment,children:(0,e.jsx)(s.default,{ghost:!0,shape:"circle",title:"Feedback",className:"memori-chat--feedback-menu-button",disabled:!!v,icon:(0,e.jsx)(o.default,{className:v?"memori-chat--feedback-clicked":void 0})})}),(0,e.jsx)(r.Transition,{as:t.default.Fragment,enter:"transition ease-out duration-200",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,e.jsx)(r.Menu.Items,{className:"memori-chat--feedback-menu-items",children:(0,e.jsxs)("div",{className:"memori-chat--feedback-menu-items-container",children:[(0,e.jsx)(r.Menu.Item,{children:({active:R})=>(0,e.jsx)("button",{className:`memori-chat--feedback-menu-item${R?" memori-chat--feedback-menu-item-active":""}`,onClick:()=>{y(v==="up"&&m?void 0:"up")},children:x})},"ok"),(0,e.jsx)(r.Menu.Item,{children:({active:R})=>(0,e.jsx)("button",{className:`memori-chat--feedback-menu-item${R?" memori-chat--feedback-menu-item-active":""}`,onClick:()=>{y(v==="down"&&m?void 0:"down"),f(C)},children:T})},"no")]})})})]}):(0,e.jsx)(i.default,{align:"left",content:"Feedback",children:(0,e.jsx)(s.default,{title:"Feedback",onClick:()=>{y(v==="down"&&m?void 0:"down"),f(C)},ghost:!0,shape:"circle",icon:(0,e.jsx)(o.default,{className:v?"memori-chat--feedback-clicked":void 0})})})})};return dw.default=u,dw}const ph=$c(Kne),ske=$c(bxe),oke=$c(Qxe);var fw={},ej;function ake(){if(ej)return fw;ej=1,Object.defineProperty(fw,"__esModule",{value:!0});const n=w,e=({className:t,title:r})=>(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",...r?{}:{"aria-hidden":"true"},focusable:"false",role:"img",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",viewBox:"0 0 24 24",className:t,"aria-label":r,children:[(0,n.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,n.jsx)("path",{d:"M9.09 9a3 3 0 015.83 1c0 2-3 3-3 3"}),(0,n.jsx)("path",{d:"M12 17L12.01 17"})]});return fw.default=e,fw}var pw={},tj;function rZ(){if(tj)return pw;tj=1,Object.defineProperty(pw,"__esModule",{value:!0});const n=w,e=({className:t,title:r})=>(0,n.jsxs)("svg",{...r?{}:{"aria-hidden":"true"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",focusable:"false",role:"img",className:t,"aria-label":r,children:[(0,n.jsx)("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),(0,n.jsx)("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]});return pw.default=e,pw}var mw={},nj;function lke(){if(nj)return mw;nj=1,Object.defineProperty(mw,"__esModule",{value:!0});const n=w,e=({className:t,title:r})=>(0,n.jsxs)("svg",{...r?{}:{"aria-hidden":"true"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",focusable:"false",role:"img",className:t,"aria-label":r,children:[(0,n.jsx)("path",{d:"M10 9.5 8 12l2 2.5"}),(0,n.jsx)("path",{d:"m14 9.5 2 2.5-2 2.5"}),(0,n.jsx)("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"})]});return mw.default=e,mw}var gw={};const cke=$c(hne);var vw={},rj;function uke(){if(rj)return vw;rj=1,Object.defineProperty(vw,"__esModule",{value:!0});const n=ys,e=w,t=D,r=n.__importDefault(eu()),i=n.__importDefault(lo),s=ph,o=({rows:a,className:l,innerClassName:c,btnClassName:u,lineHeightMultiplier:d=1.2,defaultExpanded:h=!1,expandSymbol:f=()=>"...",collapseSymbol:m=v=>v==="it"?"Mostra meno":"Show less",children:g})=>{const{i18n:v}=(0,s.useTranslation)(),y=v.language,A=m(y),C=f(y),[T,x]=(0,t.useState)(h),[R,N]=(0,t.useState)(!1),[M,O]=(0,t.useState)(16),P=(0,t.useRef)(null);return(0,t.useEffect)(()=>{if(P.current){let z=P.current.getBoundingClientRect().height,V=getComputedStyle(P.current),$=V.lineHeight,B=$==="normal"||!($!=null&&$.length)?d*parseInt(V.fontSize,10):parseInt($,10);console.table({rows:a,lineHeight:B,height:z,maxHeight:a*B,needsExpanding:z>a*B}),O(B),z&&z>a*B&&N(!0)}},[a,P.current]),(0,e.jsxs)("div",{className:(0,i.default)("memori-expandable",l),children:[(0,e.jsx)("div",{ref:P,className:(0,i.default)("memori-expandable--inner",c),style:{maxHeight:T||!R?"9999px":`${M*a}px`},children:g}),R&&!T&&(0,e.jsx)(r.default,{ghost:!0,padded:!1,className:u,onClick:()=>x(!0),children:C}),R&&T&&(0,e.jsx)(r.default,{ghost:!0,padded:!1,className:u,onClick:()=>x(!1),children:A})]})};return vw.default=o,vw}const dke=$c(Lme);var AR={},ij;function hke(){return ij||(ij=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.getErrori18nKey=n.BACKEND_ERRORS=void 0;const e={TENANT_NOT_FOUND:-1,TENANT_REGISTRATION_DISABLED:-2,TENANT_MISSING_NAME:-3,TENANT_MAX_USERS_REACHED:-4,TENANT_MAX_ADMINS_REACHED:-5,TENANT_ALREADY_EXISTS:-6,TENANT_MISSING_DESCRIPTION:-7,TENANT_CANT_SET_COMPLETION_PROVIDER:-8,USER_NOT_CONFIRMED:-11,USER_NOT_FOUND:-12,USER_OR_PASSWORD_INVALID:-13,USER_MUST_CHANGE_PASSWORD:-14,USER_MUST_ENTER_VERIFICATION_CODE:-15,USER_MISSING_TENANT:-21,USER_MISSING_NAME:-22,USER_MISSING_PASSWORD:-23,USER_MISSING_EMAIL:-24,USER_MISSING_VERIFICATION_CODE:-25,USER_NAME_ALREADY_USED:-26,USER_PASSWORD_NOT_CONFORMING_TO_POLICY:-27,USER_EMAIL_ALREADY_USED:-28,USER_EMAIL_INVALID:-29,USER_VERIFICATION_CODE_INVALID:-30,USER_MISSING_NAME_OR_EMAIL:-31,USER_NAME_INVALID:-32,USER_HAS_ONE_OR_MORE_MEMORI:-33,USER_MISSING_NEW_PASSWORD:-34,USER_CANT_CREATE_MEMORI:-35,USER_MAX_MEMORI_REACHED:-36,USER_TOO_MANY_ATTEMPTS:-38,USER_MUST_ACCEPT_TNC_AND_PP:-39,USER_BIRTH_DATE_CANT_BE_CHANGED:-40,USER_CANT_SET_COMPLETION_PROVIDER:-41,USER_CANT_ENABLE_DEEP_THOUGHT:-42,USER_CANT_ENABLE_DCM_INTEGRATION:-43,USER_CANT_ENABLE_CHAINING_OR_BOARD_OF_EXPERTS:-44,USER_CREATION_BILLING_DENIED_PERMISSION:-46,USER_HAS_ONE_OR_MORE_COMPLETION_CONFIGS:-47,USER_CANT_BE_DELETED:-48,MEMORI_NOT_FOUND:-51,MEMORI_NOT_ACCESSIBLE:-52,MEMORI_ONLY_OWNER_CAN_CHANGE_GIVER_TAG_AND_PIN:-53,SESSION_NOT_FOUND:-101,SESSION_IS_NOT_ADMINISTRATIVE:-102,SESSION_EXPIRED:-103,MEMORI_MISSING_CONFIGURATION:-201,MEMORI_CONFIGURATION_NOT_FOUND:-202,MEMORI_INVALID_PRIVACY_TYPE:-203,MEMORI_MISSING_PASSWORD:-204,MEMORI_INVALID_TOTAL_NUMBER_OF_RECOVERY_TOKENS:-205,MEMORI_INVALID_MINIMUM_NUMBER_OF_RECOVERY_TOKENS:-206,MEMORI_INVALID_VOICE_TYPE:-207,MEMORI_MISSING_NAME:-208,MEMORI_MISSING_PASSWORD_OR_RECOVERY_TOKENS:-209,MEMORI_INVALID_ID:-210,MEMORI_NAME_ALREADY_USED:-211,MEMORI_INVALID_PIN:-212,MEMORI_GIVER_TAG_PIN_CHANGE_REQUIRES_SEPARATE_OPERATION:-213,MEMORI_NO_PASSWORD_WHEN_PUBLIC:-214,MEMORI_DEEP_THOUGHT_REQUIRES_COMPLETIONS:-215,MEMORI_BOARD_OF_EXPERTS_REQUIRES_COMPLETIONS:-216,MEMORI_INVALID_COMPLETION_CONFIG:-217,MEMORI_TRANSFER_MISSING_DESTINATION_USER:-231,MEMORI_TRANSFER_INVALID_DESTINATION_USER_ID:-232,MEMORI_TRANSFER_DESTINATION_USER_DATA_INCONSISTENT:-233,MEMORI_TRANSFER_NOTHING_TO_DO:-234,MEMORI_CONFIGURATION_CANT_BE_CHANGED:-251,MEMORI_MISSING_NEW_PASSWORD:-252,MEMORI_SESSIONS_INVALID_DATE_FROM_FORMAT:-261,MEMORI_SESSIONS_INVALID_DATE_TO_FORMAT:-262,MEMORI_FEATURE_REQUIRES_SUBSCRIPTION:-271,INTEGRATION_NOT_FOUND:-301,INTEGRATION_INVALID_TYPE:-401,INTEGRATION_ALREADY_EXISTS:-402,INTEGRATION_MEMORI_IS_NOT_PUBLIC:-403,INTEGRATION_MISSING_INVOCATION_TEXT:-404,INTEGRATION_MISSING_DEVICE_EMAILS:-405,INTEGRATION_MEMORI_IS_EMPTY:-406,INTEGRATION_MISSING_PRIVACY_POLICY:-407,INTEGRATION_MISSING_CATEGORY:-408,INTEGRATION_MISSING_DESCRIPTION:-409,INTEGRATION_INVALID_INVOCATION_TEXT:-410,INTEGRATION_GOOGLE_NO_MORE_AVAILABLE:-411,UPLOAD_REQUIRES_MULTIPART_ENCODING:-501,UPLOAD_MISSING_CONTENT_TYPE_BOUNDARY:-502,UPLOAD_MAX_LENGTH_EXCEEDED:-503,UPLOAD_FILE_IS_EMPTY:-504,UPLOAD_INVALID_FILE_TYPE_OR_SIGNATURE:-505,UPLOAD_MISSING_FILE_NAME:-506,UPLOAD_INVALID_MEMORY_ID:-507,UPLOAD_MISSING_FILE_CONTENT:-508,ASSET_NOT_FOUND:-601,ASSET_NOT_ACCESSIBLE:-602,ASSET_MISSING_SESSION_ID:-603,ASSET_INVALID_FILE_NAME:-604,INVITATION_NOT_FOUND:-701,INVITATION_NOT_ACCESSIBLE:-702,INVITATION_ALREADY_ACCEPTED:-703,INVITATION_ALREADY_REJECTED:-704,INVITATION_MISSING_DESTINATION_EMAIL:-705,INVITATION_DESTINATION_EMAIL_INVALID:-706,INVITATION_MISSING_TAG:-707,INVITATION_MISSING_PIN:-708,INVITATION_INVALID_PIN:-709,INVITATION_INVALID_TYPE:-710,INVITATION_MISSING_DESTINATION_NAME:-711,INVITATION_TAG_PIN_CANT_BE_CHANGED:-712,INVITATION_CANT_BE_CHANGED:-713,ACTIONLOG_INVALID_USER_ID:-801,ACTIONLOG_INVALID_DATE_FROM_FORMAT:-802,ACTIONLOG_INVALID_DATE_TO_FORMAT:-803,ACTIONLOG_INVALID_MEMORI_ID:-804,CONSUMPTIONLOG_INVALID_TYPE:-901,CONSUMPTIONLOG_INVALID_DATE_FROM_FORMAT:-902,CONSUMPTIONLOG_INVALID_DATE_TO_FORMAT:-903,CONSUMPTIONLOG_INVALID_USER_ID:-904,CONSUMPTIONLOG_INVALID_MEMORI_ID:-905,NOTIFICATIONPREFS_INVALID_CHATLOG_EXTRACTION_PERIOD:-1001,PROCESS_INVALID_TYPE:-1401,PROCESS_ALREADY_RUNNING:-1401,PROCESS_NOT_FOUND:-1402,IMPORTCSV_MISSING_ROWS:-1501,IMPORTCSV_MISSING_CSV:-1502,IMPORTCSV_MISSING_SEPARATOR:-1503,IMPORTCSV_INVALID_SEPARATOR:-1504,IMPORTCSV_MISSING_HEADERS:-1505,IMPORTCSV_MISSING_TITLE_VARIANT_SEPARATOR:-1506,IMPORTCSV_INVALID_RECEIVER_ID:-1507,IMPORTCSV_INVALID_MEDIA_LINK:-1508,IMPORTCSV_INVALID_LINK_TITLE_HANDLING:-1509,IMPORTCSV_UNDETECTABLE_CHAR_ENCODING:-1521,IMPORTCSV_CANT_IMPORT_TO_SECRET_MEMORI:-1531,IMPORTTXT_MISSING_ROWS:-1601,IMPORTTXT_INVALID_GRANULARITY:-1602,IMPORTTXT_INVALID_RECEIVER_ID:-1603,IMPORTTXT_INVALID_MEDIA_LINK:-1604,IMPORTTXT_INVALID_LINK_TITLE_HANDLING:-1605,IMPORTTXT_UNDETECTABLE_CHAR_ENCODING:-1621,IMPORTTXT_CANT_IMPORT_TO_SECRET_MEMORI:-1631,IMPORTTXT_IMPORT_LIMIT_EXCEEDED:-1632,IMPORTTXT_IMPORT_ON_GPT4_REQUIRES_API_KEY:-1633,IMPORTTXT_IMPORT_REQUIRES_PAYING:-1634,IMPORTTXT_BILLING_DENIED_PERMISSION:-1635,EXPORTCSV_MISSING_CSV_SPECS:-1801,EXPORTCSV_MISSING_SEPARATOR:-1802,EXPORTCSV_INVALID_SEPARATOR:-1803,EXPORTCSV_MISSING_TITLE_VARIANT_SEPARATOR:-1804,EXPORTCSV_MISSING_NEW_LINE_CHAR:-1805,EXPORTCSV_INVALID_NEW_LINE_CHAR:-1806,EXPORTCSV_MISSING_PASSWORD:-1811,EXPORTJSONL_MISSING_JSONL_SPECS:-1821,EXPORTJSONL_MISSING_PLATFORM:-1822,EXPORTJSONL_INVALID_PLATFORM:-1823,EXPORTJSONL_MISSING_PASSWORD:-1831,EXPORTJSONL_EXPORT_REQUIRES_PAYING:-1832,ANALYSIS_MISSING_QUERY:-1901,ANALYSIS_CANT_ANALYZE_SECRET_MEMORI:-1902,ANALYSIS_USER_QUERY_MATCH_REQUIRES_DEEP_THOUGHT:-1903,BADGE_ASSIGNMENT_WRONG_OR_MISSING_CREDENTIALS:-2001,BADGE_ASSIGNMENT_MISSING_REF_ID:-2002,BADGE_ASSIGNMENT_OUTCOME_NOT_FOUND:-2003,BADGE_ASSIGNMENT_MISSING_ASSERTION_URL:-2004,BADGE_ASSIGNMENT_MISSING_BADGE_URL:-2005,BADGE_ASSIGNMENT_MISSING_ISSUER_URL:-2006,BADGE_ASSIGNMENT_INVALID_URL:-2007,BADGE_ASSIGNMENT_MISSING_RECIPIENT:-2021,BADGE_ASSIGNMENT_UNKNOWN_RECIPIENT_TYPE:-2022,BADGE_ASSIGNMENT_MISSING_RECIPIENT_IDENTITY:-2023,BADGE_ASSIGNMENT_MISSING_RECIPIENT_HASH_TYPE:-2024,BADGE_ASSIGNMENT_UNKNOWN_RECIPIENT_HASH_TYPE:-2025,BADGE_ASSIGNMENT_WRONG_RECIPIENT_IDENTITY:-2026,BADGE_NOT_FOUND:-2051,OUTCOME_NO_DCM_CONFIGURED:-2071,OUTCOME_USER_BADGES_DISABLED:-2072,COMPLETION_CONFIG_MISSING_NAME:-2401,COMPLETION_CONFIG_MISSING_PROVIDER:-2402,COMPLETION_CONFIG_MISSING_ENDPOINT:-2403,COMPLETION_CONFIG_MISSING_API_KEY:-2404,COMPLETION_CONFIG_MISSING_MODEL:-2405,COMPLETION_CONFIG_NO_PURPOSE_SPECIFIED:-2406,COMPLETION_CONFIG_INVALID_NAME:-2407,COMPLETION_CONFIG_INVALID_PURPOSE:-2411,COMPLETION_CONFIG_INVALID_ENDPOINT:-2412,COMPLETION_CONFIG_INCONSISTENT_ENDPOINT:-2413,COMPLETION_CONFIG_INVALID_PROVIDER:-2414,COMPLETION_CONFIG_NOT_FOUND:-2421,COMPLETION_CONFIG_NOT_ACCESSIBLE:-2422,COMPLETION_CONFIG_NAME_RESERVED:-2441,COMPLETION_CONFIG_NAME_ALREADY_EXISTS:-2442,COMPLETION_CONFIG_VISIBILITY_CHANGE_NOT_ALLOWED:-2443};n.BACKEND_ERRORS=new Map(Object.entries(e).map(([r,i])=>[i,r]));const t=r=>{if(!r)return"error.generic";if(r===401||r===403)return"error.unauthorized";if(r===404)return"error.notFound";if(r===422)return"error.unprocessableEntity";if(r===500)return"internal server error";let i=n.BACKEND_ERRORS.get(r);return i?`errors.${i}`:"error.generic"};n.getErrori18nKey=t}(AR)),AR}var yw={},Ko={},sj;function f5(){return sj||(sj=1,Object.defineProperty(Ko,"__esModule",{value:!0}),Ko.boardOfExpertsLoadingSentences=Ko.prismSyntaxLangs=Ko.anonTag=Ko.allowedMediaTypes=Ko.uiLanguages=Ko.chatLanguages=void 0,Ko.chatLanguages=[{value:"IT",label:"Italiano"},{value:"EN",label:"English"},{value:"DE",label:"Deutsch"},{value:"ES",label:"Español"},{value:"FR",label:"Français"},{value:"PT",label:"Português"},{value:"UK",label:"Українська"},{value:"RU",label:"Русский"},{value:"PL",label:"Polski"},{value:"FI",label:"Suomi"},{value:"EL",label:"Ελληνικά"},{value:"AR",label:"العربية"},{value:"ZH",label:"中文"},{value:"JA",label:"日本語"}],Ko.uiLanguages=["en","it","fr","es","de"],Ko.allowedMediaTypes=["image/jpeg","image/png","image/jpg","image/gif","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/pdf","video/mp4","video/avi","audio/mpeg3","audio/wav","audio/mpeg","video/mpeg","model/gltf-binary"],Ko.anonTag="👤",Ko.prismSyntaxLangs=[{name:"text",lang:"text",mimeType:"text/plain",monacoLang:"plaintext",executable:!0},{name:"javascript/jsx",lang:"jsx",mimeType:"text/javascript",monacoLang:"javascript",executable:!0},{name:"typescript/tsx",lang:"tsx",mimeType:"text/ecmascript",monacoLang:"typescript",executable:!0},{name:"json",lang:"json",mimeType:"application/json",monacoLang:"json",executable:!0},{name:"css",lang:"scss",mimeType:"text/css",monacoLang:"css",executable:!0},{name:"html/xml",lang:"tsx",mimeType:"application/xml",monacoLang:"xml"},{name:"bash",lang:"bash",mimeType:"application/x-sh",monacoLang:"shell"},{name:"python",lang:"python",mimeType:"text/x-python",monacoLang:"python"},{name:"cpp/csharp",lang:"cpp",mimeType:"text/x-c++src",monacoLang:"cpp"},{name:"php",lang:"php",mimeType:"application/x-php",monacoLang:"php"},{name:"ruby",lang:"ruby",mimeType:"text/x-ruby",monacoLang:"ruby"},{name:"sql",lang:"sql",mimeType:"text/x-sql",monacoLang:"sql"}],Ko.boardOfExpertsLoadingSentences={it:[{text:"",delayAfter:10},{text:"Cerco l'esperto più adatto",delayAfter:5},{text:"Contatto l'esperto",delayAfter:3},{text:"Spiego all'esperto la domanda",delayAfter:2},{text:"L'esperto sta preparando una risposta",delayAfter:6},{text:"Genero una risposta adatta",delayAfter:3}],en:[{text:"",delayAfter:10},{text:"I'm looking for the most suitable expert",delayAfter:5},{text:"I'm contacting the expert",delayAfter:3},{text:"I'm explaining the question to the expert",delayAfter:2},{text:"The expert is preparing an answer",delayAfter:6},{text:"I am generating a suitable answer",delayAfter:3}]}),Ko}var oj;function iZ(){if(oj)return yw;oj=1,Object.defineProperty(yw,"__esModule",{value:!0});const n=ys,e=w,t=D,r=n.__importDefault(eu()),i=n.__importDefault(rZ()),s=f5(),o=ph,a=n.__importDefault(lo),l=()=>{if(document.getElementById("memori-prism-script"))return;const d=document.createElement("script");d.src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js",d.async=!0,d.id="memori-prism-script";const h=document.createElement("script");h.src="https://cdn.jsdelivr.net/npm/prismjs@v1.29.0/plugins/autoloader/prism-autoloader.min.js",h.async=!0,h.id="memori-prism-autoloader-script";const f=document.createElement("link");f.rel="stylesheet",f.href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.min.css",document.head.appendChild(f),document.head.appendChild(d),document.head.appendChild(h)},c=({medium:u,className:d,preview:h=!1,showCopyButton:f=!0})=>{var m,g,v,y,A;const{t:C}=(0,o.useTranslation)();return(0,t.useEffect)(()=>{l()},[]),(0,t.useEffect)(()=>{"Prism"in window&&window.Prism.highlightAll&&Prism.highlightAll()},[u.content]),(0,e.jsxs)("div",{className:"memori-snippet",children:[(0,e.jsxs)("div",{className:"memori-snippet--content",children:[(0,e.jsx)("pre",{className:(0,a.default)("line-numbers",d),"aria-labelledby":!((m=u.title)===null||m===void 0)&&m.length?`#snippet-${u.mediumID}`:void 0,children:(0,e.jsx)("code",{className:`language-${(v=(g=s.prismSyntaxLangs.find(T=>u.mimeType===T.mimeType))===null||g===void 0?void 0:g.lang)!==null&&v!==void 0?v:"text"}`,children:!((y=u.content)===null||y===void 0)&&y.length&&u.content.length>200&&h?`${u.content.slice(0,200)}
...`:`${u.content}`})}),f&&(0,e.jsx)(r.default,{padded:!1,ghost:!0,className:"memori-snippet--copy-button",title:C("copy")||"Copy",icon:(0,e.jsx)(i.default,{}),onClick:()=>{var T;return navigator.clipboard.writeText((T=u.content)!==null&&T!==void 0?T:"")}})]}),!!(!((A=u.title)===null||A===void 0)&&A.length)&&(0,e.jsx)("p",{id:`snippet-${u.mediumID}`,className:"memori-snippet--caption",children:u.title})]})};return yw.default=c,yw}var _w={},ER={},Sw={},aj;function fke(){if(aj)return Sw;aj=1,Object.defineProperty(Sw,"__esModule",{value:!0});const n=w,e=({className:t,title:r})=>(0,n.jsx)("svg",{...r?{}:{"aria-hidden":"true"},focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",className:t,"aria-label":r,children:(0,n.jsx)("path",{d:"M574 665.4a8.03 8.03 0 0 0-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8a8.03 8.03 0 0 0-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zm258.6-474c-84.6-84.6-221.5-84.6-306 0L410.3 307.6a8.03 8.03 0 0 0 0 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6a8.03 8.03 0 0 0 0 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3a8.03 8.03 0 0 0-11.3 0L372.3 598.7a8.03 8.03 0 0 0 0 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z"})});return Sw.default=e,Sw}var Aw={},lj;function sZ(){if(lj)return Aw;lj=1,Object.defineProperty(Aw,"__esModule",{value:!0});const n=ys,e=w,t=n.__importDefault(lo),r=n.__importDefault(ub()),i=({loading:s=!1,className:o,title:a,description:l,cover:c,hoverable:u=!1,children:d})=>(0,e.jsx)("div",{className:(0,t.default)("memori-card",o,{"memori-card--loading":s,"memori-card--with-cover":c,"memori-card--hoverable":u}),children:(0,e.jsxs)(r.default,{spinning:s,children:[c&&(0,e.jsx)("div",{className:"memori-card--cover",children:c}),(0,e.jsxs)("div",{className:"memori-card--content",children:[a&&(0,e.jsx)("h3",{className:"memori-card--title",children:a}),l&&(0,e.jsx)("p",{className:"memori-card--description",children:l}),(0,e.jsx)("div",{className:"memori-card--children",children:d})]})]})});return Aw.default=i,Aw}var cj;function pke(){return cj||(cj=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.RenderLinkItem=void 0;const e=ys,t=w,r=D,i=e.__importDefault(fke()),s=e.__importDefault(lo),o=kK(),a=e.__importDefault(sZ()),l=Zm,c=async(h,f)=>{try{return await(await fetch(`${f||"https://aisuru.com"}/api/linkpreview/${encodeURIComponent(h)}`)).json()}catch(m){return console.error("getSiteInfo",m),null}},u=({isChild:h=!1,item:f,baseUrl:m,onLinkPreviewInfo:g,descriptionOneLine:v=!1})=>{var y,A,C,T;const[x,R]=(0,r.useState)(null),N=!((y=f.url)===null||y===void 0)&&y.startsWith("http")||!f.url||((A=f.url)===null||A===void 0?void 0:A.length)===0?f.url:`https://${f.url}`;(0,r.useEffect)(()=>{var V,$;let B=!((V=f.url)===null||V===void 0)&&V.startsWith("http")||!f.url||(($=f.url)===null||$===void 0?void 0:$.length)===0?f.url:`https://${f.url}`;B&&B!==(x==null?void 0:x.urlKey)&&c(B,m).then(q=>{R(q?{...q,urlKey:B}:null),g&&q&&g(q)})},[f==null?void 0:f.url,m,g]);const M=f.title&&f.title.length>0?f.title:x==null?void 0:x.title,O=x==null?void 0:x.description,P=x==null?void 0:x.video,z=(C=x==null?void 0:x.image)!==null&&C!==void 0?C:(T=x==null?void 0:x.images)===null||T===void 0?void 0:T[0];return(0,r.useEffect)(()=>{setTimeout(()=>{(0,o.ellipsis)(".memori-link-item--card .memori-card--description",3,{responsive:!0})},300)},[O,f.mediumID]),(0,t.jsx)("a",{href:N,target:"_blank",rel:"noopener noreferrer",className:(0,s.default)("memori-link-item--link",{"memori-link-item--link--child":h}),onClick:V=>{h||(V.preventDefault(),V.stopPropagation(),window.open(N,"_blank",`toolbar=yes,top=${window.innerHeight*.1},left=${window.innerWidth*.1},width=${window.innerWidth*.8},height=${window.innerHeight*.8}`))},children:(0,t.jsx)(a.default,{hoverable:!0,className:(0,s.default)("memori-link-item--card",{"memori-link-item--card-description-oneline":v,"memori-link-item--card-has-image":z,"memori-link-item--card-has-video":P}),cover:P?(0,t.jsx)("iframe",{width:"100%",height:"100%",src:P,title:"Video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}):z?(0,t.jsx)("img",{className:"memori-link-item--card-cover-img",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8LAwSDCIMogwMCcmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsis7PPOq3QdDFcvjV3jOD1boQVTPQrgSkktTgbSf4A4LbmgqISBgTEFyFYuLykAsTuAbJEioKOA7DkgdjqEvQHEToKwj4DVhAQ5A9k3gGyB5IxEoBmML4BsnSQk8XQkNtReEOBxcfXxUQg1Mjc0dyHgXNJBSWpFCYh2zi+oLMpMzyhRcASGUqqCZ16yno6CkYGRAQMDKMwhqj/fAIcloxgHQqxAjIHBEugw5sUIsSQpBobtQPdLciLEVJYzMPBHMDBsayhILEqEO4DxG0txmrERhM29nYGBddr//5/DGRjYNRkY/l7////39v///y4Dmn+LgeHANwDrkl1AuO+pmgAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAwqADAAQAAAABAAAAwwAAAAD9b/HnAAAHlklEQVR4Ae3dP3PTWBSGcbGzM6GCKqlIBRV0dHRJFarQ0eUT8LH4BnRU0NHR0UEFVdIlFRV7TzRksomPY8uykTk/zewQfKw/9znv4yvJynLv4uLiV2dBoDiBf4qP3/ARuCRABEFAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghgg0Aj8i0JO4OzsrPv69Wv+hi2qPHr0qNvf39+iI97soRIh4f3z58/u7du3SXX7Xt7Z2enevHmzfQe+oSN2apSAPj09TSrb+XKI/f379+08+A0cNRE2ANkupk+ACNPvkSPcAAEibACyXUyfABGm3yNHuAECRNgAZLuYPgEirKlHu7u7XdyytGwHAd8jjNyng4OD7vnz51dbPT8/7z58+NB9+/bt6jU/TI+AGWHEnrx48eJ/EsSmHzx40L18+fLyzxF3ZVMjEyDCiEDjMYZZS5wiPXnyZFbJaxMhQIQRGzHvWR7XCyOCXsOmiDAi1HmPMMQjDpbpEiDCiL358eNHurW/5SnWdIBbXiDCiA38/Pnzrce2YyZ4//59F3ePLNMl4PbpiL2J0L979+7yDtHDhw8vtzzvdGnEXdvUigSIsCLAWavHp/+qM0BcXMd/q25n1vF57TYBp0a3mUzilePj4+7k5KSLb6gt6ydAhPUzXnoPR0dHl79WGTNCfBnn1uvSCJdegQhLI1vvCk+fPu2ePXt2tZOYEV6/fn31dz+shwAR1sP1cqvLntbEN9MxA9xcYjsxS1jWR4AIa2Ibzx0tc44fYX/16lV6NDFLXH+YL32jwiACRBiEbf5KcXoTIsQSpzXx4N28Ja4BQoK7rgXiydbHjx/P25TaQAJEGAguWy0+2Q8PD6/Ki4R8EVl+bzBOnZY95fq9rj9zAkTI2SxdidBHqG9+skdw43borCXO/ZcJdraPWdv22uIEiLA4q7nvvCug8WTqzQveOH26fodo7g6uFe/a17W3+nFBAkRYENRdb1vkkz1CH9cPsVy/jrhr27PqMYvENYNlHAIesRiBYwRy0V+8iXP8+/fvX11Mr7L7ECueb/r48eMqm7FuI2BGWDEG8cm+7G3NEOfmdcTQw4h9/55lhm7DekRYKQPZF2ArbXTAyu4kDYB2YxUzwg0gi/41ztHnfQG26HbGel/crVrm7tNY+/1btkOEAZ2M05r4FB7r9GbAIdxaZYrHdOsgJ/wCEQY0J74TmOKnbxxT9n3FgGGWWsVdowHtjt9Nnvf7yQM2aZU/TIAIAxrw6dOnAWtZZcoEnBpNuTuObWMEiLAx1HY0ZQJEmHJ3HNvGCBBhY6jtaMoEiJB0Z29vL6ls58vxPcO8/zfrdo5qvKO+d3Fx8Wu8zf1dW4p/cPzLly/dtv9Ts/EbcvGAHhHyfBIhZ6NSiIBTo0LNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiEC/wGgKKC4YMA4TAAAAABJRU5ErkJggg==",srcSet:z.includes("data:image")?void 0:z.startsWith("https")?z:`https://${z.replace("http://","")}`,alt:f.title}):(0,t.jsx)("div",{className:"memori-link-item--card-cover-icon",children:(0,t.jsx)(i.default,{className:"memori-link-item--icon"})}),title:M,description:O})})};n.RenderLinkItem=u;const d=({items:h,baseUrl:f,descriptionOneLine:m=!1,onLinkPreviewInfo:g})=>(0,t.jsx)(l.Transition,{appear:!0,show:!0,as:"div",className:"memori-link-items",children:(0,t.jsx)("div",{className:"memori-link-items--grid",children:h.map((v,y)=>(0,t.jsx)(l.Transition.Child,{as:"div",className:"memori-link-item",enter:`ease-out duration-500 delay-${y*100}`,enterFrom:"opacity-0 scale-95",enterTo:"opacity-1 scale-100",leave:"ease-in duration-300",leaveFrom:"opacity-1 scale-100",leaveTo:"opacity-0 scale-95",children:(0,t.jsx)(n.RenderLinkItem,{item:v,baseUrl:f,descriptionOneLine:m,onLinkPreviewInfo:g})},v.mediumID))})});n.default=d}(ER)),ER}var CR={},wR={},uj;function mke(){return uj||(uj=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.getTranslation=n.dialogKeywords=void 0,n.dialogKeywords=["va bene","no grazie","si","no","sì","arrivederci","non c'entrava","non mi è piaciuto"];const e=r=>r.replaceAll(/<output.*?>(.*?)<\/output>/g,""),t=async(r,i,s,o)=>{var a;let l=e(r);const u=n.dialogKeywords.indexOf(r.toLowerCase())>-1?"IT":s==null?void 0:s.toUpperCase(),d=i.toUpperCase(),f=await(await fetch(`${o||"https://www.aisuru.com"}/api/translate`,{cache:"no-cache",method:"POST",body:JSON.stringify({text:l,target_lang:d,source_lang:u}),headers:{Accept:"*/*","Content-Type":"application/json"}})).json();return(a=f==null?void 0:f.translations)===null||a===void 0?void 0:a[0]};n.getTranslation=t}(wR)),wR}var Ew={},dj;function gke(){if(dj)return Ew;dj=1,Object.defineProperty(Ew,"__esModule",{value:!0});const n=w,e=D,t=({src:r,poster:i,alt:s=""})=>((0,e.useEffect)(()=>{const o=document.createElement("script");return o.src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js",o.type="module",document.head.appendChild(o),()=>{document.head.removeChild(o)}},[]),(0,n.jsx)("div",{className:"model-viewer",children:(0,n.jsx)("model-viewer",{src:r,"ios-src":"",poster:i,alt:s,"shadow-intensity":"1","disable-zoom":!0,"camera-controls":!0,autoplay:!0})}));return Ew.default=t,Ew}var Cw={},hj;function vke(){if(hj)return Cw;hj=1,Object.defineProperty(Cw,"__esModule",{value:!0});const n=ys,e=w,t=n.__importDefault(D),r=Zm,i=n.__importDefault(ub()),s=n.__importDefault(eu()),o=n.__importDefault(eZ()),a=ph,l=n.__importDefault(lo),c=({open:u=!1,onClose:d,className:h,title:f,description:m,children:g,footer:v,loading:y=!1,closable:A=!0,width:C="100%",widthMd:T="100%"})=>{const{t:x}=(0,a.useTranslation)();return(0,e.jsx)(r.Transition,{appear:!0,show:u,as:t.default.Fragment,children:(0,e.jsxs)(r.Dialog,{open:u,onClose:d,className:(0,l.default)("memori-modal",h),children:[(0,e.jsx)(r.Transition.Child,{as:t.default.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,e.jsx)("div",{className:"memori-modal--backdrop"})}),(0,e.jsx)("div",{className:"memori-modal--container",children:(0,e.jsx)("div",{className:"memori-modal--container-scrollable",children:(0,e.jsx)(r.Transition.Child,{as:t.default.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,e.jsxs)(r.Dialog.Panel,{className:"memori-modal--panel",children:[(0,e.jsx)("style",{dangerouslySetInnerHTML:{__html:`
                    .memori-modal--panel {
                      --memori-modal--width: ${C};
                      --memori-modal--width-md: ${T};
                    }
                  `}}),A&&(0,e.jsx)("div",{className:"memori-modal--close",children:(0,e.jsx)(s.default,{ghost:!0,padded:!0,shape:"circle",icon:(0,e.jsx)(o.default,{}),title:x("close")||"Close",onClick:()=>d(!1)})}),(0,e.jsxs)(i.default,{spinning:y,children:[f&&(0,e.jsx)(r.Dialog.Title,{className:"memori-modal--title",children:f}),m&&(0,e.jsx)(r.Dialog.Description,{className:"memori-modal--description",children:m}),g,v&&(0,e.jsx)("div",{className:"memori-modal--footer",children:v})]})]})})})})]})})};return Cw.default=c,Cw}var ww={},fj;function yke(){if(fj)return ww;fj=1,Object.defineProperty(ww,"__esModule",{value:!0});const n=w,e=({className:t,title:r})=>(0,n.jsx)("svg",{...r?{}:{"aria-hidden":"true"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",focusable:"false",role:"img",className:t,"aria-label":r,children:(0,n.jsx)("path",{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0 0 42 42h216v494z"})});return ww.default=e,ww}var Tw={},pj;function _ke(){if(pj)return Tw;pj=1,Object.defineProperty(Tw,"__esModule",{value:!0});const n=w,e=({className:t,title:r})=>(0,n.jsx)("svg",{...r?{}:{"aria-hidden":"true"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",focusable:"false",role:"img",className:t,"aria-label":r,children:(0,n.jsx)("path",{d:"M531.3 574.4l.3-1.4c5.8-23.9 13.1-53.7 7.4-80.7-3.8-21.3-19.5-29.6-32.9-30.2-15.8-.7-29.9 8.3-33.4 21.4-6.6 24-.7 56.8 10.1 98.6-13.6 32.4-35.3 79.5-51.2 107.5-29.6 15.3-69.3 38.9-75.2 68.7-1.2 5.5.2 12.5 3.5 18.8 3.7 7 9.6 12.4 16.5 15 3 1.1 6.6 2 10.8 2 17.6 0 46.1-14.2 84.1-79.4 5.8-1.9 11.8-3.9 17.6-5.9 27.2-9.2 55.4-18.8 80.9-23.1 28.2 15.1 60.3 24.8 82.1 24.8 21.6 0 30.1-12.8 33.3-20.5 5.6-13.5 2.9-30.5-6.2-39.6-13.2-13-45.3-16.4-95.3-10.2-24.6-15-40.7-35.4-52.4-65.8zM421.6 726.3c-13.9 20.2-24.4 30.3-30.1 34.7 6.7-12.3 19.8-25.3 30.1-34.7zm87.6-235.5c5.2 8.9 4.5 35.8.5 49.4-4.9-19.9-5.6-48.1-2.7-51.4.8.1 1.5.7 2.2 2zm-1.6 120.5c10.7 18.5 24.2 34.4 39.1 46.2-21.6 4.9-41.3 13-58.9 20.2-4.2 1.7-8.3 3.4-12.3 5 13.3-24.1 24.4-51.4 32.1-71.4zm155.6 65.5c.1.2.2.5-.4.9h-.2l-.2.3c-.8.5-9 5.3-44.3-8.6 40.6-1.9 45 7.3 45.1 7.4zm191.4-388.2L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0 0 42 42h216v494z"})});return Tw.default=e,Tw}var xw={},mj;function Ske(){if(mj)return xw;mj=1,Object.defineProperty(xw,"__esModule",{value:!0});const n=w,e=({className:t,title:r})=>(0,n.jsx)("svg",{...r?{}:{"aria-hidden":"true"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",focusable:"false",role:"img",className:t,"aria-label":r,children:(0,n.jsx)("path",{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0 0 42 42h216v494zM514.1 580.1l-61.8-102.4c-2.2-3.6-6.1-5.8-10.3-5.8h-38.4c-2.3 0-4.5.6-6.4 1.9-5.6 3.5-7.3 10.9-3.7 16.6l82.3 130.4-83.4 132.8a12.04 12.04 0 0 0 10.2 18.4h34.5c4.2 0 8-2.2 10.2-5.7L510 664.8l62.3 101.4c2.2 3.6 6.1 5.7 10.2 5.7H620c2.3 0 4.5-.7 6.5-1.9 5.6-3.6 7.2-11 3.6-16.6l-84-130.4 85.3-132.5a12.04 12.04 0 0 0-10.1-18.5h-35.7c-4.2 0-8.1 2.2-10.3 5.8l-61.2 102.3z"})});return xw.default=e,xw}var Iw={},gj;function Ake(){if(gj)return Iw;gj=1,Object.defineProperty(Iw,"__esModule",{value:!0});const n=w,e=({className:t,title:r})=>(0,n.jsx)("svg",{...r?{}:{"aria-hidden":"true"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",focusable:"false",role:"img",className:t,"aria-label":r,children:(0,n.jsx)("path",{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0 0 42 42h216v494zM528.1 472h-32.2c-5.5 0-10.3 3.7-11.6 9.1L434.6 680l-46.1-198.7c-1.3-5.4-6.1-9.3-11.7-9.3h-35.4a12.02 12.02 0 0 0-11.6 15.1l74.2 276c1.4 5.2 6.2 8.9 11.6 8.9h32c5.4 0 10.2-3.6 11.6-8.9l52.8-197 52.8 197c1.4 5.2 6.2 8.9 11.6 8.9h31.8c5.4 0 10.2-3.6 11.6-8.9l74.4-276a12.04 12.04 0 0 0-11.6-15.1H647c-5.6 0-10.4 3.9-11.7 9.3l-45.8 199.1-49.8-199.3c-1.3-5.4-6.1-9.1-11.6-9.1z"})});return Iw.default=e,Iw}var vj;function Eke(){return vj||(vj=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.RenderMediaItem=void 0;const e=ys,t=w,r=D,i=d5(),s=mke(),o=f5(),a=e.__importDefault(gke()),l=e.__importDefault(iZ()),c=e.__importDefault(sZ()),u=e.__importDefault(vke()),d=e.__importDefault(yke()),h=e.__importDefault(_ke()),f=e.__importDefault(Ske()),m=e.__importDefault(Ake()),g=Zm,v=({isChild:A=!1,item:C,sessionID:T,tenantID:x,preview:R=!1,baseURL:N,apiURL:M,onClick:O,customMediaRenderer:P})=>{var z,V;const $=(0,i.getResourceUrl)({resourceURI:C.url,sessionID:T,tenantID:x,baseURL:N,apiURL:M}),B=P==null?void 0:P(C.mimeType);if(B)return B;const q=((z=C.url)===null||z===void 0?void 0:z.startsWith("rgb("))||((V=C.url)===null||V===void 0?void 0:V.startsWith("rgba("));switch(C.mimeType){case"image/jpeg":case"image/png":case"image/jpg":case"image/gif":return q?(0,t.jsx)(c.default,{hoverable:!0,className:"memori-media-item--card memori-media-item--image",cover:(0,t.jsxs)("picture",{className:"memori-media-item--figure",children:[(0,t.jsx)("div",{className:"memori-media-item--rgb-item",style:{backgroundColor:C.url}}),C.title&&(0,t.jsx)("figcaption",{className:"memori-media-item--figure-caption",children:C.title})]})}):(0,t.jsx)("a",{className:"memori-media-item--link",href:C.url,onClick:K=>{A&&K.preventDefault(),O&&(K.preventDefault(),O(C.mediumID))},target:"_blank",rel:"noopener noreferrer",title:C.title,children:(0,t.jsx)(c.default,{hoverable:!0,className:"memori-media-item--card memori-media-item--image",cover:(0,t.jsxs)("picture",{className:"memori-media-item--figure",children:[!R&&(0,t.jsx)("source",{srcSet:[$,C.url,C.content].join(", "),type:C.mimeType}),(0,t.jsx)("img",{alt:C.title,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8LAwSDCIMogwMCcmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsis7PPOq3QdDFcvjV3jOD1boQVTPQrgSkktTgbSf4A4LbmgqISBgTEFyFYuLykAsTuAbJEioKOA7DkgdjqEvQHEToKwj4DVhAQ5A9k3gGyB5IxEoBmML4BsnSQk8XQkNtReEOBxcfXxUQg1Mjc0dyHgXNJBSWpFCYh2zi+oLMpMzyhRcASGUqqCZ16yno6CkYGRAQMDKMwhqj/fAIcloxgHQqxAjIHBEugw5sUIsSQpBobtQPdLciLEVJYzMPBHMDBsayhILEqEO4DxG0txmrERhM29nYGBddr//5/DGRjYNRkY/l7////39v///y4Dmn+LgeHANwDrkl1AuO+pmgAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAwqADAAQAAAABAAAAwwAAAAD9b/HnAAAHlklEQVR4Ae3dP3PTWBSGcbGzM6GCKqlIBRV0dHRJFarQ0eUT8LH4BnRU0NHR0UEFVdIlFRV7TzRksomPY8uykTk/zewQfKw/9znv4yvJynLv4uLiV2dBoDiBf4qP3/ARuCRABEFAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghgg0Aj8i0JO4OzsrPv69Wv+hi2qPHr0qNvf39+iI97soRIh4f3z58/u7du3SXX7Xt7Z2enevHmzfQe+oSN2apSAPj09TSrb+XKI/f379+08+A0cNRE2ANkupk+ACNPvkSPcAAEibACyXUyfABGm3yNHuAECRNgAZLuYPgEirKlHu7u7XdyytGwHAd8jjNyng4OD7vnz51dbPT8/7z58+NB9+/bt6jU/TI+AGWHEnrx48eJ/EsSmHzx40L18+fLyzxF3ZVMjEyDCiEDjMYZZS5wiPXnyZFbJaxMhQIQRGzHvWR7XCyOCXsOmiDAi1HmPMMQjDpbpEiDCiL358eNHurW/5SnWdIBbXiDCiA38/Pnzrce2YyZ4//59F3ePLNMl4PbpiL2J0L979+7yDtHDhw8vtzzvdGnEXdvUigSIsCLAWavHp/+qM0BcXMd/q25n1vF57TYBp0a3mUzilePj4+7k5KSLb6gt6ydAhPUzXnoPR0dHl79WGTNCfBnn1uvSCJdegQhLI1vvCk+fPu2ePXt2tZOYEV6/fn31dz+shwAR1sP1cqvLntbEN9MxA9xcYjsxS1jWR4AIa2Ibzx0tc44fYX/16lV6NDFLXH+YL32jwiACRBiEbf5KcXoTIsQSpzXx4N28Ja4BQoK7rgXiydbHjx/P25TaQAJEGAguWy0+2Q8PD6/Ki4R8EVl+bzBOnZY95fq9rj9zAkTI2SxdidBHqG9+skdw43borCXO/ZcJdraPWdv22uIEiLA4q7nvvCug8WTqzQveOH26fodo7g6uFe/a17W3+nFBAkRYENRdb1vkkz1CH9cPsVy/jrhr27PqMYvENYNlHAIesRiBYwRy0V+8iXP8+/fvX11Mr7L7ECueb/r48eMqm7FuI2BGWDEG8cm+7G3NEOfmdcTQw4h9/55lhm7DekRYKQPZF2ArbXTAyu4kDYB2YxUzwg0gi/41ztHnfQG26HbGel/crVrm7tNY+/1btkOEAZ2M05r4FB7r9GbAIdxaZYrHdOsgJ/wCEQY0J74TmOKnbxxT9n3FgGGWWsVdowHtjt9Nnvf7yQM2aZU/TIAIAxrw6dOnAWtZZcoEnBpNuTuObWMEiLAx1HY0ZQJEmHJ3HNvGCBBhY6jtaMoEiJB0Z29vL6ls58vxPcO8/zfrdo5qvKO+d3Fx8Wu8zf1dW4p/cPzLly/dtv9Ts/EbcvGAHhHyfBIhZ6NSiIBTo0LNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiEC/wGgKKC4YMA4TAAAAABJRU5ErkJggg=="}),C.title&&(0,t.jsx)("figcaption",{className:"memori-media-item--figure-caption",children:C.title})]})})});case"application/msword":case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":return(0,t.jsx)("a",{className:"memori-media-item--link",href:$,target:"_blank",rel:"noopener noreferrer",title:C.title,children:(0,t.jsx)(c.default,{hoverable:!0,cover:(0,t.jsx)(m.default,{className:"memori-media-item--icon"}),title:C.title})});case"application/vnd.ms-excel":case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":return(0,t.jsx)("a",{className:"memori-media-item--link",href:$,target:"_blank",rel:"noopener noreferrer",title:C.title,children:(0,t.jsx)(c.default,{hoverable:!0,cover:(0,t.jsx)(f.default,{className:"memori-media-item--icon"}),title:C.title})});case"application/pdf":return(0,t.jsx)("a",{className:"memori-media-item--link",href:$,target:"_blank",rel:"noopener noreferrer",title:C.title,children:(0,t.jsx)(c.default,{hoverable:!0,cover:(0,t.jsx)(h.default,{className:"memori-media-item--icon"}),title:C.title})});case"video/mp4":case"video/quicktime":case"video/avi":case"video/mpeg":return(0,t.jsx)("a",{className:"memori-media-item--link",href:$,onClick:K=>{A&&K.preventDefault(),O&&(K.preventDefault(),O(C.mediumID))},target:"_blank",rel:"noopener noreferrer",title:C.title,children:(0,t.jsx)(c.default,{hoverable:!0,cover:(0,t.jsxs)("video",{style:{width:"100%",height:"100%"},controls:!0,src:$,title:C.title,children:[C.mimeType==="video/quicktime"&&(0,t.jsx)("source",{src:C.url,type:"video/mp4"}),(0,t.jsx)("source",{src:C.url,type:C.mimeType}),"Your browser does not support this video format.",(0,t.jsx)("br",{}),(0,t.jsx)("a",{href:C.url,target:"_blank",rel:"noopener noreferrer",children:"Download the video"})]}),title:C.title})});case"audio/mpeg3":case"audio/wav":case"audio/mpeg":return(0,t.jsx)("a",{className:"memori-media-item--link",href:$,target:"_blank",rel:"noopener noreferrer",title:C.title,children:(0,t.jsx)(c.default,{hoverable:!0,cover:(0,t.jsx)("audio",{style:{width:"100%",height:"100%"},controls:!0,src:$}),title:C.title})});case"model/gltf-binary":return(0,t.jsx)(a.default,{src:$,alt:"",poster:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8LAwSDCIMogwMCcmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsis7PPOq3QdDFcvjV3jOD1boQVTPQrgSkktTgbSf4A4LbmgqISBgTEFyFYuLykAsTuAbJEioKOA7DkgdjqEvQHEToKwj4DVhAQ5A9k3gGyB5IxEoBmML4BsnSQk8XQkNtReEOBxcfXxUQg1Mjc0dyHgXNJBSWpFCYh2zi+oLMpMzyhRcASGUqqCZ16yno6CkYGRAQMDKMwhqj/fAIcloxgHQqxAjIHBEugw5sUIsSQpBobtQPdLciLEVJYzMPBHMDBsayhILEqEO4DxG0txmrERhM29nYGBddr//5/DGRjYNRkY/l7////39v///y4Dmn+LgeHANwDrkl1AuO+pmgAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAwqADAAQAAAABAAAAwwAAAAD9b/HnAAAHlklEQVR4Ae3dP3PTWBSGcbGzM6GCKqlIBRV0dHRJFarQ0eUT8LH4BnRU0NHR0UEFVdIlFRV7TzRksomPY8uykTk/zewQfKw/9znv4yvJynLv4uLiV2dBoDiBf4qP3/ARuCRABEFAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghgg0Aj8i0JO4OzsrPv69Wv+hi2qPHr0qNvf39+iI97soRIh4f3z58/u7du3SXX7Xt7Z2enevHmzfQe+oSN2apSAPj09TSrb+XKI/f379+08+A0cNRE2ANkupk+ACNPvkSPcAAEibACyXUyfABGm3yNHuAECRNgAZLuYPgEirKlHu7u7XdyytGwHAd8jjNyng4OD7vnz51dbPT8/7z58+NB9+/bt6jU/TI+AGWHEnrx48eJ/EsSmHzx40L18+fLyzxF3ZVMjEyDCiEDjMYZZS5wiPXnyZFbJaxMhQIQRGzHvWR7XCyOCXsOmiDAi1HmPMMQjDpbpEiDCiL358eNHurW/5SnWdIBbXiDCiA38/Pnzrce2YyZ4//59F3ePLNMl4PbpiL2J0L979+7yDtHDhw8vtzzvdGnEXdvUigSIsCLAWavHp/+qM0BcXMd/q25n1vF57TYBp0a3mUzilePj4+7k5KSLb6gt6ydAhPUzXnoPR0dHl79WGTNCfBnn1uvSCJdegQhLI1vvCk+fPu2ePXt2tZOYEV6/fn31dz+shwAR1sP1cqvLntbEN9MxA9xcYjsxS1jWR4AIa2Ibzx0tc44fYX/16lV6NDFLXH+YL32jwiACRBiEbf5KcXoTIsQSpzXx4N28Ja4BQoK7rgXiydbHjx/P25TaQAJEGAguWy0+2Q8PD6/Ki4R8EVl+bzBOnZY95fq9rj9zAkTI2SxdidBHqG9+skdw43borCXO/ZcJdraPWdv22uIEiLA4q7nvvCug8WTqzQveOH26fodo7g6uFe/a17W3+nFBAkRYENRdb1vkkz1CH9cPsVy/jrhr27PqMYvENYNlHAIesRiBYwRy0V+8iXP8+/fvX11Mr7L7ECueb/r48eMqm7FuI2BGWDEG8cm+7G3NEOfmdcTQw4h9/55lhm7DekRYKQPZF2ArbXTAyu4kDYB2YxUzwg0gi/41ztHnfQG26HbGel/crVrm7tNY+/1btkOEAZ2M05r4FB7r9GbAIdxaZYrHdOsgJ/wCEQY0J74TmOKnbxxT9n3FgGGWWsVdowHtjt9Nnvf7yQM2aZU/TIAIAxrw6dOnAWtZZcoEnBpNuTuObWMEiLAx1HY0ZQJEmHJ3HNvGCBBhY6jtaMoEiJB0Z29vL6ls58vxPcO8/zfrdo5qvKO+d3Fx8Wu8zf1dW4p/cPzLly/dtv9Ts/EbcvGAHhHyfBIhZ6NSiIBTo0LNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiEC/wGgKKC4YMA4TAAAAABJRU5ErkJggg=="});default:return(0,t.jsx)("a",{className:"memori-media-item--link",href:$,target:"_blank",rel:"noopener noreferrer",title:C.title,children:(0,t.jsx)(c.default,{hoverable:!0,cover:(0,t.jsx)(d.default,{className:"memori-media-item--icon"}),title:C.title})})}};n.RenderMediaItem=v;const y=({items:A,sessionID:C,tenantID:T,translateTo:x,baseURL:R,apiURL:N,customMediaRenderer:M})=>{const[O,P]=(0,r.useState)(A),[z,V]=(0,r.useState)(),$=(0,r.useCallback)(async()=>{if(!x)return;const se=await Promise.all((A??[]).map(async W=>{var ee;if(W.title)try{const Q=await(0,s.getTranslation)(W.title,x);return{...W,title:(ee=Q.text)!==null&&ee!==void 0?ee:W.title}}catch(Q){return console.error(Q),W}else return W}));P(se)},[x,A]);(0,r.useEffect)(()=>{x&&$()},[x,$]);const B=O.filter(se=>{var W;return!(!((W=se.properties)===null||W===void 0)&&W.executable)&&!o.prismSyntaxLangs.map(ee=>ee.mimeType).includes(se.mimeType)}).sort((se,W)=>se.creationTimestamp>W.creationTimestamp?1:se.creationTimestamp<W.creationTimestamp?-1:0),q=O.filter(se=>{var W;return!(!((W=se.properties)===null||W===void 0)&&W.executable)&&o.prismSyntaxLangs.map(ee=>ee.mimeType).includes(se.mimeType)}),K=O.filter(se=>{var W;return se.mimeType==="text/css"&&!!(!((W=se.properties)===null||W===void 0)&&W.executable)});return(0,t.jsxs)(g.Transition,{appear:!0,show:!0,as:"div",className:"memori-media-items",children:[!!B.length&&(0,t.jsx)("div",{className:"memori-media-items--grid",children:B.map((se,W)=>(0,t.jsx)(g.Transition.Child,{as:"div",className:"memori-media-item",enter:`ease-out duration-500 delay-${W*100}`,enterFrom:"opacity-0 scale-95",enterTo:"opacity-1 scale-100",leave:"ease-in duration-300",leaveFrom:"opacity-1 scale-100",leaveTo:"opacity-0 scale-95",children:(0,t.jsx)(n.RenderMediaItem,{isChild:!0,sessionID:C,tenantID:T,baseURL:R,apiURL:N,onClick:ee=>{V(O.find(Q=>Q.mediumID===ee))},item:{...se,title:se.title,url:se.url,content:se.content},customMediaRenderer:M})},se.url+"&index="+W))}),q.map(se=>(0,t.jsx)(g.Transition.Child,{as:"div",className:"memori-media-item--snippet",enter:"ease-out duration-500",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-1 translate-y-0",leave:"ease-in duration-300",leaveFrom:"opacity-1",leaveTo:"opacity-0",children:(0,t.jsx)(l.default,{medium:se},se.mediumID)},se.mediumID)),K.map(se=>(0,t.jsx)("style",{dangerouslySetInnerHTML:{__html:se.content||""}},se.mediumID)),(z==null?void 0:z.mediumID)&&(0,t.jsx)(u.default,{width:"100%",widthMd:"100%",className:"memori-media-item--modal",open:!!z,onClose:()=>V(void 0),footer:null,children:(0,t.jsx)(n.RenderMediaItem,{isChild:!0,sessionID:C,tenantID:T,baseURL:R,apiURL:N,item:{...z,title:z.title,url:z.url,content:z.content},customMediaRenderer:M})})]})};n.default=(0,r.memo)(y)}(CR)),CR}var yj;function p5(){if(yj)return _w;yj=1,Object.defineProperty(_w,"__esModule",{value:!0});const n=ys,e=w,t=D,r=n.__importDefault(eu()),i=n.__importDefault(pke()),s=n.__importDefault(Eke()),o=Zm,a=n.__importDefault(lo),l=ph,c=({hints:u=[],links:d=[],media:h=[],simulateUserPrompt:f=()=>{},sessionID:m,baseUrl:g,apiUrl:v,translateTo:y,customMediaRenderer:A})=>{const{t:C}=(0,l.useTranslation)(),[T,x]=(0,t.useState)(!0),[R,N]=(0,t.useState)(6);return(0,t.useEffect)(()=>{x(!0)},[u]),(0,e.jsxs)("div",{className:"memori-media-widget",children:[(h==null?void 0:h.length)>0&&(0,e.jsx)(s.default,{items:h,sessionID:m,translateTo:y,baseURL:g,apiURL:v,customMediaRenderer:A}),(d==null?void 0:d.length)>0&&(0,e.jsx)(i.default,{items:d,baseUrl:g}),(u==null?void 0:u.length)>0&&T&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(o.Transition,{appear:!0,show:!0,as:"ul",className:"memori-media--hints",children:u.slice(0,R).map((M,O)=>(0,e.jsx)(o.Transition.Child,{as:"li",enter:"ease-out duration-500",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-1 translate-y-0",leave:"ease-in duration-300",leaveFrom:"opacity-1",leaveTo:"opacity-0",children:(0,e.jsx)(r.default,{className:(0,a.default)("memori-media--hint"),primary:!0,onClick:()=>{f(M.originalText,M.text),x(!1)},onTouchEnd:()=>{f(M.originalText,M.text),x(!1)},children:M.text},M.text+O)},M.text+O))}),u.length>R&&(0,e.jsx)("div",{className:"memori-hints--show-more",children:(0,e.jsx)(r.default,{className:"memori-hints--show-more-button",id:"showMoreHints",onClick:()=>N(R+6),children:C("expand")||"Expand"})})]})]})};return _w.default=(0,t.memo)(c),_w}var _j;function Cke(){if(_j)return gw;_j=1,Object.defineProperty(gw,"__esModule",{value:!0});const n=ys,e=w,t=D,r=n.__importDefault(cke),i=n.__importDefault(c5),s=n.__importDefault(ub()),o=n.__importDefault(uke()),a=n.__importDefault(dke),l=hke(),c=ph,u=n.__importDefault(iZ()),d=n.__importDefault(p5()),h=m=>m.endsWith("?")?m:`${m}?`,f=({message:m,apiURL:g,sessionID:v,visible:y=!0,initialMatches:A=[],closeDrawer:C,_TEST_loading:T=!1})=>{const{t:x}=(0,c.useTranslation)(),N=(0,r.default)(g).search.searchMemory,[M,O]=(0,t.useState)(A),[P,z]=(0,t.useState)(T),V=(0,t.useCallback)(async()=>{if(z(!0),!T){try{const{matches:$,...B}=await N(v,{searchType:"Semantic",numberOfResults:3,text:m.questionAnswered,date:m.date,placeName:m.placeName,placeLatitude:m.placeLatitude,placeLongitude:m.placeLongitude,placeUncertaintyKm:m.placeUncertaintyKm,contextVars:m.contextVars,tag:m.tag,memoryTags:m.memoryTags});B.resultCode!==0?(console.error(B),a.default.error(x((0,l.getErrori18nKey)(B.resultCode)))):O($??[])}catch($){console.error("WHYTHISANSWER/FETCH",$),O(A??[])}z(!1)}},[m,v]);return(0,t.useEffect)(()=>{V()},[V,m,v]),(0,e.jsxs)(i.default,{open:y,width:"80%",animated:!1,className:"memori-whythisanswer-drawer",onClose:()=>C(),title:x("whyThisAnswer"),children:[(0,e.jsx)("p",{children:x("whyThisAnswerHelper")}),m.questionAnswered&&(0,e.jsxs)("p",{className:"memori--whythisanswer-question-answered",children:[(0,e.jsxs)("strong",{children:[x("question")||"Question",":"]})," ",m.questionAnswered]}),(0,e.jsxs)(s.default,{primary:!0,spinning:P,children:[!P&&M.length===0&&(0,e.jsx)("p",{role:"info",className:"memori--whythisanswer-no-results",children:x("nothingFound")}),P&&M.length===0&&(0,e.jsxs)("ul",{className:"memori--whythisanswer-list memori--whythisanswer-skeleton",children:[(0,e.jsxs)("li",{children:[(0,e.jsxs)("div",{className:"memori--whythisanswer-title",children:[(0,e.jsx)("span",{className:"memori--whythisanswer-confidence",children:(0,e.jsx)("span",{className:"memori--whythisanswer-skeleton-text"})}),(0,e.jsx)("div",{className:"memori--whythisanswer-title-text",children:(0,e.jsx)("p",{className:"memori--whythisanswer-skeleton-text"})})]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("div",{className:"memori--whythisanswer-skeleton-text"}),(0,e.jsx)("div",{className:"memori--whythisanswer-skeleton-text"}),(0,e.jsx)("div",{className:"memori--whythisanswer-skeleton-text"})]}),(0,e.jsx)("div",{className:"memori--whythisanswer-skeleton-block"})]}),(0,e.jsxs)("li",{children:[(0,e.jsxs)("div",{className:"memori--whythisanswer-title",children:[(0,e.jsx)("span",{className:"memori--whythisanswer-confidence",children:(0,e.jsx)("span",{className:"memori--whythisanswer-skeleton-text"})}),(0,e.jsxs)("div",{className:"memori--whythisanswer-title-text",children:[(0,e.jsx)("p",{className:"memori--whythisanswer-skeleton-text"}),(0,e.jsx)("p",{className:"memori--whythisanswer-skeleton-text"})]})]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("div",{className:"memori--whythisanswer-skeleton-text"}),(0,e.jsx)("div",{className:"memori--whythisanswer-skeleton-text"})]}),(0,e.jsx)("div",{className:"memori--whythisanswer-skeleton-block"})]})]}),M.length>0&&(0,e.jsx)("ul",{className:"memori--whythisanswer-list",children:M.map($=>{var B,q,K,se,W,ee,Q;return(0,e.jsxs)("li",{children:[(0,e.jsxs)("div",{className:"memori--whythisanswer-title",children:[(0,e.jsx)("span",{className:"memori--whythisanswer-confidence",children:$.confidenceLevel}),(0,e.jsxs)("div",{className:"memori--whythisanswer-title-text",children:[(0,e.jsx)("p",{children:(0,e.jsx)("strong",{children:h((B=$.memory.title)!==null&&B!==void 0?B:"")})}),(0,e.jsx)("p",{children:(K=(q=$.memory.titleVariants)===null||q===void 0?void 0:q.map(Y=>h(Y)))===null||K===void 0?void 0:K.join(" | ")})]})]}),(se=$.memory.answers)===null||se===void 0?void 0:se.map((Y,ae)=>(0,e.jsx)("p",{className:"memori--whythisanswer-answer",children:(0,e.jsx)(o.default,{rows:3,children:Y.text})},ae)),(0,e.jsx)(d.default,{links:(W=$.memory.media)===null||W===void 0?void 0:W.filter(Y=>Y.mimeType==="text/html")}),(Q=(ee=$.memory.media)===null||ee===void 0?void 0:ee.filter(Y=>Y.mimeType==="text/plain"))===null||Q===void 0?void 0:Q.map(Y=>(0,e.jsx)(o.default,{rows:2,lineHeightMultiplier:2,innerClassName:"memori--whythisanswer-snippet-expandable",children:(0,e.jsx)(u.default,{medium:Y,showCopyButton:!1},Y.mediumID)},Y.mediumID))]},$.memory.memoryID)})})]})]})};return gw.default=f,gw}const wke=$c(DIe),Tke=$c(Ube);var bw={},Sj;function xke(){if(Sj)return bw;Sj=1,Object.defineProperty(bw,"__esModule",{value:!0});function n(){return{extensions:[{name:"spanTable",level:"block",start(r){var i;return(i=r.match(/^\n *([^\n ].*\|.*)\n/))===null||i===void 0?void 0:i.index},tokenizer(r,i){const o=new RegExp("^ *([^\\n ].*\\|.*\\n(?: *[^\\s].*\\n)*?) {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n| {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)| {0,3}#{1,6} | {0,3}>| {4}[^\\n]| {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n| {0,3}(?:[*+-]|1[.)]) |<\\/?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?: +|\\n|\\/?>)|<(?:script|pre|style|textarea|!--)).*(?:\\n|$))*)\\n*|$)").exec(r);if(o){const a={type:"spanTable",header:o[1].replace(/\n$/,"").split(`
`),align:o[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:o[3]?o[3].replace(/\n$/,"").split(`
`):[]};a.header[0]=t(a.header[0]);const l=a.header[0].reduce((c,u)=>c+u.colspan,0);if(l===a.align.length){a.raw=o[0];let c,u,d,h,f=a.align.length;for(c=0;c<f;c++)/^ *-+: *$/.test(a.align[c])?a.align[c]="right":/^ *:-+: *$/.test(a.align[c])?a.align[c]="center":/^ *:-+ *$/.test(a.align[c])?a.align[c]="left":a.align[c]=null;for(f=a.header.length,c=1;c<f;c++)a.header[c]=t(a.header[c],l,a.header[c-1]);for(f=a.rows.length,c=0;c<f;c++)a.rows[c]=t(a.rows[c],l,a.rows[c-1]);for(f=a.header.length,u=0;u<f;u++)for(h=a.header[u],d=0;d<h.length;d++)h[d].tokens=[],this.lexer.inline(h[d].text,h[d].tokens);for(f=a.rows.length,u=0;u<f;u++)for(h=a.rows[u],d=0;d<h.length;d++)h[d].tokens=[],this.lexer.inline(h[d].text,h[d].tokens);return a}}},renderer(r){let i,s,o,a,l,c,u='<div class="memori--responsive-table-wrapper"><table class="memori--table memori--table--compact">';for(u+="<thead>",i=0;i<r.header.length;i++){o=r.header[i];let d=0;for(u+="<tr>",s=0;s<o.length;s++)a=o[s],c=this.parser.parseInline(a.tokens),u+=e(c,a,"th",r.align[d]),d+=a.colspan;u+="</tr>"}if(u+="</thead>",r.rows.length){for(u+="<tbody>",i=0;i<r.rows.length;i++){for(o=r.rows[i],l=0,u+="<tr>",s=0;s<o.length;s++)a=o[s],c=this.parser.parseInline(a.tokens),u+=e(c,a,"td",r.align[l]),l+=a.colspan;u+="</tr>"}u+="</tbody>"}return u+="</table></div>",u}}]}}bw.default=n;const e=(r,i,s,o)=>i.rowspan?`${`<${s}${i.colspan>1?` colspan=${i.colspan}`:""}${i.rowspan>1?` rowspan=${i.rowspan}`:""}${o?` align=${o}`:""}>`+r}</${s}>
`:"",t=(r,i,s=[])=>{var o,a,l;const c=[...r.matchAll(/(?:[^|\\]|\\.?)+(?:\|+|$)/g)].map(v=>v[0]);!((o=c[0])===null||o===void 0)&&o.trim()||c.shift(),!((a=c[c.length-1])===null||a===void 0)&&a.trim()||c.pop();let u=0,d,h,f,m,g;for(d=0;d<c.length;d++){if(f=c[d].split(/\|+$/)[0],c[d]={rowspan:1,colspan:Math.max(c[d].length-f.length,1),text:f.trim().replace(/\\\|/g,"|")},f.slice(-1)==="^"&&s.length)for(g=0,h=0;h<s.length;h++){if(m=s[h],g===u&&m.colspan===c[d].colspan){c[d].rowSpanTarget=(l=m.rowSpanTarget)!==null&&l!==void 0?l:m,c[d].rowSpanTarget.text+=` ${c[d].text.slice(0,-1)}`,c[d].rowSpanTarget.rowspan+=1,c[d].rowspan=0;break}if(g+=m.colspan,g>u)break}u+=c[d].colspan}if(u>i)c.splice(i);else for(;u<i;)c.push({colspan:1,text:""}),u+=1;return c};return bw}var Aj;function Ike(){if(Aj)return ow;Aj=1,Object.defineProperty(ow,"__esModule",{value:!0});const n=ys,e=w,t=D,r=n.__importDefault(lo),i=Zm,s=d5(),o=n.__importDefault(eke()),a=n.__importDefault(tke()),l=n.__importDefault(nke()),c=n.__importDefault(h5()),u=n.__importDefault(ike()),d=ph,h=ske,f=n.__importDefault(oke),m=n.__importDefault(eu()),g=n.__importDefault(ake()),v=n.__importDefault(rZ()),y=n.__importDefault(lke()),A=n.__importDefault(Cke()),C=nZ(),T=n.__importDefault(wke),x=n.__importDefault(Tke),R=n.__importDefault(xke());h.marked.use({async:!1,gfm:!0,pedantic:!1,renderer:{link:({href:P,title:z,text:V})=>{const $=(0,C.cleanUrl)(P);if($===null)return V;P=$;let B='<a href="'+P+'"';return z&&(B+=' title="'+z+'"'),B+=' target="_blank" rel="noopener noreferrer">'+V+"</a>",B}}}),h.marked.use((0,T.default)()),h.marked.use((0,R.default)());const N=P=>P.split(`
`).reduce((V,$)=>{if($.includes("=")){let B="",q=!1;for(let K=0;K<$.length;K++)$[K]==="["&&!q?B+="\\[":$[K]==="]"&&!q?B+="\\]":B+=$[K],q=$[K]==="\\"&&!q;return V!=null&&V.length?`${V}
${B}`:B}else return V!=null&&V.length?`${V}
${$}`:$},""),M=(P,z=!1)=>{try{let V=h.marked.parse(P.trim().replaceAll(/\[([^\]]+)\]\(([^\)]+)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer">$1</a>').replaceAll(/```markdown([^```]+)```/g,"$1").replaceAll("($","( $").replaceAll(":$",": $").replaceAll("\frac","\\frac").replaceAll("\beta","\\beta").replaceAll("cdot","\\cdot")).trim();return z&&(V=N(V.replace(/\n/g,"<br>"))),V=f.default.sanitize(V,{ADD_ATTR:["target"]}),V.replace(/(<br>)+/g,"<br>").replace(/<p><\/p>/g,"<br>").replace(/<p><br><\/p>/g,"<br>")}catch(V){return console.error(V),P}},O=({message:P,memori:z,tenant:V,baseUrl:$,apiUrl:B,sessionID:q,showFeedback:K,showWhyThisAnswer:se=!0,showCopyButton:W=!0,showTranslationOriginal:ee=!1,simulateUserPrompt:Q,showAIicon:Y=!0,isFirst:ae=!1,useMathFormatting:fe=!1,user:we,userAvatar:ge,experts:Se})=>{var Ke,xe,Qe,We,Ve,te;const{t:ce,i18n:de}=(0,d.useTranslation)(),Pe=de.language||"en",[Te,De]=(0,t.useState)(!1);fe&&h.marked.use((0,x.default)({throwOnError:!1,output:"htmlAndMathml"}));const Ge=P.translatedText||P.text,it=M(Ge,fe),ke=P.fromUser?Ge:(0,C.stripHTML)((0,C.stripOutputTags)(it));return(0,t.useLayoutEffect)(()=>{typeof window<"u"&&!P.fromUser&&fe&&"MathJax"in window&&window.MathJax.typesetPromise&&window.MathJax.typesetPromise([".memori-chat--bubble-content"])},[P.text,P.fromUser,fe]),(0,e.jsxs)(e.Fragment,{children:[(P.initial||ae)&&(0,e.jsx)("div",{className:"memori-chat--bubble-initial"}),(0,e.jsxs)(i.Transition,{show:!0,appear:!0,as:"div",className:(0,r.default)("memori-chat--bubble-container",{"memori-chat--bubble-from-user":!!P.fromUser,"memori-chat--with-addon":P.generatedByAI&&Y||K&&Q}),children:[!P.fromUser&&(0,e.jsx)(i.Transition.Child,{as:"picture",className:"memori-chat--bubble-avatar",enter:"transition ease-in-out duration-300",enterFrom:`opacity-0 scale-075 ${P.fromUser?"translate-x-15":"translate-x--15"}`,enterTo:"opacity-1 scale-1 translate-x-0",leave:"transition ease-in-out duration-300",leaveFrom:"opacity-1 scale-1 translate-x-0",leaveTo:`opacity-0 scale-075 ${P.fromUser?"translate-x-15":"translate-x--15"}`,title:!((Ke=P.emitter)===null||Ke===void 0)&&Ke.length&&z.enableBoardOfExperts?P.emitter:z.name,children:(0,e.jsx)("img",{className:"memori-chat--bubble-avatar-img",alt:!((xe=P.emitter)===null||xe===void 0)&&xe.length&&z.enableBoardOfExperts?P.emitter:z.name,src:!((Qe=P.emitter)===null||Qe===void 0)&&Qe.length&&z.enableBoardOfExperts&&(Se!=null&&Se.find(ct=>ct.name===P.emitter))?`${B}/api/v1/memoriai/memori/avatar/${(We=Se.find(ct=>ct.name===P.emitter))===null||We===void 0?void 0:We.expertMemoriID}`:z.avatarURL&&z.avatarURL.length>0?(0,s.getResourceUrl)({type:"avatar",tenantID:V==null?void 0:V.id,resourceURI:z.avatarURL,baseURL:$,apiURL:B}):(0,s.getResourceUrl)({tenantID:V==null?void 0:V.id,type:"avatar",baseURL:$||"https://www.aisuru.com",apiURL:B}),onError:ct=>{ct.currentTarget.src=z.avatarURL&&z.avatarURL.length>0?(0,s.getResourceUrl)({type:"avatar",tenantID:V==null?void 0:V.id,resourceURI:z.avatarURL,baseURL:$}):(0,s.getResourceUrl)({tenantID:V==null?void 0:V.id,type:"avatar",baseURL:$}),ct.currentTarget.onerror=null}})}),(0,e.jsxs)(i.Transition.Child,{as:"div",className:(0,r.default)("memori-chat--bubble",{"memori-chat--user-bubble":!!P.fromUser,"memori-chat--with-addon":!P.fromUser&&W||P.generatedByAI&&Y||K&&Q,"memori-chat--ai-generated":P.generatedByAI&&Y,"memori-chat--with-feedback":K}),enter:"transition ease-in-out duration-300",enterFrom:`opacity-0 scale-09 translate-x-${P.fromUser?"30":"-30"}`,enterTo:"opacity-1 scale-1 translate-x-0",leave:"transition ease-in-out duration-300",leaveFrom:"opacity-1 scale-1 translate-x-0",leaveTo:`opacity-0 scale-09  translate-x-${P.fromUser?"30":"-30"}`,children:[(0,e.jsx)("div",{dir:"auto",className:"memori-chat--bubble-content",dangerouslySetInnerHTML:{__html:it}}),(!P.fromUser&&W||P.generatedByAI&&Y||K&&Q)&&(0,e.jsxs)("div",{className:"memori-chat--bubble-addon",children:[!P.fromUser&&W&&(0,e.jsx)(m.default,{ghost:!0,shape:"circle",title:ce("copy")||"Copy",className:"memori-chat--bubble-action-icon",icon:(0,e.jsx)(v.default,{"aria-label":ce("copy")||"Copy"}),onClick:()=>navigator.clipboard.writeText(ke)}),!P.fromUser&&W&&ke!==P.text&&(0,e.jsx)(m.default,{ghost:!0,shape:"circle",title:ce("copyRawCode")||"Copy raw code",className:"memori-chat--bubble-action-icon",icon:(0,e.jsx)(y.default,{"aria-label":ce("copyRawCode")||"Copy raw code"}),onClick:()=>navigator.clipboard.writeText(P.text)}),K&&!!Q&&(0,e.jsx)(u.default,{memori:z,className:"memori-chat--bubble-feedback",dropdown:!0,onNegativeClick:ct=>{ct&&Q(ct)}}),P.generatedByAI&&Y&&(0,e.jsx)(c.default,{align:"left",content:ce("generatedByAI"),className:"memori-chat--bubble-action-icon memori-chat--bubble-action-icon--ai",children:(0,e.jsx)("span",{children:(0,e.jsx)(a.default,{title:ce("generatedByAI")||void 0})})}),ee&&P.translatedText&&P.translatedText!==P.text&&(0,e.jsx)(c.default,{align:"left",content:`${Pe==="it"?"Testo originale":"Original text"}: ${P.text}`,className:"memori-chat--bubble-action-icon memori-chat--bubble-action-icon--ai",children:(0,e.jsx)("span",{children:(0,e.jsx)(l.default,{"aria-label":Pe==="it"?"Testo originale":"Original text"})})}),!P.fromUser&&P.questionAnswered&&B&&se&&(0,e.jsx)(m.default,{ghost:!0,shape:"circle",title:ce("whyThisAnswer")||void 0,className:"memori-chat--bubble-action-icon",onClick:()=>De(!0),disabled:Te,icon:(0,e.jsx)(g.default,{title:ce("whyThisAnswer")||void 0})})]})]}),P.fromUser&&(0,e.jsx)(e.Fragment,{children:ge&&typeof ge=="string"||!ge&&(!((Ve=we==null?void 0:we.avatarURL)===null||Ve===void 0)&&Ve.length)?(0,e.jsx)(i.Transition.Child,{as:"picture",className:"memori-chat--bubble-avatar",enter:"transition ease-in-out duration-300",enterFrom:`opacity-0 scale-075 ${P.fromUser?"translate-x-15":"translate-x--15"}`,enterTo:"opacity-1 scale-1 translate-x-0",leave:"transition ease-in-out duration-300",leaveFrom:"opacity-1 scale-1 translate-x-0",leaveTo:`opacity-0 scale-075 ${P.fromUser?"translate-x-15":"translate-x--15"}`,children:(0,e.jsx)("img",{className:"memori-chat--bubble-avatar-img",alt:(te=we==null?void 0:we.userName)!==null&&te!==void 0?te:"User",src:ge??(we==null?void 0:we.avatarURL)})}):ge?(0,e.jsx)(i.Transition.Child,{as:"div",className:"memori-chat--bubble-avatar",enter:"transition ease-in-out duration-300",enterFrom:`opacity-0 scale-075 ${P.fromUser?"translate-x-15":"translate-x--15"}`,enterTo:"opacity-1 scale-1 translate-x-0",leave:"transition ease-in-out duration-300",leaveFrom:"opacity-1 scale-1 translate-x-0",leaveTo:`opacity-0 scale-075 ${P.fromUser?"translate-x-15":"translate-x--15"}`,children:ge}):(0,e.jsx)(i.Transition.Child,{as:"div",className:"memori-chat--bubble-avatar",enter:"transition ease-in-out duration-300",enterFrom:`opacity-0 scale-075 ${P.fromUser?"translate-x-15":"translate-x--15"}`,enterTo:"opacity-1 scale-1 translate-x-0",leave:"transition ease-in-out duration-300",leaveFrom:"opacity-1 scale-1 translate-x-0",leaveTo:`opacity-0 scale-075 ${P.fromUser?"translate-x-15":"translate-x--15"}`,children:(0,e.jsx)(o.default,{})})})]}),Te&&B&&(0,e.jsx)(A.default,{visible:Te,message:P,closeDrawer:()=>De(!1),apiURL:B,sessionID:q})]})};return ow.default=O,ow}var Mw={},Rw={},Nw={},Ej;function bke(){if(Ej)return Nw;Ej=1,Object.defineProperty(Nw,"__esModule",{value:!0});const n=w,e=({className:t,title:r})=>(0,n.jsx)("svg",{...r?{}:{"aria-hidden":"true"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",focusable:"false",role:"img",className:t,"aria-label":r,children:(0,n.jsx)("path",{d:"M855 160.1l-189.2 23.5c-6.6.8-9.3 8.8-4.7 13.5l54.7 54.7-153.5 153.5a8.03 8.03 0 0 0 0 11.3l45.1 45.1c3.1 3.1 8.2 3.1 11.3 0l153.6-153.6 54.7 54.7a7.94 7.94 0 0 0 13.5-4.7L863.9 169a7.9 7.9 0 0 0-8.9-8.9zM416.6 562.3a8.03 8.03 0 0 0-11.3 0L251.8 715.9l-54.7-54.7a7.94 7.94 0 0 0-13.5 4.7L160.1 855c-.6 5.2 3.7 9.5 8.9 8.9l189.2-23.5c6.6-.8 9.3-8.8 4.7-13.5l-54.7-54.7 153.6-153.6c3.1-3.1 3.1-8.2 0-11.3l-45.2-45z"})});return Nw.default=e,Nw}var Pw={},Cj;function Mke(){if(Cj)return Pw;Cj=1,Object.defineProperty(Pw,"__esModule",{value:!0});const n=w,e=({className:t,title:r})=>(0,n.jsx)("svg",{...r?{}:{"aria-hidden":"true"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",focusable:"false",role:"img",className:t,"aria-label":r,children:(0,n.jsx)("path",{d:"M391 240.9c-.8-6.6-8.9-9.4-13.6-4.7l-43.7 43.7L200 146.3a8.03 8.03 0 0 0-11.3 0l-42.4 42.3a8.03 8.03 0 0 0 0 11.3L280 333.6l-43.9 43.9a8.01 8.01 0 0 0 4.7 13.6L401 410c5.1.6 9.5-3.7 8.9-8.9L391 240.9zm10.1 373.2L240.8 633c-6.6.8-9.4 8.9-4.7 13.6l43.9 43.9L146.3 824a8.03 8.03 0 0 0 0 11.3l42.4 42.3c3.1 3.1 8.2 3.1 11.3 0L333.7 744l43.7 43.7A8.01 8.01 0 0 0 391 783l18.9-160.1c.6-5.1-3.7-9.4-8.8-8.8zm221.8-204.2L783.2 391c6.6-.8 9.4-8.9 4.7-13.6L744 333.6 877.7 200c3.1-3.1 3.1-8.2 0-11.3l-42.4-42.3a8.03 8.03 0 0 0-11.3 0L690.3 279.9l-43.7-43.7a8.01 8.01 0 0 0-13.6 4.7L614.1 401c-.6 5.2 3.7 9.5 8.8 8.9zM744 690.4l43.9-43.9a8.01 8.01 0 0 0-4.7-13.6L623 614c-5.1-.6-9.5 3.7-8.9 8.9L633 783.1c.8 6.6 8.9 9.4 13.6 4.7l43.7-43.7L824 877.7c3.1 3.1 8.2 3.1 11.3 0l42.4-42.3c3.1-3.1 3.1-8.2 0-11.3L744 690.4z"})});return Pw.default=e,Pw}var wj;function Rke(){if(wj)return Rw;wj=1,Object.defineProperty(Rw,"__esModule",{value:!0});const n=ys,e=w,t=D,r=n.__importDefault(lo),i=n.__importDefault(eu()),s=n.__importDefault(bke()),o=n.__importDefault(Mke()),a=ph,l=({disabled:c=!1,value:u,onChange:d,onPressEnter:h,onFocus:f,onBlur:m})=>{const{t:g}=(0,a.useTranslation)(),[v,y]=(0,t.useState)(!1);return(0,e.jsx)("div",{"data-testid":"chat-textarea",className:(0,r.default)("memori-chat-textarea",{"memori-chat-textarea--expanded":v,"memori-chat-textarea--disabled":c}),children:(0,e.jsxs)("div",{className:"memori-chat-textarea--inner",children:[(0,e.jsx)("textarea",{className:"memori-chat-textarea--input",disabled:c,value:u,onChange:A=>{d(A.target.value)},onKeyDownCapture:A=>{A.key==="Enter"&&!A.shiftKey&&h&&h(A)},onFocus:f,onBlur:m}),(0,e.jsx)("div",{className:"memori-chat-textarea--expand",children:(0,e.jsx)(i.default,{className:(0,r.default)("memori-chat-textarea--expand-button"),onClick:()=>y(!v),padded:!1,ghost:!0,title:v?g("collapse")||"Collapse":g("expand")||"Expand",icon:v?(0,e.jsx)(o.default,{}):(0,e.jsx)(s.default,{})})})]})})};return Rw.default=l,Rw}var Ow={},Tj;function Nke(){if(Tj)return Ow;Tj=1,Object.defineProperty(Ow,"__esModule",{value:!0});const n=w,e=({className:t,title:r})=>(0,n.jsx)("svg",{...r?{}:{"aria-hidden":"true"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",focusable:"false",role:"img",className:t,"aria-label":r,children:(0,n.jsx)("path",{d:"M931.4 498.9L94.9 79.5c-3.4-1.7-7.3-2.1-11-1.2-8.5 2.1-13.8 10.7-11.7 19.3l86.2 352.2c1.3 5.3 5.2 9.6 10.4 11.3l147.7 50.7-147.6 50.7c-5.2 1.8-9.1 6-10.3 11.3L72.2 926.5c-.9 3.7-.5 7.6 1.2 10.9 3.9 7.9 13.5 11.1 21.5 7.2l836.5-417c3.1-1.5 5.6-4.1 7.2-7.1 3.9-8 .7-17.6-7.2-21.6zM170.8 826.3l50.3-205.6 295.2-101.3c2.3-.8 4.2-2.6 5-5 1.4-4.2-.8-8.7-5-10.2L221.1 403 171 198.2l628 314.9-628.2 313.2z"})});return Ow.default=e,Ow}var Dw={},Lw={},xj;function oZ(){if(xj)return Lw;xj=1,Object.defineProperty(Lw,"__esModule",{value:!0});const n=w,e=({className:t,title:r})=>(0,n.jsx)("svg",{...r?{}:{"aria-hidden":"true"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",focusable:"false",role:"img",className:t,"aria-label":r,children:(0,n.jsx)("path",{d:"M842 454c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8 0 140.3-113.7 254-254 254S258 594.3 258 454c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8 0 168.7 126.6 307.9 290 327.6V884H326.7c-13.7 0-24.7 14.3-24.7 32v36c0 4.4 2.8 8 6.2 8h407.6c3.4 0 6.2-3.6 6.2-8v-36c0-17.7-11-32-24.7-32H548V782.1c165.3-18 294-158 294-328.1zM512 624c93.9 0 170-75.2 170-168V232c0-92.8-76.1-168-170-168s-170 75.2-170 168v224c0 92.8 76.1 168 170 168zm-94-392c0-50.6 41.9-92 94-92s94 41.4 94 92v224c0 50.6-41.9 92-94 92s-94-41.4-94-92V232z"})});return Lw.default=e,Lw}var Ij;function Pke(){if(Ij)return Dw;Ij=1,Object.defineProperty(Dw,"__esModule",{value:!0});const n=ys,e=w,t=D,r=n.__importDefault(oZ()),i=n.__importDefault(eu()),s=n.__importDefault(h5()),o=n.__importDefault(lo),a=ph,l=({listening:c,stopAudio:u,startListening:d,stopListening:h})=>{const{t:f}=(0,a.useTranslation)(),[m,g]=(0,t.useState)(),v=(0,t.useRef)(null),y=C=>{C.preventDefault(),g(f("write_and_speak.holdToSpeak")||"Hold to record"),!v.current&&(v.current=setTimeout(()=>{u(),g(f("write_and_speak.releaseToEndListening")||"Release to end listening"),d()},300))},A=()=>{v.current&&(clearTimeout(v.current),v.current=null),h(),g(void 0)};return(0,t.useEffect)(()=>()=>A(),[]),(0,e.jsx)(s.default,{visible:!!m,content:(0,e.jsx)("span",{children:m||f("write_and_speak.pressAndHoldToSpeak")||"Press and hold to speak"}),align:"topLeft",className:"memori-mic-btn-tooltip",children:(0,e.jsx)(i.default,{primary:!0,className:(0,o.default)("memori-chat-inputs--mic",{"memori-chat-inputs--mic--listening":c}),title:c?f("write_and_speak.micButtonPopoverListening")||"Listening":f("write_and_speak.micButtonPopover")||"Start listening",onMouseDown:y,onTouchStart:y,onMouseUp:A,onTouchEnd:A,shape:"circle",icon:(0,e.jsx)(r.default,{})})})};return Dw.default=l,Dw}var bj;function Oke(){if(bj)return Mw;bj=1,Object.defineProperty(Mw,"__esModule",{value:!0});const n=ys,e=w,t=n.__importDefault(Rke()),r=n.__importDefault(eu()),i=ph,s=n.__importDefault(Nke()),o=n.__importDefault(Pke()),a=n.__importDefault(lo),l=n.__importDefault(oZ()),c=({dialogState:u,userMessage:d="",onChangeUserMessage:h,sendMessage:f,onTextareaFocus:m,onTextareaBlur:g,onTextareaPressEnter:v,showMicrophone:y=!1,microphoneMode:A="HOLD_TO_TALK",listening:C=!1,stopAudio:T,startListening:x,stopListening:R})=>{const{t:N}=(0,i.useTranslation)();return(0,e.jsxs)("fieldset",{id:"chat-fieldset",className:"memori-chat-inputs",disabled:(u==null?void 0:u.state)==="X2a"||(u==null?void 0:u.state)==="X3",children:[(0,e.jsx)(t.default,{value:d,onChange:h,onPressEnter:v,onFocus:m,onBlur:g,disabled:["R2","R3","R4","R5","G3","X3"].includes((u==null?void 0:u.state)||"")}),(0,e.jsx)(r.default,{shape:"circle",primary:!!(d!=null&&d.length),disabled:!d||d.length===0,className:"memori-chat-inputs--send",onClick:()=>{f(d),T(),speechSynthesis.speak(new SpeechSynthesisUtterance(""))},title:N("send")||"Send",icon:(0,e.jsx)(s.default,{})}),y&&A==="HOLD_TO_TALK"&&(0,e.jsx)(o.default,{listening:C,startListening:x,stopListening:()=>{R(),d!=null&&d.length&&f(d)},stopAudio:T}),y&&A==="CONTINUOUS"&&(0,e.jsx)(r.default,{primary:!0,className:(0,a.default)("memori-chat-inputs--mic",{"memori-chat-inputs--mic--listening":C}),title:C?N("write_and_speak.micButtonPopoverListening")||"Listening":N("write_and_speak.micButtonPopover")||"Start listening",onClick:()=>{C?R():(T(),x())},shape:"circle",icon:(0,e.jsx)(l.default,{})})]})};return Mw.default=c,Mw}var kw={},Mj;function Dke(){if(Mj)return kw;Mj=1,Object.defineProperty(kw,"__esModule",{value:!0});const n=w,e=D,t=" ",r=3,i={en:[{delayAfter:r,text:"Generating an accurate and fancy response..."},{delayAfter:r,text:"Generating a response that will blow your mind..."},{delayAfter:r,text:"Generating a response that will make you smile..."},{delayAfter:r,text:"Thinking of a response..."},{delayAfter:r,text:"Thinking of a response that will make you smile..."},{delayAfter:r,text:"Gathering my thoughts..."},{delayAfter:r,text:"Gathering my thoughts to give you a response..."}],it:[{delayAfter:r,text:"Sto generando una risposta accurata e fantasiosa..."},{delayAfter:r,text:"Sto generando una risposta che ti farà impazzire..."},{delayAfter:r,text:"Sto generando una risposta che ti farà sorridere..."},{delayAfter:r,text:"Sto pensando ad una risposta..."},{delayAfter:r,text:"Sto pensando ad una risposta che ti farà sorridere..."},{delayAfter:r,text:"Sto raccogliendo i miei pensieri..."},{delayAfter:r,text:"Sto raccogliendo i miei pensieri per darti una risposta..."}]},s=(a=r)=>new Array(a*20).fill(t).join(""),o=({useDefaultSentences:a=!1,lang:l="en",sentence:c,sentences:u})=>{var d;const[h,f]=(0,e.useState)(0),[m,g]=(0,e.useState)(!((d=u==null?void 0:u[l])===null||d===void 0)&&d.length?`${u[l][0].text.endsWith("...")||!u[l][0].text.length?u[l][0].text:`${u[l][0].text}...`}${s(u[l][0].delayAfter)}`:c?`${c.endsWith("...")||!c.length?c:`${c}...`}${s()}`:""),[v,y]=(0,e.useState)("");return(0,e.useEffect)(()=>{const A=setInterval(()=>{var C;const T=m[v.length];if(T!==void 0&&m.length>0)y(x=>x+T);else if(!((C=u==null?void 0:u[l])===null||C===void 0)&&C.length&&h<u[l].length-1){const x=h+1,R=u[l][x];g(`${R.text.endsWith("...")||!R.text.length?R.text:`${R.text}...`}${s(R.delayAfter)}`),y(""),f(x)}else if(!u&&!c&&a){const x=i[l][Math.floor(Math.random()*i[l].length)];g(`${x.text}${s(x.delayAfter)}`),y("")}},50);return()=>clearInterval(A)}),(0,n.jsx)("div",{className:"memori-chat--bubble",children:(0,n.jsxs)("div",{className:"memori-chat--bubble-typing",children:[(0,n.jsxs)("div",{id:"wave",children:[(0,n.jsx)("span",{className:"dot"}),(0,n.jsx)("span",{className:"dot"}),(0,n.jsx)("span",{className:"dot"})]}),m.length>0&&(0,n.jsx)("p",{children:v})]})})};return kw.default=o,kw}Object.defineProperty(tZ,"__esModule",{value:!0});const e0=ys,Bi=w,fP=e0.__importStar(D),Bw=e0.__importDefault(lo),TR=nZ(),Rj=d5(),Lke=e0.__importDefault(Ike()),Nj=e0.__importDefault(p5()),kke=e0.__importDefault(eu()),Bke=e0.__importDefault(Oke()),Fke=e0.__importDefault(Dke()),zke=f5(),Uke=({memori:n,tenant:e,sessionID:t,baseUrl:r,apiUrl:i,translateTo:s,memoriTyping:o,typingText:a,showTypingText:l=!1,history:c=[],authToken:u,dialogState:d,simulateUserPrompt:h,showDates:f=!1,showContextPerLine:m=!1,showAIicon:g=!0,showWhyThisAnswer:v=!0,showCopyButton:y=!0,showTranslationOriginal:A=!1,selectReceiverTag:C,preview:T=!1,instruct:x=!1,showInputs:R=!0,showMicrophone:N=!1,microphoneMode:M="HOLD_TO_TALK",sendOnEnter:O,setSendOnEnter:P,attachmentsMenuOpen:z,setAttachmentsMenuOpen:V,userMessage:$="",onChangeUserMessage:B,sendMessage:q,listening:K,setEnableFocusChatInput:se,isPlayingAudio:W,stopAudio:ee,startListening:Q,stopListening:Y,resetTranscript:ae,customMediaRenderer:fe,user:we,userAvatar:ge,experts:Se,useMathFormatting:Ke=!1})=>{var xe,Qe,We,Ve,te,ce,de,Pe;const Te=()=>{setTimeout(()=>{var ke,ct,oe;(ke=document.querySelector(".memori-chat--content"))===null||ke===void 0||ke.scrollTo(0,(oe=(ct=document.querySelector(".memori-chat--content"))===null||ct===void 0?void 0:ct.scrollHeight)!==null&&oe!==void 0?oe:0)},200)};(0,fP.useEffect)(()=>{!T&&Te()},[c,T]);const De=()=>{var ke,ct,oe,ne;Y();const Oe=(0,TR.hasTouchscreen)();Oe&&se(!0),Oe&&window.innerWidth<=768&&((ct=(ke=document.getElementById("chat-wrapper"))===null||ke===void 0?void 0:ke.classList)===null||ct===void 0||ct.add("chat-focused"),(ne=(oe=document.querySelector(".memori.memori-widget"))===null||oe===void 0?void 0:oe.classList)===null||ne===void 0||ne.add("chat-focused"),setTimeout(()=>{Te()},300))},Ge=()=>{var ke,ct,oe,ne,Oe;!((ct=(ke=document.getElementById("chat-wrapper"))===null||ke===void 0?void 0:ke.classList)===null||ct===void 0)&&ct.contains("chat-focused")&&((oe=document.getElementById("chat-wrapper"))===null||oe===void 0||oe.classList.remove("chat-focused"),(Oe=(ne=document.querySelector(".memori.memori-widget"))===null||ne===void 0?void 0:ne.classList)===null||Oe===void 0||Oe.remove("chat-focused"),Te())},it=()=>{O==="keypress"&&($==null?void 0:$.length)>0&&(Y(),q($),B(""),ae())};return(0,Bi.jsxs)("div",{className:(0,Bw.default)("memori-chat--wrapper",{"memori-chat-wrapper--translate":s}),id:"chat-wrapper",lang:s==null?void 0:s.toUpperCase(),"data-memori-lang":(Ve=(We=(Qe=(xe=n.culture)===null||xe===void 0?void 0:xe.split("-"))===null||Qe===void 0?void 0:Qe[0])===null||We===void 0?void 0:We.toUpperCase())!==null&&Ve!==void 0?Ve:"EN",children:[(0,Bi.jsx)("div",{className:(0,Bw.default)("memori-chat--history",{"memori-chat--history-touch":(0,TR.hasTouchscreen)()}),children:(0,Bi.jsxs)("div",{className:(0,Bw.default)("memori-chat--content",{"memori-chat--content-touch":(0,TR.hasTouchscreen)()}),children:[(0,Bi.jsx)("div",{className:(0,Bw.default)("memori-chat--cover"),style:{backgroundImage:`url("${(0,Rj.getResourceUrl)({type:"cover",tenantID:e==null?void 0:e.id,resourceURI:n.coverURL,baseURL:r,apiURL:i})}"), url("${(0,Rj.getResourceUrl)({type:"cover",tenantID:e==null?void 0:e.id,baseURL:r||"https://www.aisuru.com",apiURL:i})}")`}}),c.map((ke,ct)=>{var oe,ne,Oe,st;return(0,Bi.jsxs)(fP.default.Fragment,{children:[(0,Bi.jsx)(Lke.default,{isFirst:ct===0,message:ke,memori:n,tenant:e,baseUrl:r,apiUrl:i,sessionID:t,simulateUserPrompt:h,showAIicon:g,showWhyThisAnswer:v,showTranslationOriginal:A,showFeedback:ct===c.length-1&&!ke.fromUser&&(d==null?void 0:d.acceptsFeedback),user:we,userAvatar:ge,experts:Se,showCopyButton:y,useMathFormatting:Ke}),f&&!!ke.timestamp&&(0,Bi.jsx)("small",{className:`memori-chat--timestamp ${ke.fromUser?"text-right":"text-left"}`,children:new Intl.DateTimeFormat("it",{hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date(ke.timestamp.endsWith("Z")?ke.timestamp:`${ke.timestamp}Z`))}),m&&!!Object.keys((oe=ke.contextVars)!==null&&oe!==void 0?oe:{}).length&&(0,Bi.jsx)("div",{className:"memori-chat--context-vars",children:Object.keys((ne=ke.contextVars)!==null&&ne!==void 0?ne:{}).map(Je=>{var ft,zt,je;return((ft=ke.contextVars)===null||ft===void 0?void 0:ft[Je])==="-"?(0,Bi.jsx)("div",{className:"memori-chat--context-tag memori-chat--context-tag-canceled",children:(0,Bi.jsx)("span",{className:"memori-chat--context-tag-text",children:Je})},Je):((zt=ke.contextVars)===null||zt===void 0?void 0:zt[Je])==="✔️"?(0,Bi.jsx)("div",{className:"memori-chat--context-tag",children:(0,Bi.jsx)("span",{className:"memori-chat--context-tag-text",children:Je})},Je):(0,Bi.jsx)("div",{className:"memori-chat--context-tag",children:(0,Bi.jsxs)("span",{className:"memori-chat--context-tag-text",children:[Je,": ",(je=ke.contextVars)===null||je===void 0?void 0:je[Je]]})},Je)})}),(0,Bi.jsx)(Nj.default,{simulateUserPrompt:h,media:(Oe=ke==null?void 0:ke.media)===null||Oe===void 0?void 0:Oe.filter(Je=>Je.mimeType!=="text/html"&&Je.mimeType!=="text/plain"),links:(st=ke==null?void 0:ke.media)===null||st===void 0?void 0:st.filter(Je=>Je.mimeType==="text/html"),sessionID:t,baseUrl:r,apiUrl:i,translateTo:s,customMediaRenderer:fe})]},ct)}),(d==null?void 0:d.hints)&&d.hints.length>0&&!o&&(0,Bi.jsx)(Nj.default,{simulateUserPrompt:h,hints:d.translatedHints?d.translatedHints:d.hints.map(ke=>({text:ke,originalText:ke}))}),!!o&&(0,Bi.jsx)(Fke.default,{useDefaultSentences:l,lang:s?s.toLowerCase()==="it"?"it":"en":((de=(ce=(te=n.culture)===null||te===void 0?void 0:te.split("-"))===null||ce===void 0?void 0:ce[0])===null||de===void 0?void 0:de.toLowerCase())==="it"?"it":"en",sentence:a,sentences:n.enableBoardOfExperts?zke.boardOfExpertsLoadingSentences:void 0},a),(0,Bi.jsx)("div",{id:"end-messages-ref"})]})}),(d==null?void 0:d.state)==="X3"&&t&&(0,Bi.jsx)("div",{className:"memori-chat--known-tags",children:Object.keys((Pe=d.knownTags)!==null&&Pe!==void 0?Pe:{}).filter(ke=>ke!==n.giverTag).map(ke=>{var ct;return(0,Bi.jsx)(kke.default,{icon:(0,Bi.jsx)("span",{className:"memori-chat--known-tag-icon",children:ke}),className:"memori-chat--known-tag",onClick:()=>C(ke),children:(ct=d.knownTags)===null||ct===void 0?void 0:ct[ke]},ke)})}),R&&(0,Bi.jsx)(Bke.default,{userMessage:$,onChangeUserMessage:B,dialogState:d,instruct:x,authToken:u,sendMessage:q,microphoneMode:M,sendOnEnter:O,setSendOnEnter:P,attachmentsMenuOpen:z,setAttachmentsMenuOpen:V,onTextareaPressEnter:it,onTextareaFocus:De,onTextareaBlur:Ge,startListening:Q,stopListening:Y,stopAudio:ee,listening:K,isPlayingAudio:W,showMicrophone:N})]})};var jke=tZ.default=(0,fP.memo)(Uke);function aZ({showOnlyMobile:n,chatProps:e}){const[t,r]=D.useState(!1);return w.jsxs("div",{className:n?"memori-panel-user-text--button-mobile":"memori-panel-user-text--button-desktop",children:[w.jsx("button",{onClick:()=>r(!t),className:"memori-panel-user-text--button",children:"Mostra Chat"}),w.jsx(Z8e,{onClose:()=>r(!1),open:t,children:w.jsx("div",{className:"memori-panel-chat--container",children:w.jsx(jke,{...e,showInputs:!1})})})]})}function Gke({user:n,userLoggedin:e,chatProps:t}){var i,s;const r=(i=t.history)==null?void 0:i.filter(o=>o.fromUser);return w.jsxs("div",{className:"memori-panel--container",children:[w.jsxs("div",{className:"memori-panel-logged-user--container",children:[n!=null&&n.avatarURL?w.jsx("img",{src:n==null?void 0:n.avatarURL,className:"memori-panel-logged-user--avatar"}):w.jsx("div",{className:"memori-panel-unlogged-user--avatar",children:w.jsx("img",{style:{width:35,margin:"auto"},src:"./user-icon.svg",alt:"Utente non loggato"})}),w.jsx("p",{className:"memori-panel-logged-user--text",children:e?n==null?void 0:n.userName:"Utente non loggato"})]}),w.jsxs("div",{className:"memori-panel-user-text--container",children:[w.jsx("p",{className:"memori-panel-user-text--title",children:"Testo Inviato:"}),w.jsx("p",{className:"memori-panel-user-text--text",children:r&&r.length>0?(s=r[r.length-1])==null?void 0:s.text.replaceAll("#",""):"Nessun testo inviato"})]}),w.jsx(aZ,{chatProps:t,showOnlyMobile:!1})]})}var Hke=p5();const Vke=zu(Hke);function $ke({history:n,sendMessage:e,memori:t,sessionID:r,showTypingText:i,startListening:s,dialogState:o,memoriTyping:a,simulateUserPrompt:l}){var u,d,h,f,m,g;ht.useState("");const c=n==null?void 0:n.filter(v=>!v.fromUser);return w.jsxs("div",{className:"memori-chat--container",children:[c&&c.length>0?w.jsxs("div",{className:"memori-chat--header",children:[((u=c[c.length-1])==null?void 0:u.media.length)>0?w.jsx("img",{src:((h=(d=c[c.length-1])==null?void 0:d.media[0])==null?void 0:h.url)+"/"+r,alt:((m=(f=c[c.length-1])==null?void 0:f.media[0])==null?void 0:m.title)+"/"+r,style:{width:"100%",height:"80%",maxHeight:400,borderRadius:"30px"}}):w.jsxs("div",{style:{position:"relative",width:"100%"},children:[w.jsx("img",{src:t==null?void 0:t.avatarURL,className:"memori-chat--header--avatar"}),w.jsx("img",{src:t==null?void 0:t.coverURL,className:"memori-chat--header--cover"})]}),w.jsx("p",{className:"memori-chat--header--text "+(a?"memori-chat--header--text--typing":""),children:a?"...":(g=c[c.length-1])==null?void 0:g.text.split("#")[0]})]}):w.jsx("img",{src:t==null?void 0:t.avatarURL}),w.jsx("div",{className:"memori-chat--media-widget-container",children:o.emission&&!a&&w.jsx(Vke,{memori:t,simulateUserPrompt:l,hints:o.emission.split(`
`).filter(v=>v.startsWith("#")).map(v=>({text:v.replace("#",""),originalText:v}))})})]})}const Wke=({chatProps:n,StartPanel:e,startPanelProps:t,sessionId:r,hasUserActivatedSpeak:i,Chat:s,Header:o,headerProps:a})=>w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"memori-custom-layout--header--container",children:[(n==null?void 0:n.history)&&n.history.length>0&&w.jsx(aZ,{chatProps:n,showOnlyMobile:!0}),w.jsx(o,{...a,showLogin:!0,showSpeaker:!1})]}),w.jsxs("div",{className:"memori-custom-layout--controls--container",children:[n!=null&&n.history&&n.history.length>0||t!=null&&t.isUserLoggedIn?w.jsx(Gke,{user:t==null?void 0:t.user,userLoggedin:t==null?void 0:t.isUserLoggedIn,chatProps:n}):null,r&&i&&s&&n?w.jsx($ke,{...n}):t?w.jsx(e,{...t}):null]})]});function qke(){return w.jsx(TX,{memoriName:"The Land of Memori",ownerUserName:"andrea.patini3",tenantID:"aisuru-staging.aclambda.online",apiURL:"https://backend-staging.memori.ai",engineURL:"https://engine-staging-tmp.memori.ai",baseURL:"https://aisuru-staging.aclambda.online",uiLang:"en",lang:"it",spokenLang:"en",integrationID:"3bbd1999-c289-45aa-a562-3184d1fdfa70",layout:"FULLPAGE",showShare:!0,customLayout:Wke,multilingual:!0})}function Qke(){return w.jsx(w.Fragment,{children:w.jsx("div",{children:w.jsx(qke,{})})})}xR.createRoot(document.getElementById("root")).render(w.jsx(ht.StrictMode,{children:w.jsx(Qke,{})}));
